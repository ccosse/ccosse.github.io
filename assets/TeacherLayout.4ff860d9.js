import{Q as N}from"./QCardSection.9a644ae0.js";import{Q as qt,u as jt,a as nt,P as Xt,A as Zt,b as Ue}from"./AssignmentPager.811fd343.js";import{e as ue,r as v,u as W,_ as de,o as d,aq as m,g as s,w as o,O as A,Q as S,k as r,as as oe,j as c,ar as C,aO as Ne,f as O,i as x,at as j,aG as re,aF as G,a as V,c as xt,ay as es,h as _,T as we,d as ts,y as ss,q as kt,W as as,l as Y,aH as st,P as Ct,s as at}from"./index.600d8139.js";import{d as te,C as I,Q as se}from"./ClosePopup.017ff876.js";import{Q as P}from"./QCard.48f74f10.js";import{Q as T}from"./QTooltip.8a722276.js";import{Q as Ae,D as os,A as ls}from"./DocumentationComponent.a8f50459.js";import{Q as De,a as ns,b as Vt,c as bt,d as is,e as rs}from"./QLayout.34981f01.js";import{Q as Z,a as M,b as pe,f as $t}from"./QList.08417c6a.js";import{Q as us}from"./QTabs.c17a7c84.js";import{u as ce,p as fe,t as ds,a as wt,f as cs,g as ms,j as ot,_ as gs,d as Dt,s as Te}from"./re-store.89a69545.js";import{Q as ae}from"./QInput.d2be4594.js";import{s as R}from"./transform.aea72fbe.js";import{Q as Pe}from"./QImg.7099fc15.js";import{u as hs,a as fs}from"./use-dark.6b8e3cc1.js";import{u as ps,a as vs,b as ys}from"./use-form.50910338.js";import{Q as _s}from"./QToggle.dcc3456b.js";import"./use-key-composition.d803eec0.js";import"./use-prevent-scroll.f961c476.js";import"./scroll.88eb214a.js";import"./QCheckbox.7c94c9f2.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";const Ss=ue({name:"SearchComponent",setup(){const e=ce(),a=v("");return{reStore:e,searchTerms:a,searchSize:v(e.preferences.resLimit),searchResults:v([]),promptSearchSize:v(!1)}},mounted(){W(this.reStore.preferences,async(p,H)=>{console.log("watcher ",p,H),this.searchSize=p.resLimit;for(const[U,u]of Object.entries(this.reStore.langVoices))R("#sfi").classed(u.flagName,!1);const q=this.reStore.preferences.langVoiceKey;R("#sfi").classed(this.reStore.langVoices[q].flagName,!0)});const e=this.reStore.preferences.langVoiceKey,a=this.reStore.langVoices[e].flagName;R("#sfi").classed(a,!0)},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchResults.splice(e,1)},async load(e){console.log(e),console.log(this.searchResults[e]);const a=this.reStore.preferences.langVoiceKey;console.log("calling loadPageId ",this.searchResults[e].pageid,a),await this.reStore.loadPageId(this.searchResults[e].pageid,a),this.reStore.page.imgIdx=0,this.reStore.courses.trigger+=1},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("doSearch ",e,this.searchTerms),this.reStore.wiki.setLang(e.langName);const a=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",a.results.length),this.searchResults=a.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),ks=r("div",{class:"text-h6"},"Search Results Size",-1),Cs={class:"q-pa-md",style:{"max-width":"350px"}},Vs={class:"q-gutter-y-sm column"},bs=r("span",{class:"on-right text-h2",id:"sfi"},null,-1),$s={key:0},ws={class:"row cardheader ptr justify-between"},Ds=["onClick"],Ts={class:"history-remove"};function Ps(e,a,p,H,q,U){return d(),m(j,null,[s(se,{modelValue:e.promptSearchSize,"onUpdate:modelValue":a[2]||(a[2]=u=>e.promptSearchSize=u),persistent:""},{default:o(()=>[s(P,{style:{"min-width":"350px"}},{default:o(()=>[s(N,{align:"center"},{default:o(()=>[ks]),_:1}),s(N,{class:"q-pt-none",align:"center"},{default:o(()=>[s(qt,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":a[0]||(a[0]=u=>e.searchSize=u)},null,8,["modelValue"])]),_:1}),s(te,{align:"center",class:"text-white"},{default:o(()=>[A(s(S,{flat:"",label:"Cancel"},null,512),[[I]]),A(s(S,{flat:"",label:"Update results size",onClick:a[1]||(a[1]=u=>this.updateSearchSize())},null,512),[[I]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r("div",Cs,[s(pe,{bordered:"",class:"rounded-borders"},{default:o(()=>[s(Z,null,{header:o(()=>[s(M,{avatar:""},{default:o(()=>[s(oe,{size:"md",icon:"search",color:"positive","text-color":"white"})]),_:1}),s(M,null,{default:o(()=>[c(" Search ")]),_:1})]),default:o(()=>[s(P,null,{default:o(()=>[r("div",Vs,[s(De,{class:"bg-primary text-white rounded-borders q-my-md"},{default:o(()=>[s(S,{dark:"",standout:"",onClick:a[3]||(a[3]=u=>e.promptSearchSize=!0)},{default:o(()=>[c(C(this.searchResults.length)+" ",1),s(T,null,{default:o(()=>[c("Change results limit ("+C(this.searchSize)+")",1)]),_:1})]),_:1}),bs,s(ae,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":a[6]||(a[6]=u=>e.searchTerms=u),"input-class":"text-right",class:"q-ml-md",onKeyup:[a[7]||(a[7]=u=>this.update()),a[8]||(a[8]=Ne(u=>this.doSearch(),["enter"]))]},{append:o(()=>[e.searchTerms===""?(d(),O(x,{key:0,name:"search",onClick:a[4]||(a[4]=u=>this.doSearch())})):(d(),O(x,{key:1,name:"clear",class:"cursor-pointer",onClick:a[5]||(a[5]=u=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(d(),m("div",$s,[(d(!0),m(j,null,re(this.searchResults,(u,i)=>(d(),O(P,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":a[9]||(a[9]=y=>this.searchResults=y),key:i},{default:o(()=>[r("div",ws,[r("span",{class:"history-title col-grow",onClick:y=>this.load(i)},C(i)+". "+C(u.title.slice(0,25)),9,Ds),r("span",Ts,[s(x,{class:"primary",size:e.xl,color:e.primary,name:"delete",onClick:y=>this.remove(i)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):G("",!0)]),_:1})]),_:1})]),_:1})])],64)}var qs=de(Ss,[["render",Ps]]);const xs=ue({name:"ImagesComponent",setup(){return{reStore:ce(),newCap:v(""),newDesc:v(""),newName:v(""),newSource:v(""),newUrl:v(""),promptAddImage:v(!1)}},mounted(){W(this.reStore.userSnapshot.images,async(e,a)=>{console.log("watcher ",e,a)})},methods:{addImageCB(){console.log("addImageCB",this.newUrl);const e={name:this.newName,desc:this.newDesc,cap:this.newCap,source:this.newSource,url:this.newUrl};this.reStore.saveImage(null,e)},imgCB(e,a){this.reStore.router.push("/teacher/editor"),console.log(e,a),this.reStore.loadImgId(e)},remove(e,a){console.log(e,a),this.reStore.removeImage(e)}}}),Bs={class:"q-pa-md",style:{"max-width":"350px"}},Rs={class:"flex flex-center"},Hs={class:"row cardheader justify-between"},Ks={class:""},Ms={key:0},Us={class:"history-remove ptr"};function Ns(e,a,p,H,q,U){return d(),m(j,null,[s(se,{modelValue:e.promptAddImage,"onUpdate:modelValue":a[5]||(a[5]=u=>e.promptAddImage=u)},{default:o(()=>[s(P,null,{default:o(()=>[s(N,null,{default:o(()=>[s(ae,{modelValue:e.newCap,"onUpdate:modelValue":a[0]||(a[0]=u=>e.newCap=u),label:"caption"},null,8,["modelValue"]),s(ae,{modelValue:e.newDesc,"onUpdate:modelValue":a[1]||(a[1]=u=>e.newDesc=u),label:"description"},null,8,["modelValue"]),s(ae,{modelValue:e.newName,"onUpdate:modelValue":a[2]||(a[2]=u=>e.newName=u),label:"name"},null,8,["modelValue"]),s(ae,{modelValue:e.newSource,"onUpdate:modelValue":a[3]||(a[3]=u=>e.newSource=u),label:"source"},null,8,["modelValue"]),s(ae,{modelValue:e.newUrl,"onUpdate:modelValue":a[4]||(a[4]=u=>e.newUrl=u),label:"url"},null,8,["modelValue"])]),_:1}),s(te,{align:"center",class:"text-white"},{default:o(()=>[A(s(S,{flat:"",label:"Cancel"},null,512),[[I]]),A(s(S,{flat:"",label:"Add",onClick:this.addImageCB},null,8,["onClick"]),[[I]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r("div",Bs,[s(pe,{bordered:"",class:"rounded-borders"},{default:o(()=>[s(Z,{label:"Saved Images"},{header:o(()=>[s(M,{avatar:""},{default:o(()=>[s(oe,{size:"md",color:"positive",icon:"image"})]),_:1}),s(M,null,{default:o(()=>[c(" Images ")]),_:1})]),default:o(()=>[s(P,null,{default:o(()=>[r("div",Rs,[s(S,{"no-caps":"",onClick:a[6]||(a[6]=u=>e.promptAddImage=!0)},{default:o(()=>[c(" Add Image "),s(T,null,{default:o(()=>[c("Add a custom image (only saves url, not image data)")]),_:1})]),_:1})]),r("div",null,[(d(!0),m(j,null,re(this.reStore.userSnapshot.images,(u,i)=>(d(),O(P,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":a[7]||(a[7]=y=>this.reStore.userSnapshot.images=y),key:i},{default:o(()=>[r("div",Hs,[r("span",Ks,[s(x,{name:"title",onClick:y=>this.reStore.setCover(u)},null,8,["onClick"])]),u.cap?(d(),m("span",Ms,C(u.cap.slice(0,25)),1)):G("",!0),r("span",Us,[s(x,{name:"delete",onClick:y=>this.remove(i,u)},null,8,["onClick"])])]),s(Pe,{class:"cardimage",onClick:y=>this.imgCB(i,u),src:u.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])],64)}var As=de(xs,[["render",Ns]]);const Is=ue({name:"BookmarksComponent",setup(){return{reStore:ce()}},mounted(){W(this.reStore.userSnapshot.bookmarks,async(e,a)=>{console.log("watcher ",e,a)})},methods:{imgCB(e,a){this.reStore.router.push("/teacher/editor"),console.log(e,a),this.reStore.page=JSON.parse(JSON.stringify(a)),this.reStore.courses.trigger+=1},remove(e,a){console.log(e,a),this.reStore.removeBookmark(e)}}}),Os={class:"q-pa-md",style:{"max-width":"350px"}},Ls={class:"row cardheader justify-between"},zs={class:"history-remove hidden"},Qs={key:0,class:"fi fi-gb"},Ys={key:1,class:"fi fi-us"},Es={key:2,class:"fi fi-mx"},Ws={key:3,class:"fi fi-fr"},Js={key:4,class:"fi fi-de"},Fs={key:5,class:"fi fi-it"},Gs={key:6,class:"fi fi-br"},js={key:7,class:"fi fi-ke"},Xs={key:8,class:"fi fi-ru"},Zs={key:9,class:"fi fi-th"},ea={key:10,class:"fi fi-cn"},ta={key:11,class:"fi fi-hk"},sa={key:12,class:"fi fi-tw"},aa={key:13,class:"fi fi-kr"},oa={key:14,class:"fi fi-jp"},la={key:15,class:"fi fi-id"},na={key:16,class:"fi fi-xx"},ia={class:"history-remove ptr"};function ra(e,a,p,H,q,U){return d(),m("div",Os,[s(pe,{bordered:"",class:"rounded-borders"},{default:o(()=>[s(Z,{label:"Wikipedia Bookmarks"},{header:o(()=>[s(M,{avatar:""},{default:o(()=>[s(oe,{size:"md",color:"positive",icon:"bookmark"})]),_:1}),s(M,null,{default:o(()=>[c(" Bookmarks ")]),_:1})]),default:o(()=>[s(P,null,{default:o(()=>[r("div",null,[(d(!0),m(j,null,re(this.reStore.userSnapshot.bookmarks,(u,i)=>(d(),O(P,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":a[0]||(a[0]=y=>this.reStore.userSnapshot.bookmarks=y),key:i},{default:o(()=>[r("div",Ls,[r("span",zs,[s(x)]),u.langVoiceKey==="Eng-UK-Fem"?(d(),m("span",Qs)):u.langVoiceKey==="Eng-US"?(d(),m("span",Ys)):u.langVoiceKey==="espa\xF1ol"?(d(),m("span",Es)):u.langVoiceKey==="fran\xE7ais"?(d(),m("span",Ws)):u.langVoiceKey==="Deutsch"?(d(),m("span",Js)):u.langVoiceKey==="italiano"?(d(),m("span",Fs)):u.langVoiceKey==="portugu\xEAs do Brasil"?(d(),m("span",Gs)):u.langVoiceKey==="Kiswahili"?(d(),m("span",js)):u.langVoiceKey==="\u0440\u0443\u0441\u0441\u043A\u0438\u0439"?(d(),m("span",Xs)):u.langVoiceKey==="\u0E44\u0E17\u0E22"?(d(),m("span",Zs)):u.langVoiceKey==="\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09"?(d(),m("span",ea)):u.langVoiceKey==="\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09"?(d(),m("span",ta)):u.langVoiceKey==="\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09"?(d(),m("span",sa)):u.langVoiceKey==="\uD55C\uAD6D\uC758"?(d(),m("span",aa)):u.langVoiceKey==="\u65E5\u672C\u8A9E"?(d(),m("span",oa)):u.langVoiceKey==="Bahasa Indonesia"?(d(),m("span",la)):(d(),m("span",na)),c(" "+C(u.pageTitle.slice(0,25))+" ",1),r("span",ia,[s(x,{name:"delete",onClick:y=>this.remove(i,u)},null,8,["onClick"])])]),s(Pe,{class:"cardimage",onClick:y=>this.imgCB(i,u),src:u.imgs[u.imgIdx].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])}var ua=de(Is,[["render",ra]]);const da=["gregorian","persian"],ca={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>da.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},ma=["update:modelValue"];function ne(e){return e.year+"/"+fe(e.month)+"/"+fe(e.day)}function ga(e,a){const p=V(()=>e.disable!==!0&&e.readonly!==!0),H=V(()=>e.editable===!0?0:-1),q=V(()=>{const i=[];return e.color!==void 0&&i.push(`bg-${e.color}`),e.textColor!==void 0&&i.push(`text-${e.textColor}`),i.join(" ")});function U(){return e.locale!==void 0?{...a.lang.date,...e.locale}:a.lang.date}function u(i){const y=new Date,$=i===!0?null:0;if(e.calendar==="persian"){const ee=ds(y);return{year:ee.jy,month:ee.jm,day:ee.jd}}return{year:y.getFullYear(),month:y.getMonth()+1,day:y.getDate(),hour:$,minute:$,second:$,millisecond:$}}return{editable:p,tabindex:H,headerClass:q,getLocale:U,getCurrentDate:u}}const he=20,ha=["Calendar","Years","Months"],Tt=e=>ha.includes(e),lt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Ce=" \u2014 ";function ie(e){return e.year+"/"+fe(e.month)}var fa=xt({name:"QDate",props:{...ca,...ps,...hs,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:lt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:lt},navigationMaxYearMonth:{type:String,validator:lt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Tt}},emits:[...ma,"rangeStart","rangeEnd","navigation"],setup(e,{slots:a,emit:p}){const{proxy:H}=ss(),{$q:q}=H,U=fs(e,q),{getCache:u}=jt(),{tabindex:i,headerClass:y,getLocale:$,getCurrentDate:ee}=ga(e,q);let ve;const Ie=vs(e),Oe=ys(Ie),Ve=v(null),J=v(ht()),K=v($()),Le=V(()=>ht()),ze=V(()=>$()),w=V(()=>ee()),k=v(ft(J.value,K.value)),E=v(e.defaultView),it=q.lang.rtl===!0?"right":"left",qe=v(it.value),Qe=v(it.value),Ye=k.value.year,xe=v(Ye-Ye%he-(Ye<0?he:0)),L=v(null),Bt=V(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(U.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),me=V(()=>e.color||"primary"),ye=V(()=>e.textColor||"white"),Be=V(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Ee=V(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),X=V(()=>Ee.value.filter(t=>typeof t=="string").map(t=>Ge(t,J.value,K.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),_e=V(()=>{const t=l=>Ge(l,J.value,K.value);return Ee.value.filter(l=>es(l)===!0&&l.from!==void 0&&l.to!==void 0).map(l=>({from:t(l.from),to:t(l.to)})).filter(l=>l.from.dateHash!==null&&l.to.dateHash!==null&&l.from.dateHash<l.to.dateHash)}),Re=V(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const l=wt(t.year,t.month,t.day);return new Date(l.gy,l.gm-1,l.gd)}),We=V(()=>e.calendar==="persian"?ne:(t,l,n)=>cs(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),l===void 0?J.value:l,n===void 0?K.value:n,t.year,t.timezoneOffset)),be=V(()=>X.value.length+_e.value.reduce((t,l)=>t+1+ms(Re.value(l.to),Re.value(l.from)),0)),rt=V(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(L.value!==null){const n=L.value.init,h=Re.value(n);return K.value.daysShort[h.getDay()]+", "+K.value.monthsShort[n.month-1]+" "+n.day+Ce+"?"}if(be.value===0)return Ce;if(be.value>1)return`${be.value} ${K.value.pluralDay}`;const t=X.value[0],l=Re.value(t);return isNaN(l.valueOf())===!0?Ce:K.value.headerTitle!==void 0?K.value.headerTitle(l,t):K.value.daysShort[l.getDay()]+", "+K.value.monthsShort[t.month-1]+" "+t.day}),Rt=V(()=>X.value.concat(_e.value.map(l=>l.from)).sort((l,n)=>l.year-n.year||l.month-n.month)[0]),Ht=V(()=>X.value.concat(_e.value.map(l=>l.to)).sort((l,n)=>n.year-l.year||n.month-l.month)[0]),ut=V(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(be.value===0)return Ce;if(be.value>1){const t=Rt.value,l=Ht.value,n=K.value.monthsShort;return n[t.month-1]+(t.year!==l.year?" "+t.year+Ce+n[l.month-1]+" ":t.month!==l.month?Ce+n[l.month-1]:"")+" "+l.year}return X.value[0].year}),He=V(()=>{const t=[q.iconSet.datetime.arrowLeft,q.iconSet.datetime.arrowRight];return q.lang.rtl===!0?t.reverse():t}),dt=V(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):K.value.firstDayOfWeek),Kt=V(()=>{const t=K.value.daysShort,l=dt.value;return l>0?t.slice(l,7).concat(t.slice(0,l)):t}),le=V(()=>{const t=k.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():ot(t.year,t.month)}),Mt=V(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),z=V(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Q=V(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Je=V(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return z.value!==null&&z.value.year>=k.value.year&&(t.year.prev=!1,z.value.year===k.value.year&&z.value.month>=k.value.month&&(t.month.prev=!1)),Q.value!==null&&Q.value.year<=k.value.year&&(t.year.next=!1,Q.value.year===k.value.year&&Q.value.month<=k.value.month&&(t.month.next=!1)),t}),Ke=V(()=>{const t={};return X.value.forEach(l=>{const n=ie(l);t[n]===void 0&&(t[n]=[]),t[n].push(l.day)}),t}),ct=V(()=>{const t={};return _e.value.forEach(l=>{const n=ie(l.from),h=ie(l.to);if(t[n]===void 0&&(t[n]=[]),t[n].push({from:l.from.day,to:n===h?l.to.day:void 0,range:l}),n<h){let g;const{year:D,month:f}=l.from,b=f<12?{year:D,month:f+1}:{year:D+1,month:1};for(;(g=ie(b))<=h;)t[g]===void 0&&(t[g]=[]),t[g].push({from:void 0,to:g===h?l.to.day:void 0,range:l}),b.month++,b.month>12&&(b.year++,b.month=1)}}),t}),$e=V(()=>{if(L.value===null)return;const{init:t,initHash:l,final:n,finalHash:h}=L.value,[g,D]=l<=h?[t,n]:[n,t],f=ie(g),b=ie(D);if(f!==F.value&&b!==F.value)return;const B={};return f===F.value?(B.from=g.day,B.includeFrom=!0):B.from=1,b===F.value?(B.to=D.day,B.includeTo=!0):B.to=le.value,B}),F=V(()=>ie(k.value)),Ut=V(()=>{const t={};if(e.options===void 0){for(let n=1;n<=le.value;n++)t[n]=!0;return t}const l=typeof e.options=="function"?e.options:n=>e.options.includes(n);for(let n=1;n<=le.value;n++){const h=F.value+"/"+fe(n);t[n]=l(h)}return t}),Nt=V(()=>{const t={};if(e.events===void 0)for(let l=1;l<=le.value;l++)t[l]=!1;else{const l=typeof e.events=="function"?e.events:n=>e.events.includes(n);for(let n=1;n<=le.value;n++){const h=F.value+"/"+fe(n);t[n]=l(h)===!0&&Mt.value(h)}}return t}),At=V(()=>{let t,l;const{year:n,month:h}=k.value;if(e.calendar!=="persian")t=new Date(n,h-1,1),l=new Date(n,h-1,0).getDate();else{const g=wt(n,h,1);t=new Date(g.gy,g.gm-1,g.gd);let D=h-1,f=n;D===0&&(D=12,f--),l=ot(f,D)}return{days:t.getDay()-dt.value-1,endDay:l}}),mt=V(()=>{const t=[],{days:l,endDay:n}=At.value,h=l<0?l+7:l;if(h<6)for(let f=n-h;f<=n;f++)t.push({i:f,fill:!0});const g=t.length;for(let f=1;f<=le.value;f++){const b={i:f,event:Nt.value[f],classes:[]};Ut.value[f]===!0&&(b.in=!0,b.flat=!0),t.push(b)}if(Ke.value[F.value]!==void 0&&Ke.value[F.value].forEach(f=>{const b=g+f-1;Object.assign(t[b],{selected:!0,unelevated:!0,flat:!1,color:me.value,textColor:ye.value})}),ct.value[F.value]!==void 0&&ct.value[F.value].forEach(f=>{if(f.from!==void 0){const b=g+f.from-1,B=g+(f.to||le.value)-1;for(let tt=b;tt<=B;tt++)Object.assign(t[tt],{range:f.range,unelevated:!0,color:me.value,textColor:ye.value});Object.assign(t[b],{rangeFrom:!0,flat:!1}),f.to!==void 0&&Object.assign(t[B],{rangeTo:!0,flat:!1})}else if(f.to!==void 0){const b=g+f.to-1;for(let B=g;B<=b;B++)Object.assign(t[B],{range:f.range,unelevated:!0,color:me.value,textColor:ye.value});Object.assign(t[b],{flat:!1,rangeTo:!0})}else{const b=g+le.value-1;for(let B=g;B<=b;B++)Object.assign(t[B],{range:f.range,unelevated:!0,color:me.value,textColor:ye.value})}}),$e.value!==void 0){const f=g+$e.value.from-1,b=g+$e.value.to-1;for(let B=f;B<=b;B++)t[B].color=me.value,t[B].editRange=!0;$e.value.includeFrom===!0&&(t[f].editRangeFrom=!0),$e.value.includeTo===!0&&(t[b].editRangeTo=!0)}k.value.year===w.value.year&&k.value.month===w.value.month&&(t[g+w.value.day-1].today=!0);const D=t.length%7;if(D>0){const f=7-D;for(let b=1;b<=f;b++)t.push({i:b,fill:!0})}return t.forEach(f=>{let b="q-date__calendar-item ";f.fill===!0?b+="q-date__calendar-item--fill":(b+=`q-date__calendar-item--${f.in===!0?"in":"out"}`,f.range!==void 0&&(b+=` q-date__range${f.rangeTo===!0?"-to":f.rangeFrom===!0?"-from":""}`),f.editRange===!0&&(b+=` q-date__edit-range${f.editRangeFrom===!0?"-from":""}${f.editRangeTo===!0?"-to":""}`),(f.range!==void 0||f.editRange===!0)&&(b+=` text-${f.color}`)),f.classes=b}),t}),It=V(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});W(()=>e.modelValue,t=>{if(ve===t)ve=0;else{const{year:l,month:n}=ft(J.value,K.value);Se(l,n)}}),W(E,()=>{Ve.value!==null&&H.$el.contains(document.activeElement)===!0&&Ve.value.focus()}),W(()=>k.value.year,t=>{p("navigation",{year:t,month:k.value.month})}),W(()=>k.value.month,t=>{p("navigation",{year:k.value.year,month:t})}),W(Le,t=>{St(t,K.value,"mask"),J.value=t}),W(ze,t=>{St(J.value,t,"locale"),K.value=t});function gt(){const t=w.value,l=Ke.value[ie(t)];(l===void 0||l.includes(t.day)===!1)&&Xe(t),Fe(t.year,t.month)}function Ot(t){Tt(t)===!0&&(E.value=t)}function Lt(t,l){["month","year"].includes(t)&&(t==="month"?vt:je)(l===!0?-1:1)}function Fe(t,l){E.value="Calendar",Se(t,l)}function zt(t,l){if(e.range===!1||!t){L.value=null;return}const n=Object.assign({...k.value},t),h=l!==void 0?Object.assign({...k.value},l):n;L.value={init:n,initHash:ne(n),final:h,finalHash:ne(h)},Fe(n.year,n.month)}function ht(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ge(t,l,n){return gs(t,l,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function ft(t,l){const n=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(n.length===0)return pt();const h=n[n.length-1],g=Ge(h.from!==void 0?h.from:h,t,l);return g.dateHash===null?pt():g}function pt(){let t,l;if(e.defaultYearMonth!==void 0){const n=e.defaultYearMonth.split("/");t=parseInt(n[0],10),l=parseInt(n[1],10)}else{const n=w.value!==void 0?w.value:ee();t=n.year,l=n.month}return{year:t,month:l,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+fe(l)+"/01"}}function vt(t){let l=k.value.year,n=Number(k.value.month)+t;n===13?(n=1,l++):n===0&&(n=12,l--),Se(l,n),Be.value===!0&&Me("month")}function je(t){const l=Number(k.value.year)+t;Se(l,k.value.month),Be.value===!0&&Me("year")}function Qt(t){Se(t,k.value.month),E.value=e.defaultView==="Years"?"Months":"Calendar",Be.value===!0&&Me("year")}function Yt(t){Se(k.value.year,t),E.value="Calendar",Be.value===!0&&Me("month")}function Et(t,l){const n=Ke.value[l];(n!==void 0&&n.includes(t.day)===!0?Ze:Xe)(t)}function ge(t){return{year:t.year,month:t.month,day:t.day}}function Se(t,l){z.value!==null&&t<=z.value.year&&(t=z.value.year,l<z.value.month&&(l=z.value.month)),Q.value!==null&&t>=Q.value.year&&(t=Q.value.year,l>Q.value.month&&(l=Q.value.month));const n=t+"/"+fe(l)+"/01";n!==k.value.dateHash&&(qe.value=k.value.dateHash<n==(q.lang.rtl!==!0)?"left":"right",t!==k.value.year&&(Qe.value=qe.value),kt(()=>{xe.value=t-t%he-(t<0?he:0),Object.assign(k.value,{year:t,month:l,day:1,dateHash:n})}))}function yt(t,l,n){const h=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;ve=h;const{reason:g,details:D}=_t(l,n);p("update:modelValue",h,g,D)}function Me(t){const l=X.value[0]!==void 0&&X.value[0].dateHash!==null?{...X.value[0]}:{...k.value};kt(()=>{l.year=k.value.year,l.month=k.value.month;const n=e.calendar!=="persian"?new Date(l.year,l.month,0).getDate():ot(l.year,l.month);l.day=Math.min(Math.max(1,l.day),n);const h=ke(l);ve=h;const{details:g}=_t("",l);p("update:modelValue",h,t,g)})}function _t(t,l){return l.from!==void 0?{reason:`${t}-range`,details:{...ge(l.target),from:ge(l.from),to:ge(l.to)}}:{reason:`${t}-day`,details:ge(l)}}function ke(t,l,n){return t.from!==void 0?{from:We.value(t.from,l,n),to:We.value(t.to,l,n)}:We.value(t,l,n)}function Xe(t){let l;if(e.multiple===!0)if(t.from!==void 0){const n=ne(t.from),h=ne(t.to),g=X.value.filter(f=>f.dateHash<n||f.dateHash>h),D=_e.value.filter(({from:f,to:b})=>b.dateHash<n||f.dateHash>h);l=g.concat(D).concat(t).map(f=>ke(f))}else{const n=Ee.value.slice();n.push(ke(t)),l=n}else l=ke(t);yt(l,"add",t)}function Ze(t){if(e.noUnset===!0)return;let l=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const n=ke(t);t.from!==void 0?l=e.modelValue.filter(h=>h.from!==void 0?h.from!==n.from&&h.to!==n.to:!0):l=e.modelValue.filter(h=>h!==n),l.length===0&&(l=null)}yt(l,"remove",t)}function St(t,l,n){const h=X.value.concat(_e.value).map(g=>ke(g,t,l)).filter(g=>g.from!==void 0?g.from.dateHash!==null&&g.to.dateHash!==null:g.dateHash!==null);p("update:modelValue",(e.multiple===!0?h:h[0])||null,n)}function Wt(){if(e.minimal!==!0)return _("div",{class:"q-date__header "+y.value},[_("div",{class:"relative-position"},[_(we,{name:"q-transition--fade"},()=>_("div",{key:"h-yr-"+ut.value,class:"q-date__header-subtitle q-date__header-link "+(E.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...u("vY",{onClick(){E.value="Years"},onKeyup(t){t.keyCode===13&&(E.value="Years")}})},[ut.value]))]),_("div",{class:"q-date__header-title relative-position flex no-wrap"},[_("div",{class:"relative-position col"},[_(we,{name:"q-transition--fade"},()=>_("div",{key:"h-sub"+rt.value,class:"q-date__header-title-label q-date__header-link "+(E.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...u("vC",{onClick(){E.value="Calendar"},onKeyup(t){t.keyCode===13&&(E.value="Calendar")}})},[rt.value]))]),e.todayBtn===!0?_(S,{class:"q-date__header-today self-start",icon:q.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:i.value,onClick:gt}):null])])}function et({label:t,type:l,key:n,dir:h,goTo:g,boundaries:D,cls:f}){return[_("div",{class:"row items-center q-date__arrow"},[_(S,{round:!0,dense:!0,size:"sm",flat:!0,icon:He.value[0],tabindex:i.value,disable:D.prev===!1,...u("go-#"+l,{onClick(){g(-1)}})})]),_("div",{class:"relative-position overflow-hidden flex flex-center"+f},[_(we,{name:"q-transition--jump-"+h},()=>_("div",{key:n},[_(S,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:i.value,...u("view#"+l,{onClick:()=>{E.value=l}})})]))]),_("div",{class:"row items-center q-date__arrow"},[_(S,{round:!0,dense:!0,size:"sm",flat:!0,icon:He.value[1],tabindex:i.value,disable:D.next===!1,...u("go+#"+l,{onClick(){g(1)}})})])]}const Jt={Calendar:()=>[_("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[_("div",{class:"q-date__navigation row items-center no-wrap"},et({label:K.value.months[k.value.month-1],type:"Months",key:k.value.month,dir:qe.value,goTo:vt,boundaries:Je.value.month,cls:" col"}).concat(et({label:k.value.year,type:"Years",key:k.value.year,dir:Qe.value,goTo:je,boundaries:Je.value.year,cls:""}))),_("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Kt.value.map(t=>_("div",{class:"q-date__calendar-item"},[_("div",t)]))),_("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[_(we,{name:"q-transition--slide-"+qe.value},()=>_("div",{key:F.value,class:"q-date__calendar-days fit"},mt.value.map(t=>_("div",{class:t.classes},[t.in===!0?_(S,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:i.value,...u("day#"+t.i,{onClick:()=>{Ft(t.i)},onMouseover:()=>{Gt(t.i)}})},t.event!==!1?()=>_("div",{class:"q-date__event bg-"+t.event}):null):_("div",""+t.i)]))))])])],Months(){const t=k.value.year===w.value.year,l=h=>z.value!==null&&k.value.year===z.value.year&&z.value.month>h||Q.value!==null&&k.value.year===Q.value.year&&Q.value.month<h,n=K.value.monthsShort.map((h,g)=>{const D=k.value.month===g+1;return _("div",{class:"q-date__months-item flex flex-center"},[_(S,{class:t===!0&&w.value.month===g+1?"q-date__today":null,flat:D!==!0,label:h,unelevated:D,color:D===!0?me.value:null,textColor:D===!0?ye.value:null,tabindex:i.value,disable:l(g+1),...u("month#"+g,{onClick:()=>{Yt(g+1)}})})])});return e.yearsInMonthView===!0&&n.unshift(_("div",{class:"row no-wrap full-width"},[et({label:k.value.year,type:"Years",key:k.value.year,dir:Qe.value,goTo:je,boundaries:Je.value.year,cls:" col"})])),_("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const t=xe.value,l=t+he,n=[],h=g=>z.value!==null&&z.value.year>g||Q.value!==null&&Q.value.year<g;for(let g=t;g<=l;g++){const D=k.value.year===g;n.push(_("div",{class:"q-date__years-item flex flex-center"},[_(S,{key:"yr"+g,class:w.value.year===g?"q-date__today":null,flat:!D,label:g,dense:!0,unelevated:D,color:D===!0?me.value:null,textColor:D===!0?ye.value:null,tabindex:i.value,disable:h(g),...u("yr#"+g,{onClick:()=>{Qt(g)}})})]))}return _("div",{class:"q-date__view q-date__years flex flex-center"},[_("div",{class:"col-auto"},[_(S,{round:!0,dense:!0,flat:!0,icon:He.value[0],tabindex:i.value,disable:h(t),...u("y-",{onClick:()=>{xe.value-=he}})})]),_("div",{class:"q-date__years-content col self-stretch row items-center"},n),_("div",{class:"col-auto"},[_(S,{round:!0,dense:!0,flat:!0,icon:He.value[1],tabindex:i.value,disable:h(l),...u("y+",{onClick:()=>{xe.value+=he}})})])])}};function Ft(t){const l={...k.value,day:t};if(e.range===!1){Et(l,F.value);return}if(L.value===null){const n=mt.value.find(g=>g.fill!==!0&&g.i===t);if(e.noUnset!==!0&&n.range!==void 0){Ze({target:l,from:n.range.from,to:n.range.to});return}if(n.selected===!0){Ze(l);return}const h=ne(l);L.value={init:l,initHash:h,final:l,finalHash:h},p("rangeStart",ge(l))}else{const n=L.value.initHash,h=ne(l),g=n<=h?{from:L.value.init,to:l}:{from:l,to:L.value.init};L.value=null,Xe(n===h?l:{target:l,...g}),p("rangeEnd",{from:ge(g.from),to:ge(g.to)})}}function Gt(t){if(L.value!==null){const l={...k.value,day:t};Object.assign(L.value,{final:l,finalHash:ne(l)})}}return Object.assign(H,{setToday:gt,setView:Ot,offsetCalendar:Lt,setCalendarTo:Fe,setEditingRange:zt}),()=>{const t=[_("div",{class:"q-date__content col relative-position"},[_(we,{name:"q-transition--fade"},Jt[E.value])])],l=ts(a.default);return l!==void 0&&t.push(_("div",{class:"q-date__actions"},l)),e.name!==void 0&&e.disable!==!0&&Oe(t,"push"),_("div",{class:Bt.value,...It.value},[Wt(),_("div",{ref:Ve,class:"q-date__main col column",tabindex:-1},t)])}}});const pa=["top","middle","bottom"];var va=xt({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>pa.includes(e)}},setup(e,{slots:a}){const p=V(()=>e.align!==void 0?{verticalAlign:e.align}:null),H=V(()=>{const q=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(q!==void 0?` text-${q}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>_("div",{class:H.value,style:p.value,role:"status","aria-label":e.label},as(a.default,e.label!==void 0?[e.label]:[]))}});const ya=ue({name:"OTDComponent",setup(){const e=ce(),a=Date.now(),p=Dt.formatDate(a,"MM/DD");return{reStore:e,otditems:v([]),promptOTDDate:v(!1),otddate:v(Date.now()),otdlabel:v(p),otdtype:v("selected")}},mounted(){this.init(),W(this.reStore.preferences,async(e,a)=>{console.log("OTD watcher"),e.langVoiceKey!==a.langVoiceKey?this.init():(console.log("OTD watcher ",e),this.init())})},methods:{async init(){console.log("OTD init");const e=this.reStore.preferences.langVoiceKey;await this.reStore.wiki.setLang(this.reStore.langVoices[e].langName);const a=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=a[this.otdtype],console.log(this.otditems);for(const[H,q]of Object.entries(this.reStore.langVoices)){const U=q.flagName;R("#otdfi").classed(U,!1)}const p=this.reStore.langVoices[e].flagName;R("#otdfi").classed(p,!0)},async loadPageId(e){console.log("loadPageId ",e);const a=this.reStore.preferences.langVoiceKey;console.log("OTD load ",a),this.reStore.loadPageId(e,a),this.reStore.router.push("/teacher/editor")},async load(e){console.log("load",this.otditems[e].text),console.log("load",this.otditems[e]);const a=this.reStore.preferences.langVoiceKey;console.log("OTD load ",a),this.reStore.loadPageId(this.otditems[e].pages[0].pageid,a),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const e=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=e.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=Dt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(e){console.log("otdOptionsCB",this.otdtype);const a=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=a[this.otdtype]}}}),_a=r("div",{class:"text-h6"},"Select Date",-1),Sa={class:"q-pa-md",style:{"max-width":"350px"}},ka={class:"q-gutter-y-sm column"},Ca=r("span",{id:"otdfi",class:"pfi text-h4"},null,-1),Va={class:""},ba=["onClick"],$a=r("br",null,null,-1);function wa(e,a,p,H,q,U){return d(),m(j,null,[s(se,{modelValue:e.promptOTDDate,"onUpdate:modelValue":a[2]||(a[2]=u=>e.promptOTDDate=u),persistent:""},{default:o(()=>[s(P,{style:{"min-width":"350px"}},{default:o(()=>[s(N,{align:"center"},{default:o(()=>[_a]),_:1}),s(fa,{modelValue:e.otddate,"onUpdate:modelValue":a[0]||(a[0]=u=>e.otddate=u),minimal:""},null,8,["modelValue"]),s(te,{align:"center",class:"text-white"},{default:o(()=>[A(s(S,{flat:"",label:"Cancel"},null,512),[[I]]),A(s(S,{flat:"",label:"Update OTD date",onClick:a[1]||(a[1]=u=>this.updateOTDDate())},null,512),[[I]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r("div",Sa,[s(pe,{bordered:"",class:"rounded-borders"},{default:o(()=>[s(Z,null,{header:o(()=>[s(M,{avatar:""},{default:o(()=>[s(oe,{size:"md",color:"positive",icon:"stars"})]),_:1}),s(M,null,{default:o(()=>[c(" On This Day ")]),_:1})]),default:o(()=>[s(P,null,{default:o(()=>[r("div",ka,[s(De,{class:"bg-primary text-white rounded-borders q-my-md"},{default:o(()=>[s(S,{dark:"",standout:"",onClick:a[3]||(a[3]=u=>e.promptOTDDate=!0)},{default:o(()=>[c(C(e.otdlabel),1)]),_:1}),s(Ae),Ca,s(Ae),s(nt,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":a[4]||(a[4]=u=>this.otdtype=u),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:a[5]||(a[5]=u=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),r("div",Va,[(d(!0),m(j,null,re(e.otditems,(u,i)=>(d(),O(P,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:e.otditems,"onUpdate:modelValue":a[6]||(a[6]=y=>e.otditems=y),key:i},{default:o(()=>[r("span",{style:{cursor:"pointer"},onClick:y=>this.load(i)},C(i),9,ba),c(". "+C(u.year)+" "+C(u.text),1),$a,(d(!0),m(j,null,re(u.pages,(y,$)=>(d(),m("span",{key:$},[s(va,{class:"on-left",color:"accent",style:{cursor:"pointer"},onClick:ee=>this.loadPageId(y.pageid)},{default:o(()=>[s(T,null,{default:o(()=>[c(C(y.title),1)]),_:2},1024),s(x,{size:"xs",name:"link"})]),_:2},1032,["onClick"])]))),128))]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])],64)}var Da=de(ya,[["render",wa]]);function Pt(e){return e===null||e===""?!1:(e=e.toString(),e=e.replaceAll("&nbsp;",""),e.replace(/(<([^>]+)>)/ig,""))}const Ta=ue({name:"PagerComponent",setup(){const e=ce();return{reStore:e,assignment:v(null),promptAssignmentTitle:v(!1),promptPageTitle:v(!1),promptPctReplace:v(!1),promptLanguage:v(!1),promptGuideWords:v(!1),langVoices:v(e.preferences.langVoices),targetLangVoiceKey:v(null),targetPctReplace:v(null),targetGuideWords:v(null),coverExpanded:v(!0),pagesExpanded:v(!0)}},mounted(){console.log("mounted"),this.reStore.courses.ck&&this.reStore.courses.aid&&(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[this.reStore.courses.ck].assignments[this.reStore.courses.aid]))),W(this.reStore.courses,async(e,a)=>{this.reStore.courses.ck||(this.assignment=null),this.reStore.courses.aid||(this.assignment=null),this.assignment&&e.aid&&e.ck&&this.assignment.pages.length!=e[e.ck].assignments[e.aid].pages.length&&(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid])),console.log("Pager reloading assignment b/c pages.length changed")),!this.assignment&&e.ck&&e.aid?(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid])),console.log("Pager loaded fresh copy of assignment")):e.aid&&e.ck&&this.assignment.coverUrl!=e[e.ck].assignments.coverUrl?(this.assignment.coverUrl=e[e.ck].assignments[e.aid].coverUrl,console.log("Pager coverUrl")):this.assignment&&this.assignment.ck!==e.ck||this.assignment&&this.assignment.id!==e.aid?(console.log("PagerComponent assignment changed"),this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid]))):console.log("Pager nothing seems to have changed")})},methods:{pctCB(e){this.targetPgIdx=e,this.targetPctReplace=this.assignment.pages[e].pctReplace,this.promptPctReplace=!0},updatePctReplaceCB(){console.log("updatePctReplaceCB "),this.assignment.pages[this.targetPgIdx].pctReplace=this.targetPctReplace,this.targetPgIdx==this.reStore.courses.pgIdx?(console.log("updating restore.page.pctReplace",this.targetPctReplace,this.assignment.pages[this.targetPgIdx].pctReplace),this.reStore.page.pctReplace=parseInt(this.targetPctReplace)):console.log("Not updating pctReplace",this.targetPgIdx,this.reStore.courses.pgIdx),this.targetPctReplace=null,this.targetPgIdx=null},wpCB(e){console.log("wpCB",e),this.assignment.pages[e].pageid;const a=this.assignment.pages[e].canonicalUrl;window.open(a,"_blank")},gwCB(e){console.log("updateGuideWords",e),this.targetPgIdx=e,this.targetGuideWords=this.assignment.pages[e].guideWords,this.promptGuideWords=!0},updateGuideWordsCB(){console.log(),this.assignment.pages[this.targetPgIdx].guideWords=this.targetGuideWords,this.reStore.courses.pgIdx==this.targetPgIdx?(console.log("updating page guidewords"),this.reStore.page.guideWords=this.targetGuideWords,this.reStore.notify("page guide-words updated ")):console.log("NOT updating page guidewords",this.reStore.courses.pgIdx,this.targetPgIdx),this.targetPgIdx=null,this.targetGuideWords=null},setPageLang(e){this.targetPgIdx=e,this.targetLangVoiceKey=this.assignment.pages[e].langVoiceKey,this.promptLanguage=!0},setLangVoiceCB(e){const a=this.targetPgIdx;this.targetPgIdx=null;const p=this.targetLangVoiceKey;console.log(a,p),this.assignment.pages[a].langVoiceKey=p,this.reStore.courses.pgIdx==this.targetPgIdx&&(this.reStore.page.langVoiceKey=p)},restorePage(e){console.log("Pager restorePage ",e);const a=this.reStore.courses.ck,p=this.reStore.courses.aid;console.log("Pager ",e,a,p),console.log(this.reStore.courses[a]),console.log(this.reStore.courses[a].assignments),console.log(this.reStore.courses[a].assignments[p]),this.assignment.pages[e]=JSON.parse(JSON.stringify(this.reStore.courses[a].assignments[p].pages[e])),this.reStore.courses.pgIdx==e&&(this.reStore.page=JSON.parse(JSON.stringify(this.reStore.courses[a].assignments[p].pages[e])))},resetPage(){this.reStore.newPage()},newPage(){console.log("PagerComponent newPageCB "),this.reStore.newPage()},updateAssignmentTitle(){console.log("Pager updateAssignmentTitle",this.assignment.title);const e=this.reStore.courses.ck,a=this.reStore.courses.aid;this.reStore.courses[e].assignments[a].title=this.assignment.title},updatePageTitle(){console.log("updatePageTitle",this.reStore.page.pageTitle);const e=this.reStore.courses.ck,a=this.reStore.courses.aid,p=this.reStore.courses.pgIdx;this.reStore.courses[e].assignments[a].pages[p].pageTitle=this.reStore.page.pageTitle},updatePage(e){this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages[e]=this.assignment.pages[e],e===this.reStore.courses.pgIdx&&(this.assignment.pages[e].pageText=Pt(R("#slideTextDiv").html()),this.assignment.pages[e].imgs[this.assignment.pages[e].imgIdx].cap=Pt(R("#slideCaptionDiv").html()),this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e]))),this.reStore.saveCurrentAssignment(),this.reStore.courses.trigger+=1},updateAllPages(){for(var e=0;e<this.assignment.pages.length;e++)this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages[e]=JSON.parse(JSON.stringify(this.assignment.pages[e])),e===this.reStore.courses.pgIdx&&(this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e])));this.reStore.saveCurrentAssignment(),this.reStore.courses.trigger+=1},nextImg(e){const a=this.assignment.pages[e].imgIdx,p=this.assignment.pages[e].imgs.length;a+1<p?this.assignment.pages[e].imgIdx+=1:this.assignment.pages[e].imgIdx=0},prevImg(e){const a=this.assignment.pages[e].imgIdx,p=this.assignment.pages[e].imgs.length;a-1>-1?this.assignment.pages[e].imgIdx-=1:this.assignment.pages[e].imgIdx=p-1},loadCoverCB(){console.log("Pager loadCoverCB "),this.reStore.loadCover(),this.reStore.router.push("/teacher/editor")},takeStorePage(e){this.assignment.pages[e]=JSON.parse(JSON.stringify(this.reStore.page)),this.reStore.courses.trigger+=1},async loadPageCB(e){console.log("Pager loadPageCB ",e),this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e])),this.reStore.courses.pgIdx=e,this.reStore.page.imgIdx=this.assignment.pages[e].imgIdx,this.reStore.courses.imgIdx=this.assignment.pages[e].imgIdx,Te(".assignment").classed("hidden",!1),Te(".coverslide").classed("hidden",!0),this.reStore.courses.trigger+=1,this.reStore.page.isCustom||(console.log("calling restore.reloadPage"),await this.reStore.reloadPage(),this.reStore.courses.trigger+=1),this.reStore.mode==="editor"?this.reStore.router.push("/teacher/editor"):this.reStore.router.push("/teacher/assignment")},remove(e){console.log("remove ",e);const a=this.reStore.ck,p=this.reStore.aid;this.assignment.pages.splice(e,1),this.reStore.courses[a].assignments[p].pages.splice(e,1),this.reStore.courses.trigger+=1},mapCB(e){const a="https://maps.google.com/?ll="+this.assignment.pages[e].mapCoords.split(",")[0]+","+this.assignment.pages[e].mapCoords.split(",")[1];window.open(a,"_blank")},dummy(){console.log("dummy")}}}),Pa=r("div",{class:"text-h6"},"Percent Replace",-1),qa=r("div",{class:"text-h6"},"Guide Words",-1),xa=r("div",{class:"text-h6"},"Assignment Title",-1),Ba=r("div",{class:"text-h6"},"Page Title",-1),Ra=r("div",{class:"text-h6"},"Set Current Language",-1),Ha={width:"100%"},Ka={key:0,class:"q-pa-md",style:{"max-width":"350px"}},Ma=r("td",null,"Assignment",-1),Ua=r("td",null,"Pages",-1),Na=r("td",null,"Images",-1),Aa={key:0},Ia={key:1},Oa=r("td",null,"Loaded",-1),La={key:0},za={key:1},Qa={key:0,class:"flex flex-center"},Ya={class:"text-weight-bolder text-center q-pa-xs"},Ea={key:0},Wa={class:"text-weight-bolder text-center q-pa-xs"},Ja={key:0},Fa={class:"text-weight-bolder text-center q-pa-xs"},Ga={key:1},ja={class:"flex flex-row justify-between"},Xa={class:""},Za={class:""},eo={class:""},to=r("br",null,null,-1),so=["onClick"],ao={key:0,class:"fi fi-gb"},oo={key:1,class:"fi fi-us"},lo={key:2,class:"fi fi-mx"},no={key:3,class:"fi fi-fr"},io={key:4,class:"fi fi-de"},ro={key:5,class:"fi fi-it"},uo={key:6,class:"fi fi-br"},co={key:7,class:"fi fi-ke"},mo={key:8,class:"fi fi-ru"},go={key:9,class:"fi fi-th"},ho={key:10,class:"fi fi-cn"},fo={key:11,class:"fi fi-hk"},po={key:12,class:"fi fi-tw"},vo={key:13,class:"fi fi-kr"},yo={key:14,class:"fi fi-jp"},_o={key:15,class:"fi fi-id"},So={key:16,class:"fi fi-xx"},ko=r("br",null,null,-1),Co={class:""},Vo={class:""},bo={class:""},$o={key:0};function wo(e,a,p,H,q,U){const u=Y("router-link");return d(),m(j,null,[s(se,{modelValue:e.promptPctReplace,"onUpdate:modelValue":a[2]||(a[2]=i=>e.promptPctReplace=i),persistent:""},{default:o(()=>[s(P,{style:{"min-width":"350px"}},{default:o(()=>[s(N,{align:"center"},{default:o(()=>[Pa]),_:1}),s(N,{class:"q-pt-none",align:"center"},{default:o(()=>[s(qt,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.targetPctReplace,"onUpdate:modelValue":a[0]||(a[0]=i=>e.targetPctReplace=i)},null,8,["modelValue"])]),_:1}),s(te,{align:"right"},{default:o(()=>[A(s(S,{outline:"",label:"Cancel"},null,512),[[I]]),A(s(S,{outline:"",label:"Update % replace",onClick:a[1]||(a[1]=i=>this.updatePctReplaceCB())},null,512),[[I]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(se,{modelValue:e.promptGuideWords,"onUpdate:modelValue":a[6]||(a[6]=i=>e.promptGuideWords=i),persistent:""},{default:o(()=>[s(P,{style:{"min-width":"350px"}},{default:o(()=>[s(N,null,{default:o(()=>[qa]),_:1}),s(N,{class:"q-pt-none"},{default:o(()=>[s(ae,{dense:"",modelValue:this.targetGuideWords,"onUpdate:modelValue":a[3]||(a[3]=i=>this.targetGuideWords=i),autofocus:"",onKeyup:a[4]||(a[4]=Ne(i=>e.promptGuideWords=!1,["enter"]))},null,8,["modelValue"])]),_:1}),s(te,{align:"right"},{default:o(()=>[A(s(S,{outline:"",label:"Cancel"},null,512),[[I]]),A(s(S,{outline:"",label:"Update guide words",onClick:a[5]||(a[5]=i=>this.updateGuideWordsCB())},null,512),[[I]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(se,{modelValue:e.promptAssignmentTitle,"onUpdate:modelValue":a[10]||(a[10]=i=>e.promptAssignmentTitle=i),persistent:""},{default:o(()=>[s(P,{style:{"min-width":"350px"}},{default:o(()=>[s(N,null,{default:o(()=>[xa]),_:1}),s(N,{class:"q-pt-none"},{default:o(()=>[s(ae,{dense:"",modelValue:this.assignment.title,"onUpdate:modelValue":a[7]||(a[7]=i=>this.assignment.title=i),autofocus:"",onKeyup:a[8]||(a[8]=Ne(i=>e.promptAssignmentTitle=!1,["enter"]))},null,8,["modelValue"])]),_:1}),s(te,{align:"right"},{default:o(()=>[A(s(S,{outline:"",label:"Cancel"},null,512),[[I]]),A(s(S,{outline:"",label:"Update assignment title",onClick:a[9]||(a[9]=i=>this.updateAssignmentTitle())},null,512),[[I]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(se,{modelValue:e.promptPageTitle,"onUpdate:modelValue":a[14]||(a[14]=i=>e.promptPageTitle=i),persistent:""},{default:o(()=>[s(P,{style:{"min-width":"350px"}},{default:o(()=>[s(N,null,{default:o(()=>[Ba]),_:1}),s(N,{class:"q-pt-none"},{default:o(()=>[s(ae,{dense:"",modelValue:this.reStore.page.pageTitle,"onUpdate:modelValue":a[11]||(a[11]=i=>this.reStore.page.pageTitle=i),autofocus:"",onKeyup:a[12]||(a[12]=Ne(i=>e.promptAssignmentTitle=!1,["enter"]))},null,8,["modelValue"])]),_:1}),s(te,{align:"right"},{default:o(()=>[A(s(S,{outline:"",label:"Cancel"},null,512),[[I]]),A(s(S,{outline:"",label:"Update page title",onClick:a[13]||(a[13]=i=>this.updatePageTitle())},null,512),[[I]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(se,{modelValue:e.promptLanguage,"onUpdate:modelValue":a[16]||(a[16]=i=>e.promptLanguage=i),persistent:""},{default:o(()=>[s(P,{style:{"min-width":"350px"}},{default:o(()=>[s(N,null,{default:o(()=>[Ra]),_:1}),s(N,{class:"q-pt-none"},{default:o(()=>[r("table",Ha,[r("tr",null,[r("td",null,[s(nt,{modelValue:this.targetLangVoiceKey,"onUpdate:modelValue":[a[15]||(a[15]=i=>this.targetLangVoiceKey=i),this.setLangVoiceCB],options:e.langVoices},null,8,["modelValue","options","onUpdate:modelValue"])])])])]),_:1}),s(te,{align:"right",class:"text-white"},{default:o(()=>[A(s(S,{outline:"",flat:"",label:"Close"},null,512),[[I]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),this.assignment?(d(),m("div",Ka,[s(pe,{bordered:"",class:"rounded-borders"},{default:o(()=>[s(Z,null,{header:o(()=>[s(M,{avatar:""},{default:o(()=>[s(oe,{size:"md",color:"positive",icon:"collections"})]),_:1}),s(M,null,{default:o(()=>[c(C(this.assignment.title),1)]),_:1})]),default:o(()=>[this.assignment?(d(),O(P,{key:0,class:"q-pa-md"},{default:o(()=>[r("table",null,[r("tr",null,[Ma,c(),r("td",null,C(this.assignment.title),1)]),r("tr",null,[Ua,c(),r("td",null,C(this.reStore.courses.pgIdx+1)+" / "+C(this.assignment.pages.length),1)]),r("tr",null,[Na,c(),r("td",null,[c(C(this.reStore.courses.imgIdx+1)+" / ",1),this.assignment.pages[this.reStore.courses.pgIdx].imgs?(d(),m("span",Aa,C(this.assignment.pages[this.reStore.courses.pgIdx].imgs.length),1)):(d(),m("span",Ia,"?"))])]),r("tr",null,[Oa,r("td",null,[this.assignment.pages[this.reStore.courses.pgIdx]&&this.assignment.pages[this.reStore.courses.pgIdx].pageTitle?(d(),m("span",La,C(this.assignment.pages[this.reStore.courses.pgIdx].pageTitle),1)):(d(),m("span",za,"None"))])])])]),_:1})):G("",!0)]),_:1})]),_:1}),this.assignment?(d(),O(P,{key:0,class:"bg-primary q-pa-xs q-my-md",flat:"",bordered:""},{default:o(()=>[s(Z,null,{header:o(()=>[s(M,{avatar:""},{default:o(()=>[s(oe,{size:"md",color:"positive",icon:"assignment"})]),_:1}),s(M,null,{default:o(()=>[c(C(this.assignment.title),1)]),_:1})]),default:o(()=>[this.reStore.courses.ck?(d(),m("div",Qa,C(this.reStore.courses.ck.slice(0,3))+" | "+C(this.reStore.courses.aid.slice(0,3))+" | "+C(this.reStore.courses.pageid)+" | "+C(this.reStore.courses.imgIdx)+" | "+C(this.reStore.courses.pgIdx)+" | "+C(this.reStore.courses.trigger)+" | "+C(this.reStore.mode),1)):G("",!0),r("div",Ya,[c("Course: "),this.reStore.courses.ck?(d(),m("span",Ea,C(this.reStore.courses[this.reStore.courses.ck].title),1)):G("",!0)]),r("div",Wa,[c(" Title: "),this.assignment?(d(),m("span",Ja,[s(u,{to:"/teacher/editor",class:"text-white"},{default:o(()=>[c(C(this.assignment.title)+" ",1),s(T,null,{default:o(()=>[c("Go to Editor")]),_:1})]),_:1}),s(x,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:a[17]||(a[17]=i=>e.promptAssignmentTitle=!0),size:"sm"}),s(x,{style:{cursor:"pointer"},class:"on-right",name:"save",onClick:a[18]||(a[18]=i=>this.reStore.saveCurrentAssignment()),size:"sm"})])):G("",!0)]),r("div",Fa,[c(" Page "+C(this.reStore.courses.pgIdx)+": "+C(this.reStore.page.pageTitle.slice(0,5))+" ",1),s(x,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:a[19]||(a[19]=i=>this.promptPageTitle=!0),size:"sm"}),s(x,{class:"hidden on-right",name:"replay",onClick:this.resetPage,size:"sm"},null,8,["onClick"]),s(x,{class:"on-right",name:"add_circle",onClick:this.newPage,size:"sm"},null,8,["onClick"]),s(x,{class:"on-right",name:"volume_up",onClick:a[20]||(a[20]=i=>this.reStore.speak()),size:"sm"})])]),_:1})]),_:1})):G("",!0),this.assignment?(d(),m("span",Ga,[s(P,{class:"bg-primary q-pa-xs q-my-md",flat:"",bordered:""},{default:o(()=>[s(Z,{modelValue:e.coverExpanded,"onUpdate:modelValue":a[21]||(a[21]=i=>e.coverExpanded=i)},{header:o(()=>[s(M,{avatar:""},{default:o(()=>[s(oe,{size:"md",color:"positive",icon:"insert_photo"})]),_:1}),s(M,null,{default:o(()=>[c(" Cover Image ")]),_:1})]),default:o(()=>[s(Pe,{src:this.assignment.coverUrl,onClick:e.loadCoverCB},null,8,["src","onClick"])]),_:1},8,["modelValue"])]),_:1}),(d(!0),m(j,null,re(this.assignment.pages,(i,y)=>(d(),O(P,{class:"bg-primary q-pa-xs q-my-md",flat:"",bordered:"",modelValue:this.assignment.pages,"onUpdate:modelValue":a[25]||(a[25]=$=>this.assignment.pages=$),key:y},{default:o(()=>[s(Z,null,{header:o(()=>[s(M,null,{default:o(()=>[s(_s,{modelValue:i.isCustom,"onUpdate:modelValue":$=>i.isCustom=$,color:"positive",icon:"shuffle","checked-icon":"check"},{default:o(()=>[s(T,null,{default:o(()=>[c(C(i.isCustom?"Custom":"Random"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(M,null,{default:o(()=>[c(C(y+1)+" "+C(i.pageTitle.slice(0,8)),1)]),_:2},1024)]),default:o(()=>[r("span",ja,[r("span",Xa,[s(x,{size:"sm",name:"input",onClick:$=>e.takeStorePage(y)},{default:o(()=>[s(T,null,{default:o(()=>[c(" Pull editor page contents to this Page ")]),_:1})]),_:2},1032,["onClick"])]),r("span",Za,[s(x,{name:"restore_page",size:"sm",onClick:$=>e.restorePage(y)},{default:o(()=>[s(T,null,{default:o(()=>[c("Restore page to saved values")]),_:1})]),_:2},1032,["onClick"])]),s(x,{class:"",name:"save",onClick:$=>this.updatePage(y),size:"sm"},{default:o(()=>[s(T,null,{default:o(()=>[c("Update & Save current page")]),_:1})]),_:2},1032,["onClick"]),r("span",eo,[s(x,{name:"signpost",size:"sm",onClick:$=>e.gwCB(y)},{default:o(()=>[s(T,null,{default:o(()=>[c("Update the guide-words for this page:"),to,c(C(i.guideWords),1)]),_:2},1024)]),_:2},1032,["onClick"])]),r("span",{class:"",onClick:$=>this.setPageLang(y)},[i.langVoiceKey==="Eng-UK-Fem"?(d(),m("span",ao)):i.langVoiceKey==="Eng-US"?(d(),m("span",oo)):i.langVoiceKey==="espa\xF1ol"?(d(),m("span",lo)):i.langVoiceKey==="fran\xE7ais"?(d(),m("span",no)):i.langVoiceKey==="Deutsch"?(d(),m("span",io)):i.langVoiceKey==="italiano"?(d(),m("span",ro)):i.langVoiceKey==="portugu\xEAs do Brasil"?(d(),m("span",uo)):i.langVoiceKey==="Kiswahili"?(d(),m("span",co)):i.langVoiceKey==="\u0440\u0443\u0441\u0441\u043A\u0438\u0439"?(d(),m("span",mo)):i.langVoiceKey==="\u0E44\u0E17\u0E22"?(d(),m("span",go)):i.langVoiceKey==="\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09"?(d(),m("span",ho)):i.langVoiceKey==="\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09"?(d(),m("span",fo)):i.langVoiceKey==="\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09"?(d(),m("span",po)):i.langVoiceKey==="\uD55C\uAD6D\uC758"?(d(),m("span",vo)):i.langVoiceKey==="\u65E5\u672C\u8A9E"?(d(),m("span",yo)):i.langVoiceKey==="Bahasa Indonesia"?(d(),m("span",_o)):(d(),m("span",So)),s(T,null,{default:o(()=>[c(C(i.langVoiceKey)+" ",1),ko,c(" Click to set language for this page ")]),_:2},1024)],8,so),r("span",Co,[s(x,{name:"percent",size:"sm",onClick:$=>e.pctCB(y)},{default:o(()=>[s(T,null,{default:o(()=>[c("Set percentage of words to replace from paragraph on this page.")]),_:1})]),_:2},1032,["onClick"])]),r("span",Vo,[s(x,{name:"location_on",size:"sm",onClick:$=>e.mapCB(y)},{default:o(()=>[s(T,null,{default:o(()=>[c(" Launch Google Maps: "+C(i.mapCoords),1)]),_:2},1024)]),_:2},1032,["onClick"])]),r("span",bo,[s(x,{name:"language",size:"sm",onClick:$=>e.wpCB(y)},{default:o(()=>[s(T,null,{default:o(()=>[c("Wikipedia page "+C(i.pageid)+" "+C(i.canonical_url),1)]),_:2},1024)]),_:2},1032,["onClick"])])]),i.imgs.length>i.imgIdx?(d(),m("span",$o,[s(S,{fab:"","label-position":"left",color:"primary",icon:"arrow_left",onClick:[$=>this.prevImg(y),a[22]||(a[22]=st(()=>{},["stop","prevent"]))],padding:"xs",class:"float-left text-h5 z-max",style:{top:"100px"}},null,8,["onClick"]),s(S,{fab:"","label-position":"right",color:"primary",icon:"arrow_right",onClick:[$=>this.nextImg(y),a[23]||(a[23]=st(()=>{},["stop","prevent"]))],padding:"xs",class:"float-right text-h5 z-max",style:{top:"100px"}},null,8,["onClick"]),s(x,{size:"sm",style:{top:"190px",left:"190px"},color:"red",class:"z-max",name:"delete",onClick:[$=>this.remove(y),a[24]||(a[24]=st(()=>{},["stop","prevent"]))]},null,8,["onClick"]),s(Pe,{height:"200px",src:i.imgs[i.imgIdx].url,onClick:$=>e.loadPageCB(y)},null,8,["src","onClick"])])):G("",!0)]),_:2},1024)]),_:2},1032,["modelValue"]))),128))])):G("",!0)])):G("",!0)],64)}var Do=de(Ta,[["render",wo]]);const To=ue({name:"MyHistory",setup(){return{reStore:ce(),enabledLabel:v("History Enabled")}},mounted(){},methods:{load(e){console.log(e),console.log(this.reStore.myhistory[e]),this.reStore.loadHistory(e)},remove(e){console.log(e),this.reStore.myhistory=this.reStore.myhistory.slice(0,e).concat(this.reStore.myhistory.slice(e+1,1e3))}}}),Po={class:"q-pa-md",style:{"max-width":"350px"}},qo={class:"flex flex-center"},xo={class:""},Bo={class:"row cardheader justify-between"},Ro=["onClick"],Ho={class:"history-remove"};function Ko(e,a,p,H,q,U){return d(),m("div",Po,[s(pe,{bordered:"",class:"rounded-borders"},{default:o(()=>[s(Z,null,{header:o(()=>[s(M,{avatar:""},{default:o(()=>[s(oe,{size:"md",color:"positive",icon:"history"})]),_:1}),s(M,null,{default:o(()=>[c(" Page History ")]),_:1})]),default:o(()=>[r("div",qo,[s(S,{center:"","no-caps":"",label:"Clear History",onClick:a[0]||(a[0]=u=>this.reStore.clearHistory())})]),r("div",xo,[(d(!0),m(j,null,re(this.reStore.myhistory,(u,i)=>(d(),O(P,{class:"bg-primary otdcard q-pa-xs q-ma-sm",flat:"",bordered:"",modelValue:this.reStore.myhistory,"onUpdate:modelValue":a[1]||(a[1]=y=>this.reStore.myhistory=y),key:i},{default:o(()=>[r("div",Bo,[r("span",{class:"history-title col-grow",onClick:y=>this.load(i)},C(i)+". "+C(u.pageTitle.slice(0,25)),9,Ro),r("span",Ho,[s(x,{name:"delete",onClick:y=>this.remove(i)},null,8,["onClick"])])])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})])}var Mo=de(To,[["render",Ko]]);const Uo=ue({name:"CoursePager",setup(){return{reStore:ce(),course:v(null),defaultOpen:v(!0)}},mounted(){console.log("      CoursePager:     "),W(this.reStore.courses,async(e,a)=>{console.log("CoursePager watcher"),e.ck,e.aid},{immediate:!0,deep:!0})},methods:{removeCourseCB(e){console.log("removeCourseCB",e),console.log("done")},loadCourseCB(e){console.log("CoursePager loadCourseCB",e),this.reStore.loadAssignment(e),this.reStore.courses.trigger+=1}}}),No={class:"q-pa-md",style:{"max-width":"350px"}},Ao=r("table",null,[r("tr",null,[r("td",null,"Course"),c(),r("td")]),r("tr",{class:"hidden"},[r("td",null,"Key"),c(),r("td")]),r("tr",null,[r("td",null,"Enrollment"),c(),r("td")]),r("tr",null,[r("td",null,"Assignments"),c(),r("td")]),r("tr",null,[r("td",null,"Loaded"),r("td",null,[r("span",null,"None")])])],-1),Io=r("span",{class:"flex flex-center text-bold q-my-md"},"Account: Courses",-1),Oo={class:"absolute-top text-center"},Lo={class:"text-h6"},zo={class:"text-subtitle2"},Qo={key:0},Yo={key:1},Eo={style:{"font-size":"22pt",width:"100%"},class:"text-center absolute-bottom"},Wo=r("br",null,null,-1),Jo=r("br",null,null,-1);function Fo(e,a,p,H,q,U){return d(),m("div",No,[s(pe,{bordered:"",class:"rounded-borders"},{default:o(()=>[s(Z,{modelValue:e.defaultOpen,"onUpdate:modelValue":a[0]||(a[0]=u=>e.defaultOpen=u)},{header:o(()=>[s(M,{avatar:""},{default:o(()=>[s(oe,{size:"md",color:"positive",icon:"collections"})]),_:1}),s(M,null,{default:o(()=>[c(" My Courses ")]),_:1})]),default:o(()=>[s(P,{class:"q-pa-md"},{default:o(()=>[Ao]),_:1})]),_:1},8,["modelValue"])]),_:1}),Io,(d(!0),m(j,null,re(this.reStore.userSnapshot.teaching,(u,i,y)=>(d(),m("div",{key:y},[s(P,{bordered:"",flat:"",class:"otdcard q-mx-sm q-my-md"},{default:o(()=>[s(Pe,{fit:e.cover,src:this.reStore.logoURL,height:"100%",onClick:$=>this.loadCourse(i)},{default:o(()=>[r("div",Oo,[r("div",Lo,C(this.reStore.courses[i].title.slice(0,18)),1),r("div",zo,[this.reStore.courses[i].assignments?(d(),m("span",Qo,"Assignments: "+C(Object.keys(this.reStore.courses[i].assignments).length),1)):(d(),m("span",Yo,"Assignments: None"))])]),r("div",Eo,[r("div",null,[s(x,{color:"red",class:"ptr",name:"delete",onClick:$=>this.deleteCourseCB(u.ck)},{default:o(()=>[s(T,null,{default:o(()=>[c("Delete Course")]),_:1})]),_:2},1032,["onClick"]),s(S,{icon:"content_copy",onClick:$=>this.copyCK(i)},{default:o(()=>[s(T,null,{default:o(()=>[c("Copy this course-key to clipboard. Enroll "),Wo,c("in this course using this course-key from "),Jo,c("the Student Page.")]),_:1})]),_:2},1032,["onClick"]),s(S,{icon:"edit",onClick:$=>this.editCourseCB(u.ck)},{default:o(()=>[s(T,null,{default:o(()=>[c("Edit Course")]),_:1})]),_:2},1032,["onClick"])])])]),_:2},1032,["fit","src","onClick"])]),_:2},1024)]))),128))])}var Go=de(Uo,[["render",Fo]]);const jo=ue({name:"TeacherLayout",components:{PagerComponent:Do,DocumentationComponent:os,SearchComponent:qs,ImagesComponent:As,BookmarksComponent:ua,OTDComponent:Da,PreferencesComponent:Xt,AssignmentStatus:ls,MyHistory:Mo,AssignmentPager:Zt,CoursePager:Go},setup(){const e=v(!1),a=v(!1),p=ce(),H=p.preferences,q=v(null),U=v(null);return{step:v(1),reStore:p,selectedRHSTab:v(p.courses.selectedRHSTab),initialValues:v(H),scrollAreaRHS:q,scrollAreaLHS:U,leftDrawerOpen:e,rightDrawerOpen:a,flagName:v(p.langVoices[p.preferences.langVoiceKey].flagName),promptLanguage:v(!1),langVoices:v(p.preferences.langVoices),toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){a.value=!a.value}}},mounted(){W(this.reStore.courses,async(e,a)=>{console.log("TL watcher ",e,a),this.selectedRHSTab=e.selectedRHSTab,this.setRHS(e.selectedRHSTab)}),Ct.isActive||(Ct.toggle(),at("primary","#333"),at("secondary",this.initialValues.secondaryColor),at("accent",this.initialValues.accentColor),this.flagName=this.reStore.langVoices[this.reStore.prefereneces.langVoiceKey].flagName,Te(".pfi").classed(this.flagName,!0))},methods:{tabUpdate(e){console.log("tabUpdate",e),this.reStore.courses.selectedRHSTab=e,this.setRHS(e)},goEditor(){this.reStore.mode="editor",this.reStore.router.push("/teacher/editor")},goAssignment(){this.reStore.mode="assignment",this.reStore.router.push("/teacher/assignment")},setRHS(e){e==="pagerTab"?(R("#assignmentPagerDiv").classed("hidden",!0),R("#pagerDiv").classed("hidden",!1),R("#statusDiv").classed("hidden",!0),R("#coursePagerDiv").classed("hidden",!0)):e==="statusTab"?(R("#assignmentPagerDiv").classed("hidden",!0),R("#pagerDiv").classed("hidden",!0),R("#statusDiv").classed("hidden",!1),R("#coursePagerDiv").classed("hidden",!0)):e==="assignmentsTab"?(R("#assignmentPagerDiv").classed("hidden",!1),R("#pagerDiv").classed("hidden",!0),R("#statusDiv").classed("hidden",!0),R("#coursePagerDiv").classed("hidden",!0)):e==="coursesTab"&&(R("#assignmentPagerDiv").classed("hidden",!0),R("#pagerDiv").classed("hidden",!0),R("#statusDiv").classed("hidden",!0),R("#coursePagerDiv").classed("hidden",!1))},scrollTopRHS(){this.scrollAreaRHS.setScrollPosition("vertical",0)},scrollTopLHS(){this.scrollAreaLHS.setScrollPosition("vertical",0)},setLangVoiceCB(e){this.flagName=this.reStore.langVoices[e].flagName;for(const[a,p]of Object.entries(this.reStore.langVoices)){const H=p.flagName;Te(".pfi").classed(H,!1)}Te(".pfi").classed(this.flagName,!0),console.log("langVoiceKey set to ",e,this.flagName),this.reStore.courses.trigger+=1}}}),Xo=r("div",{class:"text-h6"},"Set Current Language",-1),Zo=r("span",{class:"pfi fi fi-xx"},null,-1),el=r("br",null,null,-1),tl=r("br",null,null,-1),sl={class:"dashboard-wrapper"},al=r("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),ol={class:"hidden"},ll=r("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),nl={id:"coursePagerDiv"},il={key:0},rl={key:1},ul={class:"q-gutter-y-sm"},dl={id:"pagerDiv",class:"hidden"},cl={key:0},ml={key:1},gl={class:"q-gutter-y-sm"},hl={id:"assignmentPagerDiv",class:"hidden"},fl=r("span",{class:"hidden"},null,-1),pl={key:0},vl={key:1},yl={class:"q-gutter-y-sm"},_l={id:"statusDiv",class:"hidden"},Sl={key:0},kl={key:1},Cl={class:"q-gutter-y-sm"};function Vl(e,a,p,H,q,U){const u=Y("router-view"),i=Y("DocumentationComponent"),y=Y("SearchComponent"),$=Y("OTDComponent"),ee=Y("BookmarksComponent"),ve=Y("ImagesComponent"),Ie=Y("MyHistory"),Oe=Y("PreferencesComponent"),Ve=Y("CoursePager"),J=Y("router-link"),K=Y("PagerComponent"),Le=Y("AssignmentPager"),ze=Y("AssignmentStatus");return d(),O(rs,{view:"hHh LpR fFf"},{default:o(()=>[s(ns,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:o(()=>[s(se,{modelValue:e.promptLanguage,"onUpdate:modelValue":a[1]||(a[1]=w=>e.promptLanguage=w),persistent:""},{default:o(()=>[s(P,{style:{"max-width":"300px"}},{default:o(()=>[s(N,null,{default:o(()=>[Xo]),_:1}),s(N,{class:"q-pt-none"},{default:o(()=>[s(nt,{modelValue:this.reStore.preferences.langVoiceKey,"onUpdate:modelValue":[a[0]||(a[0]=w=>this.reStore.preferences.langVoiceKey=w),this.setLangVoiceCB],options:e.langVoices},null,8,["modelValue","options","onUpdate:modelValue"])]),_:1}),s(te,{align:"right",class:"text-white"},{default:o(()=>[A(s(S,{outline:"",flat:"",label:"Close"},null,512),[[I]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(De,null,{default:o(()=>[s(S,{icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),s(S,{onClick:a[2]||(a[2]=w=>this.reStore.router.push("/teacher")),icon:"home",class:"hidden"},{default:o(()=>[s(T,null,{default:o(()=>[c("Return to My Teacher Page")]),_:1})]),_:1}),s(Ae),s(S,{onClick:a[3]||(a[3]=w=>this.reStore.router.push("/teacher")),icon:"home"},{default:o(()=>[s(T,null,{default:o(()=>[c("Return to My Teacher Page")]),_:1})]),_:1}),s(S,{onClick:a[4]||(a[4]=w=>e.promptLanguage=!0)},{default:o(()=>[Zo,s(T,null,{default:o(()=>[c("Set current language "),el,c("Applied to new pages/searches."),tl,c("Sync current page using sync-lang button.")]),_:1})]),_:1}),this.reStore.mode=="assignment"?(d(),O(S,{key:0,onClick:a[5]||(a[5]=w=>this.goEditor()),icon:"switch_account"},{default:o(()=>[s(T,null,{default:o(()=>[c(" Switch from Assignment to Editor Mode ")]),_:1})]),_:1})):(d(),O(S,{key:1,onClick:a[6]||(a[6]=w=>this.goAssignment()),icon:"switch_account"},{default:o(()=>[s(T,null,{default:o(()=>[c(" Switch from Editor to Assignment Mode ")]),_:1})]),_:1})),this.reStore.authenticated?(d(),O(S,{key:2,onClick:a[7]||(a[7]=w=>this.reStore.router.push("/student")),icon:"switch_account"},{default:o(()=>[s(T,null,{default:o(()=>[c(" Switch between Teacher or Student role ")]),_:1})]),_:1})):G("",!0),this.reStore.authenticated?(d(),O(S,{key:3,icon:"logout",onClick:a[8]||(a[8]=w=>this.reStore.logout())})):G("",!0),s(S,{icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1})]),_:1}),s(is,{class:"container-fluid"},{default:o(()=>[r("div",sl,[s(u)]),s(Vt,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":a[10]||(a[10]=w=>e.leftDrawerOpen=w),side:"left"},{default:o(()=>[s(De,{flat:"",class:"bg-primary text-white"},{default:o(()=>[s(Ae),s(S,{flat:"",round:"",dense:"",icon:"home",class:"float-right",onClick:a[9]||(a[9]=w=>this.reStore.router.push("/teacher"))},{default:o(()=>[s(T,null,{default:o(()=>[c("Return to dashboard")]),_:1})]),_:1}),s(S,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopLHS},{default:o(()=>[s(T,null,{default:o(()=>[c("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),al,s(bt,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaLHS"},{default:o(()=>[s(i),s(y),s($),s(ee),s(ve),s(Ie),s(Oe,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"]),s(Vt,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":a[16]||(a[16]=w=>e.rightDrawerOpen=w),side:"right"},{default:o(()=>[s(De,{flat:"",class:"bg-primary text-white"},{default:o(()=>[r("span",ol,[s(S,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),s($t,{dark:"",vertical:"",inset:""}),s(S,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),s($t,{dark:"",vertical:"",inset:""})]),s(us,{dense:"",align:"left",modelValue:this.selectedRHSTab,"onUpdate:modelValue":[a[15]||(a[15]=w=>this.selectedRHSTab=w),this.tabUpdate]},{default:o(()=>[s(Ue,{id:"coursesTab",name:"coursesTab",icon:"collections",onClick:a[11]||(a[11]=w=>this.setRHS("coursesTab"))},{default:o(()=>[s(T,null,{default:o(()=>[c("My Courses")]),_:1})]),_:1}),s(Ue,{id:"assignmentsTab",name:"assignmentsTab",icon:"library_books",onClick:a[12]||(a[12]=w=>this.setRHS("assignmentsTab"))},{default:o(()=>[s(T,null,{default:o(()=>[c("Assignments of this Course")]),_:1})]),_:1}),s(Ue,{id:"pagerTab",name:"pagerTab",icon:"theaters",onClick:a[13]||(a[13]=w=>this.setRHS("pagerTab"))},{default:o(()=>[s(T,null,{default:o(()=>[c("Pages of this Assignment")]),_:1})]),_:1}),s(Ue,{id:"statusTab",name:"statusTab",icon:"summarize",onClick:a[14]||(a[14]=w=>this.setRHS("statusTab"))},{default:o(()=>[s(T,null,{default:o(()=>[c("Status/Progress while taking assignment")]),_:1})]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"]),s(S,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopRHS},{default:o(()=>[s(T,null,{default:o(()=>[c("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),ll,s(bt,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaRHS"},{default:o(()=>[r("div",nl,[this.reStore.courses?(d(),m("span",il,[s(Ve)])):(d(),m("span",rl,[r("div",ul,[s(P,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:o(()=>[c(" Please create a course at the "),r("u",null,[s(J,{to:"/teacher",class:"text-white ptr"},{default:o(()=>[c("Teacher Dashboard")]),_:1})]),c(". ")]),_:1})])]))]),r("div",dl,[this.reStore.courses.aid?(d(),m("span",cl,[s(K)])):(d(),m("span",ml,[r("div",gl,[s(P,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:o(()=>[c(" No current assignment. You can load an assignment at the "),r("u",null,[s(J,{to:"/teacher",class:"text-white ptr"},{default:o(()=>[c("Teacher Dashboard")]),_:1})]),c(". ")]),_:1})])]))]),r("div",hl,[fl,this.reStore.courses.ck?(d(),m("span",pl,[s(Le)])):(d(),m("span",vl,[r("div",yl,[s(P,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:o(()=>[c(" No current course. You can load a course at the "),r("u",null,[s(J,{to:"/teacher",class:"text-white ptr"},{default:o(()=>[c("Teacher Dashboard")]),_:1})]),c(". ")]),_:1})])]))]),r("div",_l,[this.reStore.courses.aid?(d(),m("span",Sl,[s(ze)])):(d(),m("span",kl,[r("div",Cl,[s(P,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:o(()=>[c(" Please load an assignment at the "),r("u",null,[s(J,{to:"/teacher",class:"text-white ptr"},{default:o(()=>[c("Teacher Dashboard")]),_:1})]),c(". ")]),_:1})])]))])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var Wl=de(jo,[["render",Vl]]);export{Wl as default};
