import{a as M,Q as O,i as qe,C as Z,h as Ie,u as aa,b as sa,c as oa}from"./ClosePopup.0d6459fb.js";import{a as na,b as la,c as Vt,d as lt,e as ia,u as ra,f as Lt,D as da,P as ua,g as xt}from"./DocumentationComponent.f6fa62d4.js";import{g as Te,h as p,i as h,z as Ee,aL as ca,a1 as Ht,r as c,F as H,l as ma,p as J,ax as ha,j as ct,x as I,q as ga,d as ne,_ as le,o as _,au as w,a as o,w as i,Q as V,e as n,af as D,ag as k,aJ as mt,c as E,av as W,aK as he,aI as ae,f as Y,al as fa,am as Ne,D as Dt,y as va,P as qt,s as it}from"./index.1e5a1fc8.js";import{Q}from"./QTooltip.d75c4826.js";import{Q as De,a as pa,c as _a,d as It,e as Tt,b as ya,f as Ca,g as Sa}from"./QLayout.55601d2e.js";import{d as We,f as Ge,c as ka,e as ba,u as Bt,g as wa}from"./use-dark.96f66556.js";import{u as ie,s as te,a as _e,p as ye,t as $a,c as Pt,f as Va,g as xa,j as rt,_ as Da,d as Mt}from"./re-store.f64c0b6d.js";import{Q as me}from"./QInput.9322a97a.js";import{Q as qa}from"./QToggle.0fc9f151.js";import{Q as Re}from"./QImg.0a285e20.js";import"./use-portal.1470756e.js";import"./selection.40719a5d.js";import"./use-key-composition.66e1fbb3.js";import"./QCheckbox.494523e1.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";const Ia={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},dt={xs:2,sm:4,md:8,lg:16,xl:24};var xe=Te({name:"QSeparator",props:{...We,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const a=Ee(),u=Ge(e,a.proxy.$q),f=p(()=>e.vertical===!0?"vertical":"horizontal"),b=p(()=>` q-separator--${f.value}`),x=p(()=>e.inset!==!1?`${b.value}-${Ia[e.inset]}`:""),r=p(()=>`q-separator${b.value}${x.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(u.value===!0?" q-separator--dark":"")),d=p(()=>{const C={};if(e.size!==void 0&&(C[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const P=e.spaced===!0?`${dt.md}px`:e.spaced in dt?`${dt[e.spaced]}px`:e.spaced,K=e.vertical===!0?["Left","Right"]:["Top","Bottom"];C[`margin${K[0]}`]=C[`margin${K[1]}`]=P}return C});return()=>h("hr",{class:r.value,style:d.value,"aria-orientation":f.value})}});const Ta=h("div",{class:"q-space"});var Ae=Te({name:"QSpace",setup(){return()=>Ta}});const ve=ca({}),Ba=Object.keys(Ht);var Ue=Te({name:"QExpansionItem",props:{...Ht,...ka,...We,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ba,"click","afterShow","afterHide"],setup(e,{slots:a,emit:u}){const{proxy:{$q:f}}=Ee(),b=Ge(e,f),x=c(e.modelValue!==null?e.modelValue:e.defaultOpened),r=c(null),d=Bt(),{show:C,hide:P,toggle:K}=wa({showing:x});let U,ee;const Be=p(()=>`q-expansion-item q-item-type q-expansion-item--${x.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),ge=p(()=>{if(e.contentInsetLevel===void 0)return null;const y=f.lang.rtl===!0?"Right":"Left";return{["padding"+y]:e.contentInsetLevel*56+"px"}}),j=p(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),T=p(()=>{const y={};return Ba.forEach(R=>{y[R]=e[R]}),y}),Pe=p(()=>j.value===!0||e.expandIconToggle!==!0),N=p(()=>e.expandedIcon!==void 0&&x.value===!0?e.expandedIcon:e.expandIcon||f.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),X=p(()=>e.disable!==!0&&(j.value===!0||e.expandIconToggle===!0)),S=p(()=>({expanded:x.value===!0,detailsId:e.targetUid,toggle:K,show:C,hide:P})),A=p(()=>{const y=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:f.lang.label[x.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":x.value===!0?"true":"false","aria-controls":d,"aria-label":y}});H(()=>e.group,y=>{ee!==void 0&&ee(),y!==void 0&&L()});function je(y){j.value!==!0&&K(y),u("click",y)}function Ce(y){y.keyCode===13&&Se(y,!0)}function Se(y,R){R!==!0&&r.value!==null&&r.value.focus(),K(y),ga(y)}function Me(){u("afterShow")}function ke(){u("afterHide")}function L(){U===void 0&&(U=Bt()),x.value===!0&&(ve[e.group]=U);const y=H(x,oe=>{oe===!0?ve[e.group]=U:ve[e.group]===U&&delete ve[e.group]}),R=H(()=>ve[e.group],(oe,Le)=>{Le===U&&oe!==void 0&&oe!==U&&P()});ee=()=>{y(),R(),ve[e.group]===U&&delete ve[e.group],ee=void 0}}function Je(){const y={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},R=[h(I,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&x.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:N.value})];return X.value===!0&&(Object.assign(y,{tabindex:0,...A.value,onClick:Se,onKeyup:Ce}),R.unshift(h("div",{ref:r,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),h(lt,y,()=>R)}function se(){let y;return a.header!==void 0?y=[].concat(a.header(S.value)):(y=[h(lt,()=>[h(Vt,{lines:e.labelLines},()=>e.label||""),e.caption?h(Vt,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&y[e.switchToggleSide===!0?"push":"unshift"](h(lt,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>h(I,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&y[e.switchToggleSide===!0?"unshift":"push"](Je()),y}function re(){const y={ref:"item",style:e.headerStyle,class:e.headerClass,dark:b.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return Pe.value===!0&&(y.clickable=!0,y.onClick=je,Object.assign(y,j.value===!0?T.value:A.value)),h(la,y,se)}function be(){return J(h("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:ge.value,id:d},ct(a.default)),[[ha,x.value]])}function Oe(){const y=[re(),h(na,{duration:e.duration,onShow:Me,onHide:ke},be)];return e.expandSeparator===!0&&y.push(h(xe,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:b.value}),h(xe,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:b.value})),y}return e.group!==void 0&&L(),ma(()=>{ee!==void 0&&ee()}),()=>h("div",{class:Be.value},[h("div",{class:"q-expansion-item__container relative-position"},Oe())])}}),Qe=Te({name:"QList",props:{...We,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:a}){const u=Ee(),f=Ge(e,u.proxy.$q),b=p(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(f.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>h(e.tag,{class:b.value},ct(a.default))}});const Pa=ne({name:"SearchComponent",setup(){const e=ie(),a=c("");return{reStore:e,searchTerms:a,searchSize:c(e.preferences.resLimit),searchResults:c([]),promptSearchSize:c(!1)}},mounted(){H(this.reStore.preferences,async(u,f)=>{console.log("watcher ",u,f),this.searchSize=u.resLimit;for(const[x,r]of Object.entries(this.reStore.langVoices))te("#sfi").classed(r.flagName,!1);const b=this.reStore.preferences.langVoiceKey;te("#sfi").classed(this.reStore.langVoices[b].flagName,!0)});const e=this.reStore.preferences.langVoiceKey,a=this.reStore.langVoices[e].flagName;te("#sfi").classed(a,!0)},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchResults.splice(e,1)},load(e){console.log(e),console.log(this.searchResults[e]);const a=this.reStore.preferences.langVoiceKey;console.log("calling loadPageId ",this.searchResults[e].pageid,a),this.reStore.loadPageId(this.searchResults[e].pageid,a),this.reStore.courses.trigger+=1},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("doSearch ",e),this.reStore.wiki.setLang(e.langName);const a=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",a.results.length),this.searchResults=a.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),Ma=n("div",{class:"text-h6"},"Search Results Size",-1),Oa={class:"q-gutter-y-sm column"},La=n("span",{class:"on-right text-h2",id:"sfi"},null,-1),Ha={key:0},Ka={class:"row cardheader ptr justify-between"},Na=["onClick"],Aa={class:"history-remove"};function Ra(e,a,u,f,b,x){return _(),w(W,null,[o(Ie,{modelValue:e.promptSearchSize,"onUpdate:modelValue":a[2]||(a[2]=r=>e.promptSearchSize=r),persistent:""},{default:i(()=>[o(M,{style:{"min-width":"350px"}},{default:i(()=>[o(O,{align:"center"},{default:i(()=>[Ma]),_:1}),o(O,{class:"q-pt-none",align:"center"},{default:i(()=>[o(ia,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":a[0]||(a[0]=r=>e.searchSize=r)},null,8,["modelValue"])]),_:1}),o(qe,{align:"center",class:"text-white"},{default:i(()=>[J(o(V,{flat:"",label:"Cancel"},null,512),[[Z]]),J(o(V,{flat:"",label:"Update results size",onClick:a[1]||(a[1]=r=>this.updateSearchSize())},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(M,{flat:""},{default:i(()=>[o(O,null,{default:i(()=>[o(Qe,{padding:"",class:"rounded-borders"},{default:i(()=>[o(Ue,{"header-style":{border:"1px solid gray"},label:"Search & Results"},{default:i(()=>[n("div",Oa,[o(De,{class:"bg-primary text-white rounded-borders q-my-md"},{default:i(()=>[o(V,{dark:"",standout:"",onClick:a[3]||(a[3]=r=>e.promptSearchSize=!0)},{default:i(()=>[D(k(this.searchResults.length)+" ",1),o(Q,null,{default:i(()=>[D("Change results limit ("+k(this.searchSize)+")",1)]),_:1})]),_:1}),La,o(me,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":a[6]||(a[6]=r=>e.searchTerms=r),"input-class":"text-right",class:"q-ml-md",onKeyup:[a[7]||(a[7]=r=>this.update()),a[8]||(a[8]=mt(r=>this.doSearch(),["enter"]))]},{append:i(()=>[e.searchTerms===""?(_(),E(I,{key:0,name:"search",onClick:a[4]||(a[4]=r=>this.doSearch())})):(_(),E(I,{key:1,name:"clear",class:"cursor-pointer",onClick:a[5]||(a[5]=r=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(_(),w("div",Ha,[(_(!0),w(W,null,he(this.searchResults,(r,d)=>(_(),E(M,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":a[9]||(a[9]=C=>this.searchResults=C),key:d},{default:i(()=>[n("div",Ka,[n("span",{class:"history-title col-grow",onClick:C=>this.load(d)},k(d)+". "+k(r.title.slice(0,25)),9,Na),n("span",Aa,[o(I,{class:"primary",size:e.xl,color:e.primary,name:"close",onClick:C=>this.remove(d)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):ae("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Ua=le(Pa,[["render",Ra]]);const Qa=ne({name:"CurrentPage",props:{},setup(e){return{reStore:ie(),ck:c("-"),aid:c("-"),pageTitle:c("-"),langVoiceKey:c(),flagName:c("fi fi-gb"),imgIdx:c(0),imgs:c([]),imgTot:c(0),imgFit:c("-"),guideWords:c("-"),mapCoords:c("-"),pageid:c("-"),pctReplace:c(),canonicalUrl:c(),props:e,isCustom:c(null),langNames:c(["en","th","es","fr","it","de","zh","ja","sw","pt","ru","id","ke"]),promptGuideWords:c(!1)}},mounted(){console.log(this.props),H(this.reStore.courses,async(e,a)=>{try{console.log("CurrentPage watcher",this.reStore.courses);const u=this.reStore.courses.pgIdx,f=this.reStore.page;let b,x;if(f){console.log("CurrentPage ",f),x=f.ck,b=f.aid,this.pageTitle=f.pageTitle,this.imgIdx=f.imgIdx,this.imgs=f.imgs,this.imgTot=f.imgs.length,this.imgFit=f.imgFit,this.guideWords=f.guideWords,this.mapCoords=f.mapCoords,this.pageid=f.pageid,this.langVoiceKey=f.langVoiceKey,this.flagName=this.reStore.langVoices[f.langVoiceKey].flagName;for(const[r,d]of Object.entries(this.reStore.langVoices)){const C=d.flagName;_e(".flagicon").classed(C,!1)}_e(".flagicon").classed(this.flagName,!0),this.pctReplace=f.pctReplace,this.canonicalUrl=f.canonicalUrl,this.isCustom=c(this.reStore.page.isCustom)}this.aid=b,this.ck=x}catch(u){console.log(u)}},{immediate:!0,deep:!0})},methods:{updateGuideWords(){console.log("updateGuideWords",this.guideWords),this.reStore.page.guideWords=this.guideWords},langLinkCB(e){console.log(e.url),window.open(e.url,"_blank")},speak(){console.log("CurrentPage.speak",this.reStore),this.reStore.speak()},cycleFitMode(){const e=["scale-down","cover","contain"];let a=e.indexOf(this.imgFit);a+=1,a>e.length-1&&(a=0),this.imgFit=e[a],this.reStore.page.imgFit=this.imgFit,console.log("fit: ",this.imgFit),this.reStore.courses.trigger+=1},nextImg(){this.imgIdx=this.imgIdx+1>this.imgs.length-1?0:this.imgIdx+1,this.reStore.page.imgIdx=this.imgIdx,this.reStore.courses.imgIdx=this.imgIdx,this.reStore.courses.trigger+=1},imgCB(e,a){console.log(e,a),this.reStore.page.imgIdx=e,this.reStore.courses.imgIdx=e,this.reStore.courses.trigger+=1},loadURL(e){console.log("loadURL ",e),window.open(e,"_blank")},mapCB(){const e="https://maps.google.com/?ll="+this.mapCoords.split(",")[0]+","+this.mapCoords.split(",")[1];window.open(e,"_blank")},saveImage(e,a){console.log("saveImage: ",e,a),this.reStore.saveImage(e,a)},saveCurrentImage(){const e=this.imgs[this.imgIdx];console.log("saveCurrentImage: ",e),this.reStore.saveImage(this.imgIdx,e)},remove(e,a){console.log("remove: ",e,a),this.reStore.page.imgs.splice(e,1)},toggleText(){te("#slideTextDiv").classed("hidden")?_e("#slideTextDiv").classed("hidden",!1):_e("#slideTextDiv").classed("hidden",!0)},addBookmark(){console.log("addBookmark"),this.reStore.saveBookmark()},resetPage(){this.reStore.newPage()},newPage(){console.log("CurrentPage newPageCB "),this.reStore.newPage()},appendPage(){this.reStore.appendPage()},updatePage(){this.reStore.updatePage()},updateType(e,a){this.reStore.page.isCustom=this.isCustom}}}),ja=n("div",{class:"text-h6"},"Guide Words",-1),Fa={class:"text-weight-bolder text-center q-pa-md text-white"},za=n("br",null,null,-1),Ya={style:{border:"1px solid gray","border-radius":"5px"}},Ea={width:"100%"},Wa={style:{width:"50%","text-align":"center"}},Ga={style:{"text-align":"center"}},Ja={style:{"text-align":"center"}},Xa=n("td",{style:{"text-align":"center"}},"Speak Text",-1),Za={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},es={width:"100%"},ts=n("td",null,"Course-Key",-1),as={style:{width:"50%"}},ss={class:"ptr float-left"},os=n("td",null,"Assgmnt Id",-1),ns={style:{width:"50%"}},ls={class:"ptr float-left"},is=n("td",null,"WP Page Id",-1),rs={style:{width:"50%"}},ds=n("td",null,"Language",-1),us={style:{width:"50%"}},cs={class:"q-mt-xs float-right flagicon text-h6"},ms=n("td",null,"Images",-1),hs={style:{width:"50%"}},gs=n("td",null,"Image Fit",-1),fs={class:"align-left"},vs=n("td",null,"Guide Words",-1),ps={style:{width:"50%"}},_s=n("td",null,"Percent Replace",-1),ys={class:"float-left"},Cs=n("td",null,"Map Coords",-1),Ss={class:"float-left"},ks=n("td",null,"Toggle Text",-1),bs=n("td",null,"Alt Langs",-1),ws=["onClick"],$s={key:0,style:{cursor:"pointer"}},Vs={key:0},xs={class:"row cardheader justify-between"},Ds={class:"history-remove"},qs={key:0},Is={class:"history-remove ptr"};function Ts(e,a,u,f,b,x){const r=Y("router-link");return _(),w(W,null,[o(Ie,{modelValue:e.promptGuideWords,"onUpdate:modelValue":a[3]||(a[3]=d=>e.promptGuideWords=d),persistent:""},{default:i(()=>[o(M,{style:{"min-width":"350px"}},{default:i(()=>[o(O,null,{default:i(()=>[ja]),_:1}),o(O,{class:"q-pt-none"},{default:i(()=>[o(me,{dense:"",modelValue:e.guideWords,"onUpdate:modelValue":a[0]||(a[0]=d=>e.guideWords=d),autofocus:"",onKeyup:a[1]||(a[1]=mt(d=>e.promptGuideWords=!1,["enter"]))},null,8,["modelValue"])]),_:1}),o(qe,{align:"right"},{default:i(()=>[J(o(V,{outline:"",label:"Cancel"},null,512),[[Z]]),J(o(V,{outline:"",label:"Update guide words",onClick:a[2]||(a[2]=d=>this.updateGuideWords())},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(M,{flat:""},{default:i(()=>[o(O,null,{default:i(()=>[n("div",Fa,[o(r,{to:"/teacher/editor",class:"text-white"},{default:i(()=>[D(k(this.pageTitle.slice(0,20)),1)]),_:1}),za,o(I,{class:"on-right",name:"replay",onClick:this.resetPage,size:"sm"},null,8,["onClick"]),o(I,{class:"on-right",name:"add_circle",onClick:this.newPage,size:"sm"},null,8,["onClick"]),o(I,{class:"on-right",name:"publish",onClick:this.updatePage,size:"sm"},{default:i(()=>[o(Q,null,{default:i(()=>[D("Update current page")]),_:1})]),_:1},8,["onClick"]),o(I,{class:"on-right",name:"publish",onClick:this.appendPage,size:"sm"},{default:i(()=>[o(Q,null,{default:i(()=>[D("Push as new page")]),_:1})]),_:1},8,["onClick"])]),n("div",Ya,[n("table",Ea,[n("tr",null,[n("td",Wa,[o(qa,{modelValue:e.isCustom,"onUpdate:modelValue":[a[4]||(a[4]=d=>e.isCustom=d),this.updateType],color:"accent"},null,8,["modelValue","onUpdate:modelValue"])]),n("td",Ga,[o(V,{round:"",class:"q-pa-md",icon:"volume_up",color:"secondary",onClick:a[5]||(a[5]=d=>this.speak())})])]),n("tr",null,[n("td",Ja,k(e.isCustom===!0?"Custom":"Random"),1),Xa])])]),n("div",Za,[n("table",es,[n("tr",null,[ts,n("td",as,[n("a",ss,k(this.ck),1)])]),n("tr",null,[os,n("td",ns,[n("a",ls,k(this.aid),1)])]),n("tr",null,[is,n("td",rs,[n("a",{class:"ptr float-left",onClick:a[6]||(a[6]=d=>this.loadURL(this.canonicalUrl))},k(this.pageid),1),o(I,{name:"bookmark",onClick:this.addBookmark,class:"float-right"},null,8,["onClick"])])]),n("tr",null,[ds,n("td",us,[n("span",cs,[o(Q,{class:"float-left"},{default:i(()=>[D(k(this.langVoiceKey),1)]),_:1})])])]),n("tr",null,[ms,n("td",hs,[n("span",{onClick:a[7]||(a[7]=(...d)=>this.nextImg&&this.nextImg(...d)),class:"ptr float-left"},k(this.imgIdx+1)+" / "+k(this.imgTot),1),n("span",{class:"float-right ptr",onClick:a[8]||(a[8]=(...d)=>this.saveCurrentImage&&this.saveCurrentImage(...d))},[o(I,{name:"bookmark"})])])]),n("tr",{class:"ptr",onClick:a[9]||(a[9]=(...d)=>this.cycleFitMode&&this.cycleFitMode(...d))},[gs,n("td",null,[n("span",fs,k(this.imgFit),1),o(I,{class:"float-right",name:"fit_screen"})])]),n("tr",null,[vs,n("td",ps,[D(k(this.guideWords.replaceAll(",",", "))+" ",1),o(I,{class:"float-right",name:"tune",onClick:a[10]||(a[10]=d=>this.promptGuideWords=!0)})])]),n("tr",null,[_s,n("td",null,[n("span",ys,k(this.pctReplace)+" %",1),o(I,{class:"float-right",name:"tune"})])]),n("tr",null,[Cs,n("td",{onClick:a[11]||(a[11]=(...d)=>this.mapCB&&this.mapCB(...d)),class:"ptr"},[n("span",Ss,k(this.mapCoords),1),o(I,{class:"float-right",name:"place"})])]),n("tr",null,[ks,n("td",{onClick:a[12]||(a[12]=(...d)=>this.toggleText&&this.toggleText(...d)),class:"ptr"},[o(I,{class:"float-right",name:"article"})])]),n("tr",null,[bs,n("td",null,[(_(!0),w(W,null,he(this.reStore.currentLangLinks,(d,C)=>(_(),w("span",{key:C,onClick:P=>this.langLinkCB(d)},[this.langNames.indexOf(d.lang)>-1?(_(),w("span",$s,[n("u",null,k(d.lang),1),D(",\xA0 ")])):ae("",!0)],8,ws))),128))])])])])]),_:1})]),_:1}),o(M,{flat:""},{default:i(()=>[o(O,null,{default:i(()=>[o(Qe,{padding:"",class:"rounded-borders"},{default:i(()=>[o(Ue,{"header-style":{border:"1px solid gray"},label:"Page Images"},{default:i(()=>[this.imgs.length?(_(),w("div",Vs,[(_(!0),w(W,null,he(this.imgs,(d,C)=>(_(),E(M,{bordered:"",class:"q-ma-sm",flat:"",modelValue:this.imgs,"onUpdate:modelValue":a[13]||(a[13]=P=>this.imgs=P),key:C},{default:i(()=>[n("div",xs,[n("span",Ds,[o(I,{name:"bookmark",onClick:P=>this.saveImage(C,d)},null,8,["onClick"]),o(I,{name:"article",onClick:this.toggleText},{default:i(()=>[o(Q,null,{default:i(()=>[D("Convenience button to toggle current text ")]),_:1})]),_:1},8,["onClick"]),o(I,{name:"fit_screen",onClick:this.cycleFitMode},{default:i(()=>[o(Q,null,{default:i(()=>[D("Convenience button to toggle current image-fit mode ")]),_:1})]),_:1},8,["onClick"])]),d.cap?(_(),w("span",qs,k(d.cap.slice(0,25)),1)):ae("",!0),n("span",Is,[o(I,{name:"close",onClick:P=>this.remove(C,d)},null,8,["onClick"])])]),o(Re,{class:"cardimage",onClick:P=>this.imgCB(C,d),src:d.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])):ae("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Bs=le(Qa,[["render",Ts]]);const Ps=ne({name:"ImagesComponent",setup(){return{reStore:ie(),newCap:c(""),newDesc:c(""),newName:c(""),newSource:c(""),newUrl:c(""),promptAddImage:c(!1)}},mounted(){H(this.reStore.userSnapshot.images,async(e,a)=>{console.log("watcher ",e,a)})},methods:{addImageCB(){console.log("addImageCB",this.newUrl);const e={name:this.newName,desc:this.newDesc,cap:this.newCap,source:this.newSource,url:this.newUrl};this.reStore.saveImage(null,e)},imgCB(e,a){this.reStore.router.push("/teacher/editor"),console.log(e,a),this.reStore.loadImgId(e)},remove(e,a){console.log(e,a),this.reStore.removeImage(e)}}}),Ms={class:"row cardheader justify-between"},Os={class:"history-remove hidden"},Ls={key:0},Hs={class:"history-remove ptr"};function Ks(e,a,u,f,b,x){return _(),w(W,null,[o(Ie,{modelValue:e.promptAddImage,"onUpdate:modelValue":a[5]||(a[5]=r=>e.promptAddImage=r)},{default:i(()=>[o(M,null,{default:i(()=>[o(O,null,{default:i(()=>[o(me,{modelValue:e.newCap,"onUpdate:modelValue":a[0]||(a[0]=r=>e.newCap=r),label:"caption"},null,8,["modelValue"]),o(me,{modelValue:e.newDesc,"onUpdate:modelValue":a[1]||(a[1]=r=>e.newDesc=r),label:"description"},null,8,["modelValue"]),o(me,{modelValue:e.newName,"onUpdate:modelValue":a[2]||(a[2]=r=>e.newName=r),label:"name"},null,8,["modelValue"]),o(me,{modelValue:e.newSource,"onUpdate:modelValue":a[3]||(a[3]=r=>e.newSource=r),label:"source"},null,8,["modelValue"]),o(me,{modelValue:e.newUrl,"onUpdate:modelValue":a[4]||(a[4]=r=>e.newUrl=r),label:"url"},null,8,["modelValue"])]),_:1}),o(qe,{align:"center",class:"text-white"},{default:i(()=>[J(o(V,{flat:"",label:"Cancel"},null,512),[[Z]]),J(o(V,{flat:"",label:"Add",onClick:this.addImageCB},null,8,["onClick"]),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(M,{flat:""},{default:i(()=>[o(O,null,{default:i(()=>[o(Qe,{padding:"",class:"rounded-borders"},{default:i(()=>[o(Ue,{"header-style":{border:"1px solid gray"},label:"My Images"},{default:i(()=>[o(De,{class:"bg-primary text-white rounded-borders q-my-md"},{default:i(()=>[o(V,{bordered:"","no-caps":"",standout:"",onClick:a[6]||(a[6]=r=>e.promptAddImage=!0)},{default:i(()=>[D(" Add Image "),o(Q,null,{default:i(()=>[D("Add a custom image (only saves url, not image data)")]),_:1})]),_:1})]),_:1}),n("div",null,[(_(!0),w(W,null,he(this.reStore.userSnapshot.images,(r,d)=>(_(),E(M,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":a[7]||(a[7]=C=>this.reStore.userSnapshot.images=C),key:d},{default:i(()=>[n("div",Ms,[n("span",Os,[o(I)]),r.desc?(_(),w("span",Ls,k(r.url.slice(0,25)),1)):ae("",!0),n("span",Hs,[o(I,{name:"close",onClick:C=>this.remove(d,r)},null,8,["onClick"])])]),o(Re,{class:"cardimage",onClick:C=>this.imgCB(d,r),src:r.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Ns=le(Ps,[["render",Ks]]);const As=ne({name:"BookmarksComponent",setup(){return{reStore:ie()}},mounted(){H(this.reStore.userSnapshot.bookmarks,async(e,a)=>{console.log("watcher ",e,a)})},methods:{imgCB(e,a){this.reStore.router.push("/teacher/editor"),console.log(e,a),this.reStore.page=a,this.reStore.courses.imgIdx=a.imgIdx,this.reStore.courses.trigger+=1,this.reStore.courses.pageid=a.pageid},remove(e,a){console.log(e,a),this.reStore.removeBookmark(e)}}}),Rs={class:"row cardheader justify-between"},Us={class:"history-remove hidden"},Qs={key:0,class:"fi fi-gb"},js={key:1,class:"fi fi-us"},Fs={key:2,class:"fi fi-mx"},zs={key:3,class:"fi fi-fr"},Ys={key:4,class:"fi fi-de"},Es={key:5,class:"fi fi-it"},Ws={key:6,class:"fi fi-br"},Gs={key:7,class:"fi fi-ke"},Js={key:8,class:"fi fi-ru"},Xs={key:9,class:"fi fi-th"},Zs={key:10,class:"fi fi-cn"},eo={key:11,class:"fi fi-hk"},to={key:12,class:"fi fi-tw"},ao={key:13,class:"fi fi-kr"},so={key:14,class:"fi fi-jp"},oo={key:15,class:"fi fi-id"},no={key:16,class:"fi fi-xx"},lo={class:"history-remove ptr"};function io(e,a,u,f,b,x){return _(),E(M,{flat:""},{default:i(()=>[o(O,null,{default:i(()=>[o(Qe,{padding:"",class:"rounded-borders"},{default:i(()=>[o(Ue,{"header-style":{border:"1px solid gray"},label:"My bookmarks"},{default:i(()=>[n("div",null,[(_(!0),w(W,null,he(this.reStore.userSnapshot.bookmarks,(r,d)=>(_(),E(M,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":a[0]||(a[0]=C=>this.reStore.userSnapshot.bookmarks=C),key:d},{default:i(()=>[n("div",Rs,[n("span",Us,[o(I)]),r.langVoiceKey==="Eng-UK-Fem"?(_(),w("span",Qs)):r.langVoiceKey==="Eng-US"?(_(),w("span",js)):r.langVoiceKey==="espa\xF1ol"?(_(),w("span",Fs)):r.langVoiceKey==="fran\xE7ais"?(_(),w("span",zs)):r.langVoiceKey==="Deutsch"?(_(),w("span",Ys)):r.langVoiceKey==="italiano"?(_(),w("span",Es)):r.langVoiceKey==="portugu\xEAs do Brasil"?(_(),w("span",Ws)):r.langVoiceKey==="Kiswahili"?(_(),w("span",Gs)):r.langVoiceKey==="\u0440\u0443\u0441\u0441\u043A\u0438\u0439"?(_(),w("span",Js)):r.langVoiceKey==="\u0E44\u0E17\u0E22"?(_(),w("span",Xs)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09"?(_(),w("span",Zs)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09"?(_(),w("span",eo)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09"?(_(),w("span",to)):r.langVoiceKey==="\uD55C\uAD6D\uC758"?(_(),w("span",ao)):r.langVoiceKey==="\u65E5\u672C\u8A9E"?(_(),w("span",so)):r.langVoiceKey==="Bahasa Indonesia"?(_(),w("span",oo)):(_(),w("span",no)),D(" "+k(r.pageTitle.slice(0,25))+" ",1),n("span",lo,[o(I,{name:"close",onClick:C=>this.remove(d,r)},null,8,["onClick"])])]),o(Re,{class:"cardimage",onClick:C=>this.imgCB(d,r),src:r.imgs[r.imgIdx].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var ro=le(As,[["render",io]]);const uo=["gregorian","persian"],co={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>uo.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},mo=["update:modelValue"];function ue(e){return e.year+"/"+ye(e.month)+"/"+ye(e.day)}function ho(e,a){const u=p(()=>e.disable!==!0&&e.readonly!==!0),f=p(()=>e.editable===!0?0:-1),b=p(()=>{const d=[];return e.color!==void 0&&d.push(`bg-${e.color}`),e.textColor!==void 0&&d.push(`text-${e.textColor}`),d.join(" ")});function x(){return e.locale!==void 0?{...a.lang.date,...e.locale}:a.lang.date}function r(d){const C=new Date,P=d===!0?null:0;if(e.calendar==="persian"){const K=$a(C);return{year:K.jy,month:K.jm,day:K.jd}}return{year:C.getFullYear(),month:C.getMonth()+1,day:C.getDate(),hour:P,minute:P,second:P,millisecond:P}}return{editable:u,tabindex:f,headerClass:b,getLocale:x,getCurrentDate:r}}const pe=20,go=["Calendar","Years","Months"],Ot=e=>go.includes(e),ut=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Ve=" \u2014 ";function ce(e){return e.year+"/"+ye(e.month)}var fo=Te({name:"QDate",props:{...co,...aa,...We,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:ut},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:ut},navigationMaxYearMonth:{type:String,validator:ut},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Ot}},emits:[...mo,"rangeStart","rangeEnd","navigation"],setup(e,{slots:a,emit:u}){const{proxy:f}=Ee(),{$q:b}=f,x=Ge(e,b),{getCache:r}=ra(),{tabindex:d,headerClass:C,getLocale:P,getCurrentDate:K}=ho(e,b);let U;const ee=sa(e),Be=oa(ee),ge=c(null),j=c(yt()),T=c(P()),Pe=p(()=>yt()),N=p(()=>P()),X=p(()=>K()),S=c(Ct(j.value,T.value)),A=c(e.defaultView),je=b.lang.rtl===!0?"right":"left",Ce=c(je.value),Se=c(je.value),Me=S.value.year,ke=c(Me-Me%pe-(Me<0?pe:0)),L=c(null),Je=p(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(x.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),se=p(()=>e.color||"primary"),re=p(()=>e.textColor||"white"),be=p(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Oe=p(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),y=p(()=>Oe.value.filter(t=>typeof t=="string").map(t=>et(t,j.value,T.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),R=p(()=>{const t=s=>et(s,j.value,T.value);return Oe.value.filter(s=>fa(s)===!0&&s.from!==void 0&&s.to!==void 0).map(s=>({from:t(s.from),to:t(s.to)})).filter(s=>s.from.dateHash!==null&&s.to.dateHash!==null&&s.from.dateHash<s.to.dateHash)}),oe=p(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const s=Pt(t.year,t.month,t.day);return new Date(s.gy,s.gm-1,s.gd)}),Le=p(()=>e.calendar==="persian"?ue:(t,s,l)=>Va(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),s===void 0?j.value:s,l===void 0?T.value:l,t.year,t.timezoneOffset)),He=p(()=>y.value.length+R.value.reduce((t,s)=>t+1+xa(oe.value(s.to),oe.value(s.from)),0)),ht=p(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(L.value!==null){const l=L.value.init,g=oe.value(l);return T.value.daysShort[g.getDay()]+", "+T.value.monthsShort[l.month-1]+" "+l.day+Ve+"?"}if(He.value===0)return Ve;if(He.value>1)return`${He.value} ${T.value.pluralDay}`;const t=y.value[0],s=oe.value(t);return isNaN(s.valueOf())===!0?Ve:T.value.headerTitle!==void 0?T.value.headerTitle(s,t):T.value.daysShort[s.getDay()]+", "+T.value.monthsShort[t.month-1]+" "+t.day}),Kt=p(()=>y.value.concat(R.value.map(s=>s.from)).sort((s,l)=>s.year-l.year||s.month-l.month)[0]),Nt=p(()=>y.value.concat(R.value.map(s=>s.to)).sort((s,l)=>l.year-s.year||l.month-s.month)[0]),gt=p(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(He.value===0)return Ve;if(He.value>1){const t=Kt.value,s=Nt.value,l=T.value.monthsShort;return l[t.month-1]+(t.year!==s.year?" "+t.year+Ve+l[s.month-1]+" ":t.month!==s.month?Ve+l[s.month-1]:"")+" "+s.year}return y.value[0].year}),Fe=p(()=>{const t=[b.iconSet.datetime.arrowLeft,b.iconSet.datetime.arrowRight];return b.lang.rtl===!0?t.reverse():t}),ft=p(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):T.value.firstDayOfWeek),At=p(()=>{const t=T.value.daysShort,s=ft.value;return s>0?t.slice(s,7).concat(t.slice(0,s)):t}),de=p(()=>{const t=S.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():rt(t.year,t.month)}),Rt=p(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),F=p(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),z=p(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Xe=p(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return F.value!==null&&F.value.year>=S.value.year&&(t.year.prev=!1,F.value.year===S.value.year&&F.value.month>=S.value.month&&(t.month.prev=!1)),z.value!==null&&z.value.year<=S.value.year&&(t.year.next=!1,z.value.year===S.value.year&&z.value.month<=S.value.month&&(t.month.next=!1)),t}),ze=p(()=>{const t={};return y.value.forEach(s=>{const l=ce(s);t[l]===void 0&&(t[l]=[]),t[l].push(s.day)}),t}),vt=p(()=>{const t={};return R.value.forEach(s=>{const l=ce(s.from),g=ce(s.to);if(t[l]===void 0&&(t[l]=[]),t[l].push({from:s.from.day,to:l===g?s.to.day:void 0,range:s}),l<g){let m;const{year:q,month:v}=s.from,$=v<12?{year:q,month:v+1}:{year:q+1,month:1};for(;(m=ce($))<=g;)t[m]===void 0&&(t[m]=[]),t[m].push({from:void 0,to:m===g?s.to.day:void 0,range:s}),$.month++,$.month>12&&($.year++,$.month=1)}}),t}),Ke=p(()=>{if(L.value===null)return;const{init:t,initHash:s,final:l,finalHash:g}=L.value,[m,q]=s<=g?[t,l]:[l,t],v=ce(m),$=ce(q);if(v!==G.value&&$!==G.value)return;const B={};return v===G.value?(B.from=m.day,B.includeFrom=!0):B.from=1,$===G.value?(B.to=q.day,B.includeTo=!0):B.to=de.value,B}),G=p(()=>ce(S.value)),Ut=p(()=>{const t={};if(e.options===void 0){for(let l=1;l<=de.value;l++)t[l]=!0;return t}const s=typeof e.options=="function"?e.options:l=>e.options.includes(l);for(let l=1;l<=de.value;l++){const g=G.value+"/"+ye(l);t[l]=s(g)}return t}),Qt=p(()=>{const t={};if(e.events===void 0)for(let s=1;s<=de.value;s++)t[s]=!1;else{const s=typeof e.events=="function"?e.events:l=>e.events.includes(l);for(let l=1;l<=de.value;l++){const g=G.value+"/"+ye(l);t[l]=s(g)===!0&&Rt.value(g)}}return t}),jt=p(()=>{let t,s;const{year:l,month:g}=S.value;if(e.calendar!=="persian")t=new Date(l,g-1,1),s=new Date(l,g-1,0).getDate();else{const m=Pt(l,g,1);t=new Date(m.gy,m.gm-1,m.gd);let q=g-1,v=l;q===0&&(q=12,v--),s=rt(v,q)}return{days:t.getDay()-ft.value-1,endDay:s}}),pt=p(()=>{const t=[],{days:s,endDay:l}=jt.value,g=s<0?s+7:s;if(g<6)for(let v=l-g;v<=l;v++)t.push({i:v,fill:!0});const m=t.length;for(let v=1;v<=de.value;v++){const $={i:v,event:Qt.value[v],classes:[]};Ut.value[v]===!0&&($.in=!0,$.flat=!0),t.push($)}if(ze.value[G.value]!==void 0&&ze.value[G.value].forEach(v=>{const $=m+v-1;Object.assign(t[$],{selected:!0,unelevated:!0,flat:!1,color:se.value,textColor:re.value})}),vt.value[G.value]!==void 0&&vt.value[G.value].forEach(v=>{if(v.from!==void 0){const $=m+v.from-1,B=m+(v.to||de.value)-1;for(let nt=$;nt<=B;nt++)Object.assign(t[nt],{range:v.range,unelevated:!0,color:se.value,textColor:re.value});Object.assign(t[$],{rangeFrom:!0,flat:!1}),v.to!==void 0&&Object.assign(t[B],{rangeTo:!0,flat:!1})}else if(v.to!==void 0){const $=m+v.to-1;for(let B=m;B<=$;B++)Object.assign(t[B],{range:v.range,unelevated:!0,color:se.value,textColor:re.value});Object.assign(t[$],{flat:!1,rangeTo:!0})}else{const $=m+de.value-1;for(let B=m;B<=$;B++)Object.assign(t[B],{range:v.range,unelevated:!0,color:se.value,textColor:re.value})}}),Ke.value!==void 0){const v=m+Ke.value.from-1,$=m+Ke.value.to-1;for(let B=v;B<=$;B++)t[B].color=se.value,t[B].editRange=!0;Ke.value.includeFrom===!0&&(t[v].editRangeFrom=!0),Ke.value.includeTo===!0&&(t[$].editRangeTo=!0)}S.value.year===X.value.year&&S.value.month===X.value.month&&(t[m+X.value.day-1].today=!0);const q=t.length%7;if(q>0){const v=7-q;for(let $=1;$<=v;$++)t.push({i:$,fill:!0})}return t.forEach(v=>{let $="q-date__calendar-item ";v.fill===!0?$+="q-date__calendar-item--fill":($+=`q-date__calendar-item--${v.in===!0?"in":"out"}`,v.range!==void 0&&($+=` q-date__range${v.rangeTo===!0?"-to":v.rangeFrom===!0?"-from":""}`),v.editRange===!0&&($+=` q-date__edit-range${v.editRangeFrom===!0?"-from":""}${v.editRangeTo===!0?"-to":""}`),(v.range!==void 0||v.editRange===!0)&&($+=` text-${v.color}`)),v.classes=$}),t}),Ft=p(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});H(()=>e.modelValue,t=>{if(U===t)U=0;else{const{year:s,month:l}=Ct(j.value,T.value);we(s,l)}}),H(A,()=>{ge.value!==null&&f.$el.contains(document.activeElement)===!0&&ge.value.focus()}),H(()=>S.value.year,t=>{u("navigation",{year:t,month:S.value.month})}),H(()=>S.value.month,t=>{u("navigation",{year:S.value.year,month:t})}),H(Pe,t=>{$t(t,T.value,"mask"),j.value=t}),H(N,t=>{$t(j.value,t,"locale"),T.value=t});function _t(){const t=X.value,s=ze.value[ce(t)];(s===void 0||s.includes(t.day)===!1)&&at(t),Ze(t.year,t.month)}function zt(t){Ot(t)===!0&&(A.value=t)}function Yt(t,s){["month","year"].includes(t)&&(t==="month"?kt:tt)(s===!0?-1:1)}function Ze(t,s){A.value="Calendar",we(t,s)}function Et(t,s){if(e.range===!1||!t){L.value=null;return}const l=Object.assign({...S.value},t),g=s!==void 0?Object.assign({...S.value},s):l;L.value={init:l,initHash:ue(l),final:g,finalHash:ue(g)},Ze(l.year,l.month)}function yt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function et(t,s,l){return Da(t,s,l,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Ct(t,s){const l=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(l.length===0)return St();const g=l[l.length-1],m=et(g.from!==void 0?g.from:g,t,s);return m.dateHash===null?St():m}function St(){let t,s;if(e.defaultYearMonth!==void 0){const l=e.defaultYearMonth.split("/");t=parseInt(l[0],10),s=parseInt(l[1],10)}else{const l=X.value!==void 0?X.value:K();t=l.year,s=l.month}return{year:t,month:s,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+ye(s)+"/01"}}function kt(t){let s=S.value.year,l=Number(S.value.month)+t;l===13?(l=1,s++):l===0&&(l=12,s--),we(s,l),be.value===!0&&Ye("month")}function tt(t){const s=Number(S.value.year)+t;we(s,S.value.month),be.value===!0&&Ye("year")}function Wt(t){we(t,S.value.month),A.value=e.defaultView==="Years"?"Months":"Calendar",be.value===!0&&Ye("year")}function Gt(t){we(S.value.year,t),A.value="Calendar",be.value===!0&&Ye("month")}function Jt(t,s){const l=ze.value[s];(l!==void 0&&l.includes(t.day)===!0?st:at)(t)}function fe(t){return{year:t.year,month:t.month,day:t.day}}function we(t,s){F.value!==null&&t<=F.value.year&&(t=F.value.year,s<F.value.month&&(s=F.value.month)),z.value!==null&&t>=z.value.year&&(t=z.value.year,s>z.value.month&&(s=z.value.month));const l=t+"/"+ye(s)+"/01";l!==S.value.dateHash&&(Ce.value=S.value.dateHash<l==(b.lang.rtl!==!0)?"left":"right",t!==S.value.year&&(Se.value=Ce.value),Dt(()=>{ke.value=t-t%pe-(t<0?pe:0),Object.assign(S.value,{year:t,month:s,day:1,dateHash:l})}))}function bt(t,s,l){const g=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;U=g;const{reason:m,details:q}=wt(s,l);u("update:modelValue",g,m,q)}function Ye(t){const s=y.value[0]!==void 0&&y.value[0].dateHash!==null?{...y.value[0]}:{...S.value};Dt(()=>{s.year=S.value.year,s.month=S.value.month;const l=e.calendar!=="persian"?new Date(s.year,s.month,0).getDate():rt(s.year,s.month);s.day=Math.min(Math.max(1,s.day),l);const g=$e(s);U=g;const{details:m}=wt("",s);u("update:modelValue",g,t,m)})}function wt(t,s){return s.from!==void 0?{reason:`${t}-range`,details:{...fe(s.target),from:fe(s.from),to:fe(s.to)}}:{reason:`${t}-day`,details:fe(s)}}function $e(t,s,l){return t.from!==void 0?{from:Le.value(t.from,s,l),to:Le.value(t.to,s,l)}:Le.value(t,s,l)}function at(t){let s;if(e.multiple===!0)if(t.from!==void 0){const l=ue(t.from),g=ue(t.to),m=y.value.filter(v=>v.dateHash<l||v.dateHash>g),q=R.value.filter(({from:v,to:$})=>$.dateHash<l||v.dateHash>g);s=m.concat(q).concat(t).map(v=>$e(v))}else{const l=Oe.value.slice();l.push($e(t)),s=l}else s=$e(t);bt(s,"add",t)}function st(t){if(e.noUnset===!0)return;let s=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const l=$e(t);t.from!==void 0?s=e.modelValue.filter(g=>g.from!==void 0?g.from!==l.from&&g.to!==l.to:!0):s=e.modelValue.filter(g=>g!==l),s.length===0&&(s=null)}bt(s,"remove",t)}function $t(t,s,l){const g=y.value.concat(R.value).map(m=>$e(m,t,s)).filter(m=>m.from!==void 0?m.from.dateHash!==null&&m.to.dateHash!==null:m.dateHash!==null);u("update:modelValue",(e.multiple===!0?g:g[0])||null,l)}function Xt(){if(e.minimal!==!0)return h("div",{class:"q-date__header "+C.value},[h("div",{class:"relative-position"},[h(Ne,{name:"q-transition--fade"},()=>h("div",{key:"h-yr-"+gt.value,class:"q-date__header-subtitle q-date__header-link "+(A.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:d.value,...r("vY",{onClick(){A.value="Years"},onKeyup(t){t.keyCode===13&&(A.value="Years")}})},[gt.value]))]),h("div",{class:"q-date__header-title relative-position flex no-wrap"},[h("div",{class:"relative-position col"},[h(Ne,{name:"q-transition--fade"},()=>h("div",{key:"h-sub"+ht.value,class:"q-date__header-title-label q-date__header-link "+(A.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:d.value,...r("vC",{onClick(){A.value="Calendar"},onKeyup(t){t.keyCode===13&&(A.value="Calendar")}})},[ht.value]))]),e.todayBtn===!0?h(V,{class:"q-date__header-today self-start",icon:b.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:d.value,onClick:_t}):null])])}function ot({label:t,type:s,key:l,dir:g,goTo:m,boundaries:q,cls:v}){return[h("div",{class:"row items-center q-date__arrow"},[h(V,{round:!0,dense:!0,size:"sm",flat:!0,icon:Fe.value[0],tabindex:d.value,disable:q.prev===!1,...r("go-#"+s,{onClick(){m(-1)}})})]),h("div",{class:"relative-position overflow-hidden flex flex-center"+v},[h(Ne,{name:"q-transition--jump-"+g},()=>h("div",{key:l},[h(V,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:d.value,...r("view#"+s,{onClick:()=>{A.value=s}})})]))]),h("div",{class:"row items-center q-date__arrow"},[h(V,{round:!0,dense:!0,size:"sm",flat:!0,icon:Fe.value[1],tabindex:d.value,disable:q.next===!1,...r("go+#"+s,{onClick(){m(1)}})})])]}const Zt={Calendar:()=>[h("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[h("div",{class:"q-date__navigation row items-center no-wrap"},ot({label:T.value.months[S.value.month-1],type:"Months",key:S.value.month,dir:Ce.value,goTo:kt,boundaries:Xe.value.month,cls:" col"}).concat(ot({label:S.value.year,type:"Years",key:S.value.year,dir:Se.value,goTo:tt,boundaries:Xe.value.year,cls:""}))),h("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},At.value.map(t=>h("div",{class:"q-date__calendar-item"},[h("div",t)]))),h("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[h(Ne,{name:"q-transition--slide-"+Ce.value},()=>h("div",{key:G.value,class:"q-date__calendar-days fit"},pt.value.map(t=>h("div",{class:t.classes},[t.in===!0?h(V,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:d.value,...r("day#"+t.i,{onClick:()=>{ea(t.i)},onMouseover:()=>{ta(t.i)}})},t.event!==!1?()=>h("div",{class:"q-date__event bg-"+t.event}):null):h("div",""+t.i)]))))])])],Months(){const t=S.value.year===X.value.year,s=g=>F.value!==null&&S.value.year===F.value.year&&F.value.month>g||z.value!==null&&S.value.year===z.value.year&&z.value.month<g,l=T.value.monthsShort.map((g,m)=>{const q=S.value.month===m+1;return h("div",{class:"q-date__months-item flex flex-center"},[h(V,{class:t===!0&&X.value.month===m+1?"q-date__today":null,flat:q!==!0,label:g,unelevated:q,color:q===!0?se.value:null,textColor:q===!0?re.value:null,tabindex:d.value,disable:s(m+1),...r("month#"+m,{onClick:()=>{Gt(m+1)}})})])});return e.yearsInMonthView===!0&&l.unshift(h("div",{class:"row no-wrap full-width"},[ot({label:S.value.year,type:"Years",key:S.value.year,dir:Se.value,goTo:tt,boundaries:Xe.value.year,cls:" col"})])),h("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},l)},Years(){const t=ke.value,s=t+pe,l=[],g=m=>F.value!==null&&F.value.year>m||z.value!==null&&z.value.year<m;for(let m=t;m<=s;m++){const q=S.value.year===m;l.push(h("div",{class:"q-date__years-item flex flex-center"},[h(V,{key:"yr"+m,class:X.value.year===m?"q-date__today":null,flat:!q,label:m,dense:!0,unelevated:q,color:q===!0?se.value:null,textColor:q===!0?re.value:null,tabindex:d.value,disable:g(m),...r("yr#"+m,{onClick:()=>{Wt(m)}})})]))}return h("div",{class:"q-date__view q-date__years flex flex-center"},[h("div",{class:"col-auto"},[h(V,{round:!0,dense:!0,flat:!0,icon:Fe.value[0],tabindex:d.value,disable:g(t),...r("y-",{onClick:()=>{ke.value-=pe}})})]),h("div",{class:"q-date__years-content col self-stretch row items-center"},l),h("div",{class:"col-auto"},[h(V,{round:!0,dense:!0,flat:!0,icon:Fe.value[1],tabindex:d.value,disable:g(s),...r("y+",{onClick:()=>{ke.value+=pe}})})])])}};function ea(t){const s={...S.value,day:t};if(e.range===!1){Jt(s,G.value);return}if(L.value===null){const l=pt.value.find(m=>m.fill!==!0&&m.i===t);if(e.noUnset!==!0&&l.range!==void 0){st({target:s,from:l.range.from,to:l.range.to});return}if(l.selected===!0){st(s);return}const g=ue(s);L.value={init:s,initHash:g,final:s,finalHash:g},u("rangeStart",fe(s))}else{const l=L.value.initHash,g=ue(s),m=l<=g?{from:L.value.init,to:s}:{from:s,to:L.value.init};L.value=null,at(l===g?s:{target:s,...m}),u("rangeEnd",{from:fe(m.from),to:fe(m.to)})}}function ta(t){if(L.value!==null){const s={...S.value,day:t};Object.assign(L.value,{final:s,finalHash:ue(s)})}}return Object.assign(f,{setToday:_t,setView:zt,offsetCalendar:Yt,setCalendarTo:Ze,setEditingRange:Et}),()=>{const t=[h("div",{class:"q-date__content col relative-position"},[h(Ne,{name:"q-transition--fade"},Zt[A.value])])],s=ct(a.default);return s!==void 0&&t.push(h("div",{class:"q-date__actions"},s)),e.name!==void 0&&e.disable!==!0&&Be(t,"push"),h("div",{class:Je.value,...Ft.value},[Xt(),h("div",{ref:ge,class:"q-date__main col column",tabindex:-1},t)])}}});const vo=["top","middle","bottom"];var po=Te({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>vo.includes(e)}},setup(e,{slots:a}){const u=p(()=>e.align!==void 0?{verticalAlign:e.align}:null),f=p(()=>{const b=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(b!==void 0?` text-${b}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>h("div",{class:f.value,style:u.value,role:"status","aria-label":e.label},va(a.default,e.label!==void 0?[e.label]:[]))}});const _o=ne({name:"OTDComponent",setup(){const e=ie(),a=Date.now(),u=Mt.formatDate(a,"MM/DD");return{reStore:e,otditems:c([]),promptOTDDate:c(!1),otddate:c(Date.now()),otdlabel:c(u),otdtype:c("selected")}},mounted(){this.init(),H(this.reStore.preferences,async(e,a)=>{console.log("OTD watcher"),e.langVoiceKey!==a.langVoiceKey?this.init():(console.log("OTD watcher ",e),this.init())})},methods:{async init(){console.log("OTD init");const e=this.reStore.preferences.langVoiceKey;await this.reStore.wiki.setLang(this.reStore.langVoices[e].langName);const a=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=a[this.otdtype],console.log(this.otditems);for(const[f,b]of Object.entries(this.reStore.langVoices)){const x=b.flagName;te("#otdfi").classed(x,!1)}const u=this.reStore.langVoices[e].flagName;te("#otdfi").classed(u,!0)},async loadPageId(e){console.log("loadPageId ",e);const a=this.reStore.preferences.langVoiceKey;console.log("OTD load ",a),this.reStore.loadPageId(e,a),this.reStore.router.push("/teacher/editor")},async load(e){console.log("load",this.otditems[e].text),console.log("load",this.otditems[e]);const a=this.reStore.preferences.langVoiceKey;console.log("OTD load ",a),this.reStore.loadPageId(this.otditems[e].pages[0].pageid,a),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const e=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=e.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=Mt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(e){console.log("otdOptionsCB",this.otdtype);const a=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=a[this.otdtype]}}}),yo=n("div",{class:"text-h6"},"Select Date",-1),Co={class:"q-gutter-y-sm column"},So=n("span",{id:"otdfi",class:"pfi text-h4"},null,-1),ko={class:""},bo=["onClick"],wo=n("br",null,null,-1);function $o(e,a,u,f,b,x){return _(),w(W,null,[o(Ie,{modelValue:e.promptOTDDate,"onUpdate:modelValue":a[2]||(a[2]=r=>e.promptOTDDate=r),persistent:""},{default:i(()=>[o(M,{style:{"min-width":"350px"}},{default:i(()=>[o(O,{align:"center"},{default:i(()=>[yo]),_:1}),o(fo,{modelValue:e.otddate,"onUpdate:modelValue":a[0]||(a[0]=r=>e.otddate=r),minimal:""},null,8,["modelValue"]),o(qe,{align:"center",class:"text-white"},{default:i(()=>[J(o(V,{flat:"",label:"Cancel"},null,512),[[Z]]),J(o(V,{flat:"",label:"Update OTD date",onClick:a[1]||(a[1]=r=>this.updateOTDDate())},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(M,{flat:""},{default:i(()=>[o(O,null,{default:i(()=>[o(Qe,{padding:"",class:"rounded-borders"},{default:i(()=>[o(Ue,{"header-style":{border:"1px solid gray"},label:"On This Day"},{default:i(()=>[n("div",Co,[o(De,{class:"bg-primary text-white rounded-borders q-my-md"},{default:i(()=>[o(V,{dark:"",standout:"",onClick:a[3]||(a[3]=r=>e.promptOTDDate=!0)},{default:i(()=>[D(k(e.otdlabel),1)]),_:1}),o(Ae),So,o(Ae),o(Lt,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":a[4]||(a[4]=r=>this.otdtype=r),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:a[5]||(a[5]=r=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),n("div",ko,[(_(!0),w(W,null,he(e.otditems,(r,d)=>(_(),E(M,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:e.otditems,"onUpdate:modelValue":a[6]||(a[6]=C=>e.otditems=C),key:d},{default:i(()=>[n("span",{style:{cursor:"pointer"},onClick:C=>this.load(d)},k(d),9,bo),D(". "+k(r.year)+" "+k(r.text),1),wo,(_(!0),w(W,null,he(r.pages,(C,P)=>(_(),w("span",{key:P},[o(po,{class:"on-left",color:"accent",style:{cursor:"pointer"},onClick:K=>this.loadPageId(C.pageid)},{default:i(()=>[o(Q,null,{default:i(()=>[D(k(C.title),1)]),_:2},1024),o(I,{size:"xs",name:"link"})]),_:2},1032,["onClick"])]))),128))]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Vo=le(_o,[["render",$o]]);const xo=ne({name:"CurrentAssignment",setup(){const e=ie();return{reStore:e,ck:c("-"),goal:c("-"),created:c("-"),updated:c("-"),id:c("-"),points:c("-"),pages:c([]),pgIdx:c(e.courses.pgIdx),title:c(""),promptEditTitle:c(!1)}},mounted(){console.log("CurrentAssignment mounted"),H(this.reStore.courses,async(e,a)=>{try{console.log("CurrentAssignment.watcher");const u=e.ck,f=e.aid;this.id=f,this.ck=u,this.goal=this.reStore.courses[u].assignments[f].goal,this.created=this.reStore.courses[u].assignments[f].created,this.updated=this.reStore.courses[u].assignments[f].updated,this.points=this.reStore.courses[u].assignments[f].points;try{const b=this.reStore.courses[u].assignments[f].pages.length;console.log("pages.length ",b)}catch{this.reStore.courses[u].assignments[f].pages=[]}this.pages=this.reStore.courses[u].assignments[f].pages,this.title=this.reStore.courses[u].assignments[f].title,this.pgIdx=this.reStore.courses.pgIdx}catch(u){console.log(u)}},{immediate:!0,deep:!0})},methods:{save(){console.log("save"),this.reStore.saveCurrentAssignment()},nextPage(){this.reStore.nextPage()},changeTitleCB(){console.log("CurrentAssignment.changeTitleCB",this.title),this.reStore.setAssignmentTitle(this.reStore.courses.ck,this.reStore.courses.aid,this.title)}}}),Do=n("div",{class:"text-h6"},"Change assignment title",-1),qo={class:"text-weight-bolder text-center q-pa-md text-white"},Io=n("br",null,null,-1),To={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Bo={width:"100%"},Po=n("td",null,"Title",-1),Mo={style:{width:"50%"}},Oo=n("td",null,"Course-Key",-1),Lo={style:{width:"50%"}},Ho=n("td",null,"Assgmnt Id",-1),Ko={style:{width:"50%"}},No=n("td",null,"Created",-1),Ao={style:{width:"50%"}},Ro=n("td",null,"Updated",-1),Uo={style:{width:"50%"}},Qo=n("td",null,"Goal",-1),jo={style:{width:"50%"}},Fo=n("td",null,"Pages",-1);function zo(e,a,u,f,b,x){const r=Y("router-link");return _(),w(W,null,[o(Ie,{modelValue:e.promptEditTitle,"onUpdate:modelValue":a[3]||(a[3]=d=>e.promptEditTitle=d),persistent:""},{default:i(()=>[o(M,{style:{"min-width":"350px"}},{default:i(()=>[o(O,null,{default:i(()=>[Do]),_:1}),o(O,{class:"q-pt-none"},{default:i(()=>[o(me,{dense:"",modelValue:e.title,"onUpdate:modelValue":a[0]||(a[0]=d=>e.title=d),autofocus:"",onKeyup:a[1]||(a[1]=mt(d=>{e.prompt=!1,this.changeTitleCB()},["enter"]))},null,8,["modelValue"])]),_:1}),o(qe,{align:"right",class:"text-white"},{default:i(()=>[J(o(V,{outline:"",label:"Cancel"},null,512),[[Z]]),J(o(V,{outline:"",label:"Save",onClick:a[2]||(a[2]=d=>this.changeTitleCB())},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(M,{flat:""},{default:i(()=>[o(O,null,{default:i(()=>[n("div",qo,[o(r,{to:"/teacher/editor",class:"text-white"},{default:i(()=>[D(k(this.title.slice(0,20)),1)]),_:1}),Io,o(I,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:a[4]||(a[4]=d=>this.promptEditTitle=!0),size:"sm"}),o(I,{style:{cursor:"pointer"},class:"on-right",name:"save",onClick:this.save,size:"sm"},null,8,["onClick"])]),n("div",To,[n("table",Bo,[n("tr",null,[Po,n("td",Mo,k(this.title),1)]),n("tr",null,[Oo,n("td",Lo,k(this.ck),1)]),n("tr",null,[Ho,n("td",Ko,k(this.id),1)]),n("tr",null,[No,n("td",Ao,k(this.created),1)]),n("tr",null,[Ro,n("td",Uo,k(this.updated),1)]),n("tr",null,[Qo,n("td",jo,k(this.goal),1)]),n("tr",null,[Fo,n("td",{style:{width:"50%",cursor:"pointer"},onClick:a[5]||(a[5]=d=>this.nextPage())},k(this.pgIdx+1)+" / "+k(this.pages.length),1)])])])]),_:1})]),_:1})],64)}var Yo=le(xo,[["render",zo]]);const Eo=ne({name:"CurrentCourse",setup(){return{reStore:ie(),title:c(""),assignmentCount:c(0),courseKey:c(""),created:c(""),updated:c(""),enrollmentCount:c(0),owner:c("")}},mounted(){console.log("CurrentCourse mounted"),H(this.reStore.courses,async(e,a)=>{try{if(this.reStore.courses.ck!=="undefined"){const u=this.reStore.courses.ck;console.log("CurrentCourse ",u),this.title=this.reStore.courses[u].title,this.courseKey=this.reStore.courses[u].courseKey,this.created=this.reStore.courses[u].created,this.updated=this.reStore.courses[u].updated,this.assignmentCount=Object.keys(this.reStore.courses[u].assignments).length,this.enrollmentCount=Object.keys(this.reStore.courses[u].enrollment).length,this.owner=this.reStore.courses[u].owner}}catch(u){console.log(u)}},{immediate:!0,deep:!0})},methods:{dummy(){console.log("dummy")}}}),Wo={class:"text-weight-bolder text-center q-pa-md"},Go={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Jo={width:"100%"},Xo=n("td",null,"Title",-1),Zo={style:{width:"50%"}},en=n("td",null,"Course-Key",-1),tn={style:{width:"50%"}},an=n("td",null,"Created",-1),sn={style:{width:"50%"}},on=n("td",null,"Updated",-1),nn={style:{width:"50%"}},ln=n("td",null,"Owner",-1),rn={style:{width:"50%"}},dn=n("td",null,"Assignments",-1),un={style:{width:"50%"}},cn=n("td",null,"Enrollment",-1),mn={style:{width:"50%"}};function hn(e,a,u,f,b,x){return _(),E(M,{flat:""},{default:i(()=>[o(O,null,{default:i(()=>[n("div",Wo,k(this.title),1),n("div",Go,[n("table",Jo,[n("tr",null,[Xo,n("td",Zo,k(this.title),1)]),n("tr",null,[en,n("td",tn,k(this.courseKey),1)]),n("tr",null,[an,n("td",sn,k(this.created),1)]),n("tr",null,[on,n("td",nn,k(this.updated),1)]),n("tr",null,[ln,n("td",rn,k(this.owner.slice(0,10)),1)]),n("tr",null,[dn,n("td",un,k(this.assignmentCount),1)]),n("tr",null,[cn,n("td",mn,k(this.enrollmentCount),1)])])])]),_:1})]),_:1})}var gn=le(Eo,[["render",hn]]);const fn=ne({name:"PagerComponent",setup(){return{reStore:ie(),assignment:c(null)}},mounted(){console.log("mounted"),this.reStore.courses.ck&&this.reStore.courses.aid,H(this.reStore.courses,async(e,a)=>{if(this.reStore.aid||(this.assignment=null),!this.assignment)this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid]));else{const u=this.assignment.ck,f=this.assignment.id;(u!==e.ck||f!==e.aid)&&(console.log("PagerComponent assignment changed"),this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid])))}})},methods:{nextImg(e){const a=this.assignment.pages[e].imgIdx,u=this.assignment.pages[e].imgs.length;a+1<u?this.assignment.pages[e].imgIdx+=1:this.assignment.pages[e].imgIdx=0},prevImg(e){const a=this.assignment.pages[e].imgIdx,u=this.assignment.pages[e].imgs.length;a-1>-1?this.assignment.pages[e].imgIdx-=1:this.assignment.pages[e].imgIdx=u-1},loadCoverCB(){console.log("Pager loadCoverCB "),this.reStore.loadCover()},loadPageCB(e){console.log("Pager loadPageCB ",e),this.reStore.page=this.assignment.pages[e],this.reStore.imgIdx=this.assignment.pages[e].imgIdx,this.reStore.courses.imgIdx=this.assignment.pages[e].imgIdx,this.reStore.courses.trigger+=1},dummy(){console.log("dummy")}}}),vn={class:"text-weight-bolder text-center q-pa-xs"},pn={class:"text-weight-bolder text-center q-pa-xs"},_n={key:0},yn={class:"text-weight-bolder text-center q-pa-xs"},Cn={key:0},Sn={key:0},kn=n("span",{class:"float-left"},"Cover Page",-1),bn={class:"float-left"};function wn(e,a,u,f,b,x){return _(),E(M,{flat:"",style:{"max-width":"300px"},class:"q-pa-xs"},{default:i(()=>[o(O,null,{default:i(()=>[n("div",vn,"Course: "+k(this.reStore.courses.ck),1),n("div",pn,[D("Assignment: "),this.assignment?(_(),w("span",_n,k(this.assignment.title),1)):ae("",!0)]),n("div",yn,[D("Page: "),this.assignment?(_(),w("span",Cn,k(this.assignment.pages[this.assignment.pgIdx].pageTitle),1)):ae("",!0)]),this.assignment?(_(),w("span",Sn,[o(M,{class:"bg-primary otdcard q-pa-xs q-my-md",flat:"",bordered:""},{default:i(()=>[kn,o(Re,{src:this.assignment.coverUrl,onClick:e.loadCoverCB},null,8,["src","onClick"])]),_:1}),(_(!0),w(W,null,he(this.assignment.pages,(r,d)=>(_(),E(M,{class:"bg-primary otdcard q-pa-xs q-my-md",flat:"",bordered:"",modelValue:this.assignment.pages,"onUpdate:modelValue":a[0]||(a[0]=C=>this.assignment.pages=C),key:d},{default:i(()=>[n("span",bn,k(r.pageTitle),1),o(Re,{height:"200px",src:r.imgs[r.imgIdx].url,onClick:C=>e.loadPageCB(d)},null,8,["src","onClick"]),o(V,{onClick:C=>e.prevImg(d),icon:"arrow_left"},{default:i(()=>[D("Back")]),_:2},1032,["onClick"]),o(V,{class:"float-right",onClick:C=>e.nextImg(d),"icon-right":"arrow_right"},{default:i(()=>[D("Next")]),_:2},1032,["onClick"])]),_:2},1032,["modelValue"]))),128))])):ae("",!0)]),_:1})]),_:1})}var $n=le(fn,[["render",wn]]);const Vn=ne({name:"TeacherLayout",components:{PagerComponent:$n,CurrentCourse:gn,DocumentationComponent:da,SearchComponent:Ua,ImagesComponent:Ns,BookmarksComponent:ro,OTDComponent:Vo,CurrentAssignment:Yo,PreferencesComponent:ua,CurrentPage:Bs},setup(){const e=c(!1),a=c(!1),u=ie(),f=u.preferences,b=c(null),x=c(null);return{step:c(1),reStore:u,initialValues:c(f),scrollAreaRHS:b,scrollAreaLHS:x,leftDrawerOpen:e,rightDrawerOpen:a,flagName:c(u.langVoices[u.preferences.langVoiceKey].flagName),promptLanguage:c(!1),langVoices:c(u.preferences.langVoices),toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){a.value=!a.value}}},mounted(){qt.isActive||(qt.toggle(),it("primary","#333"),it("secondary",this.initialValues.secondaryColor),it("accent",this.initialValues.accentColor),this.flagName=this.reStore.langVoices[this.reStore.prefereneces.langVoiceKey].flagName,_e(".pfi").classed(this.flagName,!0))},methods:{setRHS(e){e==="pager"?(te("#advancedDiv").classed("hidden",!0),te("#pagerDiv").classed("hidden",!1)):(te("#advancedDiv").classed("hidden",!1),te("#pagerDiv").classed("hidden",!0))},scrollTopRHS(){this.scrollAreaRHS.setScrollPosition("vertical",0)},scrollTopLHS(){this.scrollAreaLHS.setScrollPosition("vertical",0)},setLangVoiceCB(e){this.flagName=this.reStore.langVoices[e].flagName;for(const[a,u]of Object.entries(this.reStore.langVoices)){const f=u.flagName;_e(".pfi").classed(f,!1)}_e(".pfi").classed(this.flagName,!0),this.reStore.preferences.langVoiceKey=e,this.reStore.preferences.langVoice=this.reStore.langVoices[e],console.log("langVoiceKey set to ",e,this.flagName),this.reStore.courses.trigger+=1}}}),xn=n("div",{class:"text-h6"},"Set Current Language",-1),Dn={width:"100%"},qn={class:"dashboard-wrapper"},In=n("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),Tn={class:"hidden"},Bn=n("br",null,null,-1),Pn=n("br",null,null,-1),Mn=n("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),On={id:"pagerDiv"},Ln={id:"advancedDiv",class:"hidden"},Hn={class:"hidden"};function Kn(e,a,u,f,b,x){const r=Y("router-link"),d=Y("router-view"),C=Y("DocumentationComponent"),P=Y("SearchComponent"),K=Y("ImagesComponent"),U=Y("BookmarksComponent"),ee=Y("OTDComponent"),Be=Y("PagerComponent"),ge=Y("CurrentCourse"),j=Y("CurrentAssignment"),T=Y("CurrentPage"),Pe=Y("PreferencesComponent");return _(),E(Sa,{view:"hHh LpR fFf"},{default:i(()=>[o(_a,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:i(()=>[o(Ie,{modelValue:e.promptLanguage,"onUpdate:modelValue":a[1]||(a[1]=N=>e.promptLanguage=N),persistent:""},{default:i(()=>[o(M,{style:{"min-width":"350px"}},{default:i(()=>[o(O,null,{default:i(()=>[xn]),_:1}),o(O,{class:"q-pt-none"},{default:i(()=>[n("table",Dn,[n("tr",null,[n("td",null,[o(Lt,{modelValue:this.langVoice,"onUpdate:modelValue":[a[0]||(a[0]=N=>this.langVoice=N),this.setLangVoiceCB],options:e.langVoices},null,8,["modelValue","options","onUpdate:modelValue"])])])])]),_:1}),o(qe,{align:"right",class:"text-white"},{default:i(()=>[J(o(V,{outline:"",flat:"",label:"Close"},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(De,null,{default:i(()=>[o(V,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),o(pa,null,{default:i(()=>[o(r,{to:"/teacher"},{default:i(()=>[o(I,{name:"home",color:"white"},{default:i(()=>[o(Q,null,{default:i(()=>[D("Return to My Teacher Page")]),_:1})]),_:1})]),_:1})]),_:1}),this.reStore.authenticated?(_(),E(V,{key:0,onClick:a[2]||(a[2]=N=>this.reStore.router.push("/student")),icon:"switch_account"},{default:i(()=>[o(Q,null,{default:i(()=>[D(" Switch between Teacher or Student role ")]),_:1})]),_:1})):ae("",!0),this.reStore.authenticated?(_(),E(V,{key:1,icon:"logout",onClick:a[3]||(a[3]=N=>this.reStore.logout())})):ae("",!0),o(V,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1})]),_:1}),o(Ca,{class:"container-fluid"},{default:i(()=>[n("div",qn,[o(d)]),o(It,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":a[4]||(a[4]=N=>e.leftDrawerOpen=N),side:"left"},{default:i(()=>[o(De,{flat:"",class:"bg-primary text-white"},{default:i(()=>[o(V,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),o(xe,{dark:"",vertical:"",inset:""}),o(V,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),o(xe,{dark:"",vertical:"",inset:""}),o(Ae),o(V,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopLHS},{default:i(()=>[o(Q,null,{default:i(()=>[D("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),In,o(Tt,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaLHS"},{default:i(()=>[o(C),o(P),o(K),o(U),o(ee)]),_:1},8,["visible"])]),_:1},8,["modelValue"]),o(It,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":a[8]||(a[8]=N=>e.rightDrawerOpen=N),side:"right"},{default:i(()=>[o(De,{flat:"",class:"bg-primary text-white"},{default:i(()=>[n("span",Tn,[o(V,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),o(xe,{dark:"",vertical:"",inset:""}),o(V,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),o(xe,{dark:"",vertical:"",inset:""})]),o(ya,{align:"left"},{default:i(()=>[o(xt,{icon:"theaters",onClick:a[5]||(a[5]=N=>this.setRHS("pager"))},{default:i(()=>[o(Q,null,{default:i(()=>[D("Visual Assignment Builder")]),_:1})]),_:1}),o(xt,{icon:"handyman",onClick:a[6]||(a[6]=N=>this.setRHS("advanced"))},{default:i(()=>[o(Q,null,{default:i(()=>[D("Detailed assignment configuration")]),_:1})]),_:1})]),_:1}),o(Ae),n("span",{class:"pfi fi fi-xx text-h5 ptr",onClick:a[7]||(a[7]=N=>e.promptLanguage=!0)},[o(Q,null,{default:i(()=>[D("Set current language "),Bn,D("Applied to new pages/searches."),Pn,D("Sync current page using sync-lang button.")]),_:1})]),o(Ae),o(V,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopRHS},{default:i(()=>[o(Q,null,{default:i(()=>[D("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),Mn,o(Tt,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaRHS"},{default:i(()=>[n("div",On,[o(Be)]),n("div",Ln,[n("span",Hn,[o(ge)]),o(j),o(T),o(Pe,{initialValues:this.initialValues},null,8,["initialValues"])])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var tl=le(Vn,[["render",Kn]]);export{tl as default};
