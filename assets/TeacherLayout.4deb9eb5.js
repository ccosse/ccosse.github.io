import{g as xe,h as f,i as d,z as Fe,aM as ea,B as Bt,r as g,D as R,l as ta,p as me,ax as aa,j as rt,x as D,q as oa,d as ne,_ as se,o as T,au as Q,a as l,w as r,Q as $,e as s,af as M,ag as p,aK as Ot,c as K,av as J,aL as be,aJ as ke,f as z,al as la,am as Me,G as wt,y as na,P as xt,s as tt}from"./index.7bcffdb5.js";import{Q as G}from"./QTooltip.ef386cc3.js";import{Q as Be,a as sa,b as ra,c as Qe,d as ia,e as $t,f as Tt,g as ua,h as da}from"./QLayout.144b8614.js";import{d as Ue,f as ze,c as ca,e as ha,u as Dt,g as ma}from"./use-dark.2cdf5d69.js";import{u as re,s as ga,a as je,p as he,t as va,c as Vt,f as fa,g as _a,j as at,_ as ya,d as qt}from"./re-store.a9202564.js";import{a as L,Q as Y,i as it,C as we,h as ut,u as pa,b as Ca,c as Sa}from"./ClosePopup.f1f8d4e7.js";import{a as ba,b as ka,c as It,d as ot,e as wa,u as xa,f as $a,D as Ta,P as Da}from"./DocumentationComponent.9773861c.js";import{Q as Pt}from"./QInput.df70bb01.js";import{Q as Va}from"./QToggle.7e989f2a.js";import{Q as dt}from"./QImg.e8b16475.js";import"./position-engine.1172a193.js";import"./selection.c2308a70.js";import"./use-portal.fa0e6471.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";import"./use-key-composition.ee68d62b.js";import"./QCheckbox.2d346855.js";const qa={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},lt={xs:2,sm:4,md:8,lg:16,xl:24};var Se=xe({name:"QSeparator",props:{...Ue,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const o=Fe(),m=ze(e,o.proxy.$q),b=f(()=>e.vertical===!0?"vertical":"horizontal"),w=f(()=>` q-separator--${b.value}`),C=f(()=>e.inset!==!1?`${w.value}-${qa[e.inset]}`:""),h=f(()=>`q-separator${w.value}${C.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(m.value===!0?" q-separator--dark":"")),i=f(()=>{const S={};if(e.size!==void 0&&(S[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const I=e.spaced===!0?`${lt.md}px`:e.spaced in lt?`${lt[e.spaced]}px`:e.spaced,O=e.vertical===!0?["Left","Right"]:["Top","Bottom"];S[`margin${O[0]}`]=S[`margin${O[1]}`]=I}return S});return()=>d("hr",{class:h.value,style:i.value,"aria-orientation":b.value})}});const Ia=d("div",{class:"q-space"});var st=xe({name:"QSpace",setup(){return()=>Ia}});const de=ea({}),Ma=Object.keys(Bt);var Oe=xe({name:"QExpansionItem",props:{...Bt,...ca,...Ue,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ha,"click","afterShow","afterHide"],setup(e,{slots:o,emit:m}){const{proxy:{$q:b}}=Fe(),w=ze(e,b),C=g(e.modelValue!==null?e.modelValue:e.defaultOpened),h=g(null),i=Dt(),{show:S,hide:I,toggle:O}=ma({showing:C});let A,W;const $e=f(()=>`q-expansion-item q-item-type q-expansion-item--${C.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),ie=f(()=>{if(e.contentInsetLevel===void 0)return null;const _=b.lang.rtl===!0?"Right":"Left";return{["padding"+_]:e.contentInsetLevel*56+"px"}}),j=f(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),V=f(()=>{const _={};return Ma.forEach(H=>{_[H]=e[H]}),_}),X=f(()=>j.value===!0||e.expandIconToggle!==!0),Ke=f(()=>e.expandedIcon!==void 0&&C.value===!0?e.expandedIcon:e.expandIcon||b.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),E=f(()=>e.disable!==!0&&(j.value===!0||e.expandIconToggle===!0)),y=f(()=>({expanded:C.value===!0,detailsId:e.targetUid,toggle:O,show:S,hide:I})),P=f(()=>{const _=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:b.lang.label[C.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":C.value===!0?"true":"false","aria-controls":i,"aria-label":_}});R(()=>e.group,_=>{W!==void 0&&W(),_!==void 0&&B()});function He(_){j.value!==!0&&O(_),m("click",_)}function ge(_){_.keyCode===13&&ve(_,!0)}function ve(_,H){H!==!0&&h.value!==null&&h.value.focus(),O(_),oa(_)}function Te(){m("afterShow")}function fe(){m("afterHide")}function B(){A===void 0&&(A=Dt()),C.value===!0&&(de[e.group]=A);const _=R(C,ee=>{ee===!0?de[e.group]=A:de[e.group]===A&&delete de[e.group]}),H=R(()=>de[e.group],(ee,Ve)=>{Ve===A&&ee!==void 0&&ee!==A&&I()});W=()=>{_(),H(),de[e.group]===A&&delete de[e.group],W=void 0}}function Ye(){const _={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},H=[d(D,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&C.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:Ke.value})];return E.value===!0&&(Object.assign(_,{tabindex:0,...P.value,onClick:ve,onKeyup:ge}),H.unshift(d("div",{ref:h,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),d(ot,_,()=>H)}function Z(){let _;return o.header!==void 0?_=[].concat(o.header(y.value)):(_=[d(ot,()=>[d(It,{lines:e.labelLines},()=>e.label||""),e.caption?d(It,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&_[e.switchToggleSide===!0?"push":"unshift"](d(ot,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>d(D,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&_[e.switchToggleSide===!0?"unshift":"push"](Ye()),_}function te(){const _={ref:"item",style:e.headerStyle,class:e.headerClass,dark:w.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return X.value===!0&&(_.clickable=!0,_.onClick=He,Object.assign(_,j.value===!0?V.value:P.value)),d(ka,_,Z)}function _e(){return me(d("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:ie.value,id:i},rt(o.default)),[[aa,C.value]])}function De(){const _=[te(),d(ba,{duration:e.duration,onShow:Te,onHide:fe},_e)];return e.expandSeparator===!0&&_.push(d(Se,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:w.value}),d(Se,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:w.value})),_}return e.group!==void 0&&B(),ta(()=>{W!==void 0&&W()}),()=>d("div",{class:$e.value},[d("div",{class:"q-expansion-item__container relative-position"},De())])}}),Pe=xe({name:"QList",props:{...Ue,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:o}){const m=Fe(),b=ze(e,m.proxy.$q),w=f(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(b.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>d(e.tag,{class:w.value},rt(o.default))}});const Ba=ne({name:"SearchComponent",setup(){const e=re(),o=g("");return{reStore:e,searchTerms:o,searchSize:g(e.preferences.resLimit),searchResults:g([]),promptSearchSize:g(!1)}},mounted(){R(this.reStore.preferences,async(e,o)=>{console.log("watcher ",e,o),this.searchSize=e.resLimit})},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchResults.splice(e,1)},load(e){console.log(e),console.log(this.searchResults[e]);const o=this.reStore.preferences.langVoiceKey;console.log("calling loadPageId ",this.searchResults[e].pageid,o),this.reStore.loadPageId(this.searchResults[e].pageid,o),this.reStore.courses.trigger+=1},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("doSearch ",e),this.reStore.wiki.setLang(e.langName);const o=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",o.results.length),this.searchResults=o.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),Oa=s("div",{class:"text-h6"},"Search Results Size",-1),Pa={class:"q-gutter-y-sm column"},Ha={key:0},Ra={class:"row cardheader ptr justify-between"},La=["onClick"],Aa={class:"history-remove"};function Qa(e,o,m,b,w,C){return T(),Q(J,null,[l(ut,{modelValue:e.promptSearchSize,"onUpdate:modelValue":o[2]||(o[2]=h=>e.promptSearchSize=h),persistent:""},{default:r(()=>[l(L,{style:{"min-width":"350px"}},{default:r(()=>[l(Y,{align:"center"},{default:r(()=>[Oa]),_:1}),l(Y,{class:"q-pt-none",align:"center"},{default:r(()=>[l(wa,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":o[0]||(o[0]=h=>e.searchSize=h)},null,8,["modelValue"])]),_:1}),l(it,{align:"center",class:"text-white"},{default:r(()=>[me(l($,{flat:"",label:"Cancel"},null,512),[[we]]),me(l($,{flat:"",label:"Update results size",onClick:o[1]||(o[1]=h=>this.updateSearchSize())},null,512),[[we]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(L,{flat:""},{default:r(()=>[l(Y,null,{default:r(()=>[l(Pe,{padding:"",class:"rounded-borders"},{default:r(()=>[l(Oe,{"header-style":{border:"1px solid gray"},label:"Search & Results"},{default:r(()=>[s("div",Pa,[l(Be,{class:"bg-primary text-white rounded-borders q-my-md"},{default:r(()=>[l($,{dark:"",standout:"",onClick:o[3]||(o[3]=h=>e.promptSearchSize=!0)},{default:r(()=>[M(p(this.searchResults.length)+" ",1),l(G,null,{default:r(()=>[M("Change results limit ("+p(this.searchSize)+")",1)]),_:1})]),_:1}),l(Pt,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":o[6]||(o[6]=h=>e.searchTerms=h),"input-class":"text-right",class:"q-ml-md",onKeyup:[o[7]||(o[7]=h=>this.update()),o[8]||(o[8]=Ot(h=>this.doSearch(),["enter"]))]},{append:r(()=>[e.searchTerms===""?(T(),K(D,{key:0,name:"search",onClick:o[4]||(o[4]=h=>this.doSearch())})):(T(),K(D,{key:1,name:"clear",class:"cursor-pointer",onClick:o[5]||(o[5]=h=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(T(),Q("div",Ha,[(T(!0),Q(J,null,be(this.searchResults,(h,i)=>(T(),K(L,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":o[9]||(o[9]=S=>this.searchResults=S),key:i},{default:r(()=>[s("div",Ra,[s("span",{class:"history-title col-grow",onClick:S=>this.load(i)},p(i)+". "+p(h.title.slice(0,25)),9,La),s("span",Aa,[l(D,{class:"primary",size:e.xl,color:e.primary,name:"close",onClick:S=>this.remove(i)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):ke("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var ja=se(Ba,[["render",Qa]]);const Fa=ne({name:"CurrentPage",props:{},setup(e){return{reStore:re(),ck:g("-"),aid:g("-"),pageTitle:g("-"),langVoiceKey:g(),flagName:g("fi fi-gb"),imgIdx:g(0),imgs:g([]),imgTot:g(0),imgFit:g("-"),guideWords:g("-"),mapCoords:g("-"),pageid:g("-"),pctReplace:g(),canonicalUrl:g(),props:e,isCustom:g(!1)}},mounted(){console.log(this.props),R(this.reStore.courses,async(e,o)=>{try{console.log("CurrentPage watcher",this.reStore.courses);const m=this.reStore.courses.ck,b=this.reStore.courses.aid,w=this.reStore.courses.pgIdx,C=this.reStore.page;if(C){console.log("CurrentPage ",C),this.pageTitle=C.pageTitle,this.imgIdx=C.imgIdx,this.imgs=C.imgs,this.imgTot=C.imgs.length,this.imgFit=C.imgFit,this.guideWords=C.guideWords,this.mapCoords=C.mapCoords,this.pageid=C.pageid,this.langVoiceKey=C.langVoiceKey,this.flagName=this.reStore.langVoices[C.langVoiceKey].flagName;for(const[h,i]of Object.entries(this.reStore.langVoices)){const S=i.flagName;je(".flagicon").classed(S,!1)}je(".flagicon").classed(this.flagName,!0),this.pctReplace=C.pctReplace,this.canonicalUrl=C.canonicalUrl,this.isCustom=g(this.reStore.page.isCustom)}this.aid=b,this.ck=m}catch(m){console.log(m)}},{immediate:!0,deep:!0})},methods:{speak(){console.log("CurrentPage.speak",this.reStore),this.reStore.speak()},cycleFitMode(){const e=["scale-down","cover"];let o=e.indexOf(this.imgFit);o+=1,o>e.length-1&&(o=0),this.imgFit=e[o],this.reStore.page.imgFit=this.imgFit,console.log("fit: ",this.imgFit),this.reStore.courses.trigger+=1},nextImg(){this.imgIdx=this.imgIdx+1>this.imgs.length-1?0:this.imgIdx+1,this.reStore.page.imgIdx=this.imgIdx,this.reStore.courses.imgIdx=this.imgIdx,this.reStore.courses.trigger+=1},imgCB(e,o){console.log(e,o),this.reStore.page.imgIdx=e,this.reStore.courses.imgIdx=e,this.reStore.courses.trigger+=1},loadURL(e){console.log("loadURL ",e),window.open(e,"_blank")},mapCB(){const e="https://maps.google.com/?ll="+this.mapCoords.split(",")[0]+","+this.mapCoords.split(",")[1];window.open(e,"_blank")},saveImage(e,o){console.log("saveImage: ",e,o),this.reStore.saveImage(e,o)},saveCurrentImage(){const e=this.imgs[this.imgIdx];console.log("saveCurrentImage: ",e),this.reStore.saveImage(this.imgIdx,e)},remove(e,o){console.log("remove: ",e,o),this.imgs.splice(e,1),this.reStore.page.imgs.splice(e,1)},toggleText(){ga("#slideTextDiv").classed("hidden")?je("#slideTextDiv").classed("hidden",!1):je("#slideTextDiv").classed("hidden",!0)},addBookmark(){console.log("addBookmark"),this.reStore.saveBookmark()},resetPage(){this.reStore.newPage()},newPage(){console.log("CurrentPage newPageCB "),this.reStore.newPage()},appendPage(){this.reStore.appendPage()},updatePage(){this.reStore.updatePage()},updateType(e,o){this.reStore.page.isCustom=this.isCustom}}}),Ua={class:"text-weight-bolder text-center q-pa-md text-white"},za=s("br",null,null,-1),Ka={style:{border:"1px solid gray","border-radius":"5px"}},Ya={width:"100%"},Na={style:{width:"50%","text-align":"center"}},Ea={style:{"text-align":"center"}},Wa={style:{"text-align":"center"}},Ga=s("td",{style:{"text-align":"center"}},"Speak Text",-1),Ja={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Xa={width:"100%"},Za=s("td",null,"Course-Key",-1),eo={style:{width:"50%"}},to={class:"ptr float-left"},ao=s("td",null,"Assgmnt Id",-1),oo={style:{width:"50%"}},lo={class:"ptr float-left"},no=s("td",null,"WP Page Id",-1),so={style:{width:"50%"}},ro=s("td",null,"Language",-1),io={style:{width:"50%"}},uo={class:"float-left"},co=s("span",{class:"q-mt-xs float-right flagicon"},null,-1),ho=s("td",null,"Images",-1),mo={style:{width:"50%"}},go=s("td",null,"Image Fit",-1),vo={class:"align-left"},fo=s("td",null,"Guide Words",-1),_o={style:{width:"50%"}},yo=s("td",null,"Percent Replace",-1),po={class:"float-left"},Co=s("td",null,"Map Coords",-1),So={class:"float-left"},bo=s("td",null,"Toggle Text",-1),ko={key:0},wo={class:"row cardheader justify-between"},xo={class:"history-remove"},$o={key:0},To={class:"history-remove ptr"};function Do(e,o,m,b,w,C){const h=z("router-link");return T(),Q(J,null,[l(L,{flat:""},{default:r(()=>[l(Y,null,{default:r(()=>[s("div",Ua,[l(h,{to:"/teacher/editor",class:"text-white"},{default:r(()=>[M(p(this.pageTitle.slice(0,20)),1)]),_:1}),za,l(D,{class:"on-right",name:"replay",onClick:this.resetPage,size:"sm"},null,8,["onClick"]),l(D,{class:"on-right",name:"add_circle",onClick:this.newPage,size:"sm"},null,8,["onClick"]),l(D,{class:"on-right",name:"publish",onClick:this.updatePage,size:"sm"},{default:r(()=>[l(G,null,{default:r(()=>[M("Update current page")]),_:1})]),_:1},8,["onClick"]),l(D,{class:"on-right",name:"publish",onClick:this.appendPage,size:"sm"},{default:r(()=>[l(G,null,{default:r(()=>[M("Push as new page")]),_:1})]),_:1},8,["onClick"])]),s("div",Ka,[s("table",Ya,[s("tr",null,[s("td",Na,[l(Va,{modelValue:e.isCustom,"onUpdate:modelValue":[o[0]||(o[0]=i=>e.isCustom=i),this.updateType],color:"accent"},null,8,["modelValue","onUpdate:modelValue"])]),s("td",Ea,[l($,{round:"",class:"q-pa-md",icon:"volume_up",color:"secondary",onClick:o[1]||(o[1]=i=>this.speak())})])]),s("tr",null,[s("td",Wa,p(e.isCustom===!0?"Custom":"Random"),1),Ga])])]),s("div",Ja,[s("table",Xa,[s("tr",null,[Za,s("td",eo,[s("a",to,p(this.ck),1)])]),s("tr",null,[ao,s("td",oo,[s("a",lo,p(this.aid),1)])]),s("tr",null,[no,s("td",so,[s("a",{class:"ptr float-left",onClick:o[2]||(o[2]=i=>this.loadURL(this.canonicalUrl))},p(this.pageid),1),l(D,{name:"bookmark",onClick:this.addBookmark,class:"float-right"},null,8,["onClick"])])]),s("tr",null,[ro,s("td",io,[s("span",uo,p(this.langVoiceKey),1),co])]),s("tr",null,[ho,s("td",mo,[s("span",{onClick:o[3]||(o[3]=(...i)=>this.nextImg&&this.nextImg(...i)),class:"ptr float-left"},p(this.imgIdx+1)+" / "+p(this.imgTot),1),s("span",{class:"float-right ptr",onClick:o[4]||(o[4]=(...i)=>this.saveCurrentImage&&this.saveCurrentImage(...i))},[l(D,{name:"bookmark"})])])]),s("tr",{class:"ptr",onClick:o[5]||(o[5]=(...i)=>this.cycleFitMode&&this.cycleFitMode(...i))},[go,s("td",null,[s("span",vo,p(this.imgFit),1),l(D,{class:"float-right",name:"fit_screen"})])]),s("tr",null,[fo,s("td",_o,[M(p(this.guideWords.replaceAll(",",", "))+" ",1),l(D,{class:"float-right",name:"tune"})])]),s("tr",null,[yo,s("td",null,[s("span",po,p(this.pctReplace)+" %",1),l(D,{class:"float-right",name:"tune"})])]),s("tr",null,[Co,s("td",{onClick:o[6]||(o[6]=(...i)=>this.mapCB&&this.mapCB(...i)),class:"ptr"},[s("span",So,p(this.mapCoords),1),l(D,{class:"float-right",name:"place"})])]),s("tr",null,[bo,s("td",{onClick:o[7]||(o[7]=(...i)=>this.toggleText&&this.toggleText(...i)),class:"ptr"},[l(D,{class:"float-right",name:"article"})])])])])]),_:1})]),_:1}),l(L,{flat:""},{default:r(()=>[l(Y,null,{default:r(()=>[l(Pe,{padding:"",class:"rounded-borders"},{default:r(()=>[l(Oe,{"header-style":{border:"1px solid gray"},label:"Page Images"},{default:r(()=>[this.imgs.length?(T(),Q("div",ko,[(T(!0),Q(J,null,be(this.imgs,(i,S)=>(T(),K(L,{bordered:"",class:"q-ma-sm",flat:"",modelValue:this.imgs,"onUpdate:modelValue":o[8]||(o[8]=I=>this.imgs=I),key:S},{default:r(()=>[s("div",wo,[s("span",xo,[l(D,{name:"bookmark",onClick:I=>this.saveImage(S,i)},null,8,["onClick"]),l(D,{name:"article",onClick:this.toggleText},{default:r(()=>[l(G,null,{default:r(()=>[M("Convenience button to toggle current text ")]),_:1})]),_:1},8,["onClick"]),l(D,{name:"fit_screen",onClick:this.cycleFitMode},{default:r(()=>[l(G,null,{default:r(()=>[M("Convenience button to toggle current image-fit mode ")]),_:1})]),_:1},8,["onClick"])]),i.cap?(T(),Q("span",$o,p(i.cap.slice(0,25)),1)):ke("",!0),s("span",To,[l(D,{name:"close",onClick:I=>this.remove(S,i)},null,8,["onClick"])])]),l(dt,{class:"cardimage",onClick:I=>this.imgCB(S,i),src:i.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])):ke("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Vo=se(Fa,[["render",Do]]);const qo=ne({name:"ImagesComponent",setup(){return{reStore:re()}},mounted(){R(this.reStore.userSnapshot.images,async(e,o)=>{console.log("watcher ",e,o)})},methods:{imgCB(e,o){this.reStore.router.push("/teacher/editor"),console.log(e,o),this.reStore.loadImgId(e)},remove(e,o){console.log(e,o),this.reStore.removeImage(e)}}}),Io={class:"row cardheader justify-between"},Mo={class:"history-remove hidden"},Bo={key:0},Oo={class:"history-remove ptr"};function Po(e,o,m,b,w,C){return T(),K(L,{flat:""},{default:r(()=>[l(Y,null,{default:r(()=>[l(Pe,{padding:"",class:"rounded-borders"},{default:r(()=>[l(Oe,{"header-style":{border:"1px solid gray"},label:"My Images"},{default:r(()=>[s("div",null,[(T(!0),Q(J,null,be(this.reStore.userSnapshot.images,(h,i)=>(T(),K(L,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":o[0]||(o[0]=S=>this.reStore.userSnapshot.images=S),key:i},{default:r(()=>[s("div",Io,[s("span",Mo,[l(D)]),h.desc?(T(),Q("span",Bo,p(h.desc.slice(0,25)),1)):ke("",!0),s("span",Oo,[l(D,{name:"close",onClick:S=>this.remove(i,h)},null,8,["onClick"])])]),l(dt,{class:"cardimage",onClick:S=>this.imgCB(i,h),src:h.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var Ho=se(qo,[["render",Po]]);const Ro=ne({name:"BookmarksComponent",setup(){return{reStore:re()}},mounted(){R(this.reStore.userSnapshot.bookmarks,async(e,o)=>{console.log("watcher ",e,o)})},methods:{imgCB(e,o){this.reStore.router.push("/teacher/editor"),console.log(e,o),this.reStore.loadPageId(o.pageid,o.langVoiceKey)},remove(e,o){console.log(e,o),this.reStore.removeBookmark(e)}}}),Lo={class:"row cardheader justify-between"},Ao={class:"history-remove hidden"},Qo={class:"history-remove ptr"};function jo(e,o,m,b,w,C){return T(),K(L,{flat:""},{default:r(()=>[l(Y,null,{default:r(()=>[l(Pe,{padding:"",class:"rounded-borders"},{default:r(()=>[l(Oe,{"header-style":{border:"1px solid gray"},label:"My bookmarks"},{default:r(()=>[s("div",null,[(T(!0),Q(J,null,be(this.reStore.userSnapshot.bookmarks,(h,i)=>(T(),K(L,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":o[0]||(o[0]=S=>this.reStore.userSnapshot.bookmarks=S),key:i},{default:r(()=>[s("div",Lo,[s("span",Ao,[l(D)]),M(" "+p(h.pageTitle.slice(0,25))+" ",1),s("span",Qo,[l(D,{name:"close",onClick:S=>this.remove(i,h)},null,8,["onClick"])])]),l(dt,{class:"cardimage",onClick:S=>this.imgCB(i,h),src:h.imgs[0].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var Fo=se(Ro,[["render",jo]]);const Uo=["gregorian","persian"],zo={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Uo.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Ko=["update:modelValue"];function oe(e){return e.year+"/"+he(e.month)+"/"+he(e.day)}function Yo(e,o){const m=f(()=>e.disable!==!0&&e.readonly!==!0),b=f(()=>e.editable===!0?0:-1),w=f(()=>{const i=[];return e.color!==void 0&&i.push(`bg-${e.color}`),e.textColor!==void 0&&i.push(`text-${e.textColor}`),i.join(" ")});function C(){return e.locale!==void 0?{...o.lang.date,...e.locale}:o.lang.date}function h(i){const S=new Date,I=i===!0?null:0;if(e.calendar==="persian"){const O=va(S);return{year:O.jy,month:O.jm,day:O.jd}}return{year:S.getFullYear(),month:S.getMonth()+1,day:S.getDate(),hour:I,minute:I,second:I,millisecond:I}}return{editable:m,tabindex:b,headerClass:w,getLocale:C,getCurrentDate:h}}const ce=20,No=["Calendar","Years","Months"],Mt=e=>No.includes(e),nt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Ce=" \u2014 ";function le(e){return e.year+"/"+he(e.month)}var Eo=xe({name:"QDate",props:{...zo,...pa,...Ue,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:nt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:nt},navigationMaxYearMonth:{type:String,validator:nt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Mt}},emits:[...Ko,"rangeStart","rangeEnd","navigation"],setup(e,{slots:o,emit:m}){const{proxy:b}=Fe(),{$q:w}=b,C=ze(e,w),{getCache:h}=xa(),{tabindex:i,headerClass:S,getLocale:I,getCurrentDate:O}=Yo(e,w);let A;const W=Ca(e),$e=Sa(W),ie=g(null),j=g(_t()),V=g(I()),X=f(()=>_t()),Ke=f(()=>I()),E=f(()=>O()),y=g(yt(j.value,V.value)),P=g(e.defaultView),He=w.lang.rtl===!0?"right":"left",ge=g(He.value),ve=g(He.value),Te=y.value.year,fe=g(Te-Te%ce-(Te<0?ce:0)),B=g(null),Ye=f(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(C.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),Z=f(()=>e.color||"primary"),te=f(()=>e.textColor||"white"),_e=f(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),De=f(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),_=f(()=>De.value.filter(t=>typeof t=="string").map(t=>We(t,j.value,V.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),H=f(()=>{const t=a=>We(a,j.value,V.value);return De.value.filter(a=>la(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),ee=f(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=Vt(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),Ve=f(()=>e.calendar==="persian"?oe:(t,a,n)=>fa(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?j.value:a,n===void 0?V.value:n,t.year,t.timezoneOffset)),qe=f(()=>_.value.length+H.value.reduce((t,a)=>t+1+_a(ee.value(a.to),ee.value(a.from)),0)),ct=f(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(B.value!==null){const n=B.value.init,c=ee.value(n);return V.value.daysShort[c.getDay()]+", "+V.value.monthsShort[n.month-1]+" "+n.day+Ce+"?"}if(qe.value===0)return Ce;if(qe.value>1)return`${qe.value} ${V.value.pluralDay}`;const t=_.value[0],a=ee.value(t);return isNaN(a.valueOf())===!0?Ce:V.value.headerTitle!==void 0?V.value.headerTitle(a,t):V.value.daysShort[a.getDay()]+", "+V.value.monthsShort[t.month-1]+" "+t.day}),Ht=f(()=>_.value.concat(H.value.map(a=>a.from)).sort((a,n)=>a.year-n.year||a.month-n.month)[0]),Rt=f(()=>_.value.concat(H.value.map(a=>a.to)).sort((a,n)=>n.year-a.year||n.month-a.month)[0]),ht=f(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(qe.value===0)return Ce;if(qe.value>1){const t=Ht.value,a=Rt.value,n=V.value.monthsShort;return n[t.month-1]+(t.year!==a.year?" "+t.year+Ce+n[a.month-1]+" ":t.month!==a.month?Ce+n[a.month-1]:"")+" "+a.year}return _.value[0].year}),Re=f(()=>{const t=[w.iconSet.datetime.arrowLeft,w.iconSet.datetime.arrowRight];return w.lang.rtl===!0?t.reverse():t}),mt=f(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):V.value.firstDayOfWeek),Lt=f(()=>{const t=V.value.daysShort,a=mt.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),ae=f(()=>{const t=y.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():at(t.year,t.month)}),At=f(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),F=f(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),U=f(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Ne=f(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return F.value!==null&&F.value.year>=y.value.year&&(t.year.prev=!1,F.value.year===y.value.year&&F.value.month>=y.value.month&&(t.month.prev=!1)),U.value!==null&&U.value.year<=y.value.year&&(t.year.next=!1,U.value.year===y.value.year&&U.value.month<=y.value.month&&(t.month.next=!1)),t}),Le=f(()=>{const t={};return _.value.forEach(a=>{const n=le(a);t[n]===void 0&&(t[n]=[]),t[n].push(a.day)}),t}),gt=f(()=>{const t={};return H.value.forEach(a=>{const n=le(a.from),c=le(a.to);if(t[n]===void 0&&(t[n]=[]),t[n].push({from:a.from.day,to:n===c?a.to.day:void 0,range:a}),n<c){let u;const{year:x,month:v}=a.from,k=v<12?{year:x,month:v+1}:{year:x+1,month:1};for(;(u=le(k))<=c;)t[u]===void 0&&(t[u]=[]),t[u].push({from:void 0,to:u===c?a.to.day:void 0,range:a}),k.month++,k.month>12&&(k.year++,k.month=1)}}),t}),Ie=f(()=>{if(B.value===null)return;const{init:t,initHash:a,final:n,finalHash:c}=B.value,[u,x]=a<=c?[t,n]:[n,t],v=le(u),k=le(x);if(v!==N.value&&k!==N.value)return;const q={};return v===N.value?(q.from=u.day,q.includeFrom=!0):q.from=1,k===N.value?(q.to=x.day,q.includeTo=!0):q.to=ae.value,q}),N=f(()=>le(y.value)),Qt=f(()=>{const t={};if(e.options===void 0){for(let n=1;n<=ae.value;n++)t[n]=!0;return t}const a=typeof e.options=="function"?e.options:n=>e.options.includes(n);for(let n=1;n<=ae.value;n++){const c=N.value+"/"+he(n);t[n]=a(c)}return t}),jt=f(()=>{const t={};if(e.events===void 0)for(let a=1;a<=ae.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:n=>e.events.includes(n);for(let n=1;n<=ae.value;n++){const c=N.value+"/"+he(n);t[n]=a(c)===!0&&At.value(c)}}return t}),Ft=f(()=>{let t,a;const{year:n,month:c}=y.value;if(e.calendar!=="persian")t=new Date(n,c-1,1),a=new Date(n,c-1,0).getDate();else{const u=Vt(n,c,1);t=new Date(u.gy,u.gm-1,u.gd);let x=c-1,v=n;x===0&&(x=12,v--),a=at(v,x)}return{days:t.getDay()-mt.value-1,endDay:a}}),vt=f(()=>{const t=[],{days:a,endDay:n}=Ft.value,c=a<0?a+7:a;if(c<6)for(let v=n-c;v<=n;v++)t.push({i:v,fill:!0});const u=t.length;for(let v=1;v<=ae.value;v++){const k={i:v,event:jt.value[v],classes:[]};Qt.value[v]===!0&&(k.in=!0,k.flat=!0),t.push(k)}if(Le.value[N.value]!==void 0&&Le.value[N.value].forEach(v=>{const k=u+v-1;Object.assign(t[k],{selected:!0,unelevated:!0,flat:!1,color:Z.value,textColor:te.value})}),gt.value[N.value]!==void 0&&gt.value[N.value].forEach(v=>{if(v.from!==void 0){const k=u+v.from-1,q=u+(v.to||ae.value)-1;for(let et=k;et<=q;et++)Object.assign(t[et],{range:v.range,unelevated:!0,color:Z.value,textColor:te.value});Object.assign(t[k],{rangeFrom:!0,flat:!1}),v.to!==void 0&&Object.assign(t[q],{rangeTo:!0,flat:!1})}else if(v.to!==void 0){const k=u+v.to-1;for(let q=u;q<=k;q++)Object.assign(t[q],{range:v.range,unelevated:!0,color:Z.value,textColor:te.value});Object.assign(t[k],{flat:!1,rangeTo:!0})}else{const k=u+ae.value-1;for(let q=u;q<=k;q++)Object.assign(t[q],{range:v.range,unelevated:!0,color:Z.value,textColor:te.value})}}),Ie.value!==void 0){const v=u+Ie.value.from-1,k=u+Ie.value.to-1;for(let q=v;q<=k;q++)t[q].color=Z.value,t[q].editRange=!0;Ie.value.includeFrom===!0&&(t[v].editRangeFrom=!0),Ie.value.includeTo===!0&&(t[k].editRangeTo=!0)}y.value.year===E.value.year&&y.value.month===E.value.month&&(t[u+E.value.day-1].today=!0);const x=t.length%7;if(x>0){const v=7-x;for(let k=1;k<=v;k++)t.push({i:k,fill:!0})}return t.forEach(v=>{let k="q-date__calendar-item ";v.fill===!0?k+="q-date__calendar-item--fill":(k+=`q-date__calendar-item--${v.in===!0?"in":"out"}`,v.range!==void 0&&(k+=` q-date__range${v.rangeTo===!0?"-to":v.rangeFrom===!0?"-from":""}`),v.editRange===!0&&(k+=` q-date__edit-range${v.editRangeFrom===!0?"-from":""}${v.editRangeTo===!0?"-to":""}`),(v.range!==void 0||v.editRange===!0)&&(k+=` text-${v.color}`)),v.classes=k}),t}),Ut=f(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});R(()=>e.modelValue,t=>{if(A===t)A=0;else{const{year:a,month:n}=yt(j.value,V.value);ye(a,n)}}),R(P,()=>{ie.value!==null&&b.$el.contains(document.activeElement)===!0&&ie.value.focus()}),R(()=>y.value.year,t=>{m("navigation",{year:t,month:y.value.month})}),R(()=>y.value.month,t=>{m("navigation",{year:y.value.year,month:t})}),R(X,t=>{kt(t,V.value,"mask"),j.value=t}),R(Ke,t=>{kt(j.value,t,"locale"),V.value=t});function ft(){const t=E.value,a=Le.value[le(t)];(a===void 0||a.includes(t.day)===!1)&&Je(t),Ee(t.year,t.month)}function zt(t){Mt(t)===!0&&(P.value=t)}function Kt(t,a){["month","year"].includes(t)&&(t==="month"?Ct:Ge)(a===!0?-1:1)}function Ee(t,a){P.value="Calendar",ye(t,a)}function Yt(t,a){if(e.range===!1||!t){B.value=null;return}const n=Object.assign({...y.value},t),c=a!==void 0?Object.assign({...y.value},a):n;B.value={init:n,initHash:oe(n),final:c,finalHash:oe(c)},Ee(n.year,n.month)}function _t(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function We(t,a,n){return ya(t,a,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function yt(t,a){const n=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(n.length===0)return pt();const c=n[n.length-1],u=We(c.from!==void 0?c.from:c,t,a);return u.dateHash===null?pt():u}function pt(){let t,a;if(e.defaultYearMonth!==void 0){const n=e.defaultYearMonth.split("/");t=parseInt(n[0],10),a=parseInt(n[1],10)}else{const n=E.value!==void 0?E.value:O();t=n.year,a=n.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+he(a)+"/01"}}function Ct(t){let a=y.value.year,n=Number(y.value.month)+t;n===13?(n=1,a++):n===0&&(n=12,a--),ye(a,n),_e.value===!0&&Ae("month")}function Ge(t){const a=Number(y.value.year)+t;ye(a,y.value.month),_e.value===!0&&Ae("year")}function Nt(t){ye(t,y.value.month),P.value=e.defaultView==="Years"?"Months":"Calendar",_e.value===!0&&Ae("year")}function Et(t){ye(y.value.year,t),P.value="Calendar",_e.value===!0&&Ae("month")}function Wt(t,a){const n=Le.value[a];(n!==void 0&&n.includes(t.day)===!0?Xe:Je)(t)}function ue(t){return{year:t.year,month:t.month,day:t.day}}function ye(t,a){F.value!==null&&t<=F.value.year&&(t=F.value.year,a<F.value.month&&(a=F.value.month)),U.value!==null&&t>=U.value.year&&(t=U.value.year,a>U.value.month&&(a=U.value.month));const n=t+"/"+he(a)+"/01";n!==y.value.dateHash&&(ge.value=y.value.dateHash<n==(w.lang.rtl!==!0)?"left":"right",t!==y.value.year&&(ve.value=ge.value),wt(()=>{fe.value=t-t%ce-(t<0?ce:0),Object.assign(y.value,{year:t,month:a,day:1,dateHash:n})}))}function St(t,a,n){const c=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;A=c;const{reason:u,details:x}=bt(a,n);m("update:modelValue",c,u,x)}function Ae(t){const a=_.value[0]!==void 0&&_.value[0].dateHash!==null?{..._.value[0]}:{...y.value};wt(()=>{a.year=y.value.year,a.month=y.value.month;const n=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():at(a.year,a.month);a.day=Math.min(Math.max(1,a.day),n);const c=pe(a);A=c;const{details:u}=bt("",a);m("update:modelValue",c,t,u)})}function bt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...ue(a.target),from:ue(a.from),to:ue(a.to)}}:{reason:`${t}-day`,details:ue(a)}}function pe(t,a,n){return t.from!==void 0?{from:Ve.value(t.from,a,n),to:Ve.value(t.to,a,n)}:Ve.value(t,a,n)}function Je(t){let a;if(e.multiple===!0)if(t.from!==void 0){const n=oe(t.from),c=oe(t.to),u=_.value.filter(v=>v.dateHash<n||v.dateHash>c),x=H.value.filter(({from:v,to:k})=>k.dateHash<n||v.dateHash>c);a=u.concat(x).concat(t).map(v=>pe(v))}else{const n=De.value.slice();n.push(pe(t)),a=n}else a=pe(t);St(a,"add",t)}function Xe(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const n=pe(t);t.from!==void 0?a=e.modelValue.filter(c=>c.from!==void 0?c.from!==n.from&&c.to!==n.to:!0):a=e.modelValue.filter(c=>c!==n),a.length===0&&(a=null)}St(a,"remove",t)}function kt(t,a,n){const c=_.value.concat(H.value).map(u=>pe(u,t,a)).filter(u=>u.from!==void 0?u.from.dateHash!==null&&u.to.dateHash!==null:u.dateHash!==null);m("update:modelValue",(e.multiple===!0?c:c[0])||null,n)}function Gt(){if(e.minimal!==!0)return d("div",{class:"q-date__header "+S.value},[d("div",{class:"relative-position"},[d(Me,{name:"q-transition--fade"},()=>d("div",{key:"h-yr-"+ht.value,class:"q-date__header-subtitle q-date__header-link "+(P.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...h("vY",{onClick(){P.value="Years"},onKeyup(t){t.keyCode===13&&(P.value="Years")}})},[ht.value]))]),d("div",{class:"q-date__header-title relative-position flex no-wrap"},[d("div",{class:"relative-position col"},[d(Me,{name:"q-transition--fade"},()=>d("div",{key:"h-sub"+ct.value,class:"q-date__header-title-label q-date__header-link "+(P.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...h("vC",{onClick(){P.value="Calendar"},onKeyup(t){t.keyCode===13&&(P.value="Calendar")}})},[ct.value]))]),e.todayBtn===!0?d($,{class:"q-date__header-today self-start",icon:w.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:i.value,onClick:ft}):null])])}function Ze({label:t,type:a,key:n,dir:c,goTo:u,boundaries:x,cls:v}){return[d("div",{class:"row items-center q-date__arrow"},[d($,{round:!0,dense:!0,size:"sm",flat:!0,icon:Re.value[0],tabindex:i.value,disable:x.prev===!1,...h("go-#"+a,{onClick(){u(-1)}})})]),d("div",{class:"relative-position overflow-hidden flex flex-center"+v},[d(Me,{name:"q-transition--jump-"+c},()=>d("div",{key:n},[d($,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:i.value,...h("view#"+a,{onClick:()=>{P.value=a}})})]))]),d("div",{class:"row items-center q-date__arrow"},[d($,{round:!0,dense:!0,size:"sm",flat:!0,icon:Re.value[1],tabindex:i.value,disable:x.next===!1,...h("go+#"+a,{onClick(){u(1)}})})])]}const Jt={Calendar:()=>[d("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[d("div",{class:"q-date__navigation row items-center no-wrap"},Ze({label:V.value.months[y.value.month-1],type:"Months",key:y.value.month,dir:ge.value,goTo:Ct,boundaries:Ne.value.month,cls:" col"}).concat(Ze({label:y.value.year,type:"Years",key:y.value.year,dir:ve.value,goTo:Ge,boundaries:Ne.value.year,cls:""}))),d("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Lt.value.map(t=>d("div",{class:"q-date__calendar-item"},[d("div",t)]))),d("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[d(Me,{name:"q-transition--slide-"+ge.value},()=>d("div",{key:N.value,class:"q-date__calendar-days fit"},vt.value.map(t=>d("div",{class:t.classes},[t.in===!0?d($,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:i.value,...h("day#"+t.i,{onClick:()=>{Xt(t.i)},onMouseover:()=>{Zt(t.i)}})},t.event!==!1?()=>d("div",{class:"q-date__event bg-"+t.event}):null):d("div",""+t.i)]))))])])],Months(){const t=y.value.year===E.value.year,a=c=>F.value!==null&&y.value.year===F.value.year&&F.value.month>c||U.value!==null&&y.value.year===U.value.year&&U.value.month<c,n=V.value.monthsShort.map((c,u)=>{const x=y.value.month===u+1;return d("div",{class:"q-date__months-item flex flex-center"},[d($,{class:t===!0&&E.value.month===u+1?"q-date__today":null,flat:x!==!0,label:c,unelevated:x,color:x===!0?Z.value:null,textColor:x===!0?te.value:null,tabindex:i.value,disable:a(u+1),...h("month#"+u,{onClick:()=>{Et(u+1)}})})])});return e.yearsInMonthView===!0&&n.unshift(d("div",{class:"row no-wrap full-width"},[Ze({label:y.value.year,type:"Years",key:y.value.year,dir:ve.value,goTo:Ge,boundaries:Ne.value.year,cls:" col"})])),d("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const t=fe.value,a=t+ce,n=[],c=u=>F.value!==null&&F.value.year>u||U.value!==null&&U.value.year<u;for(let u=t;u<=a;u++){const x=y.value.year===u;n.push(d("div",{class:"q-date__years-item flex flex-center"},[d($,{key:"yr"+u,class:E.value.year===u?"q-date__today":null,flat:!x,label:u,dense:!0,unelevated:x,color:x===!0?Z.value:null,textColor:x===!0?te.value:null,tabindex:i.value,disable:c(u),...h("yr#"+u,{onClick:()=>{Nt(u)}})})]))}return d("div",{class:"q-date__view q-date__years flex flex-center"},[d("div",{class:"col-auto"},[d($,{round:!0,dense:!0,flat:!0,icon:Re.value[0],tabindex:i.value,disable:c(t),...h("y-",{onClick:()=>{fe.value-=ce}})})]),d("div",{class:"q-date__years-content col self-stretch row items-center"},n),d("div",{class:"col-auto"},[d($,{round:!0,dense:!0,flat:!0,icon:Re.value[1],tabindex:i.value,disable:c(a),...h("y+",{onClick:()=>{fe.value+=ce}})})])])}};function Xt(t){const a={...y.value,day:t};if(e.range===!1){Wt(a,N.value);return}if(B.value===null){const n=vt.value.find(u=>u.fill!==!0&&u.i===t);if(e.noUnset!==!0&&n.range!==void 0){Xe({target:a,from:n.range.from,to:n.range.to});return}if(n.selected===!0){Xe(a);return}const c=oe(a);B.value={init:a,initHash:c,final:a,finalHash:c},m("rangeStart",ue(a))}else{const n=B.value.initHash,c=oe(a),u=n<=c?{from:B.value.init,to:a}:{from:a,to:B.value.init};B.value=null,Je(n===c?a:{target:a,...u}),m("rangeEnd",{from:ue(u.from),to:ue(u.to)})}}function Zt(t){if(B.value!==null){const a={...y.value,day:t};Object.assign(B.value,{final:a,finalHash:oe(a)})}}return Object.assign(b,{setToday:ft,setView:zt,offsetCalendar:Kt,setCalendarTo:Ee,setEditingRange:Yt}),()=>{const t=[d("div",{class:"q-date__content col relative-position"},[d(Me,{name:"q-transition--fade"},Jt[P.value])])],a=rt(o.default);return a!==void 0&&t.push(d("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&$e(t,"push"),d("div",{class:Ye.value,...Ut.value},[Gt(),d("div",{ref:ie,class:"q-date__main col column",tabindex:-1},t)])}}});const Wo=["top","middle","bottom"];var Go=xe({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Wo.includes(e)}},setup(e,{slots:o}){const m=f(()=>e.align!==void 0?{verticalAlign:e.align}:null),b=f(()=>{const w=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(w!==void 0?` text-${w}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>d("div",{class:b.value,style:m.value,role:"status","aria-label":e.label},na(o.default,e.label!==void 0?[e.label]:[]))}});const Jo=ne({name:"OTDComponent",setup(){const e=re(),o=Date.now(),m=qt.formatDate(o,"MM/DD");return{reStore:e,otditems:g([]),promptOTDDate:g(!1),otddate:g(Date.now()),otdlabel:g(m),otdtype:g("selected")}},mounted(){this.init(),R(this.reStore.preferences,async(e,o)=>{console.log("OTD watcher"),e.langVoiceKey!==o.langVoiceKey?this.init():(console.log("OTD watcher ",e),this.init())})},methods:{async init(){console.log("OTD init"),await this.reStore.wiki.setLang(this.reStore.langVoices[this.reStore.preferences.langVoiceKey].langName);const e=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=e[this.otdtype],console.log(this.otditems)},async loadPageId(e){console.log("loadPageId ",e);const o=this.reStore.preferences.langVoiceKey;console.log("OTD load ",o),this.reStore.loadPageId(e,o),this.reStore.router.push("/teacher/editor")},async load(e){console.log("load",this.otditems[e].text),console.log("load",this.otditems[e]);const o=this.reStore.preferences.langVoiceKey;console.log("OTD load ",o),this.reStore.loadPageId(this.otditems[e].pages[0].pageid,o),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const e=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=e.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=qt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(e){console.log("otdOptionsCB",this.otdtype);const o=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=o[this.otdtype]}}}),Xo=s("div",{class:"text-h6"},"Select Date",-1),Zo={class:"q-gutter-y-sm column"},el={class:""},tl=["onClick"];function al(e,o,m,b,w,C){return T(),Q(J,null,[l(ut,{modelValue:e.promptOTDDate,"onUpdate:modelValue":o[2]||(o[2]=h=>e.promptOTDDate=h),persistent:""},{default:r(()=>[l(L,{style:{"min-width":"350px"}},{default:r(()=>[l(Y,{align:"center"},{default:r(()=>[Xo]),_:1}),l(Eo,{modelValue:e.otddate,"onUpdate:modelValue":o[0]||(o[0]=h=>e.otddate=h),minimal:""},null,8,["modelValue"]),l(it,{align:"center",class:"text-white"},{default:r(()=>[me(l($,{flat:"",label:"Cancel"},null,512),[[we]]),me(l($,{flat:"",label:"Update OTD date",onClick:o[1]||(o[1]=h=>this.updateOTDDate())},null,512),[[we]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(L,{flat:""},{default:r(()=>[l(Y,null,{default:r(()=>[l(Pe,{padding:"",class:"rounded-borders"},{default:r(()=>[l(Oe,{"header-style":{border:"1px solid gray"},label:"On This Day"},{default:r(()=>[s("div",Zo,[l(Be,{class:"bg-primary text-white rounded-borders q-my-md"},{default:r(()=>[l($,{dark:"",standout:"",onClick:o[3]||(o[3]=h=>e.promptOTDDate=!0)},{default:r(()=>[M(p(e.otdlabel),1)]),_:1}),l(st),l($a,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":o[4]||(o[4]=h=>this.otdtype=h),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:o[5]||(o[5]=h=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),s("div",el,[(T(!0),Q(J,null,be(e.otditems,(h,i)=>(T(),K(L,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:e.otditems,"onUpdate:modelValue":o[6]||(o[6]=S=>e.otditems=S),key:i},{default:r(()=>[s("span",{style:{cursor:"pointer"},onClick:S=>this.load(i)},p(i),9,tl),M(". "+p(h.year)+" "+p(h.text)+" ",1),(T(!0),Q(J,null,be(h.pages,(S,I)=>(T(),Q("span",{key:I},[l(Go,{class:"on-left",color:"accent",style:{cursor:"pointer"},onClick:O=>this.loadPageId(S.pageid)},{default:r(()=>[l(G,null,{default:r(()=>[M(p(S.title),1)]),_:2},1024),M(" Link"+p(I),1)]),_:2},1032,["onClick"])]))),128))]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}var ol=se(Jo,[["render",al]]);const ll=ne({name:"CurrentAssignment",setup(){const e=re();return{reStore:e,ck:g("-"),goal:g("-"),created:g("-"),updated:g("-"),id:g("-"),points:g("-"),pages:g([]),pgIdx:g(e.courses.pgIdx),title:g(""),promptEditTitle:g(!1)}},mounted(){console.log("CurrentAssignment mounted"),R(this.reStore.courses,async(e,o)=>{try{console.log("CurrentAssignment.watcher");const m=e.ck,b=e.aid;this.id=b,this.ck=m,this.goal=this.reStore.courses[m].assignments[b].goal,this.created=this.reStore.courses[m].assignments[b].created,this.updated=this.reStore.courses[m].assignments[b].updated,this.points=this.reStore.courses[m].assignments[b].points;try{const w=this.reStore.courses[m].assignments[b].pages.length;console.log("pages.length ",w)}catch{this.reStore.courses[m].assignments[b].pages=[]}this.pages=this.reStore.courses[m].assignments[b].pages,this.title=this.reStore.courses[m].assignments[b].title,this.pgIdx=this.reStore.courses.pgIdx}catch(m){console.log(m)}},{immediate:!0,deep:!0})},methods:{save(){console.log("save"),this.reStore.saveCurrentAssignment()},nextPage(){this.reStore.nextPage()},changeTitleCB(){console.log("CurrentAssignment.changeTitleCB",this.title),this.reStore.setAssignmentTitle(this.reStore.courses.ck,this.reStore.courses.aid,this.title)}}}),nl=s("div",{class:"text-h6"},"Change assignment title",-1),sl={class:"text-weight-bolder text-center q-pa-md text-white"},rl=s("br",null,null,-1),il={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},ul={width:"100%"},dl=s("td",null,"Title",-1),cl={style:{width:"50%"}},hl=s("td",null,"Course-Key",-1),ml={style:{width:"50%"}},gl=s("td",null,"Assgmnt Id",-1),vl={style:{width:"50%"}},fl=s("td",null,"Created",-1),_l={style:{width:"50%"}},yl=s("td",null,"Updated",-1),pl={style:{width:"50%"}},Cl=s("td",null,"Goal",-1),Sl={style:{width:"50%"}},bl=s("td",null,"Pages",-1);function kl(e,o,m,b,w,C){const h=z("router-link");return T(),Q(J,null,[l(ut,{modelValue:e.promptEditTitle,"onUpdate:modelValue":o[3]||(o[3]=i=>e.promptEditTitle=i),persistent:""},{default:r(()=>[l(L,{style:{"min-width":"350px"}},{default:r(()=>[l(Y,null,{default:r(()=>[nl]),_:1}),l(Y,{class:"q-pt-none"},{default:r(()=>[l(Pt,{dense:"",modelValue:e.title,"onUpdate:modelValue":o[0]||(o[0]=i=>e.title=i),autofocus:"",onKeyup:o[1]||(o[1]=Ot(i=>{e.prompt=!1,this.changeTitleCB()},["enter"]))},null,8,["modelValue"])]),_:1}),l(it,{align:"right",class:"text-white"},{default:r(()=>[me(l($,{outline:"",label:"Cancel"},null,512),[[we]]),me(l($,{outline:"",label:"Save",onClick:o[2]||(o[2]=i=>this.changeTitleCB())},null,512),[[we]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(L,{flat:""},{default:r(()=>[l(Y,null,{default:r(()=>[s("div",sl,[l(h,{to:"/teacher/editor",class:"text-white"},{default:r(()=>[M(p(this.title.slice(0,20)),1)]),_:1}),rl,l(D,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:o[4]||(o[4]=i=>this.promptEditTitle=!0),size:"sm"}),l(D,{style:{cursor:"pointer"},class:"on-right",name:"save",onClick:this.save,size:"sm"},null,8,["onClick"])]),s("div",il,[s("table",ul,[s("tr",null,[dl,s("td",cl,p(this.title),1)]),s("tr",null,[hl,s("td",ml,p(this.ck),1)]),s("tr",null,[gl,s("td",vl,p(this.id),1)]),s("tr",null,[fl,s("td",_l,p(this.created),1)]),s("tr",null,[yl,s("td",pl,p(this.updated),1)]),s("tr",null,[Cl,s("td",Sl,p(this.goal),1)]),s("tr",null,[bl,s("td",{style:{width:"50%",cursor:"pointer"},onClick:o[5]||(o[5]=i=>this.nextPage())},p(this.pgIdx+1)+" / "+p(this.pages.length),1)])])])]),_:1})]),_:1})],64)}var wl=se(ll,[["render",kl]]);const xl=ne({name:"CurrentCourse",setup(){return{reStore:re(),title:g(""),assignmentCount:g(0),courseKey:g(""),created:g(""),updated:g(""),enrollmentCount:g(0),owner:g("")}},mounted(){console.log("CurrentCourse mounted"),R(this.reStore.courses,async(e,o)=>{try{if(this.reStore.courses.ck!=="undefined"){const m=this.reStore.courses.ck;console.log("CurrentCourse ",m),this.title=this.reStore.courses[m].title,this.courseKey=this.reStore.courses[m].courseKey,this.created=this.reStore.courses[m].created,this.updated=this.reStore.courses[m].updated,this.assignmentCount=Object.keys(this.reStore.courses[m].assignments).length,this.enrollmentCount=Object.keys(this.reStore.courses[m].enrollment).length,this.owner=this.reStore.courses[m].owner}}catch(m){console.log(m)}},{immediate:!0,deep:!0})},methods:{dummy(){console.log("dummy")}}}),$l={class:"text-weight-bolder text-center q-pa-md"},Tl={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Dl={width:"100%"},Vl=s("td",null,"Title",-1),ql={style:{width:"50%"}},Il=s("td",null,"Course-Key",-1),Ml={style:{width:"50%"}},Bl=s("td",null,"Created",-1),Ol={style:{width:"50%"}},Pl=s("td",null,"Updated",-1),Hl={style:{width:"50%"}},Rl=s("td",null,"Owner",-1),Ll={style:{width:"50%"}},Al=s("td",null,"Assignments",-1),Ql={style:{width:"50%"}},jl=s("td",null,"Enrollment",-1),Fl={style:{width:"50%"}};function Ul(e,o,m,b,w,C){return T(),K(L,{flat:""},{default:r(()=>[l(Y,null,{default:r(()=>[s("div",$l,p(this.title),1),s("div",Tl,[s("table",Dl,[s("tr",null,[Vl,s("td",ql,p(this.title),1)]),s("tr",null,[Il,s("td",Ml,p(this.courseKey),1)]),s("tr",null,[Bl,s("td",Ol,p(this.created),1)]),s("tr",null,[Pl,s("td",Hl,p(this.updated),1)]),s("tr",null,[Rl,s("td",Ll,p(this.owner.slice(0,10)),1)]),s("tr",null,[Al,s("td",Ql,p(this.assignmentCount),1)]),s("tr",null,[jl,s("td",Fl,p(this.enrollmentCount),1)])])])]),_:1})]),_:1})}var zl=se(xl,[["render",Ul]]);const Kl=ne({name:"TeacherLayout",components:{CurrentCourse:zl,DocumentationComponent:Ta,SearchComponent:ja,ImagesComponent:Ho,BookmarksComponent:Fo,OTDComponent:ol,CurrentAssignment:wl,PreferencesComponent:Da,CurrentPage:Vo},setup(){const e=g(!1),o=g(!1),m=re(),b=m.preferences,w=g(null),C=g(null);return{step:g(1),reStore:m,initialValues:g(b),scrollAreaRHS:w,scrollAreaLHS:C,leftDrawerOpen:e,rightDrawerOpen:o,toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){o.value=!o.value}}},mounted(){xt.isActive||(xt.toggle(),tt("primary","#333"),tt("secondary",this.initialValues.secondaryColor),tt("accent",this.initialValues.accentColor))},methods:{scrollTopRHS(){this.scrollAreaRHS.setScrollPosition("vertical",0)},scrollTopLHS(){this.scrollAreaLHS.setScrollPosition("vertical",0)}}}),Yl={class:"dashboard-wrapper"},Nl=s("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),El=s("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1);function Wl(e,o,m,b,w,C){const h=z("router-link"),i=z("router-view"),S=z("DocumentationComponent"),I=z("SearchComponent"),O=z("ImagesComponent"),A=z("BookmarksComponent"),W=z("OTDComponent"),$e=z("CurrentCourse"),ie=z("CurrentAssignment"),j=z("CurrentPage"),V=z("PreferencesComponent");return T(),K(da,{view:"hHh LpR fFf"},{default:r(()=>[l(ia,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:r(()=>[l(Be,null,{default:r(()=>[l($,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),l(sa,null,{default:r(()=>[l(h,{to:"/teacher"},{default:r(()=>[l(D,{name:"home",color:"white"},{default:r(()=>[l(G,null,{default:r(()=>[M("Return to My Teacher Page")]),_:1})]),_:1})]),_:1})]),_:1}),this.reStore.authenticated?(T(),K($,{key:0,onClick:o[0]||(o[0]=X=>this.reStore.router.push("/student")),icon:"switch_account"},{default:r(()=>[l(G,null,{default:r(()=>[M(" Switch between Teacher or Student role ")]),_:1})]),_:1})):ke("",!0),this.reStore.authenticated?(T(),K($,{key:1,icon:"logout",onClick:o[1]||(o[1]=X=>this.reStore.logout())})):ke("",!0),l($,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1}),l(ra,{align:"left",class:"hidden"},{default:r(()=>[l(Qe,{to:"/logo",label:"Logo"}),l(Qe,{to:"/teaching",label:"Teaching"}),l(Qe,{to:"/taking",label:"Taking"}),l(Qe,{to:"/gradebook",label:"Gradebook"})]),_:1})]),_:1}),l(ua,{class:"container-fluid"},{default:r(()=>[s("div",Yl,[l(i)]),l($t,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":o[2]||(o[2]=X=>e.leftDrawerOpen=X),side:"left"},{default:r(()=>[l(Be,{flat:"",class:"bg-primary text-white"},{default:r(()=>[l($,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Se,{dark:"",vertical:"",inset:""}),l($,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Se,{dark:"",vertical:"",inset:""}),l(st),l($,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopLHS},{default:r(()=>[l(G,null,{default:r(()=>[M("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),Nl,l(Tt,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaLHS"},{default:r(()=>[l(S),l(I),l(O),l(A),l(W)]),_:1},8,["visible"])]),_:1},8,["modelValue"]),l($t,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":o[3]||(o[3]=X=>e.rightDrawerOpen=X),side:"right"},{default:r(()=>[l(Be,{flat:"",class:"bg-primary text-white"},{default:r(()=>[l($,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Se,{dark:"",vertical:"",inset:""}),l($,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Se,{dark:"",vertical:"",inset:""}),l(st),l($,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopRHS},{default:r(()=>[l(G,null,{default:r(()=>[M("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),El,l(Tt,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaRHS"},{default:r(()=>[l($e),l(ie),l(j),l(V,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var gn=se(Kl,[["render",Wl]]);export{gn as default};
