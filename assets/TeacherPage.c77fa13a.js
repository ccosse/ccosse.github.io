import{d as w,r as Q,a as f,Q as g,i as P,h as K,C as x}from"./ClosePopup.db49514c.js";import{Q as V}from"./QInput.2bd6a89a.js";import{_ as $,r as v,o as u,c as y,w as s,a as t,aJ as q,p as S,Q as h,e as l,af as i,aI as B,au as m,aK as T,av as A,ag as p,x as C}from"./index.929bd027.js";import{Q as d}from"./QTooltip.6ac76b93.js";import{Q as E}from"./QImg.f5bb3c7a.js";import{Q as N}from"./QPage.70ae6c84.js";import{u as D}from"./re-store.48e9fd27.js";import"./use-dark.c91131ec.js";import"./use-portal.cb729528.js";import"./use-key-composition.52cf2429.js";import"./selection.639d4fb7.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";function I(o){const e=document.createElement("textarea");e.value=o,e.contentEditable="true",e.style.position="fixed";const _=()=>{};w(_),document.body.appendChild(e),e.focus(),e.select();const r=document.execCommand("copy");return e.remove(),Q(_),r}function F(o){return navigator.clipboard!==void 0?navigator.clipboard.writeText(o):new Promise((e,_)=>{const r=I(o);r?e(!0):_(r)})}const U=D(),H={components:{},setup(){return{reStore:U,courseKey:v(null),courseTitle:v(null),prompt:v(!1)}},mounted(){console.log("TeacherPage mounted ",this.reStore.courses)},methods:{copyCK(o){F(o).then(()=>{console.log("ck copied to clipboard",o)}).catch(e=>{console.log(e)})},newCourseCB(){console.log("courseCB"),this.reStore.newCourse()},newAssignmentCB(o){console.log("assignmentCB: ",o),this.reStore.newAssignment(o)},editAssignmentCB(o,e){console.log("editAssignmentCB: ",o,e),this.reStore.editAssignment(o,e)},changeTitleCB(){console.log("TeacherPage.titleCB",this.courseKey,this.courseTitle),this.reStore.setCourseTitle(this.courseKey,this.courseTitle)},deleteCourseCB(o){this.reStore.deleteCourse(o)},deleteAssignmentCB(o,e){this.reStore.deleteAssignment(o,e)},takeAssignmentCB(o,e){console.log("TeacherPage.takeAssignment ",o,e),this.reStore.takeAssignmentAsTeacher(o,e)}}},j=l("div",{class:"text-h6"},"Change course title",-1),z={class:"flex-center q-mt-xl q-mb-xl row q-gutter-md"},J=l("div",{class:"text-h6"},"My Teacher Page",-1),L=l("br",null,null,-1),M=l("br",null,null,-1),R=l("br",null,null,-1),G={class:"flex flex-row justify-center"},O={class:"absolute-top text-center"},W={class:"text-h6"},X={class:"text-subtitle2"},Y={key:0},Z={key:1},ee={style:{"font-size":"22pt",width:"100%"},class:"text-center absolute-bottom"},te=l("br",null,null,-1),se={class:"hidden"},oe={key:0,class:"flex-center"};function le(o,e,_,r,ne,ie){return u(),y(N,{class:"q-gutter-md"},{default:s(()=>[t(K,{modelValue:r.prompt,"onUpdate:modelValue":e[3]||(e[3]=a=>r.prompt=a),persistent:""},{default:s(()=>[t(f,{style:{"min-width":"350px"}},{default:s(()=>[t(g,null,{default:s(()=>[j]),_:1}),t(g,{class:"q-pt-none"},{default:s(()=>[t(V,{dense:"",modelValue:r.courseTitle,"onUpdate:modelValue":e[0]||(e[0]=a=>r.courseTitle=a),autofocus:"",onKeyup:e[1]||(e[1]=q(a=>{r.prompt=!1,this.changeTitleCB()},["enter"])),onHide:this.dck},null,8,["modelValue","onHide"])]),_:1}),t(P,{align:"right",class:"text-white"},{default:s(()=>[S(t(h,{outline:"",label:"Cancel"},null,512),[[x]]),S(t(h,{outline:"",label:"Save",onClick:e[2]||(e[2]=a=>this.changeTitleCB())},null,512),[[x]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l("div",z,[J,l("div",null,[t(h,{icon:"list_alt",onClick:e[4]||(e[4]=a=>this.newCourseCB())},{default:s(()=>[t(d,null,{default:s(()=>[i("Add a course")]),_:1})]),_:1}),this.reStore.authenticated?(u(),y(h,{key:0,onClick:e[5]||(e[5]=a=>this.reStore.router.push("/student")),icon:"switch_account"},{default:s(()=>[t(d,null,{default:s(()=>[i(" Switch to Student role ")]),_:1})]),_:1})):B("",!0)])]),(u(!0),m(A,null,T(this.reStore.userSnapshot.teaching,(a,c)=>(u(),y(f,{flat:"",key:a.ck,style:{opacity:"1.0"}},{default:s(()=>[t(g,{class:"text-center"},{default:s(()=>[i(" Title: "+p(this.reStore.courses[c].title)+" \xA0",1),t(C,{class:"ptr",name:"edit",onClick:n=>{r.prompt=!0,this.courseTitle=this.reStore.courses[c].title,this.courseKey=c}},null,8,["onClick"]),L,i(" Key: "+p(c)+" ",1),t(C,{class:"ptr",name:"content_copy",onClick:n=>this.copyCK(c)},null,8,["onClick"]),l("div",null,[t(h,{icon:"delete",onClick:n=>this.deleteCourseCB(a.ck)},{default:s(()=>[t(d,null,{default:s(()=>[i("Delete Course")]),_:1})]),_:2},1032,["onClick"]),t(h,{icon:"post_add",onClick:n=>this.newAssignmentCB(a.ck)},{default:s(()=>[t(d,null,{default:s(()=>[i("New Assignment")]),_:1})]),_:2},1032,["onClick"]),t(h,{icon:"content_copy",onClick:n=>this.copyCK(c)},{default:s(()=>[t(d,null,{default:s(()=>[i("Copy this course-key to clipboard. Enroll "),M,i("in this course using this course-key from "),R,i("the Student Page.")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1024),l("div",G,[(u(!0),m(A,null,T(this.reStore.courses[c].assignments,(n,b)=>(u(),m("div",{key:n},[t(f,{bordered:"",flat:"",class:"ccard q-mx-sm q-my-md"},{default:s(()=>[t(E,{fit:o.cover,src:n.coverUrl,height:"100%"},{default:s(()=>[l("div",O,[l("div",W,p(n.title.slice(0,18)),1),l("div",X,[n.pages?(u(),m("span",Y,"Pages: "+p(n.pages.length),1)):(u(),m("span",Z,"Pages: None"))])]),l("div",ee,[t(C,{onClick:k=>this.takeAssignmentCB(c,n.id),name:"play_circle",class:"ptr"},{default:s(()=>[t(d,null,{default:s(()=>[i("Take Assignment")]),_:1})]),_:2},1032,["onClick"]),t(C,{onClick:k=>this.editAssignmentCB(c,n.id),name:"edit",class:"ptr on-right"},{default:s(()=>[t(d,null,{default:s(()=>[i("Edit Assignment"),te,i(p(n.id),1)]),_:2},1024)]),_:2},1032,["onClick"]),t(C,{onClick:k=>this.deleteAssignmentCB(c,n.id),name:"delete",class:"ptr on-right"},{default:s(()=>[t(d,null,{default:s(()=>[i("Delete Assignment")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["fit","src"])]),_:2},1024),l("span",se,p(b),1)]))),128))])]),_:2},1024))),128)),this.reStore.userSnapshot.teaching?(u(),m("div",oe)):B("",!0)]),_:1})}var ye=$(H,[["render",le]]);export{ye as default};
