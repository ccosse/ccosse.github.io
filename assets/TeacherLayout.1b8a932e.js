import{g as Ke,h as y,i as h,j as _t,z as pt,d as G,r as m,D as F,_ as X,o as S,au as U,a as s,w as d,p as xe,Q as x,e as n,af as E,ag as _,aK as At,c as q,x as D,av as J,aL as ge,aJ as fe,al as Et,am as ve,G as dt,P as ct,s as ze,f as P}from"./index.90f1b53a.js";import{Q as Ne}from"./QTooltip.b9ec455f.js";import{Q as We,a as Nt,b as Kt,c as De,d as Wt,e as mt,f as ht,g as jt,h as Jt}from"./QLayout.75d5b332.js";import{u as Z,s as Gt,a as vt,p as le,t as Xt,c as ft,f as Zt,g as ea,j as Ae,_ as ta,d as gt}from"./re-store.93fc2a76.js";import{a as T,Q as O,i as Ct,C as Ve,h as kt,u as aa,b as oa,c as la}from"./ClosePopup.fe3cdbaa.js";import{a as na,u as sa,b as ra,D as ia,P as ua}from"./DocumentationComponent.76d2738a.js";import{Q as da}from"./QInput.d22f845e.js";import{Q as ye}from"./QExpansionItem.59804aa9.js";import{d as St,f as bt}from"./use-dark.a3247a13.js";import{Q as je}from"./QImg.3115142e.js";import"./position-engine.147ba709.js";import"./selection.307494d8.js";import"./use-portal.60fb055f.js";import"./firebase.ea708b63.js";import"./use-key-composition.dd92eb8e.js";import"./QSlideTransition.b049eeb3.js";import"./QCheckbox.bf498a4e.js";var _e=Ke({name:"QList",props:{...St,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:o}){const p=pt(),V=bt(e,p.proxy.$q),w=y(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(V.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>h(e.tag,{class:w.value},_t(o.default))}});const ca=G({name:"SearchComponent",setup(){const e=Z(),o=m("");return{reStore:e,searchTerms:o,searchSize:m(e.preferences.resLimit),searchResults:m([]),promptSearchSize:m(!1)}},mounted(){F(this.reStore.preferences,async(e,o)=>{console.log("watcher ",e,o),this.searchSize=e.resLimit})},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchResults.splice(e,1)},load(e){console.log(e),console.log(this.searchResults[e]);const o=this.reStore.langVoices[this.reStore.preferences.langVoice];console.log("calling loadPageId ",this.searchResults[e].pageid,o),this.reStore.loadPageId(this.searchResults[e].pageid,o)},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoice];this.reStore.wiki.setLang(e.langName);const o=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",o.results.length),this.searchResults=o.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),ma=n("div",{class:"text-h6"},"Search Results Size",-1),ha={class:"q-gutter-y-sm column"},va={key:0},fa={class:"row cardheader ptr justify-between"},ga=["onClick"],ya={class:"history-remove"};function _a(e,o,p,V,w,Q){return S(),U(J,null,[s(kt,{modelValue:e.promptSearchSize,"onUpdate:modelValue":o[2]||(o[2]=i=>e.promptSearchSize=i),persistent:""},{default:d(()=>[s(T,{style:{"min-width":"350px"}},{default:d(()=>[s(O,{align:"center"},{default:d(()=>[ma]),_:1}),s(O,{class:"q-pt-none",align:"center"},{default:d(()=>[s(na,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":o[0]||(o[0]=i=>e.searchSize=i)},null,8,["modelValue"])]),_:1}),s(Ct,{align:"center",class:"text-primary"},{default:d(()=>[xe(s(x,{flat:"",label:"Cancel"},null,512),[[Ve]]),xe(s(x,{flat:"",label:"Update results size",onClick:o[1]||(o[1]=i=>this.updateSearchSize())},null,512),[[Ve]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(T,{flat:""},{default:d(()=>[s(O,null,{default:d(()=>[s(_e,{padding:"",class:"rounded-borders"},{default:d(()=>[s(ye,{"header-style":{border:"1px solid gray"},label:"Search & Results"},{default:d(()=>[n("div",ha,[s(We,{class:"bg-primary text-white rounded-borders q-my-md"},{default:d(()=>[s(x,{dark:"",standout:"",onClick:o[3]||(o[3]=i=>e.promptSearchSize=!0)},{default:d(()=>[E(_(this.searchResults.length)+" ",1),s(Ne,null,{default:d(()=>[E("Change results limit ("+_(this.searchSize)+")",1)]),_:1})]),_:1}),s(da,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":o[6]||(o[6]=i=>e.searchTerms=i),"input-class":"text-right",class:"q-ml-md",onKeyup:[o[7]||(o[7]=i=>this.update()),o[8]||(o[8]=At(i=>this.doSearch(),["enter"]))]},{append:d(()=>[e.searchTerms===""?(S(),q(D,{key:0,name:"search",onClick:o[4]||(o[4]=i=>this.doSearch())})):(S(),q(D,{key:1,name:"clear",class:"cursor-pointer",onClick:o[5]||(o[5]=i=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(S(),U("div",va,[(S(!0),U(J,null,ge(this.searchResults,(i,f)=>(S(),q(T,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":o[9]||(o[9]=k=>this.searchResults=k),key:f},{default:d(()=>[n("div",fa,[n("span",{class:"history-title col-grow",onClick:k=>this.load(f)},_(f)+". "+_(i.title.slice(0,25)),9,ga),n("span",ya,[s(D,{class:"primary",size:e.xl,color:e.primary,name:"close",onClick:k=>this.remove(f)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):fe("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var pa=X(ca,[["render",_a]]);const Ca=G({name:"CurrentPage",props:{},setup(e){const o=Z();return{reStore:o,courseid:m("-"),pageTitle:m(o.page.pageTitle),lang:m(o.page.langVoice),imgIdx:m(0),imgs:m([]),imgTot:m(0),imgFit:m("-"),guideWords:m("-"),mapCoords:m("-"),pageid:m("-"),pctReplace:m(o.page.pctReplace),canonicalUrl:m(o.page.canonicalUrl),props:e}},mounted(){console.log(this.props),F(this.reStore.page,async(e,o)=>{try{console.log("CurrentPage watcher ",e,o),this.pageTitle=e.pageTitle,this.imgIdx=e.imgIdx,this.imgs=e.imgs,this.imgTot=e.imgs.length,this.imgFit=e.imgFit,this.guideWords=e.guideWords,this.mapCoords=e.mapCoords,this.pageid=e.pageid,this.lang=e.langVoice,this.pctReplace=e.pctReplace,this.canonicalUrl=e.canonicalUrl}catch(p){console.log(p)}})},methods:{speak(){console.log("CurrentPage.speak",this.reStore),this.reStore.speak()},cycleFitMode(){const e=["scale-down","cover"];let o=e.indexOf(this.imgFit);o+=1,o>e.length-1&&(o=0),this.imgFit=e[o],this.reStore.page.imgFit=this.imgFit,console.log("fit: ",this.imgFit)},nextImg(){this.imgIdx=this.imgIdx+1>this.imgs.length-1?0:this.imgIdx+1,this.reStore.page.imgIdx=this.imgIdx},imgCB(e,o){console.log(e,o),this.reStore.page.imgIdx=e},loadURL(e){console.log("loadURL ",e),window.open(e,"_blank")},mapCB(){const e="https://maps.google.com/?ll="+this.mapCoords.split(",")[0]+","+this.mapCoords.split(",")[1];window.open(e,"_blank")},saveImage(e,o){console.log("saveImage: ",e,o),this.reStore.saveImage(o)},saveCurrentImage(){const e=this.imgs[this.imgIdx];console.log("saveCurrentImage: ",e),this.reStore.saveImage(e)},remove(e,o){console.log("remove: ",e,o),this.imgs.splice(e,1),this.reStore.page.imgs.splice(e,1)},toggleText(){Gt("#slideTextDiv").classed("hidden")?vt("#slideTextDiv").classed("hidden",!1):vt("#slideTextDiv").classed("hidden",!0)},addBookmark(){console.log("addBookmark"),this.reStore.saveBookmark()}}}),ka={class:"text-weight-bolder text-center q-pa-md"},Sa={style:{border:"1px solid gray","border-radius":"5px"}},ba={width:"100%"},$a=n("td",{style:{width:"50%","text-align":"center"}},null,-1),wa={style:{"text-align":"center"}},Da=n("tr",null,[n("td"),n("td",{style:{"text-align":"center"}},"Speak Text")],-1),xa={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Va={width:"100%"},qa=n("td",null,"WP Page Id",-1),Ta={style:{width:"50%"}},Ma=n("td",null,"Language",-1),Ia={style:{width:"50%"}},Ba={class:"float-left"},Ra=n("td",null,"Current Image",-1),Ha={class:"float-left"},Fa={class:"float-right"},Qa=n("td",null,"Image Fit",-1),Ya={class:"align-left"},Pa=n("td",null,"Guide Words",-1),Oa={style:{width:"50%"}},Ua=n("td",null,"Percent Replace",-1),La={class:"float-left"},za=n("td",null,"Map Coords",-1),Aa={class:"float-left"},Ea=n("td",null,"Toggle Text",-1),Na={key:0},Ka={class:"row cardheader justify-between"},Wa={class:"history-remove"},ja={class:"history-remove ptr"};function Ja(e,o,p,V,w,Q){return S(),U(J,null,[s(T,{flat:""},{default:d(()=>[s(O,null,{default:d(()=>[n("div",ka,_(this.pageTitle),1),n("div",Sa,[n("table",ba,[n("tr",null,[$a,n("td",wa,[s(x,{round:"",class:"q-pa-md",icon:"volume_up",color:"secondary",onClick:o[0]||(o[0]=i=>this.speak())})])]),Da])]),n("div",xa,[n("table",Va,[n("tr",null,[qa,n("td",Ta,[n("a",{class:"ptr float-left",onClick:o[1]||(o[1]=i=>this.loadURL(this.canonicalUrl))},_(this.pageid),1),s(D,{name:"bookmark",onClick:this.addBookmark,class:"float-right"},null,8,["onClick"])])]),n("tr",null,[Ma,n("td",Ia,[n("span",Ba,_(this.lang),1),s(D,{class:"float-right",name:"translate"})])]),n("tr",null,[Ra,n("td",{style:{width:"50%"},onClick:o[2]||(o[2]=(...i)=>this.nextImg&&this.nextImg(...i)),class:"ptr"},[n("span",Ha,_(this.imgIdx)+" / "+_(this.imgTot),1),n("span",Fa,[s(D,{name:"bookmark",onClick:this.saveCurrentImage},null,8,["onClick"])])])]),n("tr",{class:"ptr",onClick:o[3]||(o[3]=(...i)=>this.cycleFitMode&&this.cycleFitMode(...i))},[Qa,n("td",null,[n("span",Ya,_(this.imgFit),1),s(D,{class:"float-right",name:"fit_screen"})])]),n("tr",null,[Pa,n("td",Oa,[E(_(this.guideWords.replaceAll(",",", "))+" ",1),s(D,{class:"float-right",name:"tune"})])]),n("tr",null,[Ua,n("td",null,[n("span",La,_(this.pctReplace)+" %",1),s(D,{class:"float-right",name:"tune"})])]),n("tr",null,[za,n("td",{onClick:o[4]||(o[4]=(...i)=>this.mapCB&&this.mapCB(...i)),class:"ptr"},[n("span",Aa,_(this.mapCoords),1),s(D,{class:"float-right",name:"place"})])]),n("tr",null,[Ea,n("td",{onClick:o[5]||(o[5]=(...i)=>this.toggleText&&this.toggleText(...i)),class:"ptr"},[s(D,{class:"float-right",name:"article"})])])])])]),_:1})]),_:1}),s(T,{flat:""},{default:d(()=>[s(O,null,{default:d(()=>[s(_e,{padding:"",class:"rounded-borders"},{default:d(()=>[s(ye,{"header-style":{border:"1px solid gray"},label:"Page Images"},{default:d(()=>[this.imgs.length?(S(),U("div",Na,[(S(!0),U(J,null,ge(this.imgs,(i,f)=>(S(),q(T,{bordered:"",class:"q-ma-sm",flat:"",modelValue:this.imgs,"onUpdate:modelValue":o[6]||(o[6]=k=>this.imgs=k),key:f},{default:d(()=>[n("div",Ka,[n("span",Wa,[s(D,{name:"bookmark",onClick:k=>this.saveImage(f,i)},null,8,["onClick"]),s(D,{name:"article",onClick:this.toggleText},null,8,["onClick"]),s(D,{name:"fit_screen",onClick:this.cycleFitMode},null,8,["onClick"])]),n("span",null,_(i.cap.slice(0,25)),1),n("span",ja,[s(D,{name:"close",onClick:k=>this.remove(f,i)},null,8,["onClick"])])]),s(je,{class:"cardimage",onClick:k=>this.imgCB(f,i),src:i.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])):fe("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Ga=X(Ca,[["render",Ja]]);const Xa=G({name:"ImagesComponent",setup(){return{reStore:Z()}},mounted(){F(this.reStore.userSnapshot.images,async(e,o)=>{console.log("watcher ",e,o)})},methods:{imgCB(e,o){this.reStore.router.push("/teacher/editor"),console.log(e,o);const p={url:o.url,cap:o.desc};this.reStore.page.imgs.push(p),this.reStore.page.imgIdx=this.reStore.page.imgs.length-1},remove(e,o){console.log(e,o),this.reStore.removeImage(e)}}}),Za={class:"row cardheader justify-between"},eo={class:"history-remove hidden"},to={class:"history-remove ptr"};function ao(e,o,p,V,w,Q){return S(),q(T,{flat:""},{default:d(()=>[s(O,null,{default:d(()=>[s(_e,{padding:"",class:"rounded-borders"},{default:d(()=>[this.reStore.userSnapshot.images?(S(),q(ye,{key:0,"header-style":{border:"1px solid gray"},label:"My Images"},{default:d(()=>[n("div",null,[(S(!0),U(J,null,ge(this.reStore.userSnapshot.images,(i,f)=>(S(),q(T,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":o[0]||(o[0]=k=>this.reStore.userSnapshot.images=k),key:f},{default:d(()=>[n("div",Za,[n("span",eo,[s(D)]),E(" "+_(i.desc.slice(0,25))+" ",1),n("span",to,[s(D,{name:"close",onClick:k=>this.remove(f,i)},null,8,["onClick"])])]),s(je,{class:"cardimage",onClick:k=>this.imgCB(f,i),src:i.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})):fe("",!0)]),_:1})]),_:1})]),_:1})}var oo=X(Xa,[["render",ao]]);const lo=G({name:"BookmarksComponent",setup(){return{reStore:Z()}},mounted(){F(this.reStore.userSnapshot.bookmarks,async(e,o)=>{console.log("watcher ",e,o)})},methods:{imgCB(e,o){this.reStore.page.imgs=JSON.parse(JSON.stringify(o.imgs)),this.reStore.router.push("/teacher/editor")},remove(e,o){console.log(e,o),this.reStore.removeBookmark(e)}}}),no={class:"row cardheader justify-between"},so={class:"history-remove hidden"},ro={class:"history-remove ptr"};function io(e,o,p,V,w,Q){return S(),q(T,{flat:""},{default:d(()=>[s(O,null,{default:d(()=>[s(_e,{padding:"",class:"rounded-borders"},{default:d(()=>[s(ye,{"header-style":{border:"1px solid gray"},label:"My bookmarks"},{default:d(()=>[n("div",null,[(S(!0),U(J,null,ge(this.reStore.userSnapshot.bookmarks,(i,f)=>(S(),q(T,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":o[0]||(o[0]=k=>this.reStore.userSnapshot.bookmarks=k),key:f},{default:d(()=>[n("div",no,[n("span",so,[s(D)]),E(" "+_(i.pageTitle.slice(0,25))+" ",1),n("span",ro,[s(D,{name:"close",onClick:k=>this.remove(f,i)},null,8,["onClick"])])]),s(je,{class:"cardimage",onClick:k=>this.imgCB(f,i),src:i.imgs[0].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var uo=X(lo,[["render",io]]);const co=["gregorian","persian"],mo={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>co.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},ho=["update:modelValue"];function W(e){return e.year+"/"+le(e.month)+"/"+le(e.day)}function vo(e,o){const p=y(()=>e.disable!==!0&&e.readonly!==!0),V=y(()=>e.editable===!0?0:-1),w=y(()=>{const f=[];return e.color!==void 0&&f.push(`bg-${e.color}`),e.textColor!==void 0&&f.push(`text-${e.textColor}`),f.join(" ")});function Q(){return e.locale!==void 0?{...o.lang.date,...e.locale}:o.lang.date}function i(f){const k=new Date,L=f===!0?null:0;if(e.calendar==="persian"){const N=Xt(k);return{year:N.jy,month:N.jm,day:N.jd}}return{year:k.getFullYear(),month:k.getMonth()+1,day:k.getDate(),hour:L,minute:L,second:L,millisecond:L}}return{editable:p,tabindex:V,headerClass:w,getLocale:Q,getCurrentDate:i}}const oe=20,fo=["Calendar","Years","Months"],yt=e=>fo.includes(e),Ee=e=>/^-?[\d]+\/[0-1]\d$/.test(e),de=" \u2014 ";function j(e){return e.year+"/"+le(e.month)}var go=Ke({name:"QDate",props:{...mo,...aa,...St,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Ee},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Ee},navigationMaxYearMonth:{type:String,validator:Ee},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:yt}},emits:[...ho,"rangeStart","rangeEnd","navigation"],setup(e,{slots:o,emit:p}){const{proxy:V}=pt(),{$q:w}=V,Q=bt(e,w),{getCache:i}=sa(),{tabindex:f,headerClass:k,getLocale:L,getCurrentDate:N}=vo(e,w);let ne;const qe=oa(e),Te=la(qe),ce=m(null),z=m(ot()),$=m(L()),ee=y(()=>ot()),$t=y(()=>L()),A=y(()=>N()),v=m(lt(z.value,$.value)),R=m(e.defaultView),Je=w.lang.rtl===!0?"right":"left",pe=m(Je.value),Me=m(Je.value),Ie=v.value.year,Ce=m(Ie-Ie%oe-(Ie<0?oe:0)),M=m(null),wt=y(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(Q.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),te=y(()=>e.color||"primary"),se=y(()=>e.textColor||"white"),ke=y(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Be=y(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),Y=y(()=>Be.value.filter(t=>typeof t=="string").map(t=>Qe(t,z.value,$.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),re=y(()=>{const t=a=>Qe(a,z.value,$.value);return Be.value.filter(a=>Et(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),Se=y(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=ft(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),Re=y(()=>e.calendar==="persian"?W:(t,a,l)=>Zt(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?z.value:a,l===void 0?$.value:l,t.year,t.timezoneOffset)),me=y(()=>Y.value.length+re.value.reduce((t,a)=>t+1+ea(Se.value(a.to),Se.value(a.from)),0)),Ge=y(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(M.value!==null){const l=M.value.init,u=Se.value(l);return $.value.daysShort[u.getDay()]+", "+$.value.monthsShort[l.month-1]+" "+l.day+de+"?"}if(me.value===0)return de;if(me.value>1)return`${me.value} ${$.value.pluralDay}`;const t=Y.value[0],a=Se.value(t);return isNaN(a.valueOf())===!0?de:$.value.headerTitle!==void 0?$.value.headerTitle(a,t):$.value.daysShort[a.getDay()]+", "+$.value.monthsShort[t.month-1]+" "+t.day}),Dt=y(()=>Y.value.concat(re.value.map(a=>a.from)).sort((a,l)=>a.year-l.year||a.month-l.month)[0]),xt=y(()=>Y.value.concat(re.value.map(a=>a.to)).sort((a,l)=>l.year-a.year||l.month-a.month)[0]),Xe=y(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(me.value===0)return de;if(me.value>1){const t=Dt.value,a=xt.value,l=$.value.monthsShort;return l[t.month-1]+(t.year!==a.year?" "+t.year+de+l[a.month-1]+" ":t.month!==a.month?de+l[a.month-1]:"")+" "+a.year}return Y.value[0].year}),be=y(()=>{const t=[w.iconSet.datetime.arrowLeft,w.iconSet.datetime.arrowRight];return w.lang.rtl===!0?t.reverse():t}),Ze=y(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):$.value.firstDayOfWeek),Vt=y(()=>{const t=$.value.daysShort,a=Ze.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),K=y(()=>{const t=v.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():Ae(t.year,t.month)}),qt=y(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),I=y(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),B=y(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),He=y(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return I.value!==null&&I.value.year>=v.value.year&&(t.year.prev=!1,I.value.year===v.value.year&&I.value.month>=v.value.month&&(t.month.prev=!1)),B.value!==null&&B.value.year<=v.value.year&&(t.year.next=!1,B.value.year===v.value.year&&B.value.month<=v.value.month&&(t.month.next=!1)),t}),$e=y(()=>{const t={};return Y.value.forEach(a=>{const l=j(a);t[l]===void 0&&(t[l]=[]),t[l].push(a.day)}),t}),et=y(()=>{const t={};return re.value.forEach(a=>{const l=j(a.from),u=j(a.to);if(t[l]===void 0&&(t[l]=[]),t[l].push({from:a.from.day,to:l===u?a.to.day:void 0,range:a}),l<u){let r;const{year:C,month:c}=a.from,g=c<12?{year:C,month:c+1}:{year:C+1,month:1};for(;(r=j(g))<=u;)t[r]===void 0&&(t[r]=[]),t[r].push({from:void 0,to:r===u?a.to.day:void 0,range:a}),g.month++,g.month>12&&(g.year++,g.month=1)}}),t}),he=y(()=>{if(M.value===null)return;const{init:t,initHash:a,final:l,finalHash:u}=M.value,[r,C]=a<=u?[t,l]:[l,t],c=j(r),g=j(C);if(c!==H.value&&g!==H.value)return;const b={};return c===H.value?(b.from=r.day,b.includeFrom=!0):b.from=1,g===H.value?(b.to=C.day,b.includeTo=!0):b.to=K.value,b}),H=y(()=>j(v.value)),Tt=y(()=>{const t={};if(e.options===void 0){for(let l=1;l<=K.value;l++)t[l]=!0;return t}const a=typeof e.options=="function"?e.options:l=>e.options.includes(l);for(let l=1;l<=K.value;l++){const u=H.value+"/"+le(l);t[l]=a(u)}return t}),Mt=y(()=>{const t={};if(e.events===void 0)for(let a=1;a<=K.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:l=>e.events.includes(l);for(let l=1;l<=K.value;l++){const u=H.value+"/"+le(l);t[l]=a(u)===!0&&qt.value(u)}}return t}),It=y(()=>{let t,a;const{year:l,month:u}=v.value;if(e.calendar!=="persian")t=new Date(l,u-1,1),a=new Date(l,u-1,0).getDate();else{const r=ft(l,u,1);t=new Date(r.gy,r.gm-1,r.gd);let C=u-1,c=l;C===0&&(C=12,c--),a=Ae(c,C)}return{days:t.getDay()-Ze.value-1,endDay:a}}),tt=y(()=>{const t=[],{days:a,endDay:l}=It.value,u=a<0?a+7:a;if(u<6)for(let c=l-u;c<=l;c++)t.push({i:c,fill:!0});const r=t.length;for(let c=1;c<=K.value;c++){const g={i:c,event:Mt.value[c],classes:[]};Tt.value[c]===!0&&(g.in=!0,g.flat=!0),t.push(g)}if($e.value[H.value]!==void 0&&$e.value[H.value].forEach(c=>{const g=r+c-1;Object.assign(t[g],{selected:!0,unelevated:!0,flat:!1,color:te.value,textColor:se.value})}),et.value[H.value]!==void 0&&et.value[H.value].forEach(c=>{if(c.from!==void 0){const g=r+c.from-1,b=r+(c.to||K.value)-1;for(let Le=g;Le<=b;Le++)Object.assign(t[Le],{range:c.range,unelevated:!0,color:te.value,textColor:se.value});Object.assign(t[g],{rangeFrom:!0,flat:!1}),c.to!==void 0&&Object.assign(t[b],{rangeTo:!0,flat:!1})}else if(c.to!==void 0){const g=r+c.to-1;for(let b=r;b<=g;b++)Object.assign(t[b],{range:c.range,unelevated:!0,color:te.value,textColor:se.value});Object.assign(t[g],{flat:!1,rangeTo:!0})}else{const g=r+K.value-1;for(let b=r;b<=g;b++)Object.assign(t[b],{range:c.range,unelevated:!0,color:te.value,textColor:se.value})}}),he.value!==void 0){const c=r+he.value.from-1,g=r+he.value.to-1;for(let b=c;b<=g;b++)t[b].color=te.value,t[b].editRange=!0;he.value.includeFrom===!0&&(t[c].editRangeFrom=!0),he.value.includeTo===!0&&(t[g].editRangeTo=!0)}v.value.year===A.value.year&&v.value.month===A.value.month&&(t[r+A.value.day-1].today=!0);const C=t.length%7;if(C>0){const c=7-C;for(let g=1;g<=c;g++)t.push({i:g,fill:!0})}return t.forEach(c=>{let g="q-date__calendar-item ";c.fill===!0?g+="q-date__calendar-item--fill":(g+=`q-date__calendar-item--${c.in===!0?"in":"out"}`,c.range!==void 0&&(g+=` q-date__range${c.rangeTo===!0?"-to":c.rangeFrom===!0?"-from":""}`),c.editRange===!0&&(g+=` q-date__edit-range${c.editRangeFrom===!0?"-from":""}${c.editRangeTo===!0?"-to":""}`),(c.range!==void 0||c.editRange===!0)&&(g+=` text-${c.color}`)),c.classes=g}),t}),Bt=y(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});F(()=>e.modelValue,t=>{if(ne===t)ne=0;else{const{year:a,month:l}=lt(z.value,$.value);ie(a,l)}}),F(R,()=>{ce.value!==null&&V.$el.contains(document.activeElement)===!0&&ce.value.focus()}),F(()=>v.value.year,t=>{p("navigation",{year:t,month:v.value.month})}),F(()=>v.value.month,t=>{p("navigation",{year:v.value.year,month:t})}),F(ee,t=>{ut(t,$.value,"mask"),z.value=t}),F($t,t=>{ut(z.value,t,"locale"),$.value=t});function at(){const t=A.value,a=$e.value[j(t)];(a===void 0||a.includes(t.day)===!1)&&Pe(t),Fe(t.year,t.month)}function Rt(t){yt(t)===!0&&(R.value=t)}function Ht(t,a){["month","year"].includes(t)&&(t==="month"?st:Ye)(a===!0?-1:1)}function Fe(t,a){R.value="Calendar",ie(t,a)}function Ft(t,a){if(e.range===!1||!t){M.value=null;return}const l=Object.assign({...v.value},t),u=a!==void 0?Object.assign({...v.value},a):l;M.value={init:l,initHash:W(l),final:u,finalHash:W(u)},Fe(l.year,l.month)}function ot(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Qe(t,a,l){return ta(t,a,l,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function lt(t,a){const l=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(l.length===0)return nt();const u=l[l.length-1],r=Qe(u.from!==void 0?u.from:u,t,a);return r.dateHash===null?nt():r}function nt(){let t,a;if(e.defaultYearMonth!==void 0){const l=e.defaultYearMonth.split("/");t=parseInt(l[0],10),a=parseInt(l[1],10)}else{const l=A.value!==void 0?A.value:N();t=l.year,a=l.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+le(a)+"/01"}}function st(t){let a=v.value.year,l=Number(v.value.month)+t;l===13?(l=1,a++):l===0&&(l=12,a--),ie(a,l),ke.value===!0&&we("month")}function Ye(t){const a=Number(v.value.year)+t;ie(a,v.value.month),ke.value===!0&&we("year")}function Qt(t){ie(t,v.value.month),R.value=e.defaultView==="Years"?"Months":"Calendar",ke.value===!0&&we("year")}function Yt(t){ie(v.value.year,t),R.value="Calendar",ke.value===!0&&we("month")}function Pt(t,a){const l=$e.value[a];(l!==void 0&&l.includes(t.day)===!0?Oe:Pe)(t)}function ae(t){return{year:t.year,month:t.month,day:t.day}}function ie(t,a){I.value!==null&&t<=I.value.year&&(t=I.value.year,a<I.value.month&&(a=I.value.month)),B.value!==null&&t>=B.value.year&&(t=B.value.year,a>B.value.month&&(a=B.value.month));const l=t+"/"+le(a)+"/01";l!==v.value.dateHash&&(pe.value=v.value.dateHash<l==(w.lang.rtl!==!0)?"left":"right",t!==v.value.year&&(Me.value=pe.value),dt(()=>{Ce.value=t-t%oe-(t<0?oe:0),Object.assign(v.value,{year:t,month:a,day:1,dateHash:l})}))}function rt(t,a,l){const u=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;ne=u;const{reason:r,details:C}=it(a,l);p("update:modelValue",u,r,C)}function we(t){const a=Y.value[0]!==void 0&&Y.value[0].dateHash!==null?{...Y.value[0]}:{...v.value};dt(()=>{a.year=v.value.year,a.month=v.value.month;const l=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Ae(a.year,a.month);a.day=Math.min(Math.max(1,a.day),l);const u=ue(a);ne=u;const{details:r}=it("",a);p("update:modelValue",u,t,r)})}function it(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...ae(a.target),from:ae(a.from),to:ae(a.to)}}:{reason:`${t}-day`,details:ae(a)}}function ue(t,a,l){return t.from!==void 0?{from:Re.value(t.from,a,l),to:Re.value(t.to,a,l)}:Re.value(t,a,l)}function Pe(t){let a;if(e.multiple===!0)if(t.from!==void 0){const l=W(t.from),u=W(t.to),r=Y.value.filter(c=>c.dateHash<l||c.dateHash>u),C=re.value.filter(({from:c,to:g})=>g.dateHash<l||c.dateHash>u);a=r.concat(C).concat(t).map(c=>ue(c))}else{const l=Be.value.slice();l.push(ue(t)),a=l}else a=ue(t);rt(a,"add",t)}function Oe(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const l=ue(t);t.from!==void 0?a=e.modelValue.filter(u=>u.from!==void 0?u.from!==l.from&&u.to!==l.to:!0):a=e.modelValue.filter(u=>u!==l),a.length===0&&(a=null)}rt(a,"remove",t)}function ut(t,a,l){const u=Y.value.concat(re.value).map(r=>ue(r,t,a)).filter(r=>r.from!==void 0?r.from.dateHash!==null&&r.to.dateHash!==null:r.dateHash!==null);p("update:modelValue",(e.multiple===!0?u:u[0])||null,l)}function Ot(){if(e.minimal!==!0)return h("div",{class:"q-date__header "+k.value},[h("div",{class:"relative-position"},[h(ve,{name:"q-transition--fade"},()=>h("div",{key:"h-yr-"+Xe.value,class:"q-date__header-subtitle q-date__header-link "+(R.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:f.value,...i("vY",{onClick(){R.value="Years"},onKeyup(t){t.keyCode===13&&(R.value="Years")}})},[Xe.value]))]),h("div",{class:"q-date__header-title relative-position flex no-wrap"},[h("div",{class:"relative-position col"},[h(ve,{name:"q-transition--fade"},()=>h("div",{key:"h-sub"+Ge.value,class:"q-date__header-title-label q-date__header-link "+(R.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:f.value,...i("vC",{onClick(){R.value="Calendar"},onKeyup(t){t.keyCode===13&&(R.value="Calendar")}})},[Ge.value]))]),e.todayBtn===!0?h(x,{class:"q-date__header-today self-start",icon:w.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:f.value,onClick:at}):null])])}function Ue({label:t,type:a,key:l,dir:u,goTo:r,boundaries:C,cls:c}){return[h("div",{class:"row items-center q-date__arrow"},[h(x,{round:!0,dense:!0,size:"sm",flat:!0,icon:be.value[0],tabindex:f.value,disable:C.prev===!1,...i("go-#"+a,{onClick(){r(-1)}})})]),h("div",{class:"relative-position overflow-hidden flex flex-center"+c},[h(ve,{name:"q-transition--jump-"+u},()=>h("div",{key:l},[h(x,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:f.value,...i("view#"+a,{onClick:()=>{R.value=a}})})]))]),h("div",{class:"row items-center q-date__arrow"},[h(x,{round:!0,dense:!0,size:"sm",flat:!0,icon:be.value[1],tabindex:f.value,disable:C.next===!1,...i("go+#"+a,{onClick(){r(1)}})})])]}const Ut={Calendar:()=>[h("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[h("div",{class:"q-date__navigation row items-center no-wrap"},Ue({label:$.value.months[v.value.month-1],type:"Months",key:v.value.month,dir:pe.value,goTo:st,boundaries:He.value.month,cls:" col"}).concat(Ue({label:v.value.year,type:"Years",key:v.value.year,dir:Me.value,goTo:Ye,boundaries:He.value.year,cls:""}))),h("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Vt.value.map(t=>h("div",{class:"q-date__calendar-item"},[h("div",t)]))),h("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[h(ve,{name:"q-transition--slide-"+pe.value},()=>h("div",{key:H.value,class:"q-date__calendar-days fit"},tt.value.map(t=>h("div",{class:t.classes},[t.in===!0?h(x,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:f.value,...i("day#"+t.i,{onClick:()=>{Lt(t.i)},onMouseover:()=>{zt(t.i)}})},t.event!==!1?()=>h("div",{class:"q-date__event bg-"+t.event}):null):h("div",""+t.i)]))))])])],Months(){const t=v.value.year===A.value.year,a=u=>I.value!==null&&v.value.year===I.value.year&&I.value.month>u||B.value!==null&&v.value.year===B.value.year&&B.value.month<u,l=$.value.monthsShort.map((u,r)=>{const C=v.value.month===r+1;return h("div",{class:"q-date__months-item flex flex-center"},[h(x,{class:t===!0&&A.value.month===r+1?"q-date__today":null,flat:C!==!0,label:u,unelevated:C,color:C===!0?te.value:null,textColor:C===!0?se.value:null,tabindex:f.value,disable:a(r+1),...i("month#"+r,{onClick:()=>{Yt(r+1)}})})])});return e.yearsInMonthView===!0&&l.unshift(h("div",{class:"row no-wrap full-width"},[Ue({label:v.value.year,type:"Years",key:v.value.year,dir:Me.value,goTo:Ye,boundaries:He.value.year,cls:" col"})])),h("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},l)},Years(){const t=Ce.value,a=t+oe,l=[],u=r=>I.value!==null&&I.value.year>r||B.value!==null&&B.value.year<r;for(let r=t;r<=a;r++){const C=v.value.year===r;l.push(h("div",{class:"q-date__years-item flex flex-center"},[h(x,{key:"yr"+r,class:A.value.year===r?"q-date__today":null,flat:!C,label:r,dense:!0,unelevated:C,color:C===!0?te.value:null,textColor:C===!0?se.value:null,tabindex:f.value,disable:u(r),...i("yr#"+r,{onClick:()=>{Qt(r)}})})]))}return h("div",{class:"q-date__view q-date__years flex flex-center"},[h("div",{class:"col-auto"},[h(x,{round:!0,dense:!0,flat:!0,icon:be.value[0],tabindex:f.value,disable:u(t),...i("y-",{onClick:()=>{Ce.value-=oe}})})]),h("div",{class:"q-date__years-content col self-stretch row items-center"},l),h("div",{class:"col-auto"},[h(x,{round:!0,dense:!0,flat:!0,icon:be.value[1],tabindex:f.value,disable:u(a),...i("y+",{onClick:()=>{Ce.value+=oe}})})])])}};function Lt(t){const a={...v.value,day:t};if(e.range===!1){Pt(a,H.value);return}if(M.value===null){const l=tt.value.find(r=>r.fill!==!0&&r.i===t);if(e.noUnset!==!0&&l.range!==void 0){Oe({target:a,from:l.range.from,to:l.range.to});return}if(l.selected===!0){Oe(a);return}const u=W(a);M.value={init:a,initHash:u,final:a,finalHash:u},p("rangeStart",ae(a))}else{const l=M.value.initHash,u=W(a),r=l<=u?{from:M.value.init,to:a}:{from:a,to:M.value.init};M.value=null,Pe(l===u?a:{target:a,...r}),p("rangeEnd",{from:ae(r.from),to:ae(r.to)})}}function zt(t){if(M.value!==null){const a={...v.value,day:t};Object.assign(M.value,{final:a,finalHash:W(a)})}}return Object.assign(V,{setToday:at,setView:Rt,offsetCalendar:Ht,setCalendarTo:Fe,setEditingRange:Ft}),()=>{const t=[h("div",{class:"q-date__content col relative-position"},[h(ve,{name:"q-transition--fade"},Ut[R.value])])],a=_t(o.default);return a!==void 0&&t.push(h("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&Te(t,"push"),h("div",{class:wt.value,...Bt.value},[Ot(),h("div",{ref:ce,class:"q-date__main col column",tabindex:-1},t)])}}});const yo=h("div",{class:"q-space"});var _o=Ke({name:"QSpace",setup(){return()=>yo}});const po=G({name:"OTDComponent",setup(){const e=Z(),o=Date.now(),p=gt.formatDate(o,"MM/DD");return{reStore:e,otditems:m([]),promptOTDDate:m(!1),otddate:m(Date.now()),otdlabel:m(p),otdtype:m("selected")}},mounted(){this.init()},methods:{async init(){const e=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=e[this.otdtype],console.log(this.otditems)},async load(e){console.log("load",this.otditems[e].text),console.log("load",this.otditems[e]);const o=this.reStore.langVoices[this.reStore.preferences.langVoice];this.reStore.loadPageId(this.otditems[e].pages[0].pageid,o),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const e=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=e.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=gt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(e){console.log("otdOptionsCB",this.otdtype);const o=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=o[this.otdtype]}}}),Co=n("div",{class:"text-h6"},"Select Date",-1),ko={class:"q-gutter-y-sm column"},So={class:""};function bo(e,o,p,V,w,Q){return S(),U(J,null,[s(kt,{modelValue:e.promptOTDDate,"onUpdate:modelValue":o[2]||(o[2]=i=>e.promptOTDDate=i),persistent:""},{default:d(()=>[s(T,{style:{"min-width":"350px"}},{default:d(()=>[s(O,{align:"center"},{default:d(()=>[Co]),_:1}),s(go,{modelValue:e.otddate,"onUpdate:modelValue":o[0]||(o[0]=i=>e.otddate=i),minimal:""},null,8,["modelValue"]),s(Ct,{align:"center",class:"text-white"},{default:d(()=>[xe(s(x,{flat:"",label:"Cancel"},null,512),[[Ve]]),xe(s(x,{flat:"",label:"Update OTD date",onClick:o[1]||(o[1]=i=>this.updateOTDDate())},null,512),[[Ve]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(T,{flat:""},{default:d(()=>[s(O,null,{default:d(()=>[s(_e,{padding:"",class:"rounded-borders"},{default:d(()=>[s(ye,{"header-style":{border:"1px solid gray"},label:"On This Day"},{default:d(()=>[n("div",ko,[s(We,{class:"bg-primary text-white rounded-borders q-my-md"},{default:d(()=>[s(x,{dark:"",standout:"",onClick:o[3]||(o[3]=i=>e.promptOTDDate=!0)},{default:d(()=>[E(_(e.otdlabel),1)]),_:1}),s(_o),s(ra,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":o[4]||(o[4]=i=>this.otdtype=i),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:o[5]||(o[5]=i=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),n("div",So,[(S(!0),U(J,null,ge(e.otditems,(i,f)=>(S(),q(T,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:e.otditems,"onUpdate:modelValue":o[6]||(o[6]=k=>e.otditems=k),key:f,onClick:k=>this.load(f)},{default:d(()=>[E(_(f)+". "+_(i.year)+" "+_(i.text),1)]),_:2},1032,["modelValue","onClick"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}var $o=X(po,[["render",bo]]);const wo=G({name:"CurrentAssignment",setup(){const e=Z();return{reStore:e,assignmentid:m("-"),courseid:m("-"),goal:m("-"),created:m("-"),id:m("-"),points:m("-"),pages:m([]),pgIdx:m(0),title:m(e.assignment.title)}},mounted(){console.log("mounted"),F(this.reStore.assignment,async(e,o)=>{try{console.log("watcher ",e,o),this.courseid=e.courseid,this.goal=e.goal,this.created=e.created,this.id=e.id,this.points=e.points,this.pages=e.pages,this.pgIdx=e.pgIdx,this.title=e.title}catch(p){console.log(p)}})},methods:{dummy(){console.log("dummy")}}}),Do={class:"text-weight-bolder text-center q-pa-md"},xo={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Vo={width:"100%"},qo=n("td",null,"Course Id",-1),To={style:{width:"50%"}},Mo=n("td",null,"Assgmnt Id",-1),Io={style:{width:"50%"}},Bo=n("td",null,"Created",-1),Ro={style:{width:"50%"}},Ho=n("td",null,"Goal",-1),Fo={style:{width:"50%"}},Qo=n("td",null,"Pages",-1),Yo={style:{width:"50%"}};function Po(e,o,p,V,w,Q){return S(),q(T,{flat:""},{default:d(()=>[s(O,null,{default:d(()=>[n("div",Do,_(this.title),1),n("div",xo,[n("table",Vo,[n("tr",null,[qo,n("td",To,_(this.courseid),1)]),n("tr",null,[Mo,n("td",Io,_(this.id),1)]),n("tr",null,[Bo,n("td",Ro,_(this.created),1)]),n("tr",null,[Ho,n("td",Fo,_(this.goal),1)]),n("tr",null,[Qo,n("td",Yo,_(this.pgIdx)+" / "+_(this.pages.length),1)])])])]),_:1})]),_:1})}var Oo=X(wo,[["render",Po]]);const Uo=G({name:"CurrentCourse",setup(){const e=Z();return{reStore:e,title:m(e.course.title),assignmentCount:m(0),courseKey:m(e.course.courseKey),created:m(e.course.created),enrollmentCount:m(0),owner:m(e.course.owner)}},mounted(){console.log("CurrentCourse mounted"),F(this.reStore.course,async(e,o)=>{try{console.log("CurrentCourse watcher ",e,o),this.assignmentCount=Object.keys(e.assignments).length,this.title=e.title,this.courseKey=e.courseKey,this.created=e.created,this.enrollmentCount=Object.keys(e.enrollment).length,this.owner=e.owner}catch(p){console.log(p)}})},methods:{dummy(){console.log("dummy")}}}),Lo={class:"text-weight-bolder text-center q-pa-md"},zo={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Ao={width:"100%"},Eo=n("td",null,"Owner",-1),No={style:{width:"50%"}},Ko=n("td",null,"Assignments",-1),Wo={style:{width:"50%"}},jo=n("td",null,"Course-Key",-1),Jo={style:{width:"50%"}},Go=n("td",null,"Created",-1),Xo={style:{width:"50%"}},Zo=n("td",null,"Enrollment",-1),el={style:{width:"50%"}};function tl(e,o,p,V,w,Q){return S(),q(T,{flat:""},{default:d(()=>[s(O,null,{default:d(()=>[n("div",Lo,_(this.title),1),n("div",zo,[n("table",Ao,[n("tr",null,[Eo,n("td",No,_(this.owner.slice(0,10)),1)]),n("tr",null,[Ko,n("td",Wo,_(this.assignmentCount),1)]),n("tr",null,[jo,n("td",Jo,_(this.courseKey),1)]),n("tr",null,[Go,n("td",Xo,_(this.created),1)]),n("tr",null,[Zo,n("td",el,_(this.enrollmentCount),1)])])])]),_:1})]),_:1})}var al=X(Uo,[["render",tl]]);const ol=G({name:"TeacherLayout",components:{CurrentCourse:al,DocumentationComponent:ia,SearchComponent:pa,ImagesComponent:oo,BookmarksComponent:uo,OTDComponent:$o,CurrentAssignment:Oo,PreferencesComponent:ua,CurrentPage:Ga},setup(){const e=m(!1),o=m(!1),p=Z(),V=p.preferences;return{step:m(1),reStore:p,initialValues:m(V),leftDrawerOpen:e,rightDrawerOpen:o,toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){o.value=!o.value}}},mounted(){ct.isActive||(ct.toggle(),ze("primary","#333"),ze("secondary",this.reStore.preferences.secondaryColor),ze("accent",this.reStore.preferences.accentColor))}}),ll={class:"dashboard-wrapper"};function nl(e,o,p,V,w,Q){const i=P("router-link"),f=P("router-view"),k=P("DocumentationComponent"),L=P("SearchComponent"),N=P("ImagesComponent"),ne=P("BookmarksComponent"),qe=P("OTDComponent"),Te=P("CurrentCourse"),ce=P("CurrentAssignment"),z=P("CurrentPage"),$=P("PreferencesComponent");return S(),q(Jt,{view:"hHh LpR fFf"},{default:d(()=>[s(Wt,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:d(()=>[s(We,null,{default:d(()=>[s(x,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),s(Nt,null,{default:d(()=>[s(i,{to:"/teacher"},{default:d(()=>[s(D,{name:"home",color:"white"},{default:d(()=>[s(Ne,null,{default:d(()=>[E("Return to My Teacher Page")]),_:1})]),_:1})]),_:1})]),_:1}),this.reStore.authenticated?(S(),q(x,{key:0,onClick:o[0]||(o[0]=ee=>this.reStore.router.push("/student")),icon:"switch_account"},{default:d(()=>[s(Ne,null,{default:d(()=>[E(" Switch between Teacher or Student role ")]),_:1})]),_:1})):fe("",!0),this.reStore.authenticated?(S(),q(x,{key:1,icon:"logout",onClick:o[1]||(o[1]=ee=>this.reStore.logout())})):fe("",!0),s(x,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1}),s(Kt,{align:"left",class:"hidden"},{default:d(()=>[s(De,{to:"/logo",label:"Logo"}),s(De,{to:"/teaching",label:"Teaching"}),s(De,{to:"/taking",label:"Taking"}),s(De,{to:"/gradebook",label:"Gradebook"})]),_:1})]),_:1}),s(jt,{class:"container-fluid"},{default:d(()=>[n("div",ll,[s(f)]),s(mt,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":o[2]||(o[2]=ee=>e.leftDrawerOpen=ee),side:"left"},{default:d(()=>[s(ht,{visible:e.visible,style:{height:"95vh","max-width":"350px"}},{default:d(()=>[s(k),s(L),s(N),s(ne),s(qe)]),_:1},8,["visible"])]),_:1},8,["modelValue"]),s(mt,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":o[3]||(o[3]=ee=>e.rightDrawerOpen=ee),side:"right"},{default:d(()=>[s(ht,{visible:e.visible,style:{height:"95vh","max-width":"350px"}},{default:d(()=>[s(Te),s(ce),s(z),s($,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var bl=X(ol,[["render",nl]]);export{bl as default};
