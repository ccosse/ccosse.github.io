import{i as f,g as Je,h as p,j as Ct,z as kt,d as X,r as h,D as j,_ as Z,o as x,au as A,a as l,w as r,p as qe,Q as $,e as n,af as q,ag as y,aK as Kt,c as R,x as D,av as G,aL as pe,aJ as me,f as F,al as Et,am as ge,G as mt,P as ht,s as Ke}from"./index.accd25df.js";import{Q as K}from"./QTooltip.dec8e1d4.js";import{Q as _e,a as Nt,b as Wt,c as Ve,d as Jt,e as vt,f as ft,g as Gt,h as Xt}from"./QLayout.53505308.js";import{Q as ye,a as Te}from"./QExpansionItem.10c267eb.js";import{u as ee,s as Zt,a as gt,p as le,t as ea,c as _t,f as ta,g as aa,j as Ee,_ as oa,d as pt}from"./re-store.50736ea5.js";import{a as I,Q as L,i as St,C as Ie,h as bt,u as sa,b as la,c as na}from"./ClosePopup.ef04cb1f.js";import{a as ra,u as ia,b as ua,D as da,P as ca}from"./DocumentationComponent.2af68128.js";import{Q as ma}from"./QInput.a8c8bbff.js";import{d as wt,f as $t}from"./use-dark.316c04d3.js";import{Q as ha}from"./QToggle.bed4e57d.js";import{Q as Ge}from"./QImg.35247e97.js";import"./position-engine.c78df730.js";import"./selection.1179df11.js";import"./use-portal.debfe3d6.js";import"./QSlideTransition.cb7bf03a.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";import"./use-key-composition.4d14ffa9.js";import"./QCheckbox.30355a4e.js";const va=f("div",{class:"q-space"});var We=Je({name:"QSpace",setup(){return()=>va}}),Ce=Je({name:"QList",props:{...wt,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(t,{slots:o}){const v=kt(),k=$t(t,v.proxy.$q),w=p(()=>"q-list"+(t.bordered===!0?" q-list--bordered":"")+(t.dense===!0?" q-list--dense":"")+(t.separator===!0?" q-list--separator":"")+(k.value===!0?" q-list--dark":"")+(t.padding===!0?" q-list--padding":""));return()=>f(t.tag,{class:w.value},Ct(o.default))}});const fa=X({name:"SearchComponent",setup(){const t=ee(),o=h("");return{reStore:t,searchTerms:o,searchSize:h(t.preferences.resLimit),searchResults:h([]),promptSearchSize:h(!1)}},mounted(){j(this.reStore.preferences,async(t,o)=>{console.log("watcher ",t,o),this.searchSize=t.resLimit})},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(t){this.searchResults.splice(t,1)},load(t){console.log(t),console.log(this.searchResults[t]);const o=this.reStore.preferences.langVoiceKey;console.log("calling loadPageId ",this.searchResults[t].pageid,o),this.reStore.loadPageId(this.searchResults[t].pageid,o),this.reStore.courses.trigger+=1},async doSearch(){const t=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("doSearch ",t),this.reStore.wiki.setLang(t.langName);const o=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",o.results.length),this.searchResults=o.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),ga=n("div",{class:"text-h6"},"Search Results Size",-1),_a={class:"q-gutter-y-sm column"},pa={key:0},ya={class:"row cardheader ptr justify-between"},Ca=["onClick"],ka={class:"history-remove"};function Sa(t,o,v,k,w,b){return x(),A(G,null,[l(bt,{modelValue:t.promptSearchSize,"onUpdate:modelValue":o[2]||(o[2]=m=>t.promptSearchSize=m),persistent:""},{default:r(()=>[l(I,{style:{"min-width":"350px"}},{default:r(()=>[l(L,{align:"center"},{default:r(()=>[ga]),_:1}),l(L,{class:"q-pt-none",align:"center"},{default:r(()=>[l(ra,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:t.searchSize,"onUpdate:modelValue":o[0]||(o[0]=m=>t.searchSize=m)},null,8,["modelValue"])]),_:1}),l(St,{align:"center",class:"text-white"},{default:r(()=>[qe(l($,{flat:"",label:"Cancel"},null,512),[[Ie]]),qe(l($,{flat:"",label:"Update results size",onClick:o[1]||(o[1]=m=>this.updateSearchSize())},null,512),[[Ie]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(I,{flat:""},{default:r(()=>[l(L,null,{default:r(()=>[l(Ce,{padding:"",class:"rounded-borders"},{default:r(()=>[l(ye,{"header-style":{border:"1px solid gray"},label:"Search & Results"},{default:r(()=>[n("div",_a,[l(_e,{class:"bg-primary text-white rounded-borders q-my-md"},{default:r(()=>[l($,{dark:"",standout:"",onClick:o[3]||(o[3]=m=>t.promptSearchSize=!0)},{default:r(()=>[q(y(this.searchResults.length)+" ",1),l(K,null,{default:r(()=>[q("Change results limit ("+y(this.searchSize)+")",1)]),_:1})]),_:1}),l(ma,{dark:"",dense:"",standout:"",modelValue:t.searchTerms,"onUpdate:modelValue":o[6]||(o[6]=m=>t.searchTerms=m),"input-class":"text-right",class:"q-ml-md",onKeyup:[o[7]||(o[7]=m=>this.update()),o[8]||(o[8]=Kt(m=>this.doSearch(),["enter"]))]},{append:r(()=>[t.searchTerms===""?(x(),R(D,{key:0,name:"search",onClick:o[4]||(o[4]=m=>this.doSearch())})):(x(),R(D,{key:1,name:"clear",class:"cursor-pointer",onClick:o[5]||(o[5]=m=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(x(),A("div",pa,[(x(!0),A(G,null,pe(this.searchResults,(m,d)=>(x(),R(I,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":o[9]||(o[9]=S=>this.searchResults=S),key:d},{default:r(()=>[n("div",ya,[n("span",{class:"history-title col-grow",onClick:S=>this.load(d)},y(d)+". "+y(m.title.slice(0,25)),9,Ca),n("span",ka,[l(D,{class:"primary",size:t.xl,color:t.primary,name:"close",onClick:S=>this.remove(d)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):me("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var ba=Z(fa,[["render",Sa]]);const wa=X({name:"CurrentPage",props:{},setup(t){return{reStore:ee(),ck:h("-"),aid:h("-"),pageTitle:h("-"),langVoiceKey:h(),imgIdx:h(0),imgs:h([]),imgTot:h(0),imgFit:h("-"),guideWords:h("-"),mapCoords:h("-"),pageid:h("-"),pctReplace:h(),canonicalUrl:h(),props:t,isCustom:h(!1)}},mounted(){console.log(this.props),j(this.reStore.courses,async(t,o)=>{try{console.log("CurrentPage watcher",this.reStore.courses);const v=this.reStore.courses.ck,k=this.reStore.courses.aid,w=this.reStore.courses.pgIdx,b=this.reStore.page;b&&(console.log("CurrentPage ",b),this.pageTitle=b.pageTitle,this.imgIdx=b.imgIdx,this.imgs=b.imgs,this.imgTot=b.imgs.length,this.imgFit=b.imgFit,this.guideWords=b.guideWords,this.mapCoords=b.mapCoords,this.pageid=b.pageid,this.langVoiceKey=b.langVoiceKey,this.pctReplace=b.pctReplace,this.canonicalUrl=b.canonicalUrl,this.isCustom=h(this.reStore.page.isCustom)),this.aid=k,this.ck=v}catch(v){console.log(v)}},{immediate:!0,deep:!0})},methods:{speak(){console.log("CurrentPage.speak",this.reStore),this.reStore.speak()},cycleFitMode(){const t=["scale-down","cover"];let o=t.indexOf(this.imgFit);o+=1,o>t.length-1&&(o=0),this.imgFit=t[o],this.reStore.page.imgFit=this.imgFit,console.log("fit: ",this.imgFit),this.reStore.courses.trigger+=1},nextImg(){this.imgIdx=this.imgIdx+1>this.imgs.length-1?0:this.imgIdx+1,this.reStore.page.imgIdx=this.imgIdx,this.reStore.courses.imgIdx=this.imgIdx},imgCB(t,o){console.log(t,o),this.reStore.page.imgIdx=t,this.reStore.courses.imgIdx=t},loadURL(t){console.log("loadURL ",t),window.open(t,"_blank")},mapCB(){const t="https://maps.google.com/?ll="+this.mapCoords.split(",")[0]+","+this.mapCoords.split(",")[1];window.open(t,"_blank")},saveImage(t,o){console.log("saveImage: ",t,o),this.reStore.saveImage(t,o)},saveCurrentImage(){const t=this.imgs[this.imgIdx];console.log("saveCurrentImage: ",t),this.reStore.saveImage(this.imgIdx,t)},remove(t,o){console.log("remove: ",t,o),this.imgs.splice(t,1),this.reStore.page.imgs.splice(t,1)},toggleText(){Zt("#slideTextDiv").classed("hidden")?gt("#slideTextDiv").classed("hidden",!1):gt("#slideTextDiv").classed("hidden",!0)},addBookmark(){console.log("addBookmark"),this.reStore.saveBookmark()},resetPage(){this.reStore.newPage()},newPage(){console.log("CurrentPage newPageCB "),this.reStore.newPage()},appendPage(){this.reStore.appendPage()},updatePage(){this.reStore.updatePage()},updateType(t,o){this.reStore.page.isCustom=this.isCustom}}}),$a={class:"text-weight-bolder text-center q-pa-md text-white"},xa={style:{border:"1px solid gray","border-radius":"5px"}},Da={width:"100%"},Va={style:{width:"50%","text-align":"center"}},Ta={style:{"text-align":"center"}},qa={style:{"text-align":"center"}},Ia=n("td",{style:{"text-align":"center"}},"Speak Text",-1),Ma={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Oa={width:"100%"},Ha=n("td",null,"Course-Key",-1),Pa={style:{width:"50%"}},Ra={class:"ptr float-left"},Ba=n("td",null,"Assgmnt Id",-1),Qa={style:{width:"50%"}},Fa={class:"ptr float-left"},ja=n("td",null,"WP Page Id",-1),Aa={style:{width:"50%"}},Ya=n("td",null,"Language",-1),La={style:{width:"50%"}},za={class:"float-left"},Ua=n("td",null,"Images",-1),Ka={style:{width:"50%"}},Ea=n("td",null,"Image Fit",-1),Na={class:"align-left"},Wa=n("td",null,"Guide Words",-1),Ja={style:{width:"50%"}},Ga=n("td",null,"Percent Replace",-1),Xa={class:"float-left"},Za=n("td",null,"Map Coords",-1),eo={class:"float-left"},to=n("td",null,"Toggle Text",-1),ao={key:0},oo={class:"row cardheader justify-between"},so={class:"history-remove"},lo={key:0},no={class:"history-remove ptr"};function ro(t,o,v,k,w,b){const m=F("router-link");return x(),A(G,null,[l(I,{flat:""},{default:r(()=>[l(L,null,{default:r(()=>[n("div",$a,[l(m,{to:"/teacher/editor"},{default:r(()=>[q(y(this.pageTitle.slice(0,20)),1)]),_:1}),l(D,{class:"on-right",name:"replay",onClick:this.resetPage,size:"sm"},null,8,["onClick"]),l(D,{class:"on-right",name:"add_circle",onClick:this.newPage,size:"sm"},null,8,["onClick"]),l(D,{class:"on-right",name:"publish",onClick:this.updatePage,size:"sm"},{default:r(()=>[l(K,null,{default:r(()=>[q("Update current page")]),_:1})]),_:1},8,["onClick"]),l(D,{class:"on-right",name:"publish",onClick:this.appendPage,size:"sm"},{default:r(()=>[l(K,null,{default:r(()=>[q("Push as new page")]),_:1})]),_:1},8,["onClick"])]),n("div",xa,[n("table",Da,[n("tr",null,[n("td",Va,[l(ha,{modelValue:t.isCustom,"onUpdate:modelValue":[o[0]||(o[0]=d=>t.isCustom=d),this.updateType],color:"accent"},null,8,["modelValue","onUpdate:modelValue"])]),n("td",Ta,[l($,{round:"",class:"q-pa-md",icon:"volume_up",color:"secondary",onClick:o[1]||(o[1]=d=>this.speak())})])]),n("tr",null,[n("td",qa,y(t.isCustom===!0?"Custom":"Random"),1),Ia])])]),n("div",Ma,[n("table",Oa,[n("tr",null,[Ha,n("td",Pa,[n("a",Ra,y(this.ck),1)])]),n("tr",null,[Ba,n("td",Qa,[n("a",Fa,y(this.aid),1)])]),n("tr",null,[ja,n("td",Aa,[n("a",{class:"ptr float-left",onClick:o[2]||(o[2]=d=>this.loadURL(this.canonicalUrl))},y(this.pageid),1),l(D,{name:"bookmark",onClick:this.addBookmark,class:"float-right"},null,8,["onClick"])])]),n("tr",null,[Ya,n("td",La,[n("span",za,y(this.langVoiceKey),1),l(D,{class:"float-right",name:"translate"})])]),n("tr",null,[Ua,n("td",Ka,[n("span",{onClick:o[3]||(o[3]=(...d)=>this.nextImg&&this.nextImg(...d)),class:"ptr float-left"},y(this.imgIdx+1)+" / "+y(this.imgTot),1),n("span",{class:"float-right ptr",onClick:o[4]||(o[4]=(...d)=>this.saveCurrentImage&&this.saveCurrentImage(...d))},[l(D,{name:"bookmark"})])])]),n("tr",{class:"ptr",onClick:o[5]||(o[5]=(...d)=>this.cycleFitMode&&this.cycleFitMode(...d))},[Ea,n("td",null,[n("span",Na,y(this.imgFit),1),l(D,{class:"float-right",name:"fit_screen"})])]),n("tr",null,[Wa,n("td",Ja,[q(y(this.guideWords.replaceAll(",",", "))+" ",1),l(D,{class:"float-right",name:"tune"})])]),n("tr",null,[Ga,n("td",null,[n("span",Xa,y(this.pctReplace)+" %",1),l(D,{class:"float-right",name:"tune"})])]),n("tr",null,[Za,n("td",{onClick:o[6]||(o[6]=(...d)=>this.mapCB&&this.mapCB(...d)),class:"ptr"},[n("span",eo,y(this.mapCoords),1),l(D,{class:"float-right",name:"place"})])]),n("tr",null,[to,n("td",{onClick:o[7]||(o[7]=(...d)=>this.toggleText&&this.toggleText(...d)),class:"ptr"},[l(D,{class:"float-right",name:"article"})])])])])]),_:1})]),_:1}),l(I,{flat:""},{default:r(()=>[l(L,null,{default:r(()=>[l(Ce,{padding:"",class:"rounded-borders"},{default:r(()=>[l(ye,{"header-style":{border:"1px solid gray"},label:"Page Images"},{default:r(()=>[this.imgs.length?(x(),A("div",ao,[(x(!0),A(G,null,pe(this.imgs,(d,S)=>(x(),R(I,{bordered:"",class:"q-ma-sm",flat:"",modelValue:this.imgs,"onUpdate:modelValue":o[8]||(o[8]=M=>this.imgs=M),key:S},{default:r(()=>[n("div",oo,[n("span",so,[l(D,{name:"bookmark",onClick:M=>this.saveImage(S,d)},null,8,["onClick"]),l(D,{name:"article",onClick:this.toggleText},{default:r(()=>[l(K,null,{default:r(()=>[q("Convenience button to toggle current text ")]),_:1})]),_:1},8,["onClick"]),l(D,{name:"fit_screen",onClick:this.cycleFitMode},{default:r(()=>[l(K,null,{default:r(()=>[q("Convenience button to toggle current image-fit mode ")]),_:1})]),_:1},8,["onClick"])]),d.cap?(x(),A("span",lo,y(d.cap.slice(0,25)),1)):me("",!0),n("span",no,[l(D,{name:"close",onClick:M=>this.remove(S,d)},null,8,["onClick"])])]),l(Ge,{class:"cardimage",onClick:M=>this.imgCB(S,d),src:d.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])):me("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var io=Z(wa,[["render",ro]]);const uo=X({name:"ImagesComponent",setup(){return{reStore:ee()}},mounted(){j(this.reStore.userSnapshot.images,async(t,o)=>{console.log("watcher ",t,o)})},methods:{imgCB(t,o){this.reStore.router.push("/teacher/editor"),console.log(t,o),this.reStore.loadImgId(t)},remove(t,o){console.log(t,o),this.reStore.removeImage(t)}}}),co={class:"row cardheader justify-between"},mo={class:"history-remove hidden"},ho={key:0},vo={class:"history-remove ptr"};function fo(t,o,v,k,w,b){return x(),R(I,{flat:""},{default:r(()=>[l(L,null,{default:r(()=>[l(Ce,{padding:"",class:"rounded-borders"},{default:r(()=>[l(ye,{"header-style":{border:"1px solid gray"},label:"My Images"},{default:r(()=>[n("div",null,[(x(!0),A(G,null,pe(this.reStore.userSnapshot.images,(m,d)=>(x(),R(I,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":o[0]||(o[0]=S=>this.reStore.userSnapshot.images=S),key:d},{default:r(()=>[n("div",co,[n("span",mo,[l(D)]),m.desc?(x(),A("span",ho,y(m.desc.slice(0,25)),1)):me("",!0),n("span",vo,[l(D,{name:"close",onClick:S=>this.remove(d,m)},null,8,["onClick"])])]),l(Ge,{class:"cardimage",onClick:S=>this.imgCB(d,m),src:m.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var go=Z(uo,[["render",fo]]);const _o=X({name:"BookmarksComponent",setup(){return{reStore:ee()}},mounted(){j(this.reStore.userSnapshot.bookmarks,async(t,o)=>{console.log("watcher ",t,o)})},methods:{imgCB(t,o){this.reStore.page.imgs=JSON.parse(JSON.stringify(o.imgs)),this.reStore.router.push("/teacher/editor")},remove(t,o){console.log(t,o),this.reStore.removeBookmark(t)}}}),po={class:"row cardheader justify-between"},yo={class:"history-remove hidden"},Co={class:"history-remove ptr"};function ko(t,o,v,k,w,b){return x(),R(I,{flat:""},{default:r(()=>[l(L,null,{default:r(()=>[l(Ce,{padding:"",class:"rounded-borders"},{default:r(()=>[l(ye,{"header-style":{border:"1px solid gray"},label:"My bookmarks"},{default:r(()=>[n("div",null,[(x(!0),A(G,null,pe(this.reStore.userSnapshot.bookmarks,(m,d)=>(x(),R(I,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":o[0]||(o[0]=S=>this.reStore.userSnapshot.bookmarks=S),key:d},{default:r(()=>[n("div",po,[n("span",yo,[l(D)]),q(" "+y(m.pageTitle.slice(0,25))+" ",1),n("span",Co,[l(D,{name:"close",onClick:S=>this.remove(d,m)},null,8,["onClick"])])]),l(Ge,{class:"cardimage",onClick:S=>this.imgCB(d,m),src:m.imgs[0].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var So=Z(_o,[["render",ko]]);const bo=["gregorian","persian"],wo={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:t=>bo.includes(t),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},$o=["update:modelValue"];function W(t){return t.year+"/"+le(t.month)+"/"+le(t.day)}function xo(t,o){const v=p(()=>t.disable!==!0&&t.readonly!==!0),k=p(()=>t.editable===!0?0:-1),w=p(()=>{const d=[];return t.color!==void 0&&d.push(`bg-${t.color}`),t.textColor!==void 0&&d.push(`text-${t.textColor}`),d.join(" ")});function b(){return t.locale!==void 0?{...o.lang.date,...t.locale}:o.lang.date}function m(d){const S=new Date,M=d===!0?null:0;if(t.calendar==="persian"){const E=ea(S);return{year:E.jy,month:E.jm,day:E.jd}}return{year:S.getFullYear(),month:S.getMonth()+1,day:S.getDate(),hour:M,minute:M,second:M,millisecond:M}}return{editable:v,tabindex:k,headerClass:w,getLocale:b,getCurrentDate:m}}const se=20,Do=["Calendar","Years","Months"],yt=t=>Do.includes(t),Ne=t=>/^-?[\d]+\/[0-1]\d$/.test(t),ce=" \u2014 ";function J(t){return t.year+"/"+le(t.month)}var Vo=Je({name:"QDate",props:{...wo,...sa,...wt,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Ne},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Ne},navigationMaxYearMonth:{type:String,validator:Ne},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:yt}},emits:[...$o,"rangeStart","rangeEnd","navigation"],setup(t,{slots:o,emit:v}){const{proxy:k}=kt(),{$q:w}=k,b=$t(t,w),{getCache:m}=ia(),{tabindex:d,headerClass:S,getLocale:M,getCurrentDate:E}=xo(t,w);let ne;const Me=la(t),Oe=na(Me),he=h(null),z=h(lt()),T=h(M()),te=p(()=>lt()),xt=p(()=>M()),U=p(()=>E()),g=h(nt(z.value,T.value)),B=h(t.defaultView),Xe=w.lang.rtl===!0?"right":"left",ke=h(Xe.value),He=h(Xe.value),Pe=g.value.year,Se=h(Pe-Pe%se-(Pe<0?se:0)),O=h(null),Dt=p(()=>{const e=t.landscape===!0?"landscape":"portrait";return`q-date q-date--${e} q-date--${e}-${t.minimal===!0?"minimal":"standard"}`+(b.value===!0?" q-date--dark q-dark":"")+(t.bordered===!0?" q-date--bordered":"")+(t.square===!0?" q-date--square no-border-radius":"")+(t.flat===!0?" q-date--flat no-shadow":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-date--readonly":"")}),ae=p(()=>t.color||"primary"),re=p(()=>t.textColor||"white"),be=p(()=>t.emitImmediately===!0&&t.multiple!==!0&&t.range!==!0),Re=p(()=>Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue!==null&&t.modelValue!==void 0?[t.modelValue]:[]),Y=p(()=>Re.value.filter(e=>typeof e=="string").map(e=>je(e,z.value,T.value)).filter(e=>e.dateHash!==null&&e.day!==null&&e.month!==null&&e.year!==null)),ie=p(()=>{const e=a=>je(a,z.value,T.value);return Re.value.filter(a=>Et(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:e(a.from),to:e(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),we=p(()=>t.calendar!=="persian"?e=>new Date(e.year,e.month-1,e.day):e=>{const a=_t(e.year,e.month,e.day);return new Date(a.gy,a.gm-1,a.gd)}),Be=p(()=>t.calendar==="persian"?W:(e,a,s)=>ta(new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),a===void 0?z.value:a,s===void 0?T.value:s,e.year,e.timezoneOffset)),ve=p(()=>Y.value.length+ie.value.reduce((e,a)=>e+1+aa(we.value(a.to),we.value(a.from)),0)),Ze=p(()=>{if(t.title!==void 0&&t.title!==null&&t.title.length>0)return t.title;if(O.value!==null){const s=O.value.init,u=we.value(s);return T.value.daysShort[u.getDay()]+", "+T.value.monthsShort[s.month-1]+" "+s.day+ce+"?"}if(ve.value===0)return ce;if(ve.value>1)return`${ve.value} ${T.value.pluralDay}`;const e=Y.value[0],a=we.value(e);return isNaN(a.valueOf())===!0?ce:T.value.headerTitle!==void 0?T.value.headerTitle(a,e):T.value.daysShort[a.getDay()]+", "+T.value.monthsShort[e.month-1]+" "+e.day}),Vt=p(()=>Y.value.concat(ie.value.map(a=>a.from)).sort((a,s)=>a.year-s.year||a.month-s.month)[0]),Tt=p(()=>Y.value.concat(ie.value.map(a=>a.to)).sort((a,s)=>s.year-a.year||s.month-a.month)[0]),et=p(()=>{if(t.subtitle!==void 0&&t.subtitle!==null&&t.subtitle.length>0)return t.subtitle;if(ve.value===0)return ce;if(ve.value>1){const e=Vt.value,a=Tt.value,s=T.value.monthsShort;return s[e.month-1]+(e.year!==a.year?" "+e.year+ce+s[a.month-1]+" ":e.month!==a.month?ce+s[a.month-1]:"")+" "+a.year}return Y.value[0].year}),$e=p(()=>{const e=[w.iconSet.datetime.arrowLeft,w.iconSet.datetime.arrowRight];return w.lang.rtl===!0?e.reverse():e}),tt=p(()=>t.firstDayOfWeek!==void 0?Number(t.firstDayOfWeek):T.value.firstDayOfWeek),qt=p(()=>{const e=T.value.daysShort,a=tt.value;return a>0?e.slice(a,7).concat(e.slice(0,a)):e}),N=p(()=>{const e=g.value;return t.calendar!=="persian"?new Date(e.year,e.month,0).getDate():Ee(e.year,e.month)}),It=p(()=>typeof t.eventColor=="function"?t.eventColor:()=>t.eventColor),H=p(()=>{if(t.navigationMinYearMonth===void 0)return null;const e=t.navigationMinYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),P=p(()=>{if(t.navigationMaxYearMonth===void 0)return null;const e=t.navigationMaxYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),Qe=p(()=>{const e={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return H.value!==null&&H.value.year>=g.value.year&&(e.year.prev=!1,H.value.year===g.value.year&&H.value.month>=g.value.month&&(e.month.prev=!1)),P.value!==null&&P.value.year<=g.value.year&&(e.year.next=!1,P.value.year===g.value.year&&P.value.month<=g.value.month&&(e.month.next=!1)),e}),xe=p(()=>{const e={};return Y.value.forEach(a=>{const s=J(a);e[s]===void 0&&(e[s]=[]),e[s].push(a.day)}),e}),at=p(()=>{const e={};return ie.value.forEach(a=>{const s=J(a.from),u=J(a.to);if(e[s]===void 0&&(e[s]=[]),e[s].push({from:a.from.day,to:s===u?a.to.day:void 0,range:a}),s<u){let i;const{year:C,month:c}=a.from,_=c<12?{year:C,month:c+1}:{year:C+1,month:1};for(;(i=J(_))<=u;)e[i]===void 0&&(e[i]=[]),e[i].push({from:void 0,to:i===u?a.to.day:void 0,range:a}),_.month++,_.month>12&&(_.year++,_.month=1)}}),e}),fe=p(()=>{if(O.value===null)return;const{init:e,initHash:a,final:s,finalHash:u}=O.value,[i,C]=a<=u?[e,s]:[s,e],c=J(i),_=J(C);if(c!==Q.value&&_!==Q.value)return;const V={};return c===Q.value?(V.from=i.day,V.includeFrom=!0):V.from=1,_===Q.value?(V.to=C.day,V.includeTo=!0):V.to=N.value,V}),Q=p(()=>J(g.value)),Mt=p(()=>{const e={};if(t.options===void 0){for(let s=1;s<=N.value;s++)e[s]=!0;return e}const a=typeof t.options=="function"?t.options:s=>t.options.includes(s);for(let s=1;s<=N.value;s++){const u=Q.value+"/"+le(s);e[s]=a(u)}return e}),Ot=p(()=>{const e={};if(t.events===void 0)for(let a=1;a<=N.value;a++)e[a]=!1;else{const a=typeof t.events=="function"?t.events:s=>t.events.includes(s);for(let s=1;s<=N.value;s++){const u=Q.value+"/"+le(s);e[s]=a(u)===!0&&It.value(u)}}return e}),Ht=p(()=>{let e,a;const{year:s,month:u}=g.value;if(t.calendar!=="persian")e=new Date(s,u-1,1),a=new Date(s,u-1,0).getDate();else{const i=_t(s,u,1);e=new Date(i.gy,i.gm-1,i.gd);let C=u-1,c=s;C===0&&(C=12,c--),a=Ee(c,C)}return{days:e.getDay()-tt.value-1,endDay:a}}),ot=p(()=>{const e=[],{days:a,endDay:s}=Ht.value,u=a<0?a+7:a;if(u<6)for(let c=s-u;c<=s;c++)e.push({i:c,fill:!0});const i=e.length;for(let c=1;c<=N.value;c++){const _={i:c,event:Ot.value[c],classes:[]};Mt.value[c]===!0&&(_.in=!0,_.flat=!0),e.push(_)}if(xe.value[Q.value]!==void 0&&xe.value[Q.value].forEach(c=>{const _=i+c-1;Object.assign(e[_],{selected:!0,unelevated:!0,flat:!1,color:ae.value,textColor:re.value})}),at.value[Q.value]!==void 0&&at.value[Q.value].forEach(c=>{if(c.from!==void 0){const _=i+c.from-1,V=i+(c.to||N.value)-1;for(let Ue=_;Ue<=V;Ue++)Object.assign(e[Ue],{range:c.range,unelevated:!0,color:ae.value,textColor:re.value});Object.assign(e[_],{rangeFrom:!0,flat:!1}),c.to!==void 0&&Object.assign(e[V],{rangeTo:!0,flat:!1})}else if(c.to!==void 0){const _=i+c.to-1;for(let V=i;V<=_;V++)Object.assign(e[V],{range:c.range,unelevated:!0,color:ae.value,textColor:re.value});Object.assign(e[_],{flat:!1,rangeTo:!0})}else{const _=i+N.value-1;for(let V=i;V<=_;V++)Object.assign(e[V],{range:c.range,unelevated:!0,color:ae.value,textColor:re.value})}}),fe.value!==void 0){const c=i+fe.value.from-1,_=i+fe.value.to-1;for(let V=c;V<=_;V++)e[V].color=ae.value,e[V].editRange=!0;fe.value.includeFrom===!0&&(e[c].editRangeFrom=!0),fe.value.includeTo===!0&&(e[_].editRangeTo=!0)}g.value.year===U.value.year&&g.value.month===U.value.month&&(e[i+U.value.day-1].today=!0);const C=e.length%7;if(C>0){const c=7-C;for(let _=1;_<=c;_++)e.push({i:_,fill:!0})}return e.forEach(c=>{let _="q-date__calendar-item ";c.fill===!0?_+="q-date__calendar-item--fill":(_+=`q-date__calendar-item--${c.in===!0?"in":"out"}`,c.range!==void 0&&(_+=` q-date__range${c.rangeTo===!0?"-to":c.rangeFrom===!0?"-from":""}`),c.editRange===!0&&(_+=` q-date__edit-range${c.editRangeFrom===!0?"-from":""}${c.editRangeTo===!0?"-to":""}`),(c.range!==void 0||c.editRange===!0)&&(_+=` text-${c.color}`)),c.classes=_}),e}),Pt=p(()=>t.disable===!0?{"aria-disabled":"true"}:t.readonly===!0?{"aria-readonly":"true"}:{});j(()=>t.modelValue,e=>{if(ne===e)ne=0;else{const{year:a,month:s}=nt(z.value,T.value);ue(a,s)}}),j(B,()=>{he.value!==null&&k.$el.contains(document.activeElement)===!0&&he.value.focus()}),j(()=>g.value.year,e=>{v("navigation",{year:e,month:g.value.month})}),j(()=>g.value.month,e=>{v("navigation",{year:g.value.year,month:e})}),j(te,e=>{ct(e,T.value,"mask"),z.value=e}),j(xt,e=>{ct(z.value,e,"locale"),T.value=e});function st(){const e=U.value,a=xe.value[J(e)];(a===void 0||a.includes(e.day)===!1)&&Ye(e),Fe(e.year,e.month)}function Rt(e){yt(e)===!0&&(B.value=e)}function Bt(e,a){["month","year"].includes(e)&&(e==="month"?it:Ae)(a===!0?-1:1)}function Fe(e,a){B.value="Calendar",ue(e,a)}function Qt(e,a){if(t.range===!1||!e){O.value=null;return}const s=Object.assign({...g.value},e),u=a!==void 0?Object.assign({...g.value},a):s;O.value={init:s,initHash:W(s),final:u,finalHash:W(u)},Fe(s.year,s.month)}function lt(){return t.calendar==="persian"?"YYYY/MM/DD":t.mask}function je(e,a,s){return oa(e,a,s,t.calendar,{hour:0,minute:0,second:0,millisecond:0})}function nt(e,a){const s=Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue?[t.modelValue]:[];if(s.length===0)return rt();const u=s[s.length-1],i=je(u.from!==void 0?u.from:u,e,a);return i.dateHash===null?rt():i}function rt(){let e,a;if(t.defaultYearMonth!==void 0){const s=t.defaultYearMonth.split("/");e=parseInt(s[0],10),a=parseInt(s[1],10)}else{const s=U.value!==void 0?U.value:E();e=s.year,a=s.month}return{year:e,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:e+"/"+le(a)+"/01"}}function it(e){let a=g.value.year,s=Number(g.value.month)+e;s===13?(s=1,a++):s===0&&(s=12,a--),ue(a,s),be.value===!0&&De("month")}function Ae(e){const a=Number(g.value.year)+e;ue(a,g.value.month),be.value===!0&&De("year")}function Ft(e){ue(e,g.value.month),B.value=t.defaultView==="Years"?"Months":"Calendar",be.value===!0&&De("year")}function jt(e){ue(g.value.year,e),B.value="Calendar",be.value===!0&&De("month")}function At(e,a){const s=xe.value[a];(s!==void 0&&s.includes(e.day)===!0?Le:Ye)(e)}function oe(e){return{year:e.year,month:e.month,day:e.day}}function ue(e,a){H.value!==null&&e<=H.value.year&&(e=H.value.year,a<H.value.month&&(a=H.value.month)),P.value!==null&&e>=P.value.year&&(e=P.value.year,a>P.value.month&&(a=P.value.month));const s=e+"/"+le(a)+"/01";s!==g.value.dateHash&&(ke.value=g.value.dateHash<s==(w.lang.rtl!==!0)?"left":"right",e!==g.value.year&&(He.value=ke.value),mt(()=>{Se.value=e-e%se-(e<0?se:0),Object.assign(g.value,{year:e,month:a,day:1,dateHash:s})}))}function ut(e,a,s){const u=e!==null&&e.length===1&&t.multiple===!1?e[0]:e;ne=u;const{reason:i,details:C}=dt(a,s);v("update:modelValue",u,i,C)}function De(e){const a=Y.value[0]!==void 0&&Y.value[0].dateHash!==null?{...Y.value[0]}:{...g.value};mt(()=>{a.year=g.value.year,a.month=g.value.month;const s=t.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Ee(a.year,a.month);a.day=Math.min(Math.max(1,a.day),s);const u=de(a);ne=u;const{details:i}=dt("",a);v("update:modelValue",u,e,i)})}function dt(e,a){return a.from!==void 0?{reason:`${e}-range`,details:{...oe(a.target),from:oe(a.from),to:oe(a.to)}}:{reason:`${e}-day`,details:oe(a)}}function de(e,a,s){return e.from!==void 0?{from:Be.value(e.from,a,s),to:Be.value(e.to,a,s)}:Be.value(e,a,s)}function Ye(e){let a;if(t.multiple===!0)if(e.from!==void 0){const s=W(e.from),u=W(e.to),i=Y.value.filter(c=>c.dateHash<s||c.dateHash>u),C=ie.value.filter(({from:c,to:_})=>_.dateHash<s||c.dateHash>u);a=i.concat(C).concat(e).map(c=>de(c))}else{const s=Re.value.slice();s.push(de(e)),a=s}else a=de(e);ut(a,"add",e)}function Le(e){if(t.noUnset===!0)return;let a=null;if(t.multiple===!0&&Array.isArray(t.modelValue)===!0){const s=de(e);e.from!==void 0?a=t.modelValue.filter(u=>u.from!==void 0?u.from!==s.from&&u.to!==s.to:!0):a=t.modelValue.filter(u=>u!==s),a.length===0&&(a=null)}ut(a,"remove",e)}function ct(e,a,s){const u=Y.value.concat(ie.value).map(i=>de(i,e,a)).filter(i=>i.from!==void 0?i.from.dateHash!==null&&i.to.dateHash!==null:i.dateHash!==null);v("update:modelValue",(t.multiple===!0?u:u[0])||null,s)}function Yt(){if(t.minimal!==!0)return f("div",{class:"q-date__header "+S.value},[f("div",{class:"relative-position"},[f(ge,{name:"q-transition--fade"},()=>f("div",{key:"h-yr-"+et.value,class:"q-date__header-subtitle q-date__header-link "+(B.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:d.value,...m("vY",{onClick(){B.value="Years"},onKeyup(e){e.keyCode===13&&(B.value="Years")}})},[et.value]))]),f("div",{class:"q-date__header-title relative-position flex no-wrap"},[f("div",{class:"relative-position col"},[f(ge,{name:"q-transition--fade"},()=>f("div",{key:"h-sub"+Ze.value,class:"q-date__header-title-label q-date__header-link "+(B.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:d.value,...m("vC",{onClick(){B.value="Calendar"},onKeyup(e){e.keyCode===13&&(B.value="Calendar")}})},[Ze.value]))]),t.todayBtn===!0?f($,{class:"q-date__header-today self-start",icon:w.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:d.value,onClick:st}):null])])}function ze({label:e,type:a,key:s,dir:u,goTo:i,boundaries:C,cls:c}){return[f("div",{class:"row items-center q-date__arrow"},[f($,{round:!0,dense:!0,size:"sm",flat:!0,icon:$e.value[0],tabindex:d.value,disable:C.prev===!1,...m("go-#"+a,{onClick(){i(-1)}})})]),f("div",{class:"relative-position overflow-hidden flex flex-center"+c},[f(ge,{name:"q-transition--jump-"+u},()=>f("div",{key:s},[f($,{flat:!0,dense:!0,noCaps:!0,label:e,tabindex:d.value,...m("view#"+a,{onClick:()=>{B.value=a}})})]))]),f("div",{class:"row items-center q-date__arrow"},[f($,{round:!0,dense:!0,size:"sm",flat:!0,icon:$e.value[1],tabindex:d.value,disable:C.next===!1,...m("go+#"+a,{onClick(){i(1)}})})])]}const Lt={Calendar:()=>[f("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[f("div",{class:"q-date__navigation row items-center no-wrap"},ze({label:T.value.months[g.value.month-1],type:"Months",key:g.value.month,dir:ke.value,goTo:it,boundaries:Qe.value.month,cls:" col"}).concat(ze({label:g.value.year,type:"Years",key:g.value.year,dir:He.value,goTo:Ae,boundaries:Qe.value.year,cls:""}))),f("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},qt.value.map(e=>f("div",{class:"q-date__calendar-item"},[f("div",e)]))),f("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[f(ge,{name:"q-transition--slide-"+ke.value},()=>f("div",{key:Q.value,class:"q-date__calendar-days fit"},ot.value.map(e=>f("div",{class:e.classes},[e.in===!0?f($,{class:e.today===!0?"q-date__today":"",dense:!0,flat:e.flat,unelevated:e.unelevated,color:e.color,textColor:e.textColor,label:e.i,tabindex:d.value,...m("day#"+e.i,{onClick:()=>{zt(e.i)},onMouseover:()=>{Ut(e.i)}})},e.event!==!1?()=>f("div",{class:"q-date__event bg-"+e.event}):null):f("div",""+e.i)]))))])])],Months(){const e=g.value.year===U.value.year,a=u=>H.value!==null&&g.value.year===H.value.year&&H.value.month>u||P.value!==null&&g.value.year===P.value.year&&P.value.month<u,s=T.value.monthsShort.map((u,i)=>{const C=g.value.month===i+1;return f("div",{class:"q-date__months-item flex flex-center"},[f($,{class:e===!0&&U.value.month===i+1?"q-date__today":null,flat:C!==!0,label:u,unelevated:C,color:C===!0?ae.value:null,textColor:C===!0?re.value:null,tabindex:d.value,disable:a(i+1),...m("month#"+i,{onClick:()=>{jt(i+1)}})})])});return t.yearsInMonthView===!0&&s.unshift(f("div",{class:"row no-wrap full-width"},[ze({label:g.value.year,type:"Years",key:g.value.year,dir:He.value,goTo:Ae,boundaries:Qe.value.year,cls:" col"})])),f("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},s)},Years(){const e=Se.value,a=e+se,s=[],u=i=>H.value!==null&&H.value.year>i||P.value!==null&&P.value.year<i;for(let i=e;i<=a;i++){const C=g.value.year===i;s.push(f("div",{class:"q-date__years-item flex flex-center"},[f($,{key:"yr"+i,class:U.value.year===i?"q-date__today":null,flat:!C,label:i,dense:!0,unelevated:C,color:C===!0?ae.value:null,textColor:C===!0?re.value:null,tabindex:d.value,disable:u(i),...m("yr#"+i,{onClick:()=>{Ft(i)}})})]))}return f("div",{class:"q-date__view q-date__years flex flex-center"},[f("div",{class:"col-auto"},[f($,{round:!0,dense:!0,flat:!0,icon:$e.value[0],tabindex:d.value,disable:u(e),...m("y-",{onClick:()=>{Se.value-=se}})})]),f("div",{class:"q-date__years-content col self-stretch row items-center"},s),f("div",{class:"col-auto"},[f($,{round:!0,dense:!0,flat:!0,icon:$e.value[1],tabindex:d.value,disable:u(a),...m("y+",{onClick:()=>{Se.value+=se}})})])])}};function zt(e){const a={...g.value,day:e};if(t.range===!1){At(a,Q.value);return}if(O.value===null){const s=ot.value.find(i=>i.fill!==!0&&i.i===e);if(t.noUnset!==!0&&s.range!==void 0){Le({target:a,from:s.range.from,to:s.range.to});return}if(s.selected===!0){Le(a);return}const u=W(a);O.value={init:a,initHash:u,final:a,finalHash:u},v("rangeStart",oe(a))}else{const s=O.value.initHash,u=W(a),i=s<=u?{from:O.value.init,to:a}:{from:a,to:O.value.init};O.value=null,Ye(s===u?a:{target:a,...i}),v("rangeEnd",{from:oe(i.from),to:oe(i.to)})}}function Ut(e){if(O.value!==null){const a={...g.value,day:e};Object.assign(O.value,{final:a,finalHash:W(a)})}}return Object.assign(k,{setToday:st,setView:Rt,offsetCalendar:Bt,setCalendarTo:Fe,setEditingRange:Qt}),()=>{const e=[f("div",{class:"q-date__content col relative-position"},[f(ge,{name:"q-transition--fade"},Lt[B.value])])],a=Ct(o.default);return a!==void 0&&e.push(f("div",{class:"q-date__actions"},a)),t.name!==void 0&&t.disable!==!0&&Oe(e,"push"),f("div",{class:Dt.value,...Pt.value},[Yt(),f("div",{ref:he,class:"q-date__main col column",tabindex:-1},e)])}}});const To=X({name:"OTDComponent",setup(){const t=ee(),o=Date.now(),v=pt.formatDate(o,"MM/DD");return{reStore:t,otditems:h([]),promptOTDDate:h(!1),otddate:h(Date.now()),otdlabel:h(v),otdtype:h("selected")}},mounted(){this.init()},methods:{async init(){const t=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=t[this.otdtype],console.log(this.otditems)},async load(t){console.log("load",this.otditems[t].text),console.log("load",this.otditems[t]);const o=this.reStore.preferences.langVoiceKey;console.log("OTD load ",o),this.reStore.loadPageId(this.otditems[t].pages[0].pageid,o),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const t=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=t.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=pt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(t){console.log("otdOptionsCB",this.otdtype);const o=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=o[this.otdtype]}}}),qo=n("div",{class:"text-h6"},"Select Date",-1),Io={class:"q-gutter-y-sm column"},Mo={class:""};function Oo(t,o,v,k,w,b){return x(),A(G,null,[l(bt,{modelValue:t.promptOTDDate,"onUpdate:modelValue":o[2]||(o[2]=m=>t.promptOTDDate=m),persistent:""},{default:r(()=>[l(I,{style:{"min-width":"350px"}},{default:r(()=>[l(L,{align:"center"},{default:r(()=>[qo]),_:1}),l(Vo,{modelValue:t.otddate,"onUpdate:modelValue":o[0]||(o[0]=m=>t.otddate=m),minimal:""},null,8,["modelValue"]),l(St,{align:"center",class:"text-white"},{default:r(()=>[qe(l($,{flat:"",label:"Cancel"},null,512),[[Ie]]),qe(l($,{flat:"",label:"Update OTD date",onClick:o[1]||(o[1]=m=>this.updateOTDDate())},null,512),[[Ie]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(I,{flat:""},{default:r(()=>[l(L,null,{default:r(()=>[l(Ce,{padding:"",class:"rounded-borders"},{default:r(()=>[l(ye,{"header-style":{border:"1px solid gray"},label:"On This Day"},{default:r(()=>[n("div",Io,[l(_e,{class:"bg-primary text-white rounded-borders q-my-md"},{default:r(()=>[l($,{dark:"",standout:"",onClick:o[3]||(o[3]=m=>t.promptOTDDate=!0)},{default:r(()=>[q(y(t.otdlabel),1)]),_:1}),l(We),l(ua,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":o[4]||(o[4]=m=>this.otdtype=m),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:o[5]||(o[5]=m=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),n("div",Mo,[(x(!0),A(G,null,pe(t.otditems,(m,d)=>(x(),R(I,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:t.otditems,"onUpdate:modelValue":o[6]||(o[6]=S=>t.otditems=S),key:d,onClick:S=>this.load(d)},{default:r(()=>[q(y(d)+". "+y(m.year)+" "+y(m.text),1)]),_:2},1032,["modelValue","onClick"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Ho=Z(To,[["render",Oo]]);const Po=X({name:"CurrentAssignment",setup(){const t=ee();return{reStore:t,ck:h("-"),goal:h("-"),created:h("-"),id:h("-"),points:h("-"),pages:h([]),pgIdx:h(t.courses.pgIdx),title:h("")}},mounted(){console.log("CurrentAssignment mounted"),j(this.reStore.courses,async(t,o)=>{try{console.log("CurrentAssignment.watcher");const v=t.ck,k=t.aid;this.id=k,this.ck=v,this.goal=this.reStore.courses[v].assignments[k].goal,this.created=this.reStore.courses[v].assignments[k].created,this.points=this.reStore.courses[v].assignments[k].points;try{const w=this.reStore.courses[v].assignments[k].pages.length;console.log("pages.length ",w)}catch{this.reStore.courses[v].assignments[k].pages=[]}this.pages=this.reStore.courses[v].assignments[k].pages,this.pgIdx=this.reStore.courses.pgIdx,this.title=this.reStore.courses[v].assignments[k].title}catch(v){console.log(v)}},{immediate:!0,deep:!0})},methods:{save(){console.log("save"),this.reStore.saveCurrentAssignment()},nextPage(){this.reStore.nextPage()}}}),Ro={class:"text-weight-bolder text-center q-pa-md"},Bo={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Qo={width:"100%"},Fo=n("td",null,"Title",-1),jo={style:{width:"50%"}},Ao=n("td",null,"Course-Key",-1),Yo={style:{width:"50%"}},Lo=n("td",null,"Assgmnt Id",-1),zo={style:{width:"50%"}},Uo=n("td",null,"Created",-1),Ko={style:{width:"50%"}},Eo=n("td",null,"Goal",-1),No={style:{width:"50%"}},Wo=n("td",null,"Pages",-1);function Jo(t,o,v,k,w,b){return x(),R(I,{flat:""},{default:r(()=>[l(L,null,{default:r(()=>[n("div",Ro,[q(y(this.title)+" ",1),l(D,{name:"save",onClick:this.save,size:"sm"},null,8,["onClick"])]),n("div",Bo,[n("table",Qo,[n("tr",null,[Fo,n("td",jo,y(this.title),1)]),n("tr",null,[Ao,n("td",Yo,y(this.ck),1)]),n("tr",null,[Lo,n("td",zo,y(this.id),1)]),n("tr",null,[Uo,n("td",Ko,y(this.created),1)]),n("tr",null,[Eo,n("td",No,y(this.goal),1)]),n("tr",null,[Wo,n("td",{style:{width:"50%",cursor:"pointer"},onClick:o[0]||(o[0]=m=>this.nextPage())},y(this.pgIdx+1)+" / "+y(this.pages.length),1)])])])]),_:1})]),_:1})}var Go=Z(Po,[["render",Jo]]);const Xo=X({name:"CurrentCourse",setup(){return{reStore:ee(),title:h(""),assignmentCount:h(0),courseKey:h(""),created:h(""),enrollmentCount:h(0),owner:h("")}},mounted(){console.log("CurrentCourse mounted"),j(this.reStore.courses,async(t,o)=>{try{if(this.reStore.courses.ck!=="undefined"){const v=this.reStore.courses.ck;console.log("CurrentCourse ",v),this.title=this.reStore.courses[v].title,this.courseKey=this.reStore.courses[v].courseKey,this.created=this.reStore.courses[v].created,this.assignmentCount=Object.keys(this.reStore.courses[v].assignments).length,this.enrollmentCount=Object.keys(this.reStore.courses[v].enrollment).length,this.owner=this.reStore.courses[v].owner}}catch(v){console.log(v)}},{immediate:!0,deep:!0})},methods:{dummy(){console.log("dummy")}}}),Zo={class:"text-weight-bolder text-center q-pa-md"},es={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},ts={width:"100%"},as=n("td",null,"Title",-1),os={style:{width:"50%"}},ss=n("td",null,"Course-Key",-1),ls={style:{width:"50%"}},ns=n("td",null,"Created",-1),rs={style:{width:"50%"}},is=n("td",null,"Owner",-1),us={style:{width:"50%"}},ds=n("td",null,"Assignments",-1),cs={style:{width:"50%"}},ms=n("td",null,"Enrollment",-1),hs={style:{width:"50%"}};function vs(t,o,v,k,w,b){return x(),R(I,{flat:""},{default:r(()=>[l(L,null,{default:r(()=>[n("div",Zo,y(this.title),1),n("div",es,[n("table",ts,[n("tr",null,[as,n("td",os,y(this.title),1)]),n("tr",null,[ss,n("td",ls,y(this.courseKey),1)]),n("tr",null,[ns,n("td",rs,y(this.created),1)]),n("tr",null,[is,n("td",us,y(this.owner.slice(0,10)),1)]),n("tr",null,[ds,n("td",cs,y(this.assignmentCount),1)]),n("tr",null,[ms,n("td",hs,y(this.enrollmentCount),1)])])])]),_:1})]),_:1})}var fs=Z(Xo,[["render",vs]]);const gs=X({name:"TeacherLayout",components:{CurrentCourse:fs,DocumentationComponent:da,SearchComponent:ba,ImagesComponent:go,BookmarksComponent:So,OTDComponent:Ho,CurrentAssignment:Go,PreferencesComponent:ca,CurrentPage:io},setup(){const t=h(!1),o=h(!1),v=ee(),k=v.userSnapshot.preferences,w=h(null),b=h(null);return{step:h(1),reStore:v,initialValues:h(k),scrollAreaRHS:w,scrollAreaLHS:b,leftDrawerOpen:t,rightDrawerOpen:o,toggleLeftDrawer(){t.value=!t.value},toggleRightDrawer(){o.value=!o.value}}},mounted(){ht.isActive||(ht.toggle(),Ke("primary","#333"),Ke("secondary",this.initialValues.secondaryColor),Ke("accent",this.initialValues.accentColor))},methods:{scrollTopRHS(){this.scrollAreaRHS.setScrollPosition("vertical",0)},scrollTopLHS(){this.scrollAreaLHS.setScrollPosition("vertical",0)}}}),_s={class:"dashboard-wrapper"},ps=n("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),ys=n("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1);function Cs(t,o,v,k,w,b){const m=F("router-link"),d=F("router-view"),S=F("DocumentationComponent"),M=F("SearchComponent"),E=F("ImagesComponent"),ne=F("BookmarksComponent"),Me=F("OTDComponent"),Oe=F("CurrentCourse"),he=F("CurrentAssignment"),z=F("CurrentPage"),T=F("PreferencesComponent");return x(),R(Xt,{view:"hHh LpR fFf"},{default:r(()=>[l(Jt,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:r(()=>[l(_e,null,{default:r(()=>[l($,{dense:"",flat:"",round:"",icon:"menu",onClick:t.toggleLeftDrawer},null,8,["onClick"]),l(Nt,null,{default:r(()=>[l(m,{to:"/teacher"},{default:r(()=>[l(D,{name:"home",color:"white"},{default:r(()=>[l(K,null,{default:r(()=>[q("Return to My Teacher Page")]),_:1})]),_:1})]),_:1})]),_:1}),this.reStore.authenticated?(x(),R($,{key:0,onClick:o[0]||(o[0]=te=>this.reStore.router.push("/student")),icon:"switch_account"},{default:r(()=>[l(K,null,{default:r(()=>[q(" Switch between Teacher or Student role ")]),_:1})]),_:1})):me("",!0),this.reStore.authenticated?(x(),R($,{key:1,icon:"logout",onClick:o[1]||(o[1]=te=>this.reStore.logout())})):me("",!0),l($,{dense:"",flat:"",round:"",icon:"menu",onClick:t.toggleRightDrawer},null,8,["onClick"])]),_:1}),l(Wt,{align:"left",class:"hidden"},{default:r(()=>[l(Ve,{to:"/logo",label:"Logo"}),l(Ve,{to:"/teaching",label:"Teaching"}),l(Ve,{to:"/taking",label:"Taking"}),l(Ve,{to:"/gradebook",label:"Gradebook"})]),_:1})]),_:1}),l(Gt,{class:"container-fluid"},{default:r(()=>[n("div",_s,[l(d)]),l(vt,{bordered:"","show-if-above":"",modelValue:t.leftDrawerOpen,"onUpdate:modelValue":o[2]||(o[2]=te=>t.leftDrawerOpen=te),side:"left"},{default:r(()=>[l(_e,{flat:"",class:"bg-primary text-white"},{default:r(()=>[l($,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Te,{dark:"",vertical:"",inset:""}),l($,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Te,{dark:"",vertical:"",inset:""}),l(We),l($,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopLHS},{default:r(()=>[l(K,null,{default:r(()=>[q("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),ps,l(ft,{visible:t.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaLHS"},{default:r(()=>[l(S),l(M),l(E),l(ne),l(Me)]),_:1},8,["visible"])]),_:1},8,["modelValue"]),l(vt,{bordered:"","show-if-above":"",modelValue:t.rightDrawerOpen,"onUpdate:modelValue":o[3]||(o[3]=te=>t.rightDrawerOpen=te),side:"right"},{default:r(()=>[l(_e,{flat:"",class:"bg-primary text-white"},{default:r(()=>[l($,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Te,{dark:"",vertical:"",inset:""}),l($,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Te,{dark:"",vertical:"",inset:""}),l(We),l($,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopRHS},{default:r(()=>[l(K,null,{default:r(()=>[q("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),ys,l(ft,{visible:t.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaRHS"},{default:r(()=>[l(Oe),l(he),l(z),l(T,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var js=Z(gs,[["render",Cs]]);export{js as default};
