import{g as H,h,i as d,z as E,aI as $e,B as oe,r as i,D as q,l as Ie,p as N,au as Ve,j as se,x as w,q as qe,d as M,_ as O,o as v,ar as I,a,w as l,Q as y,e as o,ac as z,ad as p,aH as Le,c as x,as as P,aJ as le,aG as U,aF as Re,f as $}from"./index.78a676e7.js";import{Q as ne,a as Qe,b as Be,c as B,d as De,e as D,f as Z,g as ze,h as Pe}from"./QLayout.ce5c5d89.js";import{Q as ie}from"./QTooltip.89c551b5.js";import{u as W}from"./re-store.85360c9b.js";import{a as V,Q as L,i as Ue,C as j,h as Fe}from"./ClosePopup.7af857bc.js";import{a as Ae,b as Ne,c as ee,d as F,e as He,D as Ee,P as Me}from"./DocumentationComponent.3e7d6060.js";import{Q as Oe}from"./QInput.5411c5f7.js";import{d as G,f as K,c as We,e as Ge,u as te,g as Ke}from"./use-dark.5b3fe84b.js";import{Q as Je}from"./QImg.dc4dc54c.js";import"./selection.d86d172b.js";import"./position-engine.df40faee.js";import"./use-portal.5ee59a50.js";import"./firebase.8ff914f0.js";import"./use-key-composition.e60e63df.js";import"./QCheckbox.48a01146.js";const Xe={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},A={xs:2,sm:4,md:8,lg:16,xl:24};var ae=H({name:"QSeparator",props:{...G,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const t=E(),f=K(e,t.proxy.$q),m=h(()=>e.vertical===!0?"vertical":"horizontal"),_=h(()=>` q-separator--${m.value}`),g=h(()=>e.inset!==!1?`${_.value}-${Xe[e.inset]}`:""),n=h(()=>`q-separator${_.value}${g.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(f.value===!0?" q-separator--dark":"")),u=h(()=>{const r={};if(e.size!==void 0&&(r[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const T=e.spaced===!0?`${A.md}px`:e.spaced in A?`${A[e.spaced]}px`:e.spaced,C=e.vertical===!0?["Left","Right"]:["Top","Bottom"];r[`margin${C[0]}`]=r[`margin${C[1]}`]=T}return r});return()=>d("hr",{class:n.value,style:u.value,"aria-orientation":m.value})}});const k=$e({}),Ye=Object.keys(oe);var re=H({name:"QExpansionItem",props:{...oe,...We,...G,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Ge,"click","afterShow","afterHide"],setup(e,{slots:t,emit:f}){const{proxy:{$q:m}}=E(),_=K(e,m),g=i(e.modelValue!==null?e.modelValue:e.defaultOpened),n=i(null),u=te(),{show:r,hide:T,toggle:C}=Ke({showing:g});let S,c;const ue=h(()=>`q-expansion-item q-item-type q-expansion-item--${g.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),ce=h(()=>{if(e.contentInsetLevel===void 0)return null;const s=m.lang.rtl===!0?"Right":"Left";return{["padding"+s]:e.contentInsetLevel*56+"px"}}),R=h(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),ge=h(()=>{const s={};return Ye.forEach(b=>{s[b]=e[b]}),s}),he=h(()=>R.value===!0||e.expandIconToggle!==!0),me=h(()=>e.expandedIcon!==void 0&&g.value===!0?e.expandedIcon:e.expandIcon||m.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),pe=h(()=>e.disable!==!0&&(R.value===!0||e.expandIconToggle===!0)),fe=h(()=>({expanded:g.value===!0,detailsId:e.targetUid,toggle:C,show:r,hide:T})),J=h(()=>{const s=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:m.lang.label[g.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":g.value===!0?"true":"false","aria-controls":u,"aria-label":s}});q(()=>e.group,s=>{c!==void 0&&c(),s!==void 0&&Y()});function ve(s){R.value!==!0&&C(s),f("click",s)}function _e(s){s.keyCode===13&&X(s,!0)}function X(s,b){b!==!0&&n.value!==null&&n.value.focus(),C(s),qe(s)}function Se(){f("afterShow")}function be(){f("afterHide")}function Y(){S===void 0&&(S=te()),g.value===!0&&(k[e.group]=S);const s=q(g,Q=>{Q===!0?k[e.group]=S:k[e.group]===S&&delete k[e.group]}),b=q(()=>k[e.group],(Q,Te)=>{Te===S&&Q!==void 0&&Q!==S&&T()});c=()=>{s(),b(),k[e.group]===S&&delete k[e.group],c=void 0}}function Ce(){const s={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},b=[d(w,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&g.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:me.value})];return pe.value===!0&&(Object.assign(s,{tabindex:0,...J.value,onClick:X,onKeyup:_e}),b.unshift(d("div",{ref:n,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),d(F,s,()=>b)}function ye(){let s;return t.header!==void 0?s=[].concat(t.header(fe.value)):(s=[d(F,()=>[d(ee,{lines:e.labelLines},()=>e.label||""),e.caption?d(ee,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&s[e.switchToggleSide===!0?"push":"unshift"](d(F,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>d(w,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&s[e.switchToggleSide===!0?"unshift":"push"](Ce()),s}function ke(){const s={ref:"item",style:e.headerStyle,class:e.headerClass,dark:_.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return he.value===!0&&(s.clickable=!0,s.onClick=ve,Object.assign(s,R.value===!0?ge.value:J.value)),d(Ne,s,ye)}function we(){return N(d("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:ce.value,id:u},se(t.default)),[[Ve,g.value]])}function xe(){const s=[ke(),d(Ae,{duration:e.duration,onShow:Se,onHide:be},we)];return e.expandSeparator===!0&&s.push(d(ae,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:_.value}),d(ae,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:_.value})),s}return e.group!==void 0&&Y(),Ie(()=>{c!==void 0&&c()}),()=>d("div",{class:ue.value},[d("div",{class:"q-expansion-item__container relative-position"},xe())])}}),de=H({name:"QList",props:{...G,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:t}){const f=E(),m=K(e,f.proxy.$q),_=h(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(m.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>d(e.tag,{class:_.value},se(t.default))}});const Ze=M({name:"SearchComponent",setup(){const e=W(),t=i("");return{reStore:e,searchTerms:t,searchSize:i(e.preferences.resLimit),searchResults:i([]),promptSearchSize:i(!1)}},mounted(){q(this.reStore.preferences,async(e,t)=>{console.log("watcher ",e,t),this.searchSize=e.resLimit})},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchTerms.splice(e,1)},load(e){console.log(e),console.log(this.searchResults[e]);const t=this.reStore.langVoices[this.reStore.preferences.langVoice];this.reStore.loadPageId(this.searchResults[e].pageid,t)},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoice];this.reStore.wiki.setLang(e.langName);const t=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",t.results.length),this.searchResults=t.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),je=o("div",{class:"text-h6"},"Search Results Size",-1),et={class:"q-gutter-y-sm column"},tt={key:0},at={class:"row cardheader ptr justify-between"},ot=["onClick"],st={class:"history-remove"};function lt(e,t,f,m,_,g){return v(),I(P,null,[a(Fe,{modelValue:e.promptSearchSize,"onUpdate:modelValue":t[2]||(t[2]=n=>e.promptSearchSize=n),persistent:""},{default:l(()=>[a(V,{style:{"min-width":"350px"}},{default:l(()=>[a(L,{align:"center"},{default:l(()=>[je]),_:1}),a(L,{class:"q-pt-none",align:"center"},{default:l(()=>[a(He,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":t[0]||(t[0]=n=>e.searchSize=n)},null,8,["modelValue"])]),_:1}),a(Ue,{align:"center",class:"text-primary"},{default:l(()=>[N(a(y,{flat:"",label:"Cancel"},null,512),[[j]]),N(a(y,{flat:"",label:"Update results size",onClick:t[1]||(t[1]=n=>this.updateSearchSize())},null,512),[[j]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(V,{flat:""},{default:l(()=>[a(L,null,{default:l(()=>[a(de,{padding:"",bordered:"",class:"rounded-borders"},{default:l(()=>[a(re,{"header-style":{border:"0px solid gray"},label:"Search & Results"},{default:l(()=>[o("div",et,[a(ne,{class:"bg-primary text-white rounded-borders q-my-md"},{default:l(()=>[a(y,{dark:"",standout:"",onClick:t[3]||(t[3]=n=>e.promptSearchSize=!0)},{default:l(()=>[z(p(this.searchResults.length)+" ",1),a(ie,null,{default:l(()=>[z("Change results limit ("+p(this.searchSize)+")",1)]),_:1})]),_:1}),a(Oe,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":t[6]||(t[6]=n=>e.searchTerms=n),"input-class":"text-right",class:"q-ml-md",onKeyup:[t[7]||(t[7]=n=>this.update()),t[8]||(t[8]=Le(n=>this.doSearch(),["enter"]))]},{append:l(()=>[e.searchTerms===""?(v(),x(w,{key:0,name:"search",onClick:t[4]||(t[4]=n=>this.doSearch())})):(v(),x(w,{key:1,name:"clear",class:"cursor-pointer",onClick:t[5]||(t[5]=n=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(v(),I("div",tt,[(v(!0),I(P,null,le(this.searchResults,(n,u)=>(v(),x(V,{class:"cardcontainer",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":t[9]||(t[9]=r=>this.searchResults=r),key:u},{default:l(()=>[o("div",at,[o("span",{class:"history-title col-grow",onClick:r=>this.load(u)},p(u)+". "+p(n.title.slice(0,25)),9,ot),o("span",st,[a(w,{class:"primary",size:e.xl,color:e.primary,name:"close",onClick:r=>this.remove(u)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):U("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var nt=O(Ze,[["render",lt]]);const it=M({name:"CurrentPage",props:{},setup(e){const t=W();return{reStore:t,courseid:i("---"),assignmentTitle:i("---"),pageTitle:i(t.page.pageTitle),lang:i(t.page.langVoice.longName),imgIdx:i(t.page.imgIdx),imgs:i(t.page.imgs),imgTot:i(t.page.imgs.length),imgFit:i(t.page.imgFit),guideWords:i(t.page.guideWords),mapCoords:i(t.page.mapCoords),pageid:i(t.page.pageid),pctReplace:i(t.page.pctReplace),canonicalUrl:i(t.page.canonicalUrl),props:e}},mounted(){console.log(this.props),q(this.reStore.page,async(e,t)=>{console.log("watcher ",e,t),this.pageTitle=e.pageTitle,this.imgIdx=e.imgIdx,this.imgs=e.imgs,this.imgTot=e.imgs.length,this.imgFit=e.imgFit,this.guideWords=e.guideWords,this.mapCoords=e.mapCoords,this.pageid=e.pageid,this.lang=e.langVoice.longName,this.pctReplace=e.pctReplace,this.canonicalUrl=e.canonicalUrl})},methods:{speak(){console.log("CurrentPage.speak",this.reStore),this.reStore.speak()},cycleFitMode(){const e=["scale-down","cover"];let t=e.indexOf(this.imgFit);t+=1,t>e.length-1&&(t=0),this.imgFit=e[t],this.reStore.page.imgFit=this.imgFit,console.log("fit: ",this.imgFit)},imgCB(e,t){console.log(e,t),this.reStore.page.imgIdx=e},loadURL(e){console.log("loadURL ",e),window.open(e,"_blank")},mapCB(){const e="https://maps.google.com/?ll="+this.mapCoords.split(",")[0]+","+this.mapCoords.split(",")[1];window.open(e,"_blank")},edit(e,t){console.log("edit: ",e,t)},remove(e,t){console.log("remove: ",e,t),this.imgs.splice(e,1),this.reStore.page.imgs.splice(e,1)}}}),rt={class:"text-weight-bolder text-center q-pa-md"},dt={style:{border:"1px solid gray","border-radius":"5px"}},ut={width:"100%"},ct=o("td",{style:{width:"50%"}},null,-1),gt=o("tr",null,[o("td"),o("td",null,"Speak Text")],-1),ht={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},mt={width:"100%"},pt=o("td",null,"WP Page Id",-1),ft={style:{width:"50%"}},vt=o("td",null,"Language",-1),_t={style:{width:"50%"}},St=o("td",null,"Current Image",-1),bt={style:{width:"50%"}},Ct=o("td",null,"Image Fit",-1),yt=o("td",null,"Guide Words",-1),kt={style:{width:"50%"}},wt=o("td",null,"Percent Replace",-1),xt=o("td",null,"Map Coords",-1),Tt={key:0},$t={class:"row cardheader ptr justify-between"},It={class:"history-remove"},Vt={class:"history-remove"};function qt(e,t,f,m,_,g){return v(),I(P,null,[a(V,{flat:""},{default:l(()=>[a(L,null,{default:l(()=>[o("div",rt,p(this.pageTitle),1),o("div",dt,[o("table",ut,[o("tr",null,[ct,o("td",null,[a(y,{round:"",class:"q-pa-md",icon:"volume_up",color:"secondary",onClick:t[0]||(t[0]=n=>this.speak())})])]),gt])]),o("div",ht,[o("table",mt,[o("tr",null,[pt,o("td",ft,[o("a",{class:"bold_ptr",onClick:t[1]||(t[1]=n=>this.loadURL(this.canonicalUrl))},p(this.pageid),1)])]),o("tr",null,[vt,o("td",_t,p(this.lang),1)]),o("tr",null,[St,o("td",bt,p(this.imgIdx+1)+" / "+p(this.imgTot),1)]),o("tr",{class:"ptr",onClick:t[2]||(t[2]=(...n)=>this.cycleFitMode&&this.cycleFitMode(...n))},[Ct,o("td",null,p(this.imgFit),1)]),o("tr",null,[yt,o("td",kt,p(this.guideWords.replaceAll(",",", ")),1)]),o("tr",null,[wt,o("td",null,p(this.pctReplace)+" %",1)]),o("tr",null,[xt,o("td",{onClick:t[3]||(t[3]=(...n)=>this.mapCB&&this.mapCB(...n))},p(this.mapCoords),1)])])])]),_:1})]),_:1}),a(V,{flat:""},{default:l(()=>[a(L,null,{default:l(()=>[a(de,{padding:"",bordered:"",class:"rounded-borders"},{default:l(()=>[a(re,{"header-style":{border:"0px solid gray"},label:"Page Images"},{default:l(()=>[this.imgs.length?(v(),I("div",Tt,[(v(!0),I(P,null,le(this.imgs,(n,u)=>(v(),x(V,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.searchResults,"onUpdate:modelValue":t[4]||(t[4]=r=>this.searchResults=r),key:u},{default:l(()=>[o("div",$t,[o("span",It,[a(w,{name:"edit",onClick:r=>this.edit(u,n)},null,8,["onClick"])]),z(" "+p(n.cap.slice(0,25))+" ",1),o("span",Vt,[a(w,{name:"close",onClick:r=>this.remove(u,n)},null,8,["onClick"])])]),a(Je,{class:"cardimage",onClick:r=>this.imgCB(u,n),src:n.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])):U("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Lt=O(it,[["render",qt]]);const Rt=M({name:"TeacherLayout",components:{DocumentationComponent:Ee,SearchComponent:nt,PreferencesComponent:Me,CurrentPage:Lt},setup(){const e=i(!1),t=i(!1),f=W(),m=f.preferences;return{step:i(1),reStore:f,initialValues:i(m),leftDrawerOpen:e,rightDrawerOpen:t,toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){t.value=!t.value}}}}),Qt=o("img",{src:"https://readingedgeca.s3.us-west-1.amazonaws.com/static/pub/img/reading_edge_200x200.png"},null,-1),Bt={class:"dashboard-wrapper"};function Dt(e,t,f,m,_,g){const n=$("router-link"),u=$("DocumentationComponent"),r=$("SearchComponent"),T=$("PreferencesComponent"),C=$("CurrentPage"),S=$("router-view");return v(),x(Pe,{view:"hHh lpR fFf"},{default:l(()=>[a(De,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:l(()=>[a(ne,null,{default:l(()=>[a(y,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),a(Qe,null,{default:l(()=>[a(n,{to:"/"},{default:l(()=>[a(Re,{size:"25px"},{default:l(()=>[Qt]),_:1})]),_:1})]),_:1}),this.reStore.authenticated?(v(),x(y,{key:0,onClick:t[0]||(t[0]=c=>this.reStore.router.push("/student")),icon:"switch_account"},{default:l(()=>[a(ie,null,{default:l(()=>[z(" Switch between Teacher or Student role ")]),_:1})]),_:1})):U("",!0),this.reStore.authenticated?(v(),x(y,{key:1,icon:"logout",onClick:t[1]||(t[1]=c=>this.reStore.logout())})):U("",!0),a(y,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1}),a(Be,{align:"left",class:"hidden"},{default:l(()=>[a(B,{to:"/logo",label:"Logo"}),a(B,{to:"/teaching",label:"Teaching"}),a(B,{to:"/taking",label:"Taking"}),a(B,{to:"/gradebook",label:"Gradebook"})]),_:1})]),_:1}),a(D,{"show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":t[2]||(t[2]=c=>e.leftDrawerOpen=c),side:"left",bordered:""},null,8,["modelValue"]),a(D,{"show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":t[3]||(t[3]=c=>e.rightDrawerOpen=c),side:"right",bordered:""},null,8,["modelValue"]),a(ze,{class:"container-fluid"},{default:l(()=>[a(D,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":t[4]||(t[4]=c=>e.leftDrawerOpen=c),side:"left"},{default:l(()=>[a(Z,{visible:e.visible,style:{height:"95vh","max-width":"350px"}},{default:l(()=>[a(u),a(r),a(T,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"]),a(D,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":t[5]||(t[5]=c=>e.rightDrawerOpen=c),side:"right"},{default:l(()=>[a(Z,{visible:e.visible,style:{height:"95vh","max-width":"350px"}},{default:l(()=>[a(C)]),_:1},8,["visible"])]),_:1},8,["modelValue"]),o("div",Bt,[a(S)])]),_:1})]),_:1})}var Yt=O(Rt,[["render",Dt]]);export{Yt as default};
