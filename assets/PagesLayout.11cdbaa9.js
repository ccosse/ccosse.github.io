import{d as f,v as u,n as Q,_ as h,r as m,o as s,c as P,w as r,E as g,I as x,R as D,V as $,a as t,S as b,F as I,P as d,Q as i}from"./index.a75cd14a.js";import{Q as S}from"./QSpace.028a487c.js";import{a as V,Q as y,b as c}from"./QDrawer.fdfaea24.js";import{Q as B,a as A}from"./QLayout.792d9355.js";import{u as w}from"./store.cfec8d35.js";import{Q as O}from"./QCard.1958fbd9.js";import{Q as L}from"./QScrollArea.7e6e42c9.js";import{T}from"./TileComponent.f17abcfb.js";import{W as U}from"./WPComponent.17f6660e.js";import"./use-prevent-scroll.bc690f37.js";import"./scroll.ab0372d2.js";import"./use-model-toggle.a1d88a19.js";import"./use-dark.66025dda.js";import"./TouchPan.8f8a14fa.js";import"./touch.d2ed2c9a.js";import"./firebase.f7873474.js";import"./axios.84ae42e4.js";import"./QImg.fd8c3e05.js";import"./QCardSection.ec128f6d.js";import"./QMenu.e8aaec7b.js";import"./position-engine.61bb1987.js";import"./focusout.10e086b2.js";import"./use-form.9c806992.js";import"./ClosePopup.2ad056f1.js";import"./QKnob.0fc5878f.js";import"./QSelect.2ce7a9de.js";import"./QInput.528bd173.js";import"./uid.42677368.js";import"./QExpansionItem.a537fdf6.js";import"./QBar.65eb28d8.js";import"./QTooltip.09e64520.js";import"./QList.c9aaf181.js";import"./transform.9aa67f3e.js";import"./selectAll.be636dd1.js";const R=f({name:"PagePager",components:{TileComponent:T},props:[],setup(){const o=u(null);return{store:w(),pagePagerScrollArea:o}},mounted(){Q(this.store.currentAssignment.pages,async(o,e)=>{console.log("newPage detected, scrolling to 1.0"),this.pagePagerScrollArea.setScrollPercentage("vertical",1)})},methods:{newPageCB(){this.store.newPage(),this.pagePagerScrollArea.setScrollPercentage("vertical",1)}}}),W=I("div",{class:"text-center text-h6"},"My Pages",-1),F={key:0};function N(o,e,v,C,_,k){const p=m("TileComponent");return s(),P(L,{style:{height:"95vh"},ref:"pagePagerScrollArea"},{default:r(()=>[W,this.store.currentCourse?(s(),g("span",F,[(s(!0),g(x,null,D(this.store.currentAssignment.pages,(a,l)=>(s(),g("span",{key:l},[t(p,{tileData:a,imgUrl:a.imgs&&a.imgs.length>0?a.imgs[0].url:"",targetUrl:null,ck:this.store.ck,aid:this.store.aid,pgIdx:l,imgIdx:0,tileType:"page"},null,8,["tileData","imgUrl","ck","aid","pgIdx"])]))),128))])):$("",!0),t(O,{flat:"",bordered:"",class:"q-ma-md q-pa-md cursor-pointer tile-component flex flex-center",onClick:e[0]||(e[0]=a=>this.newPageCB())},{default:r(()=>[t(b,{name:"add",class:"text-h1"})]),_:1})]),_:1},512)}var j=h(R,[["render",N]]);const q=f({name:"PagesLayout",components:{PagePager:j,WPComponent:U},setup(){const o=u(!1),e=u(!1);return{store:w(),leftDrawerOpen:o,toggleLeftDrawer(){o.value=!o.value},rightDrawerOpen:e,toggleRightDrawer(){e.value=!e.value}}},mounted(){d.isActive||d.toggle()},methods:{goBack(){this.store.pgIdx!==null?(this.store.pgIdx=null,this.store.imgIdx=null):(this.store.pgIdx=null,this.store.imgIdx=null,this.store.router.push("/assignments"))}}});function E(o,e,v,C,_,k){const p=m("WPComponent"),a=m("PagePager"),l=m("router-view");return s(),P(B,{view:"hHh lpR fFf"},{default:r(()=>[t(y,{bordered:"",class:"bg-positive text-white"},{default:r(()=>[t(V,null,{default:r(()=>[t(i,{flat:"",round:"",icon:"menu",onClick:o.toggleLeftDrawer},null,8,["onClick"]),t(i,{flat:"",round:"",icon:"arrow_back",onClick:e[0]||(e[0]=n=>this.goBack())}),t(S),t(i,{flat:"",round:"",icon:"logout",onClick:e[1]||(e[1]=n=>this.store.logout())}),t(i,{flat:"",round:"",icon:"menu",onClick:o.toggleRightDrawer},null,8,["onClick"])]),_:1})]),_:1}),t(c,{"show-if-above":"",modelValue:o.leftDrawerOpen,"onUpdate:modelValue":e[2]||(e[2]=n=>o.leftDrawerOpen=n),side:"left",bordered:""},{default:r(()=>[t(p)]),_:1},8,["modelValue"]),t(c,{"show-if-above":"",modelValue:o.rightDrawerOpen,"onUpdate:modelValue":e[3]||(e[3]=n=>o.rightDrawerOpen=n),side:"right",bordered:""},{default:r(()=>[t(a)]),_:1},8,["modelValue"]),t(A,null,{default:r(()=>[t(l)]),_:1})]),_:1})}var De=h(q,[["render",E]]);export{De as default};
