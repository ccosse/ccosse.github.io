import{i as v,g as Je,h as y,j as Ct,z as St,d as G,r as h,D as F,_ as X,o as x,au as Y,a as s,w as r,p as qe,Q as $,e as n,af as T,ag as p,aK as Kt,c as B,x as V,av as J,aL as _e,aJ as Te,al as Et,am as fe,G as mt,P as ht,s as Ke,f as Q}from"./index.253a3b1c.js";import{Q as le}from"./QTooltip.0d43d735.js";import{Q as ge,a as Nt,b as Wt,c as De,d as Jt,e as vt,f as ft,g as Gt,h as Xt}from"./QLayout.2226940d.js";import{Q as ye,a as Ve}from"./QExpansionItem.f15be7f4.js";import{u as Z,s as Zt,a as gt,p as se,t as ea,c as _t,f as ta,g as aa,j as Ee,_ as oa,d as yt}from"./re-store.34770ae8.js";import{a as I,Q as A,i as kt,C as Ie,h as bt,u as la,b as sa,c as na}from"./ClosePopup.f846b179.js";import{a as ra,u as ia,b as ua,D as da,P as ca}from"./DocumentationComponent.b17d5d2d.js";import{Q as ma}from"./QInput.839ec049.js";import{d as wt,f as $t}from"./use-dark.56b0b7f7.js";import{Q as Ge}from"./QImg.53e6eae3.js";import"./position-engine.af21caf1.js";import"./selection.2225356b.js";import"./use-portal.f0eaeb37.js";import"./QSlideTransition.92f6b184.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";import"./use-key-composition.fa281c53.js";import"./QCheckbox.532e2e10.js";const ha=v("div",{class:"q-space"});var We=Je({name:"QSpace",setup(){return()=>ha}}),pe=Je({name:"QList",props:{...wt,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(t,{slots:o}){const m=St(),C=$t(t,m.proxy.$q),w=y(()=>"q-list"+(t.bordered===!0?" q-list--bordered":"")+(t.dense===!0?" q-list--dense":"")+(t.separator===!0?" q-list--separator":"")+(C.value===!0?" q-list--dark":"")+(t.padding===!0?" q-list--padding":""));return()=>v(t.tag,{class:w.value},Ct(o.default))}});const va=G({name:"SearchComponent",setup(){const t=Z(),o=h("");return{reStore:t,searchTerms:o,searchSize:h(t.preferences.resLimit),searchResults:h([]),promptSearchSize:h(!1)}},mounted(){F(this.reStore.preferences,async(t,o)=>{console.log("watcher ",t,o),this.searchSize=t.resLimit})},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(t){this.searchResults.splice(t,1)},load(t){console.log(t),console.log(this.searchResults[t]);const o=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("calling loadPageId ",this.searchResults[t].pageid,o),this.reStore.loadPageId(this.searchResults[t].pageid,o)},async doSearch(){const t=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("doSearch ",t),this.reStore.wiki.setLang(t.langName);const o=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",o.results.length),this.searchResults=o.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),fa=n("div",{class:"text-h6"},"Search Results Size",-1),ga={class:"q-gutter-y-sm column"},_a={key:0},ya={class:"row cardheader ptr justify-between"},pa=["onClick"],Ca={class:"history-remove"};function Sa(t,o,m,C,w,b){return x(),Y(J,null,[s(bt,{modelValue:t.promptSearchSize,"onUpdate:modelValue":o[2]||(o[2]=u=>t.promptSearchSize=u),persistent:""},{default:r(()=>[s(I,{style:{"min-width":"350px"}},{default:r(()=>[s(A,{align:"center"},{default:r(()=>[fa]),_:1}),s(A,{class:"q-pt-none",align:"center"},{default:r(()=>[s(ra,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:t.searchSize,"onUpdate:modelValue":o[0]||(o[0]=u=>t.searchSize=u)},null,8,["modelValue"])]),_:1}),s(kt,{align:"center",class:"text-primary"},{default:r(()=>[qe(s($,{flat:"",label:"Cancel"},null,512),[[Ie]]),qe(s($,{flat:"",label:"Update results size",onClick:o[1]||(o[1]=u=>this.updateSearchSize())},null,512),[[Ie]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(I,{flat:""},{default:r(()=>[s(A,null,{default:r(()=>[s(pe,{padding:"",class:"rounded-borders"},{default:r(()=>[s(ye,{"header-style":{border:"1px solid gray"},label:"Search & Results"},{default:r(()=>[n("div",ga,[s(ge,{class:"bg-primary text-white rounded-borders q-my-md"},{default:r(()=>[s($,{dark:"",standout:"",onClick:o[3]||(o[3]=u=>t.promptSearchSize=!0)},{default:r(()=>[T(p(this.searchResults.length)+" ",1),s(le,null,{default:r(()=>[T("Change results limit ("+p(this.searchSize)+")",1)]),_:1})]),_:1}),s(ma,{dark:"",dense:"",standout:"",modelValue:t.searchTerms,"onUpdate:modelValue":o[6]||(o[6]=u=>t.searchTerms=u),"input-class":"text-right",class:"q-ml-md",onKeyup:[o[7]||(o[7]=u=>this.update()),o[8]||(o[8]=Kt(u=>this.doSearch(),["enter"]))]},{append:r(()=>[t.searchTerms===""?(x(),B(V,{key:0,name:"search",onClick:o[4]||(o[4]=u=>this.doSearch())})):(x(),B(V,{key:1,name:"clear",class:"cursor-pointer",onClick:o[5]||(o[5]=u=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(x(),Y("div",_a,[(x(!0),Y(J,null,_e(this.searchResults,(u,g)=>(x(),B(I,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":o[9]||(o[9]=k=>this.searchResults=k),key:g},{default:r(()=>[n("div",ya,[n("span",{class:"history-title col-grow",onClick:k=>this.load(g)},p(g)+". "+p(u.title.slice(0,25)),9,pa),n("span",Ca,[s(V,{class:"primary",size:t.xl,color:t.primary,name:"close",onClick:k=>this.remove(g)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):Te("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var ka=X(va,[["render",Sa]]);const ba=G({name:"CurrentPage",props:{},setup(t){return{reStore:Z(),ck:h("-"),aid:h("-"),pageTitle:h(),langVoiceKey:h(),imgIdx:h(0),imgs:h([]),imgTot:h(0),imgFit:h("-"),guideWords:h("-"),mapCoords:h("-"),pageid:h("-"),pctReplace:h(),canonicalUrl:h(),props:t}},mounted(){console.log(this.props),F(this.reStore.courses,async(t,o)=>{try{console.log("CurrentPage watcher",this.reStore.courses);const m=this.reStore.courses.ck,C=this.reStore.courses.aid,w=this.reStore.courses[m].assignments[C].pgIdx,b=this.reStore.page;b&&(console.log("CurrentPage ",b),this.pageTitle=b.pageTitle,this.imgIdx=b.imgIdx,this.imgs=b.imgs,this.imgTot=b.imgs.length,this.imgFit=b.imgFit,this.guideWords=b.guideWords,this.mapCoords=b.mapCoords,this.pageid=b.pageid,this.langVoiceKey=b.langVoiceKey,this.pctReplace=b.pctReplace,this.canonicalUrl=b.canonicalUrl),this.aid=C,this.ck=m}catch(m){console.log(m)}},{immediate:!0,deep:!0})},methods:{speak(){console.log("CurrentPage.speak",this.reStore),this.reStore.speak()},cycleFitMode(){const t=["scale-down","cover"];let o=t.indexOf(this.imgFit);o+=1,o>t.length-1&&(o=0),this.imgFit=t[o],this.reStore.page.imgFit=this.imgFit,console.log("fit: ",this.imgFit)},nextImg(){this.imgIdx=this.imgIdx+1>this.imgs.length-1?0:this.imgIdx+1,this.reStore.page.imgIdx=this.imgIdx,this.reStore.courses.imgIdx=this.imgIdx},imgCB(t,o){console.log(t,o),this.reStore.page.imgIdx=t},loadURL(t){console.log("loadURL ",t),window.open(t,"_blank")},mapCB(){const t="https://maps.google.com/?ll="+this.mapCoords.split(",")[0]+","+this.mapCoords.split(",")[1];window.open(t,"_blank")},saveImage(t,o){console.log("saveImage: ",t,o),this.reStore.saveImage(o)},saveCurrentImage(){const t=this.imgs[this.imgIdx];console.log("saveCurrentImage: ",t),this.reStore.saveImage(t)},remove(t,o){console.log("remove: ",t,o),this.imgs.splice(t,1),this.reStore.page.imgs.splice(t,1)},toggleText(){Zt("#slideTextDiv").classed("hidden")?gt("#slideTextDiv").classed("hidden",!1):gt("#slideTextDiv").classed("hidden",!0)},addBookmark(){console.log("addBookmark"),this.reStore.saveBookmark()},newPage(){console.log("CurrentPage newPageCB "),this.reStore.newPage()}}}),wa={class:"text-weight-bolder text-center q-pa-md"},$a={style:{border:"1px solid gray","border-radius":"5px"}},xa={width:"100%"},Da=n("td",{style:{width:"50%","text-align":"center"}},null,-1),Va={style:{"text-align":"center"}},qa=n("tr",null,[n("td"),n("td",{style:{"text-align":"center"}},"Speak Text")],-1),Ta={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Ia={width:"100%"},Ma=n("td",null,"Course-Key",-1),Oa={style:{width:"50%"}},Ha={class:"ptr float-left"},Ba=n("td",null,"Assgmnt Id",-1),Ra={style:{width:"50%"}},Pa={class:"ptr float-left"},Fa=n("td",null,"WP Page Id",-1),ja={style:{width:"50%"}},Qa=n("td",null,"Language",-1),Aa={style:{width:"50%"}},Ya={class:"float-left"},La=n("td",null,"Images",-1),za={class:"float-left"},Ua={class:"float-right"},Ka=n("td",null,"Image Fit",-1),Ea={class:"align-left"},Na=n("td",null,"Guide Words",-1),Wa={style:{width:"50%"}},Ja=n("td",null,"Percent Replace",-1),Ga={class:"float-left"},Xa=n("td",null,"Map Coords",-1),Za={class:"float-left"},eo=n("td",null,"Toggle Text",-1),to={key:0},ao={class:"row cardheader justify-between"},oo={class:"history-remove"},lo={class:"history-remove ptr"};function so(t,o,m,C,w,b){return x(),Y(J,null,[s(I,{flat:""},{default:r(()=>[s(A,null,{default:r(()=>[n("div",wa,[T(p(this.pageTitle)+" ",1),s(V,{name:"add_circle",onClick:this.newPage,size:"sm"},null,8,["onClick"])]),n("div",$a,[n("table",xa,[n("tr",null,[Da,n("td",Va,[s($,{round:"",class:"q-pa-md",icon:"volume_up",color:"secondary",onClick:o[0]||(o[0]=u=>this.speak())})])]),qa])]),n("div",Ta,[n("table",Ia,[n("tr",null,[Ma,n("td",Oa,[n("a",Ha,p(this.ck),1)])]),n("tr",null,[Ba,n("td",Ra,[n("a",Pa,p(this.aid),1)])]),n("tr",null,[Fa,n("td",ja,[n("a",{class:"ptr float-left",onClick:o[1]||(o[1]=u=>this.loadURL(this.canonicalUrl))},p(this.pageid),1),s(V,{name:"bookmark",onClick:this.addBookmark,class:"float-right"},null,8,["onClick"])])]),n("tr",null,[Qa,n("td",Aa,[n("span",Ya,p(this.langVoiceKey),1),s(V,{class:"float-right",name:"translate"})])]),n("tr",null,[La,n("td",{style:{width:"50%"},onClick:o[2]||(o[2]=(...u)=>this.nextImg&&this.nextImg(...u)),class:"ptr"},[n("span",za,p(this.imgIdx+1)+" / "+p(this.imgTot),1),n("span",Ua,[s(V,{name:"bookmark",onClick:this.saveCurrentImage},null,8,["onClick"])])])]),n("tr",{class:"ptr",onClick:o[3]||(o[3]=(...u)=>this.cycleFitMode&&this.cycleFitMode(...u))},[Ka,n("td",null,[n("span",Ea,p(this.imgFit),1),s(V,{class:"float-right",name:"fit_screen"})])]),n("tr",null,[Na,n("td",Wa,[T(p(this.guideWords.replaceAll(",",", "))+" ",1),s(V,{class:"float-right",name:"tune"})])]),n("tr",null,[Ja,n("td",null,[n("span",Ga,p(this.pctReplace)+" %",1),s(V,{class:"float-right",name:"tune"})])]),n("tr",null,[Xa,n("td",{onClick:o[4]||(o[4]=(...u)=>this.mapCB&&this.mapCB(...u)),class:"ptr"},[n("span",Za,p(this.mapCoords),1),s(V,{class:"float-right",name:"place"})])]),n("tr",null,[eo,n("td",{onClick:o[5]||(o[5]=(...u)=>this.toggleText&&this.toggleText(...u)),class:"ptr"},[s(V,{class:"float-right",name:"article"})])])])])]),_:1})]),_:1}),s(I,{flat:""},{default:r(()=>[s(A,null,{default:r(()=>[s(pe,{padding:"",class:"rounded-borders"},{default:r(()=>[s(ye,{"header-style":{border:"1px solid gray"},label:"Page Images"},{default:r(()=>[this.imgs.length?(x(),Y("div",to,[(x(!0),Y(J,null,_e(this.imgs,(u,g)=>(x(),B(I,{bordered:"",class:"q-ma-sm",flat:"",modelValue:this.imgs,"onUpdate:modelValue":o[6]||(o[6]=k=>this.imgs=k),key:g},{default:r(()=>[n("div",ao,[n("span",oo,[s(V,{name:"bookmark",onClick:k=>this.saveImage(g,u)},null,8,["onClick"]),s(V,{name:"article",onClick:this.toggleText},{default:r(()=>[s(le,null,{default:r(()=>[T("Convenience button to toggle current text ")]),_:1})]),_:1},8,["onClick"]),s(V,{name:"fit_screen",onClick:this.cycleFitMode},{default:r(()=>[s(le,null,{default:r(()=>[T("Convenience button to toggle current image-fit mode ")]),_:1})]),_:1},8,["onClick"])]),n("span",null,p(u.cap.slice(0,25)),1),n("span",lo,[s(V,{name:"close",onClick:k=>this.remove(g,u)},null,8,["onClick"])])]),s(Ge,{class:"cardimage",onClick:k=>this.imgCB(g,u),src:u.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])):Te("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var no=X(ba,[["render",so]]);const ro=G({name:"ImagesComponent",setup(){return{reStore:Z()}},mounted(){F(this.reStore.userSnapshot.images,async(t,o)=>{console.log("watcher ",t,o)})},methods:{imgCB(t,o){this.reStore.router.push("/teacher/editor"),console.log(t,o);const m={url:o.url,cap:o.desc};this.reStore.page.imgs.push(m),this.reStore.page.imgIdx=this.reStore.page.imgs.length-1},remove(t,o){console.log(t,o),this.reStore.removeImage(t)}}}),io={class:"row cardheader justify-between"},uo={class:"history-remove hidden"},co={class:"history-remove ptr"};function mo(t,o,m,C,w,b){return x(),B(I,{flat:""},{default:r(()=>[s(A,null,{default:r(()=>[s(pe,{padding:"",class:"rounded-borders"},{default:r(()=>[s(ye,{"header-style":{border:"1px solid gray"},label:"My Images"},{default:r(()=>[n("div",null,[(x(!0),Y(J,null,_e(this.reStore.userSnapshot.images,(u,g)=>(x(),B(I,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":o[0]||(o[0]=k=>this.reStore.userSnapshot.images=k),key:g},{default:r(()=>[n("div",io,[n("span",uo,[s(V)]),T(" "+p(u.desc.slice(0,25))+" ",1),n("span",co,[s(V,{name:"close",onClick:k=>this.remove(g,u)},null,8,["onClick"])])]),s(Ge,{class:"cardimage",onClick:k=>this.imgCB(g,u),src:u.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var ho=X(ro,[["render",mo]]);const vo=G({name:"BookmarksComponent",setup(){return{reStore:Z()}},mounted(){F(this.reStore.userSnapshot.bookmarks,async(t,o)=>{console.log("watcher ",t,o)})},methods:{imgCB(t,o){this.reStore.page.imgs=JSON.parse(JSON.stringify(o.imgs)),this.reStore.router.push("/teacher/editor")},remove(t,o){console.log(t,o),this.reStore.removeBookmark(t)}}}),fo={class:"row cardheader justify-between"},go={class:"history-remove hidden"},_o={class:"history-remove ptr"};function yo(t,o,m,C,w,b){return x(),B(I,{flat:""},{default:r(()=>[s(A,null,{default:r(()=>[s(pe,{padding:"",class:"rounded-borders"},{default:r(()=>[s(ye,{"header-style":{border:"1px solid gray"},label:"My bookmarks"},{default:r(()=>[n("div",null,[(x(!0),Y(J,null,_e(this.reStore.userSnapshot.bookmarks,(u,g)=>(x(),B(I,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":o[0]||(o[0]=k=>this.reStore.userSnapshot.bookmarks=k),key:g},{default:r(()=>[n("div",fo,[n("span",go,[s(V)]),T(" "+p(u.pageTitle.slice(0,25))+" ",1),n("span",_o,[s(V,{name:"close",onClick:k=>this.remove(g,u)},null,8,["onClick"])])]),s(Ge,{class:"cardimage",onClick:k=>this.imgCB(g,u),src:u.imgs[0].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var po=X(vo,[["render",yo]]);const Co=["gregorian","persian"],So={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:t=>Co.includes(t),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},ko=["update:modelValue"];function N(t){return t.year+"/"+se(t.month)+"/"+se(t.day)}function bo(t,o){const m=y(()=>t.disable!==!0&&t.readonly!==!0),C=y(()=>t.editable===!0?0:-1),w=y(()=>{const g=[];return t.color!==void 0&&g.push(`bg-${t.color}`),t.textColor!==void 0&&g.push(`text-${t.textColor}`),g.join(" ")});function b(){return t.locale!==void 0?{...o.lang.date,...t.locale}:o.lang.date}function u(g){const k=new Date,L=g===!0?null:0;if(t.calendar==="persian"){const K=ea(k);return{year:K.jy,month:K.jm,day:K.jd}}return{year:k.getFullYear(),month:k.getMonth()+1,day:k.getDate(),hour:L,minute:L,second:L,millisecond:L}}return{editable:m,tabindex:C,headerClass:w,getLocale:b,getCurrentDate:u}}const oe=20,wo=["Calendar","Years","Months"],pt=t=>wo.includes(t),Ne=t=>/^-?[\d]+\/[0-1]\d$/.test(t),ce=" \u2014 ";function W(t){return t.year+"/"+se(t.month)}var $o=Je({name:"QDate",props:{...So,...la,...wt,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Ne},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Ne},navigationMaxYearMonth:{type:String,validator:Ne},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:pt}},emits:[...ko,"rangeStart","rangeEnd","navigation"],setup(t,{slots:o,emit:m}){const{proxy:C}=St(),{$q:w}=C,b=$t(t,w),{getCache:u}=ia(),{tabindex:g,headerClass:k,getLocale:L,getCurrentDate:K}=bo(t,w);let ne;const Me=sa(t),Oe=na(Me),me=h(null),z=h(st()),q=h(L()),ee=y(()=>st()),xt=y(()=>L()),U=y(()=>K()),f=h(nt(z.value,q.value)),R=h(t.defaultView),Xe=w.lang.rtl===!0?"right":"left",Ce=h(Xe.value),He=h(Xe.value),Be=f.value.year,Se=h(Be-Be%oe-(Be<0?oe:0)),M=h(null),Dt=y(()=>{const e=t.landscape===!0?"landscape":"portrait";return`q-date q-date--${e} q-date--${e}-${t.minimal===!0?"minimal":"standard"}`+(b.value===!0?" q-date--dark q-dark":"")+(t.bordered===!0?" q-date--bordered":"")+(t.square===!0?" q-date--square no-border-radius":"")+(t.flat===!0?" q-date--flat no-shadow":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-date--readonly":"")}),te=y(()=>t.color||"primary"),re=y(()=>t.textColor||"white"),ke=y(()=>t.emitImmediately===!0&&t.multiple!==!0&&t.range!==!0),Re=y(()=>Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue!==null&&t.modelValue!==void 0?[t.modelValue]:[]),j=y(()=>Re.value.filter(e=>typeof e=="string").map(e=>Qe(e,z.value,q.value)).filter(e=>e.dateHash!==null&&e.day!==null&&e.month!==null&&e.year!==null)),ie=y(()=>{const e=a=>Qe(a,z.value,q.value);return Re.value.filter(a=>Et(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:e(a.from),to:e(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),be=y(()=>t.calendar!=="persian"?e=>new Date(e.year,e.month-1,e.day):e=>{const a=_t(e.year,e.month,e.day);return new Date(a.gy,a.gm-1,a.gd)}),Pe=y(()=>t.calendar==="persian"?N:(e,a,l)=>ta(new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),a===void 0?z.value:a,l===void 0?q.value:l,e.year,e.timezoneOffset)),he=y(()=>j.value.length+ie.value.reduce((e,a)=>e+1+aa(be.value(a.to),be.value(a.from)),0)),Ze=y(()=>{if(t.title!==void 0&&t.title!==null&&t.title.length>0)return t.title;if(M.value!==null){const l=M.value.init,d=be.value(l);return q.value.daysShort[d.getDay()]+", "+q.value.monthsShort[l.month-1]+" "+l.day+ce+"?"}if(he.value===0)return ce;if(he.value>1)return`${he.value} ${q.value.pluralDay}`;const e=j.value[0],a=be.value(e);return isNaN(a.valueOf())===!0?ce:q.value.headerTitle!==void 0?q.value.headerTitle(a,e):q.value.daysShort[a.getDay()]+", "+q.value.monthsShort[e.month-1]+" "+e.day}),Vt=y(()=>j.value.concat(ie.value.map(a=>a.from)).sort((a,l)=>a.year-l.year||a.month-l.month)[0]),qt=y(()=>j.value.concat(ie.value.map(a=>a.to)).sort((a,l)=>l.year-a.year||l.month-a.month)[0]),et=y(()=>{if(t.subtitle!==void 0&&t.subtitle!==null&&t.subtitle.length>0)return t.subtitle;if(he.value===0)return ce;if(he.value>1){const e=Vt.value,a=qt.value,l=q.value.monthsShort;return l[e.month-1]+(e.year!==a.year?" "+e.year+ce+l[a.month-1]+" ":e.month!==a.month?ce+l[a.month-1]:"")+" "+a.year}return j.value[0].year}),we=y(()=>{const e=[w.iconSet.datetime.arrowLeft,w.iconSet.datetime.arrowRight];return w.lang.rtl===!0?e.reverse():e}),tt=y(()=>t.firstDayOfWeek!==void 0?Number(t.firstDayOfWeek):q.value.firstDayOfWeek),Tt=y(()=>{const e=q.value.daysShort,a=tt.value;return a>0?e.slice(a,7).concat(e.slice(0,a)):e}),E=y(()=>{const e=f.value;return t.calendar!=="persian"?new Date(e.year,e.month,0).getDate():Ee(e.year,e.month)}),It=y(()=>typeof t.eventColor=="function"?t.eventColor:()=>t.eventColor),O=y(()=>{if(t.navigationMinYearMonth===void 0)return null;const e=t.navigationMinYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),H=y(()=>{if(t.navigationMaxYearMonth===void 0)return null;const e=t.navigationMaxYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),Fe=y(()=>{const e={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return O.value!==null&&O.value.year>=f.value.year&&(e.year.prev=!1,O.value.year===f.value.year&&O.value.month>=f.value.month&&(e.month.prev=!1)),H.value!==null&&H.value.year<=f.value.year&&(e.year.next=!1,H.value.year===f.value.year&&H.value.month<=f.value.month&&(e.month.next=!1)),e}),$e=y(()=>{const e={};return j.value.forEach(a=>{const l=W(a);e[l]===void 0&&(e[l]=[]),e[l].push(a.day)}),e}),at=y(()=>{const e={};return ie.value.forEach(a=>{const l=W(a.from),d=W(a.to);if(e[l]===void 0&&(e[l]=[]),e[l].push({from:a.from.day,to:l===d?a.to.day:void 0,range:a}),l<d){let i;const{year:S,month:c}=a.from,_=c<12?{year:S,month:c+1}:{year:S+1,month:1};for(;(i=W(_))<=d;)e[i]===void 0&&(e[i]=[]),e[i].push({from:void 0,to:i===d?a.to.day:void 0,range:a}),_.month++,_.month>12&&(_.year++,_.month=1)}}),e}),ve=y(()=>{if(M.value===null)return;const{init:e,initHash:a,final:l,finalHash:d}=M.value,[i,S]=a<=d?[e,l]:[l,e],c=W(i),_=W(S);if(c!==P.value&&_!==P.value)return;const D={};return c===P.value?(D.from=i.day,D.includeFrom=!0):D.from=1,_===P.value?(D.to=S.day,D.includeTo=!0):D.to=E.value,D}),P=y(()=>W(f.value)),Mt=y(()=>{const e={};if(t.options===void 0){for(let l=1;l<=E.value;l++)e[l]=!0;return e}const a=typeof t.options=="function"?t.options:l=>t.options.includes(l);for(let l=1;l<=E.value;l++){const d=P.value+"/"+se(l);e[l]=a(d)}return e}),Ot=y(()=>{const e={};if(t.events===void 0)for(let a=1;a<=E.value;a++)e[a]=!1;else{const a=typeof t.events=="function"?t.events:l=>t.events.includes(l);for(let l=1;l<=E.value;l++){const d=P.value+"/"+se(l);e[l]=a(d)===!0&&It.value(d)}}return e}),Ht=y(()=>{let e,a;const{year:l,month:d}=f.value;if(t.calendar!=="persian")e=new Date(l,d-1,1),a=new Date(l,d-1,0).getDate();else{const i=_t(l,d,1);e=new Date(i.gy,i.gm-1,i.gd);let S=d-1,c=l;S===0&&(S=12,c--),a=Ee(c,S)}return{days:e.getDay()-tt.value-1,endDay:a}}),ot=y(()=>{const e=[],{days:a,endDay:l}=Ht.value,d=a<0?a+7:a;if(d<6)for(let c=l-d;c<=l;c++)e.push({i:c,fill:!0});const i=e.length;for(let c=1;c<=E.value;c++){const _={i:c,event:Ot.value[c],classes:[]};Mt.value[c]===!0&&(_.in=!0,_.flat=!0),e.push(_)}if($e.value[P.value]!==void 0&&$e.value[P.value].forEach(c=>{const _=i+c-1;Object.assign(e[_],{selected:!0,unelevated:!0,flat:!1,color:te.value,textColor:re.value})}),at.value[P.value]!==void 0&&at.value[P.value].forEach(c=>{if(c.from!==void 0){const _=i+c.from-1,D=i+(c.to||E.value)-1;for(let Ue=_;Ue<=D;Ue++)Object.assign(e[Ue],{range:c.range,unelevated:!0,color:te.value,textColor:re.value});Object.assign(e[_],{rangeFrom:!0,flat:!1}),c.to!==void 0&&Object.assign(e[D],{rangeTo:!0,flat:!1})}else if(c.to!==void 0){const _=i+c.to-1;for(let D=i;D<=_;D++)Object.assign(e[D],{range:c.range,unelevated:!0,color:te.value,textColor:re.value});Object.assign(e[_],{flat:!1,rangeTo:!0})}else{const _=i+E.value-1;for(let D=i;D<=_;D++)Object.assign(e[D],{range:c.range,unelevated:!0,color:te.value,textColor:re.value})}}),ve.value!==void 0){const c=i+ve.value.from-1,_=i+ve.value.to-1;for(let D=c;D<=_;D++)e[D].color=te.value,e[D].editRange=!0;ve.value.includeFrom===!0&&(e[c].editRangeFrom=!0),ve.value.includeTo===!0&&(e[_].editRangeTo=!0)}f.value.year===U.value.year&&f.value.month===U.value.month&&(e[i+U.value.day-1].today=!0);const S=e.length%7;if(S>0){const c=7-S;for(let _=1;_<=c;_++)e.push({i:_,fill:!0})}return e.forEach(c=>{let _="q-date__calendar-item ";c.fill===!0?_+="q-date__calendar-item--fill":(_+=`q-date__calendar-item--${c.in===!0?"in":"out"}`,c.range!==void 0&&(_+=` q-date__range${c.rangeTo===!0?"-to":c.rangeFrom===!0?"-from":""}`),c.editRange===!0&&(_+=` q-date__edit-range${c.editRangeFrom===!0?"-from":""}${c.editRangeTo===!0?"-to":""}`),(c.range!==void 0||c.editRange===!0)&&(_+=` text-${c.color}`)),c.classes=_}),e}),Bt=y(()=>t.disable===!0?{"aria-disabled":"true"}:t.readonly===!0?{"aria-readonly":"true"}:{});F(()=>t.modelValue,e=>{if(ne===e)ne=0;else{const{year:a,month:l}=nt(z.value,q.value);ue(a,l)}}),F(R,()=>{me.value!==null&&C.$el.contains(document.activeElement)===!0&&me.value.focus()}),F(()=>f.value.year,e=>{m("navigation",{year:e,month:f.value.month})}),F(()=>f.value.month,e=>{m("navigation",{year:f.value.year,month:e})}),F(ee,e=>{ct(e,q.value,"mask"),z.value=e}),F(xt,e=>{ct(z.value,e,"locale"),q.value=e});function lt(){const e=U.value,a=$e.value[W(e)];(a===void 0||a.includes(e.day)===!1)&&Ye(e),je(e.year,e.month)}function Rt(e){pt(e)===!0&&(R.value=e)}function Pt(e,a){["month","year"].includes(e)&&(e==="month"?it:Ae)(a===!0?-1:1)}function je(e,a){R.value="Calendar",ue(e,a)}function Ft(e,a){if(t.range===!1||!e){M.value=null;return}const l=Object.assign({...f.value},e),d=a!==void 0?Object.assign({...f.value},a):l;M.value={init:l,initHash:N(l),final:d,finalHash:N(d)},je(l.year,l.month)}function st(){return t.calendar==="persian"?"YYYY/MM/DD":t.mask}function Qe(e,a,l){return oa(e,a,l,t.calendar,{hour:0,minute:0,second:0,millisecond:0})}function nt(e,a){const l=Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue?[t.modelValue]:[];if(l.length===0)return rt();const d=l[l.length-1],i=Qe(d.from!==void 0?d.from:d,e,a);return i.dateHash===null?rt():i}function rt(){let e,a;if(t.defaultYearMonth!==void 0){const l=t.defaultYearMonth.split("/");e=parseInt(l[0],10),a=parseInt(l[1],10)}else{const l=U.value!==void 0?U.value:K();e=l.year,a=l.month}return{year:e,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:e+"/"+se(a)+"/01"}}function it(e){let a=f.value.year,l=Number(f.value.month)+e;l===13?(l=1,a++):l===0&&(l=12,a--),ue(a,l),ke.value===!0&&xe("month")}function Ae(e){const a=Number(f.value.year)+e;ue(a,f.value.month),ke.value===!0&&xe("year")}function jt(e){ue(e,f.value.month),R.value=t.defaultView==="Years"?"Months":"Calendar",ke.value===!0&&xe("year")}function Qt(e){ue(f.value.year,e),R.value="Calendar",ke.value===!0&&xe("month")}function At(e,a){const l=$e.value[a];(l!==void 0&&l.includes(e.day)===!0?Le:Ye)(e)}function ae(e){return{year:e.year,month:e.month,day:e.day}}function ue(e,a){O.value!==null&&e<=O.value.year&&(e=O.value.year,a<O.value.month&&(a=O.value.month)),H.value!==null&&e>=H.value.year&&(e=H.value.year,a>H.value.month&&(a=H.value.month));const l=e+"/"+se(a)+"/01";l!==f.value.dateHash&&(Ce.value=f.value.dateHash<l==(w.lang.rtl!==!0)?"left":"right",e!==f.value.year&&(He.value=Ce.value),mt(()=>{Se.value=e-e%oe-(e<0?oe:0),Object.assign(f.value,{year:e,month:a,day:1,dateHash:l})}))}function ut(e,a,l){const d=e!==null&&e.length===1&&t.multiple===!1?e[0]:e;ne=d;const{reason:i,details:S}=dt(a,l);m("update:modelValue",d,i,S)}function xe(e){const a=j.value[0]!==void 0&&j.value[0].dateHash!==null?{...j.value[0]}:{...f.value};mt(()=>{a.year=f.value.year,a.month=f.value.month;const l=t.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Ee(a.year,a.month);a.day=Math.min(Math.max(1,a.day),l);const d=de(a);ne=d;const{details:i}=dt("",a);m("update:modelValue",d,e,i)})}function dt(e,a){return a.from!==void 0?{reason:`${e}-range`,details:{...ae(a.target),from:ae(a.from),to:ae(a.to)}}:{reason:`${e}-day`,details:ae(a)}}function de(e,a,l){return e.from!==void 0?{from:Pe.value(e.from,a,l),to:Pe.value(e.to,a,l)}:Pe.value(e,a,l)}function Ye(e){let a;if(t.multiple===!0)if(e.from!==void 0){const l=N(e.from),d=N(e.to),i=j.value.filter(c=>c.dateHash<l||c.dateHash>d),S=ie.value.filter(({from:c,to:_})=>_.dateHash<l||c.dateHash>d);a=i.concat(S).concat(e).map(c=>de(c))}else{const l=Re.value.slice();l.push(de(e)),a=l}else a=de(e);ut(a,"add",e)}function Le(e){if(t.noUnset===!0)return;let a=null;if(t.multiple===!0&&Array.isArray(t.modelValue)===!0){const l=de(e);e.from!==void 0?a=t.modelValue.filter(d=>d.from!==void 0?d.from!==l.from&&d.to!==l.to:!0):a=t.modelValue.filter(d=>d!==l),a.length===0&&(a=null)}ut(a,"remove",e)}function ct(e,a,l){const d=j.value.concat(ie.value).map(i=>de(i,e,a)).filter(i=>i.from!==void 0?i.from.dateHash!==null&&i.to.dateHash!==null:i.dateHash!==null);m("update:modelValue",(t.multiple===!0?d:d[0])||null,l)}function Yt(){if(t.minimal!==!0)return v("div",{class:"q-date__header "+k.value},[v("div",{class:"relative-position"},[v(fe,{name:"q-transition--fade"},()=>v("div",{key:"h-yr-"+et.value,class:"q-date__header-subtitle q-date__header-link "+(R.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:g.value,...u("vY",{onClick(){R.value="Years"},onKeyup(e){e.keyCode===13&&(R.value="Years")}})},[et.value]))]),v("div",{class:"q-date__header-title relative-position flex no-wrap"},[v("div",{class:"relative-position col"},[v(fe,{name:"q-transition--fade"},()=>v("div",{key:"h-sub"+Ze.value,class:"q-date__header-title-label q-date__header-link "+(R.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:g.value,...u("vC",{onClick(){R.value="Calendar"},onKeyup(e){e.keyCode===13&&(R.value="Calendar")}})},[Ze.value]))]),t.todayBtn===!0?v($,{class:"q-date__header-today self-start",icon:w.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:g.value,onClick:lt}):null])])}function ze({label:e,type:a,key:l,dir:d,goTo:i,boundaries:S,cls:c}){return[v("div",{class:"row items-center q-date__arrow"},[v($,{round:!0,dense:!0,size:"sm",flat:!0,icon:we.value[0],tabindex:g.value,disable:S.prev===!1,...u("go-#"+a,{onClick(){i(-1)}})})]),v("div",{class:"relative-position overflow-hidden flex flex-center"+c},[v(fe,{name:"q-transition--jump-"+d},()=>v("div",{key:l},[v($,{flat:!0,dense:!0,noCaps:!0,label:e,tabindex:g.value,...u("view#"+a,{onClick:()=>{R.value=a}})})]))]),v("div",{class:"row items-center q-date__arrow"},[v($,{round:!0,dense:!0,size:"sm",flat:!0,icon:we.value[1],tabindex:g.value,disable:S.next===!1,...u("go+#"+a,{onClick(){i(1)}})})])]}const Lt={Calendar:()=>[v("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[v("div",{class:"q-date__navigation row items-center no-wrap"},ze({label:q.value.months[f.value.month-1],type:"Months",key:f.value.month,dir:Ce.value,goTo:it,boundaries:Fe.value.month,cls:" col"}).concat(ze({label:f.value.year,type:"Years",key:f.value.year,dir:He.value,goTo:Ae,boundaries:Fe.value.year,cls:""}))),v("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Tt.value.map(e=>v("div",{class:"q-date__calendar-item"},[v("div",e)]))),v("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[v(fe,{name:"q-transition--slide-"+Ce.value},()=>v("div",{key:P.value,class:"q-date__calendar-days fit"},ot.value.map(e=>v("div",{class:e.classes},[e.in===!0?v($,{class:e.today===!0?"q-date__today":"",dense:!0,flat:e.flat,unelevated:e.unelevated,color:e.color,textColor:e.textColor,label:e.i,tabindex:g.value,...u("day#"+e.i,{onClick:()=>{zt(e.i)},onMouseover:()=>{Ut(e.i)}})},e.event!==!1?()=>v("div",{class:"q-date__event bg-"+e.event}):null):v("div",""+e.i)]))))])])],Months(){const e=f.value.year===U.value.year,a=d=>O.value!==null&&f.value.year===O.value.year&&O.value.month>d||H.value!==null&&f.value.year===H.value.year&&H.value.month<d,l=q.value.monthsShort.map((d,i)=>{const S=f.value.month===i+1;return v("div",{class:"q-date__months-item flex flex-center"},[v($,{class:e===!0&&U.value.month===i+1?"q-date__today":null,flat:S!==!0,label:d,unelevated:S,color:S===!0?te.value:null,textColor:S===!0?re.value:null,tabindex:g.value,disable:a(i+1),...u("month#"+i,{onClick:()=>{Qt(i+1)}})})])});return t.yearsInMonthView===!0&&l.unshift(v("div",{class:"row no-wrap full-width"},[ze({label:f.value.year,type:"Years",key:f.value.year,dir:He.value,goTo:Ae,boundaries:Fe.value.year,cls:" col"})])),v("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},l)},Years(){const e=Se.value,a=e+oe,l=[],d=i=>O.value!==null&&O.value.year>i||H.value!==null&&H.value.year<i;for(let i=e;i<=a;i++){const S=f.value.year===i;l.push(v("div",{class:"q-date__years-item flex flex-center"},[v($,{key:"yr"+i,class:U.value.year===i?"q-date__today":null,flat:!S,label:i,dense:!0,unelevated:S,color:S===!0?te.value:null,textColor:S===!0?re.value:null,tabindex:g.value,disable:d(i),...u("yr#"+i,{onClick:()=>{jt(i)}})})]))}return v("div",{class:"q-date__view q-date__years flex flex-center"},[v("div",{class:"col-auto"},[v($,{round:!0,dense:!0,flat:!0,icon:we.value[0],tabindex:g.value,disable:d(e),...u("y-",{onClick:()=>{Se.value-=oe}})})]),v("div",{class:"q-date__years-content col self-stretch row items-center"},l),v("div",{class:"col-auto"},[v($,{round:!0,dense:!0,flat:!0,icon:we.value[1],tabindex:g.value,disable:d(a),...u("y+",{onClick:()=>{Se.value+=oe}})})])])}};function zt(e){const a={...f.value,day:e};if(t.range===!1){At(a,P.value);return}if(M.value===null){const l=ot.value.find(i=>i.fill!==!0&&i.i===e);if(t.noUnset!==!0&&l.range!==void 0){Le({target:a,from:l.range.from,to:l.range.to});return}if(l.selected===!0){Le(a);return}const d=N(a);M.value={init:a,initHash:d,final:a,finalHash:d},m("rangeStart",ae(a))}else{const l=M.value.initHash,d=N(a),i=l<=d?{from:M.value.init,to:a}:{from:a,to:M.value.init};M.value=null,Ye(l===d?a:{target:a,...i}),m("rangeEnd",{from:ae(i.from),to:ae(i.to)})}}function Ut(e){if(M.value!==null){const a={...f.value,day:e};Object.assign(M.value,{final:a,finalHash:N(a)})}}return Object.assign(C,{setToday:lt,setView:Rt,offsetCalendar:Pt,setCalendarTo:je,setEditingRange:Ft}),()=>{const e=[v("div",{class:"q-date__content col relative-position"},[v(fe,{name:"q-transition--fade"},Lt[R.value])])],a=Ct(o.default);return a!==void 0&&e.push(v("div",{class:"q-date__actions"},a)),t.name!==void 0&&t.disable!==!0&&Oe(e,"push"),v("div",{class:Dt.value,...Bt.value},[Yt(),v("div",{ref:me,class:"q-date__main col column",tabindex:-1},e)])}}});const xo=G({name:"OTDComponent",setup(){const t=Z(),o=Date.now(),m=yt.formatDate(o,"MM/DD");return{reStore:t,otditems:h([]),promptOTDDate:h(!1),otddate:h(Date.now()),otdlabel:h(m),otdtype:h("selected")}},mounted(){this.init()},methods:{async init(){const t=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=t[this.otdtype],console.log(this.otditems)},async load(t){console.log("load",this.otditems[t].text),console.log("load",this.otditems[t]);const o=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("OTD load ",o),this.reStore.loadPageId(this.otditems[t].pages[0].pageid,o),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const t=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=t.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=yt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(t){console.log("otdOptionsCB",this.otdtype);const o=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=o[this.otdtype]}}}),Do=n("div",{class:"text-h6"},"Select Date",-1),Vo={class:"q-gutter-y-sm column"},qo={class:""};function To(t,o,m,C,w,b){return x(),Y(J,null,[s(bt,{modelValue:t.promptOTDDate,"onUpdate:modelValue":o[2]||(o[2]=u=>t.promptOTDDate=u),persistent:""},{default:r(()=>[s(I,{style:{"min-width":"350px"}},{default:r(()=>[s(A,{align:"center"},{default:r(()=>[Do]),_:1}),s($o,{modelValue:t.otddate,"onUpdate:modelValue":o[0]||(o[0]=u=>t.otddate=u),minimal:""},null,8,["modelValue"]),s(kt,{align:"center",class:"text-white"},{default:r(()=>[qe(s($,{flat:"",label:"Cancel"},null,512),[[Ie]]),qe(s($,{flat:"",label:"Update OTD date",onClick:o[1]||(o[1]=u=>this.updateOTDDate())},null,512),[[Ie]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(I,{flat:""},{default:r(()=>[s(A,null,{default:r(()=>[s(pe,{padding:"",class:"rounded-borders"},{default:r(()=>[s(ye,{"header-style":{border:"1px solid gray"},label:"On This Day"},{default:r(()=>[n("div",Vo,[s(ge,{class:"bg-primary text-white rounded-borders q-my-md"},{default:r(()=>[s($,{dark:"",standout:"",onClick:o[3]||(o[3]=u=>t.promptOTDDate=!0)},{default:r(()=>[T(p(t.otdlabel),1)]),_:1}),s(We),s(ua,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":o[4]||(o[4]=u=>this.otdtype=u),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:o[5]||(o[5]=u=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),n("div",qo,[(x(!0),Y(J,null,_e(t.otditems,(u,g)=>(x(),B(I,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:t.otditems,"onUpdate:modelValue":o[6]||(o[6]=k=>t.otditems=k),key:g,onClick:k=>this.load(g)},{default:r(()=>[T(p(g)+". "+p(u.year)+" "+p(u.text),1)]),_:2},1032,["modelValue","onClick"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Io=X(xo,[["render",To]]);const Mo=G({name:"CurrentAssignment",setup(){return{reStore:Z(),ck:h("-"),goal:h("-"),created:h("-"),id:h("-"),points:h("-"),pages:h([]),pgIdx:h(0),title:h("")}},mounted(){console.log("CurrentAssignment mounted"),F(this.reStore.courses,async(t,o)=>{try{console.log("CurrentAssignment.watcher");const m=t.ck,C=t.aid;this.id=C,this.ck=m,this.goal=this.reStore.courses[m].assignments[C].goal,this.created=this.reStore.courses[m].assignments[C].created,this.points=this.reStore.courses[m].assignments[C].points;try{const w=this.reStore.courses[m].assignments[C].pages.length;console.log("pages.length ",w)}catch{this.reStore.courses[m].assignments[C].pages=[]}this.pages=this.reStore.courses[m].assignments[C].pages,this.pgIdx=this.reStore.courses[m].assignments[C].pgIdx,this.title=this.reStore.courses[m].assignments[C].title}catch(m){console.log(m)}},{immediate:!0,deep:!0})},methods:{save(){console.log("save"),this.reStore.saveCurrentAssignment()},nextPage(){this.reStore.nextPage()}}}),Oo={class:"text-weight-bolder text-center q-pa-md"},Ho={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Bo={width:"100%"},Ro=n("td",null,"Title",-1),Po={style:{width:"50%"}},Fo=n("td",null,"Course-Key",-1),jo={style:{width:"50%"}},Qo=n("td",null,"Assgmnt Id",-1),Ao={style:{width:"50%"}},Yo=n("td",null,"Created",-1),Lo={style:{width:"50%"}},zo=n("td",null,"Goal",-1),Uo={style:{width:"50%"}},Ko=n("td",null,"Pages",-1);function Eo(t,o,m,C,w,b){return x(),B(I,{flat:""},{default:r(()=>[s(A,null,{default:r(()=>[n("div",Oo,[T(p(this.title)+" ",1),s(V,{name:"save",onClick:this.save,size:"sm"},null,8,["onClick"])]),n("div",Ho,[n("table",Bo,[n("tr",null,[Ro,n("td",Po,p(this.title),1)]),n("tr",null,[Fo,n("td",jo,p(this.ck),1)]),n("tr",null,[Qo,n("td",Ao,p(this.id),1)]),n("tr",null,[Yo,n("td",Lo,p(this.created),1)]),n("tr",null,[zo,n("td",Uo,p(this.goal),1)]),n("tr",null,[Ko,n("td",{style:{width:"50%",cursor:"pointer"},onClick:o[0]||(o[0]=u=>this.nextPage())},p(this.pgIdx+1)+" / "+p(this.pages.length),1)])])])]),_:1})]),_:1})}var No=X(Mo,[["render",Eo]]);const Wo=G({name:"CurrentCourse",setup(){return{reStore:Z(),title:h(""),assignmentCount:h(0),courseKey:h(""),created:h(""),enrollmentCount:h(0),owner:h("")}},mounted(){console.log("CurrentCourse mounted"),F(this.reStore.courses,async(t,o)=>{try{if(this.reStore.courses.ck!==void 0){const m=this.reStore.courses.ck;console.log("CurrentCourse ",m),this.title=this.reStore.courses[m].title,this.courseKey=this.reStore.courses[m].courseKey,this.created=this.reStore.courses[m].created,this.assignmentCount=Object.keys(this.reStore.courses[m].assignments).length,this.enrollmentCount=Object.keys(this.reStore.courses[m].enrollment).length,this.owner=this.reStore.courses[m].owner}}catch(m){console.log(m)}},{immediate:!0,deep:!0})},methods:{dummy(){console.log("dummy")}}}),Jo={class:"text-weight-bolder text-center q-pa-md"},Go={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Xo={width:"100%"},Zo=n("td",null,"Title",-1),el={style:{width:"50%"}},tl=n("td",null,"Course-Key",-1),al={style:{width:"50%"}},ol=n("td",null,"Created",-1),ll={style:{width:"50%"}},sl=n("td",null,"Owner",-1),nl={style:{width:"50%"}},rl=n("td",null,"Assignments",-1),il={style:{width:"50%"}},ul=n("td",null,"Enrollment",-1),dl={style:{width:"50%"}};function cl(t,o,m,C,w,b){return x(),B(I,{flat:""},{default:r(()=>[s(A,null,{default:r(()=>[n("div",Jo,p(this.title),1),n("div",Go,[n("table",Xo,[n("tr",null,[Zo,n("td",el,p(this.title),1)]),n("tr",null,[tl,n("td",al,p(this.courseKey),1)]),n("tr",null,[ol,n("td",ll,p(this.created),1)]),n("tr",null,[sl,n("td",nl,p(this.owner.slice(0,10)),1)]),n("tr",null,[rl,n("td",il,p(this.assignmentCount),1)]),n("tr",null,[ul,n("td",dl,p(this.enrollmentCount),1)])])])]),_:1})]),_:1})}var ml=X(Wo,[["render",cl]]);const hl=G({name:"TeacherLayout",components:{CurrentCourse:ml,DocumentationComponent:da,SearchComponent:ka,ImagesComponent:ho,BookmarksComponent:po,OTDComponent:Io,CurrentAssignment:No,PreferencesComponent:ca,CurrentPage:no},setup(){const t=h(!1),o=h(!1),m=Z(),C=m.userSnapshot.preferences,w=h(null),b=h(null);return{step:h(1),reStore:m,initialValues:h(C),scrollAreaRHS:w,scrollAreaLHS:b,leftDrawerOpen:t,rightDrawerOpen:o,toggleLeftDrawer(){t.value=!t.value},toggleRightDrawer(){o.value=!o.value}}},mounted(){ht.isActive||(ht.toggle(),Ke("primary","#333"),Ke("secondary",this.initialValues.secondaryColor),Ke("accent",this.initialValues.accentColor))},methods:{scrollTopRHS(){this.scrollAreaRHS.setScrollPosition("vertical",0)},scrollTopLHS(){this.scrollAreaLHS.setScrollPosition("vertical",0)}}}),vl={class:"dashboard-wrapper"},fl=n("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),gl=n("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1);function _l(t,o,m,C,w,b){const u=Q("router-link"),g=Q("router-view"),k=Q("DocumentationComponent"),L=Q("SearchComponent"),K=Q("ImagesComponent"),ne=Q("BookmarksComponent"),Me=Q("OTDComponent"),Oe=Q("CurrentCourse"),me=Q("CurrentAssignment"),z=Q("CurrentPage"),q=Q("PreferencesComponent");return x(),B(Xt,{view:"hHh LpR fFf"},{default:r(()=>[s(Jt,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:r(()=>[s(ge,null,{default:r(()=>[s($,{dense:"",flat:"",round:"",icon:"menu",onClick:t.toggleLeftDrawer},null,8,["onClick"]),s(Nt,null,{default:r(()=>[s(u,{to:"/teacher"},{default:r(()=>[s(V,{name:"home",color:"white"},{default:r(()=>[s(le,null,{default:r(()=>[T("Return to My Teacher Page")]),_:1})]),_:1})]),_:1})]),_:1}),this.reStore.authenticated?(x(),B($,{key:0,onClick:o[0]||(o[0]=ee=>this.reStore.router.push("/student")),icon:"switch_account"},{default:r(()=>[s(le,null,{default:r(()=>[T(" Switch between Teacher or Student role ")]),_:1})]),_:1})):Te("",!0),this.reStore.authenticated?(x(),B($,{key:1,icon:"logout",onClick:o[1]||(o[1]=ee=>this.reStore.logout())})):Te("",!0),s($,{dense:"",flat:"",round:"",icon:"menu",onClick:t.toggleRightDrawer},null,8,["onClick"])]),_:1}),s(Wt,{align:"left",class:"hidden"},{default:r(()=>[s(De,{to:"/logo",label:"Logo"}),s(De,{to:"/teaching",label:"Teaching"}),s(De,{to:"/taking",label:"Taking"}),s(De,{to:"/gradebook",label:"Gradebook"})]),_:1})]),_:1}),s(Gt,{class:"container-fluid"},{default:r(()=>[n("div",vl,[s(g)]),s(vt,{bordered:"","show-if-above":"",modelValue:t.leftDrawerOpen,"onUpdate:modelValue":o[2]||(o[2]=ee=>t.leftDrawerOpen=ee),side:"left"},{default:r(()=>[s(ge,{flat:"",class:"bg-primary text-white"},{default:r(()=>[s($,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),s(Ve,{dark:"",vertical:"",inset:""}),s($,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),s(Ve,{dark:"",vertical:"",inset:""}),s(We),s($,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopLHS},{default:r(()=>[s(le,null,{default:r(()=>[T("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),fl,s(ft,{visible:t.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaLHS"},{default:r(()=>[s(k),s(L),s(K),s(ne),s(Me)]),_:1},8,["visible"])]),_:1},8,["modelValue"]),s(vt,{bordered:"","show-if-above":"",modelValue:t.rightDrawerOpen,"onUpdate:modelValue":o[3]||(o[3]=ee=>t.rightDrawerOpen=ee),side:"right"},{default:r(()=>[s(ge,{flat:"",class:"bg-primary text-white"},{default:r(()=>[s($,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),s(Ve,{dark:"",vertical:"",inset:""}),s($,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),s(Ve,{dark:"",vertical:"",inset:""}),s(We),s($,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopRHS},{default:r(()=>[s(le,null,{default:r(()=>[T("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),gl,s(ft,{visible:t.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaRHS"},{default:r(()=>[s(Oe),s(me),s(z),s(q,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var Rl=X(hl,[["render",_l]]);export{Rl as default};
