import{Q as v}from"./QPage.5878960d.js";import{u as Q,s as _}from"./re-store.18599349.js";import{Q as $}from"./QBanner.bc181134.js";import{e as B,r as x,u as w,_ as b,o as a,f as S,w as t,k as i,g as o,an as p,ap as c,aq as k,j as l,i as C,Q as h,ar as A,as as V,l as N}from"./index.0593ff5d.js";import{Q as m}from"./QTooltip.f87d82fb.js";import{Q as q}from"./QBtnGroup.b24f841b.js";import{Q as T}from"./QCardSection.f1c1c46f.js";import{Q as f}from"./QCard.08d12015.js";import{Q as J}from"./QExpansionItem.f1c43f19.js";import{Q as y}from"./QImg.1f3e2eaf.js";import"./transform.aea72fbe.js";import"./firebase.79bf92f9.js";import"./index.2cf0d985.js";import"./use-dark.247fe131.js";import"./scroll.93d34c24.js";import"./uid.42677368.js";const O=B({name:"AssignmentEditor",setup(){return{reStore:Q(),assignment:x(null)}},mounted(){console.log("AE mounted"),w(this.reStore.courses,async(e,s)=>{if(console.log("AE watcher ",e,s),!this.assignment||this.assignment.id!==e.aid){const u=this.reStore.courses.ck,g=this.reStore.courses.aid;this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[u].assignments[g]))}});try{if(!this.assignment||this.assignment.id!==newObj.aid){const e=this.reStore.courses.ck,s=this.reStore.courses.aid;this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e].assignments[s]))}}catch(e){console.log(e)}},methods:{pgCB(e){console.log("AE pgCB ",e),this.reStore.courses.selectedRHSTab="pagerTab"},deletePageCB(e){},async loadPageCB(e){console.log("Pager loadPageCB ",e),this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e])),this.reStore.courses.pgIdx=e,this.reStore.page.imgIdx=this.assignment.pages[e].imgIdx,this.reStore.courses.imgIdx=this.assignment.pages[e].imgIdx,_(".assignment").classed("hidden",!1),_(".coverslide").classed("hidden",!0),this.reStore.courses.trigger+=1,this.reStore.page.isCustom||(console.log("calling restore.reloadPage"),await this.reStore.reloadPage(),this.reStore.courses.trigger+=1),this.reStore.mode==="editor"?this.reStore.router.push("/teacher/editor"):this.reStore.router.push("/teacher/assignment")},dummy(){console.log("dummy")}}}),U={class:"q-pa-md"},j={key:0,class:"text-weight-bolder text-center text-h4 q-pa-md"},D={class:"q-ma-sm"},z={key:0,class:"flex flex-row justify-center"},I=i("div",{class:"absolute-top text-center",style:{"background-color":"#2228",height:"100%"}},[i("div",{class:"atit"},"p00. Cover")],-1),R={class:"absolute-top text-center",style:{"background-color":"#2228",height:"100%"}},F={class:"atit"},G={style:{"font-size":"22pt",width:"100%"},class:"text-center absolute-bottom"};function H(e,s,u,g,E,P){return a(),S(v,{class:"q-gutter-md bg-primary",style:{width:"100%"}},{default:t(()=>[i("div",U,[o(J,{class:"bg-positive",modelValue:e.defaultExpanded,"onUpdate:modelValue":s[3]||(s[3]=r=>e.defaultExpanded=r)},{header:t(()=>[o($,{class:"bg-positive text-white",style:{width:"100%"}},{default:t(()=>[this.reStore.courses.ck?(a(),p("div",j," Assignment: "+c(this.reStore.courses[this.reStore.courses.ck].assignments[this.reStore.courses.aid].title),1)):k("",!0)]),_:1})]),default:t(()=>[o(f,{flat:""},{default:t(()=>[o(T,{class:"text-center",style:{fontSize:"12pt"}},{default:t(()=>[l(" Title: "+c(this.reStore.courses[this.reStore.courses.ck].assignments[this.reStore.courses.aid].title)+" \xA0",1),o(C,{class:"ptr",name:"edit",onClick:s[0]||(s[0]=r=>{e.prompt=!0,this.courseTitle=this.reStore.courses[this.reStore.courses.ck].title,this.courseKey=e.ck})}),i("div",D,[o(q,null,{default:t(()=>[o(h,{icon:"delete",onClick:s[1]||(s[1]=r=>this.deleteAssignmentCB(this.reStore.courses.ck))},{default:t(()=>[o(m,null,{default:t(()=>[l("Delete Assignment")]),_:1})]),_:1}),o(h,{icon:"post_add",onClick:s[2]||(s[2]=r=>this.newPageCB(this.reStore.courses.ck))},{default:t(()=>[o(m,null,{default:t(()=>[l("New Page")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),this.assignment?(a(),p("div",z,[o(f,{class:"acard bg-primary q-ma-sm",flat:"",bordered:"",modelValue:this.assignment.pages,"onUpdate:modelValue":s[4]||(s[4]=r=>this.assignment.pages=r)},{default:t(()=>[o(y,{class:"aimg",src:this.assignment.coverUrl},{default:t(()=>[I]),_:1},8,["src"])]),_:1},8,["modelValue"]),(a(!0),p(A,null,V(this.assignment.pages,(r,n)=>(a(),S(f,{class:"acard bg-primary q-ma-sm",flat:"",bordered:"",modelValue:this.assignment.pages,"onUpdate:modelValue":s[5]||(s[5]=d=>this.assignment.pages=d),key:n},{default:t(()=>[o(y,{class:"aimg",src:r.imgs[r.imgIdx].url,onClick:d=>this.pgCB(n)},{default:t(()=>[i("div",R,[i("div",F,"p"+c(n+1)+". "+c(r.pageTitle.slice(0,10)),1)]),i("div",G,[i("div",null,[o(C,{class:"ptr",name:"delete",onClick:d=>this.deletePageCB(n)},{default:t(()=>[o(m,null,{default:t(()=>[l("Delete Page")]),_:1})]),_:2},1032,["onClick"]),o(h,{icon:"edit",onClick:d=>this.loadPageCB(n)},{default:t(()=>[o(m,null,{default:t(()=>[l("Edit Page")]),_:1})]),_:2},1032,["onClick"])])])]),_:2},1032,["src","onClick"])]),_:2},1032,["modelValue"]))),128))])):k("",!0)]),_:1})}var K=b(O,[["render",H]]);const L=B({name:"AssignmentEditorPage",components:{AssignmentEditor:K},setup(e){const s=Q();return{props:e,reStore:s}}});function M(e,s,u,g,E,P){const r=N("AssignmentEditor");return a(),S(v,{id:"QPage",class:"row justify-center"},{default:t(()=>[o(r)]),_:1})}var ue=b(L,[["render",M]]);export{ue as default};
