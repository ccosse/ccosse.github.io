import{O as At,R as w,S as Ct,U as _n,V as wn,W as xn,r as _,X as bn,Y as Te,P as rt,Z as Sn}from"./index.ebbf5c97.js";import{u as $,r as m,d as v,g as H,a as R,c as K,s as fe,b as Q,e as st,_ as kn,f as at,h as ot,t as lt,i as V}from"./firebase.a225ab3e.js";import{a as Ae}from"./axios.84ae42e4.js";var Nn={value:()=>{}};function Ot(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new ve(n)}function ve(e){this._=e}function Dn(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}ve.prototype=Ot.prototype={constructor:ve,on:function(e,t){var n=this._,i=Dn(e+"",n),r,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((r=(e=i[s]).type)&&(r=Mn(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(r=(e=i[s]).type)n[r]=ut(n[r],e.name,t);else if(t==null)for(r in n)n[r]=ut(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ve(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function Mn(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function ut(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Nn,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Pe="http://www.w3.org/1999/xhtml",ct={svg:"http://www.w3.org/2000/svg",xhtml:Pe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Me(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ct.hasOwnProperty(t)?{space:ct[t],local:e}:e}function $n(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Pe&&t.documentElement.namespaceURI===Pe?t.createElement(e):t.createElementNS(n,e)}}function In(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ft(e){var t=Me(e);return(t.local?In:$n)(t)}function En(){}function Be(e){return e==null?En:function(){return this.querySelector(e)}}function Tn(e){typeof e!="function"&&(e=Be(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,o=i[r]=new Array(a),l,c,u=0;u<a;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),o[u]=c);return new M(i,this._parents)}function Yt(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function An(){return[]}function Pt(e){return e==null?An:function(){return this.querySelectorAll(e)}}function Cn(e){return function(){return Yt(e.apply(this,arguments))}}function On(e){typeof e=="function"?e=Cn(e):e=Pt(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var a=t[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&(i.push(e.call(l,l.__data__,c,a)),r.push(l));return new M(i,r)}function Rt(e){return function(){return this.matches(e)}}function Kt(e){return function(t){return t.matches(e)}}var Fn=Array.prototype.find;function Yn(e){return function(){return Fn.call(this.children,e)}}function Pn(){return this.firstElementChild}function Rn(e){return this.select(e==null?Pn:Yn(typeof e=="function"?e:Kt(e)))}var Kn=Array.prototype.filter;function Ln(){return Array.from(this.children)}function zn(e){return function(){return Kn.call(this.children,e)}}function Un(e){return this.selectAll(e==null?Ln:zn(typeof e=="function"?e:Kt(e)))}function Hn(e){typeof e!="function"&&(e=Rt(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,o=i[r]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&o.push(l);return new M(i,this._parents)}function Lt(e){return new Array(e.length)}function Vn(){return new M(this._enter||this._groups.map(Lt),this._parents)}function xe(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}xe.prototype={constructor:xe,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Gn(e){return function(){return e}}function qn(e,t,n,i,r,s){for(var a=0,o,l=t.length,c=s.length;a<c;++a)(o=t[a])?(o.__data__=s[a],i[a]=o):n[a]=new xe(e,s[a]);for(;a<l;++a)(o=t[a])&&(r[a]=o)}function Bn(e,t,n,i,r,s,a){var o,l,c=new Map,u=t.length,h=s.length,g=new Array(u),f;for(o=0;o<u;++o)(l=t[o])&&(g[o]=f=a.call(l,l.__data__,o,t)+"",c.has(f)?r[o]=l:c.set(f,l));for(o=0;o<h;++o)f=a.call(e,s[o],o,s)+"",(l=c.get(f))?(i[o]=l,l.__data__=s[o],c.delete(f)):n[o]=new xe(e,s[o]);for(o=0;o<u;++o)(l=t[o])&&c.get(g[o])===l&&(r[o]=l)}function Xn(e){return e.__data__}function Qn(e,t){if(!arguments.length)return Array.from(this,Xn);var n=t?Bn:qn,i=this._parents,r=this._groups;typeof e!="function"&&(e=Gn(e));for(var s=r.length,a=new Array(s),o=new Array(s),l=new Array(s),c=0;c<s;++c){var u=i[c],h=r[c],g=h.length,f=Zn(e.call(u,u&&u.__data__,c,i)),d=f.length,x=o[c]=new Array(d),T=a[c]=new Array(d),k=l[c]=new Array(g);n(u,h,x,T,k,f,t);for(var A=0,U=0,he,Ee;A<d;++A)if(he=x[A]){for(A>=U&&(U=A+1);!(Ee=T[U])&&++U<d;);he._next=Ee||null}}return a=new M(a,i),a._enter=o,a._exit=l,a}function Zn(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Jn(){return new M(this._exit||this._groups.map(Lt),this._parents)}function jn(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function Wn(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,a=Math.min(r,s),o=new Array(r),l=0;l<a;++l)for(var c=n[l],u=i[l],h=c.length,g=o[l]=new Array(h),f,d=0;d<h;++d)(f=c[d]||u[d])&&(g[d]=f);for(;l<r;++l)o[l]=n[l];return new M(o,this._parents)}function ei(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],a;--r>=0;)(a=i[r])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function ti(e){e||(e=ni);function t(h,g){return h&&g?e(h.__data__,g.__data__):!h-!g}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a=n[s],o=a.length,l=r[s]=new Array(o),c,u=0;u<o;++u)(c=a[u])&&(l[u]=c);l.sort(t)}return new M(r,this._parents).order()}function ni(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ii(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ri(){return Array.from(this)}function si(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null}function ai(){let e=0;for(const t of this)++e;return e}function oi(){return!this.node()}function li(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,a=r.length,o;s<a;++s)(o=r[s])&&e.call(o,o.__data__,s,r);return this}function ui(e){return function(){this.removeAttribute(e)}}function ci(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hi(e,t){return function(){this.setAttribute(e,t)}}function fi(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function gi(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function di(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function mi(e,t){var n=Me(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?ci:ui:typeof t=="function"?n.local?di:gi:n.local?fi:hi)(n,t))}function zt(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function pi(e){return function(){this.style.removeProperty(e)}}function yi(e,t,n){return function(){this.style.setProperty(e,t,n)}}function vi(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function _i(e,t,n){return arguments.length>1?this.each((t==null?pi:typeof t=="function"?vi:yi)(e,t,n==null?"":n)):W(this.node(),e)}function W(e,t){return e.style.getPropertyValue(t)||zt(e).getComputedStyle(e,null).getPropertyValue(t)}function wi(e){return function(){delete this[e]}}function xi(e,t){return function(){this[e]=t}}function bi(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Si(e,t){return arguments.length>1?this.each((t==null?wi:typeof t=="function"?bi:xi)(e,t)):this.node()[e]}function Ut(e){return e.trim().split(/^|\s+/)}function Xe(e){return e.classList||new Ht(e)}function Ht(e){this._node=e,this._names=Ut(e.getAttribute("class")||"")}Ht.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Vt(e,t){for(var n=Xe(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function Gt(e,t){for(var n=Xe(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function ki(e){return function(){Vt(this,e)}}function Ni(e){return function(){Gt(this,e)}}function Di(e,t){return function(){(t.apply(this,arguments)?Vt:Gt)(this,e)}}function Mi(e,t){var n=Ut(e+"");if(arguments.length<2){for(var i=Xe(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Di:t?ki:Ni)(n,t))}function $i(){this.textContent=""}function Ii(e){return function(){this.textContent=e}}function Ei(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Ti(e){return arguments.length?this.each(e==null?$i:(typeof e=="function"?Ei:Ii)(e)):this.node().textContent}function Ai(){this.innerHTML=""}function Ci(e){return function(){this.innerHTML=e}}function Oi(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Fi(e){return arguments.length?this.each(e==null?Ai:(typeof e=="function"?Oi:Ci)(e)):this.node().innerHTML}function Yi(){this.nextSibling&&this.parentNode.appendChild(this)}function Pi(){return this.each(Yi)}function Ri(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ki(){return this.each(Ri)}function Li(e){var t=typeof e=="function"?e:Ft(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function zi(){return null}function Ui(e,t){var n=typeof e=="function"?e:Ft(e),i=t==null?zi:typeof t=="function"?t:Be(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Hi(){var e=this.parentNode;e&&e.removeChild(this)}function Vi(){return this.each(Hi)}function Gi(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qi(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Bi(e){return this.select(e?qi:Gi)}function Xi(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Qi(e){return function(t){e.call(this,t,this.__data__)}}function Zi(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function Ji(e){return function(){var t=this.__on;if(!!t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function ji(e,t,n){return function(){var i=this.__on,r,s=Qi(t);if(i){for(var a=0,o=i.length;a<o;++a)if((r=i[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function Wi(e,t,n){var i=Zi(e+""),r,s=i.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,u;l<c;++l)for(r=0,u=o[l];r<s;++r)if((a=i[r]).type===u.type&&a.name===u.name)return u.value}return}for(o=t?ji:Ji,r=0;r<s;++r)this.each(o(i[r],t,n));return this}function qt(e,t,n){var i=zt(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function er(e,t){return function(){return qt(this,e,t)}}function tr(e,t){return function(){return qt(this,e,t.apply(this,arguments))}}function nr(e,t){return this.each((typeof t=="function"?tr:er)(e,t))}function*ir(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,a;r<s;++r)(a=i[r])&&(yield a)}var Bt=[null];function M(e,t){this._groups=e,this._parents=t}function le(){return new M([[document.documentElement]],Bt)}function rr(){return this}M.prototype=le.prototype={constructor:M,select:Tn,selectAll:On,selectChild:Rn,selectChildren:Un,filter:Hn,data:Qn,enter:Vn,exit:Jn,join:jn,merge:Wn,selection:rr,order:ei,sort:ti,call:ii,nodes:ri,node:si,size:ai,empty:oi,each:li,attr:mi,style:_i,property:Si,classed:Mi,text:Ti,html:Fi,raise:Pi,lower:Ki,append:Li,insert:Ui,remove:Vi,clone:Bi,datum:Xi,on:Wi,dispatch:nr,[Symbol.iterator]:ir};function ge(e){return typeof e=="string"?new M([document.querySelectorAll(e)],[document.documentElement]):new M([Yt(e)],Bt)}function Qe(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Xt(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function ue(){}var re=.7,be=1/re,j="\\s*([+-]?\\d+)\\s*",se="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",O="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sr=/^#([0-9a-f]{3,8})$/,ar=new RegExp(`^rgb\\(${j},${j},${j}\\)$`),or=new RegExp(`^rgb\\(${O},${O},${O}\\)$`),lr=new RegExp(`^rgba\\(${j},${j},${j},${se}\\)$`),ur=new RegExp(`^rgba\\(${O},${O},${O},${se}\\)$`),cr=new RegExp(`^hsl\\(${se},${O},${O}\\)$`),hr=new RegExp(`^hsla\\(${se},${O},${O},${se}\\)$`),ht={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Qe(ue,ae,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ft,formatHex:ft,formatHex8:fr,formatHsl:gr,formatRgb:gt,toString:gt});function ft(){return this.rgb().formatHex()}function fr(){return this.rgb().formatHex8()}function gr(){return Qt(this).formatHsl()}function gt(){return this.rgb().formatRgb()}function ae(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=sr.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?dt(t):n===3?new N(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?de(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?de(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ar.exec(e))?new N(t[1],t[2],t[3],1):(t=or.exec(e))?new N(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=lr.exec(e))?de(t[1],t[2],t[3],t[4]):(t=ur.exec(e))?de(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=cr.exec(e))?yt(t[1],t[2]/100,t[3]/100,1):(t=hr.exec(e))?yt(t[1],t[2]/100,t[3]/100,t[4]):ht.hasOwnProperty(e)?dt(ht[e]):e==="transparent"?new N(NaN,NaN,NaN,0):null}function dt(e){return new N(e>>16&255,e>>8&255,e&255,1)}function de(e,t,n,i){return i<=0&&(e=t=n=NaN),new N(e,t,n,i)}function dr(e){return e instanceof ue||(e=ae(e)),e?(e=e.rgb(),new N(e.r,e.g,e.b,e.opacity)):new N}function Re(e,t,n,i){return arguments.length===1?dr(e):new N(e,t,n,i==null?1:i)}function N(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Qe(N,Re,Xt(ue,{brighter(e){return e=e==null?be:Math.pow(be,e),new N(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?re:Math.pow(re,e),new N(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new N(B(this.r),B(this.g),B(this.b),Se(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mt,formatHex:mt,formatHex8:mr,formatRgb:pt,toString:pt}));function mt(){return`#${q(this.r)}${q(this.g)}${q(this.b)}`}function mr(){return`#${q(this.r)}${q(this.g)}${q(this.b)}${q((isNaN(this.opacity)?1:this.opacity)*255)}`}function pt(){const e=Se(this.opacity);return`${e===1?"rgb(":"rgba("}${B(this.r)}, ${B(this.g)}, ${B(this.b)}${e===1?")":`, ${e})`}`}function Se(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function B(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function q(e){return e=B(e),(e<16?"0":"")+e.toString(16)}function yt(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new I(e,t,n,i)}function Qt(e){if(e instanceof I)return new I(e.h,e.s,e.l,e.opacity);if(e instanceof ue||(e=ae(e)),!e)return new I;if(e instanceof I)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),a=NaN,o=s-r,l=(s+r)/2;return o?(t===s?a=(n-i)/o+(n<i)*6:n===s?a=(i-t)/o+2:a=(t-n)/o+4,o/=l<.5?s+r:2-s-r,a*=60):o=l>0&&l<1?0:a,new I(a,o,l,e.opacity)}function pr(e,t,n,i){return arguments.length===1?Qt(e):new I(e,t,n,i==null?1:i)}function I(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Qe(I,pr,Xt(ue,{brighter(e){return e=e==null?be:Math.pow(be,e),new I(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?re:Math.pow(re,e),new I(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new N(Ce(e>=240?e-240:e+120,r,i),Ce(e,r,i),Ce(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new I(vt(this.h),me(this.s),me(this.l),Se(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Se(this.opacity);return`${e===1?"hsl(":"hsla("}${vt(this.h)}, ${me(this.s)*100}%, ${me(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vt(e){return e=(e||0)%360,e<0?e+360:e}function me(e){return Math.max(0,Math.min(1,e||0))}function Ce(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var Zt=e=>()=>e;function yr(e,t){return function(n){return e+n*t}}function vr(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function _r(e){return(e=+e)==1?Jt:function(t,n){return n-t?vr(t,n,e):Zt(isNaN(t)?n:t)}}function Jt(e,t){var n=t-e;return n?yr(e,n):Zt(isNaN(e)?t:e)}var _t=function e(t){var n=_r(t);function i(r,s){var a=n((r=Re(r)).r,(s=Re(s)).r),o=n(r.g,s.g),l=n(r.b,s.b),c=Jt(r.opacity,s.opacity);return function(u){return r.r=a(u),r.g=o(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=e,i}(1);function L(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ke=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Oe=new RegExp(Ke.source,"g");function wr(e){return function(){return e}}function xr(e){return function(t){return e(t)+""}}function br(e,t){var n=Ke.lastIndex=Oe.lastIndex=0,i,r,s,a=-1,o=[],l=[];for(e=e+"",t=t+"";(i=Ke.exec(e))&&(r=Oe.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(i=i[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,l.push({i:a,x:L(i,r)})),n=Oe.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?xr(l[0].x):wr(t):(t=l.length,function(c){for(var u=0,h;u<t;++u)o[(h=l[u]).i]=h.x(c);return o.join("")})}var wt=180/Math.PI,Le={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function jt(e,t,n,i,r,s){var a,o,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),e*i<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*wt,skewX:Math.atan(l)*wt,scaleX:a,scaleY:o}}var pe;function Sr(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Le:jt(t.a,t.b,t.c,t.d,t.e,t.f)}function kr(e){return e==null||(pe||(pe=document.createElementNS("http://www.w3.org/2000/svg","g")),pe.setAttribute("transform",e),!(e=pe.transform.baseVal.consolidate()))?Le:(e=e.matrix,jt(e.a,e.b,e.c,e.d,e.e,e.f))}function Wt(e,t,n,i){function r(c){return c.length?c.pop()+" ":""}function s(c,u,h,g,f,d){if(c!==h||u!==g){var x=f.push("translate(",null,t,null,n);d.push({i:x-4,x:L(c,h)},{i:x-2,x:L(u,g)})}else(h||g)&&f.push("translate("+h+t+g+n)}function a(c,u,h,g){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),g.push({i:h.push(r(h)+"rotate(",null,i)-2,x:L(c,u)})):u&&h.push(r(h)+"rotate("+u+i)}function o(c,u,h,g){c!==u?g.push({i:h.push(r(h)+"skewX(",null,i)-2,x:L(c,u)}):u&&h.push(r(h)+"skewX("+u+i)}function l(c,u,h,g,f,d){if(c!==h||u!==g){var x=f.push(r(f)+"scale(",null,",",null,")");d.push({i:x-4,x:L(c,h)},{i:x-2,x:L(u,g)})}else(h!==1||g!==1)&&f.push(r(f)+"scale("+h+","+g+")")}return function(c,u){var h=[],g=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,h,g),a(c.rotate,u.rotate,h,g),o(c.skewX,u.skewX,h,g),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,g),c=u=null,function(f){for(var d=-1,x=g.length,T;++d<x;)h[(T=g[d]).i]=T.x(f);return h.join("")}}}var Nr=Wt(Sr,"px, ","px)","deg)"),Dr=Wt(kr,", ",")",")"),ee=0,ne=0,te=0,en=1e3,ke,ie,Ne=0,X=0,$e=0,oe=typeof performance=="object"&&performance.now?performance:Date,tn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ze(){return X||(tn(Mr),X=oe.now()+$e)}function Mr(){X=0}function De(){this._call=this._time=this._next=null}De.prototype=nn.prototype={constructor:De,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ze():+n)+(t==null?0:+t),!this._next&&ie!==this&&(ie?ie._next=this:ke=this,ie=this),this._call=e,this._time=n,ze()},stop:function(){this._call&&(this._call=null,this._time=1/0,ze())}};function nn(e,t,n){var i=new De;return i.restart(e,t,n),i}function $r(){Ze(),++ee;for(var e=ke,t;e;)(t=X-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ee}function xt(){X=(Ne=oe.now())+$e,ee=ne=0;try{$r()}finally{ee=0,Er(),X=0}}function Ir(){var e=oe.now(),t=e-Ne;t>en&&($e-=t,Ne=e)}function Er(){for(var e,t=ke,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ke=n);ie=e,ze(i)}function ze(e){if(!ee){ne&&(ne=clearTimeout(ne));var t=e-X;t>24?(e<1/0&&(ne=setTimeout(xt,e-oe.now()-$e)),te&&(te=clearInterval(te))):(te||(Ne=oe.now(),te=setInterval(Ir,en)),ee=1,tn(xt))}}function bt(e,t,n){var i=new De;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var Tr=Ot("start","end","cancel","interrupt"),Ar=[],rn=0,St=1,Ue=2,_e=3,kt=4,He=5,we=6;function Ie(e,t,n,i,r,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Cr(e,n,{name:t,index:i,group:r,on:Tr,tween:Ar,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:rn})}function Je(e,t){var n=E(e,t);if(n.state>rn)throw new Error("too late; already scheduled");return n}function F(e,t){var n=E(e,t);if(n.state>_e)throw new Error("too late; already running");return n}function E(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Cr(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=nn(s,0,n.time);function s(c){n.state=St,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var u,h,g,f;if(n.state!==St)return l();for(u in i)if(f=i[u],f.name===n.name){if(f.state===_e)return bt(a);f.state===kt?(f.state=we,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete i[u]):+u<t&&(f.state=we,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete i[u])}if(bt(function(){n.state===_e&&(n.state=kt,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=Ue,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ue){for(n.state=_e,r=new Array(g=n.tween.length),u=0,h=-1;u<g;++u)(f=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=f);r.length=h+1}}function o(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=He,1),h=-1,g=r.length;++h<g;)r[h].call(e,u);n.state===He&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=we,n.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function Or(e,t){var n=e.__transition,i,r,s=!0,a;if(!!n){t=t==null?null:t+"";for(a in n){if((i=n[a]).name!==t){s=!1;continue}r=i.state>Ue&&i.state<He,i.state=we,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[a]}s&&delete e.__transition}}function Fr(e){return this.each(function(){Or(this,e)})}function Yr(e,t){var n,i;return function(){var r=F(this,e),s=r.tween;if(s!==n){i=n=s;for(var a=0,o=i.length;a<o;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function Pr(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=F(this,e),a=s.tween;if(a!==i){r=(i=a).slice();for(var o={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=o;break}l===c&&r.push(o)}s.tween=r}}function Rr(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=E(this.node(),n).tween,r=0,s=i.length,a;r<s;++r)if((a=i[r]).name===e)return a.value;return null}return this.each((t==null?Yr:Pr)(n,e,t))}function je(e,t,n){var i=e._id;return e.each(function(){var r=F(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return E(r,i).value[t]}}function sn(e,t){var n;return(typeof t=="number"?L:t instanceof ae?_t:(n=ae(t))?(t=n,_t):br)(e,t)}function Kr(e){return function(){this.removeAttribute(e)}}function Lr(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zr(e,t,n){var i,r=n+"",s;return function(){var a=this.getAttribute(e);return a===r?null:a===i?s:s=t(i=a,n)}}function Ur(e,t,n){var i,r=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===i?s:s=t(i=a,n)}}function Hr(e,t,n){var i,r,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=o+"",a===l?null:a===i&&l===r?s:(r=l,s=t(i=a,o)))}}function Vr(e,t,n){var i,r,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=o+"",a===l?null:a===i&&l===r?s:(r=l,s=t(i=a,o)))}}function Gr(e,t){var n=Me(e),i=n==="transform"?Dr:sn;return this.attrTween(e,typeof t=="function"?(n.local?Vr:Hr)(n,i,je(this,"attr."+e,t)):t==null?(n.local?Lr:Kr)(n):(n.local?Ur:zr)(n,i,t))}function qr(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Br(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Xr(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&Br(e,s)),n}return r._value=t,r}function Qr(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&qr(e,s)),n}return r._value=t,r}function Zr(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Me(e);return this.tween(n,(i.local?Xr:Qr)(i,t))}function Jr(e,t){return function(){Je(this,e).delay=+t.apply(this,arguments)}}function jr(e,t){return t=+t,function(){Je(this,e).delay=t}}function Wr(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Jr:jr)(t,e)):E(this.node(),t).delay}function es(e,t){return function(){F(this,e).duration=+t.apply(this,arguments)}}function ts(e,t){return t=+t,function(){F(this,e).duration=t}}function ns(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?es:ts)(t,e)):E(this.node(),t).duration}function is(e,t){if(typeof t!="function")throw new Error;return function(){F(this,e).ease=t}}function rs(e){var t=this._id;return arguments.length?this.each(is(t,e)):E(this.node(),t).ease}function ss(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;F(this,e).ease=n}}function as(e){if(typeof e!="function")throw new Error;return this.each(ss(this._id,e))}function os(e){typeof e!="function"&&(e=Rt(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,o=i[r]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&o.push(l);return new P(i,this._parents,this._name,this._id)}function ls(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),a=new Array(i),o=0;o<s;++o)for(var l=t[o],c=n[o],u=l.length,h=a[o]=new Array(u),g,f=0;f<u;++f)(g=l[f]||c[f])&&(h[f]=g);for(;o<i;++o)a[o]=t[o];return new P(a,this._parents,this._name,this._id)}function us(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function cs(e,t,n){var i,r,s=us(t)?Je:F;return function(){var a=s(this,e),o=a.on;o!==i&&(r=(i=o).copy()).on(t,n),a.on=r}}function hs(e,t){var n=this._id;return arguments.length<2?E(this.node(),n).on.on(e):this.each(cs(n,e,t))}function fs(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function gs(){return this.on("end.remove",fs(this._id))}function ds(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Be(e));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var o=i[a],l=o.length,c=s[a]=new Array(l),u,h,g=0;g<l;++g)(u=o[g])&&(h=e.call(u,u.__data__,g,o))&&("__data__"in u&&(h.__data__=u.__data__),c[g]=h,Ie(c[g],t,n,g,c,E(u,n)));return new P(s,this._parents,t,n)}function ms(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Pt(e));for(var i=this._groups,r=i.length,s=[],a=[],o=0;o<r;++o)for(var l=i[o],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var g=e.call(u,u.__data__,h,l),f,d=E(u,n),x=0,T=g.length;x<T;++x)(f=g[x])&&Ie(f,t,n,x,g,d);s.push(g),a.push(u)}return new P(s,a,t,n)}var ps=le.prototype.constructor;function ys(){return new ps(this._groups,this._parents)}function vs(e,t){var n,i,r;return function(){var s=W(this,e),a=(this.style.removeProperty(e),W(this,e));return s===a?null:s===n&&a===i?r:r=t(n=s,i=a)}}function an(e){return function(){this.style.removeProperty(e)}}function _s(e,t,n){var i,r=n+"",s;return function(){var a=W(this,e);return a===r?null:a===i?s:s=t(i=a,n)}}function ws(e,t,n){var i,r,s;return function(){var a=W(this,e),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(e),W(this,e))),a===l?null:a===i&&l===r?s:(r=l,s=t(i=a,o))}}function xs(e,t){var n,i,r,s="style."+t,a="end."+s,o;return function(){var l=F(this,e),c=l.on,u=l.value[s]==null?o||(o=an(t)):void 0;(c!==n||r!==u)&&(i=(n=c).copy()).on(a,r=u),l.on=i}}function bs(e,t,n){var i=(e+="")=="transform"?Nr:sn;return t==null?this.styleTween(e,vs(e,i)).on("end.style."+e,an(e)):typeof t=="function"?this.styleTween(e,ws(e,i,je(this,"style."+e,t))).each(xs(this._id,e)):this.styleTween(e,_s(e,i,t),n).on("end.style."+e,null)}function Ss(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function ks(e,t,n){var i,r;function s(){var a=t.apply(this,arguments);return a!==r&&(i=(r=a)&&Ss(e,a,n)),i}return s._value=t,s}function Ns(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,ks(e,t,n==null?"":n))}function Ds(e){return function(){this.textContent=e}}function Ms(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function $s(e){return this.tween("text",typeof e=="function"?Ms(je(this,"text",e)):Ds(e==null?"":e+""))}function Is(e){return function(t){this.textContent=e.call(this,t)}}function Es(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Is(r)),t}return i._value=e,i}function Ts(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Es(e))}function As(){for(var e=this._name,t=this._id,n=on(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],o=a.length,l,c=0;c<o;++c)if(l=a[c]){var u=E(l,t);Ie(l,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new P(i,this._parents,e,n)}function Cs(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--r===0&&s()}};n.each(function(){var c=F(this,i),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),c.on=t}),r===0&&s()})}var Os=0;function P(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function on(){return++Os}var Y=le.prototype;P.prototype={constructor:P,select:ds,selectAll:ms,selectChild:Y.selectChild,selectChildren:Y.selectChildren,filter:os,merge:ls,selection:ys,transition:As,call:Y.call,nodes:Y.nodes,node:Y.node,size:Y.size,empty:Y.empty,each:Y.each,on:hs,attr:Gr,attrTween:Zr,style:bs,styleTween:Ns,text:$s,textTween:Ts,remove:gs,tween:Rr,delay:Wr,duration:ns,ease:rs,easeVarying:as,end:Cs,[Symbol.iterator]:Y[Symbol.iterator]};function Fs(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Ys={time:null,delay:0,duration:250,ease:Fs};function Ps(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Rs(e){var t,n;e instanceof P?(t=e._id,e=e._name):(t=on(),(n=Ys).time=Ze(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&Ie(l,e,t,c,a,n||Ps(l,t));return new P(i,this._parents,e,t)}le.prototype.interrupt=Fr;le.prototype.transition=Rs;function J(e,t,n){this.k=e,this.x=t,this.y=n}J.prototype={constructor:J,scale:function(e){return e===1?this:new J(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new J(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new J(1,0,0);J.prototype;const z=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Ca(e,t,n){return Object.prototype.toString.call(e)==="[object Date]"&&(n=e.getDate(),t=e.getMonth()+1,e=e.getFullYear()),Hs(We(e,t,n))}function Oa(e,t,n){return un(Us(e,t,n))}function Ks(e){return zs(e)===0}function Ls(e,t){return t<=6?31:t<=11||Ks(e)?30:29}function zs(e){const t=z.length;let n=z[0],i,r,s,a,o;if(e<n||e>=z[t-1])throw new Error("Invalid Jalaali year "+e);for(o=1;o<t&&(i=z[o],r=i-n,!(e<i));o+=1)n=i;return a=e-n,r-a<6&&(a=a-r+p(r+4,33)*33),s=D(D(a+1,33)-1,4),s===-1&&(s=4),s}function ln(e,t){const n=z.length,i=e+621;let r=-14,s=z[0],a,o,l,c,u;if(e<s||e>=z[n-1])throw new Error("Invalid Jalaali year "+e);for(u=1;u<n&&(a=z[u],o=a-s,!(e<a));u+=1)r=r+p(o,33)*8+p(D(o,33),4),s=a;c=e-s,r=r+p(c,33)*8+p(D(c,33)+3,4),D(o,33)===4&&o-c===4&&(r+=1);const h=p(i,4)-p((p(i,100)+1)*3,4)-150,g=20+r-h;return t||(o-c<6&&(c=c-o+p(o+4,33)*33),l=D(D(c+1,33)-1,4),l===-1&&(l=4)),{leap:l,gy:i,march:g}}function Us(e,t,n){const i=ln(e,!0);return We(i.gy,3,i.march)+(t-1)*31-p(t,7)*(t-7)+n-1}function Hs(e){const t=un(e).gy;let n=t-621,i,r,s;const a=ln(n,!1),o=We(t,3,a.march);if(s=e-o,s>=0){if(s<=185)return r=1+p(s,31),i=D(s,31)+1,{jy:n,jm:r,jd:i};s-=186}else n-=1,s+=179,a.leap===1&&(s+=1);return r=7+p(s,30),i=D(s,30)+1,{jy:n,jm:r,jd:i}}function We(e,t,n){let i=p((e+p(t-8,6)+100100)*1461,4)+p(153*D(t+9,12)+2,5)+n-34840408;return i=i-p(p(e+100100+p(t-8,6),100)*3,4)+752,i}function un(e){let t=4*e+139361631;t=t+p(p(4*e+183187720,146097)*3,4)*4-3908;const n=p(D(t,1461),4)*5+308,i=p(D(n,153),5)+1,r=D(p(n,153),12)+1;return{gy:p(t,1461)-100100+p(8-r,6),gm:r,gd:i}}function p(e,t){return~~(e/t)}function D(e,t){return e-~~(e/t)*t}const cn=864e5,Vs=36e5,Ve=6e4,hn="YYYY-MM-DDTHH:mm:ss.SSSZ",Gs=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,qs=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Fe={};function Bs(e,t){const n="("+t.days.join("|")+")",i=e+n;if(Fe[i]!==void 0)return Fe[i];const r="("+t.daysShort.join("|")+")",s="("+t.months.join("|")+")",a="("+t.monthsShort.join("|")+")",o={};let l=0;const c=e.replace(qs,h=>{switch(l++,h){case"YY":return o.YY=l,"(-?\\d{1,2})";case"YYYY":return o.YYYY=l,"(-?\\d{1,4})";case"M":return o.M=l,"(\\d{1,2})";case"MM":return o.M=l,"(\\d{2})";case"MMM":return o.MMM=l,a;case"MMMM":return o.MMMM=l,s;case"D":return o.D=l,"(\\d{1,2})";case"Do":return o.D=l++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return o.D=l,"(\\d{2})";case"H":return o.H=l,"(\\d{1,2})";case"HH":return o.H=l,"(\\d{2})";case"h":return o.h=l,"(\\d{1,2})";case"hh":return o.h=l,"(\\d{2})";case"m":return o.m=l,"(\\d{1,2})";case"mm":return o.m=l,"(\\d{2})";case"s":return o.s=l,"(\\d{1,2})";case"ss":return o.s=l,"(\\d{2})";case"S":return o.S=l,"(\\d{1})";case"SS":return o.S=l,"(\\d{2})";case"SSS":return o.S=l,"(\\d{3})";case"A":return o.A=l,"(AM|PM)";case"a":return o.a=l,"(am|pm)";case"aa":return o.aa=l,"(a\\.m\\.|p\\.m\\.)";case"ddd":return r;case"dddd":return n;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return o.Z=l,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return o.ZZ=l,"(Z|[+-]\\d{2}\\d{2})";case"X":return o.X=l,"(-?\\d+)";case"x":return o.x=l,"(-?\\d{4,})";default:return l--,h[0]==="["&&(h=h.substring(1,h.length-1)),h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),u={map:o,regex:new RegExp("^"+c)};return Fe[i]=u,u}function fn(e,t){return e!==void 0?e:t!==void 0?t.date:_n.date}function Nt(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),r=Math.floor(i/60),s=i%60;return n+w(r)+t+w(s)}function Xs(e,t,n){let i=e.getFullYear(),r=e.getMonth();const s=e.getDate();return t.year!==void 0&&(i+=n*t.year,delete t.year),t.month!==void 0&&(r+=n*t.month,delete t.month),e.setDate(1),e.setMonth(2),e.setFullYear(i),e.setMonth(r),e.setDate(Math.min(s,tt(e))),t.date!==void 0&&(e.setDate(e.getDate()+n*t.date),delete t.date),e}function Qs(e,t,n){const i=t.year!==void 0?t.year:e[`get${n}FullYear`](),r=t.month!==void 0?t.month-1:e[`get${n}Month`](),s=new Date(i,r+1,0).getDate(),a=Math.min(s,t.date!==void 0?t.date:e[`get${n}Date`]());return e[`set${n}Date`](1),e[`set${n}Month`](2),e[`set${n}FullYear`](i),e[`set${n}Month`](r),e[`set${n}Date`](a),delete t.year,delete t.month,delete t.date,e}function et(e,t,n){const i=gn(t),r=new Date(e),s=i.year!==void 0||i.month!==void 0||i.date!==void 0?Xs(r,i,n):r;for(const a in i){const o=wn(a);s[`set${o}`](s[`get${o}`]()+n*i[a])}return s}function gn(e){const t={...e};return e.years!==void 0&&(t.year=e.years,delete t.years),e.months!==void 0&&(t.month=e.months,delete t.months),e.days!==void 0&&(t.date=e.days,delete t.days),e.day!==void 0&&(t.date=e.day,delete t.day),e.hour!==void 0&&(t.hours=e.hour,delete t.hour),e.minute!==void 0&&(t.minutes=e.minute,delete t.minute),e.second!==void 0&&(t.seconds=e.second,delete t.second),e.millisecond!==void 0&&(t.milliseconds=e.millisecond,delete t.millisecond),t}function dn(e,t,n){const i=gn(t),r=n===!0?"UTC":"",s=new Date(e),a=i.year!==void 0||i.month!==void 0||i.date!==void 0?Qs(s,i,r):s;for(const o in i){const l=o.charAt(0).toUpperCase()+o.slice(1);a[`set${r}${l}`](i[o])}return a}function Zs(e,t,n){const i=Js(e,t,n),r=new Date(i.year,i.month===null?null:i.month-1,i.day===null?1:i.day,i.hour,i.minute,i.second,i.millisecond),s=r.getTimezoneOffset();return i.timezoneOffset===null||i.timezoneOffset===s?r:et(r,{minutes:i.timezoneOffset-s},1)}function Js(e,t,n,i,r){const s={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(r!==void 0&&Object.assign(s,r),e==null||e===""||typeof e!="string")return s;t===void 0&&(t=hn);const a=fn(n,At.props),o=a.months,l=a.monthsShort,{regex:c,map:u}=Bs(t,a),h=e.match(c);if(h===null)return s;let g="";if(u.X!==void 0||u.x!==void 0){const f=parseInt(h[u.X!==void 0?u.X:u.x],10);if(isNaN(f)===!0||f<0)return s;const d=new Date(f*(u.X!==void 0?1e3:1));s.year=d.getFullYear(),s.month=d.getMonth()+1,s.day=d.getDate(),s.hour=d.getHours(),s.minute=d.getMinutes(),s.second=d.getSeconds(),s.millisecond=d.getMilliseconds()}else{if(u.YYYY!==void 0)s.year=parseInt(h[u.YYYY],10);else if(u.YY!==void 0){const f=parseInt(h[u.YY],10);s.year=f<0?f:2e3+f}if(u.M!==void 0){if(s.month=parseInt(h[u.M],10),s.month<1||s.month>12)return s}else u.MMM!==void 0?s.month=l.indexOf(h[u.MMM])+1:u.MMMM!==void 0&&(s.month=o.indexOf(h[u.MMMM])+1);if(u.D!==void 0){if(s.day=parseInt(h[u.D],10),s.year===null||s.month===null||s.day<1)return s;const f=i!=="persian"?new Date(s.year,s.month,0).getDate():Ls(s.year,s.month);if(s.day>f)return s}u.H!==void 0?s.hour=parseInt(h[u.H],10)%24:u.h!==void 0&&(s.hour=parseInt(h[u.h],10)%12,(u.A&&h[u.A]==="PM"||u.a&&h[u.a]==="pm"||u.aa&&h[u.aa]==="p.m.")&&(s.hour+=12),s.hour=s.hour%24),u.m!==void 0&&(s.minute=parseInt(h[u.m],10)%60),u.s!==void 0&&(s.second=parseInt(h[u.s],10)%60),u.S!==void 0&&(s.millisecond=parseInt(h[u.S],10)*10**(3-h[u.S].length)),(u.Z!==void 0||u.ZZ!==void 0)&&(g=u.Z!==void 0?h[u.Z].replace(":",""):h[u.ZZ],s.timezoneOffset=(g[0]==="+"?-1:1)*(60*g.slice(1,3)+1*g.slice(3,5)))}return s.dateHash=w(s.year,6)+"/"+w(s.month)+"/"+w(s.day),s.timeHash=w(s.hour)+":"+w(s.minute)+":"+w(s.second)+g,s}function js(e){return typeof e=="number"?!0:isNaN(Date.parse(e))===!1}function Ws(e,t){return dn(new Date,e,t)}function ea(e){const t=new Date(e).getDay();return t===0?7:t}function Ge(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);const i=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-i);const r=(t-n)/(cn*7);return 1+Math.floor(r)}function ta(e){return e.getFullYear()*1e4+e.getMonth()*100+e.getDate()}function Ye(e,t){const n=new Date(e);return t===!0?ta(n):n.getTime()}function na(e,t,n,i={}){const r=Ye(t,i.onlyDate),s=Ye(n,i.onlyDate),a=Ye(e,i.onlyDate);return(a>r||i.inclusiveFrom===!0&&a===r)&&(a<s||i.inclusiveTo===!0&&a===s)}function ia(e,t){return et(e,t,1)}function ra(e,t){return et(e,t,-1)}function C(e,t,n){const i=new Date(e),r=`set${n===!0?"UTC":""}`;switch(t){case"year":case"years":i[`${r}Month`](0);case"month":case"months":i[`${r}Date`](1);case"day":case"days":case"date":i[`${r}Hours`](0);case"hour":case"hours":i[`${r}Minutes`](0);case"minute":case"minutes":i[`${r}Seconds`](0);case"second":case"seconds":i[`${r}Milliseconds`](0)}return i}function sa(e,t,n){const i=new Date(e),r=`set${n===!0?"UTC":""}`;switch(t){case"year":case"years":i[`${r}Month`](11);case"month":case"months":i[`${r}Date`](tt(i));case"day":case"days":case"date":i[`${r}Hours`](23);case"hour":case"hours":i[`${r}Minutes`](59);case"minute":case"minutes":i[`${r}Seconds`](59);case"second":case"seconds":i[`${r}Milliseconds`](999)}return i}function aa(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(n=>{t=Math.max(t,new Date(n))}),t}function oa(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(n=>{t=Math.min(t,new Date(n))}),t}function ye(e,t,n){return(e.getTime()-e.getTimezoneOffset()*Ve-(t.getTime()-t.getTimezoneOffset()*Ve))/n}function mn(e,t,n="days"){const i=new Date(e),r=new Date(t);switch(n){case"years":case"year":return i.getFullYear()-r.getFullYear();case"months":case"month":return(i.getFullYear()-r.getFullYear())*12+i.getMonth()-r.getMonth();case"days":case"day":case"date":return ye(C(i,"day"),C(r,"day"),cn);case"hours":case"hour":return ye(C(i,"hour"),C(r,"hour"),Vs);case"minutes":case"minute":return ye(C(i,"minute"),C(r,"minute"),Ve);case"seconds":case"second":return ye(C(i,"second"),C(r,"second"),1e3)}}function qe(e){return mn(e,C(e,"year"),"days")+1}function la(e){return Ct(e)===!0?"date":typeof e=="number"?"number":"string"}function ua(e,t,n){const i=new Date(e);if(t){const r=new Date(t);if(i<r)return r}if(n){const r=new Date(n);if(i>r)return r}return i}function ca(e,t,n){const i=new Date(e),r=new Date(t);if(n===void 0)return i.getTime()===r.getTime();switch(n){case"second":case"seconds":if(i.getSeconds()!==r.getSeconds())return!1;case"minute":case"minutes":if(i.getMinutes()!==r.getMinutes())return!1;case"hour":case"hours":if(i.getHours()!==r.getHours())return!1;case"day":case"days":case"date":if(i.getDate()!==r.getDate())return!1;case"month":case"months":if(i.getMonth()!==r.getMonth())return!1;case"year":case"years":if(i.getFullYear()!==r.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${n}`)}return!0}function tt(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function Dt(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Mt={YY(e,t,n){const i=this.YYYY(e,t,n)%100;return i>=0?w(i):"-"+w(Math.abs(i))},YYYY(e,t,n){return n!=null?n:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return w(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return Dt(this.Q(e))},D(e){return e.getDate()},Do(e){return Dt(e.getDate())},DD(e){return w(e.getDate())},DDD(e){return qe(e)},DDDD(e){return w(qe(e),3)},d(e){return e.getDay()},dd(e,t){return this.dddd(e,t).slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Ge(e)},ww(e){return w(Ge(e))},H(e){return e.getHours()},HH(e){return w(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return w(this.h(e))},m(e){return e.getMinutes()},mm(e){return w(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return w(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return w(Math.floor(e.getMilliseconds()/10))},SSS(e){return w(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,t,n,i){const r=i==null?e.getTimezoneOffset():i;return Nt(r,":")},ZZ(e,t,n,i){const r=i==null?e.getTimezoneOffset():i;return Nt(r)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function ha(e,t,n,i,r){if(e!==0&&!e||e===1/0||e===-1/0)return;const s=new Date(e);if(isNaN(s))return;t===void 0&&(t=hn);const a=fn(n,At.props);return t.replace(Gs,(o,l)=>o in Mt?Mt[o](s,a,i,r):l===void 0?o:l.split("\\]").join("]"))}function fa(e){return Ct(e)===!0?new Date(e.getTime()):e}var ga={isValid:js,extractDate:Zs,buildDate:Ws,getDayOfWeek:ea,getWeekOfYear:Ge,isBetweenDates:na,addToDate:ia,subtractFromDate:ra,adjustDate:dn,startOfDate:C,endOfDate:sa,getMaxDate:aa,getMinDate:oa,getDateDiff:mn,getDayOfYear:qe,inferDateFormat:la,getDateBetween:ua,isSameDate:ca,daysInMonth:tt,formatDate:ha,clone:fa},nt={},S={};Object.defineProperty(S,"__esModule",{value:!0});S.trim=S.isObject=S.isNil=S.isNan=S.size=S.isString=S.validateLocale=S.splitSentences=void 0;var da=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t.replace(/\.+/g,".|").replace(/\?/g,"?|").replace(/\!/g,"!|").split("|").map(function(n){return yn(n)}).filter(Boolean)};S.splitSentences=da;var ma=/^(?:(en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang))$|^((?:[a-z]{2,3}(?:(?:-[a-z]{3}){1,3})?)|[a-z]{4}|[a-z]{5,8})(?:-([a-z]{4}))?(?:-([a-z]{2}|\d{3}))?((?:-(?:[\da-z]{5,8}|\d[\da-z]{3}))*)?((?:-[\da-wy-z](?:-[\da-z]{2,8})+)*)?(-x(?:-[\da-z]{1,8})+)?$|^(x(?:-[\da-z]{1,8})+)$/i,pa=function(t){return typeof t!="string"?!1:ma.test(t)};S.validateLocale=pa;var pn=function(t){return typeof t=="string"||t instanceof String};S.isString=pn;var ya=function(t){return t&&Array.isArray(t)&&t.length?t.length:0};S.size=ya;var va=function(t){return typeof t=="number"&&isNaN(t)};S.isNan=va;var _a=function(t){return t==null};S.isNil=_a;var wa=function(t){return Object.prototype.toString.call(t)==="[object Object]"};S.isObject=wa;var yn=function(t){return pn(t)?t.trim():""};S.trim=yn;Object.defineProperty(nt,"__esModule",{value:!0});var vn=nt.default=void 0,y=S;function xa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ba(e,t,n){return t&&$t(e.prototype,t),n&&$t(e,n),e}var Sa=function(){function e(){xa(this,e),this.browserSupport="speechSynthesis"in window&&"SpeechSynthesisUtterance"in window,this.synthesisVoice=null}return ba(e,[{key:"init",value:function(){var n=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(r,s){n.browserSupport||s("Your browser does not support Speech Synthesis");var a=(0,y.isNil)(i.listeners)?{}:i.listeners,o=(0,y.isNil)(i.splitSentences)?!0:i.splitSentences,l=(0,y.isNil)(i.lang)?void 0:i.lang,c=(0,y.isNil)(i.volume)?1:i.volume,u=(0,y.isNil)(i.rate)?1:i.rate,h=(0,y.isNil)(i.pitch)?1:i.pitch,g=(0,y.isNil)(i.voice)?void 0:i.voice;Object.keys(a).forEach(function(f){var d=a[f],x=function(k){d&&d(k)};f!=="onvoiceschanged"&&(speechSynthesis[f]=x)}),n._loadVoices().then(function(f){a.onvoiceschanged&&a.onvoiceschanged(f),!(0,y.isNil)(l)&&n.setLanguage(l),!(0,y.isNil)(g)&&n.setVoice(g),!(0,y.isNil)(c)&&n.setVolume(c),!(0,y.isNil)(u)&&n.setRate(u),!(0,y.isNil)(h)&&n.setPitch(h),!(0,y.isNil)(o)&&n.setSplitSentences(o),r({voices:f,lang:n.lang,voice:n.voice,volume:n.volume,rate:n.rate,pitch:n.pitch,splitSentences:n.splitSentences,browserSupport:n.browserSupport})}).catch(function(f){s(f)})})}},{key:"_fetchVoices",value:function(){return new Promise(function(n,i){setTimeout(function(){var r=speechSynthesis.getVoices();return(0,y.size)(r)>0?n(r):i("Could not fetch voices")},100)})}},{key:"_loadVoices",value:function(){var n=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;return this._fetchVoices().catch(function(r){if(i===0)throw r;return n._loadVoices(i-1)})}},{key:"hasBrowserSupport",value:function(){return this.browserSupport}},{key:"setVoice",value:function(n){var i,r=speechSynthesis.getVoices();if((0,y.isString)(n)&&(i=r.find(function(s){return s.name===n})),(0,y.isObject)(n)&&(i=n),i)this.synthesisVoice=i;else throw"Error setting voice. The voice you passed is not valid or the voices have not been loaded yet."}},{key:"setLanguage",value:function(n){if(n=n.replace("_","-"),(0,y.validateLocale)(n))this.lang=n;else throw"Error setting language. Please verify your locale is BCP47 format (http://schneegans.de/lv/?tags=es-FR&format=text)"}},{key:"setVolume",value:function(n){if(n=parseFloat(n),!(0,y.isNan)(n)&&n>=0&&n<=1)this.volume=n;else throw"Error setting volume. Please verify your volume value is a number between 0 and 1."}},{key:"setRate",value:function(n){if(n=parseFloat(n),!(0,y.isNan)(n)&&n>=0&&n<=10)this.rate=n;else throw"Error setting rate. Please verify your volume value is a number between 0 and 10."}},{key:"setPitch",value:function(n){if(n=parseFloat(n),!(0,y.isNan)(n)&&n>=0&&n<=2)this.pitch=n;else throw"Error setting pitch. Please verify your pitch value is a number between 0 and 2."}},{key:"setSplitSentences",value:function(n){this.splitSentences=n}},{key:"speak",value:function(n){var i=this;return new Promise(function(r,s){var a=n.text,o=n.listeners,l=o===void 0?{}:o,c=n.queue,u=c===void 0?!0:c,h=(0,y.trim)(a);(0,y.isNil)(h)&&r(),!u&&i.cancel();var g=[],f=i.splitSentences?(0,y.splitSentences)(h):[h];f.forEach(function(d,x){var T=x===(0,y.size)(f)-1,k=new SpeechSynthesisUtterance;i.synthesisVoice&&(k.voice=i.synthesisVoice),i.lang&&(k.lang=i.lang),i.volume&&(k.volume=i.volume),i.rate&&(k.rate=i.rate),i.pitch&&(k.pitch=i.pitch),k.text=d,Object.keys(l).forEach(function(A){var U=l[A],he=function(it){U&&U(it),A==="onerror"&&s({utterances:g,lastUtterance:k,error:it}),A==="onend"&&T&&r({utterances:g,lastUtterance:k})};k[A]=he}),g.push(k),speechSynthesis.speak(k)})})}},{key:"pending",value:function(){return speechSynthesis.pending}},{key:"paused",value:function(){return speechSynthesis.paused}},{key:"speaking",value:function(){return speechSynthesis.speaking}},{key:"pause",value:function(){speechSynthesis.pause()}},{key:"resume",value:function(){speechSynthesis.resume()}},{key:"cancel",value:function(){speechSynthesis.cancel()}}]),e}(),ka=Sa;vn=nt.default=ka;const It={Thai:"Thai Female",\u0E44\u0E17\u0E22:"Thai Female",italiano:"Italian Female",Kiswahili:"Swahili Male",\u0440\u0443\u0441\u0441\u043A\u0438\u0439:"Russian Female","espa\xF1ol-US":"Spanish Latin American Female","espa\xF1ol-ES":"Spanish Female",Deutsch:"Deutsch Female",fran\u00E7ais:"French Female",\u65E5\u672C\u8A9E:"Japanese Female",\uD55C\uAD6D\uC758:"Korean Female","Eng-UK-Fem":"UK English Female","Eng-UK-Male":"UK English Male","Eng-US":"US English Male","Bahasa Indonesia":"Indonesian Female","portugu\xEAs do Brasil":"Brazilian Portuguese Female","\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09":"Chinese Male","\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09":"Chinese Female","\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09":"Chinese Female",polski:"Polish Female",Nederlands:"Dutch Female","Google \u0939\u093F\u0928\u094D\u0926\u0940":"Hindi Female",Greek:"Greek Female",Swedish:"Swedish Female",Norweigen:"Norweigen Female",Icelandic:"Icelandic Female",Finnish:"Finnish Female",T\u00FCrkiye:"Turkish Male",Hungarian:"Hungarian Female",Croatian:"Croatian Female",Bosnian:"Bosnian Female",Serbian:"Serbian Female",Romanian:"Romanian Female",Arabic:"Arabic Male",Armenian:"Armenian Male",Czech:"Czech Female",Vietnamese:"Vietnamese Female",Danish:"Danish Female",Tamil:"Tamil Male"},ce="https://readingedgeca.s3.us-west-1.amazonaws.com/static/pub/img/readingedge_nowords.png",Na="https://readingedgeca.s3.us-west-1.amazonaws.com/static/pub/img/reading_edge_200x200.png",b="4610197597210819",Et=()=>Math.random().toString().slice(2,20),Z=()=>{const e=Date.now();return ga.formatDate(e,"MMDDYY-HH:mm:ss")},G={Thai:{flagName:"fi fi-th",langName:"th",speechLang:"th",longName:"Thai",voice:"Thai Female"},\u0E44\u0E17\u0E22:{flagName:"fi fi-th",langName:"th",speechLang:"th",longName:"Thai",voice:"Thai Female"},"Eng-US":{flagName:"fi fi-us",langName:"en",speechLang:"en-US",longName:"English",voice:"Google US English"},"Eng-UK-Fem":{flagName:"fi fi-gb",langName:"en",speechLang:"en-GB",longName:"English",voice:"Google UK English Female"},"Eng-UK-Male":{flagName:"fi fi-gb",langName:"en",speechLang:"en-GB",longName:"English",voice:"Google UK English Male"},"espa\xF1ol-ES":{flagName:"fi fi-es",langName:"es",speechLang:"es-ES",longName:"espa\xF1ol",voice:"Google espa\xF1ol"},"espa\xF1ol-US":{flagName:"fi fi-mx",langName:"es",speechLang:"es-US",longName:"espa\xF1ol",voice:"Google espa\xF1ol de Estados Unidos"},fran\u00E7ais:{flagName:"fi fi-fr",langName:"fr",speechLang:"fr-FR",longName:"fran\xE7ais",voice:"Google fran\xE7ais"},Deutsch:{flagName:"fi fi-de",langName:"de",speechLang:"de-DE",longName:"Deutsch",voice:"Google Deutsch"},italiano:{flagName:"fi fi-it",langName:"it",speechLang:"it-IT",longName:"italiano",voice:"Google italiano"},"portugu\xEAs do Brasil":{flagName:"fi fi-br",langName:"pt",speechLang:"pt-BR",longName:"portugu\xEAs",voice:"Google portugu\xEAs do Brasil"},Kiswahili:{flagName:"fi fi-ke",langName:"sw",speechLang:"en-GB",longName:"Kiswahili",voice:"Google UK English Female"},\u0440\u0443\u0441\u0441\u043A\u0438\u0439:{flagName:"fi fi-ru",langName:"ru",speechLang:"ru-RU",longName:"\u0440\u0443\u0441\u0441\u043A\u0438\u0439",voice:"Google \u0440\u0443\u0441\u0441\u043A\u0438\u0439"},"\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09":{flagName:"fi fi-cn",langName:"zh",speechLang:"zh-CN",longName:"\u4E2D\u6587",voice:"Google \u570B\u8A9E\uFF08\u81FA\u7063\uFF09"},"\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09":{flagName:"fi fi-hk",langName:"zh",speechLang:"zh-HK",longName:"\u4E2D\u6587",voice:"Google \u570B\u8A9E\uFF08\u81FA\u7063\uFF09"},"\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09":{flagName:"fi fi-tw",langName:"zh",speechLang:"zh-TW",longName:"\u4E2D\u6587",voice:"Google \u570B\u8A9E\uFF08\u81FA\u7063\uFF09"},\uD55C\uAD6D\uC758:{flagName:"fi fi-kr",langName:"ko",speechLang:"ko-KR",longName:"\uD55C\uAD6D\uC758",voice:"Google \uD55C\uAD6D\uC758"},\u65E5\u672C\u8A9E:{flagName:"fi fi-jp",langName:"ja",longName:"\u65E5\u672C\u8A9E",voice:"Google \u65E5\u672C\u8A9E"},"Bahasa Indonesia":{flagName:"fi fi-id",langName:"id",longName:"Bahasa Indonesia",voice:"Google Bahasa Indonesia"},"Google \u0939\u093F\u0928\u094D\u0926\u0940":{flagName:"fi fi-in",langName:"hi",longName:"Google \u0939\u093F\u0928\u094D\u0926\u0940",voice:"Google \u0939\u093F\u0928\u094D\u0926\u0940"},polski:{flagName:"fi fi-pl",langName:"pl",longName:"Google polski",voice:"Google polski"},Nederlands:{flagName:"fi fi-nl",langName:"nl",longName:"Google Nederlands",voice:"Google Nederlands"},Greek:{flagName:"fi fi-gr",langName:"gr",longName:"Greek",voice:"Greek Male"},Swedish:{flagName:"fi fi-se",langName:"se",longName:"Swedish",voice:"Swedish"},Norweigen:{flagName:"fi fi-no",langName:"no",longName:"Norweigen",voice:"Norweigen"},Icelandic:{flagName:"fi fi-is",langName:"is",longName:"Icelandic",voice:"Icelandic"},Finnish:{flagName:"fi fi-fi",langName:"fi",longName:"Finnish",voice:"Finnish"},T\u00FCrkiye:{flagName:"fi fi-tr",langName:"tr",longName:"T\xFCrkiye",voice:"T\xFCrkiye"},Hungarian:{flagName:"fi fi-hu",langName:"hu",longName:"Hungarian",voice:"Hungarian"},Romanian:{flagName:"fi fi-ro",langName:"ro",longName:"Romanian",voice:"Romanian"},Arabic:{flagName:"fi fi-sa",langName:"ar-sa",longName:"Arabic",voice:"Arabic"},Czech:{flagName:"fi fi-cz",langName:"cz",longName:"Czech",voice:"Czech"},Vietnamese:{flagName:"fi fi-vn",langName:"vn",longName:"Vietnamese",voice:"Vietnamese"},Danish:{flagName:"fi fi-dk",langName:"dk",longName:"Danish",voice:"Danish"},Tamil:{flagName:"fi fi-lk",langName:"ta",longName:"Tamil",voice:"Tamil"}},Da={title:"New Course",assignments:[],courseKey:"-",created:"",updated:"",enrollment:[],coverUrl:ce,owner:"-"},Ma={id:null,title:"My Assignment",goal:100,points:0,pages:[],created:null,updated:null,coverUrl:ce,scores:{}},Tt={dummyId:null,langVoiceKey:"Eng-UK-Fem",currentLangLinks:[],pageType:4,pageid:null,pageTitle:"Page Template",guideWords:"",imgIdx:0,imgs:[{url:ce,cap:"Welcome to Reading Edge!"}],pctReplace:15,pageText:"At the heart of Reading Edge is a simple paragraph reconstruction activity in which the student first reads a short paragraph and is then asked to reconstruct it by replacing a random handful of words in their correct places.",pageFontSize:14,canonicalUrl:Na,mapCoords:"36.11,-115.17"},$a={resLimit:50,imgLimit:20,pctReplace:15,pageFontSize:14,textColor:"#CCE6FF",secondaryColor:"#666666",accentColor:"#7f7f7f",positiveColor:"#2E8A57",langVoiceKey:"Eng-UK-Fem",langVoices:Object.keys(G)},Ia={url:ce,cap:"Welcome to Reading Edge!"},Fa=xn("store",{state:()=>({prod:_(!0),tts:_(!0),router:bn(),authenticated:_(!1),subscribed:_(!1),role:_(null),ck:_(null),aid:_(null),pgIdx:_(null),imgIdx:_(null),imgFit:_(!0),autoplay:_(!1),courses:_({}),userSnapshot:_(null),speech:new vn,speechInitialized:_(!1),carousel:_(null),landings:_({}),visitors:_({}),showPreview:_(!1),showText:_(!0),showGradebook:_(!1)}),persist:{beforeRestore:e=>{console.log(`about to restore '${e.store.$id}'`),console.log("this.authenticated",Te.getItem("authenticated"))},afterRestore:e=>{console.log(`just restored '${e.store.$id}'`),console.log("this.authenticated",Te.getItem("authenticated")),rt.isActive||rt.toggle()},debug:!0,paths:["authenticated","userSnapshot","courses","ck","aid","imgIdx","pgIdx","subscribed","role"]},getters:{demoCK(e){return b},currentCourse(e){return this.ck?this.courses[this.ck]:null},currentAssignment(e){return this.ck&&this.aid?this.courses[this.ck].assignments[this.aid]:null},currentPage(e){return this.ck!==null&&this.aid!==null&&this.pgIdx!==null&&this.pgIdx>-1?this.courses[this.ck].assignments[this.aid].pages[this.pgIdx]:null},currentImage(e){if(this.ck!==null&&this.aid!==null&&this.aid>-1&&this.pgIdx!==null&&this.pgIdx>-1&&this.imgIdx!==null)try{return this.courses[this.ck].assignments[this.aid].pages[this.pgIdx].imgs[this.imgIdx]}catch(t){console.log(t,"returning null")}return null},emailKey(e){try{return e.userSnapshot.profile.emailKey}catch{return null}},teaching(e){try{return e.userSnapshot.teaching}catch{}return[]},taking(e){try{return e.userSnapshot.taking}catch{}return[]},logo2(e){return ce},voices(e){return It},langVoices(e){return G},pageTemplate(e){return Tt},pageid(e){try{return this.currentPage.pageId}catch{return null}}},actions:{toggleText(){console.log("toggleText",this.showText),this.showText===!1?(this.showText=!0,console.log("showing text"),ge(".assignment").classed("hidden",!1),ge(".q-carousel__thumbnail").classed("hidden",!1)):(this.showText=!1,console.log("hiding text"),ge(".assignment").classed("hidden",!0),ge(".q-carousel__thumbnail").classed("hidden",!0))},logout(){this.userSnapshot=null,this.authenticated=!1,this.subscribed=!1,this.role=null,this.courses={},this.ck=this.aid=this.pgIdx=this.imgIdx=null,this.router.push("/"),Te.clear()},newImage(){if(this.ck===b&&this.emailKey!=="charlie_at_readingedge_dot_org"){this.notify({msg:"Insufficient permissions"});return}if(this.checkQuota("image")>=Object.keys(this.userSnapshot.images).length){this.notify({msg:"You have reached your quota of images: "+this.checkQuota("image")});return}const e=JSON.parse(JSON.stringify(Ia));this.currentPage.imgs.push(e)},newCourse(){if(this.emailKey==="demo_at_readingedge_dot_org"){this.notify({msg:"Insufficient permissions, please login first"});return}if(Object.keys(this.courses).length>=this.checkQuota("course")){this.notify({msg:"You have reached your quota of courses: "+this.checkQuota("course")});return}console.log("newCourse");const e=JSON.parse(JSON.stringify(Da)),t=Z();let n=0;for(const[r,s]of Object.entries(this.courses))console.log(n,r,s),s.title.indexOf("C-")>-1&&(n+=1);e.title="C-"+n,e.created=t,e.updated=t,e.courseKey=Math.random().toString().slice(2,20),this.ck=e.courseKey,this.aid=null,e.enrollment={},e.assignments={},e.owner=this.userSnapshot.profile.emailKey,this.updateSnapshot("add-teaching",e),this.courses[e.courseKey]=e;const i=`courses/${e.courseKey}`;return $(m(v,i),this.courses[e.courseKey]),e.courseKey},loadPage(e){this.pgIdx=e},async refreshVisitors(){console.log("store.refreshVisitors");const e="visitors/",t=m(H());console.log(t),await R(K(t,e)).then(n=>{console.log(n.val()),console.log("Total Visitors",Object.keys(n.val()).length),this.visitors=n.val()})},async refreshLPs(){console.log("store.refreshLPs");const e="landings/",t=m(H());console.log(t),await R(K(t,e)).then(n=>{console.log(n.val());for(const[i,r]of Object.entries(n.val()))console.log(i,r);console.log("Total Landings",Object.keys(n.val()).length),this.landings=n.val()})},async loadCourses(e){console.log("loadCourses ",e);const t=m(H());for(const[n,i]of Object.entries(this.courses))delete this.courses[n],console.log(i.title);if(this.courses={},this.role==="teacher"){this.teaching||(this.teaching={});for(const[n,i]of Object.entries(this.teaching)){console.log("k, v ",n,i);const r=`courses/${n}`;await R(K(t,r)).then(s=>{if(s.exists()){const a=s.val();a.enrollment||(a.enrollment={}),a.assignments||(a.assignments={}),this.courses[n]=a;for(const[o,l]of Object.entries(a.assignments))(!l.pages||l.pages==="undefined")&&(console.log("checking for pages ",o),l.pages=[])}else console.log("failed to load course",n,i)})}this.ck=null,this.aid=null}else if(this.role==="student"){this.taking||(this.taking={});for(const[n,i]of Object.entries(this.taking)){console.log("k, v ",n,i);const r=`courses/${n}`;await R(K(t,r)).then(s=>{if(s.exists()){const a=s.val();a.assignments||(a.assignments={}),this.courses[n]=a;for(const[o,l]of Object.entries(a.assignments))(!l.pages||l.pages==="undefined")&&(console.log("checking for pages ",o),l.pages=[])}else console.log("failed to load course",n,i)})}}else console.log("No courses loaded b/c no role")},newAssignment(){const e=JSON.parse(JSON.stringify(Ma));e.pages=[],e.id=Et();let t=0;for(const[i,r]of Object.entries(this.currentCourse.assignments)){try{r.title.indexOf("A-")>-1&&(t+=1)}catch(s){console.log(s)}console.log(t,i,r)}e.title="A-"+t;const n=Z();if(e.created=n,e.updated=n,Object.keys(this.currentCourse.assignments).length>=this.checkQuota("assignment")){this.notify({msg:"You have reached your quota of assignments: "+this.checkQuota("assignment")});return}return this.courses[this.ck].assignments[e.id]=e,this.aid===-1&&(this.aid=e.id),e.id},newPage(){const e=JSON.parse(JSON.stringify(Tt));if(e.dummyId=Math.random(),e.langVoiceKey=this.userSnapshot.preferences.langVoiceKey,e.pctReplace=this.userSnapshot.preferences.pctReplace,this.currentAssignment.pages||(this.currentAssignment.pages=[]),this.currentAssignment.pages.length>=this.checkQuota("page")){this.notify({msg:"You have reached your quota of pages: "+this.checkQuota("page")});return}this.currentAssignment.pages.push(e)},createUser(e,t){console.log("createUser",t.currentUser.uid);const n=t.currentUser.email.replace("@","_at_").replace(".","_dot_"),i={uid:t.currentUser.uid,email:t.currentUser.email,emailKey:n,name:t.currentUser.displayName?t.currentUser.displayName:t.currentUser.email,picture:t.currentUser.photoURL,points:0},r={uid:t.currentUser.uid,type:"free",renewalDate:null,verified:t.currentUser.emailVerified,network:e,ip:"0.0.0.0"},s=JSON.parse(JSON.stringify($a));return this.userSnapshot={account:r,profile:i,teaching:{},taking:{},preferences:s},Ae("https://jsonip.com/").then(a=>{console.log(a.data.ip),r.ip=a.data.ip,fe(m(v,`users/${n}`),this.userSnapshot),console.log("okay done")}),fe(m(v,`users/${n}`),this.userSnapshot),this.role="teacher",Object.keys(this.userSnapshot.taking).indexOf(b)>-1?console.log("already have demo taking"):this.enroll(b),Object.keys(this.userSnapshot.teaching).indexOf(b)>-1?console.log("already have demo teaching"):this.updateSnapshot("add-teaching",{courseKey:b}),this.loadCourses(n),this.router.push("/courses"),!0},goHome(){this.imgIdx=null,this.pgIdx=null,this.aidx=null,this.ck=null,this.router.push("/courses")},async goDemo(){const e=m(H());await R(K(e,"users/demo_at_readingedge_dot_org")).then(n=>{n.exists()&&(console.log("checkUser would like to return TRUE now"),this.authenticated=!0,this.role="teacher",this.userSnapshot=n.val(),this.userSnapshot.teaching||(this.userSnapshot.teaching={}),this.userSnapshot.taking||(this.userSnapshot.taking={}),this.userSnapshot.preferences.langVoices=Object.keys(G),this.loadCourses("demo_at_readingedge_dot_org").then(()=>{console.log("courses loaded"),this.randDemoCB()}))})},async checkUser(e){console.log(e,v,Q),Q.currentUser.email==="ccosse2023@gmail.com"&&(Q.currentUser.email="demo@readingedge.org");const t=Q.currentUser.email.replace("@","_at_").replace(".","_dot_");console.log("emailKey: ",t);const n=m(H()),i=`users/${t}`;await R(K(n,i)).then(async r=>{if(r.exists()){console.log("checkUser would like to return TRUE now"),this.authenticated=!0,this.role="teacher",this.userSnapshot=r.val(),this.userSnapshot.teaching||(this.userSnapshot.teaching={}),this.userSnapshot.taking||(this.userSnapshot.taking={}),this.userSnapshot.bookmarks||(this.userSnapshot.bookmarks={}),this.userSnapshot.images||(this.userSnapshot.images={}),this.userSnapshot.preferences.langVoices=Object.keys(G),Object.keys(this.userSnapshot.taking).indexOf(b)>-1?console.log("already have demo taking"):this.enroll(b),Object.keys(this.userSnapshot.teaching).indexOf(b)>-1?console.log("already have demo teaching"):this.updateSnapshot("add-teaching",{courseKey:b});const s=st(at(ot,"customers"),kn("email","==",Q.currentUser.email)),a=await lt(s);return console.log(a),a.forEach(async o=>{console.log(`${o.id} => ${Object.keys(o.data())}`);const l=st(at(ot,`customers/${o.id}/subscriptions`));(await lt(l)).forEach(u=>{console.log(u.data()),u.data().current_period_end.seconds>Date.now()/1e6?(console.log("This user is SUBSCRIBED!!"),this.subscribed=1):console.log("Ehh",u.data().current_period_end.seconds,Date.now()/1e6)})}),this.loadCourses(t),this.router.push("/courses"),!0}else return console.log("checkUser would like to return FALSE now"),this.createUser(e,Q)}).catch(r=>(console.log(r),!1))},logLanding(e){Ae("https://jsonip.com/").then(t=>{console.log(t.data.ip);const n=t.data.ip,i={pg:e,ip:n};fe(m(v,`landings/${Z()}-${e}`),i),console.log("landing logged to dbRT")})},logIP(){Ae("https://jsonip.com/").then(e=>{console.log(e.data.ip);const t=e.data.ip;t!=="2600:8801:2e8f:9800:f9df:31a7:8022:9e9e"&&(fe(m(v,`visitors/${Z()}`),t),console.log("ip logged to dbRT"))})},updateSnapshot(e,t){if(this.emailKey==="demo_at_readingedge_dot_org"){this.notify({msg:"Demo account cannot save"});return}if(console.log("updateSnapshot",e,t),e==="save-preferences"){const n=`users/${this.userSnapshot.profile.emailKey}/preferences`;$(m(v,n),this.userSnapshot.preferences),this.notify({msg:"preferences saved"})}else if(e==="save-profile"){const n=`users/${this.emailKey}/profile`;$(m(v,n),this.userSnapshot.profile),this.notify({msg:"profile saved"})}else if(e==="add-teaching"){const n=t;if(n.owner=this.userSnapshot.profile.emailKey,this.userSnapshot.teaching||(this.userSnapshot.teaching={}),this.userSnapshot.teaching[n.courseKey]={ck:n.courseKey},this.emailKey==="demo_at_readingedge_dot_org"){this.notify({msg:"Insufficient permissions to save"});return}const i=`users/${this.userSnapshot.profile.emailKey}/teaching/${n.courseKey}`;$(m(v,i),this.userSnapshot.teaching[n.courseKey]);const r=`courses/${n.courseKey}`;$(m(v,r),n)}},async removeTaking(e,t){console.log("removeTaking ",e,t);const n=m(H()),i=`users/${t}`;await R(K(n,i)).then(async r=>{if(r.exists()){const s=r.val();console.log("snapshot obtained",s.taking),delete s.taking[e];const a=`users/${t}/taking/${e}`;V(m(v,a)),console.log("removed "),this.notify({msg:"Student profile updated"})}})},async enroll(e){if(this.ck===b&&this.emailKey!=="charlie_at_readingedge_dot_org"){this.notify({msg:"Insufficient permissions"});return}console.log("store.getOrCreateEnrollment: ",e);const t={name:this.userSnapshot.profile.name,emailKey:this.emailKey};this.courses||(this.courses={});const n=m(H()),i=`courses/${e}`;await R(K(n,i)).then(r=>{if(r.exists()){if(console.log("Got course:",r.key),this.courses[e]=r.val(),this.courses[e].enrollment||(this.courses[e].enrollment={}),Object.keys(this.courses[e].enrollment)>=this.checkQuota("enrollment")){this.notify({msg:"You have reached your enrollment quota for this course "+this.checkQuota("enrollment")});return}this.courses[e].enrollment[this.emailKey]=t;const s=`courses/${e}/enrollment/${this.emailKey}`;$(m(v,s),t);const a={ck:e};this.userSnapshot.taking||(this.userSnapshot.taking={}),this.userSnapshot.taking[e]=a;const o=`users/${this.emailKey}/taking/${e}`;$(m(v,o),a)}else console.log("Course not found: ",e)}).catch(r=>{console.log(r)})},commitCourse(e){if(this.ck===b&&this.emailKey!=="charlie_at_readingedge_dot_org"){this.notify({msg:"Insufficient permissions"});return}this.courses[e].updated=Z();const t=`courses/${e}`;$(m(v,t),this.courses[e]),this.notify({msg:"The current course was saved to the cloud."})},commitCurrentAssignment(){if(this.ck===b&&this.emailKey!=="charlie_at_readingedge_dot_org"){this.notify({msg:"Insufficient permissions to save"});return}if(this.emailKey==="demo_at_readingedge_dot_org"){this.notify({msg:"Insufficient permissions to save, please login"});return}this.courses[this.ck].assignments[this.aid].updated=Z();for(const t of this.courses[this.ck].assignments[this.aid].pages)t.currentLangLinks||(t.currentLangLinks=[]);const e=`courses/${this.ck}/assignments/${this.aid}`;$(m(v,e),this.courses[this.ck].assignments[this.aid]),this.notify({msg:"The current assignment was saved to the cloud"})},async initSpeech(){this.speechInitialized||(await this.speech.init({voice:"Google UK English Female"}).then(e=>{console.log(e.voices)}),this.speechInitialized=!0)},async speakText(e){this.tts===!0?window.responsiveVoice.isPlaying()?window.responsiveVoice.cancel():window.responsiveVoice.speak(e,It[this.currentPage.langVoiceKey]):(console.log("speakText"),this.speechInitialized||await this.initSpeech(),this.speech.setLanguage(G[this.currentPage.langVoiceKey].langName),console.log("speak setVoice ",G[this.currentPage.langVoiceKey].voice),this.speech.setVoice(G[this.currentPage.langVoiceKey].voice),await this.speech.speak({text:e,queue:!1}).then(()=>{console.log("Success!")}).catch(t=>{console.error("Error in speech",t)}))},notify({msg:e="",color:t="positive",icon:n="info",position:i="bottom"}={}){Sn.create({message:e,color:t,textColor:"gold",icon:n,position:i,html:!0})},deleteCourse(e){if(e===b&&this.emailKey!=="charlie_at_readingedge_dot_org"){this.notify({msg:"Cannot delete Demo"});return}if(this.userSnapshot.teaching[e]){const n=`users/${this.userSnapshot.profile.emailKey}/teaching/${e}`;V(m(v,n),this.userSnapshot.teaching[e]),delete this.userSnapshot.teaching[e]}if(this.userSnapshot.taking[e]){const n=`users/${this.userSnapshot.profile.emailKey}/taking/${e}`;V(m(v,n),this.userSnapshot.taking[e]),delete this.userSnapshot.taking[e]}const t=`courses/${e}`;V(m(v,t),this.courses[e]),delete this.courses[e],this.aid=null,this.ck=null,this.notify({msg:"Course deleted, changes saved"})},deleteAssignment(e,t){this.ck===b&&this.emailKey!=="charlie_at_readingedge_dot_org"&&this.notify({msg:"Cannot delete from Demo"}),console.log("store deleteAssignment ",e,t);const n=`courses/${e}/assignments/${t}`;V(m(v,n)),delete this.courses[e].assignments[t],this.aid=null,this.notify({msg:"assignment deleted, changes saved"})},saveImage(){if(this.emailKey==="demo_at_readingedge_dot_org"){this.notify({msg:"Insufficient permissions to save"});return}if(this.ck===b&&this.emailKey!=="charlie_at_readingedge_dot_org"){this.notify({msg:"Insufficient permissions to save"});return}if(this.userSnapshot.images||(this.userSnapshot.images={}),Object.keys(this.userSnapshot.images).length>this.checkQuota("image")){this.notify({msg:"You have reached your quota<br>for number of images: "+this.checkQuota("image")});return}const e=JSON.parse(JSON.stringify(this.currentPage.imgs[this.imgIdx]));e.tags=[],this.userSnapshot.images[Et()]=e;const t=`users/${this.userSnapshot.profile.emailKey}/images`;$(m(v,t),this.userSnapshot.images),this.notify({msg:"Image saved"})},checkQuota(e){const t={subscribed:{bookmark:100,image:100,page:50,assignment:30,course:10,enrollment:30},free:{bookmark:30,image:30,page:30,assignment:5,course:3,enrollment:3}};return this.subscribed?t.subscribed[e]:t.free[e]},saveBookmark(){if(this.emailKey==="demo_at_readingedge_dot_org"){this.notify({msg:"Insufficient permissions to save"});return}if(this.userSnapshot.bookmarks||(this.userSnapshot.bookmarks={}),Object.keys(this.userSnapshot.bookmarks).length>this.checkQuota("bookmark")){this.notify({msg:"You have reached your quota<br>for number of bookmarks: "+this.checkQuota("bookmark")});return}this.userSnapshot.bookmarks[this.currentPage.pageTitle]={pageid:this.currentPage.pageid,title:this.currentPage.pageTitle,langVoiceKey:this.currentPage.langVoiceKey,tags:[]};const e=`users/${this.userSnapshot.profile.emailKey}/bookmarks`;$(m(v,e),this.userSnapshot.bookmarks),this.notify({msg:"Bookmark saved"})},removeBookmark(e){if(this.emailKey==="demo_at_readingedge_dot_org"){this.notify({msg:"Insufficient permissions to save, please login"});return}const t=`users/${this.userSnapshot.profile.emailKey}/bookmarks/${e}`;V(m(v,t),this.userSnapshot.bookmarks[e]),delete this.userSnapshot.bookmarks[e],this.notify({msg:"Bookmark deleted"})},removeImage(e){if(this.ck===b&&this.emailKey!=="charlie_at_readingedge_dot_org"){this.notify({msg:"Insufficient permissions to save"});return}if(this.emailKey==="demo_at_readingedge_dot_org"){this.notify({msg:"Insufficient permissions to save, please login"});return}console.log("removeImage: ",e);const t=`users/${this.userSnapshot.profile.emailKey}/images/${e}`;V(m(v,t),this.userSnapshot.images[e]),delete this.userSnapshot.images[e],this.notify({msg:"Image deleted"})},switchRole(){this.showGradebook=!1,this.authenticated&&(this.ck=null,this.aid=null,this.pgIdx=null,this.imgIdx=null,this.role==="teacher"?this.role="student":this.role="teacher"),this.loadCourses(this.emailKey),this.notify({msg:"Your role changed to "+this.role}),window.setTimeout(()=>{this.router.push("/courses")},2e3)},randDemoCB(){this.ck=b;const e=Object.keys(this.currentCourse.assignments);console.log(e);const t=parseInt(Math.random()*e.length);this.aid=e[t],this.pgIdx=0,this.imgIdx=0,this.role="student",this.router.push("/viewer")}}});export{M as S,Js as _,Oa as a,ga as d,ha as f,mn as g,Ls as j,Bt as r,ge as s,Ca as t,Fa as u};
