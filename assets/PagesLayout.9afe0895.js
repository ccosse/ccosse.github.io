import{d as f,v as u,n as Q,_ as h,r as m,o as s,c as P,w as r,E as g,I as x,R as D,V as $,a as t,S as b,F as I,P as d,Q as i}from"./index.75ce3f9e.js";import{Q as S}from"./QSpace.8bf19bf0.js";import{a as V,Q as y,b as c}from"./QDrawer.53439135.js";import{Q as B,a as A}from"./QLayout.3b92d25c.js";import{u as w}from"./store.eabfb0c8.js";import{Q as O}from"./QCard.3be6014c.js";import{Q as L}from"./QScrollArea.1f8cfbe4.js";import{T}from"./TileComponent.4e170472.js";import{W as U}from"./WPComponent.92d5ca1a.js";import"./use-prevent-scroll.2fa1ab15.js";import"./scroll.42015229.js";import"./use-model-toggle.bb69684b.js";import"./use-dark.f6f8b257.js";import"./TouchPan.7e30e1dc.js";import"./touch.b059422d.js";import"./firebase.f7873474.js";import"./axios.84ae42e4.js";import"./QImg.a7c6a41d.js";import"./QCardSection.862a8d6a.js";import"./QMenu.417ec07b.js";import"./position-engine.dd15efb9.js";import"./focusout.755806d2.js";import"./use-form.a034d4ea.js";import"./ClosePopup.11a1f1ad.js";import"./QKnob.b39ef241.js";import"./QSelect.a05b6f0f.js";import"./QInput.c864b00d.js";import"./uid.42677368.js";import"./QExpansionItem.11d30c92.js";import"./QBar.5424d63d.js";import"./QTooltip.7a24e53e.js";import"./QList.a73a0ee7.js";import"./transform.9aa67f3e.js";import"./selectAll.be636dd1.js";const R=f({name:"PagePager",components:{TileComponent:T},props:[],setup(){const o=u(null);return{store:w(),pagePagerScrollArea:o}},mounted(){Q(this.store.currentAssignment.pages,async(o,e)=>{console.log("newPage detected, scrolling to 1.0"),this.pagePagerScrollArea.setScrollPercentage("vertical",1)})},methods:{newPageCB(){this.store.newPage(),this.pagePagerScrollArea.setScrollPercentage("vertical",1)}}}),W=I("div",{class:"text-center text-h6"},"My Pages",-1),F={key:0};function N(o,e,v,C,_,k){const p=m("TileComponent");return s(),P(L,{style:{height:"95vh"},ref:"pagePagerScrollArea"},{default:r(()=>[W,this.store.currentCourse?(s(),g("span",F,[(s(!0),g(x,null,D(this.store.currentAssignment.pages,(a,l)=>(s(),g("span",{key:l},[t(p,{tileData:a,imgUrl:a.imgs&&a.imgs.length>0?a.imgs[0].url:"",targetUrl:null,ck:this.store.ck,aid:this.store.aid,pgIdx:l,imgIdx:0,tileType:"page"},null,8,["tileData","imgUrl","ck","aid","pgIdx"])]))),128))])):$("",!0),t(O,{flat:"",bordered:"",class:"q-ma-md q-pa-md cursor-pointer tile-component flex flex-center",onClick:e[0]||(e[0]=a=>this.newPageCB())},{default:r(()=>[t(b,{name:"add",class:"text-h1"})]),_:1})]),_:1},512)}var j=h(R,[["render",N]]);const q=f({name:"PagesLayout",components:{PagePager:j,WPComponent:U},setup(){const o=u(!1),e=u(!1);return{store:w(),leftDrawerOpen:o,toggleLeftDrawer(){o.value=!o.value},rightDrawerOpen:e,toggleRightDrawer(){e.value=!e.value}}},mounted(){d.isActive||d.toggle()},methods:{goBack(){this.store.pgIdx!==null?(this.store.pgIdx=null,this.store.imgIdx=null):(this.store.pgIdx=null,this.store.imgIdx=null,this.store.router.push("/assignments"))}}});function E(o,e,v,C,_,k){const p=m("WPComponent"),a=m("PagePager"),l=m("router-view");return s(),P(B,{view:"hHh lpR fFf"},{default:r(()=>[t(y,{bordered:"",class:"bg-positive text-white"},{default:r(()=>[t(V,null,{default:r(()=>[t(i,{flat:"",round:"",icon:"menu",onClick:o.toggleLeftDrawer},null,8,["onClick"]),t(i,{flat:"",round:"",icon:"arrow_back",onClick:e[0]||(e[0]=n=>this.goBack())}),t(S),t(i,{flat:"",round:"",icon:"logout",onClick:e[1]||(e[1]=n=>this.store.logout())}),t(i,{flat:"",round:"",icon:"menu",onClick:o.toggleRightDrawer},null,8,["onClick"])]),_:1})]),_:1}),t(c,{"show-if-above":"",modelValue:o.leftDrawerOpen,"onUpdate:modelValue":e[2]||(e[2]=n=>o.leftDrawerOpen=n),side:"left",bordered:""},{default:r(()=>[t(p)]),_:1},8,["modelValue"]),t(c,{"show-if-above":"",modelValue:o.rightDrawerOpen,"onUpdate:modelValue":e[3]||(e[3]=n=>o.rightDrawerOpen=n),side:"right",bordered:""},{default:r(()=>[t(a)]),_:1},8,["modelValue"]),t(A,null,{default:r(()=>[t(l)]),_:1})]),_:1})}var De=h(q,[["render",E]]);export{De as default};
