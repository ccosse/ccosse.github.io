import{_ as U,r as C,o as f,f as O,w as l,g as e,as as G,O as k,Q as h,aO as I,k as i,j as c,aF as q,aq as g,aG as A,at as b,ar as S,i as D}from"./index.503ca5c1.js";import{Q as w}from"./QCardSection.f76536bb.js";import{a as $,r as L,d as Q,Q as V,C as B}from"./ClosePopup.c7c00b91.js";import{Q as x}from"./QCard.c405f211.js";import{Q as P}from"./QInput.94e659fa.js";import{Q as p}from"./QTooltip.2482cc3e.js";import{Q as F}from"./QBanner.83c5dd82.js";import{Q as W}from"./QImg.adc74993.js";import{b as j,Q as z,a as E}from"./QList.61cc8922.js";import{Q as R}from"./QPage.c7876558.js";import{u as H}from"./re-store.c6e381ad.js";import"./use-prevent-scroll.75ef3c60.js";import"./scroll.f61452b2.js";import"./use-dark.1f9ef394.js";import"./use-key-composition.b897e311.js";import"./use-form.4a6b2f96.js";import"./firebase.0eb8f378.js";import"./transform.aea72fbe.js";import"./index.2cf0d985.js";function J(s){const t=document.createElement("textarea");t.value=s,t.contentEditable="true",t.style.position="fixed";const _=()=>{};$(_),document.body.appendChild(t),t.focus(),t.select();const a=document.execCommand("copy");return t.remove(),L(_),a}function M(s){return navigator.clipboard!==void 0?navigator.clipboard.writeText(s):new Promise((t,_)=>{const a=J(s);a?t(!0):_(a)})}const X=H(),Y={components:{},setup(){return{reStore:X,mval:C(!0),label:C("howdy"),courseKey:C(null),courseTitle:C(null),prompt:C(!1),confirm:C(!1),promptAwesome:C(!1),targetCK:C(null),targetAID:C(null),autoAwesomeGuideWords:C("")}},mounted(){console.log("TeacherPage mounted ",this.reStore.courses),this.reStore.unloadCurrent()},methods:{selectAssignment(s,t){this.reStore.courses.ck===s&&this.reStore.courses.aid===t?this.reStore.unloadCurrent():(this.reStore.courses.ck=s,this.reStore.courses.aid=t,this.reStore.courses.trigger+=1)},autoAwesomeCB(s){console.log("autoAwesomeCB ",this.autoAwesomeGuideWords);const t=this.autoAwesomeGuideWords.split(","),_=200,a=_/t.length;let K=parseInt(a/6);K<1&&(K=1);const m=JSON.parse(JSON.stringify(this.reStore.assignmentTemplate));m.ck=this.targetCK,m.id=this.reStore.mkId(),m.pgIdx=0,m.coverUrl=null,m.title=t[0],m.goal=_,t.forEach(async n=>{const u=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("doSearch ",u,this.searchTerms),this.reStore.wiki.setLang(u.langName);const y=await this.reStore.wiki.search(n,{suggestion:!1,limit:K});console.log("res.results.length: ",y.results.length),console.log(y.results),y.results.forEach(async r=>{console.log(r.pageid),await this.reStore.getPage2(null,r.pageid,this.reStore.preferences.langVoiceKey).then(async d=>{console.log("getPage returned rval ",d),d.pageTitle=r.title;const v=await this.reStore.wiki.page(r.pageid);d.canonicalUrl=v.canonicalurl;const T=await v.summary();if(T.type!=="disambiguation"){if(await v.coordinates().then(o=>{console.log("resolved coords ",o),o!==null?d.mapCoords=`${o.lat}, ${o.lon}`:d.mapCoords="-999, -999"}),await v.images({limit:this.reStore.preferences.imgLimit}).then(o=>{for(const N in o)console.log(N),o[0].title.indexOf(".svg")>1?console.log("SVG ",o[0].title):o[0].title.indexOf("airytale")>0?console.log("Fairytale warning ",o[0].title):o[0].title.indexOf("kguitar")>1?console.log("kguitar ",o[0].title):o[0].title.indexOf("Blank.png")>-1?console.log("Blank.png ",o[0].title):o[0].title.indexOf(".oga")>1?console.log("OGA ",o[0].title):o[0].title.indexOf(".webm")>1?console.log("WEBM ",o[0].title):o[0].title.indexOf(".ogg")>1?console.log("OGG ",o[0].title):o[0].title.indexOf(".tif")>1?console.log("TIF ",o[0].title):o[0].title.indexOf(".mid")>1?console.log("MID ",o[0].title):o[0].title.indexOf(".ogv")>1?console.log("OGV ",o[0].title):o[0].title.indexOf("Icon")>1?console.log("ICON ",o[0].title):o[0].title.indexOf("icon")>1?console.log("icon ",o[0].title):o[0].title.indexOf("podagraria1")>0?console.log("podagraria1 ",o[0].title):o[0].title.indexOf("Bluetank")>1||o[0].title.indexOf("rab Nebula.jpg")>0?console.log("BLUETANK ",o[0].title):o[0].title.indexOf("viacionavion")>1||o[0].title.indexOf("input-microphone")>1?console.log("viacionavion",o[0].title):o[0].title.indexOf("clouds in fair weather")>0||o[0].title.indexOf("in pacifica 1")>0?console.log("clouds in fair weather",o[0].title):d.imgs.push({url:o[0].url,cap:o[0].title}),o.push(o.shift());d.imgs.length>1&&d.imgs.shift()}),d.pageText=T.extract,d.currentLangLinks=[],d.imgIdx=0,!m.coverUrl)try{m.coverUrl=m.pages[0].imgs[0].url}catch(o){console.log("ERROR setting coverUrl ",o)}m.pages.push(d),console.log("a.pages.length ",m.pages.length)}else console.log("SKIPPED ",T.type)})})}),this.reStore.courses[this.targetCK].assignments[m.id]=m,this.reStore.courses.trigger+=1},copyCK(s){M(s).then(()=>{console.log("ck copied to clipboard",s)}).catch(t=>{console.log(t)})},newCourseCB(){console.log("courseCB"),this.reStore.newCourse()},newAssignmentCB(s){console.log("assignmentCB: ",s),this.reStore.newAssignment(s)},editAssignmentCB(s,t){console.log("editAssignmentCB: ",s,t),this.reStore.loadAssignment(s,t),this.reStore.mode="editor",this.reStore.router.push("/teacher/editor")},editCourseCB(s){this.loadCourse(s),this.reStore.router.push("/teacher/courseeditor")},changeTitleCB(){console.log("TeacherPage.titleCB",this.courseKey,this.courseTitle),this.reStore.setCourseTitle(this.courseKey,this.courseTitle)},deleteCourseCB(s){this.targetCK=s,this.targetAID=null,this.confirm=!0},deleteAssignmentCB(s,t){this.targetCK=s,this.targetAID=t,this.confirm=!0},deleteForSure(){this.confirm=!1,console.log("delete current targets ",this.targetCK,this.targetAID),this.targetAID&&this.targetCK?this.reStore.deleteAssignment(this.targetCK,this.targetAID):this.targetCK&&this.targetAID===null&&this.reStore.deleteCourse(this.targetCK),this.targetCK=null,this.targetAID=null},takeAssignmentCB(s,t){console.log("TeacherPage.takeAssignment ",s,t),this.reStore.loadAssignment(s,t),this.reStore.mode="assignment",this.reStore.router.push("/teacher/assignment")},shareToDemo(s,t){console.log(s,t),this.reStore.shareToDemo(s,t)},loadCourse(s){console.log("loadCourse ",s),this.reStore.loadCourse(s)}}},Z=i("span",{class:"q-ml-sm"},"Confirm delete object?",-1),ee=i("div",{class:"text-h6"},"Change course title",-1),te=i("div",{class:"text-h6"},"Provide guide-words",-1),oe={class:"q-pa-md"},le={class:"text-weight-bolder text-center text-h4 q-pa-md"},se={class:"flex flex-row justify-center"},ne={class:"absolute-top text-center"},ie={class:"text-h6"},re={class:"text-subtitle2"},ae={key:0},ue={key:1},ce={style:{"font-size":"22pt",width:"100%"},class:"text-center absolute-bottom"},de=i("br",null,null,-1),he=i("br",null,null,-1),fe={class:"q-pa-md"},me=i("br",null,null,-1),ge=i("br",null,null,-1),pe=i("br",null,null,-1),Ce={width:"100%"},_e=i("tr",null,[i("th",{colSpan:"100"},"Course Score Sheet")],-1),Se=i("th",null,"Student",-1),ye={style:{"text-align":"center"}},we={key:0},ve={key:1};function xe(s,t,_,a,K,m){return f(),O(R,{class:"q-gutter-md bg-primary"},{default:l(()=>[e(V,{modelValue:a.confirm,"onUpdate:modelValue":t[1]||(t[1]=n=>a.confirm=n),persistent:"",class:"z-max"},{default:l(()=>[e(x,null,{default:l(()=>[e(w,{class:"row items-center"},{default:l(()=>[e(G,{icon:"delete",color:"primary","text-color":"white"}),Z]),_:1}),e(Q,{align:"right",class:"text-white"},{default:l(()=>[k(e(h,{flat:"",label:"Cancel"},null,512),[[B]]),e(h,{flat:"",label:"Delete",onClick:t[0]||(t[0]=n=>this.deleteForSure())})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(V,{modelValue:a.prompt,"onUpdate:modelValue":t[5]||(t[5]=n=>a.prompt=n),persistent:"",class:"z-max"},{default:l(()=>[e(x,{style:{"min-width":"350px"}},{default:l(()=>[e(w,null,{default:l(()=>[ee]),_:1}),e(w,{class:"q-pt-none"},{default:l(()=>[e(P,{dense:"",modelValue:a.courseTitle,"onUpdate:modelValue":t[2]||(t[2]=n=>a.courseTitle=n),autofocus:"",onKeyup:t[3]||(t[3]=I(n=>{a.prompt=!1,this.changeTitleCB()},["enter"])),onHide:this.dck},null,8,["modelValue","onHide"])]),_:1}),e(Q,{align:"right",class:"text-white"},{default:l(()=>[k(e(h,{outline:"",label:"Cancel"},null,512),[[B]]),k(e(h,{outline:"",label:"Save",onClick:t[4]||(t[4]=n=>this.changeTitleCB())},null,512),[[B]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(V,{modelValue:a.promptAwesome,"onUpdate:modelValue":t[9]||(t[9]=n=>a.promptAwesome=n),persistent:"",class:"z-max"},{default:l(()=>[e(x,{style:{"min-width":"350px"}},{default:l(()=>[e(w,null,{default:l(()=>[te]),_:1}),e(w,{class:"q-pt-none"},{default:l(()=>[e(P,{dense:"",modelValue:a.autoAwesomeGuideWords,"onUpdate:modelValue":t[6]||(t[6]=n=>a.autoAwesomeGuideWords=n),autofocus:"",onKeyup:t[7]||(t[7]=I(n=>{a.promptAwesome=!1,this.autoAwesomeCB()},["enter"]))},null,8,["modelValue"])]),_:1}),e(Q,{align:"right",class:"text-white"},{default:l(()=>[k(e(h,{outline:"",label:"Cancel"},null,512),[[B]]),k(e(h,{outline:"",label:"Save",onClick:t[8]||(t[8]=n=>this.autoAwesomeCB())},null,512),[[B]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i("div",oe,[e(F,{class:"bg-positive text-white"},{default:l(()=>[i("div",le,[e(h,{class:"on-left",icon:"post_add",onClick:t[10]||(t[10]=n=>this.newCourseCB())},{default:l(()=>[e(p,null,{default:l(()=>[c("Create a new course")]),_:1})]),_:1}),c(" Teacher "),this.reStore.authenticated?(f(),O(h,{key:0,class:"on-right",onClick:t[11]||(t[11]=n=>this.reStore.router.push("/student")),icon:"switch_account"},{default:l(()=>[e(p,null,{default:l(()=>[c(" Switch to Student-role ")]),_:1})]),_:1})):q("",!0)])]),_:1})]),i("div",se,[(f(!0),g(b,null,A(this.reStore.userSnapshot.teaching,(n,u,y)=>(f(),g("div",{key:y},[e(x,{bordered:"",flat:"",class:"ccard q-mx-sm q-my-md"},{default:l(()=>[e(W,{fit:s.cover,src:this.reStore.logoURL,height:"100%",onClick:r=>this.loadCourse(u)},{default:l(()=>[i("div",ne,[i("div",ie,S(this.reStore.courses[u].title.slice(0,18)),1),i("div",re,[this.reStore.courses[u].assignments?(f(),g("span",ae,"Assignments: "+S(Object.keys(this.reStore.courses[u].assignments).length),1)):(f(),g("span",ue,"Assignments: None"))])]),i("div",ce,[i("div",null,[e(h,{icon:"edit",onClick:r=>this.editCourseCB(n.ck)},{default:l(()=>[e(p,null,{default:l(()=>[c("Edit Course")]),_:1})]),_:2},1032,["onClick"]),e(h,{icon:"delete",onClick:r=>this.deleteCourseCB(n.ck)},{default:l(()=>[e(p,null,{default:l(()=>[c("Delete Course")]),_:1})]),_:2},1032,["onClick"]),e(h,{icon:"post_add",onClick:r=>this.newAssignmentCB(n.ck)},{default:l(()=>[e(p,null,{default:l(()=>[c("New Assignment")]),_:1})]),_:2},1032,["onClick"]),e(h,{icon:"auto_awesome",onClick:r=>{this.targetCK=u,a.promptAwesome=!0}},{default:l(()=>[e(p,null,{default:l(()=>[c("1-Step Custom Assignment Create")]),_:1})]),_:2},1032,["onClick"]),e(h,{icon:"content_copy",onClick:r=>this.copyCK(u)},{default:l(()=>[e(p,null,{default:l(()=>[c("Copy this course-key to clipboard. Enroll "),de,c("in this course using this course-key from "),he,c("the Student Page.")]),_:1})]),_:2},1032,["onClick"])])])]),_:2},1032,["fit","src","onClick"])]),_:2},1024)]))),128))]),(f(!0),g(b,null,A(this.reStore.userSnapshot.teaching,(n,u,y)=>(f(),O(x,{flat:"",key:y,style:{opacity:"1.0"},class:"hidden"},{default:l(()=>[i("div",fe,[e(j,{bordered:"",class:"rounded-borders"},{default:l(()=>[e(z,null,{header:l(()=>[e(E),e(E,null,{default:l(()=>[c(" Course: "+S(this.reStore.courses[n.ck].title),1)]),_:2},1024)]),default:l(()=>[e(x,{flat:""},{default:l(()=>[e(w,{class:"text-center",style:{fontSize:"12pt"}},{default:l(()=>[c(" Title: "+S(this.reStore.courses[u].title)+" \xA0",1),e(D,{class:"ptr",name:"edit",onClick:r=>{a.prompt=!0,this.courseTitle=this.reStore.courses[u].title,this.courseKey=u}},null,8,["onClick"]),me,c(" Key: "+S(u)+" ",1),e(D,{class:"ptr",name:"content_copy",onClick:r=>this.copyCK(u)},null,8,["onClick"]),i("div",null,[e(h,{icon:"delete",onClick:r=>this.deleteCourseCB(n.ck)},{default:l(()=>[e(p,null,{default:l(()=>[c("Delete Course")]),_:1})]),_:2},1032,["onClick"]),e(h,{icon:"post_add",onClick:r=>this.newAssignmentCB(n.ck)},{default:l(()=>[e(p,null,{default:l(()=>[c("New Assignment")]),_:1})]),_:2},1032,["onClick"]),e(h,{icon:"auto_awesome",onClick:r=>{this.targetCK=u,a.promptAwesome=!0}},{default:l(()=>[e(p,null,{default:l(()=>[c("1-Step Custom Assignment Create")]),_:1})]),_:2},1032,["onClick"]),e(h,{icon:"content_copy",onClick:r=>this.copyCK(u)},{default:l(()=>[e(p,null,{default:l(()=>[c("Copy this course-key to clipboard. Enroll "),ge,c("in this course using this course-key from "),pe,c("the Student Page.")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1024),e(w,null,{default:l(()=>[i("table",Ce,[_e,i("tr",null,[Se,(f(!0),g(b,null,A(this.reStore.courses[u].assignments,(r,d)=>(f(),g("th",{key:d},[i("span",null,S(r.title),1)]))),128))]),(f(!0),g(b,null,A(this.reStore.courses[u].enrollment,r=>(f(),g("tr",{key:r.name},[i("td",ye,S(r.name),1),(f(!0),g(b,null,A(this.reStore.courses[u].assignments,(d,v)=>(f(),g("td",{style:{"text-align":"center"},key:v},[d.scores&&d.scores[r.emailKey]?(f(),g("span",we,S(d.scores[r.emailKey]),1)):(f(),g("span",ve," -- "))]))),128))]))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1024))),128))]),_:1})}var Fe=U(Y,[["render",xe]]);export{Fe as default};
