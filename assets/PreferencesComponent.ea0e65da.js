import{Q as V}from"./QToggle.012ada56.js";import{Q as P}from"./QMenu.7475a84b.js";import{u as w}from"./store.e24a1812.js";import{Q as F}from"./QImg.ad0e1818.js";import{Q as m}from"./QCard.1c3494d8.js";import{j as T,_ as D,k as n,m as I,n as i,ab as d,t as e,G as a,aa as r,p as B,s as h,q as s,H as S,a8 as N,r as y,P as C,aj as b,ae as Q,Q as c}from"./index.6c22e3f7.js";import{Q as v,c as z,d as U,C as q}from"./ClosePopup.4736252c.js";import{Q as A,a as L}from"./QSelect.c8bcf734.js";import{Q as $}from"./QTooltip.fbc4aac9.js";import{Q as j}from"./QExpansionItem.58195182.js";import{Q as E}from"./QList.a789b4f2.js";import"./transform.9aa67f3e.js";import{s as u}from"./selectAll.be636dd1.js";const K=T({name:"TileComponent",props:["tileName","tileData","tileType","imgUrl","targetUrl","ck","aid","pgIdx","imgIdx"],setup(){return{store:w()}},methods:{clickCB(o,t,g,x,p,_,l,f){if(console.log("clickCB",o,t,g,x,p,_,l,f),this.store.ck=o,this.store.aid=t,this.store.pgIdx=g,l==="course")console.log("setting aid -1"),this.store.aid=null;else if(l==="assignment"){this.store.pgIdx=0,this.store.router.push("/courses/assignments");return}else if(l==="page"){this.store.pgIdx=g,this.store.router.push("/courses/assignments/pages");return}try{this.store.imgIdx=this.imgIdx,this.store.currentPage.imgIdx=this.imgIdx}catch(k){console.log(k)}p!==null?this.store.router.push(p):_!==null&&l==="image"&&(this.store.imgIdx=this.imgIdx)}}}),O={class:"text-h6 absolute-center full-width text-center"},M={key:0},R={key:1},G={key:2},H={key:3},W={key:4},J={key:5},X={key:6},Y={class:"hidden"},Z=e("tr",null,[e("th",{align:"left"},"prop"),e("th",{align:"center"},[e("b",null,"val")])],-1),ee={key:0},te=e("td",null,"ck",-1),se={key:1},oe=e("td",null,"aid",-1),le={key:2},ie=e("td",null,"pgIdx",-1),ne={key:3},ae=e("td",null,"imgIdx",-1),re={key:4},de=e("td",null,"imgUrl",-1),ue={key:5},ce=e("td",null,"targetUrl",-1);function me(o,t,g,x,p,_){return n(),I(m,{flat:"",bordered:"",class:"q-ma-md q-pa-xs cursor-pointer tile-component",onClick:t[0]||(t[0]=l=>this.clickCB(this.ck,this.aid,this.pgIdx,this.imgIdx,this.targetUrl,this.imgUrl,this.tileType,this.tileName))},{default:i(()=>[this.imgUrl?(n(),I(F,{key:0,class:"absolute-center tile-component",src:this.imgUrl,style:{opacity:"1"}},null,8,["src"])):d("",!0),e("div",O,[this.tileData.pageTitle!==null?(n(),a("div",M,r(this.tileData.pageTitle),1)):d("",!0),this.tileType=="section"?(n(),a("div",R,r(this.tileName),1)):d("",!0),this.tileType=="course"?(n(),a("div",G,[e("div",null,r(this.tileData.title),1),e("div",null,r(Object.keys(this.tileData.assignments).length)+" assignments ",1),e("div",null,r(Object.keys(this.tileData.enrollment).length)+" students",1)])):d("",!0),this.tileType=="assignment"?(n(),a("div",H,[e("div",null,r(this.tileData.title),1),e("div",null,r(this.tileData.pages.length)+" pgs",1)])):d("",!0),this.tileType==="page"?(n(),a("div",W,"Page "+r(this.pgIdx+1),1)):d("",!0),this.store.currentPage&&this.tileType=="page"?(n(),a("div",J,r(this.store.currentAssignment.pages[this.pgIdx].imgs.length)+" imgs ",1)):d("",!0),this.tileType=="image"?(n(),a("div",X,"Image "+r(this.imgIdx+1),1)):d("",!0)]),e("table",Y,[Z,this.ck?(n(),a("tr",ee,[te,e("td",null,r(this.ck),1)])):d("",!0),this.aid?(n(),a("tr",se,[oe,e("td",null,r(this.aid),1)])):d("",!0),this.pgIdx!==null?(n(),a("tr",le,[ie,e("td",null,r(this.pgIdx),1)])):d("",!0),this.imgIdx!==null?(n(),a("tr",ne,[ae,e("td",null,r(this.imgIdx),1)])):d("",!0),this.imgUrl?(n(),a("tr",re,[de,e("td",null,"..."+r(this.imgUrl.slice(-20)),1)])):d("",!0),this.targetUrl?(n(),a("tr",ue,[ce,e("td",null,"..."+r(this.targetUrl.slice(-20)),1)])):d("",!0)])]),_:1})}var he=D(K,[["render",me]]);const ge=T({name:"ImagePager",components:{TileComponent:he},props:[],setup(){return{store:w()}},methods:{}}),pe={class:"text-panel q-ma-md text-center text-h6"},fe={key:0},_e={key:0};function xe(o,t,g,x,p,_){const l=B("TileComponent");return n(),a(S,null,[e("div",pe,[h("Images: "),this.store.currentPage?(n(),a("span",fe,r(this.store.currentPage.imgs.length),1)):d("",!0)]),s(P,{class:"hidden"},{default:i(()=>[s(V,{label:"Image Fit",modelValue:this.store.imgFit,"onUpdate:modelValue":t[0]||(t[0]=f=>this.store.imgFit=f)},null,8,["modelValue"])]),_:1}),this.store.currentPage?(n(),a("span",_e,[(n(!0),a(S,null,N(this.store.currentPage.imgs,(f,k)=>(n(),a("span",{key:k},[s(l,{tileData:f,imgUrl:f.url,targetUrl:null,ck:this.store.ck,aid:this.store.aid,pgIdx:this.store.pgIdx,imgIdx:k,tileType:"image"},null,8,["tileData","imgUrl","ck","aid","pgIdx","imgIdx"])]))),128))])):d("",!0)],64)}var Me=D(ge,[["render",xe]]);const ke=T({name:"PreferencesComponent",setup(){return{store:w(),dark:y(C.isActive),promptFontSize:y(!1),promptLanguage:y(!1),showText:y(!0)}},mounted(){},methods:{langChangeCB(o){console.log(o);const t=this.flagName;u("#sfi").classed(t,!1),console.log(this.store.langVoices),this.flagName=this.store.langVoices[o].flagName,console.log("langChangeCB",o,this.flagName),u("#sfi").classed(this.flagName,!0)},populateDemo(){console.log("populateDemo"),Object.keys(this.store.currentCourse.assignments).forEach(o=>{console.log(o),Object.keys(this.store.currentCourse.enrollment).forEach(t=>{this.store.currentCourse.assignments[o].scores||(this.store.currentCourse.assignments[o].scores={}),this.store.currentCourse.assignments[o].scores[t]=parseInt(Math.random()*100)})})},toggleText(){console.log("toggleText",this.showText),this.showText===!0?(console.log("showing text"),u(".assignment").classed("hidden",!1),u(".q-carousel__thumbnail").classed("hidden",!1)):(console.log("hiding text"),u(".assignment").classed("hidden",!0),u(".q-carousel__thumbnail").classed("hidden",!0))},toggleDark(){C.toggle(),console.log(C.isActive,this.dark),C.isActive},fontSizeCB(o){u("#sampleFontSwatch").style("font-size",o+"pt"),u("#slideTextDiv").style("font-size",o+"pt"),this.store.userSnapshot.preferences.pageFontSize=o},fsCB(){b.isActive?b.exit().then(()=>{}).catch(o=>{console.log(o)}):b.request().then(()=>{}).catch(o=>{console.log(o)})}}}),ye=e("div",{class:"text-h6"},"Reconstruct Paragraph Font Size",-1),Ce=e("td",{style:{width:"60%"}},[e("div",{id:"sampleFontSwatch"},"Reading Edge!")],-1),ve=e("div",{class:"text-h6"},"Set Language For WP",-1),$e=e("span",{class:"on-right",id:"sfi"},null,-1),Ve={width:"100%",class:"z-max"},be={class:"q-pa-md",style:{"max-width":"350px"}},Ie={class:"text-center",style:{width:"100%"}},Se={class:"text-center hidden",style:{width:"100%"}},we={class:"text-center",style:{width:"100%"}},Te={class:"text-center q-mb-md",style:{width:"100%"}},De=e("br",null,null,-1);function Qe(o,t,g,x,p,_){return n(),a(S,null,[s(U,{modelValue:o.promptFontSize,"onUpdate:modelValue":t[1]||(t[1]=l=>o.promptFontSize=l),persistent:""},{default:i(()=>[s(m,{style:{"min-width":"350px"}},{default:i(()=>[s(v,{align:"center"},{default:i(()=>[ye]),_:1}),s(v,{class:"q-pt-none",align:"center"},{default:i(()=>[e("table",null,[e("tr",null,[e("td",null,[s(A,{"show-value":"",size:"140px",thickness:.5,color:"positive","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:this.store.userSnapshot.preferences.pageFontSize,"onUpdate:modelValue":t[0]||(t[0]=l=>this.store.userSnapshot.preferences.pageFontSize=l),min:"0",max:"50",onDragValue:this.fontSizeCB},null,8,["thickness","modelValue","onDragValue"])]),Ce])])]),_:1}),s(z,{align:"center",class:"text-white"},{default:i(()=>[Q(s(c,{outline:"",flat:"",label:"Done"},null,512),[[q]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(U,{modelValue:o.promptLanguage,"onUpdate:modelValue":t[3]||(t[3]=l=>o.promptLanguage=l),persistent:""},{default:i(()=>[s(m,{style:{"min-width":"350px"}},{default:i(()=>[s(v,null,{default:i(()=>[ve,h(),$e]),_:1}),s(v,{class:"q-pt-none"},{default:i(()=>[e("table",Ve,[e("tr",null,[e("td",null,[s(L,{class:"z-max",outlined:"",modelValue:this.store.userSnapshot.preferences.langVoiceKey,"onUpdate:modelValue":[t[2]||(t[2]=l=>this.store.userSnapshot.preferences.langVoiceKey=l),this.langChangeCB],options:this.store.userSnapshot.preferences.langVoices},null,8,["modelValue","options","onUpdate:modelValue"])])])])]),_:1}),s(z,{align:"right",class:"text-white"},{default:i(()=>[Q(s(c,{outline:"",flat:"",label:"Done"},null,512),[[q]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e("div",be,[s(E,{bordered:"",class:"rounded-borders",icon:"gear"},{default:i(()=>[s(j,{label:"Preferences"},{default:i(()=>[e("div",Ie,[s(V,{modelValue:o.dark,"onUpdate:modelValue":t[4]||(t[4]=l=>o.dark=l),"keep-color":"",color:"primary","unchecked-icon":"light_mode","checked-icon":"dark_mode",onClick:t[5]||(t[5]=l=>this.toggleDark()),label:"Dark Mode"},null,8,["modelValue"])]),e("div",Se,[s(V,{label:"Auto-Play",modelValue:this.store.autoplay,"onUpdate:modelValue":t[6]||(t[6]=l=>this.store.autoplay=l),"keep-color":"",color:"primary"},null,8,["modelValue"])]),e("div",we,[s(V,{label:"Show Text",modelValue:this.showText,"onUpdate:modelValue":t[7]||(t[7]=l=>this.showText=l),"keep-color":"",color:"primary",onClick:t[8]||(t[8]=l=>this.toggleText())},null,8,["modelValue"])]),e("div",Te,[s(c,{"no-padding":""},{default:i(()=>[e("span",{id:"sfi",onClick:t[9]||(t[9]=l=>o.promptLanguage=!0)}),s($,{style:{backgroundColor:"#222",fontSize:"12pt"}},{default:i(()=>[s(m,{bordered:"",flat:"",class:"q-ma-xs q-pa-sm"},{default:i(()=>[h(" Set preferred language ")]),_:1})]),_:1})]),_:1}),s(c,{icon:"fullscreen",onClick:t[10]||(t[10]=l=>this.fsCB())},{default:i(()=>[s($,{style:{backgroundColor:"#222",fontSize:"12pt"}},{default:i(()=>[s(m,{bordered:"",flat:"",class:"q-ma-xs q-pa-sm"},{default:i(()=>[h(" Fullscreen ")]),_:1})]),_:1})]),_:1}),s(c,{"no-caps":"",icon:"format_size",onClick:t[11]||(t[11]=l=>this.promptFontSize=!0)},{default:i(()=>[s($,{style:{backgroundColor:"#222",fontSize:"12pt"}},{default:i(()=>[s(m,{bordered:"",flat:"",class:"q-ma-xs q-pa-sm"},{default:i(()=>[h(" Set preferred default font size"),De,h("Can be overridden per-page, also ")]),_:1})]),_:1})]),_:1}),this.store.emailKey==="charlie_at_readingedge_dot_org"?(n(),I(c,{key:0,icon:"manage_accounts",onClick:t[12]||(t[12]=l=>this.populateDemo())})):d("",!0),s(c,{icon:"save",onClick:t[13]||(t[13]=l=>this.store.updateSnapshot("save-preferences",null))},{default:i(()=>[s($,{style:{backgroundColor:"#222",fontSize:"12pt"}},{default:i(()=>[s(m,{bordered:"",flat:"",class:"q-ma-xs q-pa-sm"},{default:i(()=>[h(" Save preferences ")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})])],64)}var Re=D(ke,[["render",Qe]]);export{Me as I,Re as P,he as T};
