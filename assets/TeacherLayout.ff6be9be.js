import{i as h,g as Je,h as y,j as Ct,z as kt,d as G,r as m,D as Q,_ as X,o as b,au as O,a as n,w as i,p as Te,Q as S,e as s,af as A,ag as _,aK as Nt,c as q,x,av as J,aL as _e,aJ as ge,al as Kt,am as ve,G as mt,P as ht,s as Ne,f as Y}from"./index.7a644821.js";import{Q as ye}from"./QTooltip.1784b7a8.js";import{Q as fe,a as Wt,b as jt,c as Ve,d as Jt,e as vt,f as ft,g as Gt,h as Xt}from"./QLayout.03cba995.js";import{Q as pe,a as qe}from"./QExpansionItem.3f9db620.js";import{u as Z,s as Zt,a as gt,p as le,t as ea,c as yt,f as ta,g as aa,j as Ke,_ as oa,d as _t}from"./re-store.b65913ec.js";import{a as T,Q as L,i as St,C as Me,h as bt,u as la,b as na,c as sa}from"./ClosePopup.cd201166.js";import{a as ra,u as ia,b as ua,D as da,P as ca}from"./DocumentationComponent.50e120d3.js";import{Q as ma}from"./QInput.71863d29.js";import{d as wt,f as $t}from"./use-dark.65c0ba9d.js";import{Q as Ge}from"./QImg.c7a0b2b9.js";import"./position-engine.b9fb599b.js";import"./selection.0964446b.js";import"./use-portal.97520947.js";import"./QSlideTransition.908ff26f.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";import"./use-key-composition.d525372a.js";import"./QCheckbox.54e93e2e.js";const ha=h("div",{class:"q-space"});var je=Je({name:"QSpace",setup(){return()=>ha}}),Ce=Je({name:"QList",props:{...wt,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:o}){const p=kt(),V=$t(e,p.proxy.$q),$=y(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(V.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>h(e.tag,{class:$.value},Ct(o.default))}});const va=G({name:"SearchComponent",setup(){const e=Z(),o=m("");return{reStore:e,searchTerms:o,searchSize:m(e.preferences.resLimit),searchResults:m([]),promptSearchSize:m(!1)}},mounted(){Q(this.reStore.preferences,async(e,o)=>{console.log("watcher ",e,o),this.searchSize=e.resLimit})},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchResults.splice(e,1)},load(e){console.log(e),console.log(this.searchResults[e]);const o=this.reStore.langVoices[this.reStore.preferences.langVoice];console.log("calling loadPageId ",this.searchResults[e].pageid,o),this.reStore.loadPageId(this.searchResults[e].pageid,o)},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoice];this.reStore.wiki.setLang(e.langName);const o=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",o.results.length),this.searchResults=o.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),fa=s("div",{class:"text-h6"},"Search Results Size",-1),ga={class:"q-gutter-y-sm column"},ya={key:0},_a={class:"row cardheader ptr justify-between"},pa=["onClick"],Ca={class:"history-remove"};function ka(e,o,p,V,$,R){return b(),O(J,null,[n(bt,{modelValue:e.promptSearchSize,"onUpdate:modelValue":o[2]||(o[2]=u=>e.promptSearchSize=u),persistent:""},{default:i(()=>[n(T,{style:{"min-width":"350px"}},{default:i(()=>[n(L,{align:"center"},{default:i(()=>[fa]),_:1}),n(L,{class:"q-pt-none",align:"center"},{default:i(()=>[n(ra,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":o[0]||(o[0]=u=>e.searchSize=u)},null,8,["modelValue"])]),_:1}),n(St,{align:"center",class:"text-primary"},{default:i(()=>[Te(n(S,{flat:"",label:"Cancel"},null,512),[[Me]]),Te(n(S,{flat:"",label:"Update results size",onClick:o[1]||(o[1]=u=>this.updateSearchSize())},null,512),[[Me]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(T,{flat:""},{default:i(()=>[n(L,null,{default:i(()=>[n(Ce,{padding:"",class:"rounded-borders"},{default:i(()=>[n(pe,{"header-style":{border:"1px solid gray"},label:"Search & Results"},{default:i(()=>[s("div",ga,[n(fe,{class:"bg-primary text-white rounded-borders q-my-md"},{default:i(()=>[n(S,{dark:"",standout:"",onClick:o[3]||(o[3]=u=>e.promptSearchSize=!0)},{default:i(()=>[A(_(this.searchResults.length)+" ",1),n(ye,null,{default:i(()=>[A("Change results limit ("+_(this.searchSize)+")",1)]),_:1})]),_:1}),n(ma,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":o[6]||(o[6]=u=>e.searchTerms=u),"input-class":"text-right",class:"q-ml-md",onKeyup:[o[7]||(o[7]=u=>this.update()),o[8]||(o[8]=Nt(u=>this.doSearch(),["enter"]))]},{append:i(()=>[e.searchTerms===""?(b(),q(x,{key:0,name:"search",onClick:o[4]||(o[4]=u=>this.doSearch())})):(b(),q(x,{key:1,name:"clear",class:"cursor-pointer",onClick:o[5]||(o[5]=u=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(b(),O("div",ya,[(b(!0),O(J,null,_e(this.searchResults,(u,f)=>(b(),q(T,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":o[9]||(o[9]=k=>this.searchResults=k),key:f},{default:i(()=>[s("div",_a,[s("span",{class:"history-title col-grow",onClick:k=>this.load(f)},_(f)+". "+_(u.title.slice(0,25)),9,pa),s("span",Ca,[n(x,{class:"primary",size:e.xl,color:e.primary,name:"close",onClick:k=>this.remove(f)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Sa=X(va,[["render",ka]]);const ba=G({name:"CurrentPage",props:{},setup(e){const o=Z();return{reStore:o,courseid:m("-"),pageTitle:m(o.page.pageTitle),lang:m(o.page.langVoice),imgIdx:m(0),imgs:m([]),imgTot:m(0),imgFit:m("-"),guideWords:m("-"),mapCoords:m("-"),pageid:m("-"),pctReplace:m(o.page.pctReplace),canonicalUrl:m(o.page.canonicalUrl),props:e}},mounted(){console.log(this.props),Q(this.reStore.page,async(e,o)=>{try{console.log("CurrentPage watcher ",e,o),this.pageTitle=e.pageTitle,this.imgIdx=e.imgIdx,this.imgs=e.imgs,this.imgTot=e.imgs.length,this.imgFit=e.imgFit,this.guideWords=e.guideWords,this.mapCoords=e.mapCoords,this.pageid=e.pageid,this.lang=e.langVoice,this.pctReplace=e.pctReplace,this.canonicalUrl=e.canonicalUrl}catch(p){console.log(p)}})},methods:{speak(){console.log("CurrentPage.speak",this.reStore),this.reStore.speak()},cycleFitMode(){const e=["scale-down","cover"];let o=e.indexOf(this.imgFit);o+=1,o>e.length-1&&(o=0),this.imgFit=e[o],this.reStore.page.imgFit=this.imgFit,console.log("fit: ",this.imgFit)},nextImg(){this.imgIdx=this.imgIdx+1>this.imgs.length-1?0:this.imgIdx+1,this.reStore.page.imgIdx=this.imgIdx},imgCB(e,o){console.log(e,o),this.reStore.page.imgIdx=e},loadURL(e){console.log("loadURL ",e),window.open(e,"_blank")},mapCB(){const e="https://maps.google.com/?ll="+this.mapCoords.split(",")[0]+","+this.mapCoords.split(",")[1];window.open(e,"_blank")},saveImage(e,o){console.log("saveImage: ",e,o),this.reStore.saveImage(o)},saveCurrentImage(){const e=this.imgs[this.imgIdx];console.log("saveCurrentImage: ",e),this.reStore.saveImage(e)},remove(e,o){console.log("remove: ",e,o),this.imgs.splice(e,1),this.reStore.page.imgs.splice(e,1)},toggleText(){Zt("#slideTextDiv").classed("hidden")?gt("#slideTextDiv").classed("hidden",!1):gt("#slideTextDiv").classed("hidden",!0)},addBookmark(){console.log("addBookmark"),this.reStore.saveBookmark()}}}),wa={class:"text-weight-bolder text-center q-pa-md"},$a={style:{border:"1px solid gray","border-radius":"5px"}},Da={width:"100%"},xa=s("td",{style:{width:"50%","text-align":"center"}},null,-1),Va={style:{"text-align":"center"}},qa=s("tr",null,[s("td"),s("td",{style:{"text-align":"center"}},"Speak Text")],-1),Ta={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Ma={width:"100%"},Ia=s("td",null,"WP Page Id",-1),Ha={style:{width:"50%"}},Ra=s("td",null,"Language",-1),Ba={style:{width:"50%"}},Fa={class:"float-left"},Qa=s("td",null,"Current Image",-1),Pa={class:"float-left"},Ya={class:"float-right"},Aa=s("td",null,"Image Fit",-1),La={class:"align-left"},Oa=s("td",null,"Guide Words",-1),Ua={style:{width:"50%"}},za=s("td",null,"Percent Replace",-1),Ea={class:"float-left"},Na=s("td",null,"Map Coords",-1),Ka={class:"float-left"},Wa=s("td",null,"Toggle Text",-1),ja={key:0},Ja={class:"row cardheader justify-between"},Ga={class:"history-remove"},Xa={class:"history-remove ptr"};function Za(e,o,p,V,$,R){return b(),O(J,null,[n(T,{flat:""},{default:i(()=>[n(L,null,{default:i(()=>[s("div",wa,_(this.pageTitle),1),s("div",$a,[s("table",Da,[s("tr",null,[xa,s("td",Va,[n(S,{round:"",class:"q-pa-md",icon:"volume_up",color:"secondary",onClick:o[0]||(o[0]=u=>this.speak())})])]),qa])]),s("div",Ta,[s("table",Ma,[s("tr",null,[Ia,s("td",Ha,[s("a",{class:"ptr float-left",onClick:o[1]||(o[1]=u=>this.loadURL(this.canonicalUrl))},_(this.pageid),1),n(x,{name:"bookmark",onClick:this.addBookmark,class:"float-right"},null,8,["onClick"])])]),s("tr",null,[Ra,s("td",Ba,[s("span",Fa,_(this.lang),1),n(x,{class:"float-right",name:"translate"})])]),s("tr",null,[Qa,s("td",{style:{width:"50%"},onClick:o[2]||(o[2]=(...u)=>this.nextImg&&this.nextImg(...u)),class:"ptr"},[s("span",Pa,_(this.imgIdx)+" / "+_(this.imgTot),1),s("span",Ya,[n(x,{name:"bookmark",onClick:this.saveCurrentImage},null,8,["onClick"])])])]),s("tr",{class:"ptr",onClick:o[3]||(o[3]=(...u)=>this.cycleFitMode&&this.cycleFitMode(...u))},[Aa,s("td",null,[s("span",La,_(this.imgFit),1),n(x,{class:"float-right",name:"fit_screen"})])]),s("tr",null,[Oa,s("td",Ua,[A(_(this.guideWords.replaceAll(",",", "))+" ",1),n(x,{class:"float-right",name:"tune"})])]),s("tr",null,[za,s("td",null,[s("span",Ea,_(this.pctReplace)+" %",1),n(x,{class:"float-right",name:"tune"})])]),s("tr",null,[Na,s("td",{onClick:o[4]||(o[4]=(...u)=>this.mapCB&&this.mapCB(...u)),class:"ptr"},[s("span",Ka,_(this.mapCoords),1),n(x,{class:"float-right",name:"place"})])]),s("tr",null,[Wa,s("td",{onClick:o[5]||(o[5]=(...u)=>this.toggleText&&this.toggleText(...u)),class:"ptr"},[n(x,{class:"float-right",name:"article"})])])])])]),_:1})]),_:1}),n(T,{flat:""},{default:i(()=>[n(L,null,{default:i(()=>[n(Ce,{padding:"",class:"rounded-borders"},{default:i(()=>[n(pe,{"header-style":{border:"1px solid gray"},label:"Page Images"},{default:i(()=>[this.imgs.length?(b(),O("div",ja,[(b(!0),O(J,null,_e(this.imgs,(u,f)=>(b(),q(T,{bordered:"",class:"q-ma-sm",flat:"",modelValue:this.imgs,"onUpdate:modelValue":o[6]||(o[6]=k=>this.imgs=k),key:f},{default:i(()=>[s("div",Ja,[s("span",Ga,[n(x,{name:"bookmark",onClick:k=>this.saveImage(f,u)},null,8,["onClick"]),n(x,{name:"article",onClick:this.toggleText},{default:i(()=>[n(ye,null,{default:i(()=>[A("Convenience button to toggle current text ")]),_:1})]),_:1},8,["onClick"]),n(x,{name:"fit_screen",onClick:this.cycleFitMode},{default:i(()=>[n(ye,null,{default:i(()=>[A("Convenience button to toggle current image-fit mode ")]),_:1})]),_:1},8,["onClick"])]),s("span",null,_(u.cap.slice(0,25)),1),s("span",Xa,[n(x,{name:"close",onClick:k=>this.remove(f,u)},null,8,["onClick"])])]),n(Ge,{class:"cardimage",onClick:k=>this.imgCB(f,u),src:u.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])):ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var eo=X(ba,[["render",Za]]);const to=G({name:"ImagesComponent",setup(){return{reStore:Z()}},mounted(){Q(this.reStore.userSnapshot.images,async(e,o)=>{console.log("watcher ",e,o)})},methods:{imgCB(e,o){this.reStore.router.push("/teacher/editor"),console.log(e,o);const p={url:o.url,cap:o.desc};this.reStore.page.imgs.push(p),this.reStore.page.imgIdx=this.reStore.page.imgs.length-1},remove(e,o){console.log(e,o),this.reStore.removeImage(e)}}}),ao={class:"row cardheader justify-between"},oo={class:"history-remove hidden"},lo={class:"history-remove ptr"};function no(e,o,p,V,$,R){return b(),q(T,{flat:""},{default:i(()=>[n(L,null,{default:i(()=>[n(Ce,{padding:"",class:"rounded-borders"},{default:i(()=>[this.reStore.userSnapshot.images?(b(),q(pe,{key:0,"header-style":{border:"1px solid gray"},label:"My Images"},{default:i(()=>[s("div",null,[(b(!0),O(J,null,_e(this.reStore.userSnapshot.images,(u,f)=>(b(),q(T,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":o[0]||(o[0]=k=>this.reStore.userSnapshot.images=k),key:f},{default:i(()=>[s("div",ao,[s("span",oo,[n(x)]),A(" "+_(u.desc.slice(0,25))+" ",1),s("span",lo,[n(x,{name:"close",onClick:k=>this.remove(f,u)},null,8,["onClick"])])]),n(Ge,{class:"cardimage",onClick:k=>this.imgCB(f,u),src:u.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1})}var so=X(to,[["render",no]]);const ro=G({name:"BookmarksComponent",setup(){return{reStore:Z()}},mounted(){Q(this.reStore.userSnapshot.bookmarks,async(e,o)=>{console.log("watcher ",e,o)})},methods:{imgCB(e,o){this.reStore.page.imgs=JSON.parse(JSON.stringify(o.imgs)),this.reStore.router.push("/teacher/editor")},remove(e,o){console.log(e,o),this.reStore.removeBookmark(e)}}}),io={class:"row cardheader justify-between"},uo={class:"history-remove hidden"},co={class:"history-remove ptr"};function mo(e,o,p,V,$,R){return b(),q(T,{flat:""},{default:i(()=>[n(L,null,{default:i(()=>[n(Ce,{padding:"",class:"rounded-borders"},{default:i(()=>[n(pe,{"header-style":{border:"1px solid gray"},label:"My bookmarks"},{default:i(()=>[s("div",null,[(b(!0),O(J,null,_e(this.reStore.userSnapshot.bookmarks,(u,f)=>(b(),q(T,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":o[0]||(o[0]=k=>this.reStore.userSnapshot.bookmarks=k),key:f},{default:i(()=>[s("div",io,[s("span",uo,[n(x)]),A(" "+_(u.pageTitle.slice(0,25))+" ",1),s("span",co,[n(x,{name:"close",onClick:k=>this.remove(f,u)},null,8,["onClick"])])]),n(Ge,{class:"cardimage",onClick:k=>this.imgCB(f,u),src:u.imgs[0].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var ho=X(ro,[["render",mo]]);const vo=["gregorian","persian"],fo={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>vo.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},go=["update:modelValue"];function W(e){return e.year+"/"+le(e.month)+"/"+le(e.day)}function yo(e,o){const p=y(()=>e.disable!==!0&&e.readonly!==!0),V=y(()=>e.editable===!0?0:-1),$=y(()=>{const f=[];return e.color!==void 0&&f.push(`bg-${e.color}`),e.textColor!==void 0&&f.push(`text-${e.textColor}`),f.join(" ")});function R(){return e.locale!==void 0?{...o.lang.date,...e.locale}:o.lang.date}function u(f){const k=new Date,U=f===!0?null:0;if(e.calendar==="persian"){const N=ea(k);return{year:N.jy,month:N.jm,day:N.jd}}return{year:k.getFullYear(),month:k.getMonth()+1,day:k.getDate(),hour:U,minute:U,second:U,millisecond:U}}return{editable:p,tabindex:V,headerClass:$,getLocale:R,getCurrentDate:u}}const oe=20,_o=["Calendar","Years","Months"],pt=e=>_o.includes(e),We=e=>/^-?[\d]+\/[0-1]\d$/.test(e),de=" \u2014 ";function j(e){return e.year+"/"+le(e.month)}var po=Je({name:"QDate",props:{...fo,...la,...wt,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:We},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:We},navigationMaxYearMonth:{type:String,validator:We},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:pt}},emits:[...go,"rangeStart","rangeEnd","navigation"],setup(e,{slots:o,emit:p}){const{proxy:V}=kt(),{$q:$}=V,R=$t(e,$),{getCache:u}=ia(),{tabindex:f,headerClass:k,getLocale:U,getCurrentDate:N}=yo(e,$);let ne;const Ie=na(e),He=sa(Ie),ce=m(null),z=m(nt()),D=m(U()),ee=y(()=>nt()),Dt=y(()=>U()),E=y(()=>N()),v=m(st(z.value,D.value)),B=m(e.defaultView),Xe=$.lang.rtl===!0?"right":"left",ke=m(Xe.value),Re=m(Xe.value),Be=v.value.year,Se=m(Be-Be%oe-(Be<0?oe:0)),M=m(null),xt=y(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(R.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),te=y(()=>e.color||"primary"),se=y(()=>e.textColor||"white"),be=y(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Fe=y(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),P=y(()=>Fe.value.filter(t=>typeof t=="string").map(t=>Ae(t,z.value,D.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),re=y(()=>{const t=a=>Ae(a,z.value,D.value);return Fe.value.filter(a=>Kt(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),we=y(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=yt(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),Qe=y(()=>e.calendar==="persian"?W:(t,a,l)=>ta(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?z.value:a,l===void 0?D.value:l,t.year,t.timezoneOffset)),me=y(()=>P.value.length+re.value.reduce((t,a)=>t+1+aa(we.value(a.to),we.value(a.from)),0)),Ze=y(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(M.value!==null){const l=M.value.init,d=we.value(l);return D.value.daysShort[d.getDay()]+", "+D.value.monthsShort[l.month-1]+" "+l.day+de+"?"}if(me.value===0)return de;if(me.value>1)return`${me.value} ${D.value.pluralDay}`;const t=P.value[0],a=we.value(t);return isNaN(a.valueOf())===!0?de:D.value.headerTitle!==void 0?D.value.headerTitle(a,t):D.value.daysShort[a.getDay()]+", "+D.value.monthsShort[t.month-1]+" "+t.day}),Vt=y(()=>P.value.concat(re.value.map(a=>a.from)).sort((a,l)=>a.year-l.year||a.month-l.month)[0]),qt=y(()=>P.value.concat(re.value.map(a=>a.to)).sort((a,l)=>l.year-a.year||l.month-a.month)[0]),et=y(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(me.value===0)return de;if(me.value>1){const t=Vt.value,a=qt.value,l=D.value.monthsShort;return l[t.month-1]+(t.year!==a.year?" "+t.year+de+l[a.month-1]+" ":t.month!==a.month?de+l[a.month-1]:"")+" "+a.year}return P.value[0].year}),$e=y(()=>{const t=[$.iconSet.datetime.arrowLeft,$.iconSet.datetime.arrowRight];return $.lang.rtl===!0?t.reverse():t}),tt=y(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):D.value.firstDayOfWeek),Tt=y(()=>{const t=D.value.daysShort,a=tt.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),K=y(()=>{const t=v.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():Ke(t.year,t.month)}),Mt=y(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),I=y(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),H=y(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Pe=y(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return I.value!==null&&I.value.year>=v.value.year&&(t.year.prev=!1,I.value.year===v.value.year&&I.value.month>=v.value.month&&(t.month.prev=!1)),H.value!==null&&H.value.year<=v.value.year&&(t.year.next=!1,H.value.year===v.value.year&&H.value.month<=v.value.month&&(t.month.next=!1)),t}),De=y(()=>{const t={};return P.value.forEach(a=>{const l=j(a);t[l]===void 0&&(t[l]=[]),t[l].push(a.day)}),t}),at=y(()=>{const t={};return re.value.forEach(a=>{const l=j(a.from),d=j(a.to);if(t[l]===void 0&&(t[l]=[]),t[l].push({from:a.from.day,to:l===d?a.to.day:void 0,range:a}),l<d){let r;const{year:C,month:c}=a.from,g=c<12?{year:C,month:c+1}:{year:C+1,month:1};for(;(r=j(g))<=d;)t[r]===void 0&&(t[r]=[]),t[r].push({from:void 0,to:r===d?a.to.day:void 0,range:a}),g.month++,g.month>12&&(g.year++,g.month=1)}}),t}),he=y(()=>{if(M.value===null)return;const{init:t,initHash:a,final:l,finalHash:d}=M.value,[r,C]=a<=d?[t,l]:[l,t],c=j(r),g=j(C);if(c!==F.value&&g!==F.value)return;const w={};return c===F.value?(w.from=r.day,w.includeFrom=!0):w.from=1,g===F.value?(w.to=C.day,w.includeTo=!0):w.to=K.value,w}),F=y(()=>j(v.value)),It=y(()=>{const t={};if(e.options===void 0){for(let l=1;l<=K.value;l++)t[l]=!0;return t}const a=typeof e.options=="function"?e.options:l=>e.options.includes(l);for(let l=1;l<=K.value;l++){const d=F.value+"/"+le(l);t[l]=a(d)}return t}),Ht=y(()=>{const t={};if(e.events===void 0)for(let a=1;a<=K.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:l=>e.events.includes(l);for(let l=1;l<=K.value;l++){const d=F.value+"/"+le(l);t[l]=a(d)===!0&&Mt.value(d)}}return t}),Rt=y(()=>{let t,a;const{year:l,month:d}=v.value;if(e.calendar!=="persian")t=new Date(l,d-1,1),a=new Date(l,d-1,0).getDate();else{const r=yt(l,d,1);t=new Date(r.gy,r.gm-1,r.gd);let C=d-1,c=l;C===0&&(C=12,c--),a=Ke(c,C)}return{days:t.getDay()-tt.value-1,endDay:a}}),ot=y(()=>{const t=[],{days:a,endDay:l}=Rt.value,d=a<0?a+7:a;if(d<6)for(let c=l-d;c<=l;c++)t.push({i:c,fill:!0});const r=t.length;for(let c=1;c<=K.value;c++){const g={i:c,event:Ht.value[c],classes:[]};It.value[c]===!0&&(g.in=!0,g.flat=!0),t.push(g)}if(De.value[F.value]!==void 0&&De.value[F.value].forEach(c=>{const g=r+c-1;Object.assign(t[g],{selected:!0,unelevated:!0,flat:!1,color:te.value,textColor:se.value})}),at.value[F.value]!==void 0&&at.value[F.value].forEach(c=>{if(c.from!==void 0){const g=r+c.from-1,w=r+(c.to||K.value)-1;for(let Ee=g;Ee<=w;Ee++)Object.assign(t[Ee],{range:c.range,unelevated:!0,color:te.value,textColor:se.value});Object.assign(t[g],{rangeFrom:!0,flat:!1}),c.to!==void 0&&Object.assign(t[w],{rangeTo:!0,flat:!1})}else if(c.to!==void 0){const g=r+c.to-1;for(let w=r;w<=g;w++)Object.assign(t[w],{range:c.range,unelevated:!0,color:te.value,textColor:se.value});Object.assign(t[g],{flat:!1,rangeTo:!0})}else{const g=r+K.value-1;for(let w=r;w<=g;w++)Object.assign(t[w],{range:c.range,unelevated:!0,color:te.value,textColor:se.value})}}),he.value!==void 0){const c=r+he.value.from-1,g=r+he.value.to-1;for(let w=c;w<=g;w++)t[w].color=te.value,t[w].editRange=!0;he.value.includeFrom===!0&&(t[c].editRangeFrom=!0),he.value.includeTo===!0&&(t[g].editRangeTo=!0)}v.value.year===E.value.year&&v.value.month===E.value.month&&(t[r+E.value.day-1].today=!0);const C=t.length%7;if(C>0){const c=7-C;for(let g=1;g<=c;g++)t.push({i:g,fill:!0})}return t.forEach(c=>{let g="q-date__calendar-item ";c.fill===!0?g+="q-date__calendar-item--fill":(g+=`q-date__calendar-item--${c.in===!0?"in":"out"}`,c.range!==void 0&&(g+=` q-date__range${c.rangeTo===!0?"-to":c.rangeFrom===!0?"-from":""}`),c.editRange===!0&&(g+=` q-date__edit-range${c.editRangeFrom===!0?"-from":""}${c.editRangeTo===!0?"-to":""}`),(c.range!==void 0||c.editRange===!0)&&(g+=` text-${c.color}`)),c.classes=g}),t}),Bt=y(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});Q(()=>e.modelValue,t=>{if(ne===t)ne=0;else{const{year:a,month:l}=st(z.value,D.value);ie(a,l)}}),Q(B,()=>{ce.value!==null&&V.$el.contains(document.activeElement)===!0&&ce.value.focus()}),Q(()=>v.value.year,t=>{p("navigation",{year:t,month:v.value.month})}),Q(()=>v.value.month,t=>{p("navigation",{year:v.value.year,month:t})}),Q(ee,t=>{ct(t,D.value,"mask"),z.value=t}),Q(Dt,t=>{ct(z.value,t,"locale"),D.value=t});function lt(){const t=E.value,a=De.value[j(t)];(a===void 0||a.includes(t.day)===!1)&&Oe(t),Ye(t.year,t.month)}function Ft(t){pt(t)===!0&&(B.value=t)}function Qt(t,a){["month","year"].includes(t)&&(t==="month"?it:Le)(a===!0?-1:1)}function Ye(t,a){B.value="Calendar",ie(t,a)}function Pt(t,a){if(e.range===!1||!t){M.value=null;return}const l=Object.assign({...v.value},t),d=a!==void 0?Object.assign({...v.value},a):l;M.value={init:l,initHash:W(l),final:d,finalHash:W(d)},Ye(l.year,l.month)}function nt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ae(t,a,l){return oa(t,a,l,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function st(t,a){const l=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(l.length===0)return rt();const d=l[l.length-1],r=Ae(d.from!==void 0?d.from:d,t,a);return r.dateHash===null?rt():r}function rt(){let t,a;if(e.defaultYearMonth!==void 0){const l=e.defaultYearMonth.split("/");t=parseInt(l[0],10),a=parseInt(l[1],10)}else{const l=E.value!==void 0?E.value:N();t=l.year,a=l.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+le(a)+"/01"}}function it(t){let a=v.value.year,l=Number(v.value.month)+t;l===13?(l=1,a++):l===0&&(l=12,a--),ie(a,l),be.value===!0&&xe("month")}function Le(t){const a=Number(v.value.year)+t;ie(a,v.value.month),be.value===!0&&xe("year")}function Yt(t){ie(t,v.value.month),B.value=e.defaultView==="Years"?"Months":"Calendar",be.value===!0&&xe("year")}function At(t){ie(v.value.year,t),B.value="Calendar",be.value===!0&&xe("month")}function Lt(t,a){const l=De.value[a];(l!==void 0&&l.includes(t.day)===!0?Ue:Oe)(t)}function ae(t){return{year:t.year,month:t.month,day:t.day}}function ie(t,a){I.value!==null&&t<=I.value.year&&(t=I.value.year,a<I.value.month&&(a=I.value.month)),H.value!==null&&t>=H.value.year&&(t=H.value.year,a>H.value.month&&(a=H.value.month));const l=t+"/"+le(a)+"/01";l!==v.value.dateHash&&(ke.value=v.value.dateHash<l==($.lang.rtl!==!0)?"left":"right",t!==v.value.year&&(Re.value=ke.value),mt(()=>{Se.value=t-t%oe-(t<0?oe:0),Object.assign(v.value,{year:t,month:a,day:1,dateHash:l})}))}function ut(t,a,l){const d=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;ne=d;const{reason:r,details:C}=dt(a,l);p("update:modelValue",d,r,C)}function xe(t){const a=P.value[0]!==void 0&&P.value[0].dateHash!==null?{...P.value[0]}:{...v.value};mt(()=>{a.year=v.value.year,a.month=v.value.month;const l=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Ke(a.year,a.month);a.day=Math.min(Math.max(1,a.day),l);const d=ue(a);ne=d;const{details:r}=dt("",a);p("update:modelValue",d,t,r)})}function dt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...ae(a.target),from:ae(a.from),to:ae(a.to)}}:{reason:`${t}-day`,details:ae(a)}}function ue(t,a,l){return t.from!==void 0?{from:Qe.value(t.from,a,l),to:Qe.value(t.to,a,l)}:Qe.value(t,a,l)}function Oe(t){let a;if(e.multiple===!0)if(t.from!==void 0){const l=W(t.from),d=W(t.to),r=P.value.filter(c=>c.dateHash<l||c.dateHash>d),C=re.value.filter(({from:c,to:g})=>g.dateHash<l||c.dateHash>d);a=r.concat(C).concat(t).map(c=>ue(c))}else{const l=Fe.value.slice();l.push(ue(t)),a=l}else a=ue(t);ut(a,"add",t)}function Ue(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const l=ue(t);t.from!==void 0?a=e.modelValue.filter(d=>d.from!==void 0?d.from!==l.from&&d.to!==l.to:!0):a=e.modelValue.filter(d=>d!==l),a.length===0&&(a=null)}ut(a,"remove",t)}function ct(t,a,l){const d=P.value.concat(re.value).map(r=>ue(r,t,a)).filter(r=>r.from!==void 0?r.from.dateHash!==null&&r.to.dateHash!==null:r.dateHash!==null);p("update:modelValue",(e.multiple===!0?d:d[0])||null,l)}function Ot(){if(e.minimal!==!0)return h("div",{class:"q-date__header "+k.value},[h("div",{class:"relative-position"},[h(ve,{name:"q-transition--fade"},()=>h("div",{key:"h-yr-"+et.value,class:"q-date__header-subtitle q-date__header-link "+(B.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:f.value,...u("vY",{onClick(){B.value="Years"},onKeyup(t){t.keyCode===13&&(B.value="Years")}})},[et.value]))]),h("div",{class:"q-date__header-title relative-position flex no-wrap"},[h("div",{class:"relative-position col"},[h(ve,{name:"q-transition--fade"},()=>h("div",{key:"h-sub"+Ze.value,class:"q-date__header-title-label q-date__header-link "+(B.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:f.value,...u("vC",{onClick(){B.value="Calendar"},onKeyup(t){t.keyCode===13&&(B.value="Calendar")}})},[Ze.value]))]),e.todayBtn===!0?h(S,{class:"q-date__header-today self-start",icon:$.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:f.value,onClick:lt}):null])])}function ze({label:t,type:a,key:l,dir:d,goTo:r,boundaries:C,cls:c}){return[h("div",{class:"row items-center q-date__arrow"},[h(S,{round:!0,dense:!0,size:"sm",flat:!0,icon:$e.value[0],tabindex:f.value,disable:C.prev===!1,...u("go-#"+a,{onClick(){r(-1)}})})]),h("div",{class:"relative-position overflow-hidden flex flex-center"+c},[h(ve,{name:"q-transition--jump-"+d},()=>h("div",{key:l},[h(S,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:f.value,...u("view#"+a,{onClick:()=>{B.value=a}})})]))]),h("div",{class:"row items-center q-date__arrow"},[h(S,{round:!0,dense:!0,size:"sm",flat:!0,icon:$e.value[1],tabindex:f.value,disable:C.next===!1,...u("go+#"+a,{onClick(){r(1)}})})])]}const Ut={Calendar:()=>[h("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[h("div",{class:"q-date__navigation row items-center no-wrap"},ze({label:D.value.months[v.value.month-1],type:"Months",key:v.value.month,dir:ke.value,goTo:it,boundaries:Pe.value.month,cls:" col"}).concat(ze({label:v.value.year,type:"Years",key:v.value.year,dir:Re.value,goTo:Le,boundaries:Pe.value.year,cls:""}))),h("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Tt.value.map(t=>h("div",{class:"q-date__calendar-item"},[h("div",t)]))),h("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[h(ve,{name:"q-transition--slide-"+ke.value},()=>h("div",{key:F.value,class:"q-date__calendar-days fit"},ot.value.map(t=>h("div",{class:t.classes},[t.in===!0?h(S,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:f.value,...u("day#"+t.i,{onClick:()=>{zt(t.i)},onMouseover:()=>{Et(t.i)}})},t.event!==!1?()=>h("div",{class:"q-date__event bg-"+t.event}):null):h("div",""+t.i)]))))])])],Months(){const t=v.value.year===E.value.year,a=d=>I.value!==null&&v.value.year===I.value.year&&I.value.month>d||H.value!==null&&v.value.year===H.value.year&&H.value.month<d,l=D.value.monthsShort.map((d,r)=>{const C=v.value.month===r+1;return h("div",{class:"q-date__months-item flex flex-center"},[h(S,{class:t===!0&&E.value.month===r+1?"q-date__today":null,flat:C!==!0,label:d,unelevated:C,color:C===!0?te.value:null,textColor:C===!0?se.value:null,tabindex:f.value,disable:a(r+1),...u("month#"+r,{onClick:()=>{At(r+1)}})})])});return e.yearsInMonthView===!0&&l.unshift(h("div",{class:"row no-wrap full-width"},[ze({label:v.value.year,type:"Years",key:v.value.year,dir:Re.value,goTo:Le,boundaries:Pe.value.year,cls:" col"})])),h("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},l)},Years(){const t=Se.value,a=t+oe,l=[],d=r=>I.value!==null&&I.value.year>r||H.value!==null&&H.value.year<r;for(let r=t;r<=a;r++){const C=v.value.year===r;l.push(h("div",{class:"q-date__years-item flex flex-center"},[h(S,{key:"yr"+r,class:E.value.year===r?"q-date__today":null,flat:!C,label:r,dense:!0,unelevated:C,color:C===!0?te.value:null,textColor:C===!0?se.value:null,tabindex:f.value,disable:d(r),...u("yr#"+r,{onClick:()=>{Yt(r)}})})]))}return h("div",{class:"q-date__view q-date__years flex flex-center"},[h("div",{class:"col-auto"},[h(S,{round:!0,dense:!0,flat:!0,icon:$e.value[0],tabindex:f.value,disable:d(t),...u("y-",{onClick:()=>{Se.value-=oe}})})]),h("div",{class:"q-date__years-content col self-stretch row items-center"},l),h("div",{class:"col-auto"},[h(S,{round:!0,dense:!0,flat:!0,icon:$e.value[1],tabindex:f.value,disable:d(a),...u("y+",{onClick:()=>{Se.value+=oe}})})])])}};function zt(t){const a={...v.value,day:t};if(e.range===!1){Lt(a,F.value);return}if(M.value===null){const l=ot.value.find(r=>r.fill!==!0&&r.i===t);if(e.noUnset!==!0&&l.range!==void 0){Ue({target:a,from:l.range.from,to:l.range.to});return}if(l.selected===!0){Ue(a);return}const d=W(a);M.value={init:a,initHash:d,final:a,finalHash:d},p("rangeStart",ae(a))}else{const l=M.value.initHash,d=W(a),r=l<=d?{from:M.value.init,to:a}:{from:a,to:M.value.init};M.value=null,Oe(l===d?a:{target:a,...r}),p("rangeEnd",{from:ae(r.from),to:ae(r.to)})}}function Et(t){if(M.value!==null){const a={...v.value,day:t};Object.assign(M.value,{final:a,finalHash:W(a)})}}return Object.assign(V,{setToday:lt,setView:Ft,offsetCalendar:Qt,setCalendarTo:Ye,setEditingRange:Pt}),()=>{const t=[h("div",{class:"q-date__content col relative-position"},[h(ve,{name:"q-transition--fade"},Ut[B.value])])],a=Ct(o.default);return a!==void 0&&t.push(h("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&He(t,"push"),h("div",{class:xt.value,...Bt.value},[Ot(),h("div",{ref:ce,class:"q-date__main col column",tabindex:-1},t)])}}});const Co=G({name:"OTDComponent",setup(){const e=Z(),o=Date.now(),p=_t.formatDate(o,"MM/DD");return{reStore:e,otditems:m([]),promptOTDDate:m(!1),otddate:m(Date.now()),otdlabel:m(p),otdtype:m("selected")}},mounted(){this.init()},methods:{async init(){const e=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=e[this.otdtype],console.log(this.otditems)},async load(e){console.log("load",this.otditems[e].text),console.log("load",this.otditems[e]);const o=this.reStore.langVoices[this.reStore.preferences.langVoice];this.reStore.loadPageId(this.otditems[e].pages[0].pageid,o),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const e=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=e.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=_t.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(e){console.log("otdOptionsCB",this.otdtype);const o=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=o[this.otdtype]}}}),ko=s("div",{class:"text-h6"},"Select Date",-1),So={class:"q-gutter-y-sm column"},bo={class:""};function wo(e,o,p,V,$,R){return b(),O(J,null,[n(bt,{modelValue:e.promptOTDDate,"onUpdate:modelValue":o[2]||(o[2]=u=>e.promptOTDDate=u),persistent:""},{default:i(()=>[n(T,{style:{"min-width":"350px"}},{default:i(()=>[n(L,{align:"center"},{default:i(()=>[ko]),_:1}),n(po,{modelValue:e.otddate,"onUpdate:modelValue":o[0]||(o[0]=u=>e.otddate=u),minimal:""},null,8,["modelValue"]),n(St,{align:"center",class:"text-white"},{default:i(()=>[Te(n(S,{flat:"",label:"Cancel"},null,512),[[Me]]),Te(n(S,{flat:"",label:"Update OTD date",onClick:o[1]||(o[1]=u=>this.updateOTDDate())},null,512),[[Me]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(T,{flat:""},{default:i(()=>[n(L,null,{default:i(()=>[n(Ce,{padding:"",class:"rounded-borders"},{default:i(()=>[n(pe,{"header-style":{border:"1px solid gray"},label:"On This Day"},{default:i(()=>[s("div",So,[n(fe,{class:"bg-primary text-white rounded-borders q-my-md"},{default:i(()=>[n(S,{dark:"",standout:"",onClick:o[3]||(o[3]=u=>e.promptOTDDate=!0)},{default:i(()=>[A(_(e.otdlabel),1)]),_:1}),n(je),n(ua,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":o[4]||(o[4]=u=>this.otdtype=u),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:o[5]||(o[5]=u=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),s("div",bo,[(b(!0),O(J,null,_e(e.otditems,(u,f)=>(b(),q(T,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:e.otditems,"onUpdate:modelValue":o[6]||(o[6]=k=>e.otditems=k),key:f,onClick:k=>this.load(f)},{default:i(()=>[A(_(f)+". "+_(u.year)+" "+_(u.text),1)]),_:2},1032,["modelValue","onClick"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}var $o=X(Co,[["render",wo]]);const Do=G({name:"CurrentAssignment",setup(){const e=Z();return{reStore:e,assignmentid:m("-"),courseid:m("-"),goal:m("-"),created:m("-"),id:m("-"),points:m("-"),pages:m([]),pgIdx:m(0),title:m(e.assignment.title)}},mounted(){console.log("mounted"),Q(this.reStore.assignment,async(e,o)=>{try{console.log("watcher ",e,o),this.courseid=e.courseid,this.goal=e.goal,this.created=e.created,this.id=e.id,this.points=e.points,this.pages=e.pages,this.pgIdx=e.pgIdx,this.title=e.title}catch(p){console.log(p)}})},methods:{dummy(){console.log("dummy")}}}),xo={class:"text-weight-bolder text-center q-pa-md"},Vo={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},qo={width:"100%"},To=s("td",null,"Course Id",-1),Mo={style:{width:"50%"}},Io=s("td",null,"Assgmnt Id",-1),Ho={style:{width:"50%"}},Ro=s("td",null,"Created",-1),Bo={style:{width:"50%"}},Fo=s("td",null,"Goal",-1),Qo={style:{width:"50%"}},Po=s("td",null,"Pages",-1),Yo={style:{width:"50%"}};function Ao(e,o,p,V,$,R){return b(),q(T,{flat:""},{default:i(()=>[n(L,null,{default:i(()=>[s("div",xo,_(this.title),1),s("div",Vo,[s("table",qo,[s("tr",null,[To,s("td",Mo,_(this.courseid),1)]),s("tr",null,[Io,s("td",Ho,_(this.id),1)]),s("tr",null,[Ro,s("td",Bo,_(this.created),1)]),s("tr",null,[Fo,s("td",Qo,_(this.goal),1)]),s("tr",null,[Po,s("td",Yo,_(this.pgIdx)+" / "+_(this.pages.length),1)])])])]),_:1})]),_:1})}var Lo=X(Do,[["render",Ao]]);const Oo=G({name:"CurrentCourse",setup(){const e=Z();return{reStore:e,title:m(e.course.title),assignmentCount:m(0),courseKey:m(e.course.courseKey),created:m(e.course.created),enrollmentCount:m(0),owner:m(e.course.owner)}},mounted(){console.log("CurrentCourse mounted"),Q(this.reStore.course,async(e,o)=>{try{console.log("CurrentCourse watcher ",e,o),this.assignmentCount=Object.keys(e.assignments).length,this.title=e.title,this.courseKey=e.courseKey,this.created=e.created,this.enrollmentCount=Object.keys(e.enrollment).length,this.owner=e.owner}catch(p){console.log(p)}})},methods:{dummy(){console.log("dummy")}}}),Uo={class:"text-weight-bolder text-center q-pa-md"},zo={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Eo={width:"100%"},No=s("td",null,"Owner",-1),Ko={style:{width:"50%"}},Wo=s("td",null,"Assignments",-1),jo={style:{width:"50%"}},Jo=s("td",null,"Course-Key",-1),Go={style:{width:"50%"}},Xo=s("td",null,"Created",-1),Zo={style:{width:"50%"}},el=s("td",null,"Enrollment",-1),tl={style:{width:"50%"}};function al(e,o,p,V,$,R){return b(),q(T,{flat:""},{default:i(()=>[n(L,null,{default:i(()=>[s("div",Uo,_(this.title),1),s("div",zo,[s("table",Eo,[s("tr",null,[No,s("td",Ko,_(this.owner.slice(0,10)),1)]),s("tr",null,[Wo,s("td",jo,_(this.assignmentCount),1)]),s("tr",null,[Jo,s("td",Go,_(this.courseKey),1)]),s("tr",null,[Xo,s("td",Zo,_(this.created),1)]),s("tr",null,[el,s("td",tl,_(this.enrollmentCount),1)])])])]),_:1})]),_:1})}var ol=X(Oo,[["render",al]]);const ll=G({name:"TeacherLayout",components:{CurrentCourse:ol,DocumentationComponent:da,SearchComponent:Sa,ImagesComponent:so,BookmarksComponent:ho,OTDComponent:$o,CurrentAssignment:Lo,PreferencesComponent:ca,CurrentPage:eo},setup(){const e=m(!1),o=m(!1),p=Z(),V=p.userSnapshot.preferences,$=m(null),R=m(null);return{step:m(1),reStore:p,initialValues:m(V),scrollAreaRHS:$,scrollAreaLHS:R,leftDrawerOpen:e,rightDrawerOpen:o,toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){o.value=!o.value}}},mounted(){ht.isActive||(ht.toggle(),Ne("primary","#333"),Ne("secondary",this.initialValues.secondaryColor),Ne("accent",this.initialValues.accentColor))},methods:{scrollTopRHS(){this.scrollAreaRHS.setScrollPosition("vertical",0)},scrollTopLHS(){this.scrollAreaLHS.setScrollPosition("vertical",0)}}}),nl={class:"dashboard-wrapper"};function sl(e,o,p,V,$,R){const u=Y("router-link"),f=Y("router-view"),k=Y("DocumentationComponent"),U=Y("SearchComponent"),N=Y("ImagesComponent"),ne=Y("BookmarksComponent"),Ie=Y("OTDComponent"),He=Y("CurrentCourse"),ce=Y("CurrentAssignment"),z=Y("CurrentPage"),D=Y("PreferencesComponent");return b(),q(Xt,{view:"hHh LpR fFf"},{default:i(()=>[n(Jt,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:i(()=>[n(fe,null,{default:i(()=>[n(S,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),n(Wt,null,{default:i(()=>[n(u,{to:"/teacher"},{default:i(()=>[n(x,{name:"home",color:"white"},{default:i(()=>[n(ye,null,{default:i(()=>[A("Return to My Teacher Page")]),_:1})]),_:1})]),_:1})]),_:1}),this.reStore.authenticated?(b(),q(S,{key:0,onClick:o[0]||(o[0]=ee=>this.reStore.router.push("/student")),icon:"switch_account"},{default:i(()=>[n(ye,null,{default:i(()=>[A(" Switch between Teacher or Student role ")]),_:1})]),_:1})):ge("",!0),this.reStore.authenticated?(b(),q(S,{key:1,icon:"logout",onClick:o[1]||(o[1]=ee=>this.reStore.logout())})):ge("",!0),n(S,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1}),n(jt,{align:"left",class:"hidden"},{default:i(()=>[n(Ve,{to:"/logo",label:"Logo"}),n(Ve,{to:"/teaching",label:"Teaching"}),n(Ve,{to:"/taking",label:"Taking"}),n(Ve,{to:"/gradebook",label:"Gradebook"})]),_:1})]),_:1}),n(Gt,{class:"container-fluid"},{default:i(()=>[s("div",nl,[n(f)]),n(vt,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":o[2]||(o[2]=ee=>e.leftDrawerOpen=ee),side:"left"},{default:i(()=>[n(fe,{flat:"",class:"bg-primary text-white"},{default:i(()=>[n(S,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),n(qe,{dark:"",vertical:"",inset:""}),n(S,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),n(qe,{dark:"",vertical:"",inset:""}),n(je),n(S,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopLHS},null,8,["onClick"])]),_:1}),n(ft,{visible:e.visible,style:{height:"95vh","max-width":"350px"},ref:"scrollAreaLHS"},{default:i(()=>[n(k),n(U),n(N),n(ne),n(Ie)]),_:1},8,["visible"])]),_:1},8,["modelValue"]),n(vt,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":o[3]||(o[3]=ee=>e.rightDrawerOpen=ee),side:"right"},{default:i(()=>[n(fe,{flat:"",class:"bg-primary text-white"},{default:i(()=>[n(S,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),n(qe,{dark:"",vertical:"",inset:""}),n(S,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),n(qe,{dark:"",vertical:"",inset:""}),n(je),n(S,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopRHS},null,8,["onClick"])]),_:1}),n(ft,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaRHS"},{default:i(()=>[n(He),n(ce),n(z),n(D,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var $l=X(ll,[["render",sl]]);export{$l as default};
