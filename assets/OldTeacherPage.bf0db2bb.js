import{d as Q,r as b,a as B,Q as _,i as K,h as A,C as T}from"./ClosePopup.e4b71328.js";import{Q as V}from"./QInput.d8b47516.js";import{_ as q,r as y,o as n,c as w,w as l,a as t,aK as P,p as x,Q as C,e as s,af as m,au as r,av as f,aM as g,aJ as v,ag as d,x as S}from"./index.fd0c91d0.js";import{Q as k}from"./QTooltip.b6607b43.js";import{Q as N}from"./QPage.5d97b003.js";import{u as $}from"./re-store.9b9ddf75.js";import"./use-dark.6e174d7a.js";import"./use-portal.7786b934.js";import"./use-key-composition.265d8c0f.js";import"./position-engine.7b1a9bc0.js";import"./selection.8201d631.js";import"./firebase.ea708b63.js";function E(o){const e=document.createElement("textarea");e.value=o,e.contentEditable="true",e.style.position="fixed";const p=()=>{};Q(p),document.body.appendChild(e),e.focus(),e.select();const i=document.execCommand("copy");return e.remove(),b(p),i}function D(o){return navigator.clipboard!==void 0?navigator.clipboard.writeText(o):new Promise((e,p)=>{const i=E(o);i?e(!0):p(i)})}const F=$(),H={components:{},setup(){return{reStore:F,courseKey:y(null),courseTitle:y(null),prompt:y(!1)}},methods:{copyCK(o){D(o).then(()=>{console.log("ck copied to clipboard",o)}).catch(e=>{console.log(e)})},newCourseCB(){console.log("courseCB"),this.reStore.newCourse()},newAssignmentCB(o){console.log("assignmentCB: ",o),this.reStore.newAssignment(o)},editAssignmentCB(o,e){console.log("editAssignmentCB: ",o,e),this.reStore.editAssignment(o,e)},changeTitleCB(){console.log("TeacherPage.titleCB",this.courseKey,this.courseTitle),this.reStore.setCourseTitle(this.courseKey,this.courseTitle)}}},I=s("div",{class:"text-h6"},"Change course title",-1),M={class:"flex-center q-mt-xl q-mb-xl row q-gutter-md"},U=s("div",{class:"text-h6"},"My Teacher Page",-1),J={key:0,class:"flex-center q-pa-md"},L=s("br",null,null,-1),O={width:"100%"},R=s("tr",null,[s("th"),s("th",{colSpan:"100"}," Assignments ")],-1),j={key:0},z=s("th",null,"Student",-1),G={class:"hidden"},W={key:1},X={class:"hidden"},Y={key:0},Z={key:1},ee={class:"hidden"};function te(o,e,p,i,oe,se){return n(),w(N,{class:"q-gutter-md"},{default:l(()=>[t(A,{modelValue:i.prompt,"onUpdate:modelValue":e[3]||(e[3]=c=>i.prompt=c),persistent:""},{default:l(()=>[t(B,{style:{"min-width":"350px"}},{default:l(()=>[t(_,null,{default:l(()=>[I]),_:1}),t(_,{class:"q-pt-none"},{default:l(()=>[t(V,{dense:"",modelValue:i.courseTitle,"onUpdate:modelValue":e[0]||(e[0]=c=>i.courseTitle=c),autofocus:"",onKeyup:e[1]||(e[1]=P(c=>{i.prompt=!1,this.changeTitleCB()},["enter"])),onHide:this.dck},null,8,["modelValue","onHide"])]),_:1}),t(K,{align:"right"},{default:l(()=>[x(t(C,{outline:"",label:"Cancel"},null,512),[[T]]),x(t(C,{outline:"",label:"Save",onClick:e[2]||(e[2]=c=>this.changeTitleCB())},null,512),[[T]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s("div",M,[U,s("div",null,[t(C,{icon:"list_alt",onClick:e[4]||(e[4]=c=>this.newCourseCB())},{default:l(()=>[t(k,null,{default:l(()=>[m("Add a course")]),_:1})]),_:1})])]),this.reStore.userSnapshot.teaching?(n(),r("div",J,[(n(!0),r(f,null,g(this.reStore.userSnapshot.teaching,(c,a)=>(n(),w(B,{key:c.ck,class:"course-card q-mt-md q-mb-md"},{default:l(()=>[t(_,null,{default:l(()=>[m(" Title: "+d(a)+" \xA0",1),t(S,{class:"ptr",name:"edit",onClick:u=>{i.prompt=!0,this.courseTitle=this.reStore.courses[a].title,this.courseKey=a}},null,8,["onClick"]),L,m(" Key: "+d(a)+" ",1),t(S,{class:"ptr",name:"content_copy",onClick:u=>this.copyCK(a)},null,8,["onClick"]),s("div",null,[t(C,{icon:"assignment",onClick:u=>this.newAssignmentCB(c.ck)},{default:l(()=>[t(k,null,{default:l(()=>[m("New Assignment")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1024),t(_,null,{default:l(()=>[s("table",O,[R,this.reStore.courses[a]?(n(),r("tr",j,[z,(n(!0),r(f,null,g(this.reStore.courses[a].assignments,(u,h)=>(n(),r("th",{key:u},[m(d(u.title)+" ",1),t(S,{onClick:ne=>this.editAssignmentCB(a,u.id),name:"edit"},null,8,["onClick"]),s("span",G,d(h),1)]))),128))])):v("",!0),this.reStore.courses[a].enrollment?(n(),r("span",W,[(n(!0),r(f,null,g(this.reStore.courses[a].enrollment,u=>(n(),r("tr",{key:u.name},[s("td",null,[m(d(u.name)+" ",1),s("span",X,d(o.sidx),1)]),(n(!0),r(f,null,g(this.reStore.courses[a].assignments,h=>(n(),r("td",{key:h},[h.scores&&h.scores[u.emailKey]?(n(),r("span",Y,d(h.scores[u.emailKey]),1)):(n(),r("span",Z,"-")),m(),s("span",ee,d(o.aidx),1)]))),128))]))),128))])):v("",!0)])]),_:2},1024)]),_:2},1024))),128))])):v("",!0)]),_:1})}var fe=q(H,[["render",te]]);export{fe as default};
