import{d as b,r as Q,a as A,Q as f,i as K,h as P,C as w}from"./ClosePopup.29d157a7.js";import{Q as V}from"./QInput.a37399de.js";import{_ as $,r as S,o as a,c as k,w as o,a as t,aK as q,p as x,Q as p,e as n,af as r,aJ as B,au as d,av as y,aL as v,ag as h,x as g}from"./index.c84103d7.js";import{Q as m}from"./QTooltip.7503fa9a.js";import{Q as E}from"./QExpansionItem.e6a04dd6.js";import{Q as D}from"./QPage.130dd1d5.js";import{u as N}from"./re-store.a2b4fc96.js";import"./use-dark.62b050fa.js";import"./use-portal.3b4ec98a.js";import"./use-key-composition.1fe55d27.js";import"./position-engine.6c141e5c.js";import"./selection.2249d72b.js";import"./QSlideTransition.2fd61234.js";import"./firebase.ea708b63.js";function F(s){const e=document.createElement("textarea");e.value=s,e.contentEditable="true",e.style.position="fixed";const C=()=>{};b(C),document.body.appendChild(e),e.focus(),e.select();const u=document.execCommand("copy");return e.remove(),Q(C),u}function I(s){return navigator.clipboard!==void 0?navigator.clipboard.writeText(s):new Promise((e,C)=>{const u=F(s);u?e(!0):C(u)})}const H=N(),L={components:{},setup(){return{reStore:H,courseKey:S(null),courseTitle:S(null),prompt:S(!1)}},mounted(){console.log("TeacherPage mounted ",this.reStore.courses)},methods:{copyCK(s){I(s).then(()=>{console.log("ck copied to clipboard",s)}).catch(e=>{console.log(e)})},newCourseCB(){console.log("courseCB"),this.reStore.newCourse()},newAssignmentCB(s){console.log("assignmentCB: ",s),this.reStore.newAssignment(s)},editAssignmentCB(s,e){console.log("editAssignmentCB: ",s,e),this.reStore.editAssignment(s,e)},changeTitleCB(){console.log("TeacherPage.titleCB",this.courseKey,this.courseTitle),this.reStore.setCourseTitle(this.courseKey,this.courseTitle)},deleteCourseCB(s){this.reStore.deleteCourse(s)},deleteAssignmentCB(s,e){this.reStore.deleteAssignment(s,e)},takeAssignmentCB(s,e){console.log("TeacherPage.takeAssignment ",s,e),this.reStore.takeAssignmentAsTeacher(s,e)}}},U=n("div",{class:"text-h6"},"Change course title",-1),J={class:"flex-center q-mt-xl q-mb-xl row q-gutter-md"},M=n("div",{class:"text-h6"},"My Teacher Page",-1),R={key:0,class:"flex-center q-pa-md"},j=n("br",null,null,-1),z=n("br",null,null,-1),G=n("br",null,null,-1),O={width:"100%",class:"course_table"},W=n("tr",null,[n("th"),n("th",{colSpan:"100"}," Assignments ")],-1),X={key:0},Y=n("th",null,"Student",-1),Z={class:"hidden"},ee={class:"hidden"},te={key:0},se={key:1},oe={class:"hidden"},ne={colSpan:"10"};function le(s,e,C,u,re,ie){return a(),k(D,{class:"q-gutter-md"},{default:o(()=>[t(P,{modelValue:u.prompt,"onUpdate:modelValue":e[3]||(e[3]=c=>u.prompt=c),persistent:""},{default:o(()=>[t(A,{style:{"min-width":"350px"}},{default:o(()=>[t(f,null,{default:o(()=>[U]),_:1}),t(f,{class:"q-pt-none"},{default:o(()=>[t(V,{dense:"",modelValue:u.courseTitle,"onUpdate:modelValue":e[0]||(e[0]=c=>u.courseTitle=c),autofocus:"",onKeyup:e[1]||(e[1]=q(c=>{u.prompt=!1,this.changeTitleCB()},["enter"])),onHide:this.dck},null,8,["modelValue","onHide"])]),_:1}),t(K,{align:"right",class:"text-white"},{default:o(()=>[x(t(p,{outline:"",label:"Cancel"},null,512),[[w]]),x(t(p,{outline:"",label:"Save",onClick:e[2]||(e[2]=c=>this.changeTitleCB())},null,512),[[w]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n("div",J,[M,n("div",null,[t(p,{icon:"list_alt",onClick:e[4]||(e[4]=c=>this.newCourseCB())},{default:o(()=>[t(m,null,{default:o(()=>[r("Add a course")]),_:1})]),_:1}),this.reStore.authenticated?(a(),k(p,{key:0,onClick:e[5]||(e[5]=c=>this.reStore.router.push("/student")),icon:"switch_account"},{default:o(()=>[t(m,null,{default:o(()=>[r(" Switch to Student role ")]),_:1})]),_:1})):B("",!0)])]),this.reStore.userSnapshot.teaching?(a(),d("div",R,[(a(!0),d(y,null,v(this.reStore.userSnapshot.teaching,(c,i)=>(a(),k(A,{key:c.ck,class:"course-card q-mt-md q-mb-md"},{default:o(()=>[t(f,null,{default:o(()=>[r(" Title: "+h(i)+" \xA0",1),t(g,{class:"ptr",name:"edit",onClick:l=>{u.prompt=!0,this.courseTitle=this.reStore.courses[i].title,this.courseKey=i}},null,8,["onClick"]),j,r(" Key: "+h(i)+" ",1),t(g,{class:"ptr",name:"content_copy",onClick:l=>this.copyCK(i)},null,8,["onClick"]),n("div",null,[t(p,{icon:"delete",onClick:l=>this.deleteCourseCB(c.ck)},{default:o(()=>[t(m,null,{default:o(()=>[r("Delete Course")]),_:1})]),_:2},1032,["onClick"]),t(p,{icon:"post_add",onClick:l=>this.newAssignmentCB(c.ck)},{default:o(()=>[t(m,null,{default:o(()=>[r("New Assignment")]),_:1})]),_:2},1032,["onClick"]),t(p,{icon:"content_copy",onClick:l=>this.copyCK(i)},{default:o(()=>[t(m,null,{default:o(()=>[r("Copy this course-key to clipboard. Enroll "),z,r("in this course using this course-key from "),G,r("the Student Page.")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1024),t(f,null,{default:o(()=>[n("table",O,[W,this.reStore.courses[i]?(a(),d("tr",X,[Y,(a(!0),d(y,null,v(this.reStore.courses[i].assignments,(l,_)=>(a(),d("th",{key:l},[n("span",null,h(l.title.slice(0,10)),1),n("span",null,[t(g,{onClick:T=>this.takeAssignmentCB(i,l.id),name:"play_circle",class:"ptr on-right"},null,8,["onClick"]),t(m,null,{default:o(()=>[r("Take Assignment")]),_:1})]),n("span",null,[t(g,{onClick:T=>this.editAssignmentCB(i,l.id),name:"edit",class:"ptr on-right"},null,8,["onClick"]),t(m,null,{default:o(()=>[r("Edit Assignment")]),_:1})]),n("span",null,[t(g,{onClick:T=>this.deleteAssignmentCB(i,l.id),name:"delete",class:"ptr on-right"},null,8,["onClick"]),t(m,null,{default:o(()=>[r("Delete Assignment")]),_:1})]),n("span",Z,h(_),1)]))),128))])):B("",!0),(a(!0),d(y,null,v(this.reStore.courses[i].enrollment,l=>(a(),d("tr",{key:l.name},[n("td",null,[r(h(l.name)+" ",1),n("span",ee,h(s.sidx),1)]),(a(!0),d(y,null,v(this.reStore.courses[i].assignments,_=>(a(),d("td",{key:_},[_.scores&&_.scores[l.emailKey]?(a(),d("span",te,h(_.scores[l.emailKey]),1)):(a(),d("span",se,"-")),r(),n("span",oe,h(s.aidx),1)]))),128))]))),128)),n("tr",null,[n("td",ne,[t(E,{label:"raw"},{default:o(()=>[r(h(this.reStore.courses[i]),1)]),_:2},1024)])])])]),_:2},1024)]),_:2},1024))),128))])):B("",!0)]),_:1})}var ke=$(L,[["render",le]]);export{ke as default};
