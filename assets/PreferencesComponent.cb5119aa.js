import{Q as C}from"./QToggle.d2931b8c.js";import{Q as z}from"./QMenu.851424f5.js";import{u as S}from"./store.0c015e28.js";import{Q as B}from"./QImg.0ec33ee0.js";import{Q as v}from"./QCard.faa469cf.js";import{j as w,_ as T,k as i,m as V,n as r,ab as d,t,G as n,aa as a,p as F,s as I,q as l,H as b,a8 as q,r as x,P as k,aj as $,ae as D,Q as h}from"./index.4bce0168.js";import{Q as y,c as Q,d as U,C as P}from"./ClosePopup.47aff92c.js";import{Q as N,a as A}from"./QSelect.5f9fa357.js";import{Q as L}from"./QTooltip.37313b83.js";import{Q as j}from"./QExpansionItem.63569001.js";import{Q as E}from"./QList.62f59d68.js";import"./transform.9aa67f3e.js";import{s as u}from"./selectAll.be636dd1.js";const K=w({name:"TileComponent",props:["tileName","tileData","tileType","imgUrl","targetUrl","ck","aid","pgIdx","imgIdx"],setup(){return{store:S()}},methods:{clickCB(s,e,m,f,c,p,o,g){if(console.log("clickCB",s,e,m,f,c,p,o,g),this.store.ck=s,this.store.aid=e,this.store.pgIdx=m,o==="course")console.log("setting aid -1"),this.store.aid=null;else if(o==="assignment"){this.store.pgIdx=0,this.store.router.push("/courses/assignments");return}else if(o==="page"){this.store.pgIdx=m,this.store.router.push("/courses/assignments/pages");return}try{this.store.imgIdx=this.imgIdx,this.store.currentPage.imgIdx=this.imgIdx}catch(_){console.log(_)}c!==null?this.store.router.push(c):p!==null&&o==="image"&&(this.store.imgIdx=this.imgIdx)}}}),O={class:"text-h6 absolute-center full-width text-center"},M={key:0},R={key:1},G={key:2},H={key:3},W={key:4},J={key:5},X={key:6},Y={class:"hidden"},Z=t("tr",null,[t("th",{align:"left"},"prop"),t("th",{align:"center"},[t("b",null,"val")])],-1),ee={key:0},te=t("td",null,"ck",-1),se={key:1},oe=t("td",null,"aid",-1),le={key:2},ie=t("td",null,"pgIdx",-1),ne={key:3},ae=t("td",null,"imgIdx",-1),re={key:4},de=t("td",null,"imgUrl",-1),ue={key:5},he=t("td",null,"targetUrl",-1);function me(s,e,m,f,c,p){return i(),V(v,{flat:"",bordered:"",class:"q-ma-md q-pa-xs cursor-pointer tile-component",onClick:e[0]||(e[0]=o=>this.clickCB(this.ck,this.aid,this.pgIdx,this.imgIdx,this.targetUrl,this.imgUrl,this.tileType,this.tileName))},{default:r(()=>[this.imgUrl?(i(),V(B,{key:0,class:"absolute-center tile-component",src:this.imgUrl,style:{opacity:"1"}},null,8,["src"])):d("",!0),t("div",O,[this.tileData.pageTitle!==null?(i(),n("div",M,a(this.tileData.pageTitle),1)):d("",!0),this.tileType=="section"?(i(),n("div",R,a(this.tileName),1)):d("",!0),this.tileType=="course"?(i(),n("div",G,[t("div",null,a(this.tileData.title),1),t("div",null,a(Object.keys(this.tileData.assignments).length)+" assignments ",1),t("div",null,a(Object.keys(this.tileData.enrollment).length)+" students",1)])):d("",!0),this.tileType=="assignment"?(i(),n("div",H,[t("div",null,a(this.tileData.title),1),t("div",null,a(this.tileData.pages.length)+" pgs",1)])):d("",!0),this.tileType==="page"?(i(),n("div",W,"Page "+a(this.pgIdx+1),1)):d("",!0),this.store.currentPage&&this.tileType=="page"?(i(),n("div",J,a(this.store.currentAssignment.pages[this.pgIdx].imgs.length)+" imgs ",1)):d("",!0),this.tileType=="image"?(i(),n("div",X,"Image "+a(this.imgIdx+1),1)):d("",!0)]),t("table",Y,[Z,this.ck?(i(),n("tr",ee,[te,t("td",null,a(this.ck),1)])):d("",!0),this.aid?(i(),n("tr",se,[oe,t("td",null,a(this.aid),1)])):d("",!0),this.pgIdx!==null?(i(),n("tr",le,[ie,t("td",null,a(this.pgIdx),1)])):d("",!0),this.imgIdx!==null?(i(),n("tr",ne,[ae,t("td",null,a(this.imgIdx),1)])):d("",!0),this.imgUrl?(i(),n("tr",re,[de,t("td",null,"..."+a(this.imgUrl.slice(-20)),1)])):d("",!0),this.targetUrl?(i(),n("tr",ue,[he,t("td",null,"..."+a(this.targetUrl.slice(-20)),1)])):d("",!0)])]),_:1})}var ce=T(K,[["render",me]]);const ge=w({name:"ImagePager",components:{TileComponent:ce},props:[],setup(){return{store:S()}},methods:{}}),pe={class:"text-panel q-ma-md text-center text-h6"},fe={key:0},_e={key:0};function xe(s,e,m,f,c,p){const o=F("TileComponent");return i(),n(b,null,[t("div",pe,[I("Images: "),this.store.currentPage?(i(),n("span",fe,a(this.store.currentPage.imgs.length),1)):d("",!0)]),l(z,{class:"hidden"},{default:r(()=>[l(C,{label:"Image Fit",modelValue:this.store.imgFit,"onUpdate:modelValue":e[0]||(e[0]=g=>this.store.imgFit=g)},null,8,["modelValue"])]),_:1}),this.store.currentPage?(i(),n("span",_e,[(i(!0),n(b,null,q(this.store.currentPage.imgs,(g,_)=>(i(),n("span",{key:_},[l(o,{tileData:g,imgUrl:g.url,targetUrl:null,ck:this.store.ck,aid:this.store.aid,pgIdx:this.store.pgIdx,imgIdx:_,tileType:"image"},null,8,["tileData","imgUrl","ck","aid","pgIdx","imgIdx"])]))),128))])):d("",!0)],64)}var Oe=T(ge,[["render",xe]]);const ke=w({name:"PreferencesComponent",setup(){return{store:S(),dark:x(k.isActive),promptFontSize:x(!1),promptLanguage:x(!1),showText:x(!0)}},mounted(){},methods:{langChangeCB(s){console.log(s);const e=this.flagName;u("#sfi").classed(e,!1),console.log(this.store.langVoices),this.flagName=this.store.langVoices[s].flagName,console.log("langChangeCB",s,this.flagName),u("#sfi").classed(this.flagName,!0)},populateDemo(){console.log("populateDemo"),Object.keys(this.store.currentCourse.assignments).forEach(s=>{console.log(s),Object.keys(this.store.currentCourse.enrollment).forEach(e=>{this.store.currentCourse.assignments[s].scores||(this.store.currentCourse.assignments[s].scores={}),this.store.currentCourse.assignments[s].scores[e]=parseInt(Math.random()*100)})})},toggleText(){console.log("toggleText",this.showText),this.showText===!0?(console.log("showing text"),u(".assignment").classed("hidden",!1),u(".q-carousel__thumbnail").classed("hidden",!1)):(console.log("hiding text"),u(".assignment").classed("hidden",!0),u(".q-carousel__thumbnail").classed("hidden",!0))},toggleDark(){k.toggle(),console.log(k.isActive,this.dark),k.isActive},fontSizeCB(s){u("#sampleFontSwatch").style("font-size",s+"pt"),u("#slideTextDiv").style("font-size",s+"pt"),this.store.userSnapshot.preferences.pageFontSize=s},fsCB(){$.isActive?$.exit().then(()=>{}).catch(s=>{console.log(s)}):$.request().then(()=>{}).catch(s=>{console.log(s)})}}}),ye=t("div",{class:"text-h6"},"Reconstruct Paragraph Font Size",-1),Ce=t("td",{style:{width:"60%"}},[t("div",{id:"sampleFontSwatch"},"Reading Edge!")],-1),ve=t("div",{class:"text-h6"},"Set Language For WP",-1),$e=t("span",{class:"on-right",id:"sfi"},null,-1),Ve={width:"100%",class:"z-max"},Ie={class:"q-pa-md",style:{"max-width":"350px"}},be={class:"text-center",style:{width:"100%"}},Se={class:"text-center hidden",style:{width:"100%"}},we={class:"text-center",style:{width:"100%"}},Te={class:"text-center q-mb-md",style:{width:"100%"}};function De(s,e,m,f,c,p){return i(),n(b,null,[l(U,{modelValue:s.promptFontSize,"onUpdate:modelValue":e[1]||(e[1]=o=>s.promptFontSize=o),persistent:""},{default:r(()=>[l(v,{style:{"min-width":"350px"}},{default:r(()=>[l(y,{align:"center"},{default:r(()=>[ye]),_:1}),l(y,{class:"q-pt-none",align:"center"},{default:r(()=>[t("table",null,[t("tr",null,[t("td",null,[l(N,{"show-value":"",size:"140px",thickness:.5,color:"positive","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:this.store.userSnapshot.preferences.pageFontSize,"onUpdate:modelValue":e[0]||(e[0]=o=>this.store.userSnapshot.preferences.pageFontSize=o),min:"0",max:"50",onDragValue:this.fontSizeCB},null,8,["thickness","modelValue","onDragValue"])]),Ce])])]),_:1}),l(Q,{align:"center",class:"text-white"},{default:r(()=>[D(l(h,{outline:"",flat:"",label:"Done"},null,512),[[P]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(U,{modelValue:s.promptLanguage,"onUpdate:modelValue":e[3]||(e[3]=o=>s.promptLanguage=o),persistent:""},{default:r(()=>[l(v,{style:{"min-width":"350px"}},{default:r(()=>[l(y,null,{default:r(()=>[ve,I(),$e]),_:1}),l(y,{class:"q-pt-none"},{default:r(()=>[t("table",Ve,[t("tr",null,[t("td",null,[l(A,{class:"z-max",outlined:"",modelValue:this.store.userSnapshot.preferences.langVoiceKey,"onUpdate:modelValue":[e[2]||(e[2]=o=>this.store.userSnapshot.preferences.langVoiceKey=o),this.langChangeCB],options:this.store.userSnapshot.preferences.langVoices},null,8,["modelValue","options","onUpdate:modelValue"])])])])]),_:1}),l(Q,{align:"right",class:"text-white"},{default:r(()=>[D(l(h,{outline:"",flat:"",label:"Done"},null,512),[[P]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t("div",Ie,[l(E,{bordered:"",class:"rounded-borders",icon:"gear"},{default:r(()=>[l(j,{label:"Preferences"},{default:r(()=>[t("div",be,[l(C,{modelValue:s.dark,"onUpdate:modelValue":e[4]||(e[4]=o=>s.dark=o),"keep-color":"",color:"primary","unchecked-icon":"light_mode","checked-icon":"dark_mode",onClick:e[5]||(e[5]=o=>this.toggleDark()),label:"Dark Mode"},null,8,["modelValue"])]),t("div",Se,[l(C,{label:"Auto-Play",modelValue:this.store.autoplay,"onUpdate:modelValue":e[6]||(e[6]=o=>this.store.autoplay=o),"keep-color":"",color:"primary"},null,8,["modelValue"])]),t("div",we,[l(C,{label:"Show Text",modelValue:this.showText,"onUpdate:modelValue":e[7]||(e[7]=o=>this.showText=o),"keep-color":"",color:"primary",onClick:e[8]||(e[8]=o=>this.toggleText())},null,8,["modelValue"])]),t("div",Te,[l(h,null,{default:r(()=>[t("span",{id:"sfi",onClick:e[9]||(e[9]=o=>s.promptLanguage=!0)},[l(L,{style:{backgroundColor:"#222",fontSize:"12pt"}},{default:r(()=>[l(v,{bordered:"",flat:"",class:"q-ma-xs q-pa-sm"},{default:r(()=>[I(" Set preferred language ")]),_:1})]),_:1})])]),_:1}),l(h,{icon:"fullscreen",onClick:e[10]||(e[10]=o=>this.fsCB())}),l(h,{"no-caps":"",icon:"format_size",onClick:e[11]||(e[11]=o=>this.promptFontSize=!0)}),this.store.emailKey==="charlie_at_readingedge_dot_org"?(i(),V(h,{key:0,icon:"manage_accounts",onClick:e[12]||(e[12]=o=>this.populateDemo())})):d("",!0),l(h,{icon:"save",onClick:e[13]||(e[13]=o=>this.store.updateSnapshot("save-preferences",null))})])]),_:1})]),_:1})])],64)}var Me=T(ke,[["render",De]]);export{Oe as I,Me as P,ce as T};
