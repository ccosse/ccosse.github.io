import{Q as v}from"./QPage.2d894a03.js";import{u as f,s as b,a as h}from"./re-store.42326b73.js";import{Q as y}from"./QImg.ce696935.js";import{g as E,h as k,i as B,j as w,d as x,r as g,v as T,_,o as I,ag as Q,a as r,w as o,e as c,aj as d,af as s,Q as n,ah as $,c as F,f as D}from"./index.588cd0fd.js";import{Q as u}from"./QPageSticky.f643d4ea.js";import{Q as m}from"./QTooltip.ec1bfeaf.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";import"./selection.014ccf3e.js";import"./scroll.cfe22e3f.js";import"./use-portal.3e31175e.js";var S=E({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(t,{slots:e}){const l=k(()=>{const i=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(a=>t[a]===!0).map(a=>`q-btn-group--${a}`).join(" ");return`q-btn-group row no-wrap${i.length>0?" "+i:""}`+(t.spread===!0?" q-btn-group--spread":" inline")});return()=>B("div",{class:l.value},w(e.default))}});const R=x({name:"EditorComponent",setup(){return{reStore:f(),imgCap:g(""),imgSrc:g(""),imgFit:g(""),pageText:g("")}},mounted(){console.log("EditorComponent.mounted"),T(this.reStore.courses,async(e,l)=>{console.log("Editor.watch"),this.reStore.courses.ck,this.reStore.courses.aid,this.reStore.courses.pgIdx;const i=this.reStore.courses.imgIdx;try{this.imgFit=this.reStore.page.imgFit,this.pageText=this.reStore.page.pageText,this.imgSrc=this.reStore.page.imgs[i].url,this.imgCap=this.reStore.page.imgs[i].cap}catch(a){console.log("ERROR Editor watch ",a,i,this.reStore.page.imgs),this.imgSrc=this.reStore.page.imgs[0].url,this.imgCap=this.reStore.page.imgs[0].cap}},{immediate:!0,deep:!0}),this.reStore.courses.ck,this.reStore.courses.aid,this.reStore.courses.pgIdx;const t=this.reStore.courses.imgIdx;try{this.imgFit=this.reStore.page.imgFit,this.pageText=this.reStore.page.pageText,this.imgSrc=this.reStore.page.imgs[t].url,this.imgCap=this.reStore.page.imgs[t].cap}catch(e){console.log("ERROR Editor mounted",e)}},methods:{prevImg(){this.reStore.page.imgIdx=this.reStore.page.imgIdx-1<0?this.reStore.page.imgs.length-1:this.reStore.page.imgIdx-1,this.reStore.courses.imgIdx=this.reStore.page.imgIdx,this.reStore.setStatus("imgIdx",this.imgIdx),this.imgSrc=this.reStore.page.imgs[this.reStore.courses.imgIdx].url,this.imgCap=this.reStore.page.imgs[this.reStore.courses.imgIdx].cap},nextImg(){this.reStore.page.imgIdx=this.reStore.page.imgIdx+1>this.reStore.page.imgs.length-1?0:this.reStore.page.imgIdx+1,this.reStore.courses.imgIdx=this.reStore.page.imgIdx,this.reStore.setStatus("imgIdx",this.reStore.courses.imgIdx),this.imgSrc=this.reStore.page.imgs[this.reStore.courses.imgIdx].url,this.imgCap=this.reStore.page.imgs[this.reStore.courses.imgIdx].cap},toggleText(){b("#slideTextDiv").classed("hidden")?h("#slideTextDiv").classed("hidden",!1):h("#slideTextDiv").classed("hidden",!0)},cycleFitMode(){const t=["scale-down","cover"];let e=t.indexOf(this.imgFit);e+=1,e>t.length-1&&(e=0),this.reStore.page.imgFit=t[e],this.reStore.courses.trigger+=1},setCover(){const t=this.reStore.courses.ck,e=this.reStore.courses.aid;this.reStore.courses.pgIdx;const l=this.reStore.courses.imgIdx,i=this.reStore.page.imgs[l].url;this.reStore.courses[t].assignments[e].coverUrl=i,console.log("coverUrl ",i)}}}),j={id:"slideCaptionDiv",class:"absolute-top text-subtitle1 text-center q-my-xl",contentEditable:"true"},q={id:"slideTextDiv",class:"text-panel text-center absolute-center",contentEditable:"true"},O={id:"coverSlideDiv",class:"text-panel text-center absolute-center hidden",contentEditable:"true"},V=c("br",null,null,-1),P=c("br",null,null,-1);function N(t,e,l,i,a,C){return I(),Q($,null,[r(y,{class:"fixed-center",src:this.imgSrc,fit:this.imgFit,height:"100%"},{default:o(()=>[c("div",j,d(this.imgCap),1)]),_:1},8,["src","fit"]),c("div",q,d(this.pageText),1),c("div",O,[s(" COVER SLIDE DIV "),r(n,{icon:"play",onClick:e[0]||(e[0]=p=>this.reStore.startAssignment())},{default:o(()=>[s("Start")]),_:1})]),r(u,{position:"bottom",offset:[0,10]},{default:o(()=>[r(S,null,{default:o(()=>[r(n,{fab:"","label-position":"left",color:"primary",icon:"arrow_left",onClick:this.prevImg,padding:"sm"},null,8,["onClick"]),r(n,{color:"primary"},{default:o(()=>[s(d(this.reStore.courses.imgIdx+1)+"/"+d(this.reStore.page.imgs.length),1)]),_:1}),r(n,{fab:"","label-position":"right",color:"primary",icon:"arrow_right",onClick:this.nextImg,padding:"sm"},null,8,["onClick"])]),_:1})]),_:1}),r(u,{position:"bottom",offset:[0,60]},{default:o(()=>[r(S,null,{default:o(()=>[r(n,{fab:"","label-position":"right",color:"primary",icon:"fit_screen",onClick:this.cycleFitMode,padding:"sm"},{default:o(()=>[r(m,null,{default:o(()=>[s("Cycle through image-fit modes")]),_:1})]),_:1},8,["onClick"]),r(n,{fab:"","label-position":"right",color:"primary",icon:"article",onClick:this.toggleText,padding:"sm"},{default:o(()=>[r(m,null,{default:o(()=>[s("Show/Hide paragraph text in order to get"),V,s("better view of image.")]),_:1})]),_:1},8,["onClick"]),r(n,{fab:"","label-position":"right",color:"primary",icon:"title",onClick:this.setCover,padding:"sm"},{default:o(()=>[r(m,null,{default:o(()=>[s("Set current image as Cover Image for current assignment,"),P,s("if there is an assignment currently loaded.")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})],64)}var U=_(R,[["render",N]]);const A=x({name:"EditorPage",components:{EditorComponent:U},setup(t){const e=f();return{props:t,reStore:e}}});function G(t,e,l,i,a,C){const p=D("EditorComponent");return I(),F(v,{id:"QPage",class:"row justify-center"},{default:o(()=>[r(p)]),_:1})}var te=_(A,[["render",G]]);export{te as default};
