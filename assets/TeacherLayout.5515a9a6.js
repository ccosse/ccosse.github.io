import{g as N,h as r,i as s,z as H,aI as Ce,B as ee,r as f,D as L,l as xe,p as P,ag as Te,j as te,x,q as Ve,d as ae,_ as ne,o as S,au as R,a,w as o,Q as w,e as k,ac as A,ad as I,aH as Ie,c as C,av as F,aJ as $e,aG as U,aF as qe,f as $}from"./index.eedb1002.js";import{Q as oe,a as Qe,b as Le,c as q,d as Re,e as Q,f as J,g as ze,h as De}from"./QLayout.6d775f85.js";import{Q as le}from"./QTooltip.981921bd.js";import{u as se}from"./re-store.e3b27f70.js";import{a as z,Q as D,i as Be,C as W,h as Oe}from"./ClosePopup.a5987448.js";import{a as Pe,b as Ae,c as X,d as B,e as Ue,P as Ne}from"./QSlideTransition.4b5409fe.js";import{Q as He}from"./QInput.769f98be.js";import{d as E,f as j,c as Ee,e as je,u as Y,g as Ge}from"./use-dark.68ff8460.js";import"./selection.1cbaa385.js";import"./position-engine.a7092572.js";import"./use-portal.7a7239de.js";import"./firebase.8ff914f0.js";import"./use-key-composition.0ba037a2.js";const Ke={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},O={xs:2,sm:4,md:8,lg:16,xl:24};var Z=N({name:"QSeparator",props:{...E,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const t=H(),c=j(e,t.proxy.$q),d=r(()=>e.vertical===!0?"vertical":"horizontal"),m=r(()=>` q-separator--${d.value}`),u=r(()=>e.inset!==!1?`${m.value}-${Ke[e.inset]}`:""),l=r(()=>`q-separator${m.value}${u.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(c.value===!0?" q-separator--dark":"")),h=r(()=>{const g={};if(e.size!==void 0&&(g[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const y=e.spaced===!0?`${O.md}px`:e.spaced in O?`${O[e.spaced]}px`:e.spaced,i=e.vertical===!0?["Left","Right"]:["Top","Bottom"];g[`margin${i[0]}`]=g[`margin${i[1]}`]=y}return g});return()=>s("hr",{class:l.value,style:h.value,"aria-orientation":d.value})}});const b=Ce({}),Me=Object.keys(ee);var Fe=N({name:"QExpansionItem",props:{...ee,...Ee,...E,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...je,"click","afterShow","afterHide"],setup(e,{slots:t,emit:c}){const{proxy:{$q:d}}=H(),m=j(e,d),u=f(e.modelValue!==null?e.modelValue:e.defaultOpened),l=f(null),h=Y(),{show:g,hide:y,toggle:i}=Ge({showing:u});let p,_;const ie=r(()=>`q-expansion-item q-item-type q-expansion-item--${u.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),re=r(()=>{if(e.contentInsetLevel===void 0)return null;const n=d.lang.rtl===!0?"Right":"Left";return{["padding"+n]:e.contentInsetLevel*56+"px"}}),T=r(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),ue=r(()=>{const n={};return Me.forEach(v=>{n[v]=e[v]}),n}),de=r(()=>T.value===!0||e.expandIconToggle!==!0),ce=r(()=>e.expandedIcon!==void 0&&u.value===!0?e.expandedIcon:e.expandIcon||d.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),ge=r(()=>e.disable!==!0&&(T.value===!0||e.expandIconToggle===!0)),he=r(()=>({expanded:u.value===!0,detailsId:e.targetUid,toggle:i,show:g,hide:y})),G=r(()=>{const n=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:d.lang.label[u.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":u.value===!0?"true":"false","aria-controls":h,"aria-label":n}});L(()=>e.group,n=>{_!==void 0&&_(),n!==void 0&&M()});function me(n){T.value!==!0&&i(n),c("click",n)}function fe(n){n.keyCode===13&&K(n,!0)}function K(n,v){v!==!0&&l.value!==null&&l.value.focus(),i(n),Ve(n)}function ve(){c("afterShow")}function Se(){c("afterHide")}function M(){p===void 0&&(p=Y()),u.value===!0&&(b[e.group]=p);const n=L(u,V=>{V===!0?b[e.group]=p:b[e.group]===p&&delete b[e.group]}),v=L(()=>b[e.group],(V,_e)=>{_e===p&&V!==void 0&&V!==p&&y()});_=()=>{n(),v(),b[e.group]===p&&delete b[e.group],_=void 0}}function pe(){const n={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},v=[s(x,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&u.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:ce.value})];return ge.value===!0&&(Object.assign(n,{tabindex:0,...G.value,onClick:K,onKeyup:fe}),v.unshift(s("div",{ref:l,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),s(B,n,()=>v)}function be(){let n;return t.header!==void 0?n=[].concat(t.header(he.value)):(n=[s(B,()=>[s(X,{lines:e.labelLines},()=>e.label||""),e.caption?s(X,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&n[e.switchToggleSide===!0?"push":"unshift"](s(B,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>s(x,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&n[e.switchToggleSide===!0?"unshift":"push"](pe()),n}function we(){const n={ref:"item",style:e.headerStyle,class:e.headerClass,dark:m.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return de.value===!0&&(n.clickable=!0,n.onClick=me,Object.assign(n,T.value===!0?ue.value:G.value)),s(Ae,n,be)}function ke(){return P(s("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:re.value,id:h},te(t.default)),[[Te,u.value]])}function ye(){const n=[we(),s(Pe,{duration:e.duration,onShow:ve,onHide:Se},ke)];return e.expandSeparator===!0&&n.push(s(Z,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:m.value}),s(Z,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:m.value})),n}return e.group!==void 0&&M(),xe(()=>{_!==void 0&&_()}),()=>s("div",{class:ie.value},[s("div",{class:"q-expansion-item__container relative-position"},ye())])}}),Je=N({name:"QList",props:{...E,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:t}){const c=H(),d=j(e,c.proxy.$q),m=r(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(d.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>s(e.tag,{class:m.value},te(t.default))}});const We=ae({name:"SearchComponent",setup(){const e=se(),t=f("");return{reStore:e,searchTerms:t,searchSize:f(e.preferences.resLimit),searchResults:f([]),promptSearchSize:f(!1)}},mounted(){L(this.reStore.preferences,async(e,t)=>{console.log("watcher ",e,t),this.searchSize=e.resLimit})},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchTerms.splice(e,1)},load(e){console.log(e),console.log(this.searchResults[e]);const t=this.reStore.langVoices[this.reStore.preferences.langVoice];this.reStore.loadPageId(this.searchResults[e].pageid,t)},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoice];this.reStore.wiki.setLang(e.langName);const t=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:50});console.log("res.results.length: ",t.results.length),this.searchResults=t.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),Xe=k("div",{class:"text-h6"},"Search Results Size",-1),Ye={class:"q-gutter-y-sm column"},Ze={key:0},et={class:"row cardheader ptr justify-between"},tt=["onClick"],at={class:"history-remove"};function nt(e,t,c,d,m,u){return S(),R(F,null,[a(Oe,{modelValue:e.promptSearchSize,"onUpdate:modelValue":t[2]||(t[2]=l=>e.promptSearchSize=l),persistent:""},{default:o(()=>[a(z,{style:{"min-width":"350px"}},{default:o(()=>[a(D,{align:"center"},{default:o(()=>[Xe]),_:1}),a(D,{class:"q-pt-none",align:"center"},{default:o(()=>[a(Ue,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":t[0]||(t[0]=l=>e.searchSize=l)},null,8,["modelValue"])]),_:1}),a(Be,{align:"center",class:"text-primary"},{default:o(()=>[P(a(w,{flat:"",label:"Cancel"},null,512),[[W]]),P(a(w,{flat:"",label:"Update results size",onClick:t[1]||(t[1]=l=>this.updateSearchSize())},null,512),[[W]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(z,{flat:""},{default:o(()=>[a(D,null,{default:o(()=>[a(Je,{padding:"",bordered:"",class:"rounded-borders"},{default:o(()=>[a(Fe,{"header-style":{border:"0px solid gray"},label:"Search & Results"},{default:o(()=>[k("div",Ye,[a(oe,{class:"bg-primary text-white rounded-borders q-my-md"},{default:o(()=>[a(w,{dark:"",standout:"",onClick:t[3]||(t[3]=l=>e.promptSearchSize=!0)},{default:o(()=>[A(I(this.searchResults.length)+" ",1),a(le,null,{default:o(()=>[A("Change results limit ("+I(this.searchSize)+")",1)]),_:1})]),_:1}),a(He,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":t[6]||(t[6]=l=>e.searchTerms=l),"input-class":"text-right",class:"q-ml-md",onKeyup:[t[7]||(t[7]=l=>this.update()),t[8]||(t[8]=Ie(l=>this.doSearch(),["enter"]))]},{append:o(()=>[e.searchTerms===""?(S(),C(x,{key:0,name:"search",onClick:t[4]||(t[4]=l=>this.doSearch())})):(S(),C(x,{key:1,name:"clear",class:"cursor-pointer",onClick:t[5]||(t[5]=l=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(S(),R("div",Ze,[(S(!0),R(F,null,$e(this.searchResults,(l,h)=>(S(),C(z,{class:"cardcontainer",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":t[9]||(t[9]=g=>this.searchResults=g),key:h},{default:o(()=>[k("div",et,[k("span",{class:"history-title col-grow",onClick:g=>this.load(h)},I(h)+". "+I(l.title.slice(0,25)),9,tt),k("span",at,[a(x,{class:"primary",size:e.xl,color:e.primary,name:"close",onClick:g=>this.remove(h)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):U("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var ot=ne(We,[["render",nt]]);const lt=ae({name:"GuestLayout",components:{SearchComponent:ot,PreferencesComponent:Ne},setup(){const e=f(!1),t=f(!1),c=se(),d=c.preferences;return{step:f(1),reStore:c,initialValues:f(d),leftDrawerOpen:e,rightDrawerOpen:t,toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){t.value=!t.value}}}}),st=k("img",{src:"https://readingedgeca.s3.us-west-1.amazonaws.com/static/pub/img/reading_edge_200x200.png"},null,-1),it={class:"dashboard-wrapper"};function rt(e,t,c,d,m,u){const l=$("router-link"),h=$("SearchComponent"),g=$("PreferencesComponent"),y=$("router-view");return S(),C(De,{view:"hHh lpR fFf"},{default:o(()=>[a(Re,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:o(()=>[a(oe,null,{default:o(()=>[a(w,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),a(Qe,null,{default:o(()=>[a(l,{to:"/"},{default:o(()=>[a(qe,{size:"25px"},{default:o(()=>[st]),_:1})]),_:1})]),_:1}),this.reStore.authenticated?(S(),C(w,{key:0,onClick:t[0]||(t[0]=i=>this.reStore.router.push("/student")),icon:"switch_account"},{default:o(()=>[a(le,null,{default:o(()=>[A(" Switch between Teacher or Student role ")]),_:1})]),_:1})):U("",!0),this.reStore.authenticated?(S(),C(w,{key:1,icon:"logout",onClick:t[1]||(t[1]=i=>this.reStore.logout())})):U("",!0),a(w,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1}),a(Le,{align:"left",class:"hidden"},{default:o(()=>[a(q,{to:"/logo",label:"Logo"}),a(q,{to:"/teaching",label:"Teaching"}),a(q,{to:"/taking",label:"Taking"}),a(q,{to:"/gradebook",label:"Gradebook"})]),_:1})]),_:1}),a(Q,{"show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":t[2]||(t[2]=i=>e.leftDrawerOpen=i),side:"left",bordered:""},null,8,["modelValue"]),a(Q,{"show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":t[3]||(t[3]=i=>e.rightDrawerOpen=i),side:"right",bordered:""},null,8,["modelValue"]),a(ze,{class:"container-fluid"},{default:o(()=>[a(Q,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":t[4]||(t[4]=i=>e.leftDrawerOpen=i),side:"left"},{default:o(()=>[a(J,{visible:e.visible,style:{height:"95vh","max-width":"350px"}},{default:o(()=>[a(h)]),_:1},8,["visible"])]),_:1},8,["modelValue"]),a(Q,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":t[5]||(t[5]=i=>e.rightDrawerOpen=i),side:"right"},{default:o(()=>[a(J,{visible:e.visible,style:{height:"95vh","max-width":"350px"}},{default:o(()=>[a(g,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"]),k("div",it,[a(y)])]),_:1})]),_:1})}var yt=ne(lt,[["render",rt]]);export{yt as default};
