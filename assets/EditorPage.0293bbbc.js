import{Q as b}from"./QPage.c42c9f8e.js";import{u as C,s as S}from"./re-store.944dee6d.js";import{Q as y}from"./QImg.092836e9.js";import{g as k,h as w,i as E,j as B,d as v,r as d,v as T,_ as I,o as p,ah as f,a as t,w as r,e as i,ak as l,ag as o,Q as n,al as Q,ai as $,c as F,f as q}from"./index.d7e4ee9f.js";import{Q as x}from"./QPageSticky.b96728c2.js";import{Q as h}from"./QTooltip.efa7b439.js";import{s as P}from"./transform.aea72fbe.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";import"./selection.31c6355e.js";import"./scroll.5b05e6a9.js";import"./use-portal.33efaaef.js";var _=k({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(s,{slots:e}){const c=w(()=>{const g=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(a=>s[a]===!0).map(a=>`q-btn-group--${a}`).join(" ");return`q-btn-group row no-wrap${g.length>0?" "+g:""}`+(s.spread===!0?" q-btn-group--spread":" inline")});return()=>E("div",{class:c.value},B(e.default))}});const R=v({name:"EditorComponent",props:{},setup(s){const e=C();return{props:s,reStore:e,imgCap:d(""),imgSrc:d(""),imgFit:d(""),pageText:d("")}},mounted(){console.log("EditorComponent.mounted"),T(this.reStore.courses,async(c,g)=>{console.log("Editor.watch"),this.reStore.courses.ck,this.reStore.courses.aid,this.reStore.courses.pgIdx;const a=this.reStore.courses.imgIdx;try{this.imgFit=this.reStore.page.imgFit,this.pageText=this.reStore.page.pageText,this.reStore.page.imgs.length&&(this.imgSrc=this.reStore.page.imgs[a].url,this.imgCap=this.reStore.page.imgs[a].cap)}catch(m){console.log("ERROR Editor watch ",m,a,this.reStore.page.imgs),this.imgSrc=this.reStore.page.imgs[0].url,this.imgCap=this.reStore.page.imgs[0].cap}},{immediate:!0,deep:!0});const s=this.reStore.courses.ck;this.reStore.courses.aid,this.reStore.courses.pgIdx;const e=this.reStore.courses.imgIdx;try{this.imgFit=this.reStore.page.imgFit,this.pageText=this.reStore.page.pageText,this.imgSrc=this.reStore.page.imgs[e].url,this.imgCap=this.reStore.page.imgs[e].cap}catch(c){console.log("ERROR Editor mounted",c)}s&&this.reStore.loadCover()},methods:{prevImg(){this.reStore.page.imgIdx=this.reStore.page.imgIdx-1<0?this.reStore.page.imgs.length-1:this.reStore.page.imgIdx-1,this.reStore.courses.imgIdx=this.reStore.page.imgIdx,this.reStore.setStatus("imgIdx",this.imgIdx),this.imgSrc=this.reStore.page.imgs[this.reStore.courses.imgIdx].url,this.imgCap=this.reStore.page.imgs[this.reStore.courses.imgIdx].cap},nextImg(){this.reStore.page.imgIdx=this.reStore.page.imgIdx+1>this.reStore.page.imgs.length-1?0:this.reStore.page.imgIdx+1,this.reStore.courses.imgIdx=this.reStore.page.imgIdx,this.reStore.setStatus("imgIdx",this.reStore.courses.imgIdx),this.imgSrc=this.reStore.page.imgs[this.reStore.courses.imgIdx].url,this.imgCap=this.reStore.page.imgs[this.reStore.courses.imgIdx].cap},toggleText(){P("#slideTextDiv").classed("hidden")?S("#slideTextDiv").classed("hidden",!1):S("#slideTextDiv").classed("hidden",!0)},cycleFitMode(){const s=["scale-down","cover"];let e=s.indexOf(this.imgFit);e+=1,e>s.length-1&&(e=0),this.reStore.page.imgFit=s[e],this.reStore.courses.trigger+=1},setCover(){this.reStore.courses.ck,this.reStore.courses.aid,this.reStore.courses.pgIdx;const s=this.reStore.courses.imgIdx,e=this.reStore.page.imgs[s].url;this.reStore.setCover(this.reStore.page.imgs[s]),console.log("coverUrl ",e)}}}),D={id:"slideCaptionDiv",class:"absolute-top text-subtitle1 text-center q-my-xl assignment",contentEditable:"true"},j={id:"slideTextDiv",class:"text-panel text-center absolute-center assignment",contentEditable:"true"},O={key:0},V={id:"coverSlideDiv",class:"flex flex-center cover-panel absolute-center coverslide",contentEditable:"false"},N={class:"q-ma-md"},z=i("br",null,null,-1),A=i("br",null,null,-1),G={class:"q-ma-md"},M=i("br",null,null,-1),U=i("br",null,null,-1),H=i("br",null,null,-1),J=i("br",null,null,-1);function K(s,e,c,g,a,m){return p(),f($,null,[t(y,{class:"fixed-center",src:this.imgSrc,fit:this.imgFit,height:"100%"},{default:r(()=>[i("div",D,l(this.imgCap),1)]),_:1},8,["src","fit"]),i("div",j,l(this.pageText),1),this.reStore.courses.aid?(p(),f("span",O,[i("div",V,[i("div",N,[t(n,{style:{width:"200px",height:"200px","font-size":"12pt"},color:"primary"},{default:r(()=>[o(l(this.reStore.courses[this.reStore.courses.ck].assignments[this.reStore.courses.aid].title)+" ",1),z,o(" "+l(this.reStore.courses[this.reStore.courses.ck].assignments[this.reStore.courses.aid].pages.length)+" Pages ",1),A,o(" "+l(this.reStore.courses[this.reStore.courses.ck].assignments[this.reStore.courses.aid].goal)+" Points ",1)]),_:1})]),i("div",G,[t(n,{style:{width:"200px",height:"200px","font-size":"24pt"},stack:"",size:"xl","icon-right":"play_circle","text-color":"white",color:"primary",onClick:e[0]||(e[0]=u=>this.reStore.startAssignment())},{default:r(()=>[o("Start")]),_:1})])])])):Q("",!0),t(x,{position:"bottom",offset:[0,10],class:"assignment"},{default:r(()=>[t(_,null,{default:r(()=>[t(n,{fab:"","label-position":"left",color:"primary",icon:"arrow_left",onClick:this.prevImg,padding:"sm"},null,8,["onClick"]),t(n,{color:"primary"},{default:r(()=>[o(l(this.reStore.courses.imgIdx+1)+"/"+l(this.reStore.page.imgs.length),1)]),_:1}),t(n,{fab:"","label-position":"right",color:"primary",icon:"arrow_right",onClick:this.nextImg,padding:"sm"},null,8,["onClick"])]),_:1})]),_:1}),t(x,{position:"bottom",offset:[0,60],class:"assignment"},{default:r(()=>[t(_,null,{default:r(()=>[t(n,{fab:"","label-position":"right",color:"primary",icon:"fit_screen",onClick:this.cycleFitMode,padding:"sm"},{default:r(()=>[t(h,null,{default:r(()=>[o("Cycle through image-fit modes")]),_:1})]),_:1},8,["onClick"]),t(n,{fab:"","label-position":"right",color:"primary",icon:"article",onClick:this.toggleText,padding:"sm"},{default:r(()=>[t(h,null,{default:r(()=>[o("Show/Hide paragraph text in order to get"),M,o("better view of image.")]),_:1})]),_:1},8,["onClick"]),t(n,{fab:"","label-position":"right",color:"primary",icon:"title",onClick:this.setCover,padding:"sm"},{default:r(()=>[t(h,null,{default:r(()=>[o("Set current image as Cover Image for current assignment,"),U,o("if there is an assignment currently loaded.")]),_:1})]),_:1},8,["onClick"]),t(n,{fab:"","label-position":"right",color:"primary",icon:"arrow_right",onClick:this.reStore.reloadPage,padding:"xs"},{default:r(()=>[t(h,null,{default:r(()=>[o(" Reload page content. If Custom then no changes."),H,o(" If pageid, then only saved imgIdx applies."),J,o(" Else, reloads random with guid-words, if any. ")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})],64)}var L=I(R,[["render",K]]);const W=v({name:"EditorPage",components:{EditorComponent:L},setup(s){const e=C();return{props:s,reStore:e}}});function X(s,e,c,g,a,m){const u=q("EditorComponent");return p(),F(b,{id:"QPage",class:"row justify-center"},{default:r(()=>[t(u)]),_:1})}var ge=I(W,[["render",X]]);export{ge as default};
