import{a3 as Plugin,a4 as isDate,a5 as defaultLang,r as ref,a6 as defineStore,a7 as useRouter}from"./index.f854b5d6.js";import{s as set$3,r as ref$1,d as dbRT,a as auth,g as getDatabase,b as get$2,c as child,e as remove$1,u as update}from"./firebase.0eb8f378.js";import{a as axios}from"./index.2cf0d985.js";function _mergeNamespaces(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}function between(e,t,n){return n<=t?t:Math.min(n,Math.max(t,e))}function normalizeToInterval(e,t,n){if(n<=t)return t;const r=n-t+1;let i=t+(e-t)%r;return i<t&&(i=r+i),i===0?0:i}function pad$2(e,t=2,n="0"){if(e==null)return e;const r=""+e;return r.length>=t?r:new Array(t-r.length+1).join(n)+r}var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dist$1={exports:{}},request={},browser={exports:{}};(function(e,t){var n=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof r!="undefined")return r;throw new Error("unable to locate global object")},r=n();e.exports=t=r.fetch,r.fetch&&(t.default=r.fetch.bind(r)),t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response})(browser,browser.exports);var errors={};Object.defineProperty(errors,"__esModule",{value:!0});errors.citationError=errors.pdfError=errors.fcError=errors.eventsError=errors.mediaError=errors.relatedError=errors.introError=errors.preloadError=errors.infoboxError=errors.coordinatesError=errors.geoSearchError=errors.linksError=errors.categoriesError=errors.contentError=errors.htmlError=errors.imageError=errors.summaryError=errors.pageError=errors.autocompletionsError=errors.searchError=errors.wikiError=void 0;class wikiError extends Error{constructor(t,n){super(t),this.name="wikiError",this.code=n}}errors.wikiError=wikiError;class searchError extends wikiError{constructor(t){super(t),this.name="searchError"}}errors.searchError=searchError;class autocompletionsError extends wikiError{constructor(t){super(t),this.name="autocompletionsError"}}errors.autocompletionsError=autocompletionsError;class pageError extends wikiError{constructor(t){super(t),this.name="pageError"}}errors.pageError=pageError;class summaryError extends wikiError{constructor(t){super(t),this.name="summaryError"}}errors.summaryError=summaryError;class imageError extends wikiError{constructor(t){super(t),this.name="imageError"}}errors.imageError=imageError;class htmlError extends wikiError{constructor(t){super(t),this.name="htmlError"}}errors.htmlError=htmlError;class contentError extends wikiError{constructor(t){super(t),this.name="contentError"}}errors.contentError=contentError;class categoriesError extends wikiError{constructor(t){super(t),this.name="categoriesError"}}errors.categoriesError=categoriesError;class linksError extends wikiError{constructor(t){super(t),this.name="linksError"}}errors.linksError=linksError;class geoSearchError extends wikiError{constructor(t){super(t),this.name="geoSearchError"}}errors.geoSearchError=geoSearchError;class coordinatesError extends wikiError{constructor(t){super(t),this.name="coordinatesError"}}errors.coordinatesError=coordinatesError;class infoboxError extends wikiError{constructor(t){super(t),this.name="infoboxError"}}errors.infoboxError=infoboxError;class preloadError extends wikiError{constructor(t){super(t),this.name="preloadError"}}errors.preloadError=preloadError;class introError extends wikiError{constructor(t){super(t),this.name="introError"}}errors.introError=introError;class relatedError extends wikiError{constructor(t){super(t),this.name="relatedError"}}errors.relatedError=relatedError;class mediaError extends wikiError{constructor(t){super(t),this.name="mediaError"}}errors.mediaError=mediaError;class eventsError extends wikiError{constructor(t){super(t),this.name="eventsError"}}errors.eventsError=eventsError;class fcError extends wikiError{constructor(t){super(t),this.name="featuredContentError"}}errors.fcError=fcError;class pdfError extends wikiError{constructor(t){super(t),this.name="pdfError"}}errors.pdfError=pdfError;class citationError extends wikiError{constructor(t){super(t),this.name="citationError"}}errors.citationError=citationError;Object.defineProperty(request,"__esModule",{value:!0});request.setAPIUrl=request.returnRestUrl=request.makeRestRequest=void 0;const node_fetch_1=browser.exports,errors_1$1=errors;let API_URL="https://en.wikipedia.org/w/api.php?",REST_API_URL="https://en.wikipedia.org/api/rest_v1/";const USER_AGENT="wikipedia (https://github.com/dopecodez/Wikipedia/)";async function makeRequest(e,t=!0){try{const n={...e};n.format="json",t&&(n.redirects=""),e.action||(n.action="query"),n.origin="*";const r={headers:{"Api-User-Agent":USER_AGENT}};let i="";return Object.keys(n).forEach(f=>{i+=`${f}=${n[f]}&`}),await(await(0,node_fetch_1.default)(encodeURI(API_URL+i),r)).json()}catch(n){throw new errors_1$1.wikiError(n)}}async function makeRestRequest(e,t=!0){try{t||(e+="?redirect=false");const n={headers:{"Api-User-Agent":USER_AGENT}};let i=await(await(0,node_fetch_1.default)(encodeURI(REST_API_URL+e),n)).text();try{i=JSON.parse(i)}finally{return i}}catch(n){throw new errors_1$1.wikiError(n)}}request.makeRestRequest=makeRestRequest;function returnRestUrl(e){return encodeURI(REST_API_URL+e)}request.returnRestUrl=returnRestUrl;function setAPIUrl(e){return API_URL="https://"+e.toLowerCase()+".wikipedia.org/w/api.php?",REST_API_URL="https://"+e.toLowerCase()+".wikipedia.org/api/rest_v1/",API_URL}request.setAPIUrl=setAPIUrl;request.default=makeRequest;var page={},utils$1={},messages={};Object.defineProperty(messages,"__esModule",{value:!0});messages.MSGS=void 0;messages.MSGS={PAGE_NOT_SUGGEST:"No page with given title suggested : ",PAGE_NOT_EXIST:"No page with given title exists : ",INFOBOX_NOT_EXIST:"Info cannot be parsed for given page"};Object.defineProperty(utils$1,"__esModule",{value:!0});utils$1.getCurrentDay=utils$1.getCurrentMonth=utils$1.getCurrentYear=utils$1.setPageId=utils$1.setPageIdOrTitleParam=utils$1.setTitleForPage=utils$1.isString=void 0;const _1=dist$1.exports,errors_1=errors,messages_1=messages;function isString$1(e){return isNaN(e)}utils$1.isString=isString$1;async function setTitleForPage(e){{const t=await _1.default.search(e,{limit:1,suggestion:!0});if(!t.suggestion&&t.results.length==0)throw new errors_1.pageError(`${messages_1.MSGS.PAGE_NOT_SUGGEST}${e}`);return e=t.suggestion||e,e}}utils$1.setTitleForPage=setTitleForPage;function setPageIdOrTitleParam(e,t){return isString$1(t)?e.titles=t:e.pageids=t,e}utils$1.setPageIdOrTitleParam=setPageIdOrTitleParam;function setPageId(e,t){let n;return e.pageIds?n=e.pageIds:n=Object.keys(t.query.pages)[0],n}utils$1.setPageId=setPageId;function getCurrentYear(){return new Date().getFullYear()}utils$1.getCurrentYear=getCurrentYear;function getCurrentMonth(){return new Date().getMonth()+1}utils$1.getCurrentMonth=getCurrentMonth;function getCurrentDay(){return new Date().getDate()}utils$1.getCurrentDay=getCurrentDay;function preserveCamelCase(e){let t=!1,n=!1,r=!1;for(let i=0;i<e.length;i++){const o=e[i];t&&/[a-zA-Z]/.test(o)&&o.toUpperCase()===o?(e=e.substr(0,i)+"-"+e.substr(i),t=!1,r=n,n=!0,i++):n&&r&&/[a-zA-Z]/.test(o)&&o.toLowerCase()===o?(e=e.substr(0,i-1)+"-"+e.substr(i-1),r=n,n=!1,t=!0):(t=o.toLowerCase()===o,r=n,n=o.toUpperCase()===o)}return e}var camelcase=function(e){return arguments.length>1?e=Array.from(arguments).map(n=>n.trim()).filter(n=>n.length).join("-"):e=e.trim(),e.length===0?"":e.length===1?e.toLowerCase():/^[a-z0-9]+$/.test(e)?e:(e!==e.toLowerCase()&&(e=preserveCamelCase(e)),e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(n,r)=>r.toUpperCase()))};function _interopDefault(e){return e&&typeof e=="object"&&"default"in e?e.default:e}function trimWrappers(e){return e.replace(/\[\[/g,"").replace(/\]\]/g,"").replace(/\{\{/g,"").replace(/\}\}/g,"").trim()}function trimOr(e){var t=e.indexOf("|");return t!==-1?e.substring(0,t):e}function getValue(e,t){if(!e)return null;var n=e.trim().replace(/File:/,"").replace(/\{\{\d+\}\}/g,"").replace(extraPropertyPattern,"").replace(endingPattern,"");if(n==="y"||n==="yes")return!0;if(t=="birthPlace")return e.trim();var r=n.match(linksPattern);return r?r[0].split(linkSeparatorPattern).filter(function(i){return i}):trimOr(trimWrappers(n))}function dataType(e){var t=e.globalPattern,n=e.parsePattern,r=e.parse,i=e.variable,o=e.name;return function(l){var f=l.match(t);if(!f){var h;return h={},defineProperty(h,o,[]),defineProperty(h,"sourceAfter",l),h}var d=f.map(function(p){return r(p.match(n))}),g=f.reduce(function(p,b,$){return d[$]===DO_NOT_REPLACE?p:p.replace(b,"$"+i+"_"+$)},l);return{data:defineProperty({},o,d),sourceAfter:g}}}function byDataHandler(e,t){var n=e.source,r=e.context,i=t(n),o=i.data,l=i.sourceAfter;return{context:Object.assign({},r,o),source:l}}function extractData(e){return dataTypes$1.map(function(t){return t.handler}).reduce(byDataHandler,{context:{},source:e})}function findPropertyList(e){var t=e.match(keyValueGlobalPattern);return t?t.map(function(n){var r=keyValuePattern.exec(n);if(!r)return null;var i=slicedToArray(r,3),o=i[1],l=i[2],f=camelCase(o.trim());return{key:f,value:getValue(l,f)}}).filter(function(n){return n}):[]}function fillVariable(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.simplifyDataValues;if(typeof e!="string")return console.log("Warning: Something went wrong. Could not fill variables in: ("+(e===void 0?"undefined":_typeof(e))+") "+JSON.stringify(e)),{};var i=dataTypes$1.find(function(g){return e.match(g.pattern)});if(i){var o=i.pattern.exec(e),l=slicedToArray(o,2),f=l[0],h=l[1],d=t[i.name][parseInt(h,10)];return r||typeof d!="string"?d:e.replace(f,d)}return e}function fillVariables(e,t,n){if(e===void 0||e instanceof Date||typeof e=="number")return e;if(Array.isArray(e))return e.map(function(i){return fillVariables(i,t,n)});if((e===void 0?"undefined":_typeof(e))==="object")return Object.keys(e).reduce(function(i,o){return Object.assign(i,defineProperty({},o,fillVariables(e[o],t,n)))},{});var r=fillVariable(e,t,n);return r===e?e:fillVariables(r,t,n)}function handleSmallData(e,t,n){var r=n.simplifyDataValues;if(typeof e=="string"&&e.match(smallDataType.pattern)){var i=e.replace(smallDataType.pattern,"").replace(/,/,"").trim(),o=smallDataType.pattern.exec(e),l=slicedToArray(o,2),f=l[1],h=t[smallDataType.name][parseInt(f,10)],d={primary:getVariableValue(i,t,{simplifyDataValues:r}),secondary:getVariableValue(h,t,{simplifyDataValues:r})};return r?d.primary:d}return null}function getVariableValue(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.simplifyDataValues,i=handleSmallData(e,t,{simplifyDataValues:r});return i||fillVariables(e,t,{simplifyDataValues:r})}function reduceVariable(e,t,n,r){if(t===null)return null;if(typeof t=="boolean")return t;if(Array.isArray(t))return t.map(function(f){return getVariableValue(f,n,r)});if(e.match(/areaTotal/)||e.match(/population/)){var i=numberParse(t);if(i===!1&&(i=parseFloat(t,10)),!isNaN(i))return i}if(e.match(/date/i)){var o=+new Date(t);if(!isNaN(o))return new Date(t)}var l=getVariableValue(t,n,r);return Array.isArray(l)?l.map(function(f){return getVariableValue(f,n,r)}):l}function byVariableReduction(e,t){return function(n,r){var i=r.key,o=r.value,l=reduceVariable(i,o,e,t);return l===""||l===null?n:Object.assign({},n,defineProperty({},i,l))}}function extractProperties(e){var t=e.source,n=e.context,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.simplifyDataValues,o=i===void 0||i;return findPropertyList(t).reduce(byVariableReduction(n,{simplifyDataValues:o}),{})}function transformProperties(e){return Object.keys(e).reduce(function(t,n){var r=e[n],i=n.match(blankNamePattern);if(i){var o=i[1]||"",l=e["blank"+o+"NameSec2"],f=e["blank"+o+"InfoSec2"];return typeof l!="string"?t:Object.assign(t,defineProperty({},camelCase(l),f))}return n.match(blankInfoPattern)?t:Object.assign(t,defineProperty({},n,r))},{})}function findOuterIndex(e){for(var t=[],n=0;n<e.length-1;n++){var r=e.substr(n,2);if(r!=="{{"){if(r==="}}"){if(t.pop(),t.length===0)return n+2;n++}}else t.push(n),n++}}function parse(e){var t=e.match(infoBoxStartPattern);if(!t)return{data:e,sourceLeft:null};var n=t.index,r=e.substring(n),i=findOuterIndex(r);if(!i)return{data:e,sourceLeft:null};var o=r.substring(0,i),l=e.substring(i);return{data:o,sourceLeft:l.match(infoBoxStartPattern)?l:null}}function extractInfoboxes(e){for(var t=parse(e),n=[t.data];t.sourceLeft;)t=parse(t.sourceLeft),n.push(t.data);return n}function cleanSource(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.removeSmall,r=n!==void 0&&n,i=t.removeReferences;return(i===void 0||i)&&(e=e.replace(/<ref(\s\w+=[^>]+)?>.*<\/ref>/g,"").replace(/<ref(\s\w+=[^>]+)?\s?\/>/g,"")),r&&(e=e.replace(/<small>.*<\/small>/g,"")),e.replace(/'''?/g,"").replace(/\|display=inline/g,"").replace(/<br\s?\/?>/g,",").replace(/&minus;/g,"-").replace(/<sup>/g,"^").replace(/\{\{sfn\|([^\}\}]+)\}\}/g,"").replace(/\{\{efn\|([^\}\}]+)\}\}/g,"").replace(/−/g,"-").replace(/<\/sup>/g,"").replace(/\{\{\s*nowrap\s*\|([^\n\}]+)\}\}/gi,"$1").replace(/<!--([\s\S]*?)-->/g,"").replace(/&nbsp;/g," ").replace("|''See list''","")}function transformRowSpan(e){return e.map(transformCells).reduce(function(t,n,r){for(var i=r===0?0:1,o=0;o<n.length;o++)t[o+i]||(t[o+i]={}),n[o]&&(t[o+i][n[o]]=1);return t},[]).map(function(t){return Object.keys(t).join(",")}).join(" || ")}function clean(e){return e.substring(2,e.length-2).replace(linkPattern$1,function(t,n){return n.split("|")[0]}).replace(/'''?/g,"")}function parseRow(e){var t=e[0].match(/BS(\d)/),n=e[0].substring(2),r=1,i=[],o=1;for(t&&(r=t[1],n=e[0].substring(3));o<=r;o++)i.push(e[o]);return{type:n,margin:e[o++],text1:e[o++],text2:e[o++],comment:e[o++],icons:i}}function getMatches(e,t){for(var n=void 0,r=[];(n=t.exec(e))!==null;)r.push({value:n[1]&&n[1].trim(),start:n.index,end:n.index+n[0].length});return r}function parseTableData(e){var t=e.match(rowPattern$1);return t?t.map(function(n){var r=n.match(rowPatternSingle);return slicedToArray(r,2)[1].trim().split("|").slice(1)}):[]}function getTables(e){var t=getMatches(e,tableStartPattern$1),n=getMatches(e,tableEndPattern$1);return t.map(function(r,i){var o=n[i];if(!o)throw new Error("[Table Parsing] Failed to pair table");return{rows:parseTableData(e.substring(r.end,o.start).trim().replace(/'''/g,"")),start:r.start,end:o.end}})}function last(e){return e.length?e[e.length-1]:void 0}function parseInfobox(e,t){var n=extractInfoboxes(e).map(function(i){return transformProperties(extractProperties(extractData(cleanSource(i,t)),t))});if(!n.length)return{};var r={general:n.shift()};return n.forEach(function(i){var o=i.type;o?r[camelCase(o)]=i:Object.assign(r,{general:Object.assign({},r.general,i)})}),r.tables=parseTables(e),r.bsTables=parseBsTables(e),r.lists=parseLists(e),r}var camelCase=_interopDefault(camelcase),_typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},defineProperty=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},slicedToArray=function(){function e(t,n){var r=[],i=!0,o=!1,l=void 0;try{for(var f,h=t[Symbol.iterator]();!(i=(f=h.next()).done)&&(r.push(f.value),!n||r.length!==n);i=!0);}catch(d){o=!0,l=d}finally{try{!i&&h.return&&h.return()}finally{if(o)throw l}}return r}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},smallGlobalPattern=/\{\{small\|([^\}\}]+)\}\}/g,smallPattern=/small\|([^\}\}]+)\}\}/,small={globalPattern:smallGlobalPattern,parsePattern:smallPattern,parse:function(e){return slicedToArray(e,2)[1]},variable:"SMALL",name:"smalls"},flagGlobalPattern=/\{\{flag\|([^\}\}]+)\}\}/g,flagPattern=/flag\|([^\}\}]+)\}\}/,flag={globalPattern:flagGlobalPattern,parsePattern:flagPattern,parse:function(e){return slicedToArray(e,2)[1]},variable:"FLAG",name:"flags"},coordsGlobalPattern=/\{\{coord\|([^\}\}]+)\}\}/g,coordsPattern=/coord\|([^\}\}]+)\}\}/,coords={globalPattern:coordsGlobalPattern,parsePattern:coordsPattern,parse:function(e){return slicedToArray(e,2)[1]},variable:"COORD",name:"coords"},globalPattern=/\[\[([^\]\|]+)\|?([^\]]+)?\]\]/g,pattern=/\[\[([^\]\|]+)\|?([^\]]+)?\]\]/,instances={globalPattern,parsePattern:pattern,parse:function(e){var t=slicedToArray(e,3),n=t[1],r=t[2];return n||r},variable:"INSTANCE",name:"instances"},extraPropertyPattern=/\n?\s?\|\s?\w+$/,endingPattern=/\n\}\}$/,linksPattern=/((\$\w+_\d+)\s*,?\s*){2,}/g,linkSeparatorPattern=/[,\s?]/g,listItemPrefixPattern=/^\|\s?/,unbulletedListGlobalPattern=/\{\{(?:unbulleted list|ubl|ubt|ublist|unbullet)\s?\|([^\}\}]+)\}\}/gi,unbulletedListItemPattern=/\|\s*([^|}]+)/g,unbulletedLists={globalPattern:unbulletedListGlobalPattern,parsePattern:unbulletedListItemPattern,parse:function(e){return e?e.map(function(t){return t.replace(listItemPrefixPattern,"").trim()}).filter(function(t){return t&&t.length}):[]},variable:"UNBULLETED_LIST",name:"unbulletedLists"},listItemPrefixPattern$1=/^\*\s*/,plainListGlobalPattern=/\n(\*\s*[^*|]+)+/g,plainListItemPattern=/\*\s*([^*|]+)/g,unmarkedLists={globalPattern:plainListGlobalPattern,parsePattern:plainListItemPattern,parse:function(e){return e?e.map(function(t){return t.replace(listItemPrefixPattern$1,"").trim()}).filter(function(t){return t&&t.length}):[]},variable:"UNMARKED_LIST",name:"unmarkedLists"},listItemPrefixPattern$2=/^\*\s?/,plainListGlobalPattern$1=/\{\{f?p?P?l?a?i?n?t?\s?list\s?\|([^\}\}]+)\}\}/g,plainListItemPattern$1=/\*\s*([^*}]+)/g,plainLists={globalPattern:plainListGlobalPattern$1,parsePattern:plainListItemPattern$1,parse:function(e){return e?e.map(function(t){return t.replace(listItemPrefixPattern$2,"").trim()}).filter(function(t){return t&&t.length}):[]},variable:"PLAIN_LIST",name:"plainLists"},marriageGlobalPattern=/\{\{Marriage\|([^\}\}]+)\}\}/gi,marriagePattern=/Marriage\|([^|]+)\|(.*)\}\}/i,marriages={globalPattern:marriageGlobalPattern,parsePattern:marriagePattern,parse:function(e){var t=slicedToArray(e,3);return{who:t[1],married:t[2]}},variable:"MARRIAGE",name:"marriages"},nbayGlobalPattern=/\{\{nbay\|([^\}\}]+)\}\}/gi,nbayPattern=/nbay\|([^|]+)\|(.*)\}\}/i,nbay={globalPattern:nbayGlobalPattern,parsePattern:nbayPattern,parse:function(e){var t=slicedToArray(e,3),n=t[1];return t[2],n},variable:"nbay",name:"nbay"},otherGlobalPattern=/\{\{([^|\n]+)\|([^|\n]+)\|?([^\}\n]+)?\}\}/g,otherPattern=/\{\{([^|\n]+)\|([^|\n]+)\|?([^\}\n]+)?\}\}/,other={globalPattern:otherGlobalPattern,parsePattern:otherPattern,parse:function(e){var t=slicedToArray(e,4),n=t[1];return t[2],t[3],n},variable:"OTHER",name:"others"},hlistGlobalPattern=/\{\{hlist\|([^\}\}]+)\}\}/gi,hlistPattern=/hlist\|(.*)\n?\}\}/i,hlist={globalPattern:hlistGlobalPattern,parsePattern:hlistPattern,parse:function(e){return slicedToArray(e,2)[1].split("|")},variable:"HLIST",name:"hlists"},birthDateGlobalPattern=/\{\{birth\sdate([^\}\}]+)\}\}/gi,birthDatePattern=/(\d+)\|(\d+)\|(\d+)/,millisInYear=31536e6,birthDates={globalPattern:birthDateGlobalPattern,parsePattern:birthDatePattern,parse:function(e){var t=slicedToArray(e,4),n=t[1],r=t[2],i=t[3],o=new Date(n,r-1,i);return{date:o,age:Math.floor((Date.now()-+o)/millisInYear)}},variable:"BIRTH_DATE",name:"birthDates"},DO_NOT_REPLACE=Symbol("DO NOT REPLACE"),labeledDateGlobalPattern=/\{\{([^\n\}\}]+)\}\}/g,labeledDatePattern=/(.*)/,labeledDates={globalPattern:labeledDateGlobalPattern,parsePattern:labeledDatePattern,parse:function(e){var t=e[0].indexOf("|");if(t>-1){var n=e[0].substring(t+1).slice(0,-2),r=new Date(n+" GMT");if(!isNaN(r.getTime()))return{date:r};if(r=new Date(n.split("|").join("-")+" GMT"),!isNaN(r.getTime()))return{date:r}}return DO_NOT_REPLACE},variable:"LABELED_DATE",name:"labeledDates"},deathDateGlobalPattern=/\{\{death\sdate\sand\sage([^\}\}]+)\}\}/gi,deathDatePattern=/(\d+)\|(\d+)\|(\d+)\|(\d+)\|?(\d+)?\|?(\d+)?/,millisInYear$1=31536e6,deathDates={globalPattern:deathDateGlobalPattern,parsePattern:deathDatePattern,parse:function(e){var t=slicedToArray(e,7),n=t[1],r=t[2],i=t[3],o=t[4],l=t[5],f=l===void 0?0:l,h=t[6],d=h===void 0?0:h,g=new Date(n,r-1,i),p=new Date(o,f-1,d);return{date:g,age:Math.floor((Number(g)-Number(p))/millisInYear$1)}},variable:"DEATH_DATE",name:"deathDates"},URLGlobalPattern=/\{\{URL\|([^\}\}]+)\}\}/g,URLPattern=/URL\|([^\}\}]+)\}\}/,url={globalPattern:URLGlobalPattern,parsePattern:URLPattern,parse:function(e){return slicedToArray(e,2)[1]},variable:"URL",name:"urls"},websiteGlobalPattern=/\[(https?):\/\/((?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6})\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)\s+([\w\s]+)\]/g,websitePattern=/\[(https?):\/\/((?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6})\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)\s+([\w\s]+)\]/,website={globalPattern:websiteGlobalPattern,parsePattern:websitePattern,parse:function(e){var t=slicedToArray(e,5),n=t[1],r=t[2],i=t[3];return{protocol:n,hostname:r,path:i,title:t[4],url:n+"://"+r+i}},variable:"WEBSITE",name:"websites"},globalPattern$1=/\{\{Extra[^}}]+\}\}/gi,parsePattern=/\|\s?(\w+)\s+=\s+(.+)/g,propPattern=/\|\s?(\w+)\s+=\s+(.+)/,extra={globalPattern:globalPattern$1,parsePattern,parse:function(e){return e.reduce(function(t,n){var r=n.match(propPattern),i=slicedToArray(r,3),o=i[1],l=i[2];return t[o]=l,t},{})},variable:"EXTRA",name:"extra"},convertGlobalPattern=/\{\{convert\|([\d\.]+)\|(\w+)/g,convertPattern=/\{\{convert\|([\d\.]+)\|(\w+)/,convert={globalPattern:convertGlobalPattern,parsePattern:convertPattern,parse:function(e){var t=slicedToArray(e,3);return t[1]+" "+t[2]},variable:"CONVERT",name:"converts"},filmDatesPattern=/\{\{film\sdate([^\}\}]+)\}\}/gi,filmDatePatternGlobal=/(\d+)\|?(\d+)\|?(\d+)\|?([^\|\}]*)\|?(ref\d+=([^\|\}]*))?/g,filmDatePattern=/(\d+)\|?(\d+)\|?(\d+)\|?([^\|\}]*)\|?(ref\d+=([^\|\}]*))?/,filmDates={globalPattern:filmDatesPattern,parsePattern:filmDatePatternGlobal,parse:function(e){return e.map(function(t){var n=t.match(filmDatePattern),r=slicedToArray(n,7),i=(r[0],r[1]),o=r[2],l=r[3],f=r[4],h=(r[5],r[6]);return{date:new Date(i,o&&o-1,l),location:f,ref:h}})},variable:"FILM_DATES",name:"filmDates"},otherGlobalPattern$1=/<ref(\s\w+=[^>]+)?>(.*)<\/ref>/g,otherPattern$1=/<ref(\s\w+=[^>]+)?>(.*)<\/ref>/,attributeGlobalPattern=/(\w+)=(["\w]+)/g,attributePattern=/(\w+)=(["\w]+)/,ref1={globalPattern:otherGlobalPattern$1,parsePattern:otherPattern$1,parse:function(e){var t=slicedToArray(e,3),n=(t[0],t[1]),r=t[2];return{attributes:((n||"").match(attributeGlobalPattern)||[]).reduce(function(i,o){if(o){var l=o.match(attributePattern),f=slicedToArray(l,3),h=(f[0],f[1]),d=f[2];i[h]=d.replace(/"/g,"")}return i},{}),contents:r}},variable:"REF",name:"refs"},otherGlobalPattern$2=/<ref(\s\w+=[^>]+)?\/>/g,otherPattern$2=/<ref(\s\w+=[^>]+)?\/>/,attributeGlobalPattern$1=/(\w+)=(["\w]+)/g,attributePattern$1=/(\w+)=(["\w]+)/,ref2={globalPattern:otherGlobalPattern$2,parsePattern:otherPattern$2,parse:function(e){return{attributes:e[1].match(attributeGlobalPattern$1).reduce(function(t,n){var r=n.match(attributePattern$1),i=slicedToArray(r,3),o=(i[0],i[1]),l=i[2];return t[o]=l.replace(/"/g,""),t},{})}},variable:"REF",name:"refs"},globalPattern$2=/\{\{formatnum:\d+\}\}/gi,parsePattern$1=/\{\{formatnum:(\d+)\}\}/,formatNum={globalPattern:globalPattern$2,parsePattern:parsePattern$1,parse:function(e){var t=slicedToArray(e,2),n=t[1];return parseFloat(n)},variable:"FORMAT_NUM",name:"formatNum"},dataTypes=[instances,ref1,ref2,small,formatNum,flag,coords,marriages,birthDates,labeledDates,deathDates,unbulletedLists,website,hlist,url,convert,nbay,filmDates,other,extra,plainLists,unmarkedLists],dataTypes$1=dataTypes.map(function(e){return{handler:dataType(e),name:e.name,pattern:new RegExp("\\$"+e.variable+"_(\\d+)")}}),keyValueGlobalPattern=/\|\s*([-'\u0400-\u04FF\w\s]+)\s*=\s*([^|]+)?/g,keyValuePattern=/\|\s*([-'\u0400-\u04FF\w\s]+)\s*=\s*([^|]+)?/,numberParse=function(e){return typeof e=="string"&&(e=e.trim().replace(/ /g,""),e.match(/,/)&&e.match(/\./)?e.indexOf(",")<e.indexOf(".")?parseEnglish(e):parseSpanish(e):e.match(/,/)&&!e.match(/\./)?e.match(/,/g).length>1||e.match(/,[0-9]{3}($|^[0-9])/)?parseEnglish(e):parseSpanish(e):!e.match(/,/)&&e.match(/\./)?e.match(/\./g).length>1||e.match(/\.[0-9]{3}($|^[0-9])/)?parseSpanish(e):parseEnglish(e):(+e).toString()===e&&+e)},parseEnglish=function(e){return+e.replace(/,/g,"")},parseSpanish=function(e){return+e.replace(/\./g,"").replace(/,/g,".")},smallDataType=dataTypes$1.find(function(e){return e.name==="smalls"}),blankNamePattern=/blank(\d+)?NameSec2/,blankInfoPattern=/blank(\d+)?InfoSec2/,infoBoxStartPattern=/{{\w*box/,tableStartPattern=/{\|(.*)\n?/,tableEndPattern=/\n\|}/,headersPattern=/!\s?(.*)/g,rowPattern=/\|-/,cellSeparatorPattern=/(?:\n\|)|(?:\|\|)/,linkPattern=/\[\[([^\]]+)\]\]/g,linkNamePattern=/^.*\|/,inlineHeaderPattern="!!",actionPattern=/{{anchor\|(.*)}}/g,rowSpanCountPattern=/rowspan="(\d+)"/,stripLinks=function(e){return e.replace(linkPattern,function(t,n){return n.replace(linkNamePattern,"").trim()||n})},removeActions=function(e){return e.replace(actionPattern,"")},transformCell=function(e){return stripLinks(removeActions(e||"")).replace(rowSpanCountPattern,"").replace(linkNamePattern,"").trim()},transformCells=function(e){return e.split(cellSeparatorPattern).map(transformCell)},findIndex=function(e,t){var n=e.match(t);return n?n.index:-1},findTableStart=function(e){var t=e.match(tableStartPattern);return t?t.index+t[0].length:-1},findTableEnd=function(e){return findIndex(e,tableEndPattern)},getHeaders=function(e){for(var t=[],n=void 0;n=headersPattern.exec(e);)t.push.apply(t,toConsumableArray(n[1].split(inlineHeaderPattern).map(transformCell)));return t},getRows=function(e){var t=e.split(rowPattern).map(function($){return $.replace(/^.*\n+?\|/,"").trim()}).filter(function($){return $}),n=[],r=0,i=0,o=[],l=!0,f=!1,h=void 0;try{for(var d,g=t[Symbol.iterator]();!(l=(d=g.next()).done);l=!0){var p=d.value,b=p.match(rowSpanCountPattern);b&&(r=0,i=parseInt(b[1]),o=[]),r<i?(o.push(p),++r===i&&n.push(transformRowSpan(o))):n.push(p)}}catch($){f=!0,h=$}finally{try{!l&&g.return&&g.return()}finally{if(f)throw h}}return n},getNextTable=function(e,t,n){var r=e,i=findTableStart(r);if(i===-1)return null;r=r.substring(i);var o=findTableEnd(r);if(o===-1)return null;r=r.substring(0,o);var l=getRows(r);if(!l.length)return null;var f=getHeaders(l[0]);return f.length?{data:l.slice(1).map(transformCells).map(function(h){return f.reduce(function(d,g,p){return d[camelCase(fillVariable(g,t,n))]=fillVariables(h[p],t,n),d},{})}),end:i+o}:null},parseTables=function(e,t){for(var n=cleanSource(e,t),r=extractData(n),i=[],o=r.source,l=null;l=getNextTable(o,r.context,t);){if(!l)return i;i.push(l.data),o=o.substring(l.end)}return i},linkPattern$1=/\[\[([^\]]+)\]\]/g,kmPattern=/{{BSkm\|([\dx]+,[\dx]+)\|([\dx]+,[\dx]+)}}/g,parseBsTables=function(e){var t=e.replace(kmPattern,"$1/$2").match(/{{BS([^}}]+)}}/g);return t?t.map(function(n){return clean(n).split("|")}).map(parseRow).filter(function(n){return n.type[0]!=="-"}):null},headingPattern=/[^=]==\s?([\w\s]+)\s?==/g,subheadingPattern=/===([\w\s]+)===/g,tableStartPattern$1=/{{list.+start.*}}/gi,tableEndPattern$1=/{{list.+end.*}}/gi,rowPattern$1=/{{(.*)}}/g,rowPatternSingle=/{{(.*)}}/,parseLists=function(e){var t=getMatches(e,headingPattern),n=getMatches(e,subheadingPattern),r=getTables(e);return r.forEach(function(i){var o=t.filter(function(f){return f.end<i.start}).map(function(f){return f.value});i.heading=last(o);var l=n.filter(function(f){return f.end<i.start}).map(function(f){return f.value});i.subheading=last(l),delete i.start,delete i.end}),r},bundle_min=parseInfobox;(function(exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.citation=exports.pdf=exports.mobileHtml=exports.media=exports.related=exports.summary=exports.rawInfo=exports.tables=exports.infobox=exports.langLinks=exports.coordinates=exports.references=exports.links=exports.categories=exports.content=exports.html=exports.intro=exports.images=exports.Page=void 0;const errors_1=errors,request_1=request,utils_1=utils$1,messages_1=messages,infoboxParser=bundle_min;class Page{constructor(e){this.intro=async t=>{try{if(!this._intro){const n=await(0,exports.intro)(this.pageid.toString(),t==null?void 0:t.redirect);this._intro=n}return this._intro}catch(n){throw new errors_1.introError(n)}},this.images=async t=>{try{if(!this._images){const n=await(0,exports.images)(this.pageid.toString(),t);this._images=n}return this._images}catch(n){throw new errors_1.imageError(n)}},this.summary=async t=>{try{if(!this._summary){const n=await(0,exports.summary)(this.title,t==null?void 0:t.redirect);this._summary=n}return this._summary}catch(n){throw new errors_1.summaryError(n)}},this.html=async t=>{try{if(!this._html){const n=await(0,exports.html)(this.pageid.toString(),t==null?void 0:t.redirect);this._html=n}return this._html}catch(n){throw new errors_1.htmlError(n)}},this.content=async t=>{try{if(!this._content){const n=await(0,exports.content)(this.pageid.toString(),t==null?void 0:t.redirect);this.parentid=n.ids.parentId,this.revid=n.ids.revId,this._content=n.result}return this._content}catch(n){throw new errors_1.contentError(n)}},this.categories=async t=>{try{if(!this._categories){const n=await(0,exports.categories)(this.pageid.toString(),t);this._categories=n}return this._categories}catch(n){throw new errors_1.categoriesError(n)}},this.links=async t=>{try{if(!this._links){const n=await(0,exports.links)(this.pageid.toString(),t);this._links=n}return this._links}catch(n){throw new errors_1.linksError(n)}},this.references=async t=>{try{if(!this._references){const n=await(0,exports.references)(this.pageid.toString(),t);this._references=n}return this._references}catch(n){throw new errors_1.linksError(n)}},this.coordinates=async t=>{try{if(!this._coordinates){const n=await(0,exports.coordinates)(this.pageid.toString(),t==null?void 0:t.redirect);this._coordinates=n}return this._coordinates}catch(n){throw new errors_1.coordinatesError(n)}},this.langLinks=async t=>{try{if(!this._langLinks){const n=await(0,exports.langLinks)(this.pageid.toString(),t);this._langLinks=n}return this._langLinks}catch(n){throw new errors_1.linksError(n)}},this.infobox=async t=>{try{if(!this._infobox){const n=await(0,exports.infobox)(this.pageid.toString(),t==null?void 0:t.redirect);this._infobox=n}return this._infobox}catch(n){throw new errors_1.infoboxError(n)}},this.tables=async t=>{try{if(!this._tables){const n=await(0,exports.tables)(this.pageid.toString(),t==null?void 0:t.redirect);this._tables=n}return this._tables}catch(n){throw new errors_1.infoboxError(n)}},this.related=async t=>{try{if(!this._related){const n=await(0,exports.related)(this.title,t==null?void 0:t.redirect);this._related=n}return this._related}catch(n){throw new errors_1.relatedError(n)}},this.media=async t=>{try{if(!this._media){const n=await(0,exports.media)(this.title,t==null?void 0:t.redirect);this._media=n}return this._media}catch(n){throw new errors_1.mediaError(n)}},this.mobileHtml=async t=>{try{if(!this._mobileHtml){const n=await(0,exports.mobileHtml)(this.title,t==null?void 0:t.redirect);this._mobileHtml=n}return this._mobileHtml}catch(n){throw new errors_1.htmlError(n)}},this.pdf=async t=>{try{return await(0,exports.pdf)(this.title,t)}catch(n){throw new errors_1.pdfError(n)}},this.pageid=e.pageid,this.ns=e.ns,this.title=e.title,this.contentmodel=e.contentmodel,this.pagelanguage=e.pagelanguage,this.pagelanguagedir=e.pagelanguagedir,this.touched=e.touched,this.lastrevid=e.lastrevid,this.length=e.length,this.fullurl=e.fullurl,this.editurl=e.editurl,this.canonicalurl=e.canonicalurl}async runMethod(functionName){try{const result=await eval(`this.${functionName}()`);return result}catch(e){throw new errors_1.preloadError(e)}}}exports.Page=Page;const images=async(e,t)=>{try{let n={generator:"images",gimlimit:(t==null?void 0:t.limit)||5,prop:"imageinfo",iiprop:"url"};n=(0,utils_1.setPageIdOrTitleParam)(n,e);const r=await(0,request_1.default)(n,t==null?void 0:t.redirect),i=[],o=Object.keys(r.query.pages);for(const l of o){const f=r.query.pages[l];f.url=f.imageinfo[0].url,i.push(f)}return i}catch(n){throw new errors_1.imageError(n)}};exports.images=images;const intro=async(e,t=!0)=>{var n;try{let r={prop:"extracts",explaintext:"",exintro:""};r=(0,utils_1.setPageIdOrTitleParam)(r,e);const i=await(0,request_1.default)(r,t),o=(0,utils_1.setPageId)(r,i);return(n=i==null?void 0:i.query)===null||n===void 0?void 0:n.pages[o].extract}catch(r){throw new errors_1.introError(r)}};exports.intro=intro;const html=async(e,t=!0)=>{try{let n={prop:"revisions",rvprop:"content",rvlimit:1,rvparse:""};n=(0,utils_1.setPageIdOrTitleParam)(n,e);const r=await(0,request_1.default)(n,t),i=(0,utils_1.setPageId)(n,r);return r.query.pages[i].revisions[0]["*"]}catch(n){throw new errors_1.htmlError(n)}};exports.html=html;const content=async(e,t=!0)=>{try{let n={prop:"extracts|revisions",explaintext:"",rvprop:"ids"};n=(0,utils_1.setPageIdOrTitleParam)(n,e);const r=await(0,request_1.default)(n,t),i=(0,utils_1.setPageId)(n,r),o=r.query.pages[i].extract,l={revisionId:r.query.pages[i].revisions[0].revid,parentId:r.query.pages[i].revisions[0].parentid};return{result:o,ids:l}}catch(n){throw new errors_1.contentError(n)}};exports.content=content;const categories=async(e,t)=>{try{let n={prop:"categories",pllimit:t==null?void 0:t.limit};n=(0,utils_1.setPageIdOrTitleParam)(n,e);const r=await(0,request_1.default)(n,t==null?void 0:t.redirect),i=(0,utils_1.setPageId)(n,r);return r.query.pages[i].categories.map(o=>o.title)}catch(n){throw new errors_1.categoriesError(n)}};exports.categories=categories;const links=async(e,t)=>{try{let n={prop:"links",plnamespace:0,pllimit:(t==null?void 0:t.limit)||"max"};n=(0,utils_1.setPageIdOrTitleParam)(n,e);const r=await(0,request_1.default)(n,t==null?void 0:t.redirect),i=(0,utils_1.setPageId)(n,r);return r.query.pages[i].links.map(l=>l.title)}catch(n){throw new errors_1.linksError(n)}};exports.links=links;const references=async(e,t)=>{try{let n={prop:"extlinks",ellimit:(t==null?void 0:t.limit)||"max"};n=(0,utils_1.setPageIdOrTitleParam)(n,e);const r=await(0,request_1.default)(n,t==null?void 0:t.redirect),i=(0,utils_1.setPageId)(n,r);return r.query.pages[i].extlinks.map(l=>l["*"])}catch(n){throw new errors_1.linksError(n)}};exports.references=references;const coordinates=async(e,t=!0)=>{try{let n={prop:"coordinates"};n=(0,utils_1.setPageIdOrTitleParam)(n,e);const r=await(0,request_1.default)(n,t),i=(0,utils_1.setPageId)(n,r),o=r.query.pages[i].coordinates;return o?o[0]:null}catch(n){throw new errors_1.coordinatesError(n)}};exports.coordinates=coordinates;const langLinks=async(e,t)=>{try{let n={prop:"langlinks",lllimit:(t==null?void 0:t.limit)||"max",llprop:"url"};n=(0,utils_1.setPageIdOrTitleParam)(n,e);const r=await(0,request_1.default)(n,t==null?void 0:t.redirect),i=(0,utils_1.setPageId)(n,r);return r.query.pages[i].langlinks.map(l=>({lang:l.lang,title:l["*"],url:l.url}))}catch(n){throw new errors_1.linksError(n)}};exports.langLinks=langLinks;const infobox=async(e,t=!0)=>{try{const n={prop:"revisions",rvprop:"content",rvsection:0},r=await(0,exports.rawInfo)(e,n,t);return infoboxParser(r).general}catch(n){throw new errors_1.infoboxError(n)}};exports.infobox=infobox;const tables=async(e,t=!0)=>{try{const n={prop:"revisions",rvprop:"content"},r=await(0,exports.rawInfo)(e,n,t);return infoboxParser(r).tables}catch(n){throw new errors_1.infoboxError(n)}};exports.tables=tables;const rawInfo=async(e,t,n=!0)=>{var r;try{t=(0,utils_1.setPageIdOrTitleParam)(t,e);const i=await(0,request_1.default)(t,n);if(!(!((r=i.query)===null||r===void 0)&&r.pages))throw new errors_1.wikiError(messages_1.MSGS.INFOBOX_NOT_EXIST);const o=(0,utils_1.setPageId)(t,i),l=i.query.pages[o].revisions[0];return l?l["*"]:""}catch(i){throw new errors_1.infoboxError(i)}};exports.rawInfo=rawInfo;const summary=async(e,t=!0)=>{try{const n="page/summary/"+e.replace(" ","_");return await(0,request_1.makeRestRequest)(n,t)}catch(n){throw new errors_1.summaryError(n)}};exports.summary=summary;const related=async(e,t=!0)=>{try{const n="page/related/"+e.replace(" ","_");return await(0,request_1.makeRestRequest)(n,t)}catch(n){throw new errors_1.relatedError(n)}};exports.related=related;const media=async(e,t=!0)=>{try{const n="page/media-list/"+e.replace(" ","_");return await(0,request_1.makeRestRequest)(n,t)}catch(n){throw new errors_1.mediaError(n)}};exports.media=media;const mobileHtml=async(e,t=!0)=>{try{const n=`page/mobile-html/${e}`;return await(0,request_1.makeRestRequest)(n,t)}catch(n){throw new errors_1.htmlError(n)}};exports.mobileHtml=mobileHtml;const pdf=async(e,t)=>{try{let n=`page/pdf/${e}`;return t!=null&&t.format&&(n+=`/${t.format}`),t!=null&&t.type&&(n+=`/${t.type}`),(0,request_1.returnRestUrl)(n)}catch(n){throw new errors_1.pdfError(n)}};exports.pdf=pdf;const citation=async(e,t,n)=>{try{let r="data/citation";return r+=t?`/${t}`:"/mediawiki",r+=`/${e}`,n&&(r+=`/${n}`),await(0,request_1.makeRestRequest)(r)}catch(r){throw new errors_1.citationError(r)}};exports.citation=citation,exports.default=Page})(page);var resultTypes={};Object.defineProperty(resultTypes,"__esModule",{value:!0});var optionTypes={};Object.defineProperty(optionTypes,"__esModule",{value:!0});(function(e,t){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(g,p,b,$){$===void 0&&($=b);var w=Object.getOwnPropertyDescriptor(p,b);(!w||("get"in w?!p.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return p[b]}}),Object.defineProperty(g,$,w)}:function(g,p,b,$){$===void 0&&($=b),g[$]=p[b]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(g,p){for(var b in g)b!=="default"&&!Object.prototype.hasOwnProperty.call(p,b)&&n(p,g,b)};Object.defineProperty(t,"__esModule",{value:!0});const i=request,o=page,l=errors,f=messages,h=utils$1,d=async(g,p)=>d.page(g,p);d.search=async(g,p)=>{try{const b={list:"search",srprop:"",srlimit:(p==null?void 0:p.limit)||10,srsearch:g};p!=null&&p.suggestion&&(b.srinfo="suggestion");const $=await(0,i.default)(b);return{results:$.query.search,suggestion:$.query.searchinfo?$.query.searchinfo.suggestion:null}}catch(b){throw new l.searchError(b)}},d.page=async(g,p)=>{try{p!=null&&p.autoSuggest&&(g=await(0,h.setTitleForPage)(g));let b={prop:"info|pageprops",inprop:"url",ppprop:"disambiguation"};b=(0,h.setPageIdOrTitleParam)(b,g);const $=await(0,i.default)(b);let w=$.query.pages;const P=(0,h.setPageId)(b,$);if(w=w[P],w.missing=="")throw new l.pageError(`${f.MSGS.PAGE_NOT_EXIST}${g}`);const _=new o.default(w);if(p!=null&&p.preload){p!=null&&p.fields||(p.fields=["summary","images"]);for(const S of p.fields)await _.runMethod(S)}return _}catch(b){throw new l.pageError(b)}},d.intro=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,h.setTitleForPage)(g)),await(0,o.intro)(g,p==null?void 0:p.redirect)}catch(b){throw new l.introError(b)}},d.images=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,h.setTitleForPage)(g)),await(0,o.images)(g,p)}catch(b){throw new l.imageError(b)}},d.summary=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,h.setTitleForPage)(g)),await(0,o.summary)(g,p==null?void 0:p.redirect)}catch(b){throw new l.summaryError(b)}},d.html=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,h.setTitleForPage)(g)),await(0,o.html)(g,p==null?void 0:p.redirect)}catch(b){throw new l.htmlError(b)}},d.content=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,h.setTitleForPage)(g)),(await(0,o.content)(g,p==null?void 0:p.redirect)).result}catch(b){throw new l.contentError(b)}},d.categories=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,h.setTitleForPage)(g)),await(0,o.categories)(g,p)}catch(b){throw new l.categoriesError(b)}},d.related=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,h.setTitleForPage)(g)),await(0,o.related)(g,p==null?void 0:p.redirect)}catch(b){throw new l.relatedError(b)}},d.media=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,h.setTitleForPage)(g)),await(0,o.media)(g,p==null?void 0:p.redirect)}catch(b){throw new l.mediaError(b)}},d.links=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,h.setTitleForPage)(g)),await(0,o.links)(g,p)}catch(b){throw new l.linksError(b)}},d.references=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,h.setTitleForPage)(g)),await(0,o.references)(g,p)}catch(b){throw new l.linksError(b)}},d.coordinates=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,h.setTitleForPage)(g)),await(0,o.coordinates)(g,p==null?void 0:p.redirect)}catch(b){throw new l.coordinatesError(b)}},d.langLinks=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,h.setTitleForPage)(g)),await(0,o.langLinks)(g,p)}catch(b){throw new l.linksError(b)}},d.infobox=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,h.setTitleForPage)(g)),await(0,o.infobox)(g,p==null?void 0:p.redirect)}catch(b){throw new l.infoboxError(b)}},d.tables=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,h.setTitleForPage)(g)),await(0,o.tables)(g,p==null?void 0:p.redirect)}catch(b){throw new l.infoboxError(b)}},d.languages=async()=>{try{const g={meta:"siteinfo",siprop:"languages"},p=await(0,i.default)(g),b=[];for(const $ of p.query.languages)b.push({[$.code]:$["*"]});return b}catch(g){throw new l.wikiError(g)}},d.setLang=g=>(0,i.setAPIUrl)(g),d.geoSearch=async(g,p,b)=>{try{const $={list:"geosearch",gsradius:(b==null?void 0:b.radius)||1e3,gscoord:`${g}|${p}`,gslimit:(b==null?void 0:b.limit)||10,gsprop:"type"};return(await(0,i.default)($)).query.geosearch}catch($){throw new l.geoSearchError($)}},d.suggest=async g=>{var p,b,$,w;try{const P={list:"search",srinfo:"suggestion",srprop:"",srsearch:g},_=await(0,i.default)(P);return!((b=(p=_.query)===null||p===void 0?void 0:p.searchinfo)===null||b===void 0)&&b.suggestion?(w=($=_.query)===null||$===void 0?void 0:$.searchinfo)===null||w===void 0?void 0:w.suggestion:null}catch(P){throw new l.searchError(P)}},d.onThisDay=async(g={})=>{try{const p=g.type||"all",b=(g.month||(0,h.getCurrentMonth)()).toString().padStart(2,"0"),$=(g.day||(0,h.getCurrentDay)()).toString().padStart(2,"0"),w=`feed/onthisday/${p}/${b}/${$}`;return await(0,i.makeRestRequest)(w,!0)}catch(p){throw new l.eventsError(p)}},d.featuredContent=async(g={})=>{try{const p=(g.year||(0,h.getCurrentYear)()).toString(),b=(g.month||(0,h.getCurrentMonth)()).toString().padStart(2,"0"),$=(g.day||(0,h.getCurrentDay)()).toString().padStart(2,"0"),w=`feed/featured/${p}/${b}/${$}`;return await(0,i.makeRestRequest)(w,!0)}catch(p){throw new l.fcError(p)}},d.random=async g=>{try{g||(g="summary");const p=`page/random/${g}`;return await(0,i.makeRestRequest)(p)}catch(p){throw new l.wikiError(p)}},d.mobileHtml=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,h.setTitleForPage)(g)),await(0,o.mobileHtml)(g,p==null?void 0:p.redirect)}catch(b){throw new l.htmlError(b)}},d.pdf=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,h.setTitleForPage)(g)),await(0,o.pdf)(g,p)}catch(b){throw new l.pdfError(b)}},d.citation=async(g,p,b)=>{try{return await(0,o.citation)(g,p,b)}catch($){throw new l.citationError($)}},d.autocompletions=async(g,p)=>{try{const b={list:"search",limit:(p==null?void 0:p.limit)||10,search:g,action:"opensearch",redirect:"return"},[,$]=await(0,i.default)(b,!1);return $}catch(b){throw new l.autocompletionsError(b)}},t.default=d,e.exports=d,e.exports.default=d,r(errors,t),r(resultTypes,t),r(optionTypes,t),r(page,t)})(dist$1,dist$1.exports);var index$5=getDefaultExportFromCjs(dist$1.exports),wiki=_mergeNamespaces({__proto__:null,default:index$5},[dist$1.exports]),speakTts={},utils={};Object.defineProperty(utils,"__esModule",{value:!0});utils.trim=utils.isObject=utils.isNil=utils.isNan=utils.size=utils.isString=utils.validateLocale=utils.splitSentences=void 0;var splitSentences=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t.replace(/\.+/g,".|").replace(/\?/g,"?|").replace(/\!/g,"!|").split("|").map(function(n){return trim(n)}).filter(Boolean)};utils.splitSentences=splitSentences;var bcp47LocalePattern=/^(?:(en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang))$|^((?:[a-z]{2,3}(?:(?:-[a-z]{3}){1,3})?)|[a-z]{4}|[a-z]{5,8})(?:-([a-z]{4}))?(?:-([a-z]{2}|\d{3}))?((?:-(?:[\da-z]{5,8}|\d[\da-z]{3}))*)?((?:-[\da-wy-z](?:-[\da-z]{2,8})+)*)?(-x(?:-[\da-z]{1,8})+)?$|^(x(?:-[\da-z]{1,8})+)$/i,validateLocale=function e(t){return typeof t!="string"?!1:bcp47LocalePattern.test(t)};utils.validateLocale=validateLocale;var isString=function e(t){return typeof t=="string"||t instanceof String};utils.isString=isString;var size=function e(t){return t&&Array.isArray(t)&&t.length?t.length:0};utils.size=size;var isNan=function e(t){return typeof t=="number"&&isNaN(t)};utils.isNan=isNan;var isNil=function e(t){return t==null};utils.isNil=isNil;var isObject=function e(t){return Object.prototype.toString.call(t)==="[object Object]"};utils.isObject=isObject;var trim=function e(t){return isString(t)?t.trim():""};utils.trim=trim;Object.defineProperty(speakTts,"__esModule",{value:!0});var default_1=speakTts.default=void 0,_utils=utils;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var SpeakTTS=function(){function e(){_classCallCheck(this,e),this.browserSupport="speechSynthesis"in window&&"SpeechSynthesisUtterance"in window,this.synthesisVoice=null}return _createClass(e,[{key:"init",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(i,o){n.browserSupport||o("Your browser does not support Speech Synthesis");var l=(0,_utils.isNil)(r.listeners)?{}:r.listeners,f=(0,_utils.isNil)(r.splitSentences)?!0:r.splitSentences,h=(0,_utils.isNil)(r.lang)?void 0:r.lang,d=(0,_utils.isNil)(r.volume)?1:r.volume,g=(0,_utils.isNil)(r.rate)?1:r.rate,p=(0,_utils.isNil)(r.pitch)?1:r.pitch,b=(0,_utils.isNil)(r.voice)?void 0:r.voice;Object.keys(l).forEach(function($){var w=l[$],P=function(S){w&&w(S)};$!=="onvoiceschanged"&&(speechSynthesis[$]=P)}),n._loadVoices().then(function($){l.onvoiceschanged&&l.onvoiceschanged($),!(0,_utils.isNil)(h)&&n.setLanguage(h),!(0,_utils.isNil)(b)&&n.setVoice(b),!(0,_utils.isNil)(d)&&n.setVolume(d),!(0,_utils.isNil)(g)&&n.setRate(g),!(0,_utils.isNil)(p)&&n.setPitch(p),!(0,_utils.isNil)(f)&&n.setSplitSentences(f),i({voices:$,lang:n.lang,voice:n.voice,volume:n.volume,rate:n.rate,pitch:n.pitch,splitSentences:n.splitSentences,browserSupport:n.browserSupport})}).catch(function($){o($)})})}},{key:"_fetchVoices",value:function(){return new Promise(function(n,r){setTimeout(function(){var i=speechSynthesis.getVoices();return(0,_utils.size)(i)>0?n(i):r("Could not fetch voices")},100)})}},{key:"_loadVoices",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;return this._fetchVoices().catch(function(i){if(r===0)throw i;return n._loadVoices(r-1)})}},{key:"hasBrowserSupport",value:function(){return this.browserSupport}},{key:"setVoice",value:function(n){var r,i=speechSynthesis.getVoices();if((0,_utils.isString)(n)&&(r=i.find(function(o){return o.name===n})),(0,_utils.isObject)(n)&&(r=n),r)this.synthesisVoice=r;else throw"Error setting voice. The voice you passed is not valid or the voices have not been loaded yet."}},{key:"setLanguage",value:function(n){if(n=n.replace("_","-"),(0,_utils.validateLocale)(n))this.lang=n;else throw"Error setting language. Please verify your locale is BCP47 format (http://schneegans.de/lv/?tags=es-FR&format=text)"}},{key:"setVolume",value:function(n){if(n=parseFloat(n),!(0,_utils.isNan)(n)&&n>=0&&n<=1)this.volume=n;else throw"Error setting volume. Please verify your volume value is a number between 0 and 1."}},{key:"setRate",value:function(n){if(n=parseFloat(n),!(0,_utils.isNan)(n)&&n>=0&&n<=10)this.rate=n;else throw"Error setting rate. Please verify your volume value is a number between 0 and 10."}},{key:"setPitch",value:function(n){if(n=parseFloat(n),!(0,_utils.isNan)(n)&&n>=0&&n<=2)this.pitch=n;else throw"Error setting pitch. Please verify your pitch value is a number between 0 and 2."}},{key:"setSplitSentences",value:function(n){this.splitSentences=n}},{key:"speak",value:function(n){var r=this;return new Promise(function(i,o){var l=n.text,f=n.listeners,h=f===void 0?{}:f,d=n.queue,g=d===void 0?!0:d,p=(0,_utils.trim)(l);(0,_utils.isNil)(p)&&i(),!g&&r.cancel();var b=[],$=r.splitSentences?(0,_utils.splitSentences)(p):[p];$.forEach(function(w,P){var _=P===(0,_utils.size)($)-1,S=new SpeechSynthesisUtterance;r.synthesisVoice&&(S.voice=r.synthesisVoice),r.lang&&(S.lang=r.lang),r.volume&&(S.volume=r.volume),r.rate&&(S.rate=r.rate),r.pitch&&(S.pitch=r.pitch),S.text=w,Object.keys(h).forEach(function(N){var R=h[N],T=function(L){R&&R(L),N==="onerror"&&o({utterances:b,lastUtterance:S,error:L}),N==="onend"&&_&&i({utterances:b,lastUtterance:S})};S[N]=T}),b.push(S),speechSynthesis.speak(S)})})}},{key:"pending",value:function(){return speechSynthesis.pending}},{key:"paused",value:function(){return speechSynthesis.paused}},{key:"speaking",value:function(){return speechSynthesis.speaking}},{key:"pause",value:function(){speechSynthesis.pause()}},{key:"resume",value:function(){speechSynthesis.resume()}},{key:"cancel",value:function(){speechSynthesis.cancel()}}]),e}(),_default=SpeakTTS;default_1=speakTts.default=_default;function ascending$3(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function descending$2(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bisector(e){let t,n,r;e.length!==2?(t=ascending$3,n=(f,h)=>ascending$3(e(f),h),r=(f,h)=>e(f)-h):(t=e===ascending$3||e===descending$2?e:zero$1,n=e,r=e);function i(f,h,d=0,g=f.length){if(d<g){if(t(h,h)!==0)return g;do{const p=d+g>>>1;n(f[p],h)<0?d=p+1:g=p}while(d<g)}return d}function o(f,h,d=0,g=f.length){if(d<g){if(t(h,h)!==0)return g;do{const p=d+g>>>1;n(f[p],h)<=0?d=p+1:g=p}while(d<g)}return d}function l(f,h,d=0,g=f.length){const p=i(f,h,d,g-1);return p>d&&r(f[p-1],h)>-r(f[p],h)?p-1:p}return{left:i,center:l,right:o}}function zero$1(){return 0}function number$3(e){return e===null?NaN:+e}function*numbers(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const ascendingBisect=bisector(ascending$3),bisectRight=ascendingBisect.right,bisectLeft=ascendingBisect.left,bisectCenter=bisector(number$3).center;var bisect=bisectRight;function blur(e,t){if(!((t=+t)>=0))throw new RangeError("invalid r");let n=e.length;if(!((n=Math.floor(n))>=0))throw new RangeError("invalid length");if(!n||!t)return e;const r=blurf(t),i=e.slice();return r(e,i,0,n,1),r(i,e,0,n,1),r(e,i,0,n,1),e}const blur2=Blur2(blurf),blurImage=Blur2(blurfImage);function Blur2(e){return function(t,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:o,height:l}=t;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid width");if(!((l=Math.floor(l!==void 0?l:i.length/o))>=0))throw new RangeError("invalid height");if(!o||!l||!n&&!r)return t;const f=n&&e(n),h=r&&e(r),d=i.slice();return f&&h?(blurh(f,d,i,o,l),blurh(f,i,d,o,l),blurh(f,d,i,o,l),blurv(h,i,d,o,l),blurv(h,d,i,o,l),blurv(h,i,d,o,l)):f?(blurh(f,i,d,o,l),blurh(f,d,i,o,l),blurh(f,i,d,o,l)):h&&(blurv(h,i,d,o,l),blurv(h,d,i,o,l),blurv(h,i,d,o,l)),t}}function blurh(e,t,n,r,i){for(let o=0,l=r*i;o<l;)e(t,n,o,o+=r,1)}function blurv(e,t,n,r,i){for(let o=0,l=r*i;o<r;++o)e(t,n,o,o+l,r)}function blurfImage(e){const t=blurf(e);return(n,r,i,o,l)=>{i<<=2,o<<=2,l<<=2,t(n,r,i+0,o+0,l),t(n,r,i+1,o+1,l),t(n,r,i+2,o+2,l),t(n,r,i+3,o+3,l)}}function blurf(e){const t=Math.floor(e);if(t===e)return bluri(e);const n=e-t,r=2*e+1;return(i,o,l,f,h)=>{if(!((f-=h)>=l))return;let d=t*o[l];const g=h*t,p=g+h;for(let b=l,$=l+g;b<$;b+=h)d+=o[Math.min(f,b)];for(let b=l,$=f;b<=$;b+=h)d+=o[Math.min(f,b+g)],i[b]=(d+n*(o[Math.max(l,b-p)]+o[Math.min(f,b+p)]))/r,d-=o[Math.max(l,b-g)]}}function bluri(e){const t=2*e+1;return(n,r,i,o,l)=>{if(!((o-=l)>=i))return;let f=e*r[i];const h=l*e;for(let d=i,g=i+h;d<g;d+=l)f+=r[Math.min(o,d)];for(let d=i,g=o;d<=g;d+=l)f+=r[Math.min(o,d+h)],n[d]=f/t,f-=r[Math.max(i,d-h)]}}function count$1(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function length$3(e){return e.length|0}function empty$2(e){return!(e>0)}function arrayify(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function reducer(e){return t=>e(...t)}function cross$2(...e){const t=typeof e[e.length-1]=="function"&&reducer(e.pop());e=e.map(arrayify);const n=e.map(length$3),r=e.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(empty$2))return o;for(;;){o.push(i.map((f,h)=>e[h][f]));let l=r;for(;++i[l]===n[l];){if(l===0)return t?o.map(t):o;i[l--]=0}}}function cumsum(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function variance(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let l of e)l!=null&&(l=+l)>=l&&(r=l-i,i+=r/++n,o+=r*(l-i));else{let l=-1;for(let f of e)(f=t(f,++l,e))!=null&&(f=+f)>=f&&(r=f-i,i+=r/++n,o+=r*(f-i))}if(n>1)return o/(n-1)}function deviation(e,t){const n=variance(e,t);return n&&Math.sqrt(n)}function extent$1(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class Adder{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],l=t+o,f=Math.abs(t)<Math.abs(o)?t-(l-o):o-(l-t);f&&(n[r++]=f),t=l}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,l=0;if(n>0){for(l=t[--n];n>0&&(r=l,i=t[--n],l=r+i,o=i-(l-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=l+i,i==r-l&&(l=r))}return l}}function fsum(e,t){const n=new Adder;if(t===void 0)for(let r of e)(r=+r)&&n.add(r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&n.add(i)}return+n}function fcumsum(e,t){const n=new Adder;let r=-1;return Float64Array.from(e,t===void 0?i=>n.add(+i||0):i=>n.add(+t(i,++r,e)||0))}class InternMap extends Map{constructor(t,n=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(intern_get(this,t))}has(t){return super.has(intern_get(this,t))}set(t,n){return super.set(intern_set(this,t),n)}delete(t){return super.delete(intern_delete(this,t))}}class InternSet extends Set{constructor(t,n=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(intern_get(this,t))}add(t){return super.add(intern_set(this,t))}delete(t){return super.delete(intern_delete(this,t))}}function intern_get({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function intern_set({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function intern_delete({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function keyof(e){return e!==null&&typeof e=="object"?e.valueOf():e}function identity$9(e){return e}function group(e,...t){return nest(e,identity$9,identity$9,t)}function groups(e,...t){return nest(e,Array.from,identity$9,t)}function flatten$1(e,t){for(let n=1,r=t.length;n<r;++n)e=e.flatMap(i=>i.pop().map(([o,l])=>[...i,o,l]));return e}function flatGroup(e,...t){return flatten$1(groups(e,...t),t)}function flatRollup(e,t,...n){return flatten$1(rollups(e,t,...n),n)}function rollup(e,t,...n){return nest(e,identity$9,t,n)}function rollups(e,t,...n){return nest(e,Array.from,t,n)}function index$4(e,...t){return nest(e,identity$9,unique,t)}function indexes(e,...t){return nest(e,Array.from,unique,t)}function unique(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function nest(e,t,n,r){return function i(o,l){if(l>=r.length)return n(o);const f=new InternMap,h=r[l++];let d=-1;for(const g of o){const p=h(g,++d,o),b=f.get(p);b?b.push(g):f.set(p,[g])}for(const[g,p]of f)f.set(g,i(p,l));return t(f)}(e,0)}function permute(e,t){return Array.from(t,n=>e[n])}function sort(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,o)=>o);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,o)=>{for(const l of t){const f=ascendingDefined(l[i],l[o]);if(f)return f}})):(n=e.map(n),r.sort((i,o)=>ascendingDefined(n[i],n[o]))),permute(e,r)}return e.sort(compareDefined(n))}function compareDefined(e=ascending$3){if(e===ascending$3)return ascendingDefined;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function ascendingDefined(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function groupSort(e,t,n){return(t.length!==2?sort(rollup(e,t,n),([r,i],[o,l])=>ascending$3(i,l)||ascending$3(r,o)):sort(group(e,n),([r,i],[o,l])=>t(i,l)||ascending$3(r,o))).map(([r])=>r)}var array$5=Array.prototype,slice$3=array$5.slice;function constant$b(e){return()=>e}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),l=o>=e10?10:o>=e5?5:o>=e2?2:1;let f,h,d;return i<0?(d=Math.pow(10,-i)/l,f=Math.round(e*d),h=Math.round(t*d),f/d<e&&++f,h/d>t&&--h,d=-d):(d=Math.pow(10,i)*l,f=Math.round(e/d),h=Math.round(t/d),f*d<e&&++f,h*d>t&&--h),h<f&&.5<=n&&n<2?tickSpec(e,t,n*2):[f,h,d]}function ticks(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,l]=r?tickSpec(t,e,n):tickSpec(e,t,n);if(!(o>=i))return[];const f=o-i+1,h=new Array(f);if(r)if(l<0)for(let d=0;d<f;++d)h[d]=(o-d)/-l;else for(let d=0;d<f;++d)h[d]=(o-d)*l;else if(l<0)for(let d=0;d<f;++d)h[d]=(i+d)/-l;else for(let d=0;d<f;++d)h[d]=(i+d)*l;return h}function tickIncrement(e,t,n){return t=+t,e=+e,n=+n,tickSpec(e,t,n)[2]}function tickStep(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?tickIncrement(t,e,n):tickIncrement(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function nice$1(e,t,n){let r;for(;;){const i=tickIncrement(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function thresholdSturges(e){return Math.ceil(Math.log(count$1(e))/Math.LN2)+1}function bin(){var e=identity$9,t=extent$1,n=thresholdSturges;function r(i){Array.isArray(i)||(i=Array.from(i));var o,l=i.length,f,h,d=new Array(l);for(o=0;o<l;++o)d[o]=e(i[o],o,i);var g=t(d),p=g[0],b=g[1],$=n(d,p,b);if(!Array.isArray($)){const R=b,T=+$;if(t===extent$1&&([p,b]=nice$1(p,b,T)),$=ticks(p,b,T),$[0]<=p&&(h=tickIncrement(p,b,T)),$[$.length-1]>=b)if(R>=b&&t===extent$1){const I=tickIncrement(p,b,T);isFinite(I)&&(I>0?b=(Math.floor(b/I)+1)*I:I<0&&(b=(Math.ceil(b*-I)+1)/-I))}else $.pop()}for(var w=$.length,P=0,_=w;$[P]<=p;)++P;for(;$[_-1]>b;)--_;(P||_<w)&&($=$.slice(P,_),w=_-P);var S=new Array(w+1),N;for(o=0;o<=w;++o)N=S[o]=[],N.x0=o>0?$[o-1]:p,N.x1=o<w?$[o]:b;if(isFinite(h)){if(h>0)for(o=0;o<l;++o)(f=d[o])!=null&&p<=f&&f<=b&&S[Math.min(w,Math.floor((f-p)/h))].push(i[o]);else if(h<0){for(o=0;o<l;++o)if((f=d[o])!=null&&p<=f&&f<=b){const R=Math.floor((p-f)*h);S[Math.min(w,R+($[R]<=f))].push(i[o])}}}else for(o=0;o<l;++o)(f=d[o])!=null&&p<=f&&f<=b&&S[bisect($,f,0,w)].push(i[o]);return S}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:constant$b(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:constant$b([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:constant$b(Array.isArray(i)?slice$3.call(i):i),r):n},r}function max$3(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function maxIndex(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);return r}function min$2(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function minIndex(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);return r}function quickselect(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?ascendingDefined:compareDefined(i);r>n;){if(r-n>600){const h=r-n+1,d=t-n+1,g=Math.log(h),p=.5*Math.exp(2*g/3),b=.5*Math.sqrt(g*p*(h-p)/h)*(d-h/2<0?-1:1),$=Math.max(n,Math.floor(t-d*p/h+b)),w=Math.min(r,Math.floor(t+(h-d)*p/h+b));quickselect(e,t,$,w,i)}const o=e[t];let l=n,f=r;for(swap$1(e,n,t),i(e[r],o)>0&&swap$1(e,n,r);l<f;){for(swap$1(e,l,f),++l,--f;i(e[l],o)<0;)++l;for(;i(e[f],o)>0;)--f}i(e[n],o)===0?swap$1(e,n,f):(++f,swap$1(e,f,r)),f<=t&&(n=f+1),t<=f&&(r=f-1)}return e}function swap$1(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function greatest(e,t=ascending$3){let n,r=!1;if(t.length===1){let i;for(const o of e){const l=t(o);(r?ascending$3(l,i)>0:ascending$3(l,l)===0)&&(n=o,i=l,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function quantile$1(e,t,n){if(e=Float64Array.from(numbers(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return min$2(e);if(t>=1)return max$3(e);var r,i=(r-1)*t,o=Math.floor(i),l=max$3(quickselect(e,o).subarray(0,o+1)),f=min$2(e.subarray(o+1));return l+(f-l)*(i-o)}}function quantileSorted(e,t,n=number$3){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),l=+n(e[o],o,e),f=+n(e[o+1],o+1,e);return l+(f-l)*(i-o)}}function quantileIndex(e,t,n){if(e=Float64Array.from(numbers(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return minIndex(e);if(t>=1)return maxIndex(e);var r,i=Math.floor((r-1)*t),o=(f,h)=>ascendingDefined(e[f],e[h]),l=quickselect(Uint32Array.from(e,(f,h)=>h),i,0,r-1,o);return greatest(l.subarray(0,i+1),f=>e[f])}}function thresholdFreedmanDiaconis(e,t,n){return Math.ceil((n-t)/(2*(quantile$1(e,.75)-quantile$1(e,.25))*Math.pow(count$1(e),-1/3)))}function thresholdScott(e,t,n){return Math.ceil((n-t)*Math.cbrt(count$1(e))/(3.49*deviation(e)))}function mean(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function median(e,t){return quantile$1(e,.5,t)}function medianIndex(e,t){return quantileIndex(e,.5,t)}function*flatten(e){for(const t of e)yield*t}function merge(e){return Array.from(flatten(e))}function mode(e,t){const n=new InternMap;if(t===void 0)for(let o of e)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let l of e)(l=t(l,++o,e))!=null&&l>=l&&n.set(l,(n.get(l)||0)+1)}let r,i=0;for(const[o,l]of n)l>i&&(i=l,r=o);return r}function pairs(e,t=pair){const n=[];let r,i=!1;for(const o of e)i&&n.push(t(r,o)),r=o,i=!0;return n}function pair(e,t){return[e,t]}function range$2(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function rank(e,t=ascending$3){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(e);const r=new Float64Array(n.length);t.length!==2&&(n=n.map(t),t=ascending$3);const i=(f,h)=>t(n[f],n[h]);let o,l;return Uint32Array.from(n,(f,h)=>h).sort(t===ascending$3?(f,h)=>ascendingDefined(n[f],n[h]):compareDefined(i)).forEach((f,h)=>{const d=i(f,o===void 0?f:o);d>=0?((o===void 0||d>0)&&(o=f,l=h),r[f]=l):r[f]=NaN}),r}function least(e,t=ascending$3){let n,r=!1;if(t.length===1){let i;for(const o of e){const l=t(o);(r?ascending$3(l,i)<0:ascending$3(l,l)===0)&&(n=o,i=l,r=!0)}}else for(const i of e)(r?t(i,n)<0:t(i,i)===0)&&(n=i,r=!0);return n}function leastIndex(e,t=ascending$3){if(t.length===1)return minIndex(e,t);let n,r=-1,i=-1;for(const o of e)++i,(r<0?t(o,o)===0:t(o,n)<0)&&(n=o,r=i);return r}function greatestIndex(e,t=ascending$3){if(t.length===1)return maxIndex(e,t);let n,r=-1,i=-1;for(const o of e)++i,(r<0?t(o,o)===0:t(o,n)>0)&&(n=o,r=i);return r}function scan(e,t){const n=leastIndex(e,t);return n<0?void 0:n}var shuffle$1=shuffler(Math.random);function shuffler(e){return function(n,r=0,i=n.length){let o=i-(r=+r);for(;o;){const l=e()*o--|0,f=n[o+r];n[o+r]=n[l+r],n[l+r]=f}return n}}function sum$2(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function transpose(e){if(!(o=e.length))return[];for(var t=-1,n=min$2(e,length$2),r=new Array(n);++t<n;)for(var i=-1,o,l=r[t]=new Array(o);++i<o;)l[i]=e[i][t];return r}function length$2(e){return e.length}function zip(){return transpose(arguments)}function every(e,t){if(typeof t!="function")throw new TypeError("test is not a function");let n=-1;for(const r of e)if(!t(r,++n,e))return!1;return!0}function some(e,t){if(typeof t!="function")throw new TypeError("test is not a function");let n=-1;for(const r of e)if(t(r,++n,e))return!0;return!1}function filter$1(e,t){if(typeof t!="function")throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of e)t(i,++r,e)&&n.push(i);return n}function map$1(e,t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof t!="function")throw new TypeError("mapper is not a function");return Array.from(e,(n,r)=>t(n,r,e))}function reduce(e,t,n){if(typeof t!="function")throw new TypeError("reducer is not a function");const r=e[Symbol.iterator]();let i,o,l=-1;if(arguments.length<3){if({done:i,value:n}=r.next(),i)return;++l}for(;{done:i,value:o}=r.next(),!i;)n=t(n,o,++l,e);return n}function reverse$1(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function difference(e,...t){e=new InternSet(e);for(const n of t)for(const r of n)e.delete(r);return e}function disjoint(e,t){const n=t[Symbol.iterator](),r=new InternSet;for(const i of e){if(r.has(i))return!1;let o,l;for(;({value:o,done:l}=n.next())&&!l;){if(Object.is(i,o))return!1;r.add(o)}}return!0}function intersection(e,...t){e=new InternSet(e),t=t.map(set$2);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function set$2(e){return e instanceof InternSet?e:new InternSet(e)}function superset(e,t){const n=e[Symbol.iterator](),r=new Set;for(const i of t){const o=intern(i);if(r.has(o))continue;let l,f;for(;{value:l,done:f}=n.next();){if(f)return!1;const h=intern(l);if(r.add(h),Object.is(o,h))break}}return!0}function intern(e){return e!==null&&typeof e=="object"?e.valueOf():e}function subset(e,t){return superset(t,e)}function union(...e){const t=new InternSet;for(const n of e)for(const r of n)t.add(r);return t}function identity$8(e){return e}var top=1,right=2,bottom=3,left=4,epsilon$6=1e-6;function translateX(e){return"translate("+e+",0)"}function translateY(e){return"translate(0,"+e+")"}function number$2(e){return t=>+e(t)}function center$1(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function entering(){return!this.__axis}function axis(e,t){var n=[],r=null,i=null,o=6,l=6,f=3,h=typeof window!="undefined"&&window.devicePixelRatio>1?0:.5,d=e===top||e===left?-1:1,g=e===left||e===right?"x":"y",p=e===top||e===bottom?translateX:translateY;function b($){var w=r==null?t.ticks?t.ticks.apply(t,n):t.domain():r,P=i==null?t.tickFormat?t.tickFormat.apply(t,n):identity$8:i,_=Math.max(o,0)+f,S=t.range(),N=+S[0]+h,R=+S[S.length-1]+h,T=(t.bandwidth?center$1:number$2)(t.copy(),h),I=$.selection?$.selection():$,L=I.selectAll(".domain").data([null]),H=I.selectAll(".tick").data(w,t).order(),G=H.exit(),j=H.enter().append("g").attr("class","tick"),F=H.select("line"),O=H.select("text");L=L.merge(L.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),H=H.merge(j),F=F.merge(j.append("line").attr("stroke","currentColor").attr(g+"2",d*o)),O=O.merge(j.append("text").attr("fill","currentColor").attr(g,d*_).attr("dy",e===top?"0em":e===bottom?"0.71em":"0.32em")),$!==I&&(L=L.transition($),H=H.transition($),F=F.transition($),O=O.transition($),G=G.transition($).attr("opacity",epsilon$6).attr("transform",function(Z){return isFinite(Z=T(Z))?p(Z+h):this.getAttribute("transform")}),j.attr("opacity",epsilon$6).attr("transform",function(Z){var V=this.parentNode.__axis;return p((V&&isFinite(V=V(Z))?V:T(Z))+h)})),G.remove(),L.attr("d",e===left||e===right?l?"M"+d*l+","+N+"H"+h+"V"+R+"H"+d*l:"M"+h+","+N+"V"+R:l?"M"+N+","+d*l+"V"+h+"H"+R+"V"+d*l:"M"+N+","+h+"H"+R),H.attr("opacity",1).attr("transform",function(Z){return p(T(Z)+h)}),F.attr(g+"2",d*o),O.attr(g,d*_).text(P),I.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===right?"start":e===left?"end":"middle"),I.each(function(){this.__axis=T})}return b.scale=function($){return arguments.length?(t=$,b):t},b.ticks=function(){return n=Array.from(arguments),b},b.tickArguments=function($){return arguments.length?(n=$==null?[]:Array.from($),b):n.slice()},b.tickValues=function($){return arguments.length?(r=$==null?null:Array.from($),b):r&&r.slice()},b.tickFormat=function($){return arguments.length?(i=$,b):i},b.tickSize=function($){return arguments.length?(o=l=+$,b):o},b.tickSizeInner=function($){return arguments.length?(o=+$,b):o},b.tickSizeOuter=function($){return arguments.length?(l=+$,b):l},b.tickPadding=function($){return arguments.length?(f=+$,b):f},b.offset=function($){return arguments.length?(h=+$,b):h},b}function axisTop(e){return axis(top,e)}function axisRight(e){return axis(right,e)}function axisBottom(e){return axis(bottom,e)}function axisLeft(e){return axis(left,e)}var noop$3={value:()=>{}};function dispatch(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Dispatch(n)}function Dispatch(e){this._=e}function parseTypenames$1(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(e,t){var n=this._,r=parseTypenames$1(e+"",n),i,o=-1,l=r.length;if(arguments.length<2){for(;++o<l;)if((i=(e=r[o]).type)&&(i=get$1(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<l;)if(i=(e=r[o]).type)n[i]=set$1(n[i],e.name,t);else if(t==null)for(i in n)n[i]=set$1(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Dispatch(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function get$1(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function set$1(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=noop$3,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var xhtml="http://www.w3.org/1999/xhtml",namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),namespaces.hasOwnProperty(t)?{space:namespaces[t],local:e}:e}function creatorInherit(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===xhtml&&t.documentElement.namespaceURI===xhtml?t.createElement(e):t.createElementNS(n,e)}}function creatorFixed(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function creator(e){var t=namespace(e);return(t.local?creatorFixed:creatorInherit)(t)}function none$2(){}function selector(e){return e==null?none$2:function(){return this.querySelector(e)}}function selection_select(e){typeof e!="function"&&(e=selector(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,f=r[i]=new Array(l),h,d,g=0;g<l;++g)(h=o[g])&&(d=e.call(h,h.__data__,g,o))&&("__data__"in h&&(d.__data__=h.__data__),f[g]=d);return new Selection$1(r,this._parents)}function array$4(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function empty$1(){return[]}function selectorAll(e){return e==null?empty$1:function(){return this.querySelectorAll(e)}}function arrayAll(e){return function(){return array$4(e.apply(this,arguments))}}function selection_selectAll(e){typeof e=="function"?e=arrayAll(e):e=selectorAll(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var l=t[o],f=l.length,h,d=0;d<f;++d)(h=l[d])&&(r.push(e.call(h,h.__data__,d,l)),i.push(h));return new Selection$1(r,i)}function matcher(e){return function(){return this.matches(e)}}function childMatcher(e){return function(t){return t.matches(e)}}var find$1=Array.prototype.find;function childFind(e){return function(){return find$1.call(this.children,e)}}function childFirst(){return this.firstElementChild}function selection_selectChild(e){return this.select(e==null?childFirst:childFind(typeof e=="function"?e:childMatcher(e)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(e){return function(){return filter.call(this.children,e)}}function selection_selectChildren(e){return this.selectAll(e==null?children:childrenFilter(typeof e=="function"?e:childMatcher(e)))}function selection_filter(e){typeof e!="function"&&(e=matcher(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,f=r[i]=[],h,d=0;d<l;++d)(h=o[d])&&e.call(h,h.__data__,d,o)&&f.push(h);return new Selection$1(r,this._parents)}function sparse(e){return new Array(e.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}EnterNode.prototype={constructor:EnterNode,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function constant$a(e){return function(){return e}}function bindIndex(e,t,n,r,i,o){for(var l=0,f,h=t.length,d=o.length;l<d;++l)(f=t[l])?(f.__data__=o[l],r[l]=f):n[l]=new EnterNode(e,o[l]);for(;l<h;++l)(f=t[l])&&(i[l]=f)}function bindKey(e,t,n,r,i,o,l){var f,h,d=new Map,g=t.length,p=o.length,b=new Array(g),$;for(f=0;f<g;++f)(h=t[f])&&(b[f]=$=l.call(h,h.__data__,f,t)+"",d.has($)?i[f]=h:d.set($,h));for(f=0;f<p;++f)$=l.call(e,o[f],f,o)+"",(h=d.get($))?(r[f]=h,h.__data__=o[f],d.delete($)):n[f]=new EnterNode(e,o[f]);for(f=0;f<g;++f)(h=t[f])&&d.get(b[f])===h&&(i[f]=h)}function datum(e){return e.__data__}function selection_data(e,t){if(!arguments.length)return Array.from(this,datum);var n=t?bindKey:bindIndex,r=this._parents,i=this._groups;typeof e!="function"&&(e=constant$a(e));for(var o=i.length,l=new Array(o),f=new Array(o),h=new Array(o),d=0;d<o;++d){var g=r[d],p=i[d],b=p.length,$=arraylike(e.call(g,g&&g.__data__,d,r)),w=$.length,P=f[d]=new Array(w),_=l[d]=new Array(w),S=h[d]=new Array(b);n(g,p,P,_,S,$,t);for(var N=0,R=0,T,I;N<w;++N)if(T=P[N]){for(N>=R&&(R=N+1);!(I=_[R])&&++R<w;);T._next=I||null}}return l=new Selection$1(l,r),l._enter=f,l._exit=h,l}function arraylike(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function selection_merge(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,l=Math.min(i,o),f=new Array(i),h=0;h<l;++h)for(var d=n[h],g=r[h],p=d.length,b=f[h]=new Array(p),$,w=0;w<p;++w)($=d[w]||g[w])&&(b[w]=$);for(;h<i;++h)f[h]=n[h];return new Selection$1(f,this._parents)}function selection_order(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],l;--i>=0;)(l=r[i])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function selection_sort(e){e||(e=ascending$2);function t(p,b){return p&&b?e(p.__data__,b.__data__):!p-!b}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var l=n[o],f=l.length,h=i[o]=new Array(f),d,g=0;g<f;++g)(d=l[g])&&(h[g]=d);h.sort(t)}return new Selection$1(i,this._parents).order()}function ascending$2(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function selection_call(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var l=r[i];if(l)return l}return null}function selection_size(){let e=0;for(const t of this)++e;return e}function selection_empty(){return!this.node()}function selection_each(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,l=i.length,f;o<l;++o)(f=i[o])&&e.call(f,f.__data__,o,i);return this}function attrRemove$1(e){return function(){this.removeAttribute(e)}}function attrRemoveNS$1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function attrConstant$1(e,t){return function(){this.setAttribute(e,t)}}function attrConstantNS$1(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function attrFunction$1(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function attrFunctionNS$1(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function selection_attr(e,t){var n=namespace(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?attrRemoveNS$1:attrRemove$1:typeof t=="function"?n.local?attrFunctionNS$1:attrFunction$1:n.local?attrConstantNS$1:attrConstant$1)(n,t))}function defaultView(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function styleRemove$1(e){return function(){this.style.removeProperty(e)}}function styleConstant$1(e,t,n){return function(){this.style.setProperty(e,t,n)}}function styleFunction$1(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function selection_style(e,t,n){return arguments.length>1?this.each((t==null?styleRemove$1:typeof t=="function"?styleFunction$1:styleConstant$1)(e,t,n==null?"":n)):styleValue(this.node(),e)}function styleValue(e,t){return e.style.getPropertyValue(t)||defaultView(e).getComputedStyle(e,null).getPropertyValue(t)}function propertyRemove(e){return function(){delete this[e]}}function propertyConstant(e,t){return function(){this[e]=t}}function propertyFunction(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function selection_property(e,t){return arguments.length>1?this.each((t==null?propertyRemove:typeof t=="function"?propertyFunction:propertyConstant)(e,t)):this.node()[e]}function classArray(e){return e.trim().split(/^|\s+/)}function classList(e){return e.classList||new ClassList(e)}function ClassList(e){this._node=e,this._names=classArray(e.getAttribute("class")||"")}ClassList.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function classedAdd(e,t){for(var n=classList(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function classedRemove(e,t){for(var n=classList(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function classedTrue(e){return function(){classedAdd(this,e)}}function classedFalse(e){return function(){classedRemove(this,e)}}function classedFunction(e,t){return function(){(t.apply(this,arguments)?classedAdd:classedRemove)(this,e)}}function selection_classed(e,t){var n=classArray(e+"");if(arguments.length<2){for(var r=classList(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?classedFunction:t?classedTrue:classedFalse)(n,t))}function textRemove(){this.textContent=""}function textConstant$1(e){return function(){this.textContent=e}}function textFunction$1(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function selection_text(e){return arguments.length?this.each(e==null?textRemove:(typeof e=="function"?textFunction$1:textConstant$1)(e)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(e){return function(){this.innerHTML=e}}function htmlFunction(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function selection_html(e){return arguments.length?this.each(e==null?htmlRemove:(typeof e=="function"?htmlFunction:htmlConstant)(e)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(e){var t=typeof e=="function"?e:creator(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function constantNull(){return null}function selection_insert(e,t){var n=typeof e=="function"?e:creator(e),r=t==null?constantNull:typeof t=="function"?t:selector(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function remove(){var e=this.parentNode;e&&e.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function selection_cloneDeep(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function selection_clone(e){return this.select(e?selection_cloneDeep:selection_cloneShallow)}function selection_datum(e){return arguments.length?this.property("__data__",e):this.node().__data__}function contextListener(e){return function(t){e.call(this,t,this.__data__)}}function parseTypenames(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function onRemove(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function onAdd(e,t,n){return function(){var r=this.__on,i,o=contextListener(t);if(r){for(var l=0,f=r.length;l<f;++l)if((i=r[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function selection_on(e,t,n){var r=parseTypenames(e+""),i,o=r.length,l;if(arguments.length<2){var f=this.node().__on;if(f){for(var h=0,d=f.length,g;h<d;++h)for(i=0,g=f[h];i<o;++i)if((l=r[i]).type===g.type&&l.name===g.name)return g.value}return}for(f=t?onAdd:onRemove,i=0;i<o;++i)this.each(f(r[i],t,n));return this}function dispatchEvent(e,t,n){var r=defaultView(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function dispatchConstant(e,t){return function(){return dispatchEvent(this,e,t)}}function dispatchFunction(e,t){return function(){return dispatchEvent(this,e,t.apply(this,arguments))}}function selection_dispatch(e,t){return this.each((typeof t=="function"?dispatchFunction:dispatchConstant)(e,t))}function*selection_iterator(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,l;i<o;++i)(l=r[i])&&(yield l)}var root$1=[null];function Selection$1(e,t){this._groups=e,this._parents=t}function selection(){return new Selection$1([[document.documentElement]],root$1)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(e){return typeof e=="string"?new Selection$1([[document.querySelector(e)]],[document.documentElement]):new Selection$1([[e]],root$1)}function create$1(e){return select(creator(e).call(document.documentElement))}var nextId=0;function local$1(){return new Local}function Local(){this._="@"+(++nextId).toString(36)}Local.prototype=local$1.prototype={constructor:Local,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};function sourceEvent(e){let t;for(;t=e.sourceEvent;)e=t;return e}function pointer(e,t){if(e=sourceEvent(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function pointers(e,t){return e.target&&(e=sourceEvent(e),t===void 0&&(t=e.currentTarget),e=e.touches||[e]),Array.from(e,n=>pointer(n,t))}function selectAll(e){return typeof e=="string"?new Selection$1([document.querySelectorAll(e)],[document.documentElement]):new Selection$1([array$4(e)],root$1)}const nonpassive={passive:!1},nonpassivecapture={capture:!0,passive:!1};function nopropagation$2(e){e.stopImmediatePropagation()}function noevent$2(e){e.preventDefault(),e.stopImmediatePropagation()}function dragDisable(e){var t=e.document.documentElement,n=select(e).on("dragstart.drag",noevent$2,nonpassivecapture);"onselectstart"in t?n.on("selectstart.drag",noevent$2,nonpassivecapture):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function yesdrag(e,t){var n=e.document.documentElement,r=select(e).on("dragstart.drag",null);t&&(r.on("click.drag",noevent$2,nonpassivecapture),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var constant$9=e=>()=>e;function DragEvent(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:l,y:f,dx:h,dy:d,dispatch:g}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:g}})}DragEvent.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function defaultFilter$2(e){return!e.ctrlKey&&!e.button}function defaultContainer(){return this.parentNode}function defaultSubject(e,t){return t==null?{x:e.x,y:e.y}:t}function defaultTouchable$2(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var e=defaultFilter$2,t=defaultContainer,n=defaultSubject,r=defaultTouchable$2,i={},o=dispatch("start","drag","end"),l=0,f,h,d,g,p=0;function b(T){T.on("mousedown.drag",$).filter(r).on("touchstart.drag",_).on("touchmove.drag",S,nonpassive).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function $(T,I){if(!(g||!e.call(this,T,I))){var L=R(this,t.call(this,T,I),T,I,"mouse");!L||(select(T.view).on("mousemove.drag",w,nonpassivecapture).on("mouseup.drag",P,nonpassivecapture),dragDisable(T.view),nopropagation$2(T),d=!1,f=T.clientX,h=T.clientY,L("start",T))}}function w(T){if(noevent$2(T),!d){var I=T.clientX-f,L=T.clientY-h;d=I*I+L*L>p}i.mouse("drag",T)}function P(T){select(T.view).on("mousemove.drag mouseup.drag",null),yesdrag(T.view,d),noevent$2(T),i.mouse("end",T)}function _(T,I){if(!!e.call(this,T,I)){var L=T.changedTouches,H=t.call(this,T,I),G=L.length,j,F;for(j=0;j<G;++j)(F=R(this,H,T,I,L[j].identifier,L[j]))&&(nopropagation$2(T),F("start",T,L[j]))}}function S(T){var I=T.changedTouches,L=I.length,H,G;for(H=0;H<L;++H)(G=i[I[H].identifier])&&(noevent$2(T),G("drag",T,I[H]))}function N(T){var I=T.changedTouches,L=I.length,H,G;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),H=0;H<L;++H)(G=i[I[H].identifier])&&(nopropagation$2(T),G("end",T,I[H]))}function R(T,I,L,H,G,j){var F=o.copy(),O=pointer(j||L,I),Z,V,q;if((q=n.call(T,new DragEvent("beforestart",{sourceEvent:L,target:b,identifier:G,active:l,x:O[0],y:O[1],dx:0,dy:0,dispatch:F}),H))!=null)return Z=q.x-O[0]||0,V=q.y-O[1]||0,function z(U,W,Q){var J=O,te;switch(U){case"start":i[G]=z,te=l++;break;case"end":delete i[G],--l;case"drag":O=pointer(Q||W,I),te=l;break}F.call(U,T,new DragEvent(U,{sourceEvent:W,subject:q,target:b,identifier:G,active:te,x:O[0]+Z,y:O[1]+V,dx:O[0]-J[0],dy:O[1]-J[1],dispatch:F}),H)}}return b.filter=function(T){return arguments.length?(e=typeof T=="function"?T:constant$9(!!T),b):e},b.container=function(T){return arguments.length?(t=typeof T=="function"?T:constant$9(T),b):t},b.subject=function(T){return arguments.length?(n=typeof T=="function"?T:constant$9(T),b):n},b.touchable=function(T){return arguments.length?(r=typeof T=="function"?T:constant$9(!!T),b):r},b.on=function(){var T=o.on.apply(o,arguments);return T===o?b:T},b.clickDistance=function(T){return arguments.length?(p=(T=+T)*T,b):Math.sqrt(p)},b}function define(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function extend(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=reHex.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?rgbn(t):n===3?new Rgb(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?rgba(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?rgba(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=reRgbInteger.exec(e))?new Rgb(t[1],t[2],t[3],1):(t=reRgbPercent.exec(e))?new Rgb(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=reRgbaInteger.exec(e))?rgba(t[1],t[2],t[3],t[4]):(t=reRgbaPercent.exec(e))?rgba(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=reHslPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,t[4]):named.hasOwnProperty(e)?rgbn(named[e]):e==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,e&255,1)}function rgba(e,t,n,r){return r<=0&&(e=t=n=NaN),new Rgb(e,t,n,r)}function rgbConvert(e){return e instanceof Color||(e=color(e)),e?(e=e.rgb(),new Rgb(e.r,e.g,e.b,e.opacity)):new Rgb}function rgb(e,t,n,r){return arguments.length===1?rgbConvert(e):new Rgb(e,t,n,r==null?1:r)}function Rgb(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}define(Rgb,rgb,extend(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const e=clampa(this.opacity);return`${e===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${e===1?")":`, ${e})`}`}function clampa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function clampi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hex(e){return e=clampi(e),(e<16?"0":"")+e.toString(16)}function hsla(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hsl(e,t,n,r)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color||(e=color(e)),!e)return new Hsl;if(e instanceof Hsl)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),l=NaN,f=o-i,h=(o+i)/2;return f?(t===o?l=(n-r)/f+(n<r)*6:n===o?l=(r-t)/f+2:l=(t-n)/f+4,f/=h<.5?o+i:2-o-i,l*=60):f=h>0&&h<1?0:l,new Hsl(l,f,h,e.opacity)}function hsl$2(e,t,n,r){return arguments.length===1?hslConvert(e):new Hsl(e,t,n,r==null?1:r)}function Hsl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}define(Hsl,hsl$2,extend(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Rgb(hsl2rgb(e>=240?e-240:e+120,i,r),hsl2rgb(e,i,r),hsl2rgb(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=clampa(this.opacity);return`${e===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function clamph(e){return e=(e||0)%360,e<0?e+360:e}function clampt(e){return Math.max(0,Math.min(1,e||0))}function hsl2rgb(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const radians$1=Math.PI/180,degrees$2=180/Math.PI,K=18,Xn=.96422,Yn=1,Zn=.82521,t0$1=4/29,t1$1=6/29,t2=3*t1$1*t1$1,t3=t1$1*t1$1*t1$1;function labConvert(e){if(e instanceof Lab)return new Lab(e.l,e.a,e.b,e.opacity);if(e instanceof Hcl)return hcl2lab(e);e instanceof Rgb||(e=rgbConvert(e));var t=rgb2lrgb(e.r),n=rgb2lrgb(e.g),r=rgb2lrgb(e.b),i=xyz2lab((.2225045*t+.7168786*n+.0606169*r)/Yn),o,l;return t===n&&n===r?o=l=i:(o=xyz2lab((.4360747*t+.3850649*n+.1430804*r)/Xn),l=xyz2lab((.0139322*t+.0971045*n+.7141733*r)/Zn)),new Lab(116*i-16,500*(o-i),200*(i-l),e.opacity)}function gray(e,t){return new Lab(e,0,0,t==null?1:t)}function lab$1(e,t,n,r){return arguments.length===1?labConvert(e):new Lab(e,t,n,r==null?1:r)}function Lab(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}define(Lab,lab$1,extend(Color,{brighter(e){return new Lab(this.l+K*(e==null?1:e),this.a,this.b,this.opacity)},darker(e){return new Lab(this.l-K*(e==null?1:e),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Xn*lab2xyz(t),e=Yn*lab2xyz(e),n=Zn*lab2xyz(n),new Rgb(lrgb2rgb(3.1338561*t-1.6168667*e-.4906146*n),lrgb2rgb(-.9787684*t+1.9161415*e+.033454*n),lrgb2rgb(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function xyz2lab(e){return e>t3?Math.pow(e,1/3):e/t2+t0$1}function lab2xyz(e){return e>t1$1?e*e*e:t2*(e-t0$1)}function lrgb2rgb(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function rgb2lrgb(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function hclConvert(e){if(e instanceof Hcl)return new Hcl(e.h,e.c,e.l,e.opacity);if(e instanceof Lab||(e=labConvert(e)),e.a===0&&e.b===0)return new Hcl(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*degrees$2;return new Hcl(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function lch(e,t,n,r){return arguments.length===1?hclConvert(e):new Hcl(n,t,e,r==null?1:r)}function hcl$2(e,t,n,r){return arguments.length===1?hclConvert(e):new Hcl(e,t,n,r==null?1:r)}function Hcl(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function hcl2lab(e){if(isNaN(e.h))return new Lab(e.l,0,0,e.opacity);var t=e.h*radians$1;return new Lab(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}define(Hcl,hcl$2,extend(Color,{brighter(e){return new Hcl(this.h,this.c,this.l+K*(e==null?1:e),this.opacity)},darker(e){return new Hcl(this.h,this.c,this.l-K*(e==null?1:e),this.opacity)},rgb(){return hcl2lab(this).rgb()}}));var A=-.14861,B$1=1.78277,C=-.29227,D$1=-.90649,E=1.97294,ED=E*D$1,EB=E*B$1,BC_DA=B$1*C-D$1*A;function cubehelixConvert(e){if(e instanceof Cubehelix)return new Cubehelix(e.h,e.s,e.l,e.opacity);e instanceof Rgb||(e=rgbConvert(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(BC_DA*r+ED*t-EB*n)/(BC_DA+ED-EB),o=r-i,l=(E*(n-i)-C*o)/D$1,f=Math.sqrt(l*l+o*o)/(E*i*(1-i)),h=f?Math.atan2(l,o)*degrees$2-120:NaN;return new Cubehelix(h<0?h+360:h,f,i,e.opacity)}function cubehelix$3(e,t,n,r){return arguments.length===1?cubehelixConvert(e):new Cubehelix(e,t,n,r==null?1:r)}function Cubehelix(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}define(Cubehelix,cubehelix$3,extend(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Cubehelix(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Cubehelix(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*radians$1,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Rgb(255*(t+n*(A*r+B$1*i)),255*(t+n*(C*r+D$1*i)),255*(t+n*(E*r)),this.opacity)}}));function basis$1(e,t,n,r,i){var o=e*e,l=o*e;return((1-3*e+3*o-l)*t+(4-6*o+3*l)*n+(1+3*e+3*o-3*l)*r+l*i)/6}function basis$2(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],l=r>0?e[r-1]:2*i-o,f=r<t-1?e[r+2]:2*o-i;return basis$1((n-r/t)*t,l,i,o,f)}}function basisClosed$1(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],l=e[(r+1)%t],f=e[(r+2)%t];return basis$1((n-r/t)*t,i,o,l,f)}}var constant$8=e=>()=>e;function linear$2(e,t){return function(n){return e+n*t}}function exponential$1(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function hue$1(e,t){var n=t-e;return n?linear$2(e,n>180||n<-180?n-360*Math.round(n/360):n):constant$8(isNaN(e)?t:e)}function gamma$1(e){return(e=+e)==1?nogamma:function(t,n){return n-t?exponential$1(t,n,e):constant$8(isNaN(t)?n:t)}}function nogamma(e,t){var n=t-e;return n?linear$2(e,n):constant$8(isNaN(e)?t:e)}var interpolateRgb=function e(t){var n=gamma$1(t);function r(i,o){var l=n((i=rgb(i)).r,(o=rgb(o)).r),f=n(i.g,o.g),h=n(i.b,o.b),d=nogamma(i.opacity,o.opacity);return function(g){return i.r=l(g),i.g=f(g),i.b=h(g),i.opacity=d(g),i+""}}return r.gamma=e,r}(1);function rgbSpline(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),l,f;for(l=0;l<n;++l)f=rgb(t[l]),r[l]=f.r||0,i[l]=f.g||0,o[l]=f.b||0;return r=e(r),i=e(i),o=e(o),f.opacity=1,function(h){return f.r=r(h),f.g=i(h),f.b=o(h),f+""}}}var rgbBasis=rgbSpline(basis$2),rgbBasisClosed=rgbSpline(basisClosed$1);function numberArray(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function isNumberArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function array$3(e,t){return(isNumberArray(t)?numberArray:genericArray)(e,t)}function genericArray(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),l;for(l=0;l<r;++l)i[l]=interpolate$2(e[l],t[l]);for(;l<n;++l)o[l]=t[l];return function(f){for(l=0;l<r;++l)o[l]=i[l](f);return o}}function date$2(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function interpolateNumber(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function object$1(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=interpolate$2(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(e){return function(){return e}}function one(e){return function(t){return e(t)+""}}function interpolateString(e,t){var n=reA.lastIndex=reB.lastIndex=0,r,i,o,l=-1,f=[],h=[];for(e=e+"",t=t+"";(r=reA.exec(e))&&(i=reB.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),f[l]?f[l]+=o:f[++l]=o),(r=r[0])===(i=i[0])?f[l]?f[l]+=i:f[++l]=i:(f[++l]=null,h.push({i:l,x:interpolateNumber(r,i)})),n=reB.lastIndex;return n<t.length&&(o=t.slice(n),f[l]?f[l]+=o:f[++l]=o),f.length<2?h[0]?one(h[0].x):zero(t):(t=h.length,function(d){for(var g=0,p;g<t;++g)f[(p=h[g]).i]=p.x(d);return f.join("")})}function interpolate$2(e,t){var n=typeof t,r;return t==null||n==="boolean"?constant$8(t):(n==="number"?interpolateNumber:n==="string"?(r=color(t))?(t=r,interpolateRgb):interpolateString:t instanceof color?interpolateRgb:t instanceof Date?date$2:isNumberArray(t)?numberArray:Array.isArray(t)?genericArray:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?object$1:interpolateNumber)(e,t)}function discrete(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function hue(e,t){var n=hue$1(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function interpolateRound(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var degrees$1=180/Math.PI,identity$7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(e,t,n,r,i,o){var l,f,h;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(h=e*n+t*r)&&(n-=e*h,r-=t*h),(f=Math.sqrt(n*n+r*r))&&(n/=f,r/=f,h/=f),e*r<t*n&&(e=-e,t=-t,h=-h,l=-l),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*degrees$1,skewX:Math.atan(h)*degrees$1,scaleX:l,scaleY:f}}var svgNode;function parseCss(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?identity$7:decompose(t.a,t.b,t.c,t.d,t.e,t.f)}function parseSvg(e){return e==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",e),!(e=svgNode.transform.baseVal.consolidate()))?identity$7:(e=e.matrix,decompose(e.a,e.b,e.c,e.d,e.e,e.f))}function interpolateTransform(e,t,n,r){function i(d){return d.length?d.pop()+" ":""}function o(d,g,p,b,$,w){if(d!==p||g!==b){var P=$.push("translate(",null,t,null,n);w.push({i:P-4,x:interpolateNumber(d,p)},{i:P-2,x:interpolateNumber(g,b)})}else(p||b)&&$.push("translate("+p+t+b+n)}function l(d,g,p,b){d!==g?(d-g>180?g+=360:g-d>180&&(d+=360),b.push({i:p.push(i(p)+"rotate(",null,r)-2,x:interpolateNumber(d,g)})):g&&p.push(i(p)+"rotate("+g+r)}function f(d,g,p,b){d!==g?b.push({i:p.push(i(p)+"skewX(",null,r)-2,x:interpolateNumber(d,g)}):g&&p.push(i(p)+"skewX("+g+r)}function h(d,g,p,b,$,w){if(d!==p||g!==b){var P=$.push(i($)+"scale(",null,",",null,")");w.push({i:P-4,x:interpolateNumber(d,p)},{i:P-2,x:interpolateNumber(g,b)})}else(p!==1||b!==1)&&$.push(i($)+"scale("+p+","+b+")")}return function(d,g){var p=[],b=[];return d=e(d),g=e(g),o(d.translateX,d.translateY,g.translateX,g.translateY,p,b),l(d.rotate,g.rotate,p,b),f(d.skewX,g.skewX,p,b),h(d.scaleX,d.scaleY,g.scaleX,g.scaleY,p,b),d=g=null,function($){for(var w=-1,P=b.length,_;++w<P;)p[(_=b[w]).i]=_.x($);return p.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),epsilon2$1=1e-12;function cosh(e){return((e=Math.exp(e))+1/e)/2}function sinh(e){return((e=Math.exp(e))-1/e)/2}function tanh(e){return((e=Math.exp(2*e))-1)/(e+1)}var interpolateZoom=function e(t,n,r){function i(o,l){var f=o[0],h=o[1],d=o[2],g=l[0],p=l[1],b=l[2],$=g-f,w=p-h,P=$*$+w*w,_,S;if(P<epsilon2$1)S=Math.log(b/d)/t,_=function(H){return[f+H*$,h+H*w,d*Math.exp(t*H*S)]};else{var N=Math.sqrt(P),R=(b*b-d*d+r*P)/(2*d*n*N),T=(b*b-d*d-r*P)/(2*b*n*N),I=Math.log(Math.sqrt(R*R+1)-R),L=Math.log(Math.sqrt(T*T+1)-T);S=(L-I)/t,_=function(H){var G=H*S,j=cosh(I),F=d/(n*N)*(j*tanh(t*G+I)-sinh(I));return[f+F*$,h+F*w,d*j/cosh(t*G+I)]}}return _.duration=S*1e3*t/Math.SQRT2,_}return i.rho=function(o){var l=Math.max(.001,+o),f=l*l,h=f*f;return e(l,f,h)},i}(Math.SQRT2,2,4);function hsl(e){return function(t,n){var r=e((t=hsl$2(t)).h,(n=hsl$2(n)).h),i=nogamma(t.s,n.s),o=nogamma(t.l,n.l),l=nogamma(t.opacity,n.opacity);return function(f){return t.h=r(f),t.s=i(f),t.l=o(f),t.opacity=l(f),t+""}}}var hsl$1=hsl(hue$1),hslLong=hsl(nogamma);function lab(e,t){var n=nogamma((e=lab$1(e)).l,(t=lab$1(t)).l),r=nogamma(e.a,t.a),i=nogamma(e.b,t.b),o=nogamma(e.opacity,t.opacity);return function(l){return e.l=n(l),e.a=r(l),e.b=i(l),e.opacity=o(l),e+""}}function hcl(e){return function(t,n){var r=e((t=hcl$2(t)).h,(n=hcl$2(n)).h),i=nogamma(t.c,n.c),o=nogamma(t.l,n.l),l=nogamma(t.opacity,n.opacity);return function(f){return t.h=r(f),t.c=i(f),t.l=o(f),t.opacity=l(f),t+""}}}var hcl$1=hcl(hue$1),hclLong=hcl(nogamma);function cubehelix$1(e){return function t(n){n=+n;function r(i,o){var l=e((i=cubehelix$3(i)).h,(o=cubehelix$3(o)).h),f=nogamma(i.s,o.s),h=nogamma(i.l,o.l),d=nogamma(i.opacity,o.opacity);return function(g){return i.h=l(g),i.s=f(g),i.l=h(Math.pow(g,n)),i.opacity=d(g),i+""}}return r.gamma=t,r}(1)}var cubehelix$2=cubehelix$1(hue$1),cubehelixLong=cubehelix$1(nogamma);function piecewise(e,t){t===void 0&&(t=e,e=interpolate$2);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(l){var f=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return o[f](l-f)}}function quantize$1(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var frame=0,timeout$1=0,interval$1=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?now():+n)+(t==null?0:+t),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=e,this._time=n,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(e,t,n){var r=new Timer;return r.restart(e,t,n),r}function timerFlush(){now(),++frame;for(var e=taskHead,t;e;)(t=clockNow-e._time)>=0&&e._call.call(void 0,t),e=e._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var e=clock.now(),t=e-clockLast;t>pokeDelay&&(clockSkew-=t,clockLast=e)}function nap(){for(var e,t=taskHead,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:taskHead=n);taskTail=e,sleep(r)}function sleep(e){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var t=e-clockNow;t>24?(e<1/0&&(timeout$1=setTimeout(wake,e-clock.now()-clockSkew)),interval$1&&(interval$1=clearInterval(interval$1))):(interval$1||(clockLast=clock.now(),interval$1=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(e,t,n){var r=new Timer;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function interval(e,t,n){var r=new Timer,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,l,f){l=+l,f=f==null?now():+f,r._restart(function h(d){d+=i,r._restart(h,i+=l,f),o(d)},l,f)},r.restart(e,t,n),r)}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(e,t,n,r,i,o){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;create(e,n,{name:t,index:r,group:i,on:emptyOn,tween:emptyTween,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:CREATED})}function init(e,t){var n=get(e,t);if(n.state>CREATED)throw new Error("too late; already scheduled");return n}function set(e,t){var n=get(e,t);if(n.state>STARTED)throw new Error("too late; already running");return n}function get(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function create(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=timer(o,0,n.time);function o(d){n.state=SCHEDULED,n.timer.restart(l,n.delay,n.time),n.delay<=d&&l(d-n.delay)}function l(d){var g,p,b,$;if(n.state!==SCHEDULED)return h();for(g in r)if($=r[g],$.name===n.name){if($.state===STARTED)return timeout(l);$.state===RUNNING?($.state=ENDED,$.timer.stop(),$.on.call("interrupt",e,e.__data__,$.index,$.group),delete r[g]):+g<t&&($.state=ENDED,$.timer.stop(),$.on.call("cancel",e,e.__data__,$.index,$.group),delete r[g])}if(timeout(function(){n.state===STARTED&&(n.state=RUNNING,n.timer.restart(f,n.delay,n.time),f(d))}),n.state=STARTING,n.on.call("start",e,e.__data__,n.index,n.group),n.state===STARTING){for(n.state=STARTED,i=new Array(b=n.tween.length),g=0,p=-1;g<b;++g)($=n.tween[g].value.call(e,e.__data__,n.index,n.group))&&(i[++p]=$);i.length=p+1}}function f(d){for(var g=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(h),n.state=ENDING,1),p=-1,b=i.length;++p<b;)i[p].call(e,g);n.state===ENDING&&(n.on.call("end",e,e.__data__,n.index,n.group),h())}function h(){n.state=ENDED,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function interrupt(e,t){var n=e.__transition,r,i,o=!0,l;if(!!n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){o=!1;continue}i=r.state>STARTING&&r.state<ENDING,r.state=ENDED,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}o&&delete e.__transition}}function selection_interrupt(e){return this.each(function(){interrupt(this,e)})}function tweenRemove(e,t){var n,r;return function(){var i=set(this,e),o=i.tween;if(o!==n){r=n=o;for(var l=0,f=r.length;l<f;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function tweenFunction(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=set(this,e),l=o.tween;if(l!==r){i=(r=l).slice();for(var f={name:t,value:n},h=0,d=i.length;h<d;++h)if(i[h].name===t){i[h]=f;break}h===d&&i.push(f)}o.tween=i}}function transition_tween(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=get(this.node(),n).tween,i=0,o=r.length,l;i<o;++i)if((l=r[i]).name===e)return l.value;return null}return this.each((t==null?tweenRemove:tweenFunction)(n,e,t))}function tweenValue(e,t,n){var r=e._id;return e.each(function(){var i=set(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return get(i,r).value[t]}}function interpolate$1(e,t){var n;return(typeof t=="number"?interpolateNumber:t instanceof color?interpolateRgb:(n=color(t))?(t=n,interpolateRgb):interpolateString)(e,t)}function attrRemove(e){return function(){this.removeAttribute(e)}}function attrRemoveNS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function attrConstant(e,t,n){var r,i=n+"",o;return function(){var l=this.getAttribute(e);return l===i?null:l===r?o:o=t(r=l,n)}}function attrConstantNS(e,t,n){var r,i=n+"",o;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===r?o:o=t(r=l,n)}}function attrFunction(e,t,n){var r,i,o;return function(){var l,f=n(this),h;return f==null?void this.removeAttribute(e):(l=this.getAttribute(e),h=f+"",l===h?null:l===r&&h===i?o:(i=h,o=t(r=l,f)))}}function attrFunctionNS(e,t,n){var r,i,o;return function(){var l,f=n(this),h;return f==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),h=f+"",l===h?null:l===r&&h===i?o:(i=h,o=t(r=l,f)))}}function transition_attr(e,t){var n=namespace(e),r=n==="transform"?interpolateTransformSvg:interpolate$1;return this.attrTween(e,typeof t=="function"?(n.local?attrFunctionNS:attrFunction)(n,r,tweenValue(this,"attr."+e,t)):t==null?(n.local?attrRemoveNS:attrRemove)(n):(n.local?attrConstantNS:attrConstant)(n,r,t))}function attrInterpolate(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function attrInterpolateNS(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function attrTweenNS(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&attrInterpolateNS(e,o)),n}return i._value=t,i}function attrTween(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&attrInterpolate(e,o)),n}return i._value=t,i}function transition_attrTween(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=namespace(e);return this.tween(n,(r.local?attrTweenNS:attrTween)(r,t))}function delayFunction(e,t){return function(){init(this,e).delay=+t.apply(this,arguments)}}function delayConstant(e,t){return t=+t,function(){init(this,e).delay=t}}function transition_delay(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?delayFunction:delayConstant)(t,e)):get(this.node(),t).delay}function durationFunction(e,t){return function(){set(this,e).duration=+t.apply(this,arguments)}}function durationConstant(e,t){return t=+t,function(){set(this,e).duration=t}}function transition_duration(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?durationFunction:durationConstant)(t,e)):get(this.node(),t).duration}function easeConstant(e,t){if(typeof t!="function")throw new Error;return function(){set(this,e).ease=t}}function transition_ease(e){var t=this._id;return arguments.length?this.each(easeConstant(t,e)):get(this.node(),t).ease}function easeVarying(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;set(this,e).ease=n}}function transition_easeVarying(e){if(typeof e!="function")throw new Error;return this.each(easeVarying(this._id,e))}function transition_filter(e){typeof e!="function"&&(e=matcher(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,f=r[i]=[],h,d=0;d<l;++d)(h=o[d])&&e.call(h,h.__data__,d,o)&&f.push(h);return new Transition(r,this._parents,this._name,this._id)}function transition_merge(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),l=new Array(r),f=0;f<o;++f)for(var h=t[f],d=n[f],g=h.length,p=l[f]=new Array(g),b,$=0;$<g;++$)(b=h[$]||d[$])&&(p[$]=b);for(;f<r;++f)l[f]=t[f];return new Transition(l,this._parents,this._name,this._id)}function start(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function onFunction(e,t,n){var r,i,o=start(t)?init:set;return function(){var l=o(this,e),f=l.on;f!==r&&(i=(r=f).copy()).on(t,n),l.on=i}}function transition_on(e,t){var n=this._id;return arguments.length<2?get(this.node(),n).on.on(e):this.each(onFunction(n,e,t))}function removeFunction(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(e){var t=this._name,n=this._id;typeof e!="function"&&(e=selector(e));for(var r=this._groups,i=r.length,o=new Array(i),l=0;l<i;++l)for(var f=r[l],h=f.length,d=o[l]=new Array(h),g,p,b=0;b<h;++b)(g=f[b])&&(p=e.call(g,g.__data__,b,f))&&("__data__"in g&&(p.__data__=g.__data__),d[b]=p,schedule(d[b],t,n,b,d,get(g,n)));return new Transition(o,this._parents,t,n)}function transition_selectAll(e){var t=this._name,n=this._id;typeof e!="function"&&(e=selectorAll(e));for(var r=this._groups,i=r.length,o=[],l=[],f=0;f<i;++f)for(var h=r[f],d=h.length,g,p=0;p<d;++p)if(g=h[p]){for(var b=e.call(g,g.__data__,p,h),$,w=get(g,n),P=0,_=b.length;P<_;++P)($=b[P])&&schedule($,t,n,P,b,w);o.push(b),l.push(g)}return new Transition(o,l,t,n)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(e,t){var n,r,i;return function(){var o=styleValue(this,e),l=(this.style.removeProperty(e),styleValue(this,e));return o===l?null:o===n&&l===r?i:i=t(n=o,r=l)}}function styleRemove(e){return function(){this.style.removeProperty(e)}}function styleConstant(e,t,n){var r,i=n+"",o;return function(){var l=styleValue(this,e);return l===i?null:l===r?o:o=t(r=l,n)}}function styleFunction(e,t,n){var r,i,o;return function(){var l=styleValue(this,e),f=n(this),h=f+"";return f==null&&(h=f=(this.style.removeProperty(e),styleValue(this,e))),l===h?null:l===r&&h===i?o:(i=h,o=t(r=l,f))}}function styleMaybeRemove(e,t){var n,r,i,o="style."+t,l="end."+o,f;return function(){var h=set(this,e),d=h.on,g=h.value[o]==null?f||(f=styleRemove(t)):void 0;(d!==n||i!==g)&&(r=(n=d).copy()).on(l,i=g),h.on=r}}function transition_style(e,t,n){var r=(e+="")=="transform"?interpolateTransformCss:interpolate$1;return t==null?this.styleTween(e,styleNull(e,r)).on("end.style."+e,styleRemove(e)):typeof t=="function"?this.styleTween(e,styleFunction(e,r,tweenValue(this,"style."+e,t))).each(styleMaybeRemove(this._id,e)):this.styleTween(e,styleConstant(e,r,t),n).on("end.style."+e,null)}function styleInterpolate(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function styleTween(e,t,n){var r,i;function o(){var l=t.apply(this,arguments);return l!==i&&(r=(i=l)&&styleInterpolate(e,l,n)),r}return o._value=t,o}function transition_styleTween(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,styleTween(e,t,n==null?"":n))}function textConstant(e){return function(){this.textContent=e}}function textFunction(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function transition_text(e){return this.tween("text",typeof e=="function"?textFunction(tweenValue(this,"text",e)):textConstant(e==null?"":e+""))}function textInterpolate(e){return function(t){this.textContent=e.call(this,t)}}function textTween(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&textInterpolate(i)),t}return r._value=e,r}function transition_textTween(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,textTween(e))}function transition_transition(){for(var e=this._name,t=this._id,n=newId(),r=this._groups,i=r.length,o=0;o<i;++o)for(var l=r[o],f=l.length,h,d=0;d<f;++d)if(h=l[d]){var g=get(h,t);schedule(h,e,n,d,l,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new Transition(r,this._parents,e,n)}function transition_end(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,l){var f={value:l},h={value:function(){--i===0&&o()}};n.each(function(){var d=set(this,r),g=d.on;g!==e&&(t=(e=g).copy(),t._.cancel.push(f),t._.interrupt.push(f),t._.end.push(h)),d.on=t}),i===0&&o()})}var id=0;function Transition(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function transition(e){return selection().transition(e)}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype=transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};const linear$1=e=>+e;function quadIn(e){return e*e}function quadOut(e){return e*(2-e)}function quadInOut(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function cubicIn(e){return e*e*e}function cubicOut(e){return--e*e*e+1}function cubicInOut(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var exponent$1=3,polyIn=function e(t){t=+t;function n(r){return Math.pow(r,t)}return n.exponent=e,n}(exponent$1),polyOut=function e(t){t=+t;function n(r){return 1-Math.pow(1-r,t)}return n.exponent=e,n}(exponent$1),polyInOut=function e(t){t=+t;function n(r){return((r*=2)<=1?Math.pow(r,t):2-Math.pow(2-r,t))/2}return n.exponent=e,n}(exponent$1),pi$4=Math.PI,halfPi$3=pi$4/2;function sinIn(e){return+e==1?1:1-Math.cos(e*halfPi$3)}function sinOut(e){return Math.sin(e*halfPi$3)}function sinInOut(e){return(1-Math.cos(pi$4*e))/2}function tpmt(e){return(Math.pow(2,-10*e)-.0009765625)*1.0009775171065494}function expIn(e){return tpmt(1-+e)}function expOut(e){return 1-tpmt(e)}function expInOut(e){return((e*=2)<=1?tpmt(1-e):2-tpmt(e-1))/2}function circleIn(e){return 1-Math.sqrt(1-e*e)}function circleOut(e){return Math.sqrt(1- --e*e)}function circleInOut(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var b1=4/11,b2=6/11,b3=8/11,b4=3/4,b5=9/11,b6=10/11,b7=15/16,b8=21/22,b9=63/64,b0=1/b1/b1;function bounceIn(e){return 1-bounceOut(1-e)}function bounceOut(e){return(e=+e)<b1?b0*e*e:e<b3?b0*(e-=b2)*e+b4:e<b6?b0*(e-=b5)*e+b7:b0*(e-=b8)*e+b9}function bounceInOut(e){return((e*=2)<=1?1-bounceOut(1-e):bounceOut(e-1)+1)/2}var overshoot=1.70158,backIn=function e(t){t=+t;function n(r){return(r=+r)*r*(t*(r-1)+r)}return n.overshoot=e,n}(overshoot),backOut=function e(t){t=+t;function n(r){return--r*r*((r+1)*t+r)+1}return n.overshoot=e,n}(overshoot),backInOut=function e(t){t=+t;function n(r){return((r*=2)<1?r*r*((t+1)*r-t):(r-=2)*r*((t+1)*r+t)+2)/2}return n.overshoot=e,n}(overshoot),tau$5=2*Math.PI,amplitude=1,period=.3,elasticIn=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=tau$5);function i(o){return t*tpmt(- --o)*Math.sin((r-o)/n)}return i.amplitude=function(o){return e(o,n*tau$5)},i.period=function(o){return e(t,o)},i}(amplitude,period),elasticOut=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=tau$5);function i(o){return 1-t*tpmt(o=+o)*Math.sin((o+r)/n)}return i.amplitude=function(o){return e(o,n*tau$5)},i.period=function(o){return e(t,o)},i}(amplitude,period),elasticInOut=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=tau$5);function i(o){return((o=o*2-1)<0?t*tpmt(-o)*Math.sin((r-o)/n):2-t*tpmt(o)*Math.sin((r+o)/n))/2}return i.amplitude=function(o){return e(o,n*tau$5)},i.period=function(o){return e(t,o)},i}(amplitude,period),defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function selection_transition(e){var t,n;e instanceof Transition?(t=e._id,e=e._name):(t=newId(),(n=defaultTiming).time=now(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var l=r[o],f=l.length,h,d=0;d<f;++d)(h=l[d])&&schedule(h,e,t,d,l,n||inherit(h,t));return new Transition(r,this._parents,e,t)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;var root=[null];function active(e,t){var n=e.__transition,r,i;if(n){t=t==null?null:t+"";for(i in n)if((r=n[i]).state>SCHEDULED&&r.name===t)return new Transition([[e]],root,t,+i)}return null}var constant$7=e=>()=>e;function BrushEvent(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function nopropagation$1(e){e.stopImmediatePropagation()}function noevent$1(e){e.preventDefault(),e.stopImmediatePropagation()}var MODE_DRAG={name:"drag"},MODE_SPACE={name:"space"},MODE_HANDLE={name:"handle"},MODE_CENTER={name:"center"};const{abs:abs$3,max:max$2,min:min$1}=Math;function number1(e){return[+e[0],+e[1]]}function number2(e){return[number1(e[0]),number1(e[1])]}var X={name:"x",handles:["w","e"].map(type),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Y={name:"y",handles:["n","s"].map(type),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},XY={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(type),input:function(e){return e==null?null:number2(e)},output:function(e){return e}},cursors={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},flipX={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},flipY={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},signsX={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},signsY={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function type(e){return{type:e}}function defaultFilter$1(e){return!e.ctrlKey&&!e.button}function defaultExtent$1(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function defaultTouchable$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function local(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function empty(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function brushSelection(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function brushX(){return brush$1(X)}function brushY(){return brush$1(Y)}function brush(){return brush$1(XY)}function brush$1(e){var t=defaultExtent$1,n=defaultFilter$1,r=defaultTouchable$1,i=!0,o=dispatch("start","brush","end"),l=6,f;function h(_){var S=_.property("__brush",P).selectAll(".overlay").data([type("overlay")]);S.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",cursors.overlay).merge(S).each(function(){var R=local(this).extent;select(this).attr("x",R[0][0]).attr("y",R[0][1]).attr("width",R[1][0]-R[0][0]).attr("height",R[1][1]-R[0][1])}),_.selectAll(".selection").data([type("selection")]).enter().append("rect").attr("class","selection").attr("cursor",cursors.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var N=_.selectAll(".handle").data(e.handles,function(R){return R.type});N.exit().remove(),N.enter().append("rect").attr("class",function(R){return"handle handle--"+R.type}).attr("cursor",function(R){return cursors[R.type]}),_.each(d).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",b).filter(r).on("touchstart.brush",b).on("touchmove.brush",$).on("touchend.brush touchcancel.brush",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}h.move=function(_,S,N){_.tween?_.on("start.brush",function(R){g(this,arguments).beforestart().start(R)}).on("interrupt.brush end.brush",function(R){g(this,arguments).end(R)}).tween("brush",function(){var R=this,T=R.__brush,I=g(R,arguments),L=T.selection,H=e.input(typeof S=="function"?S.apply(this,arguments):S,T.extent),G=interpolate$2(L,H);function j(F){T.selection=F===1&&H===null?null:G(F),d.call(R),I.brush()}return L!==null&&H!==null?j:j(1)}):_.each(function(){var R=this,T=arguments,I=R.__brush,L=e.input(typeof S=="function"?S.apply(R,T):S,I.extent),H=g(R,T).beforestart();interrupt(R),I.selection=L===null?null:L,d.call(R),H.start(N).brush(N).end(N)})},h.clear=function(_,S){h.move(_,null,S)};function d(){var _=select(this),S=local(this).selection;S?(_.selectAll(".selection").style("display",null).attr("x",S[0][0]).attr("y",S[0][1]).attr("width",S[1][0]-S[0][0]).attr("height",S[1][1]-S[0][1]),_.selectAll(".handle").style("display",null).attr("x",function(N){return N.type[N.type.length-1]==="e"?S[1][0]-l/2:S[0][0]-l/2}).attr("y",function(N){return N.type[0]==="s"?S[1][1]-l/2:S[0][1]-l/2}).attr("width",function(N){return N.type==="n"||N.type==="s"?S[1][0]-S[0][0]+l:l}).attr("height",function(N){return N.type==="e"||N.type==="w"?S[1][1]-S[0][1]+l:l})):_.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function g(_,S,N){var R=_.__brush.emitter;return R&&(!N||!R.clean)?R:new p(_,S,N)}function p(_,S,N){this.that=_,this.args=S,this.state=_.__brush,this.active=0,this.clean=N}p.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(_,S){return this.starting?(this.starting=!1,this.emit("start",_,S)):this.emit("brush",_),this},brush:function(_,S){return this.emit("brush",_,S),this},end:function(_,S){return--this.active===0&&(delete this.state.emitter,this.emit("end",_,S)),this},emit:function(_,S,N){var R=select(this.that).datum();o.call(_,this.that,new BrushEvent(_,{sourceEvent:S,target:h,selection:e.output(this.state.selection),mode:N,dispatch:o}),R)}};function b(_){if(f&&!_.touches||!n.apply(this,arguments))return;var S=this,N=_.target.__data__.type,R=(i&&_.metaKey?N="overlay":N)==="selection"?MODE_DRAG:i&&_.altKey?MODE_CENTER:MODE_HANDLE,T=e===Y?null:signsX[N],I=e===X?null:signsY[N],L=local(S),H=L.extent,G=L.selection,j=H[0][0],F,O,Z=H[0][1],V,q,z=H[1][0],U,W,Q=H[1][1],J,te,ie=0,ae=0,he,le=T&&I&&i&&_.shiftKey,ce,ye,fe=Array.from(_.touches||[_],oe=>{const pe=oe.identifier;return oe=pointer(oe,S),oe.point0=oe.slice(),oe.identifier=pe,oe});interrupt(S);var me=g(S,arguments,!0).beforestart();if(N==="overlay"){G&&(he=!0);const oe=[fe[0],fe[1]||fe[0]];L.selection=G=[[F=e===Y?j:min$1(oe[0][0],oe[1][0]),V=e===X?Z:min$1(oe[0][1],oe[1][1])],[U=e===Y?z:max$2(oe[0][0],oe[1][0]),J=e===X?Q:max$2(oe[0][1],oe[1][1])]],fe.length>1&&ge(_)}else F=G[0][0],V=G[0][1],U=G[1][0],J=G[1][1];O=F,q=V,W=U,te=J;var ne=select(S).attr("pointer-events","none"),se=ne.selectAll(".overlay").attr("cursor",cursors[N]);if(_.touches)me.moved=ee,me.ended=de;else{var ue=select(_.view).on("mousemove.brush",ee,!0).on("mouseup.brush",de,!0);i&&ue.on("keydown.brush",be,!0).on("keyup.brush",ve,!0),dragDisable(_.view)}d.call(S),me.start(_,R.name);function ee(oe){for(const pe of oe.changedTouches||[oe])for(const _e of fe)_e.identifier===pe.identifier&&(_e.cur=pointer(pe,S));if(le&&!ce&&!ye&&fe.length===1){const pe=fe[0];abs$3(pe.cur[0]-pe[0])>abs$3(pe.cur[1]-pe[1])?ye=!0:ce=!0}for(const pe of fe)pe.cur&&(pe[0]=pe.cur[0],pe[1]=pe.cur[1]);he=!0,noevent$1(oe),ge(oe)}function ge(oe){const pe=fe[0],_e=pe.point0;var $e;switch(ie=pe[0]-_e[0],ae=pe[1]-_e[1],R){case MODE_SPACE:case MODE_DRAG:{T&&(ie=max$2(j-F,min$1(z-U,ie)),O=F+ie,W=U+ie),I&&(ae=max$2(Z-V,min$1(Q-J,ae)),q=V+ae,te=J+ae);break}case MODE_HANDLE:{fe[1]?(T&&(O=max$2(j,min$1(z,fe[0][0])),W=max$2(j,min$1(z,fe[1][0])),T=1),I&&(q=max$2(Z,min$1(Q,fe[0][1])),te=max$2(Z,min$1(Q,fe[1][1])),I=1)):(T<0?(ie=max$2(j-F,min$1(z-F,ie)),O=F+ie,W=U):T>0&&(ie=max$2(j-U,min$1(z-U,ie)),O=F,W=U+ie),I<0?(ae=max$2(Z-V,min$1(Q-V,ae)),q=V+ae,te=J):I>0&&(ae=max$2(Z-J,min$1(Q-J,ae)),q=V,te=J+ae));break}case MODE_CENTER:{T&&(O=max$2(j,min$1(z,F-ie*T)),W=max$2(j,min$1(z,U+ie*T))),I&&(q=max$2(Z,min$1(Q,V-ae*I)),te=max$2(Z,min$1(Q,J+ae*I)));break}}W<O&&(T*=-1,$e=F,F=U,U=$e,$e=O,O=W,W=$e,N in flipX&&se.attr("cursor",cursors[N=flipX[N]])),te<q&&(I*=-1,$e=V,V=J,J=$e,$e=q,q=te,te=$e,N in flipY&&se.attr("cursor",cursors[N=flipY[N]])),L.selection&&(G=L.selection),ce&&(O=G[0][0],W=G[1][0]),ye&&(q=G[0][1],te=G[1][1]),(G[0][0]!==O||G[0][1]!==q||G[1][0]!==W||G[1][1]!==te)&&(L.selection=[[O,q],[W,te]],d.call(S),me.brush(oe,R.name))}function de(oe){if(nopropagation$1(oe),oe.touches){if(oe.touches.length)return;f&&clearTimeout(f),f=setTimeout(function(){f=null},500)}else yesdrag(oe.view,he),ue.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ne.attr("pointer-events","all"),se.attr("cursor",cursors.overlay),L.selection&&(G=L.selection),empty(G)&&(L.selection=null,d.call(S)),me.end(oe,R.name)}function be(oe){switch(oe.keyCode){case 16:{le=T&&I;break}case 18:{R===MODE_HANDLE&&(T&&(U=W-ie*T,F=O+ie*T),I&&(J=te-ae*I,V=q+ae*I),R=MODE_CENTER,ge(oe));break}case 32:{(R===MODE_HANDLE||R===MODE_CENTER)&&(T<0?U=W-ie:T>0&&(F=O-ie),I<0?J=te-ae:I>0&&(V=q-ae),R=MODE_SPACE,se.attr("cursor",cursors.selection),ge(oe));break}default:return}noevent$1(oe)}function ve(oe){switch(oe.keyCode){case 16:{le&&(ce=ye=le=!1,ge(oe));break}case 18:{R===MODE_CENTER&&(T<0?U=W:T>0&&(F=O),I<0?J=te:I>0&&(V=q),R=MODE_HANDLE,ge(oe));break}case 32:{R===MODE_SPACE&&(oe.altKey?(T&&(U=W-ie*T,F=O+ie*T),I&&(J=te-ae*I,V=q+ae*I),R=MODE_CENTER):(T<0?U=W:T>0&&(F=O),I<0?J=te:I>0&&(V=q),R=MODE_HANDLE),se.attr("cursor",cursors[N]),ge(oe));break}default:return}noevent$1(oe)}}function $(_){g(this,arguments).moved(_)}function w(_){g(this,arguments).ended(_)}function P(){var _=this.__brush||{selection:null};return _.extent=number2(t.apply(this,arguments)),_.dim=e,_}return h.extent=function(_){return arguments.length?(t=typeof _=="function"?_:constant$7(number2(_)),h):t},h.filter=function(_){return arguments.length?(n=typeof _=="function"?_:constant$7(!!_),h):n},h.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:constant$7(!!_),h):r},h.handleSize=function(_){return arguments.length?(l=+_,h):l},h.keyModifiers=function(_){return arguments.length?(i=!!_,h):i},h.on=function(){var _=o.on.apply(o,arguments);return _===o?h:_},h}var abs$2=Math.abs,cos$2=Math.cos,sin$2=Math.sin,pi$3=Math.PI,halfPi$2=pi$3/2,tau$4=pi$3*2,max$1=Math.max,epsilon$5=1e-12;function range$1(e,t){return Array.from({length:t-e},(n,r)=>e+r)}function compareValue(e){return function(t,n){return e(t.source.value+t.target.value,n.source.value+n.target.value)}}function chord(){return chord$1(!1,!1)}function chordTranspose(){return chord$1(!1,!0)}function chordDirected(){return chord$1(!0,!1)}function chord$1(e,t){var n=0,r=null,i=null,o=null;function l(f){var h=f.length,d=new Array(h),g=range$1(0,h),p=new Array(h*h),b=new Array(h),$=0,w;f=Float64Array.from({length:h*h},t?(P,_)=>f[_%h][_/h|0]:(P,_)=>f[_/h|0][_%h]);for(let P=0;P<h;++P){let _=0;for(let S=0;S<h;++S)_+=f[P*h+S]+e*f[S*h+P];$+=d[P]=_}$=max$1(0,tau$4-n*h)/$,w=$?n:tau$4/h;{let P=0;r&&g.sort((_,S)=>r(d[_],d[S]));for(const _ of g){const S=P;if(e){const N=range$1(~h+1,h).filter(R=>R<0?f[~R*h+_]:f[_*h+R]);i&&N.sort((R,T)=>i(R<0?-f[~R*h+_]:f[_*h+R],T<0?-f[~T*h+_]:f[_*h+T]));for(const R of N)if(R<0){const T=p[~R*h+_]||(p[~R*h+_]={source:null,target:null});T.target={index:_,startAngle:P,endAngle:P+=f[~R*h+_]*$,value:f[~R*h+_]}}else{const T=p[_*h+R]||(p[_*h+R]={source:null,target:null});T.source={index:_,startAngle:P,endAngle:P+=f[_*h+R]*$,value:f[_*h+R]}}b[_]={index:_,startAngle:S,endAngle:P,value:d[_]}}else{const N=range$1(0,h).filter(R=>f[_*h+R]||f[R*h+_]);i&&N.sort((R,T)=>i(f[_*h+R],f[_*h+T]));for(const R of N){let T;if(_<R?(T=p[_*h+R]||(p[_*h+R]={source:null,target:null}),T.source={index:_,startAngle:P,endAngle:P+=f[_*h+R]*$,value:f[_*h+R]}):(T=p[R*h+_]||(p[R*h+_]={source:null,target:null}),T.target={index:_,startAngle:P,endAngle:P+=f[_*h+R]*$,value:f[_*h+R]},_===R&&(T.source=T.target)),T.source&&T.target&&T.source.value<T.target.value){const I=T.source;T.source=T.target,T.target=I}}b[_]={index:_,startAngle:S,endAngle:P,value:d[_]}}P+=w}}return p=Object.values(p),p.groups=b,o?p.sort(o):p}return l.padAngle=function(f){return arguments.length?(n=max$1(0,f),l):n},l.sortGroups=function(f){return arguments.length?(r=f,l):r},l.sortSubgroups=function(f){return arguments.length?(i=f,l):i},l.sortChords=function(f){return arguments.length?(f==null?o=null:(o=compareValue(f))._=f,l):o&&o._},l}const pi$2=Math.PI,tau$3=2*pi$2,epsilon$4=1e-6,tauEpsilon=tau$3-epsilon$4;function append$1(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function appendRound$1(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return append$1;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Path$1{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?append$1:appendRound$1(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+l}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let l=this._x1,f=this._y1,h=r-t,d=i-n,g=l-t,p=f-n,b=g*g+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(b>epsilon$4)if(!(Math.abs(p*h-d*g)>epsilon$4)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let $=r-l,w=i-f,P=h*h+d*d,_=$*$+w*w,S=Math.sqrt(P),N=Math.sqrt(b),R=o*Math.tan((pi$2-Math.acos((P+b-_)/(2*S*N)))/2),T=R/N,I=R/S;Math.abs(T-1)>epsilon$4&&this._append`L${t+T*g},${n+T*p}`,this._append`A${o},${o},0,0,${+(p*$>g*w)},${this._x1=t+I*h},${this._y1=n+I*d}`}}arc(t,n,r,i,o,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let f=r*Math.cos(i),h=r*Math.sin(i),d=t+f,g=n+h,p=1^l,b=l?i-o:o-i;this._x1===null?this._append`M${d},${g}`:(Math.abs(this._x1-d)>epsilon$4||Math.abs(this._y1-g)>epsilon$4)&&this._append`L${d},${g}`,r&&(b<0&&(b=b%tau$3+tau$3),b>tauEpsilon?this._append`A${r},${r},0,1,${p},${t-f},${n-h}A${r},${r},0,1,${p},${this._x1=d},${this._y1=g}`:b>epsilon$4&&this._append`A${r},${r},0,${+(b>=pi$2)},${p},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function path(){return new Path$1}path.prototype=Path$1.prototype;function pathRound(e=3){return new Path$1(+e)}var slice$2=Array.prototype.slice;function constant$6(e){return function(){return e}}function defaultSource$1(e){return e.source}function defaultTarget(e){return e.target}function defaultRadius$1(e){return e.radius}function defaultStartAngle(e){return e.startAngle}function defaultEndAngle(e){return e.endAngle}function defaultPadAngle(){return 0}function defaultArrowheadRadius(){return 10}function ribbon(e){var t=defaultSource$1,n=defaultTarget,r=defaultRadius$1,i=defaultRadius$1,o=defaultStartAngle,l=defaultEndAngle,f=defaultPadAngle,h=null;function d(){var g,p=t.apply(this,arguments),b=n.apply(this,arguments),$=f.apply(this,arguments)/2,w=slice$2.call(arguments),P=+r.apply(this,(w[0]=p,w)),_=o.apply(this,w)-halfPi$2,S=l.apply(this,w)-halfPi$2,N=+i.apply(this,(w[0]=b,w)),R=o.apply(this,w)-halfPi$2,T=l.apply(this,w)-halfPi$2;if(h||(h=g=path()),$>epsilon$5&&(abs$2(S-_)>$*2+epsilon$5?S>_?(_+=$,S-=$):(_-=$,S+=$):_=S=(_+S)/2,abs$2(T-R)>$*2+epsilon$5?T>R?(R+=$,T-=$):(R-=$,T+=$):R=T=(R+T)/2),h.moveTo(P*cos$2(_),P*sin$2(_)),h.arc(0,0,P,_,S),_!==R||S!==T)if(e){var I=+e.apply(this,arguments),L=N-I,H=(R+T)/2;h.quadraticCurveTo(0,0,L*cos$2(R),L*sin$2(R)),h.lineTo(N*cos$2(H),N*sin$2(H)),h.lineTo(L*cos$2(T),L*sin$2(T))}else h.quadraticCurveTo(0,0,N*cos$2(R),N*sin$2(R)),h.arc(0,0,N,R,T);if(h.quadraticCurveTo(0,0,P*cos$2(_),P*sin$2(_)),h.closePath(),g)return h=null,g+""||null}return e&&(d.headRadius=function(g){return arguments.length?(e=typeof g=="function"?g:constant$6(+g),d):e}),d.radius=function(g){return arguments.length?(r=i=typeof g=="function"?g:constant$6(+g),d):r},d.sourceRadius=function(g){return arguments.length?(r=typeof g=="function"?g:constant$6(+g),d):r},d.targetRadius=function(g){return arguments.length?(i=typeof g=="function"?g:constant$6(+g),d):i},d.startAngle=function(g){return arguments.length?(o=typeof g=="function"?g:constant$6(+g),d):o},d.endAngle=function(g){return arguments.length?(l=typeof g=="function"?g:constant$6(+g),d):l},d.padAngle=function(g){return arguments.length?(f=typeof g=="function"?g:constant$6(+g),d):f},d.source=function(g){return arguments.length?(t=g,d):t},d.target=function(g){return arguments.length?(n=g,d):n},d.context=function(g){return arguments.length?(h=g==null?null:g,d):h},d}function ribbon$1(){return ribbon()}function ribbonArrow(){return ribbon(defaultArrowheadRadius)}var array$2=Array.prototype,slice$1=array$2.slice;function ascending$1(e,t){return e-t}function area$3(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}var constant$5=e=>()=>e;function contains$2(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=ringContains(e,t[n]))return i;return 0}function ringContains(e,t){for(var n=t[0],r=t[1],i=-1,o=0,l=e.length,f=l-1;o<l;f=o++){var h=e[o],d=h[0],g=h[1],p=e[f],b=p[0],$=p[1];if(segmentContains(h,p,t))return 0;g>r!=$>r&&n<(b-d)*(r-g)/($-g)+d&&(i=-i)}return i}function segmentContains(e,t,n){var r;return collinear$1(e,t,n)&&within(e[r=+(e[0]===t[0])],n[r],t[r])}function collinear$1(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function within(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function noop$2(){}var cases=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Contours(){var e=1,t=1,n=thresholdSturges,r=h;function i(d){var g=n(d);if(Array.isArray(g))g=g.slice().sort(ascending$1);else{const p=extent$1(d,finite);for(g=ticks(...nice$1(p[0],p[1],g),g);g[g.length-1]>=p[1];)g.pop();for(;g[1]<p[0];)g.shift()}return g.map(p=>o(d,p))}function o(d,g){const p=g==null?NaN:+g;if(isNaN(p))throw new Error(`invalid value: ${g}`);var b=[],$=[];return l(d,p,function(w){r(w,d,p),area$3(w)>0?b.push([w]):$.push(w)}),$.forEach(function(w){for(var P=0,_=b.length,S;P<_;++P)if(contains$2((S=b[P])[0],w)!==-1){S.push(w);return}}),{type:"MultiPolygon",value:g,coordinates:b}}function l(d,g,p){var b=new Array,$=new Array,w,P,_,S,N,R;for(w=P=-1,S=above(d[0],g),cases[S<<1].forEach(T);++w<e-1;)_=S,S=above(d[w+1],g),cases[_|S<<1].forEach(T);for(cases[S<<0].forEach(T);++P<t-1;){for(w=-1,S=above(d[P*e+e],g),N=above(d[P*e],g),cases[S<<1|N<<2].forEach(T);++w<e-1;)_=S,S=above(d[P*e+e+w+1],g),R=N,N=above(d[P*e+w+1],g),cases[_|S<<1|N<<2|R<<3].forEach(T);cases[S|N<<3].forEach(T)}for(w=-1,N=d[P*e]>=g,cases[N<<2].forEach(T);++w<e-1;)R=N,N=above(d[P*e+w+1],g),cases[N<<2|R<<3].forEach(T);cases[N<<3].forEach(T);function T(I){var L=[I[0][0]+w,I[0][1]+P],H=[I[1][0]+w,I[1][1]+P],G=f(L),j=f(H),F,O;(F=$[G])?(O=b[j])?(delete $[F.end],delete b[O.start],F===O?(F.ring.push(H),p(F.ring)):b[F.start]=$[O.end]={start:F.start,end:O.end,ring:F.ring.concat(O.ring)}):(delete $[F.end],F.ring.push(H),$[F.end=j]=F):(F=b[j])?(O=$[G])?(delete b[F.start],delete $[O.end],F===O?(F.ring.push(H),p(F.ring)):b[O.start]=$[F.end]={start:O.start,end:F.end,ring:O.ring.concat(F.ring)}):(delete b[F.start],F.ring.unshift(L),b[F.start=G]=F):b[G]=$[j]={start:G,end:j,ring:[L,H]}}}function f(d){return d[0]*2+d[1]*(e+1)*4}function h(d,g,p){d.forEach(function(b){var $=b[0],w=b[1],P=$|0,_=w|0,S=valid(g[_*e+P]);$>0&&$<e&&P===$&&(b[0]=smooth1($,valid(g[_*e+P-1]),S,p)),w>0&&w<t&&_===w&&(b[1]=smooth1(w,valid(g[(_-1)*e+P]),S,p))})}return i.contour=o,i.size=function(d){if(!arguments.length)return[e,t];var g=Math.floor(d[0]),p=Math.floor(d[1]);if(!(g>=0&&p>=0))throw new Error("invalid size");return e=g,t=p,i},i.thresholds=function(d){return arguments.length?(n=typeof d=="function"?d:Array.isArray(d)?constant$5(slice$1.call(d)):constant$5(d),i):n},i.smooth=function(d){return arguments.length?(r=d?h:noop$2,i):r===h},i}function finite(e){return isFinite(e)?e:NaN}function above(e,t){return e==null?!1:+e>=t}function valid(e){return e==null||isNaN(e=+e)?-1/0:e}function smooth1(e,t,n,r){const i=r-t,o=n-t,l=isFinite(i)||isFinite(o)?i/o:Math.sign(i)/Math.sign(o);return isNaN(l)?e:e+l-.5}function defaultX$1(e){return e[0]}function defaultY$1(e){return e[1]}function defaultWeight(){return 1}function density(){var e=defaultX$1,t=defaultY$1,n=defaultWeight,r=960,i=500,o=20,l=2,f=o*3,h=r+f*2>>l,d=i+f*2>>l,g=constant$5(20);function p(N){var R=new Float32Array(h*d),T=Math.pow(2,-l),I=-1;for(const V of N){var L=(e(V,++I,N)+f)*T,H=(t(V,I,N)+f)*T,G=+n(V,I,N);if(G&&L>=0&&L<h&&H>=0&&H<d){var j=Math.floor(L),F=Math.floor(H),O=L-j-.5,Z=H-F-.5;R[j+F*h]+=(1-O)*(1-Z)*G,R[j+1+F*h]+=O*(1-Z)*G,R[j+1+(F+1)*h]+=O*Z*G,R[j+(F+1)*h]+=(1-O)*Z*G}}return blur2({data:R,width:h,height:d},o*T),R}function b(N){var R=p(N),T=g(R),I=Math.pow(2,2*l);return Array.isArray(T)||(T=ticks(Number.MIN_VALUE,max$3(R)/I,T)),Contours().size([h,d]).thresholds(T.map(L=>L*I))(R).map((L,H)=>(L.value=+T[H],$(L)))}b.contours=function(N){var R=p(N),T=Contours().size([h,d]),I=Math.pow(2,2*l),L=H=>{H=+H;var G=$(T.contour(R,H*I));return G.value=H,G};return Object.defineProperty(L,"max",{get:()=>max$3(R)/I}),L};function $(N){return N.coordinates.forEach(w),N}function w(N){N.forEach(P)}function P(N){N.forEach(_)}function _(N){N[0]=N[0]*Math.pow(2,l)-f,N[1]=N[1]*Math.pow(2,l)-f}function S(){return f=o*3,h=r+f*2>>l,d=i+f*2>>l,b}return b.x=function(N){return arguments.length?(e=typeof N=="function"?N:constant$5(+N),b):e},b.y=function(N){return arguments.length?(t=typeof N=="function"?N:constant$5(+N),b):t},b.weight=function(N){return arguments.length?(n=typeof N=="function"?N:constant$5(+N),b):n},b.size=function(N){if(!arguments.length)return[r,i];var R=+N[0],T=+N[1];if(!(R>=0&&T>=0))throw new Error("invalid size");return r=R,i=T,S()},b.cellSize=function(N){if(!arguments.length)return 1<<l;if(!((N=+N)>=1))throw new Error("invalid cell size");return l=Math.floor(Math.log(N)/Math.LN2),S()},b.thresholds=function(N){return arguments.length?(g=typeof N=="function"?N:Array.isArray(N)?constant$5(slice$1.call(N)):constant$5(N),b):g},b.bandwidth=function(N){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((N=+N)>=0))throw new Error("invalid bandwidth");return o=(Math.sqrt(4*N*N+1)-1)/2,S()},b}const epsilon$3=11102230246251565e-32,splitter=134217729,resulterrbound=(3+8*epsilon$3)*epsilon$3;function sum$1(e,t,n,r,i){let o,l,f,h,d=t[0],g=r[0],p=0,b=0;g>d==g>-d?(o=d,d=t[++p]):(o=g,g=r[++b]);let $=0;if(p<e&&b<n)for(g>d==g>-d?(l=d+o,f=o-(l-d),d=t[++p]):(l=g+o,f=o-(l-g),g=r[++b]),o=l,f!==0&&(i[$++]=f);p<e&&b<n;)g>d==g>-d?(l=o+d,h=l-o,f=o-(l-h)+(d-h),d=t[++p]):(l=o+g,h=l-o,f=o-(l-h)+(g-h),g=r[++b]),o=l,f!==0&&(i[$++]=f);for(;p<e;)l=o+d,h=l-o,f=o-(l-h)+(d-h),d=t[++p],o=l,f!==0&&(i[$++]=f);for(;b<n;)l=o+g,h=l-o,f=o-(l-h)+(g-h),g=r[++b],o=l,f!==0&&(i[$++]=f);return(o!==0||$===0)&&(i[$++]=o),$}function estimate(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function vec(e){return new Float64Array(e)}const ccwerrboundA=(3+16*epsilon$3)*epsilon$3,ccwerrboundB=(2+12*epsilon$3)*epsilon$3,ccwerrboundC=(9+64*epsilon$3)*epsilon$3*epsilon$3,B=vec(4),C1=vec(8),C2=vec(12),D=vec(16),u=vec(4);function orient2dadapt(e,t,n,r,i,o,l){let f,h,d,g,p,b,$,w,P,_,S,N,R,T,I,L,H,G;const j=e-i,F=n-i,O=t-o,Z=r-o;T=j*Z,b=splitter*j,$=b-(b-j),w=j-$,b=splitter*Z,P=b-(b-Z),_=Z-P,I=w*_-(T-$*P-w*P-$*_),L=O*F,b=splitter*O,$=b-(b-O),w=O-$,b=splitter*F,P=b-(b-F),_=F-P,H=w*_-(L-$*P-w*P-$*_),S=I-H,p=I-S,B[0]=I-(S+p)+(p-H),N=T+S,p=N-T,R=T-(N-p)+(S-p),S=R-L,p=R-S,B[1]=R-(S+p)+(p-L),G=N+S,p=G-N,B[2]=N-(G-p)+(S-p),B[3]=G;let V=estimate(4,B),q=ccwerrboundB*l;if(V>=q||-V>=q||(p=e-j,f=e-(j+p)+(p-i),p=n-F,d=n-(F+p)+(p-i),p=t-O,h=t-(O+p)+(p-o),p=r-Z,g=r-(Z+p)+(p-o),f===0&&h===0&&d===0&&g===0)||(q=ccwerrboundC*l+resulterrbound*Math.abs(V),V+=j*g+Z*f-(O*d+F*h),V>=q||-V>=q))return V;T=f*Z,b=splitter*f,$=b-(b-f),w=f-$,b=splitter*Z,P=b-(b-Z),_=Z-P,I=w*_-(T-$*P-w*P-$*_),L=h*F,b=splitter*h,$=b-(b-h),w=h-$,b=splitter*F,P=b-(b-F),_=F-P,H=w*_-(L-$*P-w*P-$*_),S=I-H,p=I-S,u[0]=I-(S+p)+(p-H),N=T+S,p=N-T,R=T-(N-p)+(S-p),S=R-L,p=R-S,u[1]=R-(S+p)+(p-L),G=N+S,p=G-N,u[2]=N-(G-p)+(S-p),u[3]=G;const z=sum$1(4,B,4,u,C1);T=j*g,b=splitter*j,$=b-(b-j),w=j-$,b=splitter*g,P=b-(b-g),_=g-P,I=w*_-(T-$*P-w*P-$*_),L=O*d,b=splitter*O,$=b-(b-O),w=O-$,b=splitter*d,P=b-(b-d),_=d-P,H=w*_-(L-$*P-w*P-$*_),S=I-H,p=I-S,u[0]=I-(S+p)+(p-H),N=T+S,p=N-T,R=T-(N-p)+(S-p),S=R-L,p=R-S,u[1]=R-(S+p)+(p-L),G=N+S,p=G-N,u[2]=N-(G-p)+(S-p),u[3]=G;const U=sum$1(z,C1,4,u,C2);T=f*g,b=splitter*f,$=b-(b-f),w=f-$,b=splitter*g,P=b-(b-g),_=g-P,I=w*_-(T-$*P-w*P-$*_),L=h*d,b=splitter*h,$=b-(b-h),w=h-$,b=splitter*d,P=b-(b-d),_=d-P,H=w*_-(L-$*P-w*P-$*_),S=I-H,p=I-S,u[0]=I-(S+p)+(p-H),N=T+S,p=N-T,R=T-(N-p)+(S-p),S=R-L,p=R-S,u[1]=R-(S+p)+(p-L),G=N+S,p=G-N,u[2]=N-(G-p)+(S-p),u[3]=G;const W=sum$1(U,C2,4,u,D);return D[W-1]}function orient2d(e,t,n,r,i,o){const l=(t-o)*(n-i),f=(e-i)*(r-o),h=l-f;if(l===0||f===0||l>0!=f>0)return h;const d=Math.abs(l+f);return Math.abs(h)>=ccwerrboundA*d?h:-orient2dadapt(e,t,n,r,i,o,d)}const EPSILON=Math.pow(2,-52),EDGE_STACK=new Uint32Array(512);class Delaunator{static from(t,n=defaultGetX,r=defaultGetY){const i=t.length,o=new Float64Array(i*2);for(let l=0;l<i;l++){const f=t[l];o[2*l]=n(f),o[2*l+1]=r(f)}return new Delaunator(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,l=t.length>>1;let f=1/0,h=1/0,d=-1/0,g=-1/0;for(let F=0;F<l;F++){const O=t[2*F],Z=t[2*F+1];O<f&&(f=O),Z<h&&(h=Z),O>d&&(d=O),Z>g&&(g=Z),this._ids[F]=F}const p=(f+d)/2,b=(h+g)/2;let $=1/0,w,P,_;for(let F=0;F<l;F++){const O=dist(p,b,t[2*F],t[2*F+1]);O<$&&(w=F,$=O)}const S=t[2*w],N=t[2*w+1];$=1/0;for(let F=0;F<l;F++){if(F===w)continue;const O=dist(S,N,t[2*F],t[2*F+1]);O<$&&O>0&&(P=F,$=O)}let R=t[2*P],T=t[2*P+1],I=1/0;for(let F=0;F<l;F++){if(F===w||F===P)continue;const O=circumradius(S,N,R,T,t[2*F],t[2*F+1]);O<I&&(_=F,I=O)}let L=t[2*_],H=t[2*_+1];if(I===1/0){for(let Z=0;Z<l;Z++)this._dists[Z]=t[2*Z]-t[0]||t[2*Z+1]-t[1];quicksort(this._ids,this._dists,0,l-1);const F=new Uint32Array(l);let O=0;for(let Z=0,V=-1/0;Z<l;Z++){const q=this._ids[Z];this._dists[q]>V&&(F[O++]=q,V=this._dists[q])}this.hull=F.subarray(0,O),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(orient2d(S,N,R,T,L,H)<0){const F=P,O=R,Z=T;P=_,R=L,T=H,_=F,L=O,H=Z}const G=circumcenter(S,N,R,T,L,H);this._cx=G.x,this._cy=G.y;for(let F=0;F<l;F++)this._dists[F]=dist(t[2*F],t[2*F+1],G.x,G.y);quicksort(this._ids,this._dists,0,l-1),this._hullStart=w;let j=3;r[w]=n[_]=P,r[P]=n[w]=_,r[_]=n[P]=w,i[w]=0,i[P]=1,i[_]=2,o.fill(-1),o[this._hashKey(S,N)]=w,o[this._hashKey(R,T)]=P,o[this._hashKey(L,H)]=_,this.trianglesLen=0,this._addTriangle(w,P,_,-1,-1,-1);for(let F=0,O,Z;F<this._ids.length;F++){const V=this._ids[F],q=t[2*V],z=t[2*V+1];if(F>0&&Math.abs(q-O)<=EPSILON&&Math.abs(z-Z)<=EPSILON||(O=q,Z=z,V===w||V===P||V===_))continue;let U=0;for(let ie=0,ae=this._hashKey(q,z);ie<this._hashSize&&(U=o[(ae+ie)%this._hashSize],!(U!==-1&&U!==r[U]));ie++);U=n[U];let W=U,Q;for(;Q=r[W],orient2d(q,z,t[2*W],t[2*W+1],t[2*Q],t[2*Q+1])>=0;)if(W=Q,W===U){W=-1;break}if(W===-1)continue;let J=this._addTriangle(W,V,r[W],-1,-1,i[W]);i[V]=this._legalize(J+2),i[W]=J,j++;let te=r[W];for(;Q=r[te],orient2d(q,z,t[2*te],t[2*te+1],t[2*Q],t[2*Q+1])<0;)J=this._addTriangle(te,V,Q,i[V],-1,i[te]),i[V]=this._legalize(J+2),r[te]=te,j--,te=Q;if(W===U)for(;Q=n[W],orient2d(q,z,t[2*Q],t[2*Q+1],t[2*W],t[2*W+1])<0;)J=this._addTriangle(Q,V,W,-1,i[W],i[Q]),this._legalize(J+2),i[Q]=J,r[W]=W,j--,W=Q;this._hullStart=n[V]=W,r[W]=n[te]=V,r[V]=te,o[this._hashKey(q,z)]=V,o[this._hashKey(t[2*W],t[2*W+1])]=W}this.hull=new Uint32Array(j);for(let F=0,O=this._hullStart;F<j;F++)this.hull[F]=O,O=r[O];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(pseudoAngle(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,l=0;for(;;){const f=r[t],h=t-t%3;if(l=h+(t+2)%3,f===-1){if(o===0)break;t=EDGE_STACK[--o];continue}const d=f-f%3,g=h+(t+1)%3,p=d+(f+2)%3,b=n[l],$=n[t],w=n[g],P=n[p];if(inCircle(i[2*b],i[2*b+1],i[2*$],i[2*$+1],i[2*w],i[2*w+1],i[2*P],i[2*P+1])){n[t]=P,n[f]=b;const S=r[p];if(S===-1){let R=this._hullStart;do{if(this._hullTri[R]===p){this._hullTri[R]=t;break}R=this._hullPrev[R]}while(R!==this._hullStart)}this._link(t,S),this._link(f,r[l]),this._link(l,p);const N=d+(f+1)%3;o<EDGE_STACK.length&&(EDGE_STACK[o++]=N)}else{if(o===0)break;t=EDGE_STACK[--o]}}return l}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,l){const f=this.trianglesLen;return this._triangles[f]=t,this._triangles[f+1]=n,this._triangles[f+2]=r,this._link(f,i),this._link(f+1,o),this._link(f+2,l),this.trianglesLen+=3,f}}function pseudoAngle(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function dist(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function inCircle(e,t,n,r,i,o,l,f){const h=e-l,d=t-f,g=n-l,p=r-f,b=i-l,$=o-f,w=h*h+d*d,P=g*g+p*p,_=b*b+$*$;return h*(p*_-P*$)-d*(g*_-P*b)+w*(g*$-p*b)<0}function circumradius(e,t,n,r,i,o){const l=n-e,f=r-t,h=i-e,d=o-t,g=l*l+f*f,p=h*h+d*d,b=.5/(l*d-f*h),$=(d*g-f*p)*b,w=(l*p-h*g)*b;return $*$+w*w}function circumcenter(e,t,n,r,i,o){const l=n-e,f=r-t,h=i-e,d=o-t,g=l*l+f*f,p=h*h+d*d,b=.5/(l*d-f*h),$=e+(d*g-f*p)*b,w=t+(l*p-h*g)*b;return{x:$,y:w}}function quicksort(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],l=t[o];let f=i-1;for(;f>=n&&t[e[f]]>l;)e[f+1]=e[f--];e[f+1]=o}else{const i=n+r>>1;let o=n+1,l=r;swap(e,i,o),t[e[n]]>t[e[r]]&&swap(e,n,r),t[e[o]]>t[e[r]]&&swap(e,o,r),t[e[n]]>t[e[o]]&&swap(e,n,o);const f=e[o],h=t[f];for(;;){do o++;while(t[e[o]]<h);do l--;while(t[e[l]]>h);if(l<o)break;swap(e,o,l)}e[n+1]=e[l],e[l]=f,r-o+1>=l-n?(quicksort(e,t,o,r),quicksort(e,t,n,l-1)):(quicksort(e,t,n,l-1),quicksort(e,t,o,r))}}function swap(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function defaultGetX(e){return e[0]}function defaultGetY(e){return e[1]}const epsilon$2=1e-6;class Path{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>epsilon$2||Math.abs(this._y1-o)>epsilon$2)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Polygon{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class Voronoi{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this,o=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let $=0,w=0,P=r.length,_,S;$<P;$+=3,w+=2){const N=r[$]*2,R=r[$+1]*2,T=r[$+2]*2,I=t[N],L=t[N+1],H=t[R],G=t[R+1],j=t[T],F=t[T+1],O=H-I,Z=G-L,V=j-I,q=F-L,z=(O*q-Z*V)*2;if(Math.abs(z)<1e-9){let U=1e9;const W=r[0]*2;U*=Math.sign((t[W]-I)*q-(t[W+1]-L)*V),_=(I+j)/2-U*q,S=(L+F)/2+U*V}else{const U=1/z,W=O*O+Z*Z,Q=V*V+q*q;_=I+(q*W-Z*Q)*U,S=L+(O*Q-V*W)*U}o[w]=_,o[w+1]=S}let l=n[n.length-1],f,h=l*4,d,g=t[2*l],p,b=t[2*l+1];i.fill(0);for(let $=0;$<n.length;++$)l=n[$],f=h,d=g,p=b,h=l*4,g=t[2*l],b=t[2*l+1],i[f+2]=i[h]=p-b,i[f+3]=i[h+1]=g-d}render(t){const n=t==null?t=new Path:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:l,vectors:f}=this;if(o.length<=1)return null;for(let g=0,p=r.length;g<p;++g){const b=r[g];if(b<g)continue;const $=Math.floor(g/3)*2,w=Math.floor(b/3)*2,P=l[$],_=l[$+1],S=l[w],N=l[w+1];this._renderSegment(P,_,S,N,t)}let h,d=o[o.length-1];for(let g=0;g<o.length;++g){h=d,d=o[g];const p=Math.floor(i[d]/3)*2,b=l[p],$=l[p+1],w=h*4,P=this._project(b,$,f[w+2],f[w+3]);P&&this._renderSegment(b,$,P[0],P[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Path:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Path:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let l=2;l<o;l+=2)(i[l]!==i[l-2]||i[l+1]!==i[l-1])&&n.lineTo(i[l],i[l+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new Polygon;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let l;const f=this._regioncode(t,n),h=this._regioncode(r,i);f===0&&h===0?(o.moveTo(t,n),o.lineTo(r,i)):(l=this._clipSegment(t,n,r,i,f,h))&&(o.moveTo(l[0],l[1]),o.lineTo(l[2],l[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,l=n.length;o<l;o+=2)for(let f=0,h=i.length;f<h;f+=2)if(n[o]==i[f]&&n[o+1]==i[f+1]&&n[(o+2)%l]==i[(f+h-2)%h]&&n[(o+3)%l]==i[(f+h-1)%h]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,l=r[t];if(l===-1)return null;const f=[];let h=l;do{const d=Math.floor(h/3);if(f.push(n[d*2],n[d*2+1]),h=h%3===2?h-2:h+1,o[h]!==t)break;h=i[h]}while(h!==l&&h!==-1);return f}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n)}_clipFinite(t,n){const r=n.length;let i=null,o,l,f=n[r-2],h=n[r-1],d,g=this._regioncode(f,h),p,b=0;for(let $=0;$<r;$+=2)if(o=f,l=h,f=n[$],h=n[$+1],d=g,g=this._regioncode(f,h),d===0&&g===0)p=b,b=0,i?i.push(f,h):i=[f,h];else{let w,P,_,S,N;if(d===0){if((w=this._clipSegment(o,l,f,h,d,g))===null)continue;[P,_,S,N]=w}else{if((w=this._clipSegment(f,h,o,l,g,d))===null)continue;[S,N,P,_]=w,p=b,b=this._edgecode(P,_),p&&b&&this._edge(t,p,b,i,i.length),i?i.push(P,_):i=[P,_]}p=b,b=this._edgecode(S,N),p&&b&&this._edge(t,p,b,i,i.length),i?i.push(S,N):i=[S,N]}if(i)p=b,b=this._edgecode(i[0],i[1]),p&&b&&this._edge(t,p,b,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,l){for(;;){if(o===0&&l===0)return[t,n,r,i];if(o&l)return null;let f,h,d=o||l;d&8?(f=t+(r-t)*(this.ymax-n)/(i-n),h=this.ymax):d&4?(f=t+(r-t)*(this.ymin-n)/(i-n),h=this.ymin):d&2?(h=n+(i-n)*(this.xmax-t)/(r-t),f=this.xmax):(h=n+(i-n)*(this.xmin-t)/(r-t),f=this.xmin),o?(t=f,n=h,o=this._regioncode(t,n)):(r=f,i=h,l=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,l){let f=Array.from(n),h;if((h=this._project(f[0],f[1],r,i))&&f.unshift(h[0],h[1]),(h=this._project(f[f.length-2],f[f.length-1],o,l))&&f.push(h[0],h[1]),f=this._clipFinite(t,f))for(let d=0,g=f.length,p,b=this._edgecode(f[g-2],f[g-1]);d<g;d+=2)p=b,b=this._edgecode(f[d],f[d+1]),p&&b&&(d=this._edge(t,p,b,f,d),g=f.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(f=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return f}_edge(t,n,r,i,o){for(;n!==r;){let l,f;switch(n){case 5:n=4;continue;case 4:n=6,l=this.xmax,f=this.ymin;break;case 6:n=2;continue;case 2:n=10,l=this.xmax,f=this.ymax;break;case 10:n=8;continue;case 8:n=9,l=this.xmin,f=this.ymax;break;case 9:n=1;continue;case 1:n=5,l=this.xmin,f=this.ymin;break}(i[o]!==l||i[o+1]!==f)&&this.contains(t,l,f)&&(i.splice(o,0,l,f),o+=2)}if(i.length>4)for(let l=0;l<i.length;l+=2){const f=(l+2)%i.length,h=(l+4)%i.length;(i[l]===i[f]&&i[f]===i[h]||i[l+1]===i[f+1]&&i[f+1]===i[h+1])&&(i.splice(f,2),l-=2)}return o}_project(t,n,r,i){let o=1/0,l,f,h;if(i<0){if(n<=this.ymin)return null;(l=(this.ymin-n)/i)<o&&(h=this.ymin,f=t+(o=l)*r)}else if(i>0){if(n>=this.ymax)return null;(l=(this.ymax-n)/i)<o&&(h=this.ymax,f=t+(o=l)*r)}if(r>0){if(t>=this.xmax)return null;(l=(this.xmax-t)/r)<o&&(f=this.xmax,h=n+(o=l)*i)}else if(r<0){if(t<=this.xmin)return null;(l=(this.xmin-t)/r)<o&&(f=this.xmin,h=n+(o=l)*i)}return[f,h]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const tau$2=2*Math.PI,pow$2=Math.pow;function pointX(e){return e[0]}function pointY(e){return e[1]}function collinear(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],l=2*t[r+2];if((n[l]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[l+1]-n[i+1])>1e-10)return!1}return!0}function jitter(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Delaunay{static from(t,n=pointX,r=pointY,i){return new Delaunay("length"in t?flatArray(t,n,r,i):Float64Array.from(flatIterable(t,n,r,i)))}constructor(t){this._delaunator=new Delaunator(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&collinear(t)){this.collinear=Int32Array.from({length:n.length/2},(b,$)=>$).sort((b,$)=>n[2*b]-n[2*$]||n[2*b+1]-n[2*$+1]);const h=this.collinear[0],d=this.collinear[this.collinear.length-1],g=[n[2*h],n[2*h+1],n[2*d],n[2*d+1]],p=1e-8*Math.hypot(g[3]-g[1],g[2]-g[0]);for(let b=0,$=n.length/2;b<$;++b){const w=jitter(n[2*b],n[2*b+1],p);n[2*b]=w[0],n[2*b+1]=w[1]}this._delaunator=new Delaunator(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,l=this.inedges.fill(-1),f=this._hullIndex.fill(-1);for(let h=0,d=r.length;h<d;++h){const g=o[h%3===2?h-2:h+1];(r[h]===-1||l[g]===-1)&&(l[g]=h)}for(let h=0,d=i.length;h<d;++h)f[i[h]]=h;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],l[i[0]]=1,i.length===2&&(l[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Voronoi(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:l,collinear:f}=this;if(f){const p=f.indexOf(t);p>0&&(yield f[p-1]),p<f.length-1&&(yield f[p+1]);return}const h=n[t];if(h===-1)return;let d=h,g=-1;do{if(yield g=l[d],d=d%3===2?d-2:d+1,l[d]!==t)return;if(d=o[d],d===-1){const p=r[(i[t]+1)%r.length];p!==g&&(yield p);return}}while(d!==h)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:l,halfedges:f,triangles:h,points:d}=this;if(i[t]===-1||!d.length)return(t+1)%(d.length>>1);let g=t,p=pow$2(n-d[t*2],2)+pow$2(r-d[t*2+1],2);const b=i[t];let $=b;do{let w=h[$];const P=pow$2(n-d[w*2],2)+pow$2(r-d[w*2+1],2);if(P<p&&(p=P,g=w),$=$%3===2?$-2:$+1,h[$]!==t)break;if($=f[$],$===-1){if($=o[(l[t]+1)%o.length],$!==w&&pow$2(n-d[$*2],2)+pow$2(r-d[$*2+1],2)<p)return $;break}}while($!==b);return g}render(t){const n=t==null?t=new Path:void 0,{points:r,halfedges:i,triangles:o}=this;for(let l=0,f=i.length;l<f;++l){const h=i[l];if(h<l)continue;const d=o[l]*2,g=o[h]*2;t.moveTo(r[d],r[d+1]),t.lineTo(r[g],r[g+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Path:void 0,{points:i}=this;for(let o=0,l=i.length;o<l;o+=2){const f=i[o],h=i[o+1];t.moveTo(f+n,h),t.arc(f,h,n,0,tau$2)}return r&&r.value()}renderHull(t){const n=t==null?t=new Path:void 0,{hull:r,points:i}=this,o=r[0]*2,l=r.length;t.moveTo(i[o],i[o+1]);for(let f=1;f<l;++f){const h=2*r[f];t.lineTo(i[h],i[h+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Polygon;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Path:void 0,{points:i,triangles:o}=this,l=o[t*=3]*2,f=o[t+1]*2,h=o[t+2]*2;return n.moveTo(i[l],i[l+1]),n.lineTo(i[f],i[f+1]),n.lineTo(i[h],i[h+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Polygon;return this.renderTriangle(t,n),n.value()}}function flatArray(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let l=0;l<i;++l){const f=e[l];o[l*2]=t.call(r,f,l,e),o[l*2+1]=n.call(r,f,l,e)}return o}function*flatIterable(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}var EOL={},EOF={},QUOTE=34,NEWLINE=10,RETURN=13;function objectConverter(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function customConverter(e,t){var n=objectConverter(e);return function(r,i){return t(n(r),i,e)}}function inferColumns(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function pad$1(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function formatYear$1(e){return e<0?"-"+pad$1(-e,6):e>9999?"+"+pad$1(e,6):pad$1(e,4)}function formatDate$1(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":formatYear$1(e.getUTCFullYear())+"-"+pad$1(e.getUTCMonth()+1,2)+"-"+pad$1(e.getUTCDate(),2)+(i?"T"+pad$1(t,2)+":"+pad$1(n,2)+":"+pad$1(r,2)+"."+pad$1(i,3)+"Z":r?"T"+pad$1(t,2)+":"+pad$1(n,2)+":"+pad$1(r,2)+"Z":n||t?"T"+pad$1(t,2)+":"+pad$1(n,2)+"Z":"")}function dsvFormat(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(p,b){var $,w,P=i(p,function(_,S){if($)return $(_,S-1);w=_,$=b?customConverter(_,b):objectConverter(_)});return P.columns=w||[],P}function i(p,b){var $=[],w=p.length,P=0,_=0,S,N=w<=0,R=!1;p.charCodeAt(w-1)===NEWLINE&&--w,p.charCodeAt(w-1)===RETURN&&--w;function T(){if(N)return EOF;if(R)return R=!1,EOL;var L,H=P,G;if(p.charCodeAt(H)===QUOTE){for(;P++<w&&p.charCodeAt(P)!==QUOTE||p.charCodeAt(++P)===QUOTE;);return(L=P)>=w?N=!0:(G=p.charCodeAt(P++))===NEWLINE?R=!0:G===RETURN&&(R=!0,p.charCodeAt(P)===NEWLINE&&++P),p.slice(H+1,L-1).replace(/""/g,'"')}for(;P<w;){if((G=p.charCodeAt(L=P++))===NEWLINE)R=!0;else if(G===RETURN)R=!0,p.charCodeAt(P)===NEWLINE&&++P;else if(G!==n)continue;return p.slice(H,L)}return N=!0,p.slice(H,w)}for(;(S=T())!==EOF;){for(var I=[];S!==EOL&&S!==EOF;)I.push(S),S=T();b&&(I=b(I,_++))==null||$.push(I)}return $}function o(p,b){return p.map(function($){return b.map(function(w){return g($[w])}).join(e)})}function l(p,b){return b==null&&(b=inferColumns(p)),[b.map(g).join(e)].concat(o(p,b)).join(`
`)}function f(p,b){return b==null&&(b=inferColumns(p)),o(p,b).join(`
`)}function h(p){return p.map(d).join(`
`)}function d(p){return p.map(g).join(e)}function g(p){return p==null?"":p instanceof Date?formatDate$1(p):t.test(p+="")?'"'+p.replace(/"/g,'""')+'"':p}return{parse:r,parseRows:i,format:l,formatBody:f,formatRows:h,formatRow:d,formatValue:g}}var csv$1=dsvFormat(","),csvParse=csv$1.parse,csvParseRows=csv$1.parseRows,csvFormat=csv$1.format,csvFormatBody=csv$1.formatBody,csvFormatRows=csv$1.formatRows,csvFormatRow=csv$1.formatRow,csvFormatValue=csv$1.formatValue,tsv$1=dsvFormat("	"),tsvParse=tsv$1.parse,tsvParseRows=tsv$1.parseRows,tsvFormat=tsv$1.format,tsvFormatBody=tsv$1.formatBody,tsvFormatRows=tsv$1.formatRows,tsvFormatRow=tsv$1.formatRow,tsvFormatValue=tsv$1.formatValue;function autoType(e){for(var t in e){var n=e[t].trim(),r,i;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(i=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))fixtz&&!!i[4]&&!i[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const fixtz=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function responseBlob(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.blob()}function blob(e,t){return fetch(e,t).then(responseBlob)}function responseArrayBuffer(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.arrayBuffer()}function buffer(e,t){return fetch(e,t).then(responseArrayBuffer)}function responseText(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function text(e,t){return fetch(e,t).then(responseText)}function dsvParse(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),text(t,n).then(function(i){return e(i,r)})}}function dsv(e,t,n,r){arguments.length===3&&typeof n=="function"&&(r=n,n=void 0);var i=dsvFormat(e);return text(t,n).then(function(o){return i.parse(o,r)})}var csv=dsvParse(csvParse),tsv=dsvParse(tsvParse);function image(e,t){return new Promise(function(n,r){var i=new Image;for(var o in t)i[o]=t[o];i.onerror=r,i.onload=function(){n(i)},i.src=e})}function responseJson(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(!(e.status===204||e.status===205))return e.json()}function json(e,t){return fetch(e,t).then(responseJson)}function parser(e){return(t,n)=>text(t,n).then(r=>new DOMParser().parseFromString(r,e))}var xml=parser("application/xml"),html=parser("text/html"),svg=parser("image/svg+xml");function center(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,l=n.length,f,h=0,d=0;for(o=0;o<l;++o)f=n[o],h+=f.x,d+=f.y;for(h=(h/l-e)*r,d=(d/l-t)*r,o=0;o<l;++o)f=n[o],f.x-=h,f.y-=d}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function tree_add(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return add(this.cover(t,n),t,n,e)}function add(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,l={data:r},f=e._x0,h=e._y0,d=e._x1,g=e._y1,p,b,$,w,P,_,S,N;if(!o)return e._root=l,e;for(;o.length;)if((P=t>=(p=(f+d)/2))?f=p:d=p,(_=n>=(b=(h+g)/2))?h=b:g=b,i=o,!(o=o[S=_<<1|P]))return i[S]=l,e;if($=+e._x.call(null,o.data),w=+e._y.call(null,o.data),t===$&&n===w)return l.next=o,i?i[S]=l:e._root=l,e;do i=i?i[S]=new Array(4):e._root=new Array(4),(P=t>=(p=(f+d)/2))?f=p:d=p,(_=n>=(b=(h+g)/2))?h=b:g=b;while((S=_<<1|P)===(N=(w>=b)<<1|$>=p));return i[N]=o,i[S]=l,e}function addAll(e){var t,n,r=e.length,i,o,l=new Array(r),f=new Array(r),h=1/0,d=1/0,g=-1/0,p=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(l[n]=i,f[n]=o,i<h&&(h=i),i>g&&(g=i),o<d&&(d=o),o>p&&(p=o));if(h>g||d>p)return this;for(this.cover(h,d).cover(g,p),n=0;n<r;++n)add(this,l[n],f[n],e[n]);return this}function tree_cover(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var l=i-n||1,f=this._root,h,d;n>e||e>=i||r>t||t>=o;)switch(d=(t<r)<<1|e<n,h=new Array(4),h[d]=f,f=h,l*=2,d){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l;break}this._root&&this._root.length&&(this._root=f)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function tree_data(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function tree_extent(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Quad(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function tree_find(e,t,n){var r,i=this._x0,o=this._y0,l,f,h,d,g=this._x1,p=this._y1,b=[],$=this._root,w,P;for($&&b.push(new Quad($,i,o,g,p)),n==null?n=1/0:(i=e-n,o=t-n,g=e+n,p=t+n,n*=n);w=b.pop();)if(!(!($=w.node)||(l=w.x0)>g||(f=w.y0)>p||(h=w.x1)<i||(d=w.y1)<o))if($.length){var _=(l+h)/2,S=(f+d)/2;b.push(new Quad($[3],_,S,h,d),new Quad($[2],l,S,_,d),new Quad($[1],_,f,h,S),new Quad($[0],l,f,_,S)),(P=(t>=S)<<1|e>=_)&&(w=b[b.length-1],b[b.length-1]=b[b.length-1-P],b[b.length-1-P]=w)}else{var N=e-+this._x.call(null,$.data),R=t-+this._y.call(null,$.data),T=N*N+R*R;if(T<n){var I=Math.sqrt(n=T);i=e-I,o=t-I,g=e+I,p=t+I,r=$.data}}return r}function tree_remove(e){if(isNaN(g=+this._x.call(null,e))||isNaN(p=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,l=this._x0,f=this._y0,h=this._x1,d=this._y1,g,p,b,$,w,P,_,S;if(!n)return this;if(n.length)for(;;){if((w=g>=(b=(l+h)/2))?l=b:h=b,(P=p>=($=(f+d)/2))?f=$:d=$,t=n,!(n=n[_=P<<1|w]))return this;if(!n.length)break;(t[_+1&3]||t[_+2&3]||t[_+3&3])&&(r=t,S=_)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[_]=o:delete t[_],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[S]=n:this._root=n),this):(this._root=o,this)}function removeAll(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function tree_root(){return this._root}function tree_size(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function tree_visit(e){var t=[],n,r=this._root,i,o,l,f,h;for(r&&t.push(new Quad(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,l=n.y0,f=n.x1,h=n.y1)&&r.length){var d=(o+f)/2,g=(l+h)/2;(i=r[3])&&t.push(new Quad(i,d,g,f,h)),(i=r[2])&&t.push(new Quad(i,o,g,d,h)),(i=r[1])&&t.push(new Quad(i,d,l,f,g)),(i=r[0])&&t.push(new Quad(i,o,l,d,g))}return this}function tree_visitAfter(e){var t=[],n=[],r;for(this._root&&t.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,l=r.x0,f=r.y0,h=r.x1,d=r.y1,g=(l+h)/2,p=(f+d)/2;(o=i[0])&&t.push(new Quad(o,l,f,g,p)),(o=i[1])&&t.push(new Quad(o,g,f,h,p)),(o=i[2])&&t.push(new Quad(o,l,p,g,d)),(o=i[3])&&t.push(new Quad(o,g,p,h,d))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function defaultX(e){return e[0]}function tree_x(e){return arguments.length?(this._x=e,this):this._x}function defaultY(e){return e[1]}function tree_y(e){return arguments.length?(this._y=e,this):this._y}function quadtree(e,t,n){var r=new Quadtree(t==null?defaultX:t,n==null?defaultY:n,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Quadtree(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function leaf_copy(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var e=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=leaf_copy(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=leaf_copy(r));return e};treeProto.add=tree_add;treeProto.addAll=addAll;treeProto.cover=tree_cover;treeProto.data=tree_data;treeProto.extent=tree_extent;treeProto.find=tree_find;treeProto.remove=tree_remove;treeProto.removeAll=removeAll;treeProto.root=tree_root;treeProto.size=tree_size;treeProto.visit=tree_visit;treeProto.visitAfter=tree_visitAfter;treeProto.x=tree_x;treeProto.y=tree_y;function constant$4(e){return function(){return e}}function jiggle(e){return(e()-.5)*1e-6}function x$3(e){return e.x+e.vx}function y$3(e){return e.y+e.vy}function collide(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=constant$4(e==null?1:+e));function l(){for(var d,g=t.length,p,b,$,w,P,_,S=0;S<o;++S)for(p=quadtree(t,x$3,y$3).visitAfter(f),d=0;d<g;++d)b=t[d],P=n[b.index],_=P*P,$=b.x+b.vx,w=b.y+b.vy,p.visit(N);function N(R,T,I,L,H){var G=R.data,j=R.r,F=P+j;if(G){if(G.index>b.index){var O=$-G.x-G.vx,Z=w-G.y-G.vy,V=O*O+Z*Z;V<F*F&&(O===0&&(O=jiggle(r),V+=O*O),Z===0&&(Z=jiggle(r),V+=Z*Z),V=(F-(V=Math.sqrt(V)))/V*i,b.vx+=(O*=V)*(F=(j*=j)/(_+j)),b.vy+=(Z*=V)*F,G.vx-=O*(F=1-F),G.vy-=Z*F)}return}return T>$+F||L<$-F||I>w+F||H<w-F}}function f(d){if(d.data)return d.r=n[d.data.index];for(var g=d.r=0;g<4;++g)d[g]&&d[g].r>d.r&&(d.r=d[g].r)}function h(){if(!!t){var d,g=t.length,p;for(n=new Array(g),d=0;d<g;++d)p=t[d],n[p.index]=+e(p,d,t)}}return l.initialize=function(d,g){t=d,r=g,h()},l.iterations=function(d){return arguments.length?(o=+d,l):o},l.strength=function(d){return arguments.length?(i=+d,l):i},l.radius=function(d){return arguments.length?(e=typeof d=="function"?d:constant$4(+d),h(),l):e},l}function index$3(e){return e.index}function find(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function link$2(e){var t=index$3,n=p,r,i=constant$4(30),o,l,f,h,d,g=1;e==null&&(e=[]);function p(_){return 1/Math.min(f[_.source.index],f[_.target.index])}function b(_){for(var S=0,N=e.length;S<g;++S)for(var R=0,T,I,L,H,G,j,F;R<N;++R)T=e[R],I=T.source,L=T.target,H=L.x+L.vx-I.x-I.vx||jiggle(d),G=L.y+L.vy-I.y-I.vy||jiggle(d),j=Math.sqrt(H*H+G*G),j=(j-o[R])/j*_*r[R],H*=j,G*=j,L.vx-=H*(F=h[R]),L.vy-=G*F,I.vx+=H*(F=1-F),I.vy+=G*F}function $(){if(!!l){var _,S=l.length,N=e.length,R=new Map(l.map((I,L)=>[t(I,L,l),I])),T;for(_=0,f=new Array(S);_<N;++_)T=e[_],T.index=_,typeof T.source!="object"&&(T.source=find(R,T.source)),typeof T.target!="object"&&(T.target=find(R,T.target)),f[T.source.index]=(f[T.source.index]||0)+1,f[T.target.index]=(f[T.target.index]||0)+1;for(_=0,h=new Array(N);_<N;++_)T=e[_],h[_]=f[T.source.index]/(f[T.source.index]+f[T.target.index]);r=new Array(N),w(),o=new Array(N),P()}}function w(){if(!!l)for(var _=0,S=e.length;_<S;++_)r[_]=+n(e[_],_,e)}function P(){if(!!l)for(var _=0,S=e.length;_<S;++_)o[_]=+i(e[_],_,e)}return b.initialize=function(_,S){l=_,d=S,$()},b.links=function(_){return arguments.length?(e=_,$(),b):e},b.id=function(_){return arguments.length?(t=_,b):t},b.iterations=function(_){return arguments.length?(g=+_,b):g},b.strength=function(_){return arguments.length?(n=typeof _=="function"?_:constant$4(+_),w(),b):n},b.distance=function(_){return arguments.length?(i=typeof _=="function"?_:constant$4(+_),P(),b):i},b}const a$2=1664525,c$4=1013904223,m$1=4294967296;function lcg$2(){let e=1;return()=>(e=(a$2*e+c$4)%m$1)/m$1}function x$2(e){return e.x}function y$2(e){return e.y}var initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5));function simulation(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,l=.6,f=new Map,h=timer(p),d=dispatch("tick","end"),g=lcg$2();e==null&&(e=[]);function p(){b(),d.call("tick",t),n<r&&(h.stop(),d.call("end",t))}function b(P){var _,S=e.length,N;P===void 0&&(P=1);for(var R=0;R<P;++R)for(n+=(o-n)*i,f.forEach(function(T){T(n)}),_=0;_<S;++_)N=e[_],N.fx==null?N.x+=N.vx*=l:(N.x=N.fx,N.vx=0),N.fy==null?N.y+=N.vy*=l:(N.y=N.fy,N.vy=0);return t}function $(){for(var P=0,_=e.length,S;P<_;++P){if(S=e[P],S.index=P,S.fx!=null&&(S.x=S.fx),S.fy!=null&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var N=initialRadius*Math.sqrt(.5+P),R=P*initialAngle;S.x=N*Math.cos(R),S.y=N*Math.sin(R)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function w(P){return P.initialize&&P.initialize(e,g),P}return $(),t={tick:b,restart:function(){return h.restart(p),t},stop:function(){return h.stop(),t},nodes:function(P){return arguments.length?(e=P,$(),f.forEach(w),t):e},alpha:function(P){return arguments.length?(n=+P,t):n},alphaMin:function(P){return arguments.length?(r=+P,t):r},alphaDecay:function(P){return arguments.length?(i=+P,t):+i},alphaTarget:function(P){return arguments.length?(o=+P,t):o},velocityDecay:function(P){return arguments.length?(l=1-P,t):1-l},randomSource:function(P){return arguments.length?(g=P,f.forEach(w),t):g},force:function(P,_){return arguments.length>1?(_==null?f.delete(P):f.set(P,w(_)),t):f.get(P)},find:function(P,_,S){var N=0,R=e.length,T,I,L,H,G;for(S==null?S=1/0:S*=S,N=0;N<R;++N)H=e[N],T=P-H.x,I=_-H.y,L=T*T+I*I,L<S&&(G=H,S=L);return G},on:function(P,_){return arguments.length>1?(d.on(P,_),t):d.on(P)}}}function manyBody(){var e,t,n,r,i=constant$4(-30),o,l=1,f=1/0,h=.81;function d($){var w,P=e.length,_=quadtree(e,x$2,y$2).visitAfter(p);for(r=$,w=0;w<P;++w)t=e[w],_.visit(b)}function g(){if(!!e){var $,w=e.length,P;for(o=new Array(w),$=0;$<w;++$)P=e[$],o[P.index]=+i(P,$,e)}}function p($){var w=0,P,_,S=0,N,R,T;if($.length){for(N=R=T=0;T<4;++T)(P=$[T])&&(_=Math.abs(P.value))&&(w+=P.value,S+=_,N+=_*P.x,R+=_*P.y);$.x=N/S,$.y=R/S}else{P=$,P.x=P.data.x,P.y=P.data.y;do w+=o[P.data.index];while(P=P.next)}$.value=w}function b($,w,P,_){if(!$.value)return!0;var S=$.x-t.x,N=$.y-t.y,R=_-w,T=S*S+N*N;if(R*R/h<T)return T<f&&(S===0&&(S=jiggle(n),T+=S*S),N===0&&(N=jiggle(n),T+=N*N),T<l&&(T=Math.sqrt(l*T)),t.vx+=S*$.value*r/T,t.vy+=N*$.value*r/T),!0;if($.length||T>=f)return;($.data!==t||$.next)&&(S===0&&(S=jiggle(n),T+=S*S),N===0&&(N=jiggle(n),T+=N*N),T<l&&(T=Math.sqrt(l*T)));do $.data!==t&&(R=o[$.data.index]*r/T,t.vx+=S*R,t.vy+=N*R);while($=$.next)}return d.initialize=function($,w){e=$,n=w,g()},d.strength=function($){return arguments.length?(i=typeof $=="function"?$:constant$4(+$),g(),d):i},d.distanceMin=function($){return arguments.length?(l=$*$,d):Math.sqrt(l)},d.distanceMax=function($){return arguments.length?(f=$*$,d):Math.sqrt(f)},d.theta=function($){return arguments.length?(h=$*$,d):Math.sqrt(h)},d}function radial$1(e,t,n){var r,i=constant$4(.1),o,l;typeof e!="function"&&(e=constant$4(+e)),t==null&&(t=0),n==null&&(n=0);function f(d){for(var g=0,p=r.length;g<p;++g){var b=r[g],$=b.x-t||1e-6,w=b.y-n||1e-6,P=Math.sqrt($*$+w*w),_=(l[g]-P)*o[g]*d/P;b.vx+=$*_,b.vy+=w*_}}function h(){if(!!r){var d,g=r.length;for(o=new Array(g),l=new Array(g),d=0;d<g;++d)l[d]=+e(r[d],d,r),o[d]=isNaN(l[d])?0:+i(r[d],d,r)}}return f.initialize=function(d){r=d,h()},f.strength=function(d){return arguments.length?(i=typeof d=="function"?d:constant$4(+d),h(),f):i},f.radius=function(d){return arguments.length?(e=typeof d=="function"?d:constant$4(+d),h(),f):e},f.x=function(d){return arguments.length?(t=+d,f):t},f.y=function(d){return arguments.length?(n=+d,f):n},f}function x$1(e){var t=constant$4(.1),n,r,i;typeof e!="function"&&(e=constant$4(e==null?0:+e));function o(f){for(var h=0,d=n.length,g;h<d;++h)g=n[h],g.vx+=(i[h]-g.x)*r[h]*f}function l(){if(!!n){var f,h=n.length;for(r=new Array(h),i=new Array(h),f=0;f<h;++f)r[f]=isNaN(i[f]=+e(n[f],f,n))?0:+t(n[f],f,n)}}return o.initialize=function(f){n=f,l()},o.strength=function(f){return arguments.length?(t=typeof f=="function"?f:constant$4(+f),l(),o):t},o.x=function(f){return arguments.length?(e=typeof f=="function"?f:constant$4(+f),l(),o):e},o}function y$1(e){var t=constant$4(.1),n,r,i;typeof e!="function"&&(e=constant$4(e==null?0:+e));function o(f){for(var h=0,d=n.length,g;h<d;++h)g=n[h],g.vy+=(i[h]-g.y)*r[h]*f}function l(){if(!!n){var f,h=n.length;for(r=new Array(h),i=new Array(h),f=0;f<h;++f)r[f]=isNaN(i[f]=+e(n[f],f,n))?0:+t(n[f],f,n)}}return o.initialize=function(f){n=f,l()},o.strength=function(f){return arguments.length?(t=typeof f=="function"?f:constant$4(+f),l(),o):t},o.y=function(f){return arguments.length?(e=typeof f=="function"?f:constant$4(+f),l(),o):e},o}function formatDecimal(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function formatDecimalParts(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function exponent(e){return e=formatDecimalParts(Math.abs(e)),e?e[1]:NaN}function formatGroup(e,t){return function(n,r){for(var i=n.length,o=[],l=0,f=e[0],h=0;i>0&&f>0&&(h+f+1>r&&(f=Math.max(1,r-h)),o.push(n.substring(i-=f,i+f)),!((h+=f+1)>r));)f=e[l=(l+1)%e.length];return o.reverse().join(t)}}function formatNumerals(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(e){if(!(t=re.exec(e)))throw new Error("invalid format: "+e);var t;return new FormatSpecifier({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var prefixExponent;function formatPrefixAuto(e,t){var n=formatDecimalParts(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return o===l?r:o>l?r+new Array(o-l+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+formatDecimalParts(e,Math.max(0,t+o-1))[0]}function formatRounded(e,t){var n=formatDecimalParts(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var formatTypes={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:formatDecimal,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>formatRounded(e*100,t),r:formatRounded,s:formatPrefixAuto,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function identity$6(e){return e}var map=Array.prototype.map,prefixes=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(e){var t=e.grouping===void 0||e.thousands===void 0?identity$6:formatGroup(map.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?identity$6:formatNumerals(map.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",f=e.minus===void 0?"\u2212":e.minus+"",h=e.nan===void 0?"NaN":e.nan+"";function d(p){p=formatSpecifier(p);var b=p.fill,$=p.align,w=p.sign,P=p.symbol,_=p.zero,S=p.width,N=p.comma,R=p.precision,T=p.trim,I=p.type;I==="n"?(N=!0,I="g"):formatTypes[I]||(R===void 0&&(R=12),T=!0,I="g"),(_||b==="0"&&$==="=")&&(_=!0,b="0",$="=");var L=P==="$"?n:P==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():"",H=P==="$"?r:/[%p]/.test(I)?l:"",G=formatTypes[I],j=/[defgprs%]/.test(I);R=R===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,R)):Math.max(0,Math.min(20,R));function F(O){var Z=L,V=H,q,z,U;if(I==="c")V=G(O)+V,O="";else{O=+O;var W=O<0||1/O<0;if(O=isNaN(O)?h:G(Math.abs(O),R),T&&(O=formatTrim(O)),W&&+O==0&&w!=="+"&&(W=!1),Z=(W?w==="("?w:f:w==="-"||w==="("?"":w)+Z,V=(I==="s"?prefixes[8+prefixExponent/3]:"")+V+(W&&w==="("?")":""),j){for(q=-1,z=O.length;++q<z;)if(U=O.charCodeAt(q),48>U||U>57){V=(U===46?i+O.slice(q+1):O.slice(q))+V,O=O.slice(0,q);break}}}N&&!_&&(O=t(O,1/0));var Q=Z.length+O.length+V.length,J=Q<S?new Array(S-Q+1).join(b):"";switch(N&&_&&(O=t(J+O,J.length?S-V.length:1/0),J=""),$){case"<":O=Z+O+V+J;break;case"=":O=Z+J+O+V;break;case"^":O=J.slice(0,Q=J.length>>1)+Z+O+V+J.slice(Q);break;default:O=J+Z+O+V;break}return o(O)}return F.toString=function(){return p+""},F}function g(p,b){var $=d((p=formatSpecifier(p),p.type="f",p)),w=Math.max(-8,Math.min(8,Math.floor(exponent(b)/3)))*3,P=Math.pow(10,-w),_=prefixes[8+w/3];return function(S){return $(P*S)+_}}return{format:d,formatPrefix:g}}var locale$1,format,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(e){return locale$1=formatLocale$1(e),format=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(e){return Math.max(0,-exponent(Math.abs(e)))}function precisionPrefix(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(t)/3)))*3-exponent(Math.abs(e)))}function precisionRound(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,exponent(t)-exponent(e))+1}var epsilon$1=1e-6,epsilon2=1e-12,pi$1=Math.PI,halfPi$1=pi$1/2,quarterPi=pi$1/4,tau$1=pi$1*2,degrees=180/pi$1,radians=pi$1/180,abs$1=Math.abs,atan=Math.atan,atan2$1=Math.atan2,cos$1=Math.cos,ceil=Math.ceil,exp=Math.exp,hypot=Math.hypot,log$1=Math.log,pow$1=Math.pow,sin$1=Math.sin,sign$1=Math.sign||function(e){return e>0?1:e<0?-1:0},sqrt$2=Math.sqrt,tan=Math.tan;function acos$1(e){return e>1?0:e<-1?pi$1:Math.acos(e)}function asin$1(e){return e>1?halfPi$1:e<-1?-halfPi$1:Math.asin(e)}function haversin(e){return(e=sin$1(e/2))*e}function noop$1(){}function streamGeometry(e,t){e&&streamGeometryType.hasOwnProperty(e.type)&&streamGeometryType[e.type](e,t)}var streamObjectType={Feature:function(e,t){streamGeometry(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)streamGeometry(n[r].geometry,t)}},streamGeometryType={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){streamLine(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)streamLine(n[r],t,0)},Polygon:function(e,t){streamPolygon(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)streamPolygon(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)streamGeometry(n[r],t)}};function streamLine(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function streamPolygon(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)streamLine(e[n],t,1);t.polygonEnd()}function geoStream(e,t){e&&streamObjectType.hasOwnProperty(e.type)?streamObjectType[e.type](e,t):streamGeometry(e,t)}var areaRingSum$1=new Adder,areaSum$1=new Adder,lambda00$2,phi00$2,lambda0$2,cosPhi0$1,sinPhi0$1,areaStream$1={point:noop$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:function(){areaRingSum$1=new Adder,areaStream$1.lineStart=areaRingStart$1,areaStream$1.lineEnd=areaRingEnd$1},polygonEnd:function(){var e=+areaRingSum$1;areaSum$1.add(e<0?tau$1+e:e),this.lineStart=this.lineEnd=this.point=noop$1},sphere:function(){areaSum$1.add(tau$1)}};function areaRingStart$1(){areaStream$1.point=areaPointFirst$1}function areaRingEnd$1(){areaPoint$1(lambda00$2,phi00$2)}function areaPointFirst$1(e,t){areaStream$1.point=areaPoint$1,lambda00$2=e,phi00$2=t,e*=radians,t*=radians,lambda0$2=e,cosPhi0$1=cos$1(t=t/2+quarterPi),sinPhi0$1=sin$1(t)}function areaPoint$1(e,t){e*=radians,t*=radians,t=t/2+quarterPi;var n=e-lambda0$2,r=n>=0?1:-1,i=r*n,o=cos$1(t),l=sin$1(t),f=sinPhi0$1*l,h=cosPhi0$1*o+f*cos$1(i),d=f*r*sin$1(i);areaRingSum$1.add(atan2$1(d,h)),lambda0$2=e,cosPhi0$1=o,sinPhi0$1=l}function area$2(e){return areaSum$1=new Adder,geoStream(e,areaStream$1),areaSum$1*2}function spherical(e){return[atan2$1(e[1],e[0]),asin$1(e[2])]}function cartesian(e){var t=e[0],n=e[1],r=cos$1(n);return[r*cos$1(t),r*sin$1(t),sin$1(n)]}function cartesianDot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function cartesianCross(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function cartesianAddInPlace(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function cartesianScale(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function cartesianNormalizeInPlace(e){var t=sqrt$2(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var lambda0$1,phi0,lambda1,phi1,lambda2,lambda00$1,phi00$1,p0,deltaSum,ranges,range,boundsStream$2={point:boundsPoint$1,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){boundsStream$2.point=boundsRingPoint,boundsStream$2.lineStart=boundsRingStart,boundsStream$2.lineEnd=boundsRingEnd,deltaSum=new Adder,areaStream$1.polygonStart()},polygonEnd:function(){areaStream$1.polygonEnd(),boundsStream$2.point=boundsPoint$1,boundsStream$2.lineStart=boundsLineStart,boundsStream$2.lineEnd=boundsLineEnd,areaRingSum$1<0?(lambda0$1=-(lambda1=180),phi0=-(phi1=90)):deltaSum>epsilon$1?phi1=90:deltaSum<-epsilon$1&&(phi0=-90),range[0]=lambda0$1,range[1]=lambda1},sphere:function(){lambda0$1=-(lambda1=180),phi0=-(phi1=90)}};function boundsPoint$1(e,t){ranges.push(range=[lambda0$1=e,lambda1=e]),t<phi0&&(phi0=t),t>phi1&&(phi1=t)}function linePoint(e,t){var n=cartesian([e*radians,t*radians]);if(p0){var r=cartesianCross(p0,n),i=[r[1],-r[0],0],o=cartesianCross(i,r);cartesianNormalizeInPlace(o),o=spherical(o);var l=e-lambda2,f=l>0?1:-1,h=o[0]*degrees*f,d,g=abs$1(l)>180;g^(f*lambda2<h&&h<f*e)?(d=o[1]*degrees,d>phi1&&(phi1=d)):(h=(h+360)%360-180,g^(f*lambda2<h&&h<f*e)?(d=-o[1]*degrees,d<phi0&&(phi0=d)):(t<phi0&&(phi0=t),t>phi1&&(phi1=t))),g?e<lambda2?angle(lambda0$1,e)>angle(lambda0$1,lambda1)&&(lambda1=e):angle(e,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=e):lambda1>=lambda0$1?(e<lambda0$1&&(lambda0$1=e),e>lambda1&&(lambda1=e)):e>lambda2?angle(lambda0$1,e)>angle(lambda0$1,lambda1)&&(lambda1=e):angle(e,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=e)}else ranges.push(range=[lambda0$1=e,lambda1=e]);t<phi0&&(phi0=t),t>phi1&&(phi1=t),p0=n,lambda2=e}function boundsLineStart(){boundsStream$2.point=linePoint}function boundsLineEnd(){range[0]=lambda0$1,range[1]=lambda1,boundsStream$2.point=boundsPoint$1,p0=null}function boundsRingPoint(e,t){if(p0){var n=e-lambda2;deltaSum.add(abs$1(n)>180?n+(n>0?360:-360):n)}else lambda00$1=e,phi00$1=t;areaStream$1.point(e,t),linePoint(e,t)}function boundsRingStart(){areaStream$1.lineStart()}function boundsRingEnd(){boundsRingPoint(lambda00$1,phi00$1),areaStream$1.lineEnd(),abs$1(deltaSum)>epsilon$1&&(lambda0$1=-(lambda1=180)),range[0]=lambda0$1,range[1]=lambda1,p0=null}function angle(e,t){return(t-=e)<0?t+360:t}function rangeCompare(e,t){return e[0]-t[0]}function rangeContains(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function bounds(e){var t,n,r,i,o,l,f;if(phi1=lambda1=-(lambda0$1=phi0=1/0),ranges=[],geoStream(e,boundsStream$2),n=ranges.length){for(ranges.sort(rangeCompare),t=1,r=ranges[0],o=[r];t<n;++t)i=ranges[t],rangeContains(r,i[0])||rangeContains(r,i[1])?(angle(r[0],i[1])>angle(r[0],r[1])&&(r[1]=i[1]),angle(i[0],r[1])>angle(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(l=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(f=angle(r[1],i[0]))>l&&(l=f,lambda0$1=i[0],lambda1=r[1])}return ranges=range=null,lambda0$1===1/0||phi0===1/0?[[NaN,NaN],[NaN,NaN]]:[[lambda0$1,phi0],[lambda1,phi1]]}var W0,W1,X0$1,Y0$1,Z0$1,X1$1,Y1$1,Z1$1,X2$1,Y2$1,Z2$1,lambda00,phi00,x0$4,y0$4,z0,centroidStream$1={sphere:noop$1,point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,polygonStart:function(){centroidStream$1.lineStart=centroidRingStart$1,centroidStream$1.lineEnd=centroidRingEnd$1},polygonEnd:function(){centroidStream$1.lineStart=centroidLineStart$1,centroidStream$1.lineEnd=centroidLineEnd$1}};function centroidPoint$1(e,t){e*=radians,t*=radians;var n=cos$1(t);centroidPointCartesian(n*cos$1(e),n*sin$1(e),sin$1(t))}function centroidPointCartesian(e,t,n){++W0,X0$1+=(e-X0$1)/W0,Y0$1+=(t-Y0$1)/W0,Z0$1+=(n-Z0$1)/W0}function centroidLineStart$1(){centroidStream$1.point=centroidLinePointFirst}function centroidLinePointFirst(e,t){e*=radians,t*=radians;var n=cos$1(t);x0$4=n*cos$1(e),y0$4=n*sin$1(e),z0=sin$1(t),centroidStream$1.point=centroidLinePoint,centroidPointCartesian(x0$4,y0$4,z0)}function centroidLinePoint(e,t){e*=radians,t*=radians;var n=cos$1(t),r=n*cos$1(e),i=n*sin$1(e),o=sin$1(t),l=atan2$1(sqrt$2((l=y0$4*o-z0*i)*l+(l=z0*r-x0$4*o)*l+(l=x0$4*i-y0$4*r)*l),x0$4*r+y0$4*i+z0*o);W1+=l,X1$1+=l*(x0$4+(x0$4=r)),Y1$1+=l*(y0$4+(y0$4=i)),Z1$1+=l*(z0+(z0=o)),centroidPointCartesian(x0$4,y0$4,z0)}function centroidLineEnd$1(){centroidStream$1.point=centroidPoint$1}function centroidRingStart$1(){centroidStream$1.point=centroidRingPointFirst}function centroidRingEnd$1(){centroidRingPoint(lambda00,phi00),centroidStream$1.point=centroidPoint$1}function centroidRingPointFirst(e,t){lambda00=e,phi00=t,e*=radians,t*=radians,centroidStream$1.point=centroidRingPoint;var n=cos$1(t);x0$4=n*cos$1(e),y0$4=n*sin$1(e),z0=sin$1(t),centroidPointCartesian(x0$4,y0$4,z0)}function centroidRingPoint(e,t){e*=radians,t*=radians;var n=cos$1(t),r=n*cos$1(e),i=n*sin$1(e),o=sin$1(t),l=y0$4*o-z0*i,f=z0*r-x0$4*o,h=x0$4*i-y0$4*r,d=hypot(l,f,h),g=asin$1(d),p=d&&-g/d;X2$1.add(p*l),Y2$1.add(p*f),Z2$1.add(p*h),W1+=g,X1$1+=g*(x0$4+(x0$4=r)),Y1$1+=g*(y0$4+(y0$4=i)),Z1$1+=g*(z0+(z0=o)),centroidPointCartesian(x0$4,y0$4,z0)}function centroid$1(e){W0=W1=X0$1=Y0$1=Z0$1=X1$1=Y1$1=Z1$1=0,X2$1=new Adder,Y2$1=new Adder,Z2$1=new Adder,geoStream(e,centroidStream$1);var t=+X2$1,n=+Y2$1,r=+Z2$1,i=hypot(t,n,r);return i<epsilon2&&(t=X1$1,n=Y1$1,r=Z1$1,W1<epsilon$1&&(t=X0$1,n=Y0$1,r=Z0$1),i=hypot(t,n,r),i<epsilon2)?[NaN,NaN]:[atan2$1(n,t)*degrees,asin$1(r/i)*degrees]}function constant$3(e){return function(){return e}}function compose(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function rotationIdentity(e,t){return abs$1(e)>pi$1&&(e-=Math.round(e/tau$1)*tau$1),[e,t]}rotationIdentity.invert=rotationIdentity;function rotateRadians(e,t,n){return(e%=tau$1)?t||n?compose(rotationLambda(e),rotationPhiGamma(t,n)):rotationLambda(e):t||n?rotationPhiGamma(t,n):rotationIdentity}function forwardRotationLambda(e){return function(t,n){return t+=e,abs$1(t)>pi$1&&(t-=Math.round(t/tau$1)*tau$1),[t,n]}}function rotationLambda(e){var t=forwardRotationLambda(e);return t.invert=forwardRotationLambda(-e),t}function rotationPhiGamma(e,t){var n=cos$1(e),r=sin$1(e),i=cos$1(t),o=sin$1(t);function l(f,h){var d=cos$1(h),g=cos$1(f)*d,p=sin$1(f)*d,b=sin$1(h),$=b*n+g*r;return[atan2$1(p*i-$*o,g*n-b*r),asin$1($*i+p*o)]}return l.invert=function(f,h){var d=cos$1(h),g=cos$1(f)*d,p=sin$1(f)*d,b=sin$1(h),$=b*i-p*o;return[atan2$1(p*i+b*o,g*n+$*r),asin$1($*n-g*r)]},l}function rotation(e){e=rotateRadians(e[0]*radians,e[1]*radians,e.length>2?e[2]*radians:0);function t(n){return n=e(n[0]*radians,n[1]*radians),n[0]*=degrees,n[1]*=degrees,n}return t.invert=function(n){return n=e.invert(n[0]*radians,n[1]*radians),n[0]*=degrees,n[1]*=degrees,n},t}function circleStream(e,t,n,r,i,o){if(!!n){var l=cos$1(t),f=sin$1(t),h=r*n;i==null?(i=t+r*tau$1,o=t-h/2):(i=circleRadius(l,i),o=circleRadius(l,o),(r>0?i<o:i>o)&&(i+=r*tau$1));for(var d,g=i;r>0?g>o:g<o;g-=h)d=spherical([l,-f*cos$1(g),-f*sin$1(g)]),e.point(d[0],d[1])}}function circleRadius(e,t){t=cartesian(t),t[0]-=e,cartesianNormalizeInPlace(t);var n=acos$1(-t[1]);return((-t[2]<0?-n:n)+tau$1-epsilon$1)%tau$1}function circle$1(){var e=constant$3([0,0]),t=constant$3(90),n=constant$3(6),r,i,o={point:l};function l(h,d){r.push(h=i(h,d)),h[0]*=degrees,h[1]*=degrees}function f(){var h=e.apply(this,arguments),d=t.apply(this,arguments)*radians,g=n.apply(this,arguments)*radians;return r=[],i=rotateRadians(-h[0]*radians,-h[1]*radians,0).invert,circleStream(o,d,g,1),h={type:"Polygon",coordinates:[r]},r=i=null,h}return f.center=function(h){return arguments.length?(e=typeof h=="function"?h:constant$3([+h[0],+h[1]]),f):e},f.radius=function(h){return arguments.length?(t=typeof h=="function"?h:constant$3(+h),f):t},f.precision=function(h){return arguments.length?(n=typeof h=="function"?h:constant$3(+h),f):n},f}function clipBuffer(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:noop$1,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function pointEqual(e,t){return abs$1(e[0]-t[0])<epsilon$1&&abs$1(e[1]-t[1])<epsilon$1}function Intersection(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function clipRejoin(e,t,n,r,i){var o=[],l=[],f,h;if(e.forEach(function(w){if(!((P=w.length-1)<=0)){var P,_=w[0],S=w[P],N;if(pointEqual(_,S)){if(!_[2]&&!S[2]){for(i.lineStart(),f=0;f<P;++f)i.point((_=w[f])[0],_[1]);i.lineEnd();return}S[0]+=2*epsilon$1}o.push(N=new Intersection(_,w,null,!0)),l.push(N.o=new Intersection(_,null,N,!1)),o.push(N=new Intersection(S,w,null,!1)),l.push(N.o=new Intersection(S,null,N,!0))}}),!!o.length){for(l.sort(t),link$1(o),link$1(l),f=0,h=l.length;f<h;++f)l[f].e=n=!n;for(var d=o[0],g,p;;){for(var b=d,$=!0;b.v;)if((b=b.n)===d)return;g=b.z,i.lineStart();do{if(b.v=b.o.v=!0,b.e){if($)for(f=0,h=g.length;f<h;++f)i.point((p=g[f])[0],p[1]);else r(b.x,b.n.x,1,i);b=b.n}else{if($)for(g=b.p.z,f=g.length-1;f>=0;--f)i.point((p=g[f])[0],p[1]);else r(b.x,b.p.x,-1,i);b=b.p}b=b.o,g=b.z,$=!$}while(!b.v);i.lineEnd()}}}function link$1(e){if(!!(t=e.length)){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function longitude(e){return abs$1(e[0])<=pi$1?e[0]:sign$1(e[0])*((abs$1(e[0])+pi$1)%tau$1-pi$1)}function polygonContains(e,t){var n=longitude(t),r=t[1],i=sin$1(r),o=[sin$1(n),-cos$1(n),0],l=0,f=0,h=new Adder;i===1?r=halfPi$1+epsilon$1:i===-1&&(r=-halfPi$1-epsilon$1);for(var d=0,g=e.length;d<g;++d)if(!!(b=(p=e[d]).length))for(var p,b,$=p[b-1],w=longitude($),P=$[1]/2+quarterPi,_=sin$1(P),S=cos$1(P),N=0;N<b;++N,w=T,_=L,S=H,$=R){var R=p[N],T=longitude(R),I=R[1]/2+quarterPi,L=sin$1(I),H=cos$1(I),G=T-w,j=G>=0?1:-1,F=j*G,O=F>pi$1,Z=_*L;if(h.add(atan2$1(Z*j*sin$1(F),S*H+Z*cos$1(F))),l+=O?G+j*tau$1:G,O^w>=n^T>=n){var V=cartesianCross(cartesian($),cartesian(R));cartesianNormalizeInPlace(V);var q=cartesianCross(o,V);cartesianNormalizeInPlace(q);var z=(O^G>=0?-1:1)*asin$1(q[2]);(r>z||r===z&&(V[0]||V[1]))&&(f+=O^G>=0?1:-1)}}return(l<-epsilon$1||l<epsilon$1&&h<-epsilon2)^f&1}function clip(e,t,n,r){return function(i){var o=t(i),l=clipBuffer(),f=t(l),h=!1,d,g,p,b={point:$,lineStart:P,lineEnd:_,polygonStart:function(){b.point=S,b.lineStart=N,b.lineEnd=R,g=[],d=[]},polygonEnd:function(){b.point=$,b.lineStart=P,b.lineEnd=_,g=merge(g);var T=polygonContains(d,r);g.length?(h||(i.polygonStart(),h=!0),clipRejoin(g,compareIntersection,T,n,i)):T&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),g=d=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function $(T,I){e(T,I)&&i.point(T,I)}function w(T,I){o.point(T,I)}function P(){b.point=w,o.lineStart()}function _(){b.point=$,o.lineEnd()}function S(T,I){p.push([T,I]),f.point(T,I)}function N(){f.lineStart(),p=[]}function R(){S(p[0][0],p[0][1]),f.lineEnd();var T=f.clean(),I=l.result(),L,H=I.length,G,j,F;if(p.pop(),d.push(p),p=null,!!H){if(T&1){if(j=I[0],(G=j.length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),L=0;L<G;++L)i.point((F=j[L])[0],F[1]);i.lineEnd()}return}H>1&&T&2&&I.push(I.pop().concat(I.shift())),g.push(I.filter(validSegment))}}return b}}function validSegment(e){return e.length>1}function compareIntersection(e,t){return((e=e.x)[0]<0?e[1]-halfPi$1-epsilon$1:halfPi$1-e[1])-((t=t.x)[0]<0?t[1]-halfPi$1-epsilon$1:halfPi$1-t[1])}var clipAntimeridian=clip(function(){return!0},clipAntimeridianLine,clipAntimeridianInterpolate,[-pi$1,-halfPi$1]);function clipAntimeridianLine(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,l){var f=o>0?pi$1:-pi$1,h=abs$1(o-t);abs$1(h-pi$1)<epsilon$1?(e.point(t,n=(n+l)/2>0?halfPi$1:-halfPi$1),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(f,n),e.point(o,n),i=0):r!==f&&h>=pi$1&&(abs$1(t-r)<epsilon$1&&(t-=r*epsilon$1),abs$1(o-f)<epsilon$1&&(o-=f*epsilon$1),n=clipAntimeridianIntersect(t,n,o,l),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(f,n),i=0),e.point(t=o,n=l),r=f},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function clipAntimeridianIntersect(e,t,n,r){var i,o,l=sin$1(e-n);return abs$1(l)>epsilon$1?atan((sin$1(t)*(o=cos$1(r))*sin$1(n)-sin$1(r)*(i=cos$1(t))*sin$1(e))/(i*o*l)):(t+r)/2}function clipAntimeridianInterpolate(e,t,n,r){var i;if(e==null)i=n*halfPi$1,r.point(-pi$1,i),r.point(0,i),r.point(pi$1,i),r.point(pi$1,0),r.point(pi$1,-i),r.point(0,-i),r.point(-pi$1,-i),r.point(-pi$1,0),r.point(-pi$1,i);else if(abs$1(e[0]-t[0])>epsilon$1){var o=e[0]<t[0]?pi$1:-pi$1;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function clipCircle(e){var t=cos$1(e),n=6*radians,r=t>0,i=abs$1(t)>epsilon$1;function o(g,p,b,$){circleStream($,e,n,b,g,p)}function l(g,p){return cos$1(g)*cos$1(p)>t}function f(g){var p,b,$,w,P;return{lineStart:function(){w=$=!1,P=1},point:function(_,S){var N=[_,S],R,T=l(_,S),I=r?T?0:d(_,S):T?d(_+(_<0?pi$1:-pi$1),S):0;if(!p&&(w=$=T)&&g.lineStart(),T!==$&&(R=h(p,N),(!R||pointEqual(p,R)||pointEqual(N,R))&&(N[2]=1)),T!==$)P=0,T?(g.lineStart(),R=h(N,p),g.point(R[0],R[1])):(R=h(p,N),g.point(R[0],R[1],2),g.lineEnd()),p=R;else if(i&&p&&r^T){var L;!(I&b)&&(L=h(N,p,!0))&&(P=0,r?(g.lineStart(),g.point(L[0][0],L[0][1]),g.point(L[1][0],L[1][1]),g.lineEnd()):(g.point(L[1][0],L[1][1]),g.lineEnd(),g.lineStart(),g.point(L[0][0],L[0][1],3)))}T&&(!p||!pointEqual(p,N))&&g.point(N[0],N[1]),p=N,$=T,b=I},lineEnd:function(){$&&g.lineEnd(),p=null},clean:function(){return P|(w&&$)<<1}}}function h(g,p,b){var $=cartesian(g),w=cartesian(p),P=[1,0,0],_=cartesianCross($,w),S=cartesianDot(_,_),N=_[0],R=S-N*N;if(!R)return!b&&g;var T=t*S/R,I=-t*N/R,L=cartesianCross(P,_),H=cartesianScale(P,T),G=cartesianScale(_,I);cartesianAddInPlace(H,G);var j=L,F=cartesianDot(H,j),O=cartesianDot(j,j),Z=F*F-O*(cartesianDot(H,H)-1);if(!(Z<0)){var V=sqrt$2(Z),q=cartesianScale(j,(-F-V)/O);if(cartesianAddInPlace(q,H),q=spherical(q),!b)return q;var z=g[0],U=p[0],W=g[1],Q=p[1],J;U<z&&(J=z,z=U,U=J);var te=U-z,ie=abs$1(te-pi$1)<epsilon$1,ae=ie||te<epsilon$1;if(!ie&&Q<W&&(J=W,W=Q,Q=J),ae?ie?W+Q>0^q[1]<(abs$1(q[0]-z)<epsilon$1?W:Q):W<=q[1]&&q[1]<=Q:te>pi$1^(z<=q[0]&&q[0]<=U)){var he=cartesianScale(j,(-F+V)/O);return cartesianAddInPlace(he,H),[q,spherical(he)]}}}function d(g,p){var b=r?e:pi$1-e,$=0;return g<-b?$|=1:g>b&&($|=2),p<-b?$|=4:p>b&&($|=8),$}return clip(l,f,o,r?[0,-e]:[-pi$1,e-pi$1])}function clipLine(e,t,n,r,i,o){var l=e[0],f=e[1],h=t[0],d=t[1],g=0,p=1,b=h-l,$=d-f,w;if(w=n-l,!(!b&&w>0)){if(w/=b,b<0){if(w<g)return;w<p&&(p=w)}else if(b>0){if(w>p)return;w>g&&(g=w)}if(w=i-l,!(!b&&w<0)){if(w/=b,b<0){if(w>p)return;w>g&&(g=w)}else if(b>0){if(w<g)return;w<p&&(p=w)}if(w=r-f,!(!$&&w>0)){if(w/=$,$<0){if(w<g)return;w<p&&(p=w)}else if($>0){if(w>p)return;w>g&&(g=w)}if(w=o-f,!(!$&&w<0)){if(w/=$,$<0){if(w>p)return;w>g&&(g=w)}else if($>0){if(w<g)return;w<p&&(p=w)}return g>0&&(e[0]=l+g*b,e[1]=f+g*$),p<1&&(t[0]=l+p*b,t[1]=f+p*$),!0}}}}}var clipMax=1e9,clipMin=-clipMax;function clipRectangle(e,t,n,r){function i(d,g){return e<=d&&d<=n&&t<=g&&g<=r}function o(d,g,p,b){var $=0,w=0;if(d==null||($=l(d,p))!==(w=l(g,p))||h(d,g)<0^p>0)do b.point($===0||$===3?e:n,$>1?r:t);while(($=($+p+4)%4)!==w);else b.point(g[0],g[1])}function l(d,g){return abs$1(d[0]-e)<epsilon$1?g>0?0:3:abs$1(d[0]-n)<epsilon$1?g>0?2:1:abs$1(d[1]-t)<epsilon$1?g>0?1:0:g>0?3:2}function f(d,g){return h(d.x,g.x)}function h(d,g){var p=l(d,1),b=l(g,1);return p!==b?p-b:p===0?g[1]-d[1]:p===1?d[0]-g[0]:p===2?d[1]-g[1]:g[0]-d[0]}return function(d){var g=d,p=clipBuffer(),b,$,w,P,_,S,N,R,T,I,L,H={point:G,lineStart:Z,lineEnd:V,polygonStart:F,polygonEnd:O};function G(z,U){i(z,U)&&g.point(z,U)}function j(){for(var z=0,U=0,W=$.length;U<W;++U)for(var Q=$[U],J=1,te=Q.length,ie=Q[0],ae,he,le=ie[0],ce=ie[1];J<te;++J)ae=le,he=ce,ie=Q[J],le=ie[0],ce=ie[1],he<=r?ce>r&&(le-ae)*(r-he)>(ce-he)*(e-ae)&&++z:ce<=r&&(le-ae)*(r-he)<(ce-he)*(e-ae)&&--z;return z}function F(){g=p,b=[],$=[],L=!0}function O(){var z=j(),U=L&&z,W=(b=merge(b)).length;(U||W)&&(d.polygonStart(),U&&(d.lineStart(),o(null,null,1,d),d.lineEnd()),W&&clipRejoin(b,f,z,o,d),d.polygonEnd()),g=d,b=$=w=null}function Z(){H.point=q,$&&$.push(w=[]),I=!0,T=!1,N=R=NaN}function V(){b&&(q(P,_),S&&T&&p.rejoin(),b.push(p.result())),H.point=G,T&&g.lineEnd()}function q(z,U){var W=i(z,U);if($&&w.push([z,U]),I)P=z,_=U,S=W,I=!1,W&&(g.lineStart(),g.point(z,U));else if(W&&T)g.point(z,U);else{var Q=[N=Math.max(clipMin,Math.min(clipMax,N)),R=Math.max(clipMin,Math.min(clipMax,R))],J=[z=Math.max(clipMin,Math.min(clipMax,z)),U=Math.max(clipMin,Math.min(clipMax,U))];clipLine(Q,J,e,t,n,r)?(T||(g.lineStart(),g.point(Q[0],Q[1])),g.point(J[0],J[1]),W||g.lineEnd(),L=!1):W&&(g.lineStart(),g.point(z,U),L=!1)}N=z,R=U,T=W}return H}}function extent(){var e=0,t=0,n=960,r=500,i,o,l;return l={stream:function(f){return i&&o===f?i:i=clipRectangle(e,t,n,r)(o=f)},extent:function(f){return arguments.length?(e=+f[0][0],t=+f[0][1],n=+f[1][0],r=+f[1][1],i=o=null,l):[[e,t],[n,r]]}}}var lengthSum$1,lambda0,sinPhi0,cosPhi0,lengthStream$1={sphere:noop$1,point:noop$1,lineStart:lengthLineStart,lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1};function lengthLineStart(){lengthStream$1.point=lengthPointFirst$1,lengthStream$1.lineEnd=lengthLineEnd}function lengthLineEnd(){lengthStream$1.point=lengthStream$1.lineEnd=noop$1}function lengthPointFirst$1(e,t){e*=radians,t*=radians,lambda0=e,sinPhi0=sin$1(t),cosPhi0=cos$1(t),lengthStream$1.point=lengthPoint$1}function lengthPoint$1(e,t){e*=radians,t*=radians;var n=sin$1(t),r=cos$1(t),i=abs$1(e-lambda0),o=cos$1(i),l=sin$1(i),f=r*l,h=cosPhi0*n-sinPhi0*r*o,d=sinPhi0*n+cosPhi0*r*o;lengthSum$1.add(atan2$1(sqrt$2(f*f+h*h),d)),lambda0=e,sinPhi0=n,cosPhi0=r}function length$1(e){return lengthSum$1=new Adder,geoStream(e,lengthStream$1),+lengthSum$1}var coordinates=[null,null],object={type:"LineString",coordinates};function distance(e,t){return coordinates[0]=e,coordinates[1]=t,length$1(object)}var containsObjectType={Feature:function(e,t){return containsGeometry(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)if(containsGeometry(n[r].geometry,t))return!0;return!1}},containsGeometryType={Sphere:function(){return!0},Point:function(e,t){return containsPoint(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(containsPoint(n[r],t))return!0;return!1},LineString:function(e,t){return containsLine(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(containsLine(n[r],t))return!0;return!1},Polygon:function(e,t){return containsPolygon(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(containsPolygon(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)if(containsGeometry(n[r],t))return!0;return!1}};function containsGeometry(e,t){return e&&containsGeometryType.hasOwnProperty(e.type)?containsGeometryType[e.type](e,t):!1}function containsPoint(e,t){return distance(e,t)===0}function containsLine(e,t){for(var n,r,i,o=0,l=e.length;o<l;o++){if(r=distance(e[o],t),r===0||o>0&&(i=distance(e[o],e[o-1]),i>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<epsilon2*i))return!0;n=r}return!1}function containsPolygon(e,t){return!!polygonContains(e.map(ringRadians),pointRadians(t))}function ringRadians(e){return e=e.map(pointRadians),e.pop(),e}function pointRadians(e){return[e[0]*radians,e[1]*radians]}function contains$1(e,t){return(e&&containsObjectType.hasOwnProperty(e.type)?containsObjectType[e.type]:containsGeometry)(e,t)}function graticuleX(e,t,n){var r=range$2(e,t-epsilon$1,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function graticuleY(e,t,n){var r=range$2(e,t-epsilon$1,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function graticule(){var e,t,n,r,i,o,l,f,h=10,d=h,g=90,p=360,b,$,w,P,_=2.5;function S(){return{type:"MultiLineString",coordinates:N()}}function N(){return range$2(ceil(r/g)*g,n,g).map(w).concat(range$2(ceil(f/p)*p,l,p).map(P)).concat(range$2(ceil(t/h)*h,e,h).filter(function(R){return abs$1(R%g)>epsilon$1}).map(b)).concat(range$2(ceil(o/d)*d,i,d).filter(function(R){return abs$1(R%p)>epsilon$1}).map($))}return S.lines=function(){return N().map(function(R){return{type:"LineString",coordinates:R}})},S.outline=function(){return{type:"Polygon",coordinates:[w(r).concat(P(l).slice(1),w(n).reverse().slice(1),P(f).reverse().slice(1))]}},S.extent=function(R){return arguments.length?S.extentMajor(R).extentMinor(R):S.extentMinor()},S.extentMajor=function(R){return arguments.length?(r=+R[0][0],n=+R[1][0],f=+R[0][1],l=+R[1][1],r>n&&(R=r,r=n,n=R),f>l&&(R=f,f=l,l=R),S.precision(_)):[[r,f],[n,l]]},S.extentMinor=function(R){return arguments.length?(t=+R[0][0],e=+R[1][0],o=+R[0][1],i=+R[1][1],t>e&&(R=t,t=e,e=R),o>i&&(R=o,o=i,i=R),S.precision(_)):[[t,o],[e,i]]},S.step=function(R){return arguments.length?S.stepMajor(R).stepMinor(R):S.stepMinor()},S.stepMajor=function(R){return arguments.length?(g=+R[0],p=+R[1],S):[g,p]},S.stepMinor=function(R){return arguments.length?(h=+R[0],d=+R[1],S):[h,d]},S.precision=function(R){return arguments.length?(_=+R,b=graticuleX(o,i,90),$=graticuleY(t,e,_),w=graticuleX(f,l,90),P=graticuleY(r,n,_),S):_},S.extentMajor([[-180,-90+epsilon$1],[180,90-epsilon$1]]).extentMinor([[-180,-80-epsilon$1],[180,80+epsilon$1]])}function graticule10(){return graticule()()}function interpolate(e,t){var n=e[0]*radians,r=e[1]*radians,i=t[0]*radians,o=t[1]*radians,l=cos$1(r),f=sin$1(r),h=cos$1(o),d=sin$1(o),g=l*cos$1(n),p=l*sin$1(n),b=h*cos$1(i),$=h*sin$1(i),w=2*asin$1(sqrt$2(haversin(o-r)+l*h*haversin(i-n))),P=sin$1(w),_=w?function(S){var N=sin$1(S*=w)/P,R=sin$1(w-S)/P,T=R*g+N*b,I=R*p+N*$,L=R*f+N*d;return[atan2$1(I,T)*degrees,atan2$1(L,sqrt$2(T*T+I*I))*degrees]}:function(){return[n*degrees,r*degrees]};return _.distance=w,_}var identity$5=e=>e,areaSum=new Adder,areaRingSum=new Adder,x00$2,y00$2,x0$3,y0$3,areaStream={point:noop$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:function(){areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){areaStream.lineStart=areaStream.lineEnd=areaStream.point=noop$1,areaSum.add(abs$1(areaRingSum)),areaRingSum=new Adder},result:function(){var e=areaSum/2;return areaSum=new Adder,e}};function areaRingStart(){areaStream.point=areaPointFirst}function areaPointFirst(e,t){areaStream.point=areaPoint,x00$2=x0$3=e,y00$2=y0$3=t}function areaPoint(e,t){areaRingSum.add(y0$3*e-x0$3*t),x0$3=e,y0$3=t}function areaRingEnd(){areaPoint(x00$2,y00$2)}var pathArea=areaStream,x0$2=1/0,y0$2=x0$2,x1=-x0$2,y1=x1,boundsStream={point:boundsPoint,lineStart:noop$1,lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1,result:function(){var e=[[x0$2,y0$2],[x1,y1]];return x1=y1=-(y0$2=x0$2=1/0),e}};function boundsPoint(e,t){e<x0$2&&(x0$2=e),e>x1&&(x1=e),t<y0$2&&(y0$2=t),t>y1&&(y1=t)}var boundsStream$1=boundsStream,X0=0,Y0=0,Z0=0,X1=0,Y1=0,Z1=0,X2=0,Y2=0,Z2=0,x00$1,y00$1,x0$1,y0$1,centroidStream={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.point=centroidPoint,centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd},result:function(){var e=Z2?[X2/Z2,Y2/Z2]:Z1?[X1/Z1,Y1/Z1]:Z0?[X0/Z0,Y0/Z0]:[NaN,NaN];return X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0,e}};function centroidPoint(e,t){X0+=e,Y0+=t,++Z0}function centroidLineStart(){centroidStream.point=centroidPointFirstLine}function centroidPointFirstLine(e,t){centroidStream.point=centroidPointLine,centroidPoint(x0$1=e,y0$1=t)}function centroidPointLine(e,t){var n=e-x0$1,r=t-y0$1,i=sqrt$2(n*n+r*r);X1+=i*(x0$1+e)/2,Y1+=i*(y0$1+t)/2,Z1+=i,centroidPoint(x0$1=e,y0$1=t)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(e,t){centroidStream.point=centroidPointRing,centroidPoint(x00$1=x0$1=e,y00$1=y0$1=t)}function centroidPointRing(e,t){var n=e-x0$1,r=t-y0$1,i=sqrt$2(n*n+r*r);X1+=i*(x0$1+e)/2,Y1+=i*(y0$1+t)/2,Z1+=i,i=y0$1*e-x0$1*t,X2+=i*(x0$1+e),Y2+=i*(y0$1+t),Z2+=i*3,centroidPoint(x0$1=e,y0$1=t)}var pathCentroid=centroidStream;function PathContext(e){this._context=e}PathContext.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,tau$1);break}}},result:noop$1};var lengthSum=new Adder,lengthRing,x00,y00,x0,y0,lengthStream={point:noop$1,lineStart:function(){lengthStream.point=lengthPointFirst},lineEnd:function(){lengthRing&&lengthPoint(x00,y00),lengthStream.point=noop$1},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var e=+lengthSum;return lengthSum=new Adder,e}};function lengthPointFirst(e,t){lengthStream.point=lengthPoint,x00=x0=e,y00=y0=t}function lengthPoint(e,t){x0-=e,y0-=t,lengthSum.add(sqrt$2(x0*x0+y0*y0)),x0=e,y0=t}var pathMeasure=lengthStream;let cacheDigits,cacheAppend,cacheRadius,cacheCircle;class PathString{constructor(t){this._append=t==null?append:appendRound(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==cacheRadius||this._append!==cacheAppend){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,cacheRadius=r,cacheAppend=this._append,cacheCircle=this._,this._=i}this._+=cacheCircle;break}}}result(){const t=this._;return this._="",t.length?t:null}}function append(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function appendRound(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return append;if(t!==cacheDigits){const n=10**t;cacheDigits=t,cacheAppend=function(i){let o=1;this._+=i[0];for(const l=i.length;o<l;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return cacheAppend}function index$2(e,t){let n=3,r=4.5,i,o;function l(f){return f&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),geoStream(f,i(o))),o.result()}return l.area=function(f){return geoStream(f,i(pathArea)),pathArea.result()},l.measure=function(f){return geoStream(f,i(pathMeasure)),pathMeasure.result()},l.bounds=function(f){return geoStream(f,i(boundsStream$1)),boundsStream$1.result()},l.centroid=function(f){return geoStream(f,i(pathCentroid)),pathCentroid.result()},l.projection=function(f){return arguments.length?(i=f==null?(e=null,identity$5):(e=f).stream,l):e},l.context=function(f){return arguments.length?(o=f==null?(t=null,new PathString(n)):new PathContext(t=f),typeof r!="function"&&o.pointRadius(r),l):t},l.pointRadius=function(f){return arguments.length?(r=typeof f=="function"?f:(o.pointRadius(+f),+f),l):r},l.digits=function(f){if(!arguments.length)return n;if(f==null)n=null;else{const h=Math.floor(f);if(!(h>=0))throw new RangeError(`invalid digits: ${f}`);n=h}return t===null&&(o=new PathString(n)),l},l.projection(e).digits(n).context(t)}function transform$1(e){return{stream:transformer$3(e)}}function transformer$3(e){return function(t){var n=new TransformStream;for(var r in e)n[r]=e[r];return n.stream=t,n}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fit(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),geoStream(n,e.stream(boundsStream$1)),t(boundsStream$1.result()),r!=null&&e.clipExtent(r),e}function fitExtent(e,t,n){return fit(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],l=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),f=+t[0][0]+(i-l*(r[1][0]+r[0][0]))/2,h=+t[0][1]+(o-l*(r[1][1]+r[0][1]))/2;e.scale(150*l).translate([f,h])},n)}function fitSize(e,t,n){return fitExtent(e,[[0,0],t],n)}function fitWidth(e,t,n){return fit(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),l=(i-o*(r[1][0]+r[0][0]))/2,f=-o*r[0][1];e.scale(150*o).translate([l,f])},n)}function fitHeight(e,t,n){return fit(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),l=-o*r[0][0],f=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([l,f])},n)}var maxDepth=16,cosMinDistance=cos$1(30*radians);function resample(e,t){return+t?resample$1(e,t):resampleNone(e)}function resampleNone(e){return transformer$3({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function resample$1(e,t){function n(r,i,o,l,f,h,d,g,p,b,$,w,P,_){var S=d-r,N=g-i,R=S*S+N*N;if(R>4*t&&P--){var T=l+b,I=f+$,L=h+w,H=sqrt$2(T*T+I*I+L*L),G=asin$1(L/=H),j=abs$1(abs$1(L)-1)<epsilon$1||abs$1(o-p)<epsilon$1?(o+p)/2:atan2$1(I,T),F=e(j,G),O=F[0],Z=F[1],V=O-r,q=Z-i,z=N*V-S*q;(z*z/R>t||abs$1((S*V+N*q)/R-.5)>.3||l*b+f*$+h*w<cosMinDistance)&&(n(r,i,o,l,f,h,O,Z,j,T/=H,I/=H,L,P,_),_.point(O,Z),n(O,Z,j,T,I,L,d,g,p,b,$,w,P,_))}}return function(r){var i,o,l,f,h,d,g,p,b,$,w,P,_={point:S,lineStart:N,lineEnd:T,polygonStart:function(){r.polygonStart(),_.lineStart=I},polygonEnd:function(){r.polygonEnd(),_.lineStart=N}};function S(G,j){G=e(G,j),r.point(G[0],G[1])}function N(){p=NaN,_.point=R,r.lineStart()}function R(G,j){var F=cartesian([G,j]),O=e(G,j);n(p,b,g,$,w,P,p=O[0],b=O[1],g=G,$=F[0],w=F[1],P=F[2],maxDepth,r),r.point(p,b)}function T(){_.point=S,r.lineEnd()}function I(){N(),_.point=L,_.lineEnd=H}function L(G,j){R(i=G,j),o=p,l=b,f=$,h=w,d=P,_.point=R}function H(){n(p,b,g,$,w,P,o,l,i,f,h,d,maxDepth,r),_.lineEnd=T,T()}return _}}var transformRadians=transformer$3({point:function(e,t){this.stream.point(e*radians,t*radians)}});function transformRotate(e){return transformer$3({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function scaleTranslate(e,t,n,r,i){function o(l,f){return l*=r,f*=i,[t+e*l,n-e*f]}return o.invert=function(l,f){return[(l-t)/e*r,(n-f)/e*i]},o}function scaleTranslateRotate(e,t,n,r,i,o){if(!o)return scaleTranslate(e,t,n,r,i);var l=cos$1(o),f=sin$1(o),h=l*e,d=f*e,g=l/e,p=f/e,b=(f*n-l*t)/e,$=(f*t+l*n)/e;function w(P,_){return P*=r,_*=i,[h*P-d*_+t,n-d*P-h*_]}return w.invert=function(P,_){return[r*(g*P-p*_+b),i*($-p*P-g*_)]},w}function projection(e){return projectionMutator(function(){return e})()}function projectionMutator(e){var t,n=150,r=480,i=250,o=0,l=0,f=0,h=0,d=0,g,p=0,b=1,$=1,w=null,P=clipAntimeridian,_=null,S,N,R,T=identity$5,I=.5,L,H,G,j,F;function O(z){return G(z[0]*radians,z[1]*radians)}function Z(z){return z=G.invert(z[0],z[1]),z&&[z[0]*degrees,z[1]*degrees]}O.stream=function(z){return j&&F===z?j:j=transformRadians(transformRotate(g)(P(L(T(F=z)))))},O.preclip=function(z){return arguments.length?(P=z,w=void 0,q()):P},O.postclip=function(z){return arguments.length?(T=z,_=S=N=R=null,q()):T},O.clipAngle=function(z){return arguments.length?(P=+z?clipCircle(w=z*radians):(w=null,clipAntimeridian),q()):w*degrees},O.clipExtent=function(z){return arguments.length?(T=z==null?(_=S=N=R=null,identity$5):clipRectangle(_=+z[0][0],S=+z[0][1],N=+z[1][0],R=+z[1][1]),q()):_==null?null:[[_,S],[N,R]]},O.scale=function(z){return arguments.length?(n=+z,V()):n},O.translate=function(z){return arguments.length?(r=+z[0],i=+z[1],V()):[r,i]},O.center=function(z){return arguments.length?(o=z[0]%360*radians,l=z[1]%360*radians,V()):[o*degrees,l*degrees]},O.rotate=function(z){return arguments.length?(f=z[0]%360*radians,h=z[1]%360*radians,d=z.length>2?z[2]%360*radians:0,V()):[f*degrees,h*degrees,d*degrees]},O.angle=function(z){return arguments.length?(p=z%360*radians,V()):p*degrees},O.reflectX=function(z){return arguments.length?(b=z?-1:1,V()):b<0},O.reflectY=function(z){return arguments.length?($=z?-1:1,V()):$<0},O.precision=function(z){return arguments.length?(L=resample(H,I=z*z),q()):sqrt$2(I)},O.fitExtent=function(z,U){return fitExtent(O,z,U)},O.fitSize=function(z,U){return fitSize(O,z,U)},O.fitWidth=function(z,U){return fitWidth(O,z,U)},O.fitHeight=function(z,U){return fitHeight(O,z,U)};function V(){var z=scaleTranslateRotate(n,0,0,b,$,p).apply(null,t(o,l)),U=scaleTranslateRotate(n,r-z[0],i-z[1],b,$,p);return g=rotateRadians(f,h,d),H=compose(t,U),G=compose(g,H),L=resample(H,I),q()}function q(){return j=F=null,O}return function(){return t=e.apply(this,arguments),O.invert=t.invert&&Z,V()}}function conicProjection(e){var t=0,n=pi$1/3,r=projectionMutator(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*radians,n=o[1]*radians):[t*degrees,n*degrees]},i}function cylindricalEqualAreaRaw(e){var t=cos$1(e);function n(r,i){return[r*t,sin$1(i)/t]}return n.invert=function(r,i){return[r/t,asin$1(i*t)]},n}function conicEqualAreaRaw(e,t){var n=sin$1(e),r=(n+sin$1(t))/2;if(abs$1(r)<epsilon$1)return cylindricalEqualAreaRaw(e);var i=1+n*(2*r-n),o=sqrt$2(i)/r;function l(f,h){var d=sqrt$2(i-2*r*sin$1(h))/r;return[d*sin$1(f*=r),o-d*cos$1(f)]}return l.invert=function(f,h){var d=o-h,g=atan2$1(f,abs$1(d))*sign$1(d);return d*r<0&&(g-=pi$1*sign$1(f)*sign$1(d)),[g/r,asin$1((i-(f*f+d*d)*r*r)/(2*r))]},l}function conicEqualArea(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function albers(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function multiplex(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function albersUsa(){var e,t,n=albers(),r,i=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,l=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f,h,d={point:function(b,$){h=[b,$]}};function g(b){var $=b[0],w=b[1];return h=null,r.point($,w),h||(o.point($,w),h)||(f.point($,w),h)}g.invert=function(b){var $=n.scale(),w=n.translate(),P=(b[0]-w[0])/$,_=(b[1]-w[1])/$;return(_>=.12&&_<.234&&P>=-.425&&P<-.214?i:_>=.166&&_<.234&&P>=-.214&&P<-.115?l:n).invert(b)},g.stream=function(b){return e&&t===b?e:e=multiplex([n.stream(t=b),i.stream(b),l.stream(b)])},g.precision=function(b){return arguments.length?(n.precision(b),i.precision(b),l.precision(b),p()):n.precision()},g.scale=function(b){return arguments.length?(n.scale(b),i.scale(b*.35),l.scale(b),g.translate(n.translate())):n.scale()},g.translate=function(b){if(!arguments.length)return n.translate();var $=n.scale(),w=+b[0],P=+b[1];return r=n.translate(b).clipExtent([[w-.455*$,P-.238*$],[w+.455*$,P+.238*$]]).stream(d),o=i.translate([w-.307*$,P+.201*$]).clipExtent([[w-.425*$+epsilon$1,P+.12*$+epsilon$1],[w-.214*$-epsilon$1,P+.234*$-epsilon$1]]).stream(d),f=l.translate([w-.205*$,P+.212*$]).clipExtent([[w-.214*$+epsilon$1,P+.166*$+epsilon$1],[w-.115*$-epsilon$1,P+.234*$-epsilon$1]]).stream(d),p()},g.fitExtent=function(b,$){return fitExtent(g,b,$)},g.fitSize=function(b,$){return fitSize(g,b,$)},g.fitWidth=function(b,$){return fitWidth(g,b,$)},g.fitHeight=function(b,$){return fitHeight(g,b,$)};function p(){return e=t=null,g}return g.scale(1070)}function azimuthalRaw(e){return function(t,n){var r=cos$1(t),i=cos$1(n),o=e(r*i);return o===1/0?[2,0]:[o*i*sin$1(t),o*sin$1(n)]}}function azimuthalInvert(e){return function(t,n){var r=sqrt$2(t*t+n*n),i=e(r),o=sin$1(i),l=cos$1(i);return[atan2$1(t*o,r*l),asin$1(r&&n*o/r)]}}var azimuthalEqualAreaRaw=azimuthalRaw(function(e){return sqrt$2(2/(1+e))});azimuthalEqualAreaRaw.invert=azimuthalInvert(function(e){return 2*asin$1(e/2)});function azimuthalEqualArea(){return projection(azimuthalEqualAreaRaw).scale(124.75).clipAngle(180-.001)}var azimuthalEquidistantRaw=azimuthalRaw(function(e){return(e=acos$1(e))&&e/sin$1(e)});azimuthalEquidistantRaw.invert=azimuthalInvert(function(e){return e});function azimuthalEquidistant(){return projection(azimuthalEquidistantRaw).scale(79.4188).clipAngle(180-.001)}function mercatorRaw(e,t){return[e,log$1(tan((halfPi$1+t)/2))]}mercatorRaw.invert=function(e,t){return[e,2*atan(exp(t))-halfPi$1]};function mercator(){return mercatorProjection(mercatorRaw).scale(961/tau$1)}function mercatorProjection(e){var t=projection(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,l=null,f,h,d;t.scale=function(p){return arguments.length?(r(p),g()):r()},t.translate=function(p){return arguments.length?(i(p),g()):i()},t.center=function(p){return arguments.length?(n(p),g()):n()},t.clipExtent=function(p){return arguments.length?(p==null?l=f=h=d=null:(l=+p[0][0],f=+p[0][1],h=+p[1][0],d=+p[1][1]),g()):l==null?null:[[l,f],[h,d]]};function g(){var p=pi$1*r(),b=t(rotation(t.rotate()).invert([0,0]));return o(l==null?[[b[0]-p,b[1]-p],[b[0]+p,b[1]+p]]:e===mercatorRaw?[[Math.max(b[0]-p,l),f],[Math.min(b[0]+p,h),d]]:[[l,Math.max(b[1]-p,f)],[h,Math.min(b[1]+p,d)]])}return g()}function tany(e){return tan((halfPi$1+e)/2)}function conicConformalRaw(e,t){var n=cos$1(e),r=e===t?sin$1(e):log$1(n/cos$1(t))/log$1(tany(t)/tany(e)),i=n*pow$1(tany(e),r)/r;if(!r)return mercatorRaw;function o(l,f){i>0?f<-halfPi$1+epsilon$1&&(f=-halfPi$1+epsilon$1):f>halfPi$1-epsilon$1&&(f=halfPi$1-epsilon$1);var h=i/pow$1(tany(f),r);return[h*sin$1(r*l),i-h*cos$1(r*l)]}return o.invert=function(l,f){var h=i-f,d=sign$1(r)*sqrt$2(l*l+h*h),g=atan2$1(l,abs$1(h))*sign$1(h);return h*r<0&&(g-=pi$1*sign$1(l)*sign$1(h)),[g/r,2*atan(pow$1(i/d,1/r))-halfPi$1]},o}function conicConformal(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])}function equirectangularRaw(e,t){return[e,t]}equirectangularRaw.invert=equirectangularRaw;function equirectangular(){return projection(equirectangularRaw).scale(152.63)}function conicEquidistantRaw(e,t){var n=cos$1(e),r=e===t?sin$1(e):(n-cos$1(t))/(t-e),i=n/r+e;if(abs$1(r)<epsilon$1)return equirectangularRaw;function o(l,f){var h=i-f,d=r*l;return[h*sin$1(d),i-h*cos$1(d)]}return o.invert=function(l,f){var h=i-f,d=atan2$1(l,abs$1(h))*sign$1(h);return h*r<0&&(d-=pi$1*sign$1(l)*sign$1(h)),[d/r,i-sign$1(r)*sqrt$2(l*l+h*h)]},o}function conicEquidistant(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])}var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=sqrt$2(3)/2,iterations=12;function equalEarthRaw(e,t){var n=asin$1(M*sin$1(t)),r=n*n,i=r*r*r;return[e*cos$1(n)/(M*(A1+3*A2*r+i*(7*A3+9*A4*r))),n*(A1+A2*r+i*(A3+A4*r))]}equalEarthRaw.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,l,f,h;o<iterations&&(f=n*(A1+A2*r+i*(A3+A4*r))-t,h=A1+3*A2*r+i*(7*A3+9*A4*r),n-=l=f/h,r=n*n,i=r*r*r,!(abs$1(l)<epsilon2));++o);return[M*e*(A1+3*A2*r+i*(7*A3+9*A4*r))/cos$1(n),asin$1(sin$1(n)/M)]};function equalEarth(){return projection(equalEarthRaw).scale(177.158)}function gnomonicRaw(e,t){var n=cos$1(t),r=cos$1(e)*n;return[n*sin$1(e)/r,sin$1(t)/r]}gnomonicRaw.invert=azimuthalInvert(atan);function gnomonic(){return projection(gnomonicRaw).scale(144.049).clipAngle(60)}function identity$4(){var e=1,t=0,n=0,r=1,i=1,o=0,l,f,h=null,d,g,p,b=1,$=1,w=transformer$3({point:function(T,I){var L=R([T,I]);this.stream.point(L[0],L[1])}}),P=identity$5,_,S;function N(){return b=e*r,$=e*i,_=S=null,R}function R(T){var I=T[0]*b,L=T[1]*$;if(o){var H=L*l-I*f;I=I*l+L*f,L=H}return[I+t,L+n]}return R.invert=function(T){var I=T[0]-t,L=T[1]-n;if(o){var H=L*l+I*f;I=I*l-L*f,L=H}return[I/b,L/$]},R.stream=function(T){return _&&S===T?_:_=w(P(S=T))},R.postclip=function(T){return arguments.length?(P=T,h=d=g=p=null,N()):P},R.clipExtent=function(T){return arguments.length?(P=T==null?(h=d=g=p=null,identity$5):clipRectangle(h=+T[0][0],d=+T[0][1],g=+T[1][0],p=+T[1][1]),N()):h==null?null:[[h,d],[g,p]]},R.scale=function(T){return arguments.length?(e=+T,N()):e},R.translate=function(T){return arguments.length?(t=+T[0],n=+T[1],N()):[t,n]},R.angle=function(T){return arguments.length?(o=T%360*radians,f=sin$1(o),l=cos$1(o),N()):o*degrees},R.reflectX=function(T){return arguments.length?(r=T?-1:1,N()):r<0},R.reflectY=function(T){return arguments.length?(i=T?-1:1,N()):i<0},R.fitExtent=function(T,I){return fitExtent(R,T,I)},R.fitSize=function(T,I){return fitSize(R,T,I)},R.fitWidth=function(T,I){return fitWidth(R,T,I)},R.fitHeight=function(T,I){return fitHeight(R,T,I)},R}function naturalEarth1Raw(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}naturalEarth1Raw.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,l=o*o;n-=i=(n*(1.007226+o*(.015085+l*(-.044475+.028874*o-.005916*l)))-t)/(1.007226+o*(.015085*3+l*(-.044475*7+.028874*9*o-.005916*11*l)))}while(abs$1(i)>epsilon$1&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function naturalEarth1(){return projection(naturalEarth1Raw).scale(175.295)}function orthographicRaw(e,t){return[cos$1(t)*sin$1(e),sin$1(t)]}orthographicRaw.invert=azimuthalInvert(asin$1);function orthographic(){return projection(orthographicRaw).scale(249.5).clipAngle(90+epsilon$1)}function stereographicRaw(e,t){var n=cos$1(t),r=1+cos$1(e)*n;return[n*sin$1(e)/r,sin$1(t)/r]}stereographicRaw.invert=azimuthalInvert(function(e){return 2*atan(e)});function stereographic(){return projection(stereographicRaw).scale(250).clipAngle(142)}function transverseMercatorRaw(e,t){return[log$1(tan((halfPi$1+t)/2)),-e]}transverseMercatorRaw.invert=function(e,t){return[-t,2*atan(exp(e))-halfPi$1]};function transverseMercator(){var e=mercatorProjection(transverseMercatorRaw),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function defaultSeparation$1(e,t){return e.parent===t.parent?1:2}function meanX(e){return e.reduce(meanXReduce,0)/e.length}function meanXReduce(e,t){return e+t.x}function maxY(e){return 1+e.reduce(maxYReduce,0)}function maxYReduce(e,t){return Math.max(e,t.y)}function leafLeft(e){for(var t;t=e.children;)e=t[0];return e}function leafRight(e){for(var t;t=e.children;)e=t[t.length-1];return e}function cluster(){var e=defaultSeparation$1,t=1,n=1,r=!1;function i(o){var l,f=0;o.eachAfter(function(b){var $=b.children;$?(b.x=meanX($),b.y=maxY($)):(b.x=l?f+=e(b,l):0,b.y=0,l=b)});var h=leafLeft(o),d=leafRight(o),g=h.x-e(h,d)/2,p=d.x+e(d,h)/2;return o.eachAfter(r?function(b){b.x=(b.x-o.x)*t,b.y=(o.y-b.y)*n}:function(b){b.x=(b.x-g)/(p-g)*t,b.y=(1-(o.y?b.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function count(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function node_count(){return this.eachAfter(count)}function node_each(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function node_eachBefore(e,t){for(var n=this,r=[n],i,o,l=-1;n=r.pop();)if(e.call(t,n,++l,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function node_eachAfter(e,t){for(var n=this,r=[n],i=[],o,l,f,h=-1;n=r.pop();)if(i.push(n),o=n.children)for(l=0,f=o.length;l<f;++l)r.push(o[l]);for(;n=i.pop();)e.call(t,n,++h,this);return this}function node_find(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function node_sum(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function node_sort(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function node_path(e){for(var t=this,n=leastCommonAncestor(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function leastCommonAncestor(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function node_ancestors(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function node_descendants(){return Array.from(this)}function node_leaves(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function node_links(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*node_iterator(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function hierarchy(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=mapChildren)):t===void 0&&(t=objectChildren);for(var n=new Node$1(e),r,i=[n],o,l,f,h;r=i.pop();)if((l=t(r.data))&&(h=(l=Array.from(l)).length))for(r.children=l,f=h-1;f>=0;--f)i.push(o=l[f]=new Node$1(l[f])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(computeHeight)}function node_copy(){return hierarchy(this).eachBefore(copyData)}function objectChildren(e){return e.children}function mapChildren(e){return Array.isArray(e)?e[1]:null}function copyData(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function computeHeight(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Node$1(e){this.data=e,this.depth=this.height=0,this.parent=null}Node$1.prototype=hierarchy.prototype={constructor:Node$1,count:node_count,each:node_each,eachAfter:node_eachAfter,eachBefore:node_eachBefore,find:node_find,sum:node_sum,sort:node_sort,path:node_path,ancestors:node_ancestors,descendants:node_descendants,leaves:node_leaves,links:node_links,copy:node_copy,[Symbol.iterator]:node_iterator};function optional(e){return e==null?null:required(e)}function required(e){if(typeof e!="function")throw new Error;return e}function constantZero(){return 0}function constant$2(e){return function(){return e}}const a$1=1664525,c$3=1013904223,m=4294967296;function lcg$1(){let e=1;return()=>(e=(a$1*e+c$3)%m)/m}function array$1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function shuffle(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function enclose(e){return packEncloseRandom(e,lcg$1())}function packEncloseRandom(e,t){for(var n=0,r=(e=shuffle(Array.from(e),t)).length,i=[],o,l;n<r;)o=e[n],l&&enclosesWeak(l,o)?++n:(l=encloseBasis(i=extendBasis(i,o)),n=0);return l}function extendBasis(e,t){var n,r;if(enclosesWeakAll(t,e))return[t];for(n=0;n<e.length;++n)if(enclosesNot(t,e[n])&&enclosesWeakAll(encloseBasis2(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(enclosesNot(encloseBasis2(e[n],e[r]),t)&&enclosesNot(encloseBasis2(e[n],t),e[r])&&enclosesNot(encloseBasis2(e[r],t),e[n])&&enclosesWeakAll(encloseBasis3(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function enclosesNot(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function enclosesWeak(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function enclosesWeakAll(e,t){for(var n=0;n<t.length;++n)if(!enclosesWeak(e,t[n]))return!1;return!0}function encloseBasis(e){switch(e.length){case 1:return encloseBasis1(e[0]);case 2:return encloseBasis2(e[0],e[1]);case 3:return encloseBasis3(e[0],e[1],e[2])}}function encloseBasis1(e){return{x:e.x,y:e.y,r:e.r}}function encloseBasis2(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,l=t.y,f=t.r,h=o-n,d=l-r,g=f-i,p=Math.sqrt(h*h+d*d);return{x:(n+o+h/p*g)/2,y:(r+l+d/p*g)/2,r:(p+i+f)/2}}function encloseBasis3(e,t,n){var r=e.x,i=e.y,o=e.r,l=t.x,f=t.y,h=t.r,d=n.x,g=n.y,p=n.r,b=r-l,$=r-d,w=i-f,P=i-g,_=h-o,S=p-o,N=r*r+i*i-o*o,R=N-l*l-f*f+h*h,T=N-d*d-g*g+p*p,I=$*w-b*P,L=(w*T-P*R)/(I*2)-r,H=(P*_-w*S)/I,G=($*R-b*T)/(I*2)-i,j=(b*S-$*_)/I,F=H*H+j*j-1,O=2*(o+L*H+G*j),Z=L*L+G*G-o*o,V=-(Math.abs(F)>1e-6?(O+Math.sqrt(O*O-4*F*Z))/(2*F):Z/O);return{x:r+L+H*V,y:i+G+j*V,r:V}}function place(e,t,n){var r=e.x-t.x,i,o,l=e.y-t.y,f,h,d=r*r+l*l;d?(o=t.r+n.r,o*=o,h=e.r+n.r,h*=h,o>h?(i=(d+h-o)/(2*d),f=Math.sqrt(Math.max(0,h/d-i*i)),n.x=e.x-i*r-f*l,n.y=e.y-i*l+f*r):(i=(d+o-h)/(2*d),f=Math.sqrt(Math.max(0,o/d-i*i)),n.x=t.x+i*r-f*l,n.y=t.y+i*l+f*r)):(n.x=t.x+n.r,n.y=t.y)}function intersects(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function score(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function Node(e){this._=e,this.next=null,this.previous=null}function packSiblingsRandom(e,t){if(!(o=(e=array$1(e)).length))return 0;var n,r,i,o,l,f,h,d,g,p,b;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;place(r,n,i=e[2]),n=new Node(n),r=new Node(r),i=new Node(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(h=3;h<o;++h){place(n._,r._,i=e[h]),i=new Node(i),d=r.next,g=n.previous,p=r._.r,b=n._.r;do if(p<=b){if(intersects(d._,i._)){r=d,n.next=r,r.previous=n,--h;continue e}p+=d._.r,d=d.next}else{if(intersects(g._,i._)){n=g,n.next=r,r.previous=n,--h;continue e}b+=g._.r,g=g.previous}while(d!==g.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,l=score(n);(i=i.next)!==r;)(f=score(i))<l&&(n=i,l=f);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=packEncloseRandom(n,t),h=0;h<o;++h)n=e[h],n.x-=i.x,n.y-=i.y;return i.r}function siblings(e){return packSiblingsRandom(e,lcg$1()),e}function defaultRadius(e){return Math.sqrt(e.value)}function index$1(){var e=null,t=1,n=1,r=constantZero;function i(o){const l=lcg$1();return o.x=t/2,o.y=n/2,e?o.eachBefore(radiusLeaf(e)).eachAfter(packChildrenRandom(r,.5,l)).eachBefore(translateChild(1)):o.eachBefore(radiusLeaf(defaultRadius)).eachAfter(packChildrenRandom(constantZero,1,l)).eachAfter(packChildrenRandom(r,o.r/Math.min(t,n),l)).eachBefore(translateChild(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=optional(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:constant$2(+o),i):r},i}function radiusLeaf(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function packChildrenRandom(e,t,n){return function(r){if(i=r.children){var i,o,l=i.length,f=e(r)*t||0,h;if(f)for(o=0;o<l;++o)i[o].r+=f;if(h=packSiblingsRandom(i,n),f)for(o=0;o<l;++o)i[o].r-=f;r.r=h+f}}}function translateChild(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function roundNode(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function treemapDice(e,t,n,r,i){for(var o=e.children,l,f=-1,h=o.length,d=e.value&&(r-t)/e.value;++f<h;)l=o[f],l.y0=n,l.y1=i,l.x0=t,l.x1=t+=l.value*d}function partition(){var e=1,t=1,n=0,r=!1;function i(l){var f=l.height+1;return l.x0=l.y0=n,l.x1=e,l.y1=t/f,l.eachBefore(o(t,f)),r&&l.eachBefore(roundNode),l}function o(l,f){return function(h){h.children&&treemapDice(h,h.x0,l*(h.depth+1)/f,h.x1,l*(h.depth+2)/f);var d=h.x0,g=h.y0,p=h.x1-n,b=h.y1-n;p<d&&(d=p=(d+p)/2),b<g&&(g=b=(g+b)/2),h.x0=d,h.y0=g,h.x1=p,h.y1=b}}return i.round=function(l){return arguments.length?(r=!!l,i):r},i.size=function(l){return arguments.length?(e=+l[0],t=+l[1],i):[e,t]},i.padding=function(l){return arguments.length?(n=+l,i):n},i}var preroot={depth:-1},ambiguous={},imputed={};function defaultId(e){return e.id}function defaultParentId(e){return e.parentId}function stratify(){var e=defaultId,t=defaultParentId,n;function r(i){var o=Array.from(i),l=e,f=t,h,d,g,p,b,$,w,P,_=new Map;if(n!=null){const S=o.map((T,I)=>normalize$1(n(T,I,i))),N=S.map(parentof),R=new Set(S).add("");for(const T of N)R.has(T)||(R.add(T),S.push(T),N.push(parentof(T)),o.push(imputed));l=(T,I)=>S[I],f=(T,I)=>N[I]}for(g=0,h=o.length;g<h;++g)d=o[g],$=o[g]=new Node$1(d),(w=l(d,g,i))!=null&&(w+="")&&(P=$.id=w,_.set(P,_.has(P)?ambiguous:$)),(w=f(d,g,i))!=null&&(w+="")&&($.parent=w);for(g=0;g<h;++g)if($=o[g],w=$.parent){if(b=_.get(w),!b)throw new Error("missing: "+w);if(b===ambiguous)throw new Error("ambiguous: "+w);b.children?b.children.push($):b.children=[$],$.parent=b}else{if(p)throw new Error("multiple roots");p=$}if(!p)throw new Error("no root");if(n!=null){for(;p.data===imputed&&p.children.length===1;)p=p.children[0],--h;for(let S=o.length-1;S>=0&&($=o[S],$.data===imputed);--S)$.data=null}if(p.parent=preroot,p.eachBefore(function(S){S.depth=S.parent.depth+1,--h}).eachBefore(computeHeight),p.parent=null,h>0)throw new Error("cycle");return p}return r.id=function(i){return arguments.length?(e=optional(i),r):e},r.parentId=function(i){return arguments.length?(t=optional(i),r):t},r.path=function(i){return arguments.length?(n=optional(i),r):n},r}function normalize$1(e){e=`${e}`;let t=e.length;return slash(e,t-1)&&!slash(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function parentof(e){let t=e.length;if(t<2)return"";for(;--t>1&&!slash(e,t););return e.slice(0,t)}function slash(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function defaultSeparation(e,t){return e.parent===t.parent?1:2}function nextLeft(e){var t=e.children;return t?t[0]:e.t}function nextRight(e){var t=e.children;return t?t[t.length-1]:e.t}function moveSubtree(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function executeShifts(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function nextAncestor(e,t,n){return e.a.parent===t.parent?e.a:n}function TreeNode(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}TreeNode.prototype=Object.create(Node$1.prototype);function treeRoot(e){for(var t=new TreeNode(e,0),n,r=[t],i,o,l,f;n=r.pop();)if(o=n._.children)for(n.children=new Array(f=o.length),l=f-1;l>=0;--l)r.push(i=n.children[l]=new TreeNode(o[l],l)),i.parent=n;return(t.parent=new TreeNode(null,0)).children=[t],t}function tree(){var e=defaultSeparation,t=1,n=1,r=null;function i(d){var g=treeRoot(d);if(g.eachAfter(o),g.parent.m=-g.z,g.eachBefore(l),r)d.eachBefore(h);else{var p=d,b=d,$=d;d.eachBefore(function(N){N.x<p.x&&(p=N),N.x>b.x&&(b=N),N.depth>$.depth&&($=N)});var w=p===b?1:e(p,b)/2,P=w-p.x,_=t/(b.x+w+P),S=n/($.depth||1);d.eachBefore(function(N){N.x=(N.x+P)*_,N.y=N.depth*S})}return d}function o(d){var g=d.children,p=d.parent.children,b=d.i?p[d.i-1]:null;if(g){executeShifts(d);var $=(g[0].z+g[g.length-1].z)/2;b?(d.z=b.z+e(d._,b._),d.m=d.z-$):d.z=$}else b&&(d.z=b.z+e(d._,b._));d.parent.A=f(d,b,d.parent.A||p[0])}function l(d){d._.x=d.z+d.parent.m,d.m+=d.parent.m}function f(d,g,p){if(g){for(var b=d,$=d,w=g,P=b.parent.children[0],_=b.m,S=$.m,N=w.m,R=P.m,T;w=nextRight(w),b=nextLeft(b),w&&b;)P=nextLeft(P),$=nextRight($),$.a=d,T=w.z+N-b.z-_+e(w._,b._),T>0&&(moveSubtree(nextAncestor(w,d,p),d,T),_+=T,S+=T),N+=w.m,_+=b.m,R+=P.m,S+=$.m;w&&!nextRight($)&&($.t=w,$.m+=N-S),b&&!nextLeft(P)&&(P.t=b,P.m+=_-R,p=d)}return p}function h(d){d.x*=t,d.y=d.depth*n}return i.separation=function(d){return arguments.length?(e=d,i):e},i.size=function(d){return arguments.length?(r=!1,t=+d[0],n=+d[1],i):r?null:[t,n]},i.nodeSize=function(d){return arguments.length?(r=!0,t=+d[0],n=+d[1],i):r?[t,n]:null},i}function treemapSlice(e,t,n,r,i){for(var o=e.children,l,f=-1,h=o.length,d=e.value&&(i-n)/e.value;++f<h;)l=o[f],l.x0=t,l.x1=r,l.y0=n,l.y1=n+=l.value*d}var phi=(1+Math.sqrt(5))/2;function squarifyRatio(e,t,n,r,i,o){for(var l=[],f=t.children,h,d,g=0,p=0,b=f.length,$,w,P=t.value,_,S,N,R,T,I,L;g<b;){$=i-n,w=o-r;do _=f[p++].value;while(!_&&p<b);for(S=N=_,I=Math.max(w/$,$/w)/(P*e),L=_*_*I,T=Math.max(N/L,L/S);p<b;++p){if(_+=d=f[p].value,d<S&&(S=d),d>N&&(N=d),L=_*_*I,R=Math.max(N/L,L/S),R>T){_-=d;break}T=R}l.push(h={value:_,dice:$<w,children:f.slice(g,p)}),h.dice?treemapDice(h,n,r,i,P?r+=w*_/P:o):treemapSlice(h,n,r,P?n+=$*_/P:i,o),P-=_,g=p}return l}var squarify=function e(t){function n(r,i,o,l,f){squarifyRatio(t,r,i,o,l,f)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(phi);function index(){var e=squarify,t=!1,n=1,r=1,i=[0],o=constantZero,l=constantZero,f=constantZero,h=constantZero,d=constantZero;function g(b){return b.x0=b.y0=0,b.x1=n,b.y1=r,b.eachBefore(p),i=[0],t&&b.eachBefore(roundNode),b}function p(b){var $=i[b.depth],w=b.x0+$,P=b.y0+$,_=b.x1-$,S=b.y1-$;_<w&&(w=_=(w+_)/2),S<P&&(P=S=(P+S)/2),b.x0=w,b.y0=P,b.x1=_,b.y1=S,b.children&&($=i[b.depth+1]=o(b)/2,w+=d(b)-$,P+=l(b)-$,_-=f(b)-$,S-=h(b)-$,_<w&&(w=_=(w+_)/2),S<P&&(P=S=(P+S)/2),e(b,w,P,_,S))}return g.round=function(b){return arguments.length?(t=!!b,g):t},g.size=function(b){return arguments.length?(n=+b[0],r=+b[1],g):[n,r]},g.tile=function(b){return arguments.length?(e=required(b),g):e},g.padding=function(b){return arguments.length?g.paddingInner(b).paddingOuter(b):g.paddingInner()},g.paddingInner=function(b){return arguments.length?(o=typeof b=="function"?b:constant$2(+b),g):o},g.paddingOuter=function(b){return arguments.length?g.paddingTop(b).paddingRight(b).paddingBottom(b).paddingLeft(b):g.paddingTop()},g.paddingTop=function(b){return arguments.length?(l=typeof b=="function"?b:constant$2(+b),g):l},g.paddingRight=function(b){return arguments.length?(f=typeof b=="function"?b:constant$2(+b),g):f},g.paddingBottom=function(b){return arguments.length?(h=typeof b=="function"?b:constant$2(+b),g):h},g.paddingLeft=function(b){return arguments.length?(d=typeof b=="function"?b:constant$2(+b),g):d},g}function binary(e,t,n,r,i){var o=e.children,l,f=o.length,h,d=new Array(f+1);for(d[0]=h=l=0;l<f;++l)d[l+1]=h+=o[l].value;g(0,f,e.value,t,n,r,i);function g(p,b,$,w,P,_,S){if(p>=b-1){var N=o[p];N.x0=w,N.y0=P,N.x1=_,N.y1=S;return}for(var R=d[p],T=$/2+R,I=p+1,L=b-1;I<L;){var H=I+L>>>1;d[H]<T?I=H+1:L=H}T-d[I-1]<d[I]-T&&p+1<I&&--I;var G=d[I]-R,j=$-G;if(_-w>S-P){var F=$?(w*j+_*G)/$:_;g(p,I,G,w,P,F,S),g(I,b,j,F,P,_,S)}else{var O=$?(P*j+S*G)/$:S;g(p,I,G,w,P,_,O),g(I,b,j,w,O,_,S)}}}function sliceDice(e,t,n,r,i){(e.depth&1?treemapSlice:treemapDice)(e,t,n,r,i)}var resquarify=function e(t){function n(r,i,o,l,f){if((h=r._squarify)&&h.ratio===t)for(var h,d,g,p,b=-1,$,w=h.length,P=r.value;++b<w;){for(d=h[b],g=d.children,p=d.value=0,$=g.length;p<$;++p)d.value+=g[p].value;d.dice?treemapDice(d,i,o,l,P?o+=(f-o)*d.value/P:f):treemapSlice(d,i,o,P?i+=(l-i)*d.value/P:l,f),P-=d.value}else r._squarify=h=squarifyRatio(t,r,i,o,l,f),h.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(phi);function area$1(e){for(var t=-1,n=e.length,r,i=e[n-1],o=0;++t<n;)r=i,i=e[t],o+=r[1]*i[0]-r[0]*i[1];return o/2}function centroid(e){for(var t=-1,n=e.length,r=0,i=0,o,l=e[n-1],f,h=0;++t<n;)o=l,l=e[t],h+=f=o[0]*l[1]-l[0]*o[1],r+=(o[0]+l[0])*f,i+=(o[1]+l[1])*f;return h*=3,[r/h,i/h]}function cross$1(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function lexicographicOrder(e,t){return e[0]-t[0]||e[1]-t[1]}function computeUpperHullIndexes(e){const t=e.length,n=[0,1];let r=2,i;for(i=2;i<t;++i){for(;r>1&&cross$1(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function hull(e){if((n=e.length)<3)return null;var t,n,r=new Array(n),i=new Array(n);for(t=0;t<n;++t)r[t]=[+e[t][0],+e[t][1],t];for(r.sort(lexicographicOrder),t=0;t<n;++t)i[t]=[r[t][0],-r[t][1]];var o=computeUpperHullIndexes(r),l=computeUpperHullIndexes(i),f=l[0]===o[0],h=l[l.length-1]===o[o.length-1],d=[];for(t=o.length-1;t>=0;--t)d.push(e[r[o[t]][2]]);for(t=+f;t<l.length-h;++t)d.push(e[r[l[t]][2]]);return d}function contains(e,t){for(var n=e.length,r=e[n-1],i=t[0],o=t[1],l=r[0],f=r[1],h,d,g=!1,p=0;p<n;++p)r=e[p],h=r[0],d=r[1],d>o!=f>o&&i<(l-h)*(o-d)/(f-d)+h&&(g=!g),l=h,f=d;return g}function length(e){for(var t=-1,n=e.length,r=e[n-1],i,o,l=r[0],f=r[1],h=0;++t<n;)i=l,o=f,r=e[t],l=r[0],f=r[1],i-=l,o-=f,h+=Math.hypot(i,o);return h}var defaultSource=Math.random,uniform=function e(t){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,arguments.length===1?(i=r,r=0):i-=r,function(){return t()*i+r}}return n.source=e,n}(defaultSource),int=function e(t){function n(r,i){return arguments.length<2&&(i=r,r=0),r=Math.floor(r),i=Math.floor(i)-r,function(){return Math.floor(t()*i+r)}}return n.source=e,n}(defaultSource),normal=function e(t){function n(r,i){var o,l;return r=r==null?0:+r,i=i==null?1:+i,function(){var f;if(o!=null)f=o,o=null;else do o=t()*2-1,f=t()*2-1,l=o*o+f*f;while(!l||l>1);return r+i*f*Math.sqrt(-2*Math.log(l)/l)}}return n.source=e,n}(defaultSource),logNormal=function e(t){var n=normal.source(t);function r(){var i=n.apply(this,arguments);return function(){return Math.exp(i())}}return r.source=e,r}(defaultSource),irwinHall=function e(t){function n(r){return(r=+r)<=0?()=>0:function(){for(var i=0,o=r;o>1;--o)i+=t();return i+o*t()}}return n.source=e,n}(defaultSource),bates=function e(t){var n=irwinHall.source(t);function r(i){if((i=+i)==0)return t;var o=n(i);return function(){return o()/i}}return r.source=e,r}(defaultSource),exponential=function e(t){function n(r){return function(){return-Math.log1p(-t())/r}}return n.source=e,n}(defaultSource),pareto=function e(t){function n(r){if((r=+r)<0)throw new RangeError("invalid alpha");return r=1/-r,function(){return Math.pow(1-t(),r)}}return n.source=e,n}(defaultSource),bernoulli=function e(t){function n(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return function(){return Math.floor(t()+r)}}return n.source=e,n}(defaultSource),geometric=function e(t){function n(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return r===0?()=>1/0:r===1?()=>1:(r=Math.log1p(-r),function(){return 1+Math.floor(Math.log1p(-t())/r)})}return n.source=e,n}(defaultSource),gamma=function e(t){var n=normal.source(t)();function r(i,o){if((i=+i)<0)throw new RangeError("invalid k");if(i===0)return()=>0;if(o=o==null?1:+o,i===1)return()=>-Math.log1p(-t())*o;var l=(i<1?i+1:i)-1/3,f=1/(3*Math.sqrt(l)),h=i<1?()=>Math.pow(t(),1/i):()=>1;return function(){do{do var d=n(),g=1+f*d;while(g<=0);g*=g*g;var p=1-t()}while(p>=1-.0331*d*d*d*d&&Math.log(p)>=.5*d*d+l*(1-g+Math.log(g)));return l*g*h()*o}}return r.source=e,r}(defaultSource),beta=function e(t){var n=gamma.source(t);function r(i,o){var l=n(i),f=n(o);return function(){var h=l();return h===0?0:h/(h+f())}}return r.source=e,r}(defaultSource),binomial=function e(t){var n=geometric.source(t),r=beta.source(t);function i(o,l){return o=+o,(l=+l)>=1?()=>o:l<=0?()=>0:function(){for(var f=0,h=o,d=l;h*d>16&&h*(1-d)>16;){var g=Math.floor((h+1)*d),p=r(g,h-g+1)();p<=d?(f+=g,h-=g,d=(d-p)/(1-p)):(h=g-1,d/=p)}for(var b=d<.5,$=b?d:1-d,w=n($),P=w(),_=0;P<=h;++_)P+=w();return f+(b?_:h-_)}}return i.source=e,i}(defaultSource),weibull=function e(t){function n(r,i,o){var l;return(r=+r)==0?l=f=>-Math.log(f):(r=1/r,l=f=>Math.pow(f,r)),i=i==null?0:+i,o=o==null?1:+o,function(){return i+o*l(-Math.log1p(-t()))}}return n.source=e,n}(defaultSource),cauchy=function e(t){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){return r+i*Math.tan(Math.PI*t())}}return n.source=e,n}(defaultSource),logistic=function e(t){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){var o=t();return r+i*Math.log(o/(1-o))}}return n.source=e,n}(defaultSource),poisson=function e(t){var n=gamma.source(t),r=binomial.source(t);function i(o){return function(){for(var l=0,f=o;f>16;){var h=Math.floor(.875*f),d=n(h)();if(d>f)return l+r(h-1,f/d)();l+=h,f-=d}for(var g=-Math.log1p(-t()),p=0;g<=f;++p)g-=Math.log1p(-t());return l+p}}return i.source=e,i}(defaultSource);const mul=1664525,inc=1013904223,eps=1/4294967296;function lcg(e=Math.random()){let t=(0<=e&&e<1?e/eps:Math.abs(e))|0;return()=>(t=mul*t+inc|0,eps*(t>>>0))}function initRange(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function initInterpolator(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const implicit=Symbol("implicit");function ordinal(){var e=new InternMap,t=[],n=[],r=implicit;function i(o){let l=e.get(o);if(l===void 0){if(r!==implicit)return r;e.set(o,l=t.push(o)-1)}return n[l%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new InternMap;for(const l of o)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return ordinal(t,n).unknown(r)},initRange.apply(i,arguments),i}function band(){var e=ordinal().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,l,f=!1,h=0,d=0,g=.5;delete e.unknown;function p(){var b=t().length,$=i<r,w=$?i:r,P=$?r:i;o=(P-w)/Math.max(1,b-h+d*2),f&&(o=Math.floor(o)),w+=(P-w-o*(b-h))*g,l=o*(1-h),f&&(w=Math.round(w),l=Math.round(l));var _=range$2(b).map(function(S){return w+o*S});return n($?_.reverse():_)}return e.domain=function(b){return arguments.length?(t(b),p()):t()},e.range=function(b){return arguments.length?([r,i]=b,r=+r,i=+i,p()):[r,i]},e.rangeRound=function(b){return[r,i]=b,r=+r,i=+i,f=!0,p()},e.bandwidth=function(){return l},e.step=function(){return o},e.round=function(b){return arguments.length?(f=!!b,p()):f},e.padding=function(b){return arguments.length?(h=Math.min(1,d=+b),p()):h},e.paddingInner=function(b){return arguments.length?(h=Math.min(1,b),p()):h},e.paddingOuter=function(b){return arguments.length?(d=+b,p()):d},e.align=function(b){return arguments.length?(g=Math.max(0,Math.min(1,b)),p()):g},e.copy=function(){return band(t(),[r,i]).round(f).paddingInner(h).paddingOuter(d).align(g)},initRange.apply(p(),arguments)}function pointish(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return pointish(t())},e}function point$4(){return pointish(band.apply(null,arguments).paddingInner(1))}function constants(e){return function(){return e}}function number$1(e){return+e}var unit=[0,1];function identity$3(e){return e}function normalize(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:constants(isNaN(t)?NaN:.5)}function clamper(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function bimap(e,t,n){var r=e[0],i=e[1],o=t[0],l=t[1];return i<r?(r=normalize(i,r),o=n(l,o)):(r=normalize(r,i),o=n(o,l)),function(f){return o(r(f))}}function polymap(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=normalize(e[l],e[l+1]),o[l]=n(t[l],t[l+1]);return function(f){var h=bisect(e,f,1,r)-1;return o[h](i[h](f))}}function copy$1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function transformer$2(){var e=unit,t=unit,n=interpolate$2,r,i,o,l=identity$3,f,h,d;function g(){var b=Math.min(e.length,t.length);return l!==identity$3&&(l=clamper(e[0],e[b-1])),f=b>2?polymap:bimap,h=d=null,p}function p(b){return b==null||isNaN(b=+b)?o:(h||(h=f(e.map(r),t,n)))(r(l(b)))}return p.invert=function(b){return l(i((d||(d=f(t,e.map(r),interpolateNumber)))(b)))},p.domain=function(b){return arguments.length?(e=Array.from(b,number$1),g()):e.slice()},p.range=function(b){return arguments.length?(t=Array.from(b),g()):t.slice()},p.rangeRound=function(b){return t=Array.from(b),n=interpolateRound,g()},p.clamp=function(b){return arguments.length?(l=b?!0:identity$3,g()):l!==identity$3},p.interpolate=function(b){return arguments.length?(n=b,g()):n},p.unknown=function(b){return arguments.length?(o=b,p):o},function(b,$){return r=b,i=$,g()}}function continuous(){return transformer$2()(identity$3,identity$3)}function tickFormat(e,t,n,r){var i=tickStep(e,t,n),o;switch(r=formatSpecifier(r==null?",f":r),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=precisionPrefix(i,l))&&(r.precision=o),formatPrefix(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=precisionRound(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=precisionFixed(i))&&(r.precision=o-(r.type==="%")*2);break}}return format(r)}function linearish(e){var t=e.domain;return e.ticks=function(n){var r=t();return ticks(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return tickFormat(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,l=r[i],f=r[o],h,d,g=10;for(f<l&&(d=l,l=f,f=d,d=i,i=o,o=d);g-- >0;){if(d=tickIncrement(l,f,n),d===h)return r[i]=l,r[o]=f,t(r);if(d>0)l=Math.floor(l/d)*d,f=Math.ceil(f/d)*d;else if(d<0)l=Math.ceil(l*d)/d,f=Math.floor(f*d)/d;else break;h=d}return e},e}function linear(){var e=continuous();return e.copy=function(){return copy$1(e,linear())},initRange.apply(e,arguments),linearish(e)}function identity$2(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,number$1),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return identity$2(e).unknown(t)},e=arguments.length?Array.from(e,number$1):[0,1],linearish(n)}function nice(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],l;return o<i&&(l=n,n=r,r=l,l=i,i=o,o=l),e[n]=t.floor(i),e[r]=t.ceil(o),e}function transformLog(e){return Math.log(e)}function transformExp(e){return Math.exp(e)}function transformLogn(e){return-Math.log(-e)}function transformExpn(e){return-Math.exp(-e)}function pow10(e){return isFinite(e)?+("1e"+e):e<0?0:e}function powp(e){return e===10?pow10:e===Math.E?Math.exp:t=>Math.pow(e,t)}function logp(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function reflect(e){return(t,n)=>-e(-t,n)}function loggish(e){const t=e(transformLog,transformExp),n=t.domain;let r=10,i,o;function l(){return i=logp(r),o=powp(r),n()[0]<0?(i=reflect(i),o=reflect(o),e(transformLogn,transformExpn)):e(transformLog,transformExp),t}return t.base=function(f){return arguments.length?(r=+f,l()):r},t.domain=function(f){return arguments.length?(n(f),l()):n()},t.ticks=f=>{const h=n();let d=h[0],g=h[h.length-1];const p=g<d;p&&([d,g]=[g,d]);let b=i(d),$=i(g),w,P;const _=f==null?10:+f;let S=[];if(!(r%1)&&$-b<_){if(b=Math.floor(b),$=Math.ceil($),d>0){for(;b<=$;++b)for(w=1;w<r;++w)if(P=b<0?w/o(-b):w*o(b),!(P<d)){if(P>g)break;S.push(P)}}else for(;b<=$;++b)for(w=r-1;w>=1;--w)if(P=b>0?w/o(-b):w*o(b),!(P<d)){if(P>g)break;S.push(P)}S.length*2<_&&(S=ticks(d,g,_))}else S=ticks(b,$,Math.min($-b,_)).map(o);return p?S.reverse():S},t.tickFormat=(f,h)=>{if(f==null&&(f=10),h==null&&(h=r===10?"s":","),typeof h!="function"&&(!(r%1)&&(h=formatSpecifier(h)).precision==null&&(h.trim=!0),h=format(h)),f===1/0)return h;const d=Math.max(1,r*f/t.ticks().length);return g=>{let p=g/o(Math.round(i(g)));return p*r<r-.5&&(p*=r),p<=d?h(g):""}},t.nice=()=>n(nice(n(),{floor:f=>o(Math.floor(i(f))),ceil:f=>o(Math.ceil(i(f)))})),t}function log(){const e=loggish(transformer$2()).domain([1,10]);return e.copy=()=>copy$1(e,log()).base(e.base()),initRange.apply(e,arguments),e}function transformSymlog(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function transformSymexp(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function symlogish(e){var t=1,n=e(transformSymlog(t),transformSymexp(t));return n.constant=function(r){return arguments.length?e(transformSymlog(t=+r),transformSymexp(t)):t},linearish(n)}function symlog(){var e=symlogish(transformer$2());return e.copy=function(){return copy$1(e,symlog()).constant(e.constant())},initRange.apply(e,arguments)}function transformPow(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function transformSqrt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function transformSquare(e){return e<0?-e*e:e*e}function powish(e){var t=e(identity$3,identity$3),n=1;function r(){return n===1?e(identity$3,identity$3):n===.5?e(transformSqrt,transformSquare):e(transformPow(n),transformPow(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},linearish(t)}function pow(){var e=powish(transformer$2());return e.copy=function(){return copy$1(e,pow()).exponent(e.exponent())},initRange.apply(e,arguments),e}function sqrt$1(){return pow.apply(null,arguments).exponent(.5)}function square$1(e){return Math.sign(e)*e*e}function unsquare(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function radial(){var e=continuous(),t=[0,1],n=!1,r;function i(o){var l=unsquare(e(o));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(o){return e.invert(square$1(o))},i.domain=function(o){return arguments.length?(e.domain(o),i):e.domain()},i.range=function(o){return arguments.length?(e.range((t=Array.from(o,number$1)).map(square$1)),i):t.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(e.clamp(o),i):e.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return radial(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},initRange.apply(i,arguments),linearish(i)}function quantile(){var e=[],t=[],n=[],r;function i(){var l=0,f=Math.max(1,t.length);for(n=new Array(f-1);++l<f;)n[l-1]=quantileSorted(e,l/f);return o}function o(l){return l==null||isNaN(l=+l)?r:t[bisect(n,l)]}return o.invertExtent=function(l){var f=t.indexOf(l);return f<0?[NaN,NaN]:[f>0?n[f-1]:e[0],f<n.length?n[f]:e[e.length-1]]},o.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let f of l)f!=null&&!isNaN(f=+f)&&e.push(f);return e.sort(ascending$3),i()},o.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},o.unknown=function(l){return arguments.length?(r=l,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return quantile().domain(e).range(t).unknown(r)},initRange.apply(o,arguments)}function quantize(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function l(h){return h!=null&&h<=h?i[bisect(r,h,0,n)]:o}function f(){var h=-1;for(r=new Array(n);++h<n;)r[h]=((h+1)*t-(h-n)*e)/(n+1);return l}return l.domain=function(h){return arguments.length?([e,t]=h,e=+e,t=+t,f()):[e,t]},l.range=function(h){return arguments.length?(n=(i=Array.from(h)).length-1,f()):i.slice()},l.invertExtent=function(h){var d=i.indexOf(h);return d<0?[NaN,NaN]:d<1?[e,r[0]]:d>=n?[r[n-1],t]:[r[d-1],r[d]]},l.unknown=function(h){return arguments.length&&(o=h),l},l.thresholds=function(){return r.slice()},l.copy=function(){return quantize().domain([e,t]).range(i).unknown(o)},initRange.apply(linearish(l),arguments)}function threshold(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[bisect(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var l=t.indexOf(o);return[e[l-1],e[l]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return threshold().domain(e).range(t).unknown(n)},initRange.apply(i,arguments)}const t0=new Date,t1=new Date;function timeInterval(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const l=i(o),f=i.ceil(o);return o-l<f-o?l:f},i.offset=(o,l)=>(t(o=new Date(+o),l==null?1:Math.floor(l)),o),i.range=(o,l,f)=>{const h=[];if(o=i.ceil(o),f=f==null?1:Math.floor(f),!(o<l)||!(f>0))return h;let d;do h.push(d=new Date(+o)),t(o,f),e(o);while(d<o&&o<l);return h},i.filter=o=>timeInterval(l=>{if(l>=l)for(;e(l),!o(l);)l.setTime(l-1)},(l,f)=>{if(l>=l)if(f<0)for(;++f<=0;)for(;t(l,-1),!o(l););else for(;--f>=0;)for(;t(l,1),!o(l););}),n&&(i.count=(o,l)=>(t0.setTime(+o),t1.setTime(+l),e(t0),e(t1),Math.floor(n(t0,t1))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?l=>r(l)%o===0:l=>i.count(0,l)%o===0):i)),i}const millisecond=timeInterval(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);millisecond.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?timeInterval(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):millisecond);const milliseconds=millisecond.range,durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,second=timeInterval(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*durationSecond)},(e,t)=>(t-e)/durationSecond,e=>e.getUTCSeconds()),seconds=second.range,timeMinute=timeInterval(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond)},(e,t)=>{e.setTime(+e+t*durationMinute)},(e,t)=>(t-e)/durationMinute,e=>e.getMinutes()),timeMinutes=timeMinute.range,utcMinute=timeInterval(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*durationMinute)},(e,t)=>(t-e)/durationMinute,e=>e.getUTCMinutes()),utcMinutes=utcMinute.range,timeHour=timeInterval(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond-e.getMinutes()*durationMinute)},(e,t)=>{e.setTime(+e+t*durationHour)},(e,t)=>(t-e)/durationHour,e=>e.getHours()),timeHours=timeHour.range,utcHour=timeInterval(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*durationHour)},(e,t)=>(t-e)/durationHour,e=>e.getUTCHours()),utcHours=utcHour.range,timeDay=timeInterval(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute)/durationDay,e=>e.getDate()-1),timeDays=timeDay.range,utcDay=timeInterval(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/durationDay,e=>e.getUTCDate()-1),utcDays=utcDay.range,unixDay=timeInterval(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/durationDay,e=>Math.floor(e/durationDay)),unixDays=unixDay.range;function timeWeekday(e){return timeInterval(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6),timeSundays=timeSunday.range,timeMondays=timeMonday.range,timeTuesdays=timeTuesday.range,timeWednesdays=timeWednesday.range,timeThursdays=timeThursday.range,timeFridays=timeFriday.range,timeSaturdays=timeSaturday.range;function utcWeekday(e){return timeInterval(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6),utcSundays=utcSunday.range,utcMondays=utcMonday.range,utcTuesdays=utcTuesday.range,utcWednesdays=utcWednesday.range,utcThursdays=utcThursday.range,utcFridays=utcFriday.range,utcSaturdays=utcSaturday.range,timeMonth=timeInterval(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),timeMonths=timeMonth.range,utcMonth=timeInterval(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),utcMonths=utcMonth.range,timeYear=timeInterval(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());timeYear.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:timeInterval(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});const timeYears=timeYear.range,utcYear=timeInterval(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());utcYear.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:timeInterval(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});const utcYears=utcYear.range;function ticker(e,t,n,r,i,o){const l=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[o,1,durationMinute],[o,5,5*durationMinute],[o,15,15*durationMinute],[o,30,30*durationMinute],[i,1,durationHour],[i,3,3*durationHour],[i,6,6*durationHour],[i,12,12*durationHour],[r,1,durationDay],[r,2,2*durationDay],[n,1,durationWeek],[t,1,durationMonth],[t,3,3*durationMonth],[e,1,durationYear]];function f(d,g,p){const b=g<d;b&&([d,g]=[g,d]);const $=p&&typeof p.range=="function"?p:h(d,g,p),w=$?$.range(d,+g+1):[];return b?w.reverse():w}function h(d,g,p){const b=Math.abs(g-d)/p,$=bisector(([,,_])=>_).right(l,b);if($===l.length)return e.every(tickStep(d/durationYear,g/durationYear,p));if($===0)return millisecond.every(Math.max(tickStep(d,g,p),1));const[w,P]=l[b/l[$-1][2]<l[$][2]/b?$-1:$];return w.every(P)}return[f,h]}const[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function utcDate(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function newDate(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function formatLocale(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,l=e.shortDays,f=e.months,h=e.shortMonths,d=formatRe(i),g=formatLookup(i),p=formatRe(o),b=formatLookup(o),$=formatRe(l),w=formatLookup(l),P=formatRe(f),_=formatLookup(f),S=formatRe(h),N=formatLookup(h),R={a:W,A:Q,b:J,B:te,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:ie,q:ae,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},T={a:he,A:le,b:ce,B:ye,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:fe,q:me,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},I={a:F,A:O,b:Z,B:V,c:q,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:j,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:z,X:U,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};R.x=L(n,R),R.X=L(r,R),R.c=L(t,R),T.x=L(n,T),T.X=L(r,T),T.c=L(t,T);function L(ne,se){return function(ue){var ee=[],ge=-1,de=0,be=ne.length,ve,oe,pe;for(ue instanceof Date||(ue=new Date(+ue));++ge<be;)ne.charCodeAt(ge)===37&&(ee.push(ne.slice(de,ge)),(oe=pads[ve=ne.charAt(++ge)])!=null?ve=ne.charAt(++ge):oe=ve==="e"?" ":"0",(pe=se[ve])&&(ve=pe(ue,oe)),ee.push(ve),de=ge+1);return ee.push(ne.slice(de,ge)),ee.join("")}}function H(ne,se){return function(ue){var ee=newDate(1900,void 0,1),ge=G(ee,ne,ue+="",0),de,be;if(ge!=ue.length)return null;if("Q"in ee)return new Date(ee.Q);if("s"in ee)return new Date(ee.s*1e3+("L"in ee?ee.L:0));if(se&&!("Z"in ee)&&(ee.Z=0),"p"in ee&&(ee.H=ee.H%12+ee.p*12),ee.m===void 0&&(ee.m="q"in ee?ee.q:0),"V"in ee){if(ee.V<1||ee.V>53)return null;"w"in ee||(ee.w=1),"Z"in ee?(de=utcDate(newDate(ee.y,0,1)),be=de.getUTCDay(),de=be>4||be===0?utcMonday.ceil(de):utcMonday(de),de=utcDay.offset(de,(ee.V-1)*7),ee.y=de.getUTCFullYear(),ee.m=de.getUTCMonth(),ee.d=de.getUTCDate()+(ee.w+6)%7):(de=localDate(newDate(ee.y,0,1)),be=de.getDay(),de=be>4||be===0?timeMonday.ceil(de):timeMonday(de),de=timeDay.offset(de,(ee.V-1)*7),ee.y=de.getFullYear(),ee.m=de.getMonth(),ee.d=de.getDate()+(ee.w+6)%7)}else("W"in ee||"U"in ee)&&("w"in ee||(ee.w="u"in ee?ee.u%7:"W"in ee?1:0),be="Z"in ee?utcDate(newDate(ee.y,0,1)).getUTCDay():localDate(newDate(ee.y,0,1)).getDay(),ee.m=0,ee.d="W"in ee?(ee.w+6)%7+ee.W*7-(be+5)%7:ee.w+ee.U*7-(be+6)%7);return"Z"in ee?(ee.H+=ee.Z/100|0,ee.M+=ee.Z%100,utcDate(ee)):localDate(ee)}}function G(ne,se,ue,ee){for(var ge=0,de=se.length,be=ue.length,ve,oe;ge<de;){if(ee>=be)return-1;if(ve=se.charCodeAt(ge++),ve===37){if(ve=se.charAt(ge++),oe=I[ve in pads?se.charAt(ge++):ve],!oe||(ee=oe(ne,ue,ee))<0)return-1}else if(ve!=ue.charCodeAt(ee++))return-1}return ee}function j(ne,se,ue){var ee=d.exec(se.slice(ue));return ee?(ne.p=g.get(ee[0].toLowerCase()),ue+ee[0].length):-1}function F(ne,se,ue){var ee=$.exec(se.slice(ue));return ee?(ne.w=w.get(ee[0].toLowerCase()),ue+ee[0].length):-1}function O(ne,se,ue){var ee=p.exec(se.slice(ue));return ee?(ne.w=b.get(ee[0].toLowerCase()),ue+ee[0].length):-1}function Z(ne,se,ue){var ee=S.exec(se.slice(ue));return ee?(ne.m=N.get(ee[0].toLowerCase()),ue+ee[0].length):-1}function V(ne,se,ue){var ee=P.exec(se.slice(ue));return ee?(ne.m=_.get(ee[0].toLowerCase()),ue+ee[0].length):-1}function q(ne,se,ue){return G(ne,t,se,ue)}function z(ne,se,ue){return G(ne,n,se,ue)}function U(ne,se,ue){return G(ne,r,se,ue)}function W(ne){return l[ne.getDay()]}function Q(ne){return o[ne.getDay()]}function J(ne){return h[ne.getMonth()]}function te(ne){return f[ne.getMonth()]}function ie(ne){return i[+(ne.getHours()>=12)]}function ae(ne){return 1+~~(ne.getMonth()/3)}function he(ne){return l[ne.getUTCDay()]}function le(ne){return o[ne.getUTCDay()]}function ce(ne){return h[ne.getUTCMonth()]}function ye(ne){return f[ne.getUTCMonth()]}function fe(ne){return i[+(ne.getUTCHours()>=12)]}function me(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var se=L(ne+="",R);return se.toString=function(){return ne},se},parse:function(ne){var se=H(ne+="",!1);return se.toString=function(){return ne},se},utcFormat:function(ne){var se=L(ne+="",T);return se.toString=function(){return ne},se},utcParse:function(ne){var se=H(ne+="",!0);return se.toString=function(){return ne},se}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function requote(e){return e.replace(requoteRe,"\\$&")}function formatRe(e){return new RegExp("^(?:"+e.map(requote).join("|")+")","i")}function formatLookup(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function parseWeekdayNumberSunday(e,t,n){var r=numberRe.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function parseWeekdayNumberMonday(e,t,n){var r=numberRe.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function parseWeekNumberSunday(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function parseWeekNumberISO(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function parseWeekNumberMonday(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function parseFullYear(e,t,n){var r=numberRe.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function parseYear(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function parseZone(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function parseQuarter(e,t,n){var r=numberRe.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function parseMonthNumber(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function parseDayOfMonth(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function parseDayOfYear(e,t,n){var r=numberRe.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function parseHour24(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function parseMinutes(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function parseSeconds(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function parseMilliseconds(e,t,n){var r=numberRe.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function parseMicroseconds(e,t,n){var r=numberRe.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function parseLiteralPercent(e,t,n){var r=percentRe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function parseUnixTimestamp(e,t,n){var r=numberRe.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function parseUnixTimestampSeconds(e,t,n){var r=numberRe.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function formatDayOfMonth(e,t){return pad(e.getDate(),t,2)}function formatHour24(e,t){return pad(e.getHours(),t,2)}function formatHour12(e,t){return pad(e.getHours()%12||12,t,2)}function formatDayOfYear(e,t){return pad(1+timeDay.count(timeYear(e),e),t,3)}function formatMilliseconds(e,t){return pad(e.getMilliseconds(),t,3)}function formatMicroseconds(e,t){return formatMilliseconds(e,t)+"000"}function formatMonthNumber(e,t){return pad(e.getMonth()+1,t,2)}function formatMinutes(e,t){return pad(e.getMinutes(),t,2)}function formatSeconds(e,t){return pad(e.getSeconds(),t,2)}function formatWeekdayNumberMonday(e){var t=e.getDay();return t===0?7:t}function formatWeekNumberSunday(e,t){return pad(timeSunday.count(timeYear(e)-1,e),t,2)}function dISO(e){var t=e.getDay();return t>=4||t===0?timeThursday(e):timeThursday.ceil(e)}function formatWeekNumberISO(e,t){return e=dISO(e),pad(timeThursday.count(timeYear(e),e)+(timeYear(e).getDay()===4),t,2)}function formatWeekdayNumberSunday(e){return e.getDay()}function formatWeekNumberMonday(e,t){return pad(timeMonday.count(timeYear(e)-1,e),t,2)}function formatYear(e,t){return pad(e.getFullYear()%100,t,2)}function formatYearISO(e,t){return e=dISO(e),pad(e.getFullYear()%100,t,2)}function formatFullYear(e,t){return pad(e.getFullYear()%1e4,t,4)}function formatFullYearISO(e,t){var n=e.getDay();return e=n>=4||n===0?timeThursday(e):timeThursday.ceil(e),pad(e.getFullYear()%1e4,t,4)}function formatZone(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pad(t/60|0,"0",2)+pad(t%60,"0",2)}function formatUTCDayOfMonth(e,t){return pad(e.getUTCDate(),t,2)}function formatUTCHour24(e,t){return pad(e.getUTCHours(),t,2)}function formatUTCHour12(e,t){return pad(e.getUTCHours()%12||12,t,2)}function formatUTCDayOfYear(e,t){return pad(1+utcDay.count(utcYear(e),e),t,3)}function formatUTCMilliseconds(e,t){return pad(e.getUTCMilliseconds(),t,3)}function formatUTCMicroseconds(e,t){return formatUTCMilliseconds(e,t)+"000"}function formatUTCMonthNumber(e,t){return pad(e.getUTCMonth()+1,t,2)}function formatUTCMinutes(e,t){return pad(e.getUTCMinutes(),t,2)}function formatUTCSeconds(e,t){return pad(e.getUTCSeconds(),t,2)}function formatUTCWeekdayNumberMonday(e){var t=e.getUTCDay();return t===0?7:t}function formatUTCWeekNumberSunday(e,t){return pad(utcSunday.count(utcYear(e)-1,e),t,2)}function UTCdISO(e){var t=e.getUTCDay();return t>=4||t===0?utcThursday(e):utcThursday.ceil(e)}function formatUTCWeekNumberISO(e,t){return e=UTCdISO(e),pad(utcThursday.count(utcYear(e),e)+(utcYear(e).getUTCDay()===4),t,2)}function formatUTCWeekdayNumberSunday(e){return e.getUTCDay()}function formatUTCWeekNumberMonday(e,t){return pad(utcMonday.count(utcYear(e)-1,e),t,2)}function formatUTCYear(e,t){return pad(e.getUTCFullYear()%100,t,2)}function formatUTCYearISO(e,t){return e=UTCdISO(e),pad(e.getUTCFullYear()%100,t,2)}function formatUTCFullYear(e,t){return pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCFullYearISO(e,t){var n=e.getUTCDay();return e=n>=4||n===0?utcThursday(e):utcThursday.ceil(e),pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(e){return+e}function formatUnixTimestampSeconds(e){return Math.floor(+e/1e3)}var locale,timeFormat,timeParse,utcFormat,utcParse;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(e){return locale=formatLocale(e),timeFormat=locale.format,timeParse=locale.parse,utcFormat=locale.utcFormat,utcParse=locale.utcParse,locale}var isoSpecifier="%Y-%m-%dT%H:%M:%S.%LZ";function formatIsoNative(e){return e.toISOString()}var formatIso=Date.prototype.toISOString?formatIsoNative:utcFormat(isoSpecifier),formatIso$1=formatIso;function parseIsoNative(e){var t=new Date(e);return isNaN(t)?null:t}var parseIso=+new Date("2000-01-01T00:00:00.000Z")?parseIsoNative:utcParse(isoSpecifier),parseIso$1=parseIso;function date$1(e){return new Date(e)}function number(e){return e instanceof Date?+e:+new Date(+e)}function calendar(e,t,n,r,i,o,l,f,h,d){var g=continuous(),p=g.invert,b=g.domain,$=d(".%L"),w=d(":%S"),P=d("%I:%M"),_=d("%I %p"),S=d("%a %d"),N=d("%b %d"),R=d("%B"),T=d("%Y");function I(L){return(h(L)<L?$:f(L)<L?w:l(L)<L?P:o(L)<L?_:r(L)<L?i(L)<L?S:N:n(L)<L?R:T)(L)}return g.invert=function(L){return new Date(p(L))},g.domain=function(L){return arguments.length?b(Array.from(L,number)):b().map(date$1)},g.ticks=function(L){var H=b();return e(H[0],H[H.length-1],L==null?10:L)},g.tickFormat=function(L,H){return H==null?I:d(H)},g.nice=function(L){var H=b();return(!L||typeof L.range!="function")&&(L=t(H[0],H[H.length-1],L==null?10:L)),L?b(nice(H,L)):g},g.copy=function(){return copy$1(g,calendar(e,t,n,r,i,o,l,f,h,d))},g}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function transformer$1(){var e=0,t=1,n,r,i,o,l=identity$3,f=!1,h;function d(p){return p==null||isNaN(p=+p)?h:l(i===0?.5:(p=(o(p)-n)*i,f?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t]=p,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),d):[e,t]},d.clamp=function(p){return arguments.length?(f=!!p,d):f},d.interpolator=function(p){return arguments.length?(l=p,d):l};function g(p){return function(b){var $,w;return arguments.length?([$,w]=b,l=p($,w),d):[l(0),l(1)]}}return d.range=g(interpolate$2),d.rangeRound=g(interpolateRound),d.unknown=function(p){return arguments.length?(h=p,d):h},function(p){return o=p,n=p(e),r=p(t),i=n===r?0:1/(r-n),d}}function copy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function sequential(){var e=linearish(transformer$1()(identity$3));return e.copy=function(){return copy(e,sequential())},initInterpolator.apply(e,arguments)}function sequentialLog(){var e=loggish(transformer$1()).domain([1,10]);return e.copy=function(){return copy(e,sequentialLog()).base(e.base())},initInterpolator.apply(e,arguments)}function sequentialSymlog(){var e=symlogish(transformer$1());return e.copy=function(){return copy(e,sequentialSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)}function sequentialPow(){var e=powish(transformer$1());return e.copy=function(){return copy(e,sequentialPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function sequentialQuantile(){var e=[],t=identity$3;function n(r){if(r!=null&&!isNaN(r=+r))return t((bisect(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(ascending$3),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>quantile$1(e,o/r))},n.copy=function(){return sequentialQuantile(t).domain(e)},initInterpolator.apply(n,arguments)}function transformer(){var e=0,t=.5,n=1,r=1,i,o,l,f,h,d=identity$3,g,p=!1,b;function $(P){return isNaN(P=+P)?b:(P=.5+((P=+g(P))-o)*(r*P<r*o?f:h),d(p?Math.max(0,Math.min(1,P)):P))}$.domain=function(P){return arguments.length?([e,t,n]=P,i=g(e=+e),o=g(t=+t),l=g(n=+n),f=i===o?0:.5/(o-i),h=o===l?0:.5/(l-o),r=o<i?-1:1,$):[e,t,n]},$.clamp=function(P){return arguments.length?(p=!!P,$):p},$.interpolator=function(P){return arguments.length?(d=P,$):d};function w(P){return function(_){var S,N,R;return arguments.length?([S,N,R]=_,d=piecewise(P,[S,N,R]),$):[d(0),d(.5),d(1)]}}return $.range=w(interpolate$2),$.rangeRound=w(interpolateRound),$.unknown=function(P){return arguments.length?(b=P,$):b},function(P){return g=P,i=P(e),o=P(t),l=P(n),f=i===o?0:.5/(o-i),h=o===l?0:.5/(l-o),r=o<i?-1:1,$}}function diverging$1(){var e=linearish(transformer()(identity$3));return e.copy=function(){return copy(e,diverging$1())},initInterpolator.apply(e,arguments)}function divergingLog(){var e=loggish(transformer()).domain([.1,1,10]);return e.copy=function(){return copy(e,divergingLog()).base(e.base())},initInterpolator.apply(e,arguments)}function divergingSymlog(){var e=symlogish(transformer());return e.copy=function(){return copy(e,divergingSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)}function divergingPow(){var e=powish(transformer());return e.copy=function(){return copy(e,divergingPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}function colors(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}var category10=colors("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Accent=colors("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Dark2=colors("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Paired=colors("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Pastel1=colors("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Pastel2=colors("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Set1=colors("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Set2=colors("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Set3=colors("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Tableau10=colors("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ramp$1=e=>rgbBasis(e[e.length-1]),scheme$q=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(colors),BrBG=ramp$1(scheme$q),scheme$p=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(colors),PRGn=ramp$1(scheme$p),scheme$o=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(colors),PiYG=ramp$1(scheme$o),scheme$n=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(colors),PuOr=ramp$1(scheme$n),scheme$m=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(colors),RdBu=ramp$1(scheme$m),scheme$l=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(colors),RdGy=ramp$1(scheme$l),scheme$k=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(colors),RdYlBu=ramp$1(scheme$k),scheme$j=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(colors),RdYlGn=ramp$1(scheme$j),scheme$i=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(colors),Spectral=ramp$1(scheme$i),scheme$h=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(colors),BuGn=ramp$1(scheme$h),scheme$g=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(colors),BuPu=ramp$1(scheme$g),scheme$f=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(colors),GnBu=ramp$1(scheme$f),scheme$e=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(colors),OrRd=ramp$1(scheme$e),scheme$d=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(colors),PuBuGn=ramp$1(scheme$d),scheme$c=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(colors),PuBu=ramp$1(scheme$c),scheme$b=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(colors),PuRd=ramp$1(scheme$b),scheme$a=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(colors),RdPu=ramp$1(scheme$a),scheme$9=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(colors),YlGnBu=ramp$1(scheme$9),scheme$8=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(colors),YlGn=ramp$1(scheme$8),scheme$7=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(colors),YlOrBr=ramp$1(scheme$7),scheme$6=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(colors),YlOrRd=ramp$1(scheme$6),scheme$5=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(colors),Blues=ramp$1(scheme$5),scheme$4=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(colors),Greens=ramp$1(scheme$4),scheme$3=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(colors),Greys=ramp$1(scheme$3),scheme$2=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(colors),Purples=ramp$1(scheme$2),scheme$1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(colors),Reds=ramp$1(scheme$1),scheme=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(colors),Oranges=ramp$1(scheme);function cividis(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}var cubehelix=cubehelixLong(cubehelix$3(300,.5,0),cubehelix$3(-240,.5,1)),warm=cubehelixLong(cubehelix$3(-100,.75,.35),cubehelix$3(80,1.5,.8)),cool=cubehelixLong(cubehelix$3(260,.75,.35),cubehelix$3(80,1.5,.8)),c$2=cubehelix$3();function rainbow(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return c$2.h=360*e-100,c$2.s=1.5-1.5*t,c$2.l=.8-.9*t,c$2+""}var c$1=rgb(),pi_1_3=Math.PI/3,pi_2_3=Math.PI*2/3;function sinebow(e){var t;return e=(.5-e)*Math.PI,c$1.r=255*(t=Math.sin(e))*t,c$1.g=255*(t=Math.sin(e+pi_1_3))*t,c$1.b=255*(t=Math.sin(e+pi_2_3))*t,c$1+""}function turbo(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function ramp(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var viridis=ramp(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),magma=ramp(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),inferno=ramp(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),plasma=ramp(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function constant$1(e){return function(){return e}}const abs=Math.abs,atan2=Math.atan2,cos=Math.cos,max=Math.max,min=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon=1e-12,pi=Math.PI,halfPi=pi/2,tau=2*pi;function acos(e){return e>1?0:e<-1?pi:Math.acos(e)}function asin(e){return e>=1?halfPi:e<=-1?-halfPi:Math.asin(e)}function withPath(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Path$1(t)}function arcInnerRadius(e){return e.innerRadius}function arcOuterRadius(e){return e.outerRadius}function arcStartAngle(e){return e.startAngle}function arcEndAngle(e){return e.endAngle}function arcPadAngle(e){return e&&e.padAngle}function intersect(e,t,n,r,i,o,l,f){var h=n-e,d=r-t,g=l-i,p=f-o,b=p*h-g*d;if(!(b*b<epsilon))return b=(g*(t-o)-p*(e-i))/b,[e+b*h,t+b*d]}function cornerTangents(e,t,n,r,i,o,l){var f=e-n,h=t-r,d=(l?o:-o)/sqrt(f*f+h*h),g=d*h,p=-d*f,b=e+g,$=t+p,w=n+g,P=r+p,_=(b+w)/2,S=($+P)/2,N=w-b,R=P-$,T=N*N+R*R,I=i-o,L=b*P-w*$,H=(R<0?-1:1)*sqrt(max(0,I*I*T-L*L)),G=(L*R-N*H)/T,j=(-L*N-R*H)/T,F=(L*R+N*H)/T,O=(-L*N+R*H)/T,Z=G-_,V=j-S,q=F-_,z=O-S;return Z*Z+V*V>q*q+z*z&&(G=F,j=O),{cx:G,cy:j,x01:-g,y01:-p,x11:G*(i/I-1),y11:j*(i/I-1)}}function arc(){var e=arcInnerRadius,t=arcOuterRadius,n=constant$1(0),r=null,i=arcStartAngle,o=arcEndAngle,l=arcPadAngle,f=null,h=withPath(d);function d(){var g,p,b=+e.apply(this,arguments),$=+t.apply(this,arguments),w=i.apply(this,arguments)-halfPi,P=o.apply(this,arguments)-halfPi,_=abs(P-w),S=P>w;if(f||(f=g=h()),$<b&&(p=$,$=b,b=p),!($>epsilon))f.moveTo(0,0);else if(_>tau-epsilon)f.moveTo($*cos(w),$*sin(w)),f.arc(0,0,$,w,P,!S),b>epsilon&&(f.moveTo(b*cos(P),b*sin(P)),f.arc(0,0,b,P,w,S));else{var N=w,R=P,T=w,I=P,L=_,H=_,G=l.apply(this,arguments)/2,j=G>epsilon&&(r?+r.apply(this,arguments):sqrt(b*b+$*$)),F=min(abs($-b)/2,+n.apply(this,arguments)),O=F,Z=F,V,q;if(j>epsilon){var z=asin(j/b*sin(G)),U=asin(j/$*sin(G));(L-=z*2)>epsilon?(z*=S?1:-1,T+=z,I-=z):(L=0,T=I=(w+P)/2),(H-=U*2)>epsilon?(U*=S?1:-1,N+=U,R-=U):(H=0,N=R=(w+P)/2)}var W=$*cos(N),Q=$*sin(N),J=b*cos(I),te=b*sin(I);if(F>epsilon){var ie=$*cos(R),ae=$*sin(R),he=b*cos(T),le=b*sin(T),ce;if(_<pi)if(ce=intersect(W,Q,he,le,ie,ae,J,te)){var ye=W-ce[0],fe=Q-ce[1],me=ie-ce[0],ne=ae-ce[1],se=1/sin(acos((ye*me+fe*ne)/(sqrt(ye*ye+fe*fe)*sqrt(me*me+ne*ne)))/2),ue=sqrt(ce[0]*ce[0]+ce[1]*ce[1]);O=min(F,(b-ue)/(se-1)),Z=min(F,($-ue)/(se+1))}else O=Z=0}H>epsilon?Z>epsilon?(V=cornerTangents(he,le,W,Q,$,Z,S),q=cornerTangents(ie,ae,J,te,$,Z,S),f.moveTo(V.cx+V.x01,V.cy+V.y01),Z<F?f.arc(V.cx,V.cy,Z,atan2(V.y01,V.x01),atan2(q.y01,q.x01),!S):(f.arc(V.cx,V.cy,Z,atan2(V.y01,V.x01),atan2(V.y11,V.x11),!S),f.arc(0,0,$,atan2(V.cy+V.y11,V.cx+V.x11),atan2(q.cy+q.y11,q.cx+q.x11),!S),f.arc(q.cx,q.cy,Z,atan2(q.y11,q.x11),atan2(q.y01,q.x01),!S))):(f.moveTo(W,Q),f.arc(0,0,$,N,R,!S)):f.moveTo(W,Q),!(b>epsilon)||!(L>epsilon)?f.lineTo(J,te):O>epsilon?(V=cornerTangents(J,te,ie,ae,b,-O,S),q=cornerTangents(W,Q,he,le,b,-O,S),f.lineTo(V.cx+V.x01,V.cy+V.y01),O<F?f.arc(V.cx,V.cy,O,atan2(V.y01,V.x01),atan2(q.y01,q.x01),!S):(f.arc(V.cx,V.cy,O,atan2(V.y01,V.x01),atan2(V.y11,V.x11),!S),f.arc(0,0,b,atan2(V.cy+V.y11,V.cx+V.x11),atan2(q.cy+q.y11,q.cx+q.x11),S),f.arc(q.cx,q.cy,O,atan2(q.y11,q.x11),atan2(q.y01,q.x01),!S))):f.arc(0,0,b,I,T,S)}if(f.closePath(),g)return f=null,g+""||null}return d.centroid=function(){var g=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,p=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-pi/2;return[cos(p)*g,sin(p)*g]},d.innerRadius=function(g){return arguments.length?(e=typeof g=="function"?g:constant$1(+g),d):e},d.outerRadius=function(g){return arguments.length?(t=typeof g=="function"?g:constant$1(+g),d):t},d.cornerRadius=function(g){return arguments.length?(n=typeof g=="function"?g:constant$1(+g),d):n},d.padRadius=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:constant$1(+g),d):r},d.startAngle=function(g){return arguments.length?(i=typeof g=="function"?g:constant$1(+g),d):i},d.endAngle=function(g){return arguments.length?(o=typeof g=="function"?g:constant$1(+g),d):o},d.padAngle=function(g){return arguments.length?(l=typeof g=="function"?g:constant$1(+g),d):l},d.context=function(g){return arguments.length?(f=g==null?null:g,d):f},d}var slice=Array.prototype.slice;function array(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Linear(e){this._context=e}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function curveLinear(e){return new Linear(e)}function x(e){return e[0]}function y(e){return e[1]}function line(e,t){var n=constant$1(!0),r=null,i=curveLinear,o=null,l=withPath(f);e=typeof e=="function"?e:e===void 0?x:constant$1(e),t=typeof t=="function"?t:t===void 0?y:constant$1(t);function f(h){var d,g=(h=array(h)).length,p,b=!1,$;for(r==null&&(o=i($=l())),d=0;d<=g;++d)!(d<g&&n(p=h[d],d,h))===b&&((b=!b)?o.lineStart():o.lineEnd()),b&&o.point(+e(p,d,h),+t(p,d,h));if($)return o=null,$+""||null}return f.x=function(h){return arguments.length?(e=typeof h=="function"?h:constant$1(+h),f):e},f.y=function(h){return arguments.length?(t=typeof h=="function"?h:constant$1(+h),f):t},f.defined=function(h){return arguments.length?(n=typeof h=="function"?h:constant$1(!!h),f):n},f.curve=function(h){return arguments.length?(i=h,r!=null&&(o=i(r)),f):i},f.context=function(h){return arguments.length?(h==null?r=o=null:o=i(r=h),f):r},f}function area(e,t,n){var r=null,i=constant$1(!0),o=null,l=curveLinear,f=null,h=withPath(d);e=typeof e=="function"?e:e===void 0?x:constant$1(+e),t=typeof t=="function"?t:constant$1(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?y:constant$1(+n);function d(p){var b,$,w,P=(p=array(p)).length,_,S=!1,N,R=new Array(P),T=new Array(P);for(o==null&&(f=l(N=h())),b=0;b<=P;++b){if(!(b<P&&i(_=p[b],b,p))===S)if(S=!S)$=b,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),w=b-1;w>=$;--w)f.point(R[w],T[w]);f.lineEnd(),f.areaEnd()}S&&(R[b]=+e(_,b,p),T[b]=+t(_,b,p),f.point(r?+r(_,b,p):R[b],n?+n(_,b,p):T[b]))}if(N)return f=null,N+""||null}function g(){return line().defined(i).curve(l).context(o)}return d.x=function(p){return arguments.length?(e=typeof p=="function"?p:constant$1(+p),r=null,d):e},d.x0=function(p){return arguments.length?(e=typeof p=="function"?p:constant$1(+p),d):e},d.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:constant$1(+p),d):r},d.y=function(p){return arguments.length?(t=typeof p=="function"?p:constant$1(+p),n=null,d):t},d.y0=function(p){return arguments.length?(t=typeof p=="function"?p:constant$1(+p),d):t},d.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:constant$1(+p),d):n},d.lineX0=d.lineY0=function(){return g().x(e).y(t)},d.lineY1=function(){return g().x(e).y(n)},d.lineX1=function(){return g().x(r).y(t)},d.defined=function(p){return arguments.length?(i=typeof p=="function"?p:constant$1(!!p),d):i},d.curve=function(p){return arguments.length?(l=p,o!=null&&(f=l(o)),d):l},d.context=function(p){return arguments.length?(p==null?o=f=null:f=l(o=p),d):o},d}function descending$1(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function identity$1(e){return e}function pie(){var e=identity$1,t=descending$1,n=null,r=constant$1(0),i=constant$1(tau),o=constant$1(0);function l(f){var h,d=(f=array(f)).length,g,p,b=0,$=new Array(d),w=new Array(d),P=+r.apply(this,arguments),_=Math.min(tau,Math.max(-tau,i.apply(this,arguments)-P)),S,N=Math.min(Math.abs(_)/d,o.apply(this,arguments)),R=N*(_<0?-1:1),T;for(h=0;h<d;++h)(T=w[$[h]=h]=+e(f[h],h,f))>0&&(b+=T);for(t!=null?$.sort(function(I,L){return t(w[I],w[L])}):n!=null&&$.sort(function(I,L){return n(f[I],f[L])}),h=0,p=b?(_-d*R)/b:0;h<d;++h,P=S)g=$[h],T=w[g],S=P+(T>0?T*p:0)+R,w[g]={data:f[g],index:h,value:T,startAngle:P,endAngle:S,padAngle:N};return w}return l.value=function(f){return arguments.length?(e=typeof f=="function"?f:constant$1(+f),l):e},l.sortValues=function(f){return arguments.length?(t=f,n=null,l):t},l.sort=function(f){return arguments.length?(n=f,t=null,l):n},l.startAngle=function(f){return arguments.length?(r=typeof f=="function"?f:constant$1(+f),l):r},l.endAngle=function(f){return arguments.length?(i=typeof f=="function"?f:constant$1(+f),l):i},l.padAngle=function(f){return arguments.length?(o=typeof f=="function"?f:constant$1(+f),l):o},l}var curveRadialLinear=curveRadial(curveLinear);function Radial(e){this._curve=e}Radial.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};function curveRadial(e){function t(n){return new Radial(e(n))}return t._curve=e,t}function lineRadial(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(n){return arguments.length?t(curveRadial(n)):t()._curve},e}function lineRadial$1(){return lineRadial(line().curve(curveRadialLinear))}function areaRadial(){var e=area().curve(curveRadialLinear),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,o=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return lineRadial(n())},delete e.lineX0,e.lineEndAngle=function(){return lineRadial(r())},delete e.lineX1,e.lineInnerRadius=function(){return lineRadial(i())},delete e.lineY0,e.lineOuterRadius=function(){return lineRadial(o())},delete e.lineY1,e.curve=function(l){return arguments.length?t(curveRadial(l)):t()._curve},e}function pointRadial(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}class Bump{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}class BumpRadial{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,n){if(t=+t,n=+n,this._point===0)this._point=1;else{const r=pointRadial(this._x0,this._y0),i=pointRadial(this._x0,this._y0=(this._y0+n)/2),o=pointRadial(t,this._y0),l=pointRadial(t,n);this._context.moveTo(...r),this._context.bezierCurveTo(...i,...o,...l)}this._x0=t,this._y0=n}}function bumpX(e){return new Bump(e,!0)}function bumpY(e){return new Bump(e,!1)}function bumpRadial(e){return new BumpRadial(e)}function linkSource(e){return e.source}function linkTarget(e){return e.target}function link(e){let t=linkSource,n=linkTarget,r=x,i=y,o=null,l=null,f=withPath(h);function h(){let d;const g=slice.call(arguments),p=t.apply(this,g),b=n.apply(this,g);if(o==null&&(l=e(d=f())),l.lineStart(),g[0]=p,l.point(+r.apply(this,g),+i.apply(this,g)),g[0]=b,l.point(+r.apply(this,g),+i.apply(this,g)),l.lineEnd(),d)return l=null,d+""||null}return h.source=function(d){return arguments.length?(t=d,h):t},h.target=function(d){return arguments.length?(n=d,h):n},h.x=function(d){return arguments.length?(r=typeof d=="function"?d:constant$1(+d),h):r},h.y=function(d){return arguments.length?(i=typeof d=="function"?d:constant$1(+d),h):i},h.context=function(d){return arguments.length?(d==null?o=l=null:l=e(o=d),h):o},h}function linkHorizontal(){return link(bumpX)}function linkVertical(){return link(bumpY)}function linkRadial(){const e=link(bumpRadial);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}const sqrt3$2=sqrt(3);var asterisk={draw(e,t){const n=sqrt(t+min(t/28,.75))*.59436,r=n/2,i=r*sqrt3$2;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},circle={draw(e,t){const n=sqrt(t/pi);e.moveTo(n,0),e.arc(0,0,n,0,tau)}},cross={draw(e,t){const n=sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}};const tan30=sqrt(1/3),tan30_2=tan30*2;var diamond={draw(e,t){const n=sqrt(t/tan30_2),r=n*tan30;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},diamond2={draw(e,t){const n=sqrt(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},plus={draw(e,t){const n=sqrt(t-min(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},square={draw(e,t){const n=sqrt(t),r=-n/2;e.rect(r,r,n,n)}},square2={draw(e,t){const n=sqrt(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}};const ka=.8908130915292852,kr=sin(pi/10)/sin(7*pi/10),kx=sin(tau/10)*kr,ky=-cos(tau/10)*kr;var star={draw(e,t){const n=sqrt(t*ka),r=kx*n,i=ky*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const l=tau*o/5,f=cos(l),h=sin(l);e.lineTo(h*n,-f*n),e.lineTo(f*r-h*i,h*r+f*i)}e.closePath()}};const sqrt3$1=sqrt(3);var triangle={draw(e,t){const n=-sqrt(t/(sqrt3$1*3));e.moveTo(0,n*2),e.lineTo(-sqrt3$1*n,-n),e.lineTo(sqrt3$1*n,-n),e.closePath()}};const sqrt3=sqrt(3);var triangle2={draw(e,t){const n=sqrt(t)*.6824,r=n/2,i=n*sqrt3/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}};const c=-.5,s=sqrt(3)/2,k=1/sqrt(12),a=(k/2+1)*3;var wye={draw(e,t){const n=sqrt(t/a),r=n/2,i=n*k,o=r,l=n*k+n,f=-o,h=l;e.moveTo(r,i),e.lineTo(o,l),e.lineTo(f,h),e.lineTo(c*r-s*i,s*r+c*i),e.lineTo(c*o-s*l,s*o+c*l),e.lineTo(c*f-s*h,s*f+c*h),e.lineTo(c*r+s*i,c*i-s*r),e.lineTo(c*o+s*l,c*l-s*o),e.lineTo(c*f+s*h,c*h-s*f),e.closePath()}},times={draw(e,t){const n=sqrt(t-min(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}};const symbolsFill=[circle,cross,diamond,square,star,triangle,wye],symbolsStroke=[circle,plus,times,triangle2,asterisk,square2,diamond2];function Symbol$1(e,t){let n=null,r=withPath(i);e=typeof e=="function"?e:constant$1(e||circle),t=typeof t=="function"?t:constant$1(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:constant$1(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:constant$1(+o),i):t},i.context=function(o){return arguments.length?(n=o==null?null:o,i):n},i}function noop(){}function point$3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Basis(e){this._context=e}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function basis(e){return new Basis(e)}function BasisClosed(e){this._context=e}BasisClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:point$3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function basisClosed(e){return new BasisClosed(e)}function BasisOpen(e){this._context=e}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:point$3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function basisOpen(e){return new BasisOpen(e)}function Bundle(e,t){this._basis=new Basis(e),this._beta=t}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,l=t[n]-i,f=-1,h;++f<=n;)h=f/n,this._basis.point(this._beta*e[f]+(1-this._beta)*(r+h*o),this._beta*t[f]+(1-this._beta)*(i+h*l));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var bundle=function e(t){function n(r){return t===1?new Basis(r):new Bundle(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function point$2(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Cardinal(e,t){this._context=e,this._k=(1-t)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$2(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:point$2(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var cardinal=function e(t){function n(r){return new Cardinal(r,t)}return n.tension=function(r){return e(+r)},n}(0);function CardinalClosed(e,t){this._context=e,this._k=(1-t)/6}CardinalClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:point$2(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var cardinalClosed=function e(t){function n(r){return new CardinalClosed(r,t)}return n.tension=function(r){return e(+r)},n}(0);function CardinalOpen(e,t){this._context=e,this._k=(1-t)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$2(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var cardinalOpen=function e(t){function n(r){return new CardinalOpen(r,t)}return n.tension=function(r){return e(+r)},n}(0);function point$1(e,t,n){var r=e._x1,i=e._y1,o=e._x2,l=e._y2;if(e._l01_a>epsilon){var f=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,h=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*f-e._x0*e._l12_2a+e._x2*e._l01_2a)/h,i=(i*f-e._y0*e._l12_2a+e._y2*e._l01_2a)/h}if(e._l23_a>epsilon){var d=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,g=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*d+e._x1*e._l23_2a-t*e._l12_2a)/g,l=(l*d+e._y1*e._l23_2a-n*e._l12_2a)/g}e._context.bezierCurveTo(r,i,o,l,e._x2,e._y2)}function CatmullRom(e,t){this._context=e,this._alpha=t}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:point$1(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var catmullRom=function e(t){function n(r){return t?new CatmullRom(r,t):new Cardinal(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function CatmullRomClosed(e,t){this._context=e,this._alpha=t}CatmullRomClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:point$1(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var catmullRomClosed=function e(t){function n(r){return t?new CatmullRomClosed(r,t):new CardinalClosed(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function CatmullRomOpen(e,t){this._context=e,this._alpha=t}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$1(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var catmullRomOpen=function e(t){function n(r){return t?new CatmullRomOpen(r,t):new CardinalOpen(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function LinearClosed(e){this._context=e}LinearClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function linearClosed(e){return new LinearClosed(e)}function sign(e){return e<0?-1:1}function slope3(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),f=(o*i+l*r)/(r+i);return(sign(o)+sign(l))*Math.min(Math.abs(o),Math.abs(l),.5*Math.abs(f))||0}function slope2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function point(e,t,n){var r=e._x0,i=e._y0,o=e._x1,l=e._y1,f=(o-r)/3;e._context.bezierCurveTo(r+f,i+f*t,o-f,l-f*n,o,l)}function MonotoneX(e){this._context=e}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,point(this,slope2(this,n=slope3(this,e,t)),n);break;default:point(this,this._t0,n=slope3(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function MonotoneY(e){this._context=new ReflectContext(e)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(e,t){MonotoneX.prototype.point.call(this,t,e)};function ReflectContext(e){this._context=e}ReflectContext.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function monotoneX(e){return new MonotoneX(e)}function monotoneY(e){return new MonotoneY(e)}function Natural(e){this._context=e}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=controlPoints(e),i=controlPoints(t),o=0,l=1;l<n;++o,++l)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function controlPoints(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),l=new Array(n);for(i[0]=0,o[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function natural(e){return new Natural(e)}function Step(e,t){this._context=e,this._t=t}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function step(e){return new Step(e,.5)}function stepBefore(e){return new Step(e,0)}function stepAfter(e){return new Step(e,1)}function none$1(e,t){if((l=e.length)>1)for(var n=1,r,i,o=e[t[0]],l,f=o.length;n<l;++n)for(i=o,o=e[t[n]],r=0;r<f;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function none(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function stackValue(e,t){return e[t]}function stackSeries(e){const t=[];return t.key=e,t}function stack(){var e=constant$1([]),t=none,n=none$1,r=stackValue;function i(o){var l=Array.from(e.apply(this,arguments),stackSeries),f,h=l.length,d=-1,g;for(const p of o)for(f=0,++d;f<h;++f)(l[f][d]=[0,+r(p,l[f].key,d,o)]).data=p;for(f=0,g=array(t(l));f<h;++f)l[g[f]].index=f;return n(l,g),l}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:constant$1(Array.from(o)),i):e},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:constant$1(+o),i):r},i.order=function(o){return arguments.length?(t=o==null?none:typeof o=="function"?o:constant$1(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(n=o==null?none$1:o,i):n},i}function expand(e,t){if((r=e.length)>0){for(var n,r,i=0,o=e[0].length,l;i<o;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}none$1(e,t)}}function diverging(e,t){if((h=e.length)>0)for(var n,r=0,i,o,l,f,h,d=e[t[0]].length;r<d;++r)for(l=f=0,n=0;n<h;++n)(o=(i=e[t[n]][r])[1]-i[0])>0?(i[0]=l,i[1]=l+=o):o<0?(i[1]=f,i[0]=f+=o):(i[0]=0,i[1]=o)}function silhouette(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,o=r.length;n<o;++n){for(var l=0,f=0;l<i;++l)f+=e[l][n][1]||0;r[n][1]+=r[n][0]=-f/2}none$1(e,t)}}function wiggle(e,t){if(!(!((l=e.length)>0)||!((o=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,o,l;r<o;++r){for(var f=0,h=0,d=0;f<l;++f){for(var g=e[t[f]],p=g[r][1]||0,b=g[r-1][1]||0,$=(p-b)/2,w=0;w<f;++w){var P=e[t[w]],_=P[r][1]||0,S=P[r-1][1]||0;$+=_-S}h+=p,d+=$*p}i[r-1][1]+=i[r-1][0]=n,h&&(n-=d/h)}i[r-1][1]+=i[r-1][0]=n,none$1(e,t)}}function appearance(e){var t=e.map(peak);return none(e).sort(function(n,r){return t[n]-t[r]})}function peak(e){for(var t=-1,n=0,r=e.length,i,o=-1/0;++t<r;)(i=+e[t][1])>o&&(o=i,n=t);return n}function ascending(e){var t=e.map(sum);return none(e).sort(function(n,r){return t[n]-t[r]})}function sum(e){for(var t=0,n=-1,r=e.length,i;++n<r;)(i=+e[n][1])&&(t+=i);return t}function descending(e){return ascending(e).reverse()}function insideOut(e){var t=e.length,n,r,i=e.map(sum),o=appearance(e),l=0,f=0,h=[],d=[];for(n=0;n<t;++n)r=o[n],l<f?(l+=i[r],h.push(r)):(f+=i[r],d.push(r));return d.reverse().concat(h)}function reverse(e){return none(e).reverse()}var constant=e=>()=>e;function ZoomEvent(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Transform(e,t,n){this.k=e,this.x=t,this.y=n}Transform.prototype={constructor:Transform,scale:function(e){return e===1?this:new Transform(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Transform(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity=new Transform(1,0,0);transform.prototype=Transform.prototype;function transform(e){for(;!e.__zoom;)if(!(e=e.parentNode))return identity;return e.__zoom}function nopropagation(e){e.stopImmediatePropagation()}function noevent(e){e.preventDefault(),e.stopImmediatePropagation()}function defaultFilter(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function defaultExtent(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function defaultTransform(){return this.__zoom||identity}function defaultWheelDelta(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),l>o?(o+l)/2:Math.min(0,o)||Math.max(0,l))}function zoom(){var e=defaultFilter,t=defaultExtent,n=defaultConstrain,r=defaultWheelDelta,i=defaultTouchable,o=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],f=250,h=interpolateZoom,d=dispatch("start","zoom","end"),g,p,b,$=500,w=150,P=0,_=10;function S(q){q.property("__zoom",defaultTransform).on("wheel.zoom",G,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",F).filter(i).on("touchstart.zoom",O).on("touchmove.zoom",Z).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(q,z,U,W){var Q=q.selection?q.selection():q;Q.property("__zoom",defaultTransform),q!==Q?I(q,z,U,W):Q.interrupt().each(function(){L(this,arguments).event(W).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},S.scaleBy=function(q,z,U,W){S.scaleTo(q,function(){var Q=this.__zoom.k,J=typeof z=="function"?z.apply(this,arguments):z;return Q*J},U,W)},S.scaleTo=function(q,z,U,W){S.transform(q,function(){var Q=t.apply(this,arguments),J=this.__zoom,te=U==null?T(Q):typeof U=="function"?U.apply(this,arguments):U,ie=J.invert(te),ae=typeof z=="function"?z.apply(this,arguments):z;return n(R(N(J,ae),te,ie),Q,l)},U,W)},S.translateBy=function(q,z,U,W){S.transform(q,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof U=="function"?U.apply(this,arguments):U),t.apply(this,arguments),l)},null,W)},S.translateTo=function(q,z,U,W,Q){S.transform(q,function(){var J=t.apply(this,arguments),te=this.__zoom,ie=W==null?T(J):typeof W=="function"?W.apply(this,arguments):W;return n(identity.translate(ie[0],ie[1]).scale(te.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof U=="function"?-U.apply(this,arguments):-U),J,l)},W,Q)};function N(q,z){return z=Math.max(o[0],Math.min(o[1],z)),z===q.k?q:new Transform(z,q.x,q.y)}function R(q,z,U){var W=z[0]-U[0]*q.k,Q=z[1]-U[1]*q.k;return W===q.x&&Q===q.y?q:new Transform(q.k,W,Q)}function T(q){return[(+q[0][0]+ +q[1][0])/2,(+q[0][1]+ +q[1][1])/2]}function I(q,z,U,W){q.on("start.zoom",function(){L(this,arguments).event(W).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(W).end()}).tween("zoom",function(){var Q=this,J=arguments,te=L(Q,J).event(W),ie=t.apply(Q,J),ae=U==null?T(ie):typeof U=="function"?U.apply(Q,J):U,he=Math.max(ie[1][0]-ie[0][0],ie[1][1]-ie[0][1]),le=Q.__zoom,ce=typeof z=="function"?z.apply(Q,J):z,ye=h(le.invert(ae).concat(he/le.k),ce.invert(ae).concat(he/ce.k));return function(fe){if(fe===1)fe=ce;else{var me=ye(fe),ne=he/me[2];fe=new Transform(ne,ae[0]-me[0]*ne,ae[1]-me[1]*ne)}te.zoom(null,fe)}})}function L(q,z,U){return!U&&q.__zooming||new H(q,z)}function H(q,z){this.that=q,this.args=z,this.active=0,this.sourceEvent=null,this.extent=t.apply(q,z),this.taps=0}H.prototype={event:function(q){return q&&(this.sourceEvent=q),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(q,z){return this.mouse&&q!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&q!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&q!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(q){var z=select(this.that).datum();d.call(q,this.that,new ZoomEvent(q,{sourceEvent:this.sourceEvent,target:S,type:q,transform:this.that.__zoom,dispatch:d}),z)}};function G(q,...z){if(!e.apply(this,arguments))return;var U=L(this,z).event(q),W=this.__zoom,Q=Math.max(o[0],Math.min(o[1],W.k*Math.pow(2,r.apply(this,arguments)))),J=pointer(q);if(U.wheel)(U.mouse[0][0]!==J[0]||U.mouse[0][1]!==J[1])&&(U.mouse[1]=W.invert(U.mouse[0]=J)),clearTimeout(U.wheel);else{if(W.k===Q)return;U.mouse=[J,W.invert(J)],interrupt(this),U.start()}noevent(q),U.wheel=setTimeout(te,w),U.zoom("mouse",n(R(N(W,Q),U.mouse[0],U.mouse[1]),U.extent,l));function te(){U.wheel=null,U.end()}}function j(q,...z){if(b||!e.apply(this,arguments))return;var U=q.currentTarget,W=L(this,z,!0).event(q),Q=select(q.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",he,!0),J=pointer(q,U),te=q.clientX,ie=q.clientY;dragDisable(q.view),nopropagation(q),W.mouse=[J,this.__zoom.invert(J)],interrupt(this),W.start();function ae(le){if(noevent(le),!W.moved){var ce=le.clientX-te,ye=le.clientY-ie;W.moved=ce*ce+ye*ye>P}W.event(le).zoom("mouse",n(R(W.that.__zoom,W.mouse[0]=pointer(le,U),W.mouse[1]),W.extent,l))}function he(le){Q.on("mousemove.zoom mouseup.zoom",null),yesdrag(le.view,W.moved),noevent(le),W.event(le).end()}}function F(q,...z){if(!!e.apply(this,arguments)){var U=this.__zoom,W=pointer(q.changedTouches?q.changedTouches[0]:q,this),Q=U.invert(W),J=U.k*(q.shiftKey?.5:2),te=n(R(N(U,J),W,Q),t.apply(this,z),l);noevent(q),f>0?select(this).transition().duration(f).call(I,te,W,q):select(this).call(S.transform,te,W,q)}}function O(q,...z){if(!!e.apply(this,arguments)){var U=q.touches,W=U.length,Q=L(this,z,q.changedTouches.length===W).event(q),J,te,ie,ae;for(nopropagation(q),te=0;te<W;++te)ie=U[te],ae=pointer(ie,this),ae=[ae,this.__zoom.invert(ae),ie.identifier],Q.touch0?!Q.touch1&&Q.touch0[2]!==ae[2]&&(Q.touch1=ae,Q.taps=0):(Q.touch0=ae,J=!0,Q.taps=1+!!g);g&&(g=clearTimeout(g)),J&&(Q.taps<2&&(p=ae[0],g=setTimeout(function(){g=null},$)),interrupt(this),Q.start())}}function Z(q,...z){if(!!this.__zooming){var U=L(this,z).event(q),W=q.changedTouches,Q=W.length,J,te,ie,ae;for(noevent(q),J=0;J<Q;++J)te=W[J],ie=pointer(te,this),U.touch0&&U.touch0[2]===te.identifier?U.touch0[0]=ie:U.touch1&&U.touch1[2]===te.identifier&&(U.touch1[0]=ie);if(te=U.that.__zoom,U.touch1){var he=U.touch0[0],le=U.touch0[1],ce=U.touch1[0],ye=U.touch1[1],fe=(fe=ce[0]-he[0])*fe+(fe=ce[1]-he[1])*fe,me=(me=ye[0]-le[0])*me+(me=ye[1]-le[1])*me;te=N(te,Math.sqrt(fe/me)),ie=[(he[0]+ce[0])/2,(he[1]+ce[1])/2],ae=[(le[0]+ye[0])/2,(le[1]+ye[1])/2]}else if(U.touch0)ie=U.touch0[0],ae=U.touch0[1];else return;U.zoom("touch",n(R(te,ie,ae),U.extent,l))}}function V(q,...z){if(!!this.__zooming){var U=L(this,z).event(q),W=q.changedTouches,Q=W.length,J,te;for(nopropagation(q),b&&clearTimeout(b),b=setTimeout(function(){b=null},$),J=0;J<Q;++J)te=W[J],U.touch0&&U.touch0[2]===te.identifier?delete U.touch0:U.touch1&&U.touch1[2]===te.identifier&&delete U.touch1;if(U.touch1&&!U.touch0&&(U.touch0=U.touch1,delete U.touch1),U.touch0)U.touch0[1]=this.__zoom.invert(U.touch0[0]);else if(U.end(),U.taps===2&&(te=pointer(te,this),Math.hypot(p[0]-te[0],p[1]-te[1])<_)){var ie=select(this).on("dblclick.zoom");ie&&ie.apply(this,arguments)}}}return S.wheelDelta=function(q){return arguments.length?(r=typeof q=="function"?q:constant(+q),S):r},S.filter=function(q){return arguments.length?(e=typeof q=="function"?q:constant(!!q),S):e},S.touchable=function(q){return arguments.length?(i=typeof q=="function"?q:constant(!!q),S):i},S.extent=function(q){return arguments.length?(t=typeof q=="function"?q:constant([[+q[0][0],+q[0][1]],[+q[1][0],+q[1][1]]]),S):t},S.scaleExtent=function(q){return arguments.length?(o[0]=+q[0],o[1]=+q[1],S):[o[0],o[1]]},S.translateExtent=function(q){return arguments.length?(l[0][0]=+q[0][0],l[1][0]=+q[1][0],l[0][1]=+q[0][1],l[1][1]=+q[1][1],S):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},S.constrain=function(q){return arguments.length?(n=q,S):n},S.duration=function(q){return arguments.length?(f=+q,S):f},S.interpolate=function(q){return arguments.length?(h=q,S):h},S.on=function(){var q=d.on.apply(d,arguments);return q===d?S:q},S.clickDistance=function(q){return arguments.length?(P=(q=+q)*q,S):Math.sqrt(P)},S.tapDistance=function(q){return arguments.length?(_=+q,S):_},S}var d3=Object.freeze(Object.defineProperty({__proto__:null,bisect,bisectRight,bisectLeft,bisectCenter,ascending:ascending$3,bisector,blur,blur2,blurImage,count:count$1,cross:cross$2,cumsum,descending:descending$2,deviation,extent:extent$1,Adder,fsum,fcumsum,group,flatGroup,flatRollup,groups,index:index$4,indexes,rollup,rollups,groupSort,bin,histogram:bin,thresholdFreedmanDiaconis,thresholdScott,thresholdSturges,max:max$3,maxIndex,mean,median,medianIndex,merge,min:min$2,minIndex,mode,nice:nice$1,pairs,permute,quantile:quantile$1,quantileIndex,quantileSorted,quickselect,range:range$2,rank,least,leastIndex,greatest,greatestIndex,scan,shuffle:shuffle$1,shuffler,sum:sum$2,ticks,tickIncrement,tickStep,transpose,variance,zip,every,some,filter:filter$1,map:map$1,reduce,reverse:reverse$1,sort,difference,disjoint,intersection,subset,superset,union,InternMap,InternSet,axisTop,axisRight,axisBottom,axisLeft,brush,brushX,brushY,brushSelection,chord,chordTranspose,chordDirected,ribbon:ribbon$1,ribbonArrow,color,rgb,hsl:hsl$2,lab:lab$1,hcl:hcl$2,lch,gray,cubehelix:cubehelix$3,contours:Contours,contourDensity:density,Delaunay,Voronoi,dispatch,drag,dragDisable,dragEnable:yesdrag,dsvFormat,csvParse,csvParseRows,csvFormat,csvFormatBody,csvFormatRows,csvFormatRow,csvFormatValue,tsvParse,tsvParseRows,tsvFormat,tsvFormatBody,tsvFormatRows,tsvFormatRow,tsvFormatValue,autoType,easeLinear:linear$1,easeQuad:quadInOut,easeQuadIn:quadIn,easeQuadOut:quadOut,easeQuadInOut:quadInOut,easeCubic:cubicInOut,easeCubicIn:cubicIn,easeCubicOut:cubicOut,easeCubicInOut:cubicInOut,easePoly:polyInOut,easePolyIn:polyIn,easePolyOut:polyOut,easePolyInOut:polyInOut,easeSin:sinInOut,easeSinIn:sinIn,easeSinOut:sinOut,easeSinInOut:sinInOut,easeExp:expInOut,easeExpIn:expIn,easeExpOut:expOut,easeExpInOut:expInOut,easeCircle:circleInOut,easeCircleIn:circleIn,easeCircleOut:circleOut,easeCircleInOut:circleInOut,easeBounce:bounceOut,easeBounceIn:bounceIn,easeBounceOut:bounceOut,easeBounceInOut:bounceInOut,easeBack:backInOut,easeBackIn:backIn,easeBackOut:backOut,easeBackInOut:backInOut,easeElastic:elasticOut,easeElasticIn:elasticIn,easeElasticOut:elasticOut,easeElasticInOut:elasticInOut,blob,buffer,dsv,csv,tsv,image,json,text,xml,html,svg,forceCenter:center,forceCollide:collide,forceLink:link$2,forceManyBody:manyBody,forceRadial:radial$1,forceSimulation:simulation,forceX:x$1,forceY:y$1,formatDefaultLocale:defaultLocale$1,get format(){return format},get formatPrefix(){return formatPrefix},formatLocale:formatLocale$1,formatSpecifier,FormatSpecifier,precisionFixed,precisionPrefix,precisionRound,geoArea:area$2,geoBounds:bounds,geoCentroid:centroid$1,geoCircle:circle$1,geoClipAntimeridian:clipAntimeridian,geoClipCircle:clipCircle,geoClipExtent:extent,geoClipRectangle:clipRectangle,geoContains:contains$1,geoDistance:distance,geoGraticule:graticule,geoGraticule10:graticule10,geoInterpolate:interpolate,geoLength:length$1,geoPath:index$2,geoAlbers:albers,geoAlbersUsa:albersUsa,geoAzimuthalEqualArea:azimuthalEqualArea,geoAzimuthalEqualAreaRaw:azimuthalEqualAreaRaw,geoAzimuthalEquidistant:azimuthalEquidistant,geoAzimuthalEquidistantRaw:azimuthalEquidistantRaw,geoConicConformal:conicConformal,geoConicConformalRaw:conicConformalRaw,geoConicEqualArea:conicEqualArea,geoConicEqualAreaRaw:conicEqualAreaRaw,geoConicEquidistant:conicEquidistant,geoConicEquidistantRaw:conicEquidistantRaw,geoEqualEarth:equalEarth,geoEqualEarthRaw:equalEarthRaw,geoEquirectangular:equirectangular,geoEquirectangularRaw:equirectangularRaw,geoGnomonic:gnomonic,geoGnomonicRaw:gnomonicRaw,geoIdentity:identity$4,geoProjection:projection,geoProjectionMutator:projectionMutator,geoMercator:mercator,geoMercatorRaw:mercatorRaw,geoNaturalEarth1:naturalEarth1,geoNaturalEarth1Raw:naturalEarth1Raw,geoOrthographic:orthographic,geoOrthographicRaw:orthographicRaw,geoStereographic:stereographic,geoStereographicRaw:stereographicRaw,geoTransverseMercator:transverseMercator,geoTransverseMercatorRaw:transverseMercatorRaw,geoRotation:rotation,geoStream,geoTransform:transform$1,cluster,hierarchy,Node:Node$1,pack:index$1,packSiblings:siblings,packEnclose:enclose,partition,stratify,tree,treemap:index,treemapBinary:binary,treemapDice,treemapSlice,treemapSliceDice:sliceDice,treemapSquarify:squarify,treemapResquarify:resquarify,interpolate:interpolate$2,interpolateArray:array$3,interpolateBasis:basis$2,interpolateBasisClosed:basisClosed$1,interpolateDate:date$2,interpolateDiscrete:discrete,interpolateHue:hue,interpolateNumber,interpolateNumberArray:numberArray,interpolateObject:object$1,interpolateRound,interpolateString,interpolateTransformCss,interpolateTransformSvg,interpolateZoom,interpolateRgb,interpolateRgbBasis:rgbBasis,interpolateRgbBasisClosed:rgbBasisClosed,interpolateHsl:hsl$1,interpolateHslLong:hslLong,interpolateLab:lab,interpolateHcl:hcl$1,interpolateHclLong:hclLong,interpolateCubehelix:cubehelix$2,interpolateCubehelixLong:cubehelixLong,piecewise,quantize:quantize$1,Path:Path$1,path,pathRound,polygonArea:area$1,polygonCentroid:centroid,polygonHull:hull,polygonContains:contains,polygonLength:length,quadtree,randomUniform:uniform,randomInt:int,randomNormal:normal,randomLogNormal:logNormal,randomBates:bates,randomIrwinHall:irwinHall,randomExponential:exponential,randomPareto:pareto,randomBernoulli:bernoulli,randomGeometric:geometric,randomBinomial:binomial,randomGamma:gamma,randomBeta:beta,randomWeibull:weibull,randomCauchy:cauchy,randomLogistic:logistic,randomPoisson:poisson,randomLcg:lcg,scaleBand:band,scalePoint:point$4,scaleIdentity:identity$2,scaleLinear:linear,scaleLog:log,scaleSymlog:symlog,scaleOrdinal:ordinal,scaleImplicit:implicit,scalePow:pow,scaleSqrt:sqrt$1,scaleRadial:radial,scaleQuantile:quantile,scaleQuantize:quantize,scaleThreshold:threshold,scaleTime:time,scaleUtc:utcTime,scaleSequential:sequential,scaleSequentialLog:sequentialLog,scaleSequentialPow:sequentialPow,scaleSequentialSqrt:sequentialSqrt,scaleSequentialSymlog:sequentialSymlog,scaleSequentialQuantile:sequentialQuantile,scaleDiverging:diverging$1,scaleDivergingLog:divergingLog,scaleDivergingPow:divergingPow,scaleDivergingSqrt:divergingSqrt,scaleDivergingSymlog:divergingSymlog,tickFormat,schemeCategory10:category10,schemeAccent:Accent,schemeDark2:Dark2,schemePaired:Paired,schemePastel1:Pastel1,schemePastel2:Pastel2,schemeSet1:Set1,schemeSet2:Set2,schemeSet3:Set3,schemeTableau10:Tableau10,interpolateBrBG:BrBG,schemeBrBG:scheme$q,interpolatePRGn:PRGn,schemePRGn:scheme$p,interpolatePiYG:PiYG,schemePiYG:scheme$o,interpolatePuOr:PuOr,schemePuOr:scheme$n,interpolateRdBu:RdBu,schemeRdBu:scheme$m,interpolateRdGy:RdGy,schemeRdGy:scheme$l,interpolateRdYlBu:RdYlBu,schemeRdYlBu:scheme$k,interpolateRdYlGn:RdYlGn,schemeRdYlGn:scheme$j,interpolateSpectral:Spectral,schemeSpectral:scheme$i,interpolateBuGn:BuGn,schemeBuGn:scheme$h,interpolateBuPu:BuPu,schemeBuPu:scheme$g,interpolateGnBu:GnBu,schemeGnBu:scheme$f,interpolateOrRd:OrRd,schemeOrRd:scheme$e,interpolatePuBuGn:PuBuGn,schemePuBuGn:scheme$d,interpolatePuBu:PuBu,schemePuBu:scheme$c,interpolatePuRd:PuRd,schemePuRd:scheme$b,interpolateRdPu:RdPu,schemeRdPu:scheme$a,interpolateYlGnBu:YlGnBu,schemeYlGnBu:scheme$9,interpolateYlGn:YlGn,schemeYlGn:scheme$8,interpolateYlOrBr:YlOrBr,schemeYlOrBr:scheme$7,interpolateYlOrRd:YlOrRd,schemeYlOrRd:scheme$6,interpolateBlues:Blues,schemeBlues:scheme$5,interpolateGreens:Greens,schemeGreens:scheme$4,interpolateGreys:Greys,schemeGreys:scheme$3,interpolatePurples:Purples,schemePurples:scheme$2,interpolateReds:Reds,schemeReds:scheme$1,interpolateOranges:Oranges,schemeOranges:scheme,interpolateCividis:cividis,interpolateCubehelixDefault:cubehelix,interpolateRainbow:rainbow,interpolateWarm:warm,interpolateCool:cool,interpolateSinebow:sinebow,interpolateTurbo:turbo,interpolateViridis:viridis,interpolateMagma:magma,interpolateInferno:inferno,interpolatePlasma:plasma,create:create$1,creator,local:local$1,matcher,namespace,namespaces,pointer,pointers,select,selectAll,selection,selector,selectorAll,style:styleValue,window:defaultView,arc,area,line,pie,areaRadial,radialArea:areaRadial,lineRadial:lineRadial$1,radialLine:lineRadial$1,pointRadial,link,linkHorizontal,linkVertical,linkRadial,symbol:Symbol$1,symbolsStroke,symbolsFill,symbols:symbolsFill,symbolAsterisk:asterisk,symbolCircle:circle,symbolCross:cross,symbolDiamond:diamond,symbolDiamond2:diamond2,symbolPlus:plus,symbolSquare:square,symbolSquare2:square2,symbolStar:star,symbolTriangle:triangle,symbolTriangle2:triangle2,symbolWye:wye,symbolTimes:times,symbolX:times,curveBasisClosed:basisClosed,curveBasisOpen:basisOpen,curveBasis:basis,curveBumpX:bumpX,curveBumpY:bumpY,curveBundle:bundle,curveCardinalClosed:cardinalClosed,curveCardinalOpen:cardinalOpen,curveCardinal:cardinal,curveCatmullRomClosed:catmullRomClosed,curveCatmullRomOpen:catmullRomOpen,curveCatmullRom:catmullRom,curveLinearClosed:linearClosed,curveLinear,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural:natural,curveStep:step,curveStepAfter:stepAfter,curveStepBefore:stepBefore,stack,stackOffsetExpand:expand,stackOffsetDiverging:diverging,stackOffsetNone:none$1,stackOffsetSilhouette:silhouette,stackOffsetWiggle:wiggle,stackOrderAppearance:appearance,stackOrderAscending:ascending,stackOrderDescending:descending,stackOrderInsideOut:insideOut,stackOrderNone:none,stackOrderReverse:reverse,timeInterval,utcMillisecond:millisecond,utcMilliseconds:milliseconds,timeMillisecond:millisecond,timeMilliseconds:milliseconds,utcSecond:second,utcSeconds:seconds,timeSecond:second,timeSeconds:seconds,timeMinute,timeMinutes,utcMinute,utcMinutes,timeHour,timeHours,utcHour,utcHours,timeDay,timeDays,utcDay,utcDays,unixDay,unixDays,timeWeek:timeSunday,timeWeeks:timeSundays,timeSunday,timeSundays,timeMonday,timeMondays,timeTuesday,timeTuesdays,timeWednesday,timeWednesdays,timeThursday,timeThursdays,timeFriday,timeFridays,timeSaturday,timeSaturdays,utcWeek:utcSunday,utcWeeks:utcSundays,utcSunday,utcSundays,utcMonday,utcMondays,utcTuesday,utcTuesdays,utcWednesday,utcWednesdays,utcThursday,utcThursdays,utcFriday,utcFridays,utcSaturday,utcSaturdays,timeMonth,timeMonths,utcMonth,utcMonths,timeYear,timeYears,utcYear,utcYears,utcTicks,utcTickInterval,timeTicks,timeTickInterval,timeFormatDefaultLocale:defaultLocale,get timeFormat(){return timeFormat},get timeParse(){return timeParse},get utcFormat(){return utcFormat},get utcParse(){return utcParse},timeFormatLocale:formatLocale,isoFormat:formatIso$1,isoParse:parseIso$1,now,timer,timerFlush,timeout,interval,transition,active,interrupt,zoom,zoomTransform:transform,zoomIdentity:identity,ZoomTransform:Transform},Symbol.toStringTag,{value:"Module"}));const breaks=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function toJalaali(e,t,n){return Object.prototype.toString.call(e)==="[object Date]"&&(n=e.getDate(),t=e.getMonth()+1,e=e.getFullYear()),d2j(g2d(e,t,n))}function toGregorian(e,t,n){return d2g(j2d(e,t,n))}function isLeapJalaaliYear(e){return jalCalLeap(e)===0}function jalaaliMonthLength(e,t){return t<=6?31:t<=11||isLeapJalaaliYear(e)?30:29}function jalCalLeap(e){const t=breaks.length;let n=breaks[0],r,i,o,l,f;if(e<n||e>=breaks[t-1])throw new Error("Invalid Jalaali year "+e);for(f=1;f<t&&(r=breaks[f],i=r-n,!(e<r));f+=1)n=r;return l=e-n,i-l<6&&(l=l-i+div(i+4,33)*33),o=mod(mod(l+1,33)-1,4),o===-1&&(o=4),o}function jalCal(e,t){const n=breaks.length,r=e+621;let i=-14,o=breaks[0],l,f,h,d,g;if(e<o||e>=breaks[n-1])throw new Error("Invalid Jalaali year "+e);for(g=1;g<n&&(l=breaks[g],f=l-o,!(e<l));g+=1)i=i+div(f,33)*8+div(mod(f,33),4),o=l;d=e-o,i=i+div(d,33)*8+div(mod(d,33)+3,4),mod(f,33)===4&&f-d===4&&(i+=1);const p=div(r,4)-div((div(r,100)+1)*3,4)-150,b=20+i-p;return t||(f-d<6&&(d=d-f+div(f+4,33)*33),h=mod(mod(d+1,33)-1,4),h===-1&&(h=4)),{leap:h,gy:r,march:b}}function j2d(e,t,n){const r=jalCal(e,!0);return g2d(r.gy,3,r.march)+(t-1)*31-div(t,7)*(t-7)+n-1}function d2j(e){const t=d2g(e).gy;let n=t-621,r,i,o;const l=jalCal(n,!1),f=g2d(t,3,l.march);if(o=e-f,o>=0){if(o<=185)return i=1+div(o,31),r=mod(o,31)+1,{jy:n,jm:i,jd:r};o-=186}else n-=1,o+=179,l.leap===1&&(o+=1);return i=7+div(o,30),r=mod(o,30)+1,{jy:n,jm:i,jd:r}}function g2d(e,t,n){let r=div((e+div(t-8,6)+100100)*1461,4)+div(153*mod(t+9,12)+2,5)+n-34840408;return r=r-div(div(e+100100+div(t-8,6),100)*3,4)+752,r}function d2g(e){let t=4*e+139361631;t=t+div(div(4*e+183187720,146097)*3,4)*4-3908;const n=div(mod(t,1461),4)*5+308,r=div(mod(n,153),5)+1,i=mod(div(n,153),12)+1;return{gy:div(t,1461)-100100+div(8-i,6),gm:i,gd:r}}function div(e,t){return~~(e/t)}function mod(e,t){return e-~~(e/t)*t}const MILLISECONDS_IN_DAY=864e5,MILLISECONDS_IN_HOUR=36e5,MILLISECONDS_IN_MINUTE=6e4,defaultMask="YYYY-MM-DDTHH:mm:ss.SSSZ",token=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,reverseToken=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,regexStore={};function getRegexData(e,t){const n="("+t.days.join("|")+")",r=e+n;if(regexStore[r]!==void 0)return regexStore[r];const i="("+t.daysShort.join("|")+")",o="("+t.months.join("|")+")",l="("+t.monthsShort.join("|")+")",f={};let h=0;const d=e.replace(reverseToken,p=>{switch(h++,p){case"YY":return f.YY=h,"(-?\\d{1,2})";case"YYYY":return f.YYYY=h,"(-?\\d{1,4})";case"M":return f.M=h,"(\\d{1,2})";case"MM":return f.M=h,"(\\d{2})";case"MMM":return f.MMM=h,l;case"MMMM":return f.MMMM=h,o;case"D":return f.D=h,"(\\d{1,2})";case"Do":return f.D=h++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return f.D=h,"(\\d{2})";case"H":return f.H=h,"(\\d{1,2})";case"HH":return f.H=h,"(\\d{2})";case"h":return f.h=h,"(\\d{1,2})";case"hh":return f.h=h,"(\\d{2})";case"m":return f.m=h,"(\\d{1,2})";case"mm":return f.m=h,"(\\d{2})";case"s":return f.s=h,"(\\d{1,2})";case"ss":return f.s=h,"(\\d{2})";case"S":return f.S=h,"(\\d{1})";case"SS":return f.S=h,"(\\d{2})";case"SSS":return f.S=h,"(\\d{3})";case"A":return f.A=h,"(AM|PM)";case"a":return f.a=h,"(am|pm)";case"aa":return f.aa=h,"(a\\.m\\.|p\\.m\\.)";case"ddd":return i;case"dddd":return n;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return f.Z=h,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return f.ZZ=h,"(Z|[+-]\\d{2}\\d{2})";case"X":return f.X=h,"(-?\\d+)";case"x":return f.x=h,"(-?\\d{4,})";default:return h--,p[0]==="["&&(p=p.substring(1,p.length-1)),p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),g={map:f,regex:new RegExp("^"+d)};return regexStore[r]=g,g}function getDateLocale(e,t){return e!==void 0?e:t!==void 0?t.date:defaultLang.date}function formatTimezone(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;return n+pad$2(i)+t+pad$2(o)}function applyYearMonthDayChange(e,t,n){let r=e.getFullYear(),i=e.getMonth();const o=e.getDate();return t.year!==void 0&&(r+=n*t.year,delete t.year),t.month!==void 0&&(i+=n*t.month,delete t.month),e.setDate(1),e.setMonth(2),e.setFullYear(r),e.setMonth(i),e.setDate(Math.min(o,daysInMonth(e))),t.date!==void 0&&(e.setDate(e.getDate()+n*t.date),delete t.date),e}function applyYearMonthDay(e,t,n){const r=t.year!==void 0?t.year:e[`get${n}FullYear`](),i=t.month!==void 0?t.month-1:e[`get${n}Month`](),o=new Date(r,i+1,0).getDate(),l=Math.min(o,t.date!==void 0?t.date:e[`get${n}Date`]());return e[`set${n}Date`](1),e[`set${n}Month`](2),e[`set${n}FullYear`](r),e[`set${n}Month`](i),e[`set${n}Date`](l),delete t.year,delete t.month,delete t.date,e}function getChange(e,t,n){const r=normalizeMod(t),i=new Date(e),o=r.year!==void 0||r.month!==void 0||r.date!==void 0?applyYearMonthDayChange(i,r,n):i;for(const l in r){const f=capitalize(l);o[`set${f}`](o[`get${f}`]()+n*r[l])}return o}function normalizeMod(e){const t={...e};return e.years!==void 0&&(t.year=e.years,delete t.years),e.months!==void 0&&(t.month=e.months,delete t.months),e.days!==void 0&&(t.date=e.days,delete t.days),e.day!==void 0&&(t.date=e.day,delete t.day),e.hour!==void 0&&(t.hours=e.hour,delete t.hour),e.minute!==void 0&&(t.minutes=e.minute,delete t.minute),e.second!==void 0&&(t.seconds=e.second,delete t.second),e.millisecond!==void 0&&(t.milliseconds=e.millisecond,delete t.millisecond),t}function adjustDate(e,t,n){const r=normalizeMod(t),i=n===!0?"UTC":"",o=new Date(e),l=r.year!==void 0||r.month!==void 0||r.date!==void 0?applyYearMonthDay(o,r,i):o;for(const f in r){const h=f.charAt(0).toUpperCase()+f.slice(1);l[`set${i}${h}`](r[f])}return l}function extractDate(e,t,n){const r=__splitDate(e,t,n),i=new Date(r.year,r.month===null?null:r.month-1,r.day===null?1:r.day,r.hour,r.minute,r.second,r.millisecond),o=i.getTimezoneOffset();return r.timezoneOffset===null||r.timezoneOffset===o?i:getChange(i,{minutes:r.timezoneOffset-o},1)}function __splitDate(e,t,n,r,i){const o={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(i!==void 0&&Object.assign(o,i),e==null||e===""||typeof e!="string")return o;t===void 0&&(t=defaultMask);const l=getDateLocale(n,Plugin.props),f=l.months,h=l.monthsShort,{regex:d,map:g}=getRegexData(t,l),p=e.match(d);if(p===null)return o;let b="";if(g.X!==void 0||g.x!==void 0){const $=parseInt(p[g.X!==void 0?g.X:g.x],10);if(isNaN($)===!0||$<0)return o;const w=new Date($*(g.X!==void 0?1e3:1));o.year=w.getFullYear(),o.month=w.getMonth()+1,o.day=w.getDate(),o.hour=w.getHours(),o.minute=w.getMinutes(),o.second=w.getSeconds(),o.millisecond=w.getMilliseconds()}else{if(g.YYYY!==void 0)o.year=parseInt(p[g.YYYY],10);else if(g.YY!==void 0){const $=parseInt(p[g.YY],10);o.year=$<0?$:2e3+$}if(g.M!==void 0){if(o.month=parseInt(p[g.M],10),o.month<1||o.month>12)return o}else g.MMM!==void 0?o.month=h.indexOf(p[g.MMM])+1:g.MMMM!==void 0&&(o.month=f.indexOf(p[g.MMMM])+1);if(g.D!==void 0){if(o.day=parseInt(p[g.D],10),o.year===null||o.month===null||o.day<1)return o;const $=r!=="persian"?new Date(o.year,o.month,0).getDate():jalaaliMonthLength(o.year,o.month);if(o.day>$)return o}g.H!==void 0?o.hour=parseInt(p[g.H],10)%24:g.h!==void 0&&(o.hour=parseInt(p[g.h],10)%12,(g.A&&p[g.A]==="PM"||g.a&&p[g.a]==="pm"||g.aa&&p[g.aa]==="p.m.")&&(o.hour+=12),o.hour=o.hour%24),g.m!==void 0&&(o.minute=parseInt(p[g.m],10)%60),g.s!==void 0&&(o.second=parseInt(p[g.s],10)%60),g.S!==void 0&&(o.millisecond=parseInt(p[g.S],10)*10**(3-p[g.S].length)),(g.Z!==void 0||g.ZZ!==void 0)&&(b=g.Z!==void 0?p[g.Z].replace(":",""):p[g.ZZ],o.timezoneOffset=(b[0]==="+"?-1:1)*(60*b.slice(1,3)+1*b.slice(3,5)))}return o.dateHash=pad$2(o.year,6)+"/"+pad$2(o.month)+"/"+pad$2(o.day),o.timeHash=pad$2(o.hour)+":"+pad$2(o.minute)+":"+pad$2(o.second)+b,o}function isValid(e){return typeof e=="number"?!0:isNaN(Date.parse(e))===!1}function buildDate(e,t){return adjustDate(new Date,e,t)}function getDayOfWeek(e){const t=new Date(e).getDay();return t===0?7:t}function getWeekOfYear(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);const r=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-r);const i=(t-n)/(MILLISECONDS_IN_DAY*7);return 1+Math.floor(i)}function getDayIdentifier(e){return e.getFullYear()*1e4+e.getMonth()*100+e.getDate()}function getDateIdentifier(e,t){const n=new Date(e);return t===!0?getDayIdentifier(n):n.getTime()}function isBetweenDates(e,t,n,r={}){const i=getDateIdentifier(t,r.onlyDate),o=getDateIdentifier(n,r.onlyDate),l=getDateIdentifier(e,r.onlyDate);return(l>i||r.inclusiveFrom===!0&&l===i)&&(l<o||r.inclusiveTo===!0&&l===o)}function addToDate(e,t){return getChange(e,t,1)}function subtractFromDate(e,t){return getChange(e,t,-1)}function startOfDate(e,t,n){const r=new Date(e),i=`set${n===!0?"UTC":""}`;switch(t){case"year":case"years":r[`${i}Month`](0);case"month":case"months":r[`${i}Date`](1);case"day":case"days":case"date":r[`${i}Hours`](0);case"hour":case"hours":r[`${i}Minutes`](0);case"minute":case"minutes":r[`${i}Seconds`](0);case"second":case"seconds":r[`${i}Milliseconds`](0)}return r}function endOfDate(e,t,n){const r=new Date(e),i=`set${n===!0?"UTC":""}`;switch(t){case"year":case"years":r[`${i}Month`](11);case"month":case"months":r[`${i}Date`](daysInMonth(r));case"day":case"days":case"date":r[`${i}Hours`](23);case"hour":case"hours":r[`${i}Minutes`](59);case"minute":case"minutes":r[`${i}Seconds`](59);case"second":case"seconds":r[`${i}Milliseconds`](999)}return r}function getMaxDate(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(n=>{t=Math.max(t,new Date(n))}),t}function getMinDate(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(n=>{t=Math.min(t,new Date(n))}),t}function getDiff(e,t,n){return(e.getTime()-e.getTimezoneOffset()*MILLISECONDS_IN_MINUTE-(t.getTime()-t.getTimezoneOffset()*MILLISECONDS_IN_MINUTE))/n}function getDateDiff(e,t,n="days"){const r=new Date(e),i=new Date(t);switch(n){case"years":case"year":return r.getFullYear()-i.getFullYear();case"months":case"month":return(r.getFullYear()-i.getFullYear())*12+r.getMonth()-i.getMonth();case"days":case"day":case"date":return getDiff(startOfDate(r,"day"),startOfDate(i,"day"),MILLISECONDS_IN_DAY);case"hours":case"hour":return getDiff(startOfDate(r,"hour"),startOfDate(i,"hour"),MILLISECONDS_IN_HOUR);case"minutes":case"minute":return getDiff(startOfDate(r,"minute"),startOfDate(i,"minute"),MILLISECONDS_IN_MINUTE);case"seconds":case"second":return getDiff(startOfDate(r,"second"),startOfDate(i,"second"),1e3)}}function getDayOfYear(e){return getDateDiff(e,startOfDate(e,"year"),"days")+1}function inferDateFormat(e){return isDate(e)===!0?"date":typeof e=="number"?"number":"string"}function getDateBetween(e,t,n){const r=new Date(e);if(t){const i=new Date(t);if(r<i)return i}if(n){const i=new Date(n);if(r>i)return i}return r}function isSameDate(e,t,n){const r=new Date(e),i=new Date(t);if(n===void 0)return r.getTime()===i.getTime();switch(n){case"second":case"seconds":if(r.getSeconds()!==i.getSeconds())return!1;case"minute":case"minutes":if(r.getMinutes()!==i.getMinutes())return!1;case"hour":case"hours":if(r.getHours()!==i.getHours())return!1;case"day":case"days":case"date":if(r.getDate()!==i.getDate())return!1;case"month":case"months":if(r.getMonth()!==i.getMonth())return!1;case"year":case"years":if(r.getFullYear()!==i.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${n}`)}return!0}function daysInMonth(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function getOrdinal(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const formatter={YY(e,t,n){const r=this.YYYY(e,t,n)%100;return r>=0?pad$2(r):"-"+pad$2(Math.abs(r))},YYYY(e,t,n){return n!=null?n:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return pad$2(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return getOrdinal(this.Q(e))},D(e){return e.getDate()},Do(e){return getOrdinal(e.getDate())},DD(e){return pad$2(e.getDate())},DDD(e){return getDayOfYear(e)},DDDD(e){return pad$2(getDayOfYear(e),3)},d(e){return e.getDay()},dd(e,t){return this.dddd(e,t).slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return getWeekOfYear(e)},ww(e){return pad$2(getWeekOfYear(e))},H(e){return e.getHours()},HH(e){return pad$2(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return pad$2(this.h(e))},m(e){return e.getMinutes()},mm(e){return pad$2(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return pad$2(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return pad$2(Math.floor(e.getMilliseconds()/10))},SSS(e){return pad$2(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,t,n,r){const i=r==null?e.getTimezoneOffset():r;return formatTimezone(i,":")},ZZ(e,t,n,r){const i=r==null?e.getTimezoneOffset():r;return formatTimezone(i)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function formatDate(e,t,n,r,i){if(e!==0&&!e||e===1/0||e===-1/0)return;const o=new Date(e);if(isNaN(o))return;t===void 0&&(t=defaultMask);const l=getDateLocale(n,Plugin.props);return t.replace(token,(f,h)=>f in formatter?formatter[f](o,l,r,i):h===void 0?f:h.split("\\]").join("]"))}function clone(e){return isDate(e)===!0?new Date(e.getTime()):e}var date={isValid,extractDate,buildDate,getDayOfWeek,getWeekOfYear,isBetweenDates,addToDate,subtractFromDate,adjustDate,startOfDate,endOfDate,getMaxDate,getMinDate,getDateDiff,getDayOfYear,inferDateFormat,getDateBetween,isSameDate,daysInMonth,formatDate,clone};const mkTStamp=()=>{const e=Date.now();return date.formatDate(e,"MMDDYY-HH:mm:ss")},langVoices={"Eng-US":{flagName:"fi fi-us",langName:"en",speechLang:"en-US",longName:"English",voice:"Google English US"},"Eng-UK-Fem":{flagName:"fi fi-gb",langName:"en",speechLang:"en-GB",longName:"English",voice:"Google UK English Female"},espa\u00F1ol:{flagName:"fi fi-mx",langName:"es",speechLang:"es-MX",longName:"espa\xF1ol",voice:"Google espa\xF1ol"},fran\u00E7ais:{flagName:"fi fi-fr",langName:"fr",speechLang:"fr-FR",longName:"fran\xE7ais",voice:"Google fran\xE7ais"},Deutsch:{flagName:"fi fi-de",langName:"de",speechLang:"de-DE",longName:"Deutsch",voice:"Google Deutsch"},italiano:{flagName:"fi fi-it",langName:"it",speechLang:"it-IT",longName:"italiano",voice:"Google italiano"},"portugu\xEAs do Brasil":{flagName:"fi fi-br",langName:"pt",speechLang:"pt-BR",longName:"portugu\xEAs",voice:"Google portugu\xEAs do Brasil"},Kiswahili:{flagName:"fi fi-ke",langName:"sw",speechLang:"en-GB",longName:"Kiswahili",voice:"Google UK English Female"},\u0440\u0443\u0441\u0441\u043A\u0438\u0439:{flagName:"fi fi-ru",langName:"ru",speechLang:"ru-RU",longName:"\u0440\u0443\u0441\u0441\u043A\u0438\u0439",voice:"Google \u0440\u0443\u0441\u0441\u043A\u0438\u0439"},\u0E44\u0E17\u0E22:{flagName:"fi fi-th",langName:"th",speechLang:"th-TH",longName:"\u0E44\u0E17\u0E22:",voice:"Google Bahasa Indonesia"},"\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09":{flagName:"fi fi-cn",langName:"zh",speechLang:"zh-CN",longName:"\u4E2D\u6587",voice:"Google \u666E\u901A\u8BDD\uFF08\u4E2D\u56FD\u5927\u9646\uFF09"},"\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09":{flagName:"fi fi-hk",langName:"zh",speechLang:"zh-HK",longName:"\u4E2D\u6587",voice:"Google \u7CA4\u8A9E\uFF08\u9999\u6E2F\uFF09"},"\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09":{flagName:"fi fi-tw",langName:"zh",speechLang:"zh-TW",longName:"\u4E2D\u6587",voice:"Google \u570B\u8A9E\uFF08\u81FA\u7063\uFF09"},\uD55C\uAD6D\uC758:{flagName:"fi fi-kr",langName:"ko",speechLang:"ko-KR",longName:"\uD55C\uAD6D\uC758",voice:"Google \uD55C\uAD6D\uC758"},\u65E5\u672C\u8A9E:{flagName:"fi fi-jp",langName:"ja",longName:"\u65E5\u672C\u8A9E",voice:"Google \u65E5\u672C\u8A9E"},"Bahasa Indonesia":{flagName:"fi fi-id",langName:"id",longName:"Bahasa Indonesia",voice:"Google Bahasa Indonesia"}},LOGO_URL="https://readingedgeca.s3.us-west-1.amazonaws.com/static/pub/img/readingedge_nowords.png",assignmentTemplate={ck:"-",id:"-",title:"Template",goal:100,points:0,pgIdx:0,pages:[],created:"",updated:"",coverUrl:LOGO_URL,scores:{}},pageTemplate={ck:null,aid:null,langVoiceKey:"Eng-UK-Fem",currentLangLinks:ref([]),isCustom:!1,pageid:null,pageTitle:"Template",guideWords:"",imgIdx:0,imgs:[{url:LOGO_URL,cap:"Welcome to Reading Edge!"}],imgFit:"scale-down",pctReplace:15,pageText:"Template Text",pageFontSize:14,canonicalUrl:LOGO_URL,mapCoords:"36.11,-115.17"},preferencesTemplate={resLimit:50,imgLimit:20,pageFontSize:14,textColor:"#CCE6FF",secondaryColor:"#666666",accentColor:"#7f7f7f",langVoiceKey:"Eng-UK-Fem",langVoices:Object.keys(langVoices)},assignmentStatusTemplate={course:"Course Title",assignmentTitle:"Assignment Title",pageTitle:"Page Title",points:0,goal:50,pgIdx:0,pgTot:0,imgIdx:0,imgTot:0,imgFit:"",guideWords:"---",mapCoords:"36.11,-115.17",pageid:"WP",aid:"-",ck:"-",lang:"English",pctReplace:5},useREStore=defineStore("reStore",{state:()=>({role:ref(null),courses:ref({ck:null,aid:null,pgIdx:0,imgIdx:0,pageid:null,trigger:0}),page:JSON.parse(JSON.stringify(pageTemplate)),langVoices:JSON.parse(JSON.stringify(langVoices)),preferences:JSON.parse(JSON.stringify(preferencesTemplate)),assignmentStatus:JSON.parse(JSON.stringify(assignmentStatusTemplate)),wiki:ref(wiki),router:useRouter(),speech:ref(null),authenticated:ref(!1),userSnapshot:ref(null),speechInitialized:ref(!1)}),getters:{getPoints(e){return e.assignmentStatus.points}},actions:{mkId(){return Math.random().toString().slice(2,20)},setPref(e,t){console.log("setPref ",e,t),this.preferences[e]=t},setPageStatus(e,t){console.log("setPageStatus ",e,t);const n=this.courses[this.courses.ck].assignments[this.courses.aid].pgIdx;this.courses[this.courses.ck].assignments[this.courses.aid].pages[n][e]=t},setAssignmentStatus(e,t){console.log("setAssignmentStatus ",e,t),this.courses[this.courses.ck].assignments[this.courses.aid][e]=t},setCourseStatus(e,t){console.log("setCourseStatus ",e,t),this.courses[this.courses.ck][e]=t},setStatus(e,t){this.assignmentStatus[e]=t},createUser(e,t){console.log("createUser",t.currentUser.uid);const n=t.currentUser.email.replace("@","_at_").replace(".","_dot_"),r={uid:t.currentUser.uid,email:t.currentUser.email,emailKey:n,name:t.currentUser.displayName?t.currentUser.displayName:t.currentUser.email,picture:t.currentUser.photoURL},i={uid:t.currentUser.uid,type:"free",renewalDate:null,verified:t.currentUser.emailVerified,network:e,ip:"0.0.0.0"},o=JSON.parse(JSON.stringify(preferencesTemplate));this.userSnapshot={account:i,profile:r,teaching:{},taking:{},preferences:o},this.loadPreferencesFromSnapshot(),axios("https://jsonip.com/").then(l=>{console.log(l.data.ip),i.ip=l.data.ip,set$3(ref$1(dbRT,`users/${n}`),this.userSnapshot),console.log("okay done"),this.role="teacher",this.router.push("/teacher")})},loadPreferencesFromSnapshot(){this.setPref("resLimit",this.userSnapshot.preferences.resLimit),this.setPref("imgLimit",this.userSnapshot.preferences.imgLimit),this.setPref("pageFontSize",this.userSnapshot.preferences.pageFontSize),this.setPref("textColor",this.userSnapshot.preferences.textColor),this.setPref("secondaryColor",this.userSnapshot.preferences.secondaryColor),this.setPref("accentColor",this.userSnapshot.preferences.accentColor),this.setPref("langVoice",this.userSnapshot.preferences.langVoiceKey),this.setPref("langVoices",this.userSnapshot.preferences.langVoices)},async checkUser(e){console.log(e,dbRT,auth,d3);const t=auth.currentUser.email.replace("@","_at_").replace(".","_dot_");console.log("emailKey: ",t);const n=ref$1(getDatabase()),r=`users/${t}`;await get$2(child(n,r)).then(i=>{i.exists()?(console.log("Found user",i.key),this.userSnapshot=i.val(),this.userSnapshot.teaching||(this.userSnapshot.teaching={}),this.userSnapshot.taking||(this.userSnapshot.taking={}),this.role="teacher",this.loadCourses(t),this.loadPreferencesFromSnapshot()):(console.log("User not found"),this.createUser(e,auth))}).catch(i=>{console.log("Error at checkUser: ",i)})},logout(){this.authenticated=!1,this.router.push("/"),this.courses=ref({ck:null,aid:null,pgIdx:null,imgIdx:0,pageid:null}),this.page=JSON.parse(JSON.stringify(pageTemplate)),this.preferences=JSON.parse(JSON.stringify(preferencesTemplate)),this.assignmentStatus=JSON.parse(JSON.stringify(assignmentStatusTemplate)),this.userSnapshot={}},async initSpeech(){this.speech||(this.speech=new default_1,await this.speech.init({voice:"Google UK English Female"}).then(e=>{console.log(e.voices)}),this.speechInitialized=!0)},async speak(){console.log("speak"),this.speechInitialized||this.initSpeech(),this.speech.setLanguage(langVoices[this.preferences.langVoiceKey].langName),this.speech.setVoice(langVoices[this.page.langVoiceKey].voice),await this.speech.speak({text:select("#slideTextDiv").html(),queue:!1}).then(()=>{console.log("Success!")}).catch(e=>{console.error("Error in speech",e)})},updatePage(){const e=this.courses.ck,t=this.courses.aid,n=this.courses.pgIdx;this.page.pageText=select("#slideTextDiv").html(),this.courses[e].assignments[t].pages[n]=JSON.parse(JSON.stringify(this.page)),this.courses.trigger+=1},appendPage(){try{this.page.pageText=select("#slideTextDiv").html(),this.page.imgs[this.page.imgIdx].cap=select("#slideCaptionDiv").html()}catch(t){console.log(t)}const e=JSON.parse(JSON.stringify(this.page));this.courses[this.courses.ck].assignments[this.courses.aid].pages.push(e),this.courses.pgIdx+=1,this.courses[this.courses.ck].assignments[this.courses.aid].pgIdx+=1,this.courses.trigger+=1},async getPage(e,t,n){for(selectAll(".assignment").classed("hidden",!1),selectAll(".coverslide").classed("hidden",!0);this.page.imgs.length>0;)this.page.imgs.pop();console.log("getPage ",n,langVoices[n]);const r=await this.wiki.setLang(langVoices[n].langName);console.log("res (promise)",r);let i,o,l;if(e.length>0){const h=e.split(",");for(var f in parseInt(Math.random()*Math.random()))console.log("dummy ",f);const d=parseInt(Math.random()*h.length);console.log("searchTerm: ",h[d]);const g=await this.wiki.search(h[d],{suggestion:!1,limit:this.preferences.resLimit}),p=parseInt(Math.random()*g.results.length);l=g.results[p].pageid,o=await this.wiki.page(l),i=await o.summary()}else t!==null?(o=await this.wiki.page(t),l=t,i=await o.summary()):(i=await this.wiki.random(),l=i.pageid,o=await this.wiki.page(l));await o.media().then(h=>{for(const d in h.items)d.type==="image"&&d.showInGallery===!0&&this.page.imgs.push({url:d.srcset[0].src,cap:d.caption.text});this.courses.trigger+=1});try{this.page.currentLangLinks=await o.langLinks()}catch{console.log("Failed to get langLinks")}await o.coordinates().then(h=>{console.log("resolved coords ",h),h!==null?(this.setStatus("mapCoords",`[${h.lat}, ${h.lon}]`),this.page.mapCoords=`${h.lat}, ${h.lon}`):(this.setStatus("mapCoords","-999, -999"),this.page.mapCoords="-999, -999"),this.courses.trigger+=1});try{await o.images({limit:this.preferences.imgLimit}).then(h=>{for(const d in h)h[0].title.indexOf(".svg")>1?console.log("SVG ",h[0].title):h[0].title.indexOf("airytale")>0?console.log("Fairytale warning ",h[0].title):h[0].title.indexOf("kguitar")>1?console.log("kguitar ",h[0].title):h[0].title.indexOf("Blank.png")>-1?console.log("Blank.png ",h[0].title):h[0].title.indexOf(".oga")>1?console.log("OGA ",h[0].title):h[0].title.indexOf(".webm")>1?console.log("WEBM ",h[0].title):h[0].title.indexOf(".ogg")>1?console.log("OGG ",h[0].title):h[0].title.indexOf(".tif")>1?console.log("TIF ",h[0].title):h[0].title.indexOf(".mid")>1?console.log("MID ",h[0].title):h[0].title.indexOf(".ogv")>1?console.log("OGV ",h[0].title):h[0].title.indexOf("Icon")>1?console.log("ICON ",h[0].title):h[0].title.indexOf("icon")>1?console.log("icon ",h[0].title):h[0].title.indexOf("podagraria1")>0?console.log("podagraria1 ",h[0].title):h[0].title.indexOf("Bluetank")>1||h[0].title.indexOf("rab Nebula.jpg")>0?console.log("BLUETANK ",h[0].title):h[0].title.indexOf("viacionavion")>1||h[0].title.indexOf("input-microphone")>1?console.log("viacionavion",h[0].title):h[0].title.indexOf("clouds in fair weather")>0?console.log("clouds in fair weather",h[0].title):(console.log("Attempting to add "),this.page.imgs.push({url:h[0].url,cap:h[0].title}),console.log("Added ",h[0].title)),h.push(h.shift())})}catch{console.log("error retrieving fp.images ",o)}this.page.imgs.length===0&&this.page.imgs.push({url:"https://readingedgeca.s3.us-west-1.amazonaws.com/static/pub/img/readingedge_cover.png",cap:"No images available"}),this.page.langVoiceKey=n,this.page.isCustom=!1,this.page.pageid=l,this.page.pageTitle=i.title,this.page.guideWords=e;try{console.log("getPage setting imgIdx ..."),this.page.imgIdx=this.courses[this.courses.ck].assignments[this.courses.aid].pages[this.courses.pgIdx].imgIdx,this.courses.imgIdx=this.page.imgIdx,console.log("getPage imgIdx: ",this.page.imgIdx)}catch{console.log("."),this.page.imgIdx=0,this.courses.imgIdx=0}return this.page.imgFit="scale-down",this.page.pctReplace=15,this.page.pageText=i.extract,this.page.canonicalUrl=o.canonicalurl,this.courses.pageid=l,this.setStatus("pageid",l),1},async loadPageId(e,t){console.log("re-store loadPageId: ",e,t),await this.getPage("",e,t).then(n=>{console.log("getPage returned rval ",n),this.courses.trigger+=1,this.router.push("/teacher/editor")})},loadImgId(e){this.page.imgs.unshift({url:this.userSnapshot.images[e].url,cap:this.userSnapshot.images[e].cap}),this.page.imgIdx=0,this.courses.imgIdx=0},removeBookmark(e){const t=`users/${this.userSnapshot.profile.emailKey}/bookmarks/${e}`;remove$1(ref$1(dbRT,t),this.userSnapshot.bookmarks[e]),delete this.userSnapshot.bookmarks[e]},removeImage(e){console.log("removeImage: ",e);const t=`users/${this.userSnapshot.profile.emailKey}/images/${e}`;remove$1(ref$1(dbRT,t),this.userSnapshot.images[e]),delete this.userSnapshot.images[e]},saveImage(e,t){console.log("saveImage ",t),this.userSnapshot.images||(this.userSnapshot.images={});const n=this.mkId();if(t.name||(t.name=t.url.substring(this.page.imgs[this.courses.imgIdx].url.lastIndexOf("/")+1)),!t.source)try{t.source=this.page.canonicalUrl}catch{t.source=null}t.desc||(t.desc=name),t.cap||(t.cap=name),this.userSnapshot.images[n]=t;const r=`users/${this.userSnapshot.profile.emailKey}/images`;update(ref$1(dbRT,r),this.userSnapshot.images)},saveBookmark(){this.userSnapshot.bookmarks||(this.userSnapshot.bookmarks={}),this.page.imgIdx||(this.pageimgIdx=0),this.userSnapshot.bookmarks[this.page.pageTitle]=JSON.parse(JSON.stringify(this.page));const e=`users/${this.userSnapshot.profile.emailKey}/bookmarks`;update(ref$1(dbRT,e),this.userSnapshot.bookmarks)},newCourse(){const e={},t=mkTStamp();e.title=`C-${t}`,e.created=t,e.updated=t,e.courseKey=Math.random().toString().slice(2,20),e.enrollment={},e.assignments={},e.owner=this.userSnapshot.profile.emailKey,this.courses||(this.courses={}),this.userSnapshot.teaching||(this.userSnapshot.teaching={}),this.userSnapshot.teaching[e.courseKey]={ck:e.courseKey};const n=`users/${this.userSnapshot.profile.emailKey}/teaching/${e.courseKey}`;update(ref$1(dbRT,n),this.userSnapshot.teaching[e.courseKey]),this.courses[e.courseKey]=e;const r=`courses/${e.courseKey}`;return update(ref$1(dbRT,r),this.courses[e.courseKey]),{courseKey:e.courseKey}},newAssignment(e){console.log("newAssignment: ",e);const t=mkTStamp(),n=Math.random().toString().slice(2,20),r=JSON.parse(JSON.stringify(assignmentTemplate));r.id=n,r.ck=e,r.created=t,r.updated=t,console.log("newAssignment ",r),this.courses[e].assignments||(this.courses[e].assignments={}),this.courses[e].assignments[r.id]=r;const i=`courses/${e}/assignments/${r.id}`;update(ref$1(dbRT,i),r)},newPage(){const e=JSON.parse(JSON.stringify(pageTemplate));e.aid=this.courses.aid,e.ck=this.courses.ck,e.langVoiceKey=this.preferences.langVoiceKey,console.log("newPage ",e.langVoiceKey),this.page=e,this.courses.imgIdx=0,this.courses.trigger+=1},startAssignment(){const e=this.courses.ck,t=this.courses.aid;this.page=JSON.parse(JSON.stringify(this.courses[e].assignments[t].pages[0])),this.courses.pgIdx=0,this.courses.imgIdx=this.page.imgIdx,selectAll(".assignment").classed("hidden",!1),selectAll(".coverslide").classed("hidden",!0),this.courses.trigger+=1},loadCover(){console.log("loadCover"),this.page=JSON.parse(JSON.stringify(pageTemplate));const e=this.courses.ck,t=this.courses.aid,n=this.courses[e].assignments[t];this.page.imgs[0].url=n.coverUrl,this.page.imgs[0].cap=n.title,selectAll(".assignment").classed("hidden",!0),selectAll(".coverslide").classed("hidden",!1),this.courses.imgIdx=0,this.courses.trigger+=1},async loadCourses(e){console.log("loadCourses ",e);const t=ref$1(getDatabase());if(this.role==="teacher"){this.userSnapshot.teaching||(this.userSnapshot.teaching={});for(const[n,r]of Object.entries(this.userSnapshot.teaching)){console.log("k, v ",n,r);const i=`courses/${n}`;await get$2(child(t,i)).then(o=>{if(o.exists()){const l=o.val();l.enrollment||(l.enrollment={}),this.courses[n]=l}else console.log("failed to load course",n,r)})}}else if(this.role==="student"){this.userSnapshot.taking||(this.userSnapshot.taking={});for(const[n,r]of Object.entries(this.userSnapshot.taking)){console.log("k, v ",n,r);const i=`courses/${n}`;await get$2(child(t,i)).then(o=>{if(o.exists()){const l=this.processSnapshotAsStudentCourse(o.val());this.role||(this.courses[n]=l)}else console.log("failed to load course",n,r)})}}else console.log("No courses loaded b/c no role");console.log("loadCourses pushing /teacher"),this.router.push("/teacher")},async loadDemo(){console.log("reStore loadDemo");const e=ref$1(getDatabase()),t="6799643933511432",n=`courses/${t}`;await get$2(child(e,n)).then(r=>{if(r.exists()){const i=r.val();return i.enrollment||(i.enrollment={}),this.courses[t]=i,this.courses.ck=t,this.courses.aid="4237753440201235",this.courses.pgIdx=0,1}else console.log("failed to load course",t,v)})},async enroll(e){console.log("reStore.getOrCreateEnrollment: ",e);const t=this.userSnapshot.profile.emailKey,n={name:this.userSnapshot.profile.name,emailKey:t};this.courses||(this.courses={});const r=ref$1(getDatabase()),i=`courses/${e}`;await get$2(child(r,i)).then(o=>{if(o.exists()){console.log("Got course:",o.key),this.courses[e]=o.val(),this.courses[e].enrollment||(this.courses[e].enrollment={}),this.courses[e].enrollment[t]=n;const l=`courses/${e}/enrollment/${t}`;update(ref$1(dbRT,l),n);const f={ck:e};this.userSnapshot.taking||(this.userSnapshot.taking={}),this.userSnapshot.taking[e]=f;const h=`users/${t}/taking/${e}`;update(ref$1(dbRT,h),f)}else console.log("Course not found: ",e)}).catch(o=>{console.log(o)})},deleteCourse(e){if(this.userSnapshot.teaching[e]){const n=`users/${this.userSnapshot.profile.emailKey}/teaching/${e}`;remove$1(ref$1(dbRT,n),this.userSnapshot.teaching[e]),delete this.userSnapshot.teaching[e]}if(this.userSnapshot.taking[e]){const n=`users/${this.userSnapshot.profile.emailKey}/taking/${e}`;remove$1(ref$1(dbRT,n),this.userSnapshot.taking[e]),delete this.userSnapshot.taking[e]}const t=`courses/${e}`;remove$1(ref$1(dbRT,t),this.courses[e]),delete this.courses[e],console.log("course deleted")},deleteAssignment(e,t){console.log("re-store deleteAssignment ",e,t);const n=`courses/${e}/assignments/${t}`;remove$1(ref$1(dbRT,n)),delete this.courses[e].assignments[t],console.log("assignment deleted")},loadAssignment(e,t){this.courses.ck=e,this.courses.aid=t,console.log("re-store loadAssignment ",e,t),(!this.courses[e].assignments[t].pages||!this.courses[e].assignments[t].pages.length)&&(this.courses[e].assignments[t].pages=[JSON.parse(JSON.stringify(pageTemplate))]),this.page=JSON.parse(JSON.stringify(this.courses[e].assignments[t].pages[0])),this.courses.pgIdx=0,this.courses.imgIdx=this.page.imgIdx,console.log("imgIdx ",this.courses.imgIdx,this.page.imgIdx),this.loadCover(),this.courses.trigger+=1},setCourseTitle(e,t){console.log("ck, title: ",e,t),this.courses[e].title=t,this.courses[e].updated=mkTStamp();const n=`courses/${e}`;update(ref$1(dbRT,n),this.courses[e])},setAssignmentTitle(e,t,n){console.log("ck, aid, title: ",e,t,n),this.courses[e].assignments[t].title=n,this.courses[e].assignments[t].updated=mkTStamp();const r=`courses/${e}`;update(ref$1(dbRT,r),this.courses[e])},saveCurrentAssignment(){const e=this.courses.ck,t=this.courses.aid;this.courses.pgIdx,this.page.imgIdx=this.courses.imgIdx,this.courses[e].assignments[t].updated=mkTStamp();const n=`courses/${e}`;update(ref$1(dbRT,n),this.courses[e])},nextPage(){console.log("re-store nextPage ",this.courses.pgIdx),selectAll(".assignment").classed("hidden",!1),selectAll(".coverslide").classed("hidden",!0);const e=this.courses.ck,t=this.courses.aid;if(this.courses.pgIdx+=1,this.courses.pgIdx>this.courses[e].assignments[t].pages.length-1?(console.log("setting pgIdx to 0 ",this.courses.pgIdx,this.courses[e].assignments[t].pages.length),this.courses.pgIdx=0):console.log(this.courses.pgIdx,this.courses[e].assignments[t].pages.length,this.courses.pgIdx>this.courses[e].assignments[t].pages.length),this.setAssignmentStatus("pgIdx",this.courses.pgIdx),console.log("pgIdx ",this.courses.pgIdx),this.courses[e].assignments[t].pages[this.courses.pgIdx].isCustom===!0)console.log("nextPage isCustom ",!0),this.page=this.courses[e].assignments[t].pages[this.courses.pgIdx],this.courses.imgIdx=this.page.imgIdx,this.courses.trigger+=1;else{console.log("nextPage isCustom ",!1),console.log("re-store.nextPage calling loadPageId ");try{const n=this.courses[e].assignments[t].pages[this.courses.pgIdx].pageid,r=this.courses[e].assignments[t].pages[this.courses.pgIdx].langVoiceKey;console.log("pageid ",n),console.log("langVoiceKey ",r);const i=this.loadPageId(n,r);console.log("rval ",i)}catch(n){console.log(n)}}},unloadCurrent(){console.log("re-store unloadCurrent"),this.page=JSON.parse(JSON.stringify(pageTemplate)),this.courses.ck=null,this.courses.aid=null,this.courses.pageid=null,this.courses.pgIdx=0,this.courses.imgIdx=0,this.courses.trigger+=1}}});export{__splitDate as _,selectAll as a,between as b,toGregorian as c,date as d,formatDate as f,getDateDiff as g,jalaaliMonthLength as j,normalizeToInterval as n,pad$2 as p,select as s,toJalaali as t,useREStore as u};
