import{a as k,Q as C,i as Q,h as A,C as T}from"./ClosePopup.3a969a62.js";import{Q as K}from"./QInput.f9542a08.js";import{_ as V,r as y,o as l,c as B,w as s,a as e,aK as b,p as w,Q as p,e as o,af as d,aJ as v,au as u,av as _,aL as f,ag as c,x as g}from"./index.22ef5a29.js";import{Q as S}from"./QTooltip.2b6e5311.js";import{Q as q}from"./QPage.63a6146f.js";import{u as $}from"./re-store.012d782b.js";import{c as P}from"./copy-to-clipboard.d9a5c84a.js";import"./use-dark.0b22146e.js";import"./use-portal.e8e7f565.js";import"./use-key-composition.b6d1ab03.js";import"./position-engine.7690b167.js";import"./selection.10e1ab62.js";import"./firebase.ea708b63.js";const N=$(),D={components:{},setup(){return{reStore:N,courseKey:y(null),courseTitle:y(null),prompt:y(!1)}},mounted(){console.log("TeacherPage mounted ",this.reStore.courses)},methods:{copyCK(n){P(n).then(()=>{console.log("ck copied to clipboard",n)}).catch(t=>{console.log(t)})},newCourseCB(){console.log("courseCB"),this.reStore.newCourse()},newAssignmentCB(n){console.log("assignmentCB: ",n),this.reStore.newAssignment(n)},editAssignmentCB(n,t){console.log("editAssignmentCB: ",n,t),this.reStore.editAssignment(n,t)},changeTitleCB(){console.log("TeacherPage.titleCB",this.courseKey,this.courseTitle),this.reStore.setCourseTitle(this.courseKey,this.courseTitle)},deleteCourseCB(n){this.reStore.deleteCourse(n)}}},E=o("div",{class:"text-h6"},"Change course title",-1),H={class:"flex-center q-mt-xl q-mb-xl row q-gutter-md"},I=o("div",{class:"text-h6"},"My Teacher Page",-1),L={key:0,class:"flex-center q-pa-md"},U=o("br",null,null,-1),F={width:"100%"},J=o("tr",null,[o("th"),o("th",{colSpan:"100"}," Assignments ")],-1),M={key:0},R=o("th",null,"Student",-1),j={class:"hidden"},z={colSpan:"10"},G={class:"hidden"},O={key:0},W={key:1},X={class:"hidden"};function Y(n,t,Z,h,ee,te){return l(),B(q,{class:"q-gutter-md"},{default:s(()=>[e(A,{modelValue:h.prompt,"onUpdate:modelValue":t[3]||(t[3]=a=>h.prompt=a),persistent:""},{default:s(()=>[e(k,{style:{"min-width":"350px"}},{default:s(()=>[e(C,null,{default:s(()=>[E]),_:1}),e(C,{class:"q-pt-none"},{default:s(()=>[e(K,{dense:"",modelValue:h.courseTitle,"onUpdate:modelValue":t[0]||(t[0]=a=>h.courseTitle=a),autofocus:"",onKeyup:t[1]||(t[1]=b(a=>{h.prompt=!1,this.changeTitleCB()},["enter"])),onHide:this.dck},null,8,["modelValue","onHide"])]),_:1}),e(Q,{align:"right",class:"text-white"},{default:s(()=>[w(e(p,{outline:"",label:"Cancel"},null,512),[[T]]),w(e(p,{outline:"",label:"Save",onClick:t[2]||(t[2]=a=>this.changeTitleCB())},null,512),[[T]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o("div",H,[I,o("div",null,[e(p,{icon:"list_alt",onClick:t[4]||(t[4]=a=>this.newCourseCB())},{default:s(()=>[e(S,null,{default:s(()=>[d("Add a course")]),_:1})]),_:1}),this.reStore.authenticated?(l(),B(p,{key:0,onClick:t[5]||(t[5]=a=>this.reStore.router.push("/student")),icon:"switch_account"},{default:s(()=>[e(S,null,{default:s(()=>[d(" Switch to Student role ")]),_:1})]),_:1})):v("",!0)])]),this.reStore.userSnapshot.teaching?(l(),u("div",L,[(l(!0),u(_,null,f(this.reStore.userSnapshot.teaching,(a,i)=>(l(),B(k,{key:a.ck,class:"course-card q-mt-md q-mb-md"},{default:s(()=>[e(C,null,{default:s(()=>[d(" Title: "+c(i)+" \xA0",1),e(g,{class:"ptr",name:"edit",onClick:r=>{h.prompt=!0,this.courseTitle=this.reStore.courses[i].title,this.courseKey=i}},null,8,["onClick"]),U,d(" Key: "+c(i)+" ",1),e(g,{class:"ptr",name:"content_copy",onClick:r=>this.copyCK(i)},null,8,["onClick"]),o("div",null,[e(p,{icon:"delete",onClick:r=>this.deleteCourseCB(a.ck)},{default:s(()=>[e(S,null,{default:s(()=>[d("Delete Course")]),_:1})]),_:2},1032,["onClick"]),e(p,{icon:"assignment",onClick:r=>this.newAssignmentCB(a.ck)},{default:s(()=>[e(S,null,{default:s(()=>[d("New Assignment")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1024),e(C,null,{default:s(()=>[o("table",F,[J,this.reStore.courses[i]?(l(),u("tr",M,[R,(l(!0),u(_,null,f(this.reStore.courses[i].assignments,(r,m)=>(l(),u("th",{key:r},[d(c(r.title)+" ",1),e(g,{onClick:x=>this.editAssignmentCB(i,r.id),name:"edit"},null,8,["onClick"]),e(g,{onClick:x=>this.deleteAssignmentCB(i,r.id),name:"delete"},null,8,["onClick"]),o("span",j,c(m),1)]))),128))])):v("",!0),o("tr",null,[o("td",z,c(this.reStore.courses[i]),1)]),(l(!0),u(_,null,f(this.reStore.courses[i].enrollment,r=>(l(),u("tr",{key:r.name},[o("td",null,[d(c(r.name)+" ",1),o("span",G,c(n.sidx),1)]),(l(!0),u(_,null,f(this.reStore.courses[i].assignments,m=>(l(),u("td",{key:m},[m.scores&&m.scores[r.emailKey]?(l(),u("span",O,c(m.scores[r.emailKey]),1)):(l(),u("span",W,"-")),d(),o("span",X,c(n.aidx),1)]))),128))]))),128))])]),_:2},1024)]),_:2},1024))),128))])):v("",!0)]),_:1})}var Ce=V(D,[["render",Y]]);export{Ce as default};
