import{i as v,g as Je,h as y,j as Ct,z as St,d as G,r as h,D as F,_ as X,o as x,au as Y,a as l,w as r,p as qe,Q as $,e as n,af as T,ag as p,aK as Kt,c as B,x as V,av as J,aL as _e,aJ as Te,al as Et,am as fe,G as mt,P as ht,s as Ke,f as Q}from"./index.b954bc3d.js";import{Q as se}from"./QTooltip.d0777c66.js";import{Q as ge,a as Nt,b as Wt,c as De,d as Jt,e as vt,f as ft,g as Gt,h as Xt}from"./QLayout.85d522c4.js";import{Q as ye,a as Ve}from"./QExpansionItem.6d494551.js";import{u as Z,s as Zt,a as gt,p as le,t as ea,c as _t,f as ta,g as aa,j as Ee,_ as oa,d as yt}from"./re-store.2bd62d9f.js";import{a as I,Q as A,i as kt,C as Ie,h as bt,u as sa,b as la,c as na}from"./ClosePopup.d3386706.js";import{a as ra,u as ia,b as ua,D as da,P as ca}from"./DocumentationComponent.67414b16.js";import{Q as ma}from"./QInput.dc9edcd6.js";import{d as wt,f as $t}from"./use-dark.207d5348.js";import{Q as Ge}from"./QImg.9626816b.js";import"./position-engine.7bc41480.js";import"./selection.73716abc.js";import"./use-portal.3b9be3f7.js";import"./QSlideTransition.8943659e.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";import"./use-key-composition.09799f65.js";import"./QCheckbox.e177bf56.js";const ha=v("div",{class:"q-space"});var We=Je({name:"QSpace",setup(){return()=>ha}}),pe=Je({name:"QList",props:{...wt,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(t,{slots:o}){const m=St(),C=$t(t,m.proxy.$q),w=y(()=>"q-list"+(t.bordered===!0?" q-list--bordered":"")+(t.dense===!0?" q-list--dense":"")+(t.separator===!0?" q-list--separator":"")+(C.value===!0?" q-list--dark":"")+(t.padding===!0?" q-list--padding":""));return()=>v(t.tag,{class:w.value},Ct(o.default))}});const va=G({name:"SearchComponent",setup(){const t=Z(),o=h("");return{reStore:t,searchTerms:o,searchSize:h(t.preferences.resLimit),searchResults:h([]),promptSearchSize:h(!1)}},mounted(){F(this.reStore.preferences,async(t,o)=>{console.log("watcher ",t,o),this.searchSize=t.resLimit})},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(t){this.searchResults.splice(t,1)},load(t){console.log(t),console.log(this.searchResults[t]);const o=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("calling loadPageId ",this.searchResults[t].pageid,o),this.reStore.loadPageId(this.searchResults[t].pageid,o)},async doSearch(){const t=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("doSearch ",t),this.reStore.wiki.setLang(t.langName);const o=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",o.results.length),this.searchResults=o.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),fa=n("div",{class:"text-h6"},"Search Results Size",-1),ga={class:"q-gutter-y-sm column"},_a={key:0},ya={class:"row cardheader ptr justify-between"},pa=["onClick"],Ca={class:"history-remove"};function Sa(t,o,m,C,w,b){return x(),Y(J,null,[l(bt,{modelValue:t.promptSearchSize,"onUpdate:modelValue":o[2]||(o[2]=i=>t.promptSearchSize=i),persistent:""},{default:r(()=>[l(I,{style:{"min-width":"350px"}},{default:r(()=>[l(A,{align:"center"},{default:r(()=>[fa]),_:1}),l(A,{class:"q-pt-none",align:"center"},{default:r(()=>[l(ra,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:t.searchSize,"onUpdate:modelValue":o[0]||(o[0]=i=>t.searchSize=i)},null,8,["modelValue"])]),_:1}),l(kt,{align:"center",class:"text-primary"},{default:r(()=>[qe(l($,{flat:"",label:"Cancel"},null,512),[[Ie]]),qe(l($,{flat:"",label:"Update results size",onClick:o[1]||(o[1]=i=>this.updateSearchSize())},null,512),[[Ie]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(I,{flat:""},{default:r(()=>[l(A,null,{default:r(()=>[l(pe,{padding:"",class:"rounded-borders"},{default:r(()=>[l(ye,{"header-style":{border:"1px solid gray"},label:"Search & Results"},{default:r(()=>[n("div",ga,[l(ge,{class:"bg-primary text-white rounded-borders q-my-md"},{default:r(()=>[l($,{dark:"",standout:"",onClick:o[3]||(o[3]=i=>t.promptSearchSize=!0)},{default:r(()=>[T(p(this.searchResults.length)+" ",1),l(se,null,{default:r(()=>[T("Change results limit ("+p(this.searchSize)+")",1)]),_:1})]),_:1}),l(ma,{dark:"",dense:"",standout:"",modelValue:t.searchTerms,"onUpdate:modelValue":o[6]||(o[6]=i=>t.searchTerms=i),"input-class":"text-right",class:"q-ml-md",onKeyup:[o[7]||(o[7]=i=>this.update()),o[8]||(o[8]=Kt(i=>this.doSearch(),["enter"]))]},{append:r(()=>[t.searchTerms===""?(x(),B(V,{key:0,name:"search",onClick:o[4]||(o[4]=i=>this.doSearch())})):(x(),B(V,{key:1,name:"clear",class:"cursor-pointer",onClick:o[5]||(o[5]=i=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(x(),Y("div",_a,[(x(!0),Y(J,null,_e(this.searchResults,(i,g)=>(x(),B(I,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":o[9]||(o[9]=k=>this.searchResults=k),key:g},{default:r(()=>[n("div",ya,[n("span",{class:"history-title col-grow",onClick:k=>this.load(g)},p(g)+". "+p(i.title.slice(0,25)),9,pa),n("span",Ca,[l(V,{class:"primary",size:t.xl,color:t.primary,name:"close",onClick:k=>this.remove(g)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):Te("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var ka=X(va,[["render",Sa]]);const ba=G({name:"CurrentPage",props:{},setup(t){return{reStore:Z(),ck:h("-"),aid:h("-"),pageTitle:h(),langVoiceKey:h(),imgIdx:h(0),imgs:h([]),imgTot:h(0),imgFit:h("-"),guideWords:h("-"),mapCoords:h("-"),pageid:h("-"),pctReplace:h(),canonicalUrl:h(),props:t}},mounted(){console.log(this.props),F(this.reStore.courses,async(t,o)=>{try{console.log("CurrentPage watcher",this.reStore.courses);const m=this.reStore.courses.ck,C=this.reStore.courses.aid,w=this.reStore.courses.pgIdx,b=this.reStore.page;b&&(console.log("CurrentPage ",b),this.pageTitle=b.pageTitle,this.imgIdx=b.imgIdx,this.imgs=b.imgs,this.imgTot=b.imgs.length,this.imgFit=b.imgFit,this.guideWords=b.guideWords,this.mapCoords=b.mapCoords,this.pageid=b.pageid,this.langVoiceKey=b.langVoiceKey,this.pctReplace=b.pctReplace,this.canonicalUrl=b.canonicalUrl),this.aid=C,this.ck=m}catch(m){console.log(m)}},{immediate:!0,deep:!0})},methods:{speak(){console.log("CurrentPage.speak",this.reStore),this.reStore.speak()},cycleFitMode(){const t=["scale-down","cover"];let o=t.indexOf(this.imgFit);o+=1,o>t.length-1&&(o=0),this.imgFit=t[o],this.reStore.page.imgFit=this.imgFit,console.log("fit: ",this.imgFit)},nextImg(){this.imgIdx=this.imgIdx+1>this.imgs.length-1?0:this.imgIdx+1,this.reStore.page.imgIdx=this.imgIdx,this.reStore.courses.imgIdx=this.imgIdx},imgCB(t,o){console.log(t,o),this.reStore.page.imgIdx=t,this.reStore.courses.imgIdx=t},loadURL(t){console.log("loadURL ",t),window.open(t,"_blank")},mapCB(){const t="https://maps.google.com/?ll="+this.mapCoords.split(",")[0]+","+this.mapCoords.split(",")[1];window.open(t,"_blank")},saveImage(t,o){console.log("saveImage: ",t,o),this.reStore.saveImage()},saveCurrentImage(){const t=this.imgs[this.imgIdx];console.log("saveCurrentImage: ",t),this.reStore.saveImage()},remove(t,o){console.log("remove: ",t,o),this.imgs.splice(t,1),this.reStore.page.imgs.splice(t,1)},toggleText(){Zt("#slideTextDiv").classed("hidden")?gt("#slideTextDiv").classed("hidden",!1):gt("#slideTextDiv").classed("hidden",!0)},addBookmark(){console.log("addBookmark"),this.reStore.saveBookmark()},newPage(){console.log("CurrentPage newPageCB "),this.reStore.newPage()}}}),wa={class:"text-weight-bolder text-center q-pa-md"},$a={style:{border:"1px solid gray","border-radius":"5px"}},xa={width:"100%"},Da=n("td",{style:{width:"50%","text-align":"center"}},null,-1),Va={style:{"text-align":"center"}},qa=n("tr",null,[n("td"),n("td",{style:{"text-align":"center"}},"Speak Text")],-1),Ta={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Ia={width:"100%"},Ma=n("td",null,"Course-Key",-1),Oa={style:{width:"50%"}},Ha={class:"ptr float-left"},Ba=n("td",null,"Assgmnt Id",-1),Ra={style:{width:"50%"}},Pa={class:"ptr float-left"},Fa=n("td",null,"WP Page Id",-1),ja={style:{width:"50%"}},Qa=n("td",null,"Language",-1),Aa={style:{width:"50%"}},Ya={class:"float-left"},La=n("td",null,"Images",-1),za={style:{width:"50%"}},Ua=n("td",null,"Image Fit",-1),Ka={class:"align-left"},Ea=n("td",null,"Guide Words",-1),Na={style:{width:"50%"}},Wa=n("td",null,"Percent Replace",-1),Ja={class:"float-left"},Ga=n("td",null,"Map Coords",-1),Xa={class:"float-left"},Za=n("td",null,"Toggle Text",-1),eo={key:0},to={class:"row cardheader justify-between"},ao={class:"history-remove"},oo={class:"history-remove ptr"};function so(t,o,m,C,w,b){return x(),Y(J,null,[l(I,{flat:""},{default:r(()=>[l(A,null,{default:r(()=>[n("div",wa,[T(p(this.pageTitle)+" ",1),l(V,{name:"add_circle",onClick:this.newPage,size:"sm"},null,8,["onClick"])]),n("div",$a,[n("table",xa,[n("tr",null,[Da,n("td",Va,[l($,{round:"",class:"q-pa-md",icon:"volume_up",color:"secondary",onClick:o[0]||(o[0]=i=>this.speak())})])]),qa])]),n("div",Ta,[n("table",Ia,[n("tr",null,[Ma,n("td",Oa,[n("a",Ha,p(this.ck),1)])]),n("tr",null,[Ba,n("td",Ra,[n("a",Pa,p(this.aid),1)])]),n("tr",null,[Fa,n("td",ja,[n("a",{class:"ptr float-left",onClick:o[1]||(o[1]=i=>this.loadURL(this.canonicalUrl))},p(this.pageid),1),l(V,{name:"bookmark",onClick:this.addBookmark,class:"float-right"},null,8,["onClick"])])]),n("tr",null,[Qa,n("td",Aa,[n("span",Ya,p(this.langVoiceKey),1),l(V,{class:"float-right",name:"translate"})])]),n("tr",null,[La,n("td",za,[n("span",{onClick:o[2]||(o[2]=(...i)=>this.nextImg&&this.nextImg(...i)),class:"ptr float-left"},p(this.imgIdx+1)+" / "+p(this.imgTot),1),n("span",{class:"float-right ptr",onClick:o[3]||(o[3]=(...i)=>this.saveCurrentImage&&this.saveCurrentImage(...i))},[l(V,{name:"bookmark"})])])]),n("tr",{class:"ptr",onClick:o[4]||(o[4]=(...i)=>this.cycleFitMode&&this.cycleFitMode(...i))},[Ua,n("td",null,[n("span",Ka,p(this.imgFit),1),l(V,{class:"float-right",name:"fit_screen"})])]),n("tr",null,[Ea,n("td",Na,[T(p(this.guideWords.replaceAll(",",", "))+" ",1),l(V,{class:"float-right",name:"tune"})])]),n("tr",null,[Wa,n("td",null,[n("span",Ja,p(this.pctReplace)+" %",1),l(V,{class:"float-right",name:"tune"})])]),n("tr",null,[Ga,n("td",{onClick:o[5]||(o[5]=(...i)=>this.mapCB&&this.mapCB(...i)),class:"ptr"},[n("span",Xa,p(this.mapCoords),1),l(V,{class:"float-right",name:"place"})])]),n("tr",null,[Za,n("td",{onClick:o[6]||(o[6]=(...i)=>this.toggleText&&this.toggleText(...i)),class:"ptr"},[l(V,{class:"float-right",name:"article"})])])])])]),_:1})]),_:1}),l(I,{flat:""},{default:r(()=>[l(A,null,{default:r(()=>[l(pe,{padding:"",class:"rounded-borders"},{default:r(()=>[l(ye,{"header-style":{border:"1px solid gray"},label:"Page Images"},{default:r(()=>[this.imgs.length?(x(),Y("div",eo,[(x(!0),Y(J,null,_e(this.imgs,(i,g)=>(x(),B(I,{bordered:"",class:"q-ma-sm",flat:"",modelValue:this.imgs,"onUpdate:modelValue":o[7]||(o[7]=k=>this.imgs=k),key:g},{default:r(()=>[n("div",to,[n("span",ao,[l(V,{name:"bookmark",onClick:k=>this.saveImage(g,i)},null,8,["onClick"]),l(V,{name:"article",onClick:this.toggleText},{default:r(()=>[l(se,null,{default:r(()=>[T("Convenience button to toggle current text ")]),_:1})]),_:1},8,["onClick"]),l(V,{name:"fit_screen",onClick:this.cycleFitMode},{default:r(()=>[l(se,null,{default:r(()=>[T("Convenience button to toggle current image-fit mode ")]),_:1})]),_:1},8,["onClick"])]),n("span",null,p(i.cap.slice(0,25)),1),n("span",oo,[l(V,{name:"close",onClick:k=>this.remove(g,i)},null,8,["onClick"])])]),l(Ge,{class:"cardimage",onClick:k=>this.imgCB(g,i),src:i.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])):Te("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var lo=X(ba,[["render",so]]);const no=G({name:"ImagesComponent",setup(){return{reStore:Z()}},mounted(){F(this.reStore.userSnapshot.images,async(t,o)=>{console.log("watcher ",t,o)})},methods:{imgCB(t,o){this.reStore.router.push("/teacher/editor"),console.log(t,o);const m={url:o.url,cap:o.desc};this.reStore.page.imgs.push(m),this.reStore.page.imgIdx=this.reStore.page.imgs.length-1,this.reStore.courses.imgIdx=this.reStore.page.imgs.length-1},remove(t,o){console.log(t,o),this.reStore.removeImage(t)}}}),ro={class:"row cardheader justify-between"},io={class:"history-remove hidden"},uo={class:"history-remove ptr"};function co(t,o,m,C,w,b){return x(),B(I,{flat:""},{default:r(()=>[l(A,null,{default:r(()=>[l(pe,{padding:"",class:"rounded-borders"},{default:r(()=>[l(ye,{"header-style":{border:"1px solid gray"},label:"My Images"},{default:r(()=>[n("div",null,[(x(!0),Y(J,null,_e(this.reStore.userSnapshot.images,(i,g)=>(x(),B(I,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":o[0]||(o[0]=k=>this.reStore.userSnapshot.images=k),key:g},{default:r(()=>[n("div",ro,[n("span",io,[l(V)]),T(" "+p(i.desc.slice(0,25))+" ",1),n("span",uo,[l(V,{name:"close",onClick:k=>this.remove(g,i)},null,8,["onClick"])])]),l(Ge,{class:"cardimage",onClick:k=>this.imgCB(g,i),src:i.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var mo=X(no,[["render",co]]);const ho=G({name:"BookmarksComponent",setup(){return{reStore:Z()}},mounted(){F(this.reStore.userSnapshot.bookmarks,async(t,o)=>{console.log("watcher ",t,o)})},methods:{imgCB(t,o){this.reStore.page.imgs=JSON.parse(JSON.stringify(o.imgs)),this.reStore.router.push("/teacher/editor")},remove(t,o){console.log(t,o),this.reStore.removeBookmark(t)}}}),vo={class:"row cardheader justify-between"},fo={class:"history-remove hidden"},go={class:"history-remove ptr"};function _o(t,o,m,C,w,b){return x(),B(I,{flat:""},{default:r(()=>[l(A,null,{default:r(()=>[l(pe,{padding:"",class:"rounded-borders"},{default:r(()=>[l(ye,{"header-style":{border:"1px solid gray"},label:"My bookmarks"},{default:r(()=>[n("div",null,[(x(!0),Y(J,null,_e(this.reStore.userSnapshot.bookmarks,(i,g)=>(x(),B(I,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":o[0]||(o[0]=k=>this.reStore.userSnapshot.bookmarks=k),key:g},{default:r(()=>[n("div",vo,[n("span",fo,[l(V)]),T(" "+p(i.pageTitle.slice(0,25))+" ",1),n("span",go,[l(V,{name:"close",onClick:k=>this.remove(g,i)},null,8,["onClick"])])]),l(Ge,{class:"cardimage",onClick:k=>this.imgCB(g,i),src:i.imgs[0].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var yo=X(ho,[["render",_o]]);const po=["gregorian","persian"],Co={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:t=>po.includes(t),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},So=["update:modelValue"];function N(t){return t.year+"/"+le(t.month)+"/"+le(t.day)}function ko(t,o){const m=y(()=>t.disable!==!0&&t.readonly!==!0),C=y(()=>t.editable===!0?0:-1),w=y(()=>{const g=[];return t.color!==void 0&&g.push(`bg-${t.color}`),t.textColor!==void 0&&g.push(`text-${t.textColor}`),g.join(" ")});function b(){return t.locale!==void 0?{...o.lang.date,...t.locale}:o.lang.date}function i(g){const k=new Date,L=g===!0?null:0;if(t.calendar==="persian"){const K=ea(k);return{year:K.jy,month:K.jm,day:K.jd}}return{year:k.getFullYear(),month:k.getMonth()+1,day:k.getDate(),hour:L,minute:L,second:L,millisecond:L}}return{editable:m,tabindex:C,headerClass:w,getLocale:b,getCurrentDate:i}}const oe=20,bo=["Calendar","Years","Months"],pt=t=>bo.includes(t),Ne=t=>/^-?[\d]+\/[0-1]\d$/.test(t),ce=" \u2014 ";function W(t){return t.year+"/"+le(t.month)}var wo=Je({name:"QDate",props:{...Co,...sa,...wt,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Ne},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Ne},navigationMaxYearMonth:{type:String,validator:Ne},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:pt}},emits:[...So,"rangeStart","rangeEnd","navigation"],setup(t,{slots:o,emit:m}){const{proxy:C}=St(),{$q:w}=C,b=$t(t,w),{getCache:i}=ia(),{tabindex:g,headerClass:k,getLocale:L,getCurrentDate:K}=ko(t,w);let ne;const Me=la(t),Oe=na(Me),me=h(null),z=h(lt()),q=h(L()),ee=y(()=>lt()),xt=y(()=>L()),U=y(()=>K()),f=h(nt(z.value,q.value)),R=h(t.defaultView),Xe=w.lang.rtl===!0?"right":"left",Ce=h(Xe.value),He=h(Xe.value),Be=f.value.year,Se=h(Be-Be%oe-(Be<0?oe:0)),M=h(null),Dt=y(()=>{const e=t.landscape===!0?"landscape":"portrait";return`q-date q-date--${e} q-date--${e}-${t.minimal===!0?"minimal":"standard"}`+(b.value===!0?" q-date--dark q-dark":"")+(t.bordered===!0?" q-date--bordered":"")+(t.square===!0?" q-date--square no-border-radius":"")+(t.flat===!0?" q-date--flat no-shadow":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-date--readonly":"")}),te=y(()=>t.color||"primary"),re=y(()=>t.textColor||"white"),ke=y(()=>t.emitImmediately===!0&&t.multiple!==!0&&t.range!==!0),Re=y(()=>Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue!==null&&t.modelValue!==void 0?[t.modelValue]:[]),j=y(()=>Re.value.filter(e=>typeof e=="string").map(e=>Qe(e,z.value,q.value)).filter(e=>e.dateHash!==null&&e.day!==null&&e.month!==null&&e.year!==null)),ie=y(()=>{const e=a=>Qe(a,z.value,q.value);return Re.value.filter(a=>Et(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:e(a.from),to:e(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),be=y(()=>t.calendar!=="persian"?e=>new Date(e.year,e.month-1,e.day):e=>{const a=_t(e.year,e.month,e.day);return new Date(a.gy,a.gm-1,a.gd)}),Pe=y(()=>t.calendar==="persian"?N:(e,a,s)=>ta(new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),a===void 0?z.value:a,s===void 0?q.value:s,e.year,e.timezoneOffset)),he=y(()=>j.value.length+ie.value.reduce((e,a)=>e+1+aa(be.value(a.to),be.value(a.from)),0)),Ze=y(()=>{if(t.title!==void 0&&t.title!==null&&t.title.length>0)return t.title;if(M.value!==null){const s=M.value.init,d=be.value(s);return q.value.daysShort[d.getDay()]+", "+q.value.monthsShort[s.month-1]+" "+s.day+ce+"?"}if(he.value===0)return ce;if(he.value>1)return`${he.value} ${q.value.pluralDay}`;const e=j.value[0],a=be.value(e);return isNaN(a.valueOf())===!0?ce:q.value.headerTitle!==void 0?q.value.headerTitle(a,e):q.value.daysShort[a.getDay()]+", "+q.value.monthsShort[e.month-1]+" "+e.day}),Vt=y(()=>j.value.concat(ie.value.map(a=>a.from)).sort((a,s)=>a.year-s.year||a.month-s.month)[0]),qt=y(()=>j.value.concat(ie.value.map(a=>a.to)).sort((a,s)=>s.year-a.year||s.month-a.month)[0]),et=y(()=>{if(t.subtitle!==void 0&&t.subtitle!==null&&t.subtitle.length>0)return t.subtitle;if(he.value===0)return ce;if(he.value>1){const e=Vt.value,a=qt.value,s=q.value.monthsShort;return s[e.month-1]+(e.year!==a.year?" "+e.year+ce+s[a.month-1]+" ":e.month!==a.month?ce+s[a.month-1]:"")+" "+a.year}return j.value[0].year}),we=y(()=>{const e=[w.iconSet.datetime.arrowLeft,w.iconSet.datetime.arrowRight];return w.lang.rtl===!0?e.reverse():e}),tt=y(()=>t.firstDayOfWeek!==void 0?Number(t.firstDayOfWeek):q.value.firstDayOfWeek),Tt=y(()=>{const e=q.value.daysShort,a=tt.value;return a>0?e.slice(a,7).concat(e.slice(0,a)):e}),E=y(()=>{const e=f.value;return t.calendar!=="persian"?new Date(e.year,e.month,0).getDate():Ee(e.year,e.month)}),It=y(()=>typeof t.eventColor=="function"?t.eventColor:()=>t.eventColor),O=y(()=>{if(t.navigationMinYearMonth===void 0)return null;const e=t.navigationMinYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),H=y(()=>{if(t.navigationMaxYearMonth===void 0)return null;const e=t.navigationMaxYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),Fe=y(()=>{const e={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return O.value!==null&&O.value.year>=f.value.year&&(e.year.prev=!1,O.value.year===f.value.year&&O.value.month>=f.value.month&&(e.month.prev=!1)),H.value!==null&&H.value.year<=f.value.year&&(e.year.next=!1,H.value.year===f.value.year&&H.value.month<=f.value.month&&(e.month.next=!1)),e}),$e=y(()=>{const e={};return j.value.forEach(a=>{const s=W(a);e[s]===void 0&&(e[s]=[]),e[s].push(a.day)}),e}),at=y(()=>{const e={};return ie.value.forEach(a=>{const s=W(a.from),d=W(a.to);if(e[s]===void 0&&(e[s]=[]),e[s].push({from:a.from.day,to:s===d?a.to.day:void 0,range:a}),s<d){let u;const{year:S,month:c}=a.from,_=c<12?{year:S,month:c+1}:{year:S+1,month:1};for(;(u=W(_))<=d;)e[u]===void 0&&(e[u]=[]),e[u].push({from:void 0,to:u===d?a.to.day:void 0,range:a}),_.month++,_.month>12&&(_.year++,_.month=1)}}),e}),ve=y(()=>{if(M.value===null)return;const{init:e,initHash:a,final:s,finalHash:d}=M.value,[u,S]=a<=d?[e,s]:[s,e],c=W(u),_=W(S);if(c!==P.value&&_!==P.value)return;const D={};return c===P.value?(D.from=u.day,D.includeFrom=!0):D.from=1,_===P.value?(D.to=S.day,D.includeTo=!0):D.to=E.value,D}),P=y(()=>W(f.value)),Mt=y(()=>{const e={};if(t.options===void 0){for(let s=1;s<=E.value;s++)e[s]=!0;return e}const a=typeof t.options=="function"?t.options:s=>t.options.includes(s);for(let s=1;s<=E.value;s++){const d=P.value+"/"+le(s);e[s]=a(d)}return e}),Ot=y(()=>{const e={};if(t.events===void 0)for(let a=1;a<=E.value;a++)e[a]=!1;else{const a=typeof t.events=="function"?t.events:s=>t.events.includes(s);for(let s=1;s<=E.value;s++){const d=P.value+"/"+le(s);e[s]=a(d)===!0&&It.value(d)}}return e}),Ht=y(()=>{let e,a;const{year:s,month:d}=f.value;if(t.calendar!=="persian")e=new Date(s,d-1,1),a=new Date(s,d-1,0).getDate();else{const u=_t(s,d,1);e=new Date(u.gy,u.gm-1,u.gd);let S=d-1,c=s;S===0&&(S=12,c--),a=Ee(c,S)}return{days:e.getDay()-tt.value-1,endDay:a}}),ot=y(()=>{const e=[],{days:a,endDay:s}=Ht.value,d=a<0?a+7:a;if(d<6)for(let c=s-d;c<=s;c++)e.push({i:c,fill:!0});const u=e.length;for(let c=1;c<=E.value;c++){const _={i:c,event:Ot.value[c],classes:[]};Mt.value[c]===!0&&(_.in=!0,_.flat=!0),e.push(_)}if($e.value[P.value]!==void 0&&$e.value[P.value].forEach(c=>{const _=u+c-1;Object.assign(e[_],{selected:!0,unelevated:!0,flat:!1,color:te.value,textColor:re.value})}),at.value[P.value]!==void 0&&at.value[P.value].forEach(c=>{if(c.from!==void 0){const _=u+c.from-1,D=u+(c.to||E.value)-1;for(let Ue=_;Ue<=D;Ue++)Object.assign(e[Ue],{range:c.range,unelevated:!0,color:te.value,textColor:re.value});Object.assign(e[_],{rangeFrom:!0,flat:!1}),c.to!==void 0&&Object.assign(e[D],{rangeTo:!0,flat:!1})}else if(c.to!==void 0){const _=u+c.to-1;for(let D=u;D<=_;D++)Object.assign(e[D],{range:c.range,unelevated:!0,color:te.value,textColor:re.value});Object.assign(e[_],{flat:!1,rangeTo:!0})}else{const _=u+E.value-1;for(let D=u;D<=_;D++)Object.assign(e[D],{range:c.range,unelevated:!0,color:te.value,textColor:re.value})}}),ve.value!==void 0){const c=u+ve.value.from-1,_=u+ve.value.to-1;for(let D=c;D<=_;D++)e[D].color=te.value,e[D].editRange=!0;ve.value.includeFrom===!0&&(e[c].editRangeFrom=!0),ve.value.includeTo===!0&&(e[_].editRangeTo=!0)}f.value.year===U.value.year&&f.value.month===U.value.month&&(e[u+U.value.day-1].today=!0);const S=e.length%7;if(S>0){const c=7-S;for(let _=1;_<=c;_++)e.push({i:_,fill:!0})}return e.forEach(c=>{let _="q-date__calendar-item ";c.fill===!0?_+="q-date__calendar-item--fill":(_+=`q-date__calendar-item--${c.in===!0?"in":"out"}`,c.range!==void 0&&(_+=` q-date__range${c.rangeTo===!0?"-to":c.rangeFrom===!0?"-from":""}`),c.editRange===!0&&(_+=` q-date__edit-range${c.editRangeFrom===!0?"-from":""}${c.editRangeTo===!0?"-to":""}`),(c.range!==void 0||c.editRange===!0)&&(_+=` text-${c.color}`)),c.classes=_}),e}),Bt=y(()=>t.disable===!0?{"aria-disabled":"true"}:t.readonly===!0?{"aria-readonly":"true"}:{});F(()=>t.modelValue,e=>{if(ne===e)ne=0;else{const{year:a,month:s}=nt(z.value,q.value);ue(a,s)}}),F(R,()=>{me.value!==null&&C.$el.contains(document.activeElement)===!0&&me.value.focus()}),F(()=>f.value.year,e=>{m("navigation",{year:e,month:f.value.month})}),F(()=>f.value.month,e=>{m("navigation",{year:f.value.year,month:e})}),F(ee,e=>{ct(e,q.value,"mask"),z.value=e}),F(xt,e=>{ct(z.value,e,"locale"),q.value=e});function st(){const e=U.value,a=$e.value[W(e)];(a===void 0||a.includes(e.day)===!1)&&Ye(e),je(e.year,e.month)}function Rt(e){pt(e)===!0&&(R.value=e)}function Pt(e,a){["month","year"].includes(e)&&(e==="month"?it:Ae)(a===!0?-1:1)}function je(e,a){R.value="Calendar",ue(e,a)}function Ft(e,a){if(t.range===!1||!e){M.value=null;return}const s=Object.assign({...f.value},e),d=a!==void 0?Object.assign({...f.value},a):s;M.value={init:s,initHash:N(s),final:d,finalHash:N(d)},je(s.year,s.month)}function lt(){return t.calendar==="persian"?"YYYY/MM/DD":t.mask}function Qe(e,a,s){return oa(e,a,s,t.calendar,{hour:0,minute:0,second:0,millisecond:0})}function nt(e,a){const s=Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue?[t.modelValue]:[];if(s.length===0)return rt();const d=s[s.length-1],u=Qe(d.from!==void 0?d.from:d,e,a);return u.dateHash===null?rt():u}function rt(){let e,a;if(t.defaultYearMonth!==void 0){const s=t.defaultYearMonth.split("/");e=parseInt(s[0],10),a=parseInt(s[1],10)}else{const s=U.value!==void 0?U.value:K();e=s.year,a=s.month}return{year:e,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:e+"/"+le(a)+"/01"}}function it(e){let a=f.value.year,s=Number(f.value.month)+e;s===13?(s=1,a++):s===0&&(s=12,a--),ue(a,s),ke.value===!0&&xe("month")}function Ae(e){const a=Number(f.value.year)+e;ue(a,f.value.month),ke.value===!0&&xe("year")}function jt(e){ue(e,f.value.month),R.value=t.defaultView==="Years"?"Months":"Calendar",ke.value===!0&&xe("year")}function Qt(e){ue(f.value.year,e),R.value="Calendar",ke.value===!0&&xe("month")}function At(e,a){const s=$e.value[a];(s!==void 0&&s.includes(e.day)===!0?Le:Ye)(e)}function ae(e){return{year:e.year,month:e.month,day:e.day}}function ue(e,a){O.value!==null&&e<=O.value.year&&(e=O.value.year,a<O.value.month&&(a=O.value.month)),H.value!==null&&e>=H.value.year&&(e=H.value.year,a>H.value.month&&(a=H.value.month));const s=e+"/"+le(a)+"/01";s!==f.value.dateHash&&(Ce.value=f.value.dateHash<s==(w.lang.rtl!==!0)?"left":"right",e!==f.value.year&&(He.value=Ce.value),mt(()=>{Se.value=e-e%oe-(e<0?oe:0),Object.assign(f.value,{year:e,month:a,day:1,dateHash:s})}))}function ut(e,a,s){const d=e!==null&&e.length===1&&t.multiple===!1?e[0]:e;ne=d;const{reason:u,details:S}=dt(a,s);m("update:modelValue",d,u,S)}function xe(e){const a=j.value[0]!==void 0&&j.value[0].dateHash!==null?{...j.value[0]}:{...f.value};mt(()=>{a.year=f.value.year,a.month=f.value.month;const s=t.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Ee(a.year,a.month);a.day=Math.min(Math.max(1,a.day),s);const d=de(a);ne=d;const{details:u}=dt("",a);m("update:modelValue",d,e,u)})}function dt(e,a){return a.from!==void 0?{reason:`${e}-range`,details:{...ae(a.target),from:ae(a.from),to:ae(a.to)}}:{reason:`${e}-day`,details:ae(a)}}function de(e,a,s){return e.from!==void 0?{from:Pe.value(e.from,a,s),to:Pe.value(e.to,a,s)}:Pe.value(e,a,s)}function Ye(e){let a;if(t.multiple===!0)if(e.from!==void 0){const s=N(e.from),d=N(e.to),u=j.value.filter(c=>c.dateHash<s||c.dateHash>d),S=ie.value.filter(({from:c,to:_})=>_.dateHash<s||c.dateHash>d);a=u.concat(S).concat(e).map(c=>de(c))}else{const s=Re.value.slice();s.push(de(e)),a=s}else a=de(e);ut(a,"add",e)}function Le(e){if(t.noUnset===!0)return;let a=null;if(t.multiple===!0&&Array.isArray(t.modelValue)===!0){const s=de(e);e.from!==void 0?a=t.modelValue.filter(d=>d.from!==void 0?d.from!==s.from&&d.to!==s.to:!0):a=t.modelValue.filter(d=>d!==s),a.length===0&&(a=null)}ut(a,"remove",e)}function ct(e,a,s){const d=j.value.concat(ie.value).map(u=>de(u,e,a)).filter(u=>u.from!==void 0?u.from.dateHash!==null&&u.to.dateHash!==null:u.dateHash!==null);m("update:modelValue",(t.multiple===!0?d:d[0])||null,s)}function Yt(){if(t.minimal!==!0)return v("div",{class:"q-date__header "+k.value},[v("div",{class:"relative-position"},[v(fe,{name:"q-transition--fade"},()=>v("div",{key:"h-yr-"+et.value,class:"q-date__header-subtitle q-date__header-link "+(R.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:g.value,...i("vY",{onClick(){R.value="Years"},onKeyup(e){e.keyCode===13&&(R.value="Years")}})},[et.value]))]),v("div",{class:"q-date__header-title relative-position flex no-wrap"},[v("div",{class:"relative-position col"},[v(fe,{name:"q-transition--fade"},()=>v("div",{key:"h-sub"+Ze.value,class:"q-date__header-title-label q-date__header-link "+(R.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:g.value,...i("vC",{onClick(){R.value="Calendar"},onKeyup(e){e.keyCode===13&&(R.value="Calendar")}})},[Ze.value]))]),t.todayBtn===!0?v($,{class:"q-date__header-today self-start",icon:w.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:g.value,onClick:st}):null])])}function ze({label:e,type:a,key:s,dir:d,goTo:u,boundaries:S,cls:c}){return[v("div",{class:"row items-center q-date__arrow"},[v($,{round:!0,dense:!0,size:"sm",flat:!0,icon:we.value[0],tabindex:g.value,disable:S.prev===!1,...i("go-#"+a,{onClick(){u(-1)}})})]),v("div",{class:"relative-position overflow-hidden flex flex-center"+c},[v(fe,{name:"q-transition--jump-"+d},()=>v("div",{key:s},[v($,{flat:!0,dense:!0,noCaps:!0,label:e,tabindex:g.value,...i("view#"+a,{onClick:()=>{R.value=a}})})]))]),v("div",{class:"row items-center q-date__arrow"},[v($,{round:!0,dense:!0,size:"sm",flat:!0,icon:we.value[1],tabindex:g.value,disable:S.next===!1,...i("go+#"+a,{onClick(){u(1)}})})])]}const Lt={Calendar:()=>[v("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[v("div",{class:"q-date__navigation row items-center no-wrap"},ze({label:q.value.months[f.value.month-1],type:"Months",key:f.value.month,dir:Ce.value,goTo:it,boundaries:Fe.value.month,cls:" col"}).concat(ze({label:f.value.year,type:"Years",key:f.value.year,dir:He.value,goTo:Ae,boundaries:Fe.value.year,cls:""}))),v("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Tt.value.map(e=>v("div",{class:"q-date__calendar-item"},[v("div",e)]))),v("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[v(fe,{name:"q-transition--slide-"+Ce.value},()=>v("div",{key:P.value,class:"q-date__calendar-days fit"},ot.value.map(e=>v("div",{class:e.classes},[e.in===!0?v($,{class:e.today===!0?"q-date__today":"",dense:!0,flat:e.flat,unelevated:e.unelevated,color:e.color,textColor:e.textColor,label:e.i,tabindex:g.value,...i("day#"+e.i,{onClick:()=>{zt(e.i)},onMouseover:()=>{Ut(e.i)}})},e.event!==!1?()=>v("div",{class:"q-date__event bg-"+e.event}):null):v("div",""+e.i)]))))])])],Months(){const e=f.value.year===U.value.year,a=d=>O.value!==null&&f.value.year===O.value.year&&O.value.month>d||H.value!==null&&f.value.year===H.value.year&&H.value.month<d,s=q.value.monthsShort.map((d,u)=>{const S=f.value.month===u+1;return v("div",{class:"q-date__months-item flex flex-center"},[v($,{class:e===!0&&U.value.month===u+1?"q-date__today":null,flat:S!==!0,label:d,unelevated:S,color:S===!0?te.value:null,textColor:S===!0?re.value:null,tabindex:g.value,disable:a(u+1),...i("month#"+u,{onClick:()=>{Qt(u+1)}})})])});return t.yearsInMonthView===!0&&s.unshift(v("div",{class:"row no-wrap full-width"},[ze({label:f.value.year,type:"Years",key:f.value.year,dir:He.value,goTo:Ae,boundaries:Fe.value.year,cls:" col"})])),v("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},s)},Years(){const e=Se.value,a=e+oe,s=[],d=u=>O.value!==null&&O.value.year>u||H.value!==null&&H.value.year<u;for(let u=e;u<=a;u++){const S=f.value.year===u;s.push(v("div",{class:"q-date__years-item flex flex-center"},[v($,{key:"yr"+u,class:U.value.year===u?"q-date__today":null,flat:!S,label:u,dense:!0,unelevated:S,color:S===!0?te.value:null,textColor:S===!0?re.value:null,tabindex:g.value,disable:d(u),...i("yr#"+u,{onClick:()=>{jt(u)}})})]))}return v("div",{class:"q-date__view q-date__years flex flex-center"},[v("div",{class:"col-auto"},[v($,{round:!0,dense:!0,flat:!0,icon:we.value[0],tabindex:g.value,disable:d(e),...i("y-",{onClick:()=>{Se.value-=oe}})})]),v("div",{class:"q-date__years-content col self-stretch row items-center"},s),v("div",{class:"col-auto"},[v($,{round:!0,dense:!0,flat:!0,icon:we.value[1],tabindex:g.value,disable:d(a),...i("y+",{onClick:()=>{Se.value+=oe}})})])])}};function zt(e){const a={...f.value,day:e};if(t.range===!1){At(a,P.value);return}if(M.value===null){const s=ot.value.find(u=>u.fill!==!0&&u.i===e);if(t.noUnset!==!0&&s.range!==void 0){Le({target:a,from:s.range.from,to:s.range.to});return}if(s.selected===!0){Le(a);return}const d=N(a);M.value={init:a,initHash:d,final:a,finalHash:d},m("rangeStart",ae(a))}else{const s=M.value.initHash,d=N(a),u=s<=d?{from:M.value.init,to:a}:{from:a,to:M.value.init};M.value=null,Ye(s===d?a:{target:a,...u}),m("rangeEnd",{from:ae(u.from),to:ae(u.to)})}}function Ut(e){if(M.value!==null){const a={...f.value,day:e};Object.assign(M.value,{final:a,finalHash:N(a)})}}return Object.assign(C,{setToday:st,setView:Rt,offsetCalendar:Pt,setCalendarTo:je,setEditingRange:Ft}),()=>{const e=[v("div",{class:"q-date__content col relative-position"},[v(fe,{name:"q-transition--fade"},Lt[R.value])])],a=Ct(o.default);return a!==void 0&&e.push(v("div",{class:"q-date__actions"},a)),t.name!==void 0&&t.disable!==!0&&Oe(e,"push"),v("div",{class:Dt.value,...Bt.value},[Yt(),v("div",{ref:me,class:"q-date__main col column",tabindex:-1},e)])}}});const $o=G({name:"OTDComponent",setup(){const t=Z(),o=Date.now(),m=yt.formatDate(o,"MM/DD");return{reStore:t,otditems:h([]),promptOTDDate:h(!1),otddate:h(Date.now()),otdlabel:h(m),otdtype:h("selected")}},mounted(){this.init()},methods:{async init(){const t=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=t[this.otdtype],console.log(this.otditems)},async load(t){console.log("load",this.otditems[t].text),console.log("load",this.otditems[t]);const o=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("OTD load ",o),this.reStore.loadPageId(this.otditems[t].pages[0].pageid,o),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const t=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=t.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=yt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(t){console.log("otdOptionsCB",this.otdtype);const o=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=o[this.otdtype]}}}),xo=n("div",{class:"text-h6"},"Select Date",-1),Do={class:"q-gutter-y-sm column"},Vo={class:""};function qo(t,o,m,C,w,b){return x(),Y(J,null,[l(bt,{modelValue:t.promptOTDDate,"onUpdate:modelValue":o[2]||(o[2]=i=>t.promptOTDDate=i),persistent:""},{default:r(()=>[l(I,{style:{"min-width":"350px"}},{default:r(()=>[l(A,{align:"center"},{default:r(()=>[xo]),_:1}),l(wo,{modelValue:t.otddate,"onUpdate:modelValue":o[0]||(o[0]=i=>t.otddate=i),minimal:""},null,8,["modelValue"]),l(kt,{align:"center",class:"text-white"},{default:r(()=>[qe(l($,{flat:"",label:"Cancel"},null,512),[[Ie]]),qe(l($,{flat:"",label:"Update OTD date",onClick:o[1]||(o[1]=i=>this.updateOTDDate())},null,512),[[Ie]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(I,{flat:""},{default:r(()=>[l(A,null,{default:r(()=>[l(pe,{padding:"",class:"rounded-borders"},{default:r(()=>[l(ye,{"header-style":{border:"1px solid gray"},label:"On This Day"},{default:r(()=>[n("div",Do,[l(ge,{class:"bg-primary text-white rounded-borders q-my-md"},{default:r(()=>[l($,{dark:"",standout:"",onClick:o[3]||(o[3]=i=>t.promptOTDDate=!0)},{default:r(()=>[T(p(t.otdlabel),1)]),_:1}),l(We),l(ua,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":o[4]||(o[4]=i=>this.otdtype=i),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:o[5]||(o[5]=i=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),n("div",Vo,[(x(!0),Y(J,null,_e(t.otditems,(i,g)=>(x(),B(I,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:t.otditems,"onUpdate:modelValue":o[6]||(o[6]=k=>t.otditems=k),key:g,onClick:k=>this.load(g)},{default:r(()=>[T(p(g)+". "+p(i.year)+" "+p(i.text),1)]),_:2},1032,["modelValue","onClick"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}var To=X($o,[["render",qo]]);const Io=G({name:"CurrentAssignment",setup(){return{reStore:Z(),ck:h("-"),goal:h("-"),created:h("-"),id:h("-"),points:h("-"),pages:h([]),pgIdx:h(0),title:h("")}},mounted(){console.log("CurrentAssignment mounted"),F(this.reStore.courses,async(t,o)=>{try{console.log("CurrentAssignment.watcher");const m=t.ck,C=t.aid;this.id=C,this.ck=m,this.goal=this.reStore.courses[m].assignments[C].goal,this.created=this.reStore.courses[m].assignments[C].created,this.points=this.reStore.courses[m].assignments[C].points;try{const w=this.reStore.courses[m].assignments[C].pages.length;console.log("pages.length ",w)}catch{this.reStore.courses[m].assignments[C].pages=[]}this.pages=this.reStore.courses[m].assignments[C].pages,this.pgIdx=this.reStore.courses[m].assignments[C].pgIdx,this.title=this.reStore.courses[m].assignments[C].title}catch(m){console.log(m)}},{immediate:!0,deep:!0})},methods:{save(){console.log("save"),this.reStore.saveCurrentAssignment()},nextPage(){this.reStore.nextPage()}}}),Mo={class:"text-weight-bolder text-center q-pa-md"},Oo={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Ho={width:"100%"},Bo=n("td",null,"Title",-1),Ro={style:{width:"50%"}},Po=n("td",null,"Course-Key",-1),Fo={style:{width:"50%"}},jo=n("td",null,"Assgmnt Id",-1),Qo={style:{width:"50%"}},Ao=n("td",null,"Created",-1),Yo={style:{width:"50%"}},Lo=n("td",null,"Goal",-1),zo={style:{width:"50%"}},Uo=n("td",null,"Pages",-1);function Ko(t,o,m,C,w,b){return x(),B(I,{flat:""},{default:r(()=>[l(A,null,{default:r(()=>[n("div",Mo,[T(p(this.title)+" ",1),l(V,{name:"save",onClick:this.save,size:"sm"},null,8,["onClick"])]),n("div",Oo,[n("table",Ho,[n("tr",null,[Bo,n("td",Ro,p(this.title),1)]),n("tr",null,[Po,n("td",Fo,p(this.ck),1)]),n("tr",null,[jo,n("td",Qo,p(this.id),1)]),n("tr",null,[Ao,n("td",Yo,p(this.created),1)]),n("tr",null,[Lo,n("td",zo,p(this.goal),1)]),n("tr",null,[Uo,n("td",{style:{width:"50%",cursor:"pointer"},onClick:o[0]||(o[0]=i=>this.nextPage())},p(this.pgIdx+1)+" / "+p(this.pages.length),1)])])])]),_:1})]),_:1})}var Eo=X(Io,[["render",Ko]]);const No=G({name:"CurrentCourse",setup(){return{reStore:Z(),title:h(""),assignmentCount:h(0),courseKey:h(""),created:h(""),enrollmentCount:h(0),owner:h("")}},mounted(){console.log("CurrentCourse mounted"),F(this.reStore.courses,async(t,o)=>{try{if(this.reStore.courses.ck!==void 0){const m=this.reStore.courses.ck;console.log("CurrentCourse ",m),this.title=this.reStore.courses[m].title,this.courseKey=this.reStore.courses[m].courseKey,this.created=this.reStore.courses[m].created,this.assignmentCount=Object.keys(this.reStore.courses[m].assignments).length,this.enrollmentCount=Object.keys(this.reStore.courses[m].enrollment).length,this.owner=this.reStore.courses[m].owner}}catch(m){console.log(m)}},{immediate:!0,deep:!0})},methods:{dummy(){console.log("dummy")}}}),Wo={class:"text-weight-bolder text-center q-pa-md"},Jo={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Go={width:"100%"},Xo=n("td",null,"Title",-1),Zo={style:{width:"50%"}},es=n("td",null,"Course-Key",-1),ts={style:{width:"50%"}},as=n("td",null,"Created",-1),os={style:{width:"50%"}},ss=n("td",null,"Owner",-1),ls={style:{width:"50%"}},ns=n("td",null,"Assignments",-1),rs={style:{width:"50%"}},is=n("td",null,"Enrollment",-1),us={style:{width:"50%"}};function ds(t,o,m,C,w,b){return x(),B(I,{flat:""},{default:r(()=>[l(A,null,{default:r(()=>[n("div",Wo,p(this.title),1),n("div",Jo,[n("table",Go,[n("tr",null,[Xo,n("td",Zo,p(this.title),1)]),n("tr",null,[es,n("td",ts,p(this.courseKey),1)]),n("tr",null,[as,n("td",os,p(this.created),1)]),n("tr",null,[ss,n("td",ls,p(this.owner.slice(0,10)),1)]),n("tr",null,[ns,n("td",rs,p(this.assignmentCount),1)]),n("tr",null,[is,n("td",us,p(this.enrollmentCount),1)])])])]),_:1})]),_:1})}var cs=X(No,[["render",ds]]);const ms=G({name:"TeacherLayout",components:{CurrentCourse:cs,DocumentationComponent:da,SearchComponent:ka,ImagesComponent:mo,BookmarksComponent:yo,OTDComponent:To,CurrentAssignment:Eo,PreferencesComponent:ca,CurrentPage:lo},setup(){const t=h(!1),o=h(!1),m=Z(),C=m.userSnapshot.preferences,w=h(null),b=h(null);return{step:h(1),reStore:m,initialValues:h(C),scrollAreaRHS:w,scrollAreaLHS:b,leftDrawerOpen:t,rightDrawerOpen:o,toggleLeftDrawer(){t.value=!t.value},toggleRightDrawer(){o.value=!o.value}}},mounted(){ht.isActive||(ht.toggle(),Ke("primary","#333"),Ke("secondary",this.initialValues.secondaryColor),Ke("accent",this.initialValues.accentColor))},methods:{scrollTopRHS(){this.scrollAreaRHS.setScrollPosition("vertical",0)},scrollTopLHS(){this.scrollAreaLHS.setScrollPosition("vertical",0)}}}),hs={class:"dashboard-wrapper"},vs=n("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),fs=n("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1);function gs(t,o,m,C,w,b){const i=Q("router-link"),g=Q("router-view"),k=Q("DocumentationComponent"),L=Q("SearchComponent"),K=Q("ImagesComponent"),ne=Q("BookmarksComponent"),Me=Q("OTDComponent"),Oe=Q("CurrentCourse"),me=Q("CurrentAssignment"),z=Q("CurrentPage"),q=Q("PreferencesComponent");return x(),B(Xt,{view:"hHh LpR fFf"},{default:r(()=>[l(Jt,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:r(()=>[l(ge,null,{default:r(()=>[l($,{dense:"",flat:"",round:"",icon:"menu",onClick:t.toggleLeftDrawer},null,8,["onClick"]),l(Nt,null,{default:r(()=>[l(i,{to:"/teacher"},{default:r(()=>[l(V,{name:"home",color:"white"},{default:r(()=>[l(se,null,{default:r(()=>[T("Return to My Teacher Page")]),_:1})]),_:1})]),_:1})]),_:1}),this.reStore.authenticated?(x(),B($,{key:0,onClick:o[0]||(o[0]=ee=>this.reStore.router.push("/student")),icon:"switch_account"},{default:r(()=>[l(se,null,{default:r(()=>[T(" Switch between Teacher or Student role ")]),_:1})]),_:1})):Te("",!0),this.reStore.authenticated?(x(),B($,{key:1,icon:"logout",onClick:o[1]||(o[1]=ee=>this.reStore.logout())})):Te("",!0),l($,{dense:"",flat:"",round:"",icon:"menu",onClick:t.toggleRightDrawer},null,8,["onClick"])]),_:1}),l(Wt,{align:"left",class:"hidden"},{default:r(()=>[l(De,{to:"/logo",label:"Logo"}),l(De,{to:"/teaching",label:"Teaching"}),l(De,{to:"/taking",label:"Taking"}),l(De,{to:"/gradebook",label:"Gradebook"})]),_:1})]),_:1}),l(Gt,{class:"container-fluid"},{default:r(()=>[n("div",hs,[l(g)]),l(vt,{bordered:"","show-if-above":"",modelValue:t.leftDrawerOpen,"onUpdate:modelValue":o[2]||(o[2]=ee=>t.leftDrawerOpen=ee),side:"left"},{default:r(()=>[l(ge,{flat:"",class:"bg-primary text-white"},{default:r(()=>[l($,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Ve,{dark:"",vertical:"",inset:""}),l($,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Ve,{dark:"",vertical:"",inset:""}),l(We),l($,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopLHS},{default:r(()=>[l(se,null,{default:r(()=>[T("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),vs,l(ft,{visible:t.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaLHS"},{default:r(()=>[l(k),l(L),l(K),l(ne),l(Me)]),_:1},8,["visible"])]),_:1},8,["modelValue"]),l(vt,{bordered:"","show-if-above":"",modelValue:t.rightDrawerOpen,"onUpdate:modelValue":o[3]||(o[3]=ee=>t.rightDrawerOpen=ee),side:"right"},{default:r(()=>[l(ge,{flat:"",class:"bg-primary text-white"},{default:r(()=>[l($,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Ve,{dark:"",vertical:"",inset:""}),l($,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Ve,{dark:"",vertical:"",inset:""}),l(We),l($,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopRHS},{default:r(()=>[l(se,null,{default:r(()=>[T("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),fs,l(ft,{visible:t.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaRHS"},{default:r(()=>[l(Oe),l(me),l(z),l(q,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var Bs=X(ms,[["render",gs]]);export{Bs as default};
