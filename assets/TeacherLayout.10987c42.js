import{g as Ve,h as f,i as d,z as je,aM as Xt,B as Vt,r as g,D as L,l as Zt,p as Ie,ax as ea,j as st,x as $,q as ta,d as le,_ as se,o as T,au as K,a as l,w as r,Q as D,e as s,af as H,ag as S,aK as aa,c as z,av as ne,aL as Me,aJ as Se,f as U,al as oa,am as Te,G as St,P as bt,s as et}from"./index.4ee0ab97.js";import{Q as Z}from"./QTooltip.c8a95e6e.js";import{Q as qe,a as na,b as la,c as Ae,d as sa,e as kt,f as wt,g as ra,h as ia}from"./QLayout.be48c4d4.js";import{d as Fe,f as ze,c as ua,e as da,u as xt,g as ca}from"./use-dark.6e80a5bd.js";import{u as re,s as ha,a as $t,p as he,t as ma,c as Dt,f as va,g as ga,j as tt,_ as fa,d as Tt}from"./re-store.480cce46.js";import{a as A,Q as E,i as Mt,C as Qe,h as Ot,u as _a,b as ya,c as pa}from"./ClosePopup.d1ae977c.js";import{a as Ca,b as Sa,c as qt,d as at,e as ba,u as ka,f as wa,D as xa,P as $a}from"./DocumentationComponent.710c27d6.js";import{Q as Da}from"./QInput.2d1b8c0b.js";import{Q as Ta}from"./QToggle.e3ef3ce5.js";import{Q as rt}from"./QImg.26ff7344.js";import"./position-engine.3df5ece9.js";import"./selection.de6f0c0c.js";import"./use-portal.827a1d02.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";import"./use-key-composition.f65611df.js";import"./QCheckbox.a82da75c.js";const qa={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},ot={xs:2,sm:4,md:8,lg:16,xl:24};var Ce=Ve({name:"QSeparator",props:{...Fe,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const o=je(),v=ze(e,o.proxy.$q),b=f(()=>e.vertical===!0?"vertical":"horizontal"),w=f(()=>` q-separator--${b.value}`),p=f(()=>e.inset!==!1?`${w.value}-${qa[e.inset]}`:""),h=f(()=>`q-separator${w.value}${p.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(v.value===!0?" q-separator--dark":"")),c=f(()=>{const k={};if(e.size!==void 0&&(k[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const V=e.spaced===!0?`${ot.md}px`:e.spaced in ot?`${ot[e.spaced]}px`:e.spaced,P=e.vertical===!0?["Left","Right"]:["Top","Bottom"];k[`margin${P[0]}`]=k[`margin${P[1]}`]=V}return k});return()=>d("hr",{class:h.value,style:c.value,"aria-orientation":b.value})}});const Ia=d("div",{class:"q-space"});var lt=Ve({name:"QSpace",setup(){return()=>Ia}});const de=Xt({}),Va=Object.keys(Vt);var Oe=Ve({name:"QExpansionItem",props:{...Vt,...ua,...Fe,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...da,"click","afterShow","afterHide"],setup(e,{slots:o,emit:v}){const{proxy:{$q:b}}=je(),w=ze(e,b),p=g(e.modelValue!==null?e.modelValue:e.defaultOpened),h=g(null),c=xt(),{show:k,hide:V,toggle:P}=ca({showing:p});let R,W;const be=f(()=>`q-expansion-item q-item-type q-expansion-item--${p.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),ie=f(()=>{if(e.contentInsetLevel===void 0)return null;const _=b.lang.rtl===!0?"Right":"Left";return{["padding"+_]:e.contentInsetLevel*56+"px"}}),Q=f(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),q=f(()=>{const _={};return Va.forEach(B=>{_[B]=e[B]}),_}),G=f(()=>Q.value===!0||e.expandIconToggle!==!0),Ye=f(()=>e.expandedIcon!==void 0&&p.value===!0?e.expandedIcon:e.expandIcon||b.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),N=f(()=>e.disable!==!0&&(Q.value===!0||e.expandIconToggle===!0)),y=f(()=>({expanded:p.value===!0,detailsId:e.targetUid,toggle:P,show:k,hide:V})),O=f(()=>{const _=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:b.lang.label[p.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":p.value===!0?"true":"false","aria-controls":c,"aria-label":_}});L(()=>e.group,_=>{W!==void 0&&W(),_!==void 0&&M()});function He(_){Q.value!==!0&&P(_),v("click",_)}function me(_){_.keyCode===13&&ve(_,!0)}function ve(_,B){B!==!0&&h.value!==null&&h.value.focus(),P(_),ta(_)}function ke(){v("afterShow")}function ge(){v("afterHide")}function M(){R===void 0&&(R=xt()),p.value===!0&&(de[e.group]=R);const _=L(p,X=>{X===!0?de[e.group]=R:de[e.group]===R&&delete de[e.group]}),B=L(()=>de[e.group],(X,xe)=>{xe===R&&X!==void 0&&X!==R&&V()});W=()=>{_(),B(),de[e.group]===R&&delete de[e.group],W=void 0}}function Ue(){const _={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},B=[d($,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&p.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:Ye.value})];return N.value===!0&&(Object.assign(_,{tabindex:0,...O.value,onClick:ve,onKeyup:me}),B.unshift(d("div",{ref:h,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),d(at,_,()=>B)}function J(){let _;return o.header!==void 0?_=[].concat(o.header(y.value)):(_=[d(at,()=>[d(qt,{lines:e.labelLines},()=>e.label||""),e.caption?d(qt,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&_[e.switchToggleSide===!0?"push":"unshift"](d(at,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>d($,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&_[e.switchToggleSide===!0?"unshift":"push"](Ue()),_}function ee(){const _={ref:"item",style:e.headerStyle,class:e.headerClass,dark:w.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return G.value===!0&&(_.clickable=!0,_.onClick=He,Object.assign(_,Q.value===!0?q.value:O.value)),d(Sa,_,J)}function fe(){return Ie(d("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:ie.value,id:c},st(o.default)),[[ea,p.value]])}function we(){const _=[ee(),d(Ca,{duration:e.duration,onShow:ke,onHide:ge},fe)];return e.expandSeparator===!0&&_.push(d(Ce,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:w.value}),d(Ce,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:w.value})),_}return e.group!==void 0&&M(),Zt(()=>{W!==void 0&&W()}),()=>d("div",{class:be.value},[d("div",{class:"q-expansion-item__container relative-position"},we())])}}),Be=Ve({name:"QList",props:{...Fe,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:o}){const v=je(),b=ze(e,v.proxy.$q),w=f(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(b.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>d(e.tag,{class:w.value},st(o.default))}});const Ma=le({name:"SearchComponent",setup(){const e=re(),o=g("");return{reStore:e,searchTerms:o,searchSize:g(e.preferences.resLimit),searchResults:g([]),promptSearchSize:g(!1)}},mounted(){L(this.reStore.preferences,async(e,o)=>{console.log("watcher ",e,o),this.searchSize=e.resLimit})},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchResults.splice(e,1)},load(e){console.log(e),console.log(this.searchResults[e]);const o=this.reStore.preferences.langVoiceKey;console.log("calling loadPageId ",this.searchResults[e].pageid,o),this.reStore.loadPageId(this.searchResults[e].pageid,o),this.reStore.courses.trigger+=1},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("doSearch ",e),this.reStore.wiki.setLang(e.langName);const o=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",o.results.length),this.searchResults=o.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),Oa=s("div",{class:"text-h6"},"Search Results Size",-1),Ba={class:"q-gutter-y-sm column"},Ha={key:0},Pa={class:"row cardheader ptr justify-between"},Ra=["onClick"],La={class:"history-remove"};function Aa(e,o,v,b,w,p){return T(),K(ne,null,[l(Ot,{modelValue:e.promptSearchSize,"onUpdate:modelValue":o[2]||(o[2]=h=>e.promptSearchSize=h),persistent:""},{default:r(()=>[l(A,{style:{"min-width":"350px"}},{default:r(()=>[l(E,{align:"center"},{default:r(()=>[Oa]),_:1}),l(E,{class:"q-pt-none",align:"center"},{default:r(()=>[l(ba,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":o[0]||(o[0]=h=>e.searchSize=h)},null,8,["modelValue"])]),_:1}),l(Mt,{align:"center",class:"text-white"},{default:r(()=>[Ie(l(D,{flat:"",label:"Cancel"},null,512),[[Qe]]),Ie(l(D,{flat:"",label:"Update results size",onClick:o[1]||(o[1]=h=>this.updateSearchSize())},null,512),[[Qe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(A,{flat:""},{default:r(()=>[l(E,null,{default:r(()=>[l(Be,{padding:"",class:"rounded-borders"},{default:r(()=>[l(Oe,{"header-style":{border:"1px solid gray"},label:"Search & Results"},{default:r(()=>[s("div",Ba,[l(qe,{class:"bg-primary text-white rounded-borders q-my-md"},{default:r(()=>[l(D,{dark:"",standout:"",onClick:o[3]||(o[3]=h=>e.promptSearchSize=!0)},{default:r(()=>[H(S(this.searchResults.length)+" ",1),l(Z,null,{default:r(()=>[H("Change results limit ("+S(this.searchSize)+")",1)]),_:1})]),_:1}),l(Da,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":o[6]||(o[6]=h=>e.searchTerms=h),"input-class":"text-right",class:"q-ml-md",onKeyup:[o[7]||(o[7]=h=>this.update()),o[8]||(o[8]=aa(h=>this.doSearch(),["enter"]))]},{append:r(()=>[e.searchTerms===""?(T(),z($,{key:0,name:"search",onClick:o[4]||(o[4]=h=>this.doSearch())})):(T(),z($,{key:1,name:"clear",class:"cursor-pointer",onClick:o[5]||(o[5]=h=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(T(),K("div",Ha,[(T(!0),K(ne,null,Me(this.searchResults,(h,c)=>(T(),z(A,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":o[9]||(o[9]=k=>this.searchResults=k),key:c},{default:r(()=>[s("div",Pa,[s("span",{class:"history-title col-grow",onClick:k=>this.load(c)},S(c)+". "+S(h.title.slice(0,25)),9,Ra),s("span",La,[l($,{class:"primary",size:e.xl,color:e.primary,name:"close",onClick:k=>this.remove(c)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):Se("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Qa=se(Ma,[["render",Aa]]);const ja=le({name:"CurrentPage",props:{},setup(e){return{reStore:re(),ck:g("-"),aid:g("-"),pageTitle:g("-"),langVoiceKey:g(),imgIdx:g(0),imgs:g([]),imgTot:g(0),imgFit:g("-"),guideWords:g("-"),mapCoords:g("-"),pageid:g("-"),pctReplace:g(),canonicalUrl:g(),props:e,isCustom:g(!1)}},mounted(){console.log(this.props),L(this.reStore.courses,async(e,o)=>{try{console.log("CurrentPage watcher",this.reStore.courses);const v=this.reStore.courses.ck,b=this.reStore.courses.aid,w=this.reStore.courses.pgIdx,p=this.reStore.page;p&&(console.log("CurrentPage ",p),this.pageTitle=p.pageTitle,this.imgIdx=p.imgIdx,this.imgs=p.imgs,this.imgTot=p.imgs.length,this.imgFit=p.imgFit,this.guideWords=p.guideWords,this.mapCoords=p.mapCoords,this.pageid=p.pageid,this.langVoiceKey=p.langVoiceKey,this.pctReplace=p.pctReplace,this.canonicalUrl=p.canonicalUrl,this.isCustom=g(this.reStore.page.isCustom)),this.aid=b,this.ck=v}catch(v){console.log(v)}},{immediate:!0,deep:!0})},methods:{speak(){console.log("CurrentPage.speak",this.reStore),this.reStore.speak()},cycleFitMode(){const e=["scale-down","cover"];let o=e.indexOf(this.imgFit);o+=1,o>e.length-1&&(o=0),this.imgFit=e[o],this.reStore.page.imgFit=this.imgFit,console.log("fit: ",this.imgFit),this.reStore.courses.trigger+=1},nextImg(){this.imgIdx=this.imgIdx+1>this.imgs.length-1?0:this.imgIdx+1,this.reStore.page.imgIdx=this.imgIdx,this.reStore.courses.imgIdx=this.imgIdx,this.reStore.courses.trigger+=1},imgCB(e,o){console.log(e,o),this.reStore.page.imgIdx=e,this.reStore.courses.imgIdx=e,this.reStore.courses.trigger+=1},loadURL(e){console.log("loadURL ",e),window.open(e,"_blank")},mapCB(){const e="https://maps.google.com/?ll="+this.mapCoords.split(",")[0]+","+this.mapCoords.split(",")[1];window.open(e,"_blank")},saveImage(e,o){console.log("saveImage: ",e,o),this.reStore.saveImage(e,o)},saveCurrentImage(){const e=this.imgs[this.imgIdx];console.log("saveCurrentImage: ",e),this.reStore.saveImage(this.imgIdx,e)},remove(e,o){console.log("remove: ",e,o),this.imgs.splice(e,1),this.reStore.page.imgs.splice(e,1)},toggleText(){ha("#slideTextDiv").classed("hidden")?$t("#slideTextDiv").classed("hidden",!1):$t("#slideTextDiv").classed("hidden",!0)},addBookmark(){console.log("addBookmark"),this.reStore.saveBookmark()},resetPage(){this.reStore.newPage()},newPage(){console.log("CurrentPage newPageCB "),this.reStore.newPage()},appendPage(){this.reStore.appendPage()},updatePage(){this.reStore.updatePage()},updateType(e,o){this.reStore.page.isCustom=this.isCustom}}}),Fa={class:"text-weight-bolder text-center q-pa-md text-white"},za=s("br",null,null,-1),Ya={style:{border:"1px solid gray","border-radius":"5px"}},Ua={width:"100%"},Ka={style:{width:"50%","text-align":"center"}},Na={style:{"text-align":"center"}},Ea={style:{"text-align":"center"}},Wa=s("td",{style:{"text-align":"center"}},"Speak Text",-1),Ga={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Ja={width:"100%"},Xa=s("td",null,"Course-Key",-1),Za={style:{width:"50%"}},eo={class:"ptr float-left"},to=s("td",null,"Assgmnt Id",-1),ao={style:{width:"50%"}},oo={class:"ptr float-left"},no=s("td",null,"WP Page Id",-1),lo={style:{width:"50%"}},so=s("td",null,"Language",-1),ro={style:{width:"50%"}},io={class:"float-left"},uo=s("td",null,"Images",-1),co={style:{width:"50%"}},ho=s("td",null,"Image Fit",-1),mo={class:"align-left"},vo=s("td",null,"Guide Words",-1),go={style:{width:"50%"}},fo=s("td",null,"Percent Replace",-1),_o={class:"float-left"},yo=s("td",null,"Map Coords",-1),po={class:"float-left"},Co=s("td",null,"Toggle Text",-1),So={key:0},bo={class:"row cardheader justify-between"},ko={class:"history-remove"},wo={key:0},xo={class:"history-remove ptr"};function $o(e,o,v,b,w,p){const h=U("router-link");return T(),K(ne,null,[l(A,{flat:""},{default:r(()=>[l(E,null,{default:r(()=>[s("div",Fa,[l(h,{to:"/teacher/editor"},{default:r(()=>[H(S(this.pageTitle.slice(0,20)),1)]),_:1}),za,l($,{class:"on-right",name:"replay",onClick:this.resetPage,size:"sm"},null,8,["onClick"]),l($,{class:"on-right",name:"add_circle",onClick:this.newPage,size:"sm"},null,8,["onClick"]),l($,{class:"on-right",name:"publish",onClick:this.updatePage,size:"sm"},{default:r(()=>[l(Z,null,{default:r(()=>[H("Update current page")]),_:1})]),_:1},8,["onClick"]),l($,{class:"on-right",name:"publish",onClick:this.appendPage,size:"sm"},{default:r(()=>[l(Z,null,{default:r(()=>[H("Push as new page")]),_:1})]),_:1},8,["onClick"])]),s("div",Ya,[s("table",Ua,[s("tr",null,[s("td",Ka,[l(Ta,{modelValue:e.isCustom,"onUpdate:modelValue":[o[0]||(o[0]=c=>e.isCustom=c),this.updateType],color:"accent"},null,8,["modelValue","onUpdate:modelValue"])]),s("td",Na,[l(D,{round:"",class:"q-pa-md",icon:"volume_up",color:"secondary",onClick:o[1]||(o[1]=c=>this.speak())})])]),s("tr",null,[s("td",Ea,S(e.isCustom===!0?"Custom":"Random"),1),Wa])])]),s("div",Ga,[s("table",Ja,[s("tr",null,[Xa,s("td",Za,[s("a",eo,S(this.ck),1)])]),s("tr",null,[to,s("td",ao,[s("a",oo,S(this.aid),1)])]),s("tr",null,[no,s("td",lo,[s("a",{class:"ptr float-left",onClick:o[2]||(o[2]=c=>this.loadURL(this.canonicalUrl))},S(this.pageid),1),l($,{name:"bookmark",onClick:this.addBookmark,class:"float-right"},null,8,["onClick"])])]),s("tr",null,[so,s("td",ro,[s("span",io,S(this.langVoiceKey),1),l($,{class:"float-right",name:"translate"})])]),s("tr",null,[uo,s("td",co,[s("span",{onClick:o[3]||(o[3]=(...c)=>this.nextImg&&this.nextImg(...c)),class:"ptr float-left"},S(this.imgIdx+1)+" / "+S(this.imgTot),1),s("span",{class:"float-right ptr",onClick:o[4]||(o[4]=(...c)=>this.saveCurrentImage&&this.saveCurrentImage(...c))},[l($,{name:"bookmark"})])])]),s("tr",{class:"ptr",onClick:o[5]||(o[5]=(...c)=>this.cycleFitMode&&this.cycleFitMode(...c))},[ho,s("td",null,[s("span",mo,S(this.imgFit),1),l($,{class:"float-right",name:"fit_screen"})])]),s("tr",null,[vo,s("td",go,[H(S(this.guideWords.replaceAll(",",", "))+" ",1),l($,{class:"float-right",name:"tune"})])]),s("tr",null,[fo,s("td",null,[s("span",_o,S(this.pctReplace)+" %",1),l($,{class:"float-right",name:"tune"})])]),s("tr",null,[yo,s("td",{onClick:o[6]||(o[6]=(...c)=>this.mapCB&&this.mapCB(...c)),class:"ptr"},[s("span",po,S(this.mapCoords),1),l($,{class:"float-right",name:"place"})])]),s("tr",null,[Co,s("td",{onClick:o[7]||(o[7]=(...c)=>this.toggleText&&this.toggleText(...c)),class:"ptr"},[l($,{class:"float-right",name:"article"})])])])])]),_:1})]),_:1}),l(A,{flat:""},{default:r(()=>[l(E,null,{default:r(()=>[l(Be,{padding:"",class:"rounded-borders"},{default:r(()=>[l(Oe,{"header-style":{border:"1px solid gray"},label:"Page Images"},{default:r(()=>[this.imgs.length?(T(),K("div",So,[(T(!0),K(ne,null,Me(this.imgs,(c,k)=>(T(),z(A,{bordered:"",class:"q-ma-sm",flat:"",modelValue:this.imgs,"onUpdate:modelValue":o[8]||(o[8]=V=>this.imgs=V),key:k},{default:r(()=>[s("div",bo,[s("span",ko,[l($,{name:"bookmark",onClick:V=>this.saveImage(k,c)},null,8,["onClick"]),l($,{name:"article",onClick:this.toggleText},{default:r(()=>[l(Z,null,{default:r(()=>[H("Convenience button to toggle current text ")]),_:1})]),_:1},8,["onClick"]),l($,{name:"fit_screen",onClick:this.cycleFitMode},{default:r(()=>[l(Z,null,{default:r(()=>[H("Convenience button to toggle current image-fit mode ")]),_:1})]),_:1},8,["onClick"])]),c.cap?(T(),K("span",wo,S(c.cap.slice(0,25)),1)):Se("",!0),s("span",xo,[l($,{name:"close",onClick:V=>this.remove(k,c)},null,8,["onClick"])])]),l(rt,{class:"cardimage",onClick:V=>this.imgCB(k,c),src:c.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])):Se("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Do=se(ja,[["render",$o]]);const To=le({name:"ImagesComponent",setup(){return{reStore:re()}},mounted(){L(this.reStore.userSnapshot.images,async(e,o)=>{console.log("watcher ",e,o)})},methods:{imgCB(e,o){this.reStore.router.push("/teacher/editor"),console.log(e,o),this.reStore.loadImgId(e)},remove(e,o){console.log(e,o),this.reStore.removeImage(e)}}}),qo={class:"row cardheader justify-between"},Io={class:"history-remove hidden"},Vo={key:0},Mo={class:"history-remove ptr"};function Oo(e,o,v,b,w,p){return T(),z(A,{flat:""},{default:r(()=>[l(E,null,{default:r(()=>[l(Be,{padding:"",class:"rounded-borders"},{default:r(()=>[l(Oe,{"header-style":{border:"1px solid gray"},label:"My Images"},{default:r(()=>[s("div",null,[(T(!0),K(ne,null,Me(this.reStore.userSnapshot.images,(h,c)=>(T(),z(A,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":o[0]||(o[0]=k=>this.reStore.userSnapshot.images=k),key:c},{default:r(()=>[s("div",qo,[s("span",Io,[l($)]),h.desc?(T(),K("span",Vo,S(h.desc.slice(0,25)),1)):Se("",!0),s("span",Mo,[l($,{name:"close",onClick:k=>this.remove(c,h)},null,8,["onClick"])])]),l(rt,{class:"cardimage",onClick:k=>this.imgCB(c,h),src:h.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var Bo=se(To,[["render",Oo]]);const Ho=le({name:"BookmarksComponent",setup(){return{reStore:re()}},mounted(){L(this.reStore.userSnapshot.bookmarks,async(e,o)=>{console.log("watcher ",e,o)})},methods:{imgCB(e,o){this.reStore.page.imgs=JSON.parse(JSON.stringify(o.imgs)),this.reStore.router.push("/teacher/editor")},remove(e,o){console.log(e,o),this.reStore.removeBookmark(e)}}}),Po={class:"row cardheader justify-between"},Ro={class:"history-remove hidden"},Lo={class:"history-remove ptr"};function Ao(e,o,v,b,w,p){return T(),z(A,{flat:""},{default:r(()=>[l(E,null,{default:r(()=>[l(Be,{padding:"",class:"rounded-borders"},{default:r(()=>[l(Oe,{"header-style":{border:"1px solid gray"},label:"My bookmarks"},{default:r(()=>[s("div",null,[(T(!0),K(ne,null,Me(this.reStore.userSnapshot.bookmarks,(h,c)=>(T(),z(A,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":o[0]||(o[0]=k=>this.reStore.userSnapshot.bookmarks=k),key:c},{default:r(()=>[s("div",Po,[s("span",Ro,[l($)]),H(" "+S(h.pageTitle.slice(0,25))+" ",1),s("span",Lo,[l($,{name:"close",onClick:k=>this.remove(c,h)},null,8,["onClick"])])]),l(rt,{class:"cardimage",onClick:k=>this.imgCB(c,h),src:h.imgs[0].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var Qo=se(Ho,[["render",Ao]]);const jo=["gregorian","persian"],Fo={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>jo.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},zo=["update:modelValue"];function ae(e){return e.year+"/"+he(e.month)+"/"+he(e.day)}function Yo(e,o){const v=f(()=>e.disable!==!0&&e.readonly!==!0),b=f(()=>e.editable===!0?0:-1),w=f(()=>{const c=[];return e.color!==void 0&&c.push(`bg-${e.color}`),e.textColor!==void 0&&c.push(`text-${e.textColor}`),c.join(" ")});function p(){return e.locale!==void 0?{...o.lang.date,...e.locale}:o.lang.date}function h(c){const k=new Date,V=c===!0?null:0;if(e.calendar==="persian"){const P=ma(k);return{year:P.jy,month:P.jm,day:P.jd}}return{year:k.getFullYear(),month:k.getMonth()+1,day:k.getDate(),hour:V,minute:V,second:V,millisecond:V}}return{editable:v,tabindex:b,headerClass:w,getLocale:p,getCurrentDate:h}}const ce=20,Uo=["Calendar","Years","Months"],It=e=>Uo.includes(e),nt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),pe=" \u2014 ";function oe(e){return e.year+"/"+he(e.month)}var Ko=Ve({name:"QDate",props:{...Fo,..._a,...Fe,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:nt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:nt},navigationMaxYearMonth:{type:String,validator:nt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:It}},emits:[...zo,"rangeStart","rangeEnd","navigation"],setup(e,{slots:o,emit:v}){const{proxy:b}=je(),{$q:w}=b,p=ze(e,w),{getCache:h}=ka(),{tabindex:c,headerClass:k,getLocale:V,getCurrentDate:P}=Yo(e,w);let R;const W=ya(e),be=pa(W),ie=g(null),Q=g(vt()),q=g(V()),G=f(()=>vt()),Ye=f(()=>V()),N=f(()=>P()),y=g(gt(Q.value,q.value)),O=g(e.defaultView),He=w.lang.rtl===!0?"right":"left",me=g(He.value),ve=g(He.value),ke=y.value.year,ge=g(ke-ke%ce-(ke<0?ce:0)),M=g(null),Ue=f(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(p.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),J=f(()=>e.color||"primary"),ee=f(()=>e.textColor||"white"),fe=f(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),we=f(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),_=f(()=>we.value.filter(t=>typeof t=="string").map(t=>Ee(t,Q.value,q.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),B=f(()=>{const t=a=>Ee(a,Q.value,q.value);return we.value.filter(a=>oa(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),X=f(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=Dt(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),xe=f(()=>e.calendar==="persian"?ae:(t,a,n)=>va(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?Q.value:a,n===void 0?q.value:n,t.year,t.timezoneOffset)),$e=f(()=>_.value.length+B.value.reduce((t,a)=>t+1+ga(X.value(a.to),X.value(a.from)),0)),it=f(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(M.value!==null){const n=M.value.init,u=X.value(n);return q.value.daysShort[u.getDay()]+", "+q.value.monthsShort[n.month-1]+" "+n.day+pe+"?"}if($e.value===0)return pe;if($e.value>1)return`${$e.value} ${q.value.pluralDay}`;const t=_.value[0],a=X.value(t);return isNaN(a.valueOf())===!0?pe:q.value.headerTitle!==void 0?q.value.headerTitle(a,t):q.value.daysShort[a.getDay()]+", "+q.value.monthsShort[t.month-1]+" "+t.day}),Bt=f(()=>_.value.concat(B.value.map(a=>a.from)).sort((a,n)=>a.year-n.year||a.month-n.month)[0]),Ht=f(()=>_.value.concat(B.value.map(a=>a.to)).sort((a,n)=>n.year-a.year||n.month-a.month)[0]),ut=f(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if($e.value===0)return pe;if($e.value>1){const t=Bt.value,a=Ht.value,n=q.value.monthsShort;return n[t.month-1]+(t.year!==a.year?" "+t.year+pe+n[a.month-1]+" ":t.month!==a.month?pe+n[a.month-1]:"")+" "+a.year}return _.value[0].year}),Pe=f(()=>{const t=[w.iconSet.datetime.arrowLeft,w.iconSet.datetime.arrowRight];return w.lang.rtl===!0?t.reverse():t}),dt=f(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):q.value.firstDayOfWeek),Pt=f(()=>{const t=q.value.daysShort,a=dt.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),te=f(()=>{const t=y.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():tt(t.year,t.month)}),Rt=f(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),j=f(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),F=f(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Ke=f(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return j.value!==null&&j.value.year>=y.value.year&&(t.year.prev=!1,j.value.year===y.value.year&&j.value.month>=y.value.month&&(t.month.prev=!1)),F.value!==null&&F.value.year<=y.value.year&&(t.year.next=!1,F.value.year===y.value.year&&F.value.month<=y.value.month&&(t.month.next=!1)),t}),Re=f(()=>{const t={};return _.value.forEach(a=>{const n=oe(a);t[n]===void 0&&(t[n]=[]),t[n].push(a.day)}),t}),ct=f(()=>{const t={};return B.value.forEach(a=>{const n=oe(a.from),u=oe(a.to);if(t[n]===void 0&&(t[n]=[]),t[n].push({from:a.from.day,to:n===u?a.to.day:void 0,range:a}),n<u){let i;const{year:x,month:m}=a.from,C=m<12?{year:x,month:m+1}:{year:x+1,month:1};for(;(i=oe(C))<=u;)t[i]===void 0&&(t[i]=[]),t[i].push({from:void 0,to:i===u?a.to.day:void 0,range:a}),C.month++,C.month>12&&(C.year++,C.month=1)}}),t}),De=f(()=>{if(M.value===null)return;const{init:t,initHash:a,final:n,finalHash:u}=M.value,[i,x]=a<=u?[t,n]:[n,t],m=oe(i),C=oe(x);if(m!==Y.value&&C!==Y.value)return;const I={};return m===Y.value?(I.from=i.day,I.includeFrom=!0):I.from=1,C===Y.value?(I.to=x.day,I.includeTo=!0):I.to=te.value,I}),Y=f(()=>oe(y.value)),Lt=f(()=>{const t={};if(e.options===void 0){for(let n=1;n<=te.value;n++)t[n]=!0;return t}const a=typeof e.options=="function"?e.options:n=>e.options.includes(n);for(let n=1;n<=te.value;n++){const u=Y.value+"/"+he(n);t[n]=a(u)}return t}),At=f(()=>{const t={};if(e.events===void 0)for(let a=1;a<=te.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:n=>e.events.includes(n);for(let n=1;n<=te.value;n++){const u=Y.value+"/"+he(n);t[n]=a(u)===!0&&Rt.value(u)}}return t}),Qt=f(()=>{let t,a;const{year:n,month:u}=y.value;if(e.calendar!=="persian")t=new Date(n,u-1,1),a=new Date(n,u-1,0).getDate();else{const i=Dt(n,u,1);t=new Date(i.gy,i.gm-1,i.gd);let x=u-1,m=n;x===0&&(x=12,m--),a=tt(m,x)}return{days:t.getDay()-dt.value-1,endDay:a}}),ht=f(()=>{const t=[],{days:a,endDay:n}=Qt.value,u=a<0?a+7:a;if(u<6)for(let m=n-u;m<=n;m++)t.push({i:m,fill:!0});const i=t.length;for(let m=1;m<=te.value;m++){const C={i:m,event:At.value[m],classes:[]};Lt.value[m]===!0&&(C.in=!0,C.flat=!0),t.push(C)}if(Re.value[Y.value]!==void 0&&Re.value[Y.value].forEach(m=>{const C=i+m-1;Object.assign(t[C],{selected:!0,unelevated:!0,flat:!1,color:J.value,textColor:ee.value})}),ct.value[Y.value]!==void 0&&ct.value[Y.value].forEach(m=>{if(m.from!==void 0){const C=i+m.from-1,I=i+(m.to||te.value)-1;for(let Ze=C;Ze<=I;Ze++)Object.assign(t[Ze],{range:m.range,unelevated:!0,color:J.value,textColor:ee.value});Object.assign(t[C],{rangeFrom:!0,flat:!1}),m.to!==void 0&&Object.assign(t[I],{rangeTo:!0,flat:!1})}else if(m.to!==void 0){const C=i+m.to-1;for(let I=i;I<=C;I++)Object.assign(t[I],{range:m.range,unelevated:!0,color:J.value,textColor:ee.value});Object.assign(t[C],{flat:!1,rangeTo:!0})}else{const C=i+te.value-1;for(let I=i;I<=C;I++)Object.assign(t[I],{range:m.range,unelevated:!0,color:J.value,textColor:ee.value})}}),De.value!==void 0){const m=i+De.value.from-1,C=i+De.value.to-1;for(let I=m;I<=C;I++)t[I].color=J.value,t[I].editRange=!0;De.value.includeFrom===!0&&(t[m].editRangeFrom=!0),De.value.includeTo===!0&&(t[C].editRangeTo=!0)}y.value.year===N.value.year&&y.value.month===N.value.month&&(t[i+N.value.day-1].today=!0);const x=t.length%7;if(x>0){const m=7-x;for(let C=1;C<=m;C++)t.push({i:C,fill:!0})}return t.forEach(m=>{let C="q-date__calendar-item ";m.fill===!0?C+="q-date__calendar-item--fill":(C+=`q-date__calendar-item--${m.in===!0?"in":"out"}`,m.range!==void 0&&(C+=` q-date__range${m.rangeTo===!0?"-to":m.rangeFrom===!0?"-from":""}`),m.editRange===!0&&(C+=` q-date__edit-range${m.editRangeFrom===!0?"-from":""}${m.editRangeTo===!0?"-to":""}`),(m.range!==void 0||m.editRange===!0)&&(C+=` text-${m.color}`)),m.classes=C}),t}),jt=f(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});L(()=>e.modelValue,t=>{if(R===t)R=0;else{const{year:a,month:n}=gt(Q.value,q.value);_e(a,n)}}),L(O,()=>{ie.value!==null&&b.$el.contains(document.activeElement)===!0&&ie.value.focus()}),L(()=>y.value.year,t=>{v("navigation",{year:t,month:y.value.month})}),L(()=>y.value.month,t=>{v("navigation",{year:y.value.year,month:t})}),L(G,t=>{Ct(t,q.value,"mask"),Q.value=t}),L(Ye,t=>{Ct(Q.value,t,"locale"),q.value=t});function mt(){const t=N.value,a=Re.value[oe(t)];(a===void 0||a.includes(t.day)===!1)&&Ge(t),Ne(t.year,t.month)}function Ft(t){It(t)===!0&&(O.value=t)}function zt(t,a){["month","year"].includes(t)&&(t==="month"?_t:We)(a===!0?-1:1)}function Ne(t,a){O.value="Calendar",_e(t,a)}function Yt(t,a){if(e.range===!1||!t){M.value=null;return}const n=Object.assign({...y.value},t),u=a!==void 0?Object.assign({...y.value},a):n;M.value={init:n,initHash:ae(n),final:u,finalHash:ae(u)},Ne(n.year,n.month)}function vt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ee(t,a,n){return fa(t,a,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function gt(t,a){const n=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(n.length===0)return ft();const u=n[n.length-1],i=Ee(u.from!==void 0?u.from:u,t,a);return i.dateHash===null?ft():i}function ft(){let t,a;if(e.defaultYearMonth!==void 0){const n=e.defaultYearMonth.split("/");t=parseInt(n[0],10),a=parseInt(n[1],10)}else{const n=N.value!==void 0?N.value:P();t=n.year,a=n.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+he(a)+"/01"}}function _t(t){let a=y.value.year,n=Number(y.value.month)+t;n===13?(n=1,a++):n===0&&(n=12,a--),_e(a,n),fe.value===!0&&Le("month")}function We(t){const a=Number(y.value.year)+t;_e(a,y.value.month),fe.value===!0&&Le("year")}function Ut(t){_e(t,y.value.month),O.value=e.defaultView==="Years"?"Months":"Calendar",fe.value===!0&&Le("year")}function Kt(t){_e(y.value.year,t),O.value="Calendar",fe.value===!0&&Le("month")}function Nt(t,a){const n=Re.value[a];(n!==void 0&&n.includes(t.day)===!0?Je:Ge)(t)}function ue(t){return{year:t.year,month:t.month,day:t.day}}function _e(t,a){j.value!==null&&t<=j.value.year&&(t=j.value.year,a<j.value.month&&(a=j.value.month)),F.value!==null&&t>=F.value.year&&(t=F.value.year,a>F.value.month&&(a=F.value.month));const n=t+"/"+he(a)+"/01";n!==y.value.dateHash&&(me.value=y.value.dateHash<n==(w.lang.rtl!==!0)?"left":"right",t!==y.value.year&&(ve.value=me.value),St(()=>{ge.value=t-t%ce-(t<0?ce:0),Object.assign(y.value,{year:t,month:a,day:1,dateHash:n})}))}function yt(t,a,n){const u=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;R=u;const{reason:i,details:x}=pt(a,n);v("update:modelValue",u,i,x)}function Le(t){const a=_.value[0]!==void 0&&_.value[0].dateHash!==null?{..._.value[0]}:{...y.value};St(()=>{a.year=y.value.year,a.month=y.value.month;const n=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():tt(a.year,a.month);a.day=Math.min(Math.max(1,a.day),n);const u=ye(a);R=u;const{details:i}=pt("",a);v("update:modelValue",u,t,i)})}function pt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...ue(a.target),from:ue(a.from),to:ue(a.to)}}:{reason:`${t}-day`,details:ue(a)}}function ye(t,a,n){return t.from!==void 0?{from:xe.value(t.from,a,n),to:xe.value(t.to,a,n)}:xe.value(t,a,n)}function Ge(t){let a;if(e.multiple===!0)if(t.from!==void 0){const n=ae(t.from),u=ae(t.to),i=_.value.filter(m=>m.dateHash<n||m.dateHash>u),x=B.value.filter(({from:m,to:C})=>C.dateHash<n||m.dateHash>u);a=i.concat(x).concat(t).map(m=>ye(m))}else{const n=we.value.slice();n.push(ye(t)),a=n}else a=ye(t);yt(a,"add",t)}function Je(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const n=ye(t);t.from!==void 0?a=e.modelValue.filter(u=>u.from!==void 0?u.from!==n.from&&u.to!==n.to:!0):a=e.modelValue.filter(u=>u!==n),a.length===0&&(a=null)}yt(a,"remove",t)}function Ct(t,a,n){const u=_.value.concat(B.value).map(i=>ye(i,t,a)).filter(i=>i.from!==void 0?i.from.dateHash!==null&&i.to.dateHash!==null:i.dateHash!==null);v("update:modelValue",(e.multiple===!0?u:u[0])||null,n)}function Et(){if(e.minimal!==!0)return d("div",{class:"q-date__header "+k.value},[d("div",{class:"relative-position"},[d(Te,{name:"q-transition--fade"},()=>d("div",{key:"h-yr-"+ut.value,class:"q-date__header-subtitle q-date__header-link "+(O.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:c.value,...h("vY",{onClick(){O.value="Years"},onKeyup(t){t.keyCode===13&&(O.value="Years")}})},[ut.value]))]),d("div",{class:"q-date__header-title relative-position flex no-wrap"},[d("div",{class:"relative-position col"},[d(Te,{name:"q-transition--fade"},()=>d("div",{key:"h-sub"+it.value,class:"q-date__header-title-label q-date__header-link "+(O.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:c.value,...h("vC",{onClick(){O.value="Calendar"},onKeyup(t){t.keyCode===13&&(O.value="Calendar")}})},[it.value]))]),e.todayBtn===!0?d(D,{class:"q-date__header-today self-start",icon:w.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:c.value,onClick:mt}):null])])}function Xe({label:t,type:a,key:n,dir:u,goTo:i,boundaries:x,cls:m}){return[d("div",{class:"row items-center q-date__arrow"},[d(D,{round:!0,dense:!0,size:"sm",flat:!0,icon:Pe.value[0],tabindex:c.value,disable:x.prev===!1,...h("go-#"+a,{onClick(){i(-1)}})})]),d("div",{class:"relative-position overflow-hidden flex flex-center"+m},[d(Te,{name:"q-transition--jump-"+u},()=>d("div",{key:n},[d(D,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:c.value,...h("view#"+a,{onClick:()=>{O.value=a}})})]))]),d("div",{class:"row items-center q-date__arrow"},[d(D,{round:!0,dense:!0,size:"sm",flat:!0,icon:Pe.value[1],tabindex:c.value,disable:x.next===!1,...h("go+#"+a,{onClick(){i(1)}})})])]}const Wt={Calendar:()=>[d("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[d("div",{class:"q-date__navigation row items-center no-wrap"},Xe({label:q.value.months[y.value.month-1],type:"Months",key:y.value.month,dir:me.value,goTo:_t,boundaries:Ke.value.month,cls:" col"}).concat(Xe({label:y.value.year,type:"Years",key:y.value.year,dir:ve.value,goTo:We,boundaries:Ke.value.year,cls:""}))),d("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Pt.value.map(t=>d("div",{class:"q-date__calendar-item"},[d("div",t)]))),d("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[d(Te,{name:"q-transition--slide-"+me.value},()=>d("div",{key:Y.value,class:"q-date__calendar-days fit"},ht.value.map(t=>d("div",{class:t.classes},[t.in===!0?d(D,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:c.value,...h("day#"+t.i,{onClick:()=>{Gt(t.i)},onMouseover:()=>{Jt(t.i)}})},t.event!==!1?()=>d("div",{class:"q-date__event bg-"+t.event}):null):d("div",""+t.i)]))))])])],Months(){const t=y.value.year===N.value.year,a=u=>j.value!==null&&y.value.year===j.value.year&&j.value.month>u||F.value!==null&&y.value.year===F.value.year&&F.value.month<u,n=q.value.monthsShort.map((u,i)=>{const x=y.value.month===i+1;return d("div",{class:"q-date__months-item flex flex-center"},[d(D,{class:t===!0&&N.value.month===i+1?"q-date__today":null,flat:x!==!0,label:u,unelevated:x,color:x===!0?J.value:null,textColor:x===!0?ee.value:null,tabindex:c.value,disable:a(i+1),...h("month#"+i,{onClick:()=>{Kt(i+1)}})})])});return e.yearsInMonthView===!0&&n.unshift(d("div",{class:"row no-wrap full-width"},[Xe({label:y.value.year,type:"Years",key:y.value.year,dir:ve.value,goTo:We,boundaries:Ke.value.year,cls:" col"})])),d("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const t=ge.value,a=t+ce,n=[],u=i=>j.value!==null&&j.value.year>i||F.value!==null&&F.value.year<i;for(let i=t;i<=a;i++){const x=y.value.year===i;n.push(d("div",{class:"q-date__years-item flex flex-center"},[d(D,{key:"yr"+i,class:N.value.year===i?"q-date__today":null,flat:!x,label:i,dense:!0,unelevated:x,color:x===!0?J.value:null,textColor:x===!0?ee.value:null,tabindex:c.value,disable:u(i),...h("yr#"+i,{onClick:()=>{Ut(i)}})})]))}return d("div",{class:"q-date__view q-date__years flex flex-center"},[d("div",{class:"col-auto"},[d(D,{round:!0,dense:!0,flat:!0,icon:Pe.value[0],tabindex:c.value,disable:u(t),...h("y-",{onClick:()=>{ge.value-=ce}})})]),d("div",{class:"q-date__years-content col self-stretch row items-center"},n),d("div",{class:"col-auto"},[d(D,{round:!0,dense:!0,flat:!0,icon:Pe.value[1],tabindex:c.value,disable:u(a),...h("y+",{onClick:()=>{ge.value+=ce}})})])])}};function Gt(t){const a={...y.value,day:t};if(e.range===!1){Nt(a,Y.value);return}if(M.value===null){const n=ht.value.find(i=>i.fill!==!0&&i.i===t);if(e.noUnset!==!0&&n.range!==void 0){Je({target:a,from:n.range.from,to:n.range.to});return}if(n.selected===!0){Je(a);return}const u=ae(a);M.value={init:a,initHash:u,final:a,finalHash:u},v("rangeStart",ue(a))}else{const n=M.value.initHash,u=ae(a),i=n<=u?{from:M.value.init,to:a}:{from:a,to:M.value.init};M.value=null,Ge(n===u?a:{target:a,...i}),v("rangeEnd",{from:ue(i.from),to:ue(i.to)})}}function Jt(t){if(M.value!==null){const a={...y.value,day:t};Object.assign(M.value,{final:a,finalHash:ae(a)})}}return Object.assign(b,{setToday:mt,setView:Ft,offsetCalendar:zt,setCalendarTo:Ne,setEditingRange:Yt}),()=>{const t=[d("div",{class:"q-date__content col relative-position"},[d(Te,{name:"q-transition--fade"},Wt[O.value])])],a=st(o.default);return a!==void 0&&t.push(d("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&be(t,"push"),d("div",{class:Ue.value,...jt.value},[Et(),d("div",{ref:ie,class:"q-date__main col column",tabindex:-1},t)])}}});const No=le({name:"OTDComponent",setup(){const e=re(),o=Date.now(),v=Tt.formatDate(o,"MM/DD");return{reStore:e,otditems:g([]),promptOTDDate:g(!1),otddate:g(Date.now()),otdlabel:g(v),otdtype:g("selected")}},mounted(){this.init()},methods:{async init(){const e=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=e[this.otdtype],console.log(this.otditems)},async load(e){console.log("load",this.otditems[e].text),console.log("load",this.otditems[e]);const o=this.reStore.preferences.langVoiceKey;console.log("OTD load ",o),this.reStore.loadPageId(this.otditems[e].pages[0].pageid,o),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const e=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=e.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=Tt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(e){console.log("otdOptionsCB",this.otdtype);const o=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=o[this.otdtype]}}}),Eo=s("div",{class:"text-h6"},"Select Date",-1),Wo={class:"q-gutter-y-sm column"},Go={class:""};function Jo(e,o,v,b,w,p){return T(),K(ne,null,[l(Ot,{modelValue:e.promptOTDDate,"onUpdate:modelValue":o[2]||(o[2]=h=>e.promptOTDDate=h),persistent:""},{default:r(()=>[l(A,{style:{"min-width":"350px"}},{default:r(()=>[l(E,{align:"center"},{default:r(()=>[Eo]),_:1}),l(Ko,{modelValue:e.otddate,"onUpdate:modelValue":o[0]||(o[0]=h=>e.otddate=h),minimal:""},null,8,["modelValue"]),l(Mt,{align:"center",class:"text-white"},{default:r(()=>[Ie(l(D,{flat:"",label:"Cancel"},null,512),[[Qe]]),Ie(l(D,{flat:"",label:"Update OTD date",onClick:o[1]||(o[1]=h=>this.updateOTDDate())},null,512),[[Qe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(A,{flat:""},{default:r(()=>[l(E,null,{default:r(()=>[l(Be,{padding:"",class:"rounded-borders"},{default:r(()=>[l(Oe,{"header-style":{border:"1px solid gray"},label:"On This Day"},{default:r(()=>[s("div",Wo,[l(qe,{class:"bg-primary text-white rounded-borders q-my-md"},{default:r(()=>[l(D,{dark:"",standout:"",onClick:o[3]||(o[3]=h=>e.promptOTDDate=!0)},{default:r(()=>[H(S(e.otdlabel),1)]),_:1}),l(lt),l(wa,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":o[4]||(o[4]=h=>this.otdtype=h),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:o[5]||(o[5]=h=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),s("div",Go,[(T(!0),K(ne,null,Me(e.otditems,(h,c)=>(T(),z(A,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:e.otditems,"onUpdate:modelValue":o[6]||(o[6]=k=>e.otditems=k),key:c,onClick:k=>this.load(c)},{default:r(()=>[H(S(c)+". "+S(h.year)+" "+S(h.text),1)]),_:2},1032,["modelValue","onClick"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Xo=se(No,[["render",Jo]]);const Zo=le({name:"CurrentAssignment",setup(){const e=re();return{reStore:e,ck:g("-"),goal:g("-"),created:g("-"),id:g("-"),points:g("-"),pages:g([]),pgIdx:g(e.courses.pgIdx),title:g("")}},mounted(){console.log("CurrentAssignment mounted"),L(this.reStore.courses,async(e,o)=>{try{console.log("CurrentAssignment.watcher");const v=e.ck,b=e.aid;this.id=b,this.ck=v,this.goal=this.reStore.courses[v].assignments[b].goal,this.created=this.reStore.courses[v].assignments[b].created,this.points=this.reStore.courses[v].assignments[b].points;try{const w=this.reStore.courses[v].assignments[b].pages.length;console.log("pages.length ",w)}catch{this.reStore.courses[v].assignments[b].pages=[]}this.pages=this.reStore.courses[v].assignments[b].pages,this.pgIdx=this.reStore.courses.pgIdx,this.title=this.reStore.courses[v].assignments[b].title}catch(v){console.log(v)}},{immediate:!0,deep:!0})},methods:{save(){console.log("save"),this.reStore.saveCurrentAssignment()},nextPage(){this.reStore.nextPage()}}}),en={class:"text-weight-bolder text-center q-pa-md"},tn={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},an={width:"100%"},on=s("td",null,"Title",-1),nn={style:{width:"50%"}},ln=s("td",null,"Course-Key",-1),sn={style:{width:"50%"}},rn=s("td",null,"Assgmnt Id",-1),un={style:{width:"50%"}},dn=s("td",null,"Created",-1),cn={style:{width:"50%"}},hn=s("td",null,"Goal",-1),mn={style:{width:"50%"}},vn=s("td",null,"Pages",-1);function gn(e,o,v,b,w,p){return T(),z(A,{flat:""},{default:r(()=>[l(E,null,{default:r(()=>[s("div",en,[H(S(this.title)+" ",1),l($,{class:"on-right",name:"save",onClick:this.save,size:"sm"},null,8,["onClick"])]),s("div",tn,[s("table",an,[s("tr",null,[on,s("td",nn,S(this.title),1)]),s("tr",null,[ln,s("td",sn,S(this.ck),1)]),s("tr",null,[rn,s("td",un,S(this.id),1)]),s("tr",null,[dn,s("td",cn,S(this.created),1)]),s("tr",null,[hn,s("td",mn,S(this.goal),1)]),s("tr",null,[vn,s("td",{style:{width:"50%",cursor:"pointer"},onClick:o[0]||(o[0]=h=>this.nextPage())},S(this.pgIdx+1)+" / "+S(this.pages.length),1)])])])]),_:1})]),_:1})}var fn=se(Zo,[["render",gn]]);const _n=le({name:"CurrentCourse",setup(){return{reStore:re(),title:g(""),assignmentCount:g(0),courseKey:g(""),created:g(""),enrollmentCount:g(0),owner:g("")}},mounted(){console.log("CurrentCourse mounted"),L(this.reStore.courses,async(e,o)=>{try{if(this.reStore.courses.ck!=="undefined"){const v=this.reStore.courses.ck;console.log("CurrentCourse ",v),this.title=this.reStore.courses[v].title,this.courseKey=this.reStore.courses[v].courseKey,this.created=this.reStore.courses[v].created,this.assignmentCount=Object.keys(this.reStore.courses[v].assignments).length,this.enrollmentCount=Object.keys(this.reStore.courses[v].enrollment).length,this.owner=this.reStore.courses[v].owner}}catch(v){console.log(v)}},{immediate:!0,deep:!0})},methods:{dummy(){console.log("dummy")}}}),yn={class:"text-weight-bolder text-center q-pa-md"},pn={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Cn={width:"100%"},Sn=s("td",null,"Title",-1),bn={style:{width:"50%"}},kn=s("td",null,"Course-Key",-1),wn={style:{width:"50%"}},xn=s("td",null,"Created",-1),$n={style:{width:"50%"}},Dn=s("td",null,"Owner",-1),Tn={style:{width:"50%"}},qn=s("td",null,"Assignments",-1),In={style:{width:"50%"}},Vn=s("td",null,"Enrollment",-1),Mn={style:{width:"50%"}};function On(e,o,v,b,w,p){return T(),z(A,{flat:""},{default:r(()=>[l(E,null,{default:r(()=>[s("div",yn,S(this.title),1),s("div",pn,[s("table",Cn,[s("tr",null,[Sn,s("td",bn,S(this.title),1)]),s("tr",null,[kn,s("td",wn,S(this.courseKey),1)]),s("tr",null,[xn,s("td",$n,S(this.created),1)]),s("tr",null,[Dn,s("td",Tn,S(this.owner.slice(0,10)),1)]),s("tr",null,[qn,s("td",In,S(this.assignmentCount),1)]),s("tr",null,[Vn,s("td",Mn,S(this.enrollmentCount),1)])])])]),_:1})]),_:1})}var Bn=se(_n,[["render",On]]);const Hn=le({name:"TeacherLayout",components:{CurrentCourse:Bn,DocumentationComponent:xa,SearchComponent:Qa,ImagesComponent:Bo,BookmarksComponent:Qo,OTDComponent:Xo,CurrentAssignment:fn,PreferencesComponent:$a,CurrentPage:Do},setup(){const e=g(!1),o=g(!1),v=re(),b=v.userSnapshot.preferences,w=g(null),p=g(null);return{step:g(1),reStore:v,initialValues:g(b),scrollAreaRHS:w,scrollAreaLHS:p,leftDrawerOpen:e,rightDrawerOpen:o,toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){o.value=!o.value}}},mounted(){bt.isActive||(bt.toggle(),et("primary","#333"),et("secondary",this.initialValues.secondaryColor),et("accent",this.initialValues.accentColor))},methods:{scrollTopRHS(){this.scrollAreaRHS.setScrollPosition("vertical",0)},scrollTopLHS(){this.scrollAreaLHS.setScrollPosition("vertical",0)}}}),Pn={class:"dashboard-wrapper"},Rn=s("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),Ln=s("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1);function An(e,o,v,b,w,p){const h=U("router-link"),c=U("router-view"),k=U("DocumentationComponent"),V=U("SearchComponent"),P=U("ImagesComponent"),R=U("BookmarksComponent"),W=U("OTDComponent"),be=U("CurrentCourse"),ie=U("CurrentAssignment"),Q=U("CurrentPage"),q=U("PreferencesComponent");return T(),z(ia,{view:"hHh LpR fFf"},{default:r(()=>[l(sa,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:r(()=>[l(qe,null,{default:r(()=>[l(D,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),l(na,null,{default:r(()=>[l(h,{to:"/teacher"},{default:r(()=>[l($,{name:"home",color:"white"},{default:r(()=>[l(Z,null,{default:r(()=>[H("Return to My Teacher Page")]),_:1})]),_:1})]),_:1})]),_:1}),this.reStore.authenticated?(T(),z(D,{key:0,onClick:o[0]||(o[0]=G=>this.reStore.router.push("/student")),icon:"switch_account"},{default:r(()=>[l(Z,null,{default:r(()=>[H(" Switch between Teacher or Student role ")]),_:1})]),_:1})):Se("",!0),this.reStore.authenticated?(T(),z(D,{key:1,icon:"logout",onClick:o[1]||(o[1]=G=>this.reStore.logout())})):Se("",!0),l(D,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1}),l(la,{align:"left",class:"hidden"},{default:r(()=>[l(Ae,{to:"/logo",label:"Logo"}),l(Ae,{to:"/teaching",label:"Teaching"}),l(Ae,{to:"/taking",label:"Taking"}),l(Ae,{to:"/gradebook",label:"Gradebook"})]),_:1})]),_:1}),l(ra,{class:"container-fluid"},{default:r(()=>[s("div",Pn,[l(c)]),l(kt,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":o[2]||(o[2]=G=>e.leftDrawerOpen=G),side:"left"},{default:r(()=>[l(qe,{flat:"",class:"bg-primary text-white"},{default:r(()=>[l(D,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Ce,{dark:"",vertical:"",inset:""}),l(D,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Ce,{dark:"",vertical:"",inset:""}),l(lt),l(D,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopLHS},{default:r(()=>[l(Z,null,{default:r(()=>[H("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),Rn,l(wt,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaLHS"},{default:r(()=>[l(k),l(V),l(P),l(R),l(W)]),_:1},8,["visible"])]),_:1},8,["modelValue"]),l(kt,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":o[3]||(o[3]=G=>e.rightDrawerOpen=G),side:"right"},{default:r(()=>[l(qe,{flat:"",class:"bg-primary text-white"},{default:r(()=>[l(D,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Ce,{dark:"",vertical:"",inset:""}),l(D,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Ce,{dark:"",vertical:"",inset:""}),l(lt),l(D,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopRHS},{default:r(()=>[l(Z,null,{default:r(()=>[H("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),Ln,l(wt,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaRHS"},{default:r(()=>[l(be),l(ie),l(Q),l(q,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var ol=se(Hn,[["render",An]]);export{ol as default};
