import{d as A,r as Q,a as f,Q as g,i as P,h as K,C as k}from"./ClosePopup.0d6459fb.js";import{Q as V}from"./QInput.9322a97a.js";import{_ as $,r as v,o as u,c as y,w as o,a as t,aJ as q,p as x,Q as h,e as l,af as i,aI as B,au as m,aK as T,av as b,ag as p,x as C}from"./index.1e5a1fc8.js";import{Q as d}from"./QTooltip.d75c4826.js";import{Q as E}from"./QImg.0a285e20.js";import{Q as N}from"./QPage.a4fc847c.js";import{u as D}from"./re-store.f64c0b6d.js";import"./use-dark.96f66556.js";import"./use-portal.1470756e.js";import"./use-key-composition.66e1fbb3.js";import"./selection.40719a5d.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";function I(s){const e=document.createElement("textarea");e.value=s,e.contentEditable="true",e.style.position="fixed";const _=()=>{};A(_),document.body.appendChild(e),e.focus(),e.select();const r=document.execCommand("copy");return e.remove(),Q(_),r}function F(s){return navigator.clipboard!==void 0?navigator.clipboard.writeText(s):new Promise((e,_)=>{const r=I(s);r?e(!0):_(r)})}const U=D(),H={components:{},setup(){return{reStore:U,courseKey:v(null),courseTitle:v(null),prompt:v(!1)}},mounted(){console.log("TeacherPage mounted ",this.reStore.courses),this.reStore.unloadCurrent()},methods:{copyCK(s){F(s).then(()=>{console.log("ck copied to clipboard",s)}).catch(e=>{console.log(e)})},newCourseCB(){console.log("courseCB"),this.reStore.newCourse()},newAssignmentCB(s){console.log("assignmentCB: ",s),this.reStore.newAssignment(s)},editAssignmentCB(s,e){console.log("editAssignmentCB: ",s,e),this.reStore.loadAssignment(s,e),this.reStore.router.push("/teacher/editor")},changeTitleCB(){console.log("TeacherPage.titleCB",this.courseKey,this.courseTitle),this.reStore.setCourseTitle(this.courseKey,this.courseTitle)},deleteCourseCB(s){this.reStore.deleteCourse(s)},deleteAssignmentCB(s,e){this.reStore.deleteAssignment(s,e)},takeAssignmentCB(s,e){console.log("TeacherPage.takeAssignment ",s,e),this.reStore.loadAssignment(s,e),this.reStore.router.push("/teacher/assignment")}}},j=l("div",{class:"text-h6"},"Change course title",-1),z={class:"flex-center q-mt-xl q-mb-xl row q-gutter-md"},J=l("div",{class:"text-h6"},"My Teacher Page",-1),L=l("br",null,null,-1),M=l("br",null,null,-1),R=l("br",null,null,-1),G={class:"flex flex-row justify-center"},O={class:"absolute-top text-center"},W={class:"text-h6"},X={class:"text-subtitle2"},Y={key:0},Z={key:1},ee={style:{"font-size":"22pt",width:"100%"},class:"text-center absolute-bottom"},te=l("br",null,null,-1),oe={class:"hidden"},se={key:0,class:"flex-center"};function le(s,e,_,r,ne,ie){return u(),y(N,{class:"q-gutter-md"},{default:o(()=>[t(K,{modelValue:r.prompt,"onUpdate:modelValue":e[3]||(e[3]=a=>r.prompt=a),persistent:""},{default:o(()=>[t(f,{style:{"min-width":"350px"}},{default:o(()=>[t(g,null,{default:o(()=>[j]),_:1}),t(g,{class:"q-pt-none"},{default:o(()=>[t(V,{dense:"",modelValue:r.courseTitle,"onUpdate:modelValue":e[0]||(e[0]=a=>r.courseTitle=a),autofocus:"",onKeyup:e[1]||(e[1]=q(a=>{r.prompt=!1,this.changeTitleCB()},["enter"])),onHide:this.dck},null,8,["modelValue","onHide"])]),_:1}),t(P,{align:"right",class:"text-white"},{default:o(()=>[x(t(h,{outline:"",label:"Cancel"},null,512),[[k]]),x(t(h,{outline:"",label:"Save",onClick:e[2]||(e[2]=a=>this.changeTitleCB())},null,512),[[k]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l("div",z,[J,l("div",null,[t(h,{icon:"list_alt",onClick:e[4]||(e[4]=a=>this.newCourseCB())},{default:o(()=>[t(d,null,{default:o(()=>[i("Add a course")]),_:1})]),_:1}),this.reStore.authenticated?(u(),y(h,{key:0,onClick:e[5]||(e[5]=a=>this.reStore.router.push("/student")),icon:"switch_account"},{default:o(()=>[t(d,null,{default:o(()=>[i(" Switch to Student role ")]),_:1})]),_:1})):B("",!0)])]),(u(!0),m(b,null,T(this.reStore.userSnapshot.teaching,(a,c)=>(u(),y(f,{flat:"",key:a.ck,style:{opacity:"1.0"}},{default:o(()=>[t(g,{class:"text-center"},{default:o(()=>[i(" Title: "+p(this.reStore.courses[c].title)+" \xA0",1),t(C,{class:"ptr",name:"edit",onClick:n=>{r.prompt=!0,this.courseTitle=this.reStore.courses[c].title,this.courseKey=c}},null,8,["onClick"]),L,i(" Key: "+p(c)+" ",1),t(C,{class:"ptr",name:"content_copy",onClick:n=>this.copyCK(c)},null,8,["onClick"]),l("div",null,[t(h,{icon:"delete",onClick:n=>this.deleteCourseCB(a.ck)},{default:o(()=>[t(d,null,{default:o(()=>[i("Delete Course")]),_:1})]),_:2},1032,["onClick"]),t(h,{icon:"post_add",onClick:n=>this.newAssignmentCB(a.ck)},{default:o(()=>[t(d,null,{default:o(()=>[i("New Assignment")]),_:1})]),_:2},1032,["onClick"]),t(h,{icon:"content_copy",onClick:n=>this.copyCK(c)},{default:o(()=>[t(d,null,{default:o(()=>[i("Copy this course-key to clipboard. Enroll "),M,i("in this course using this course-key from "),R,i("the Student Page.")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1024),l("div",G,[(u(!0),m(b,null,T(this.reStore.courses[c].assignments,(n,w)=>(u(),m("div",{key:n},[t(f,{bordered:"",flat:"",class:"ccard q-mx-sm q-my-md"},{default:o(()=>[t(E,{fit:s.cover,src:n.coverUrl,height:"100%"},{default:o(()=>[l("div",O,[l("div",W,p(n.title.slice(0,18)),1),l("div",X,[n.pages?(u(),m("span",Y,"Pages: "+p(n.pages.length),1)):(u(),m("span",Z,"Pages: None"))])]),l("div",ee,[t(C,{onClick:S=>this.takeAssignmentCB(c,n.id),name:"play_circle",class:"ptr"},{default:o(()=>[t(d,null,{default:o(()=>[i("Take Assignment")]),_:1})]),_:2},1032,["onClick"]),t(C,{onClick:S=>this.editAssignmentCB(c,n.id),name:"edit",class:"ptr on-right"},{default:o(()=>[t(d,null,{default:o(()=>[i("Edit Assignment"),te,i(p(n.id),1)]),_:2},1024)]),_:2},1032,["onClick"]),t(C,{onClick:S=>this.deleteAssignmentCB(c,n.id),name:"delete",class:"ptr on-right"},{default:o(()=>[t(d,null,{default:o(()=>[i("Delete Assignment")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["fit","src"])]),_:2},1024),l("span",oe,p(w),1)]))),128))])]),_:2},1024))),128)),this.reStore.userSnapshot.teaching?(u(),m("div",se)):B("",!0)]),_:1})}var ye=$(H,[["render",le]]);export{ye as default};
