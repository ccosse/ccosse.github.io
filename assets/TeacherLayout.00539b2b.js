import{Q as U,u as Et,a as Wt,b as Gt}from"./use-form.47e132c2.js";import{Q as Jt,a as st,u as Xt,b as Dt,P as Zt,c as yt}from"./PreferencesComponent.e4e5cf00.js";import{i as C,g as at,d as te,r as m,v as L,_ as se,o as u,ah as f,a,w as n,K as E,Q as w,e as l,aC as es,ag as y,ak as p,aN as ot,c as N,a1 as x,ai as j,aj as re,al as z,f as O,h as $,an as ts,ao as Ve,j as ss,q as as,p as Ct,R as os,P as kt,s as Ze}from"./index.6f3b0f63.js";import{d as ke,C as W,Q as Se}from"./ClosePopup.053fe926.js";import{Q as q}from"./QCard.57ca1b97.js";import{Q as K}from"./QTooltip.d3a59baa.js";import{Q as Ce,a as ls,b as ns,c as St,d as $t,e as is,f as rs}from"./QLayout.9e47bef7.js";import{Q as qe,a as de,e as bt}from"./QExpansionItem.1138cb04.js";import{Q as ds}from"./QTabs.80474d47.js";import{u as ae,s as ee,p as he,t as us,a as wt,f as cs,g as ms,j as et,_ as hs,d as Vt}from"./re-store.918964ea.js";import{Q as ie}from"./QInput.afa64131.js";import{Q as Te}from"./QList.9c34643c.js";import{s as G}from"./transform.aea72fbe.js";import{Q as gs}from"./QToggle.285ec981.js";import{Q as De}from"./QImg.5ab10abb.js";import{D as fs}from"./DocumentationComponent.8ace37e0.js";import{u as vs,a as ps}from"./use-dark.89d84a92.js";import"./selection.cdb41109.js";import"./use-key-composition.f5df30c0.js";import"./use-prevent-scroll.d35b92dc.js";import"./scroll.3691b949.js";import"./use-portal.505ba2bd.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";import"./QCheckbox.bc3120eb.js";const _s=C("div",{class:"q-space"});var xe=at({name:"QSpace",setup(){return()=>_s}});const ys=te({name:"SearchComponent",setup(){const e=ae(),s=m("");return{reStore:e,searchTerms:s,searchSize:m(e.preferences.resLimit),searchResults:m([]),promptSearchSize:m(!1)}},mounted(){L(this.reStore.preferences,async(c,_)=>{console.log("watcher ",c,_),this.searchSize=c.resLimit;for(const[B,d]of Object.entries(this.reStore.langVoices))G("#sfi").classed(d.flagName,!1);const V=this.reStore.preferences.langVoiceKey;G("#sfi").classed(this.reStore.langVoices[V].flagName,!0)});const e=this.reStore.preferences.langVoiceKey,s=this.reStore.langVoices[e].flagName;G("#sfi").classed(s,!0)},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchResults.splice(e,1)},load(e){console.log(e),console.log(this.searchResults[e]);const s=this.reStore.preferences.langVoiceKey;console.log("calling loadPageId ",this.searchResults[e].pageid,s),this.reStore.loadPageId(this.searchResults[e].pageid,s),this.reStore.courses.trigger+=1},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("doSearch ",e),this.reStore.wiki.setLang(e.langName);const s=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",s.results.length),this.searchResults=s.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),Cs=l("div",{class:"text-h6"},"Search Results Size",-1),ks={class:"q-pa-md",style:{"max-width":"350px"}},Ss={class:"q-gutter-y-sm column"},$s=l("span",{class:"on-right text-h2",id:"sfi"},null,-1),bs={key:0},ws={class:"row cardheader ptr justify-between"},Vs=["onClick"],xs={class:"history-remove"};function Ds(e,s,c,_,V,B){return u(),f(j,null,[a(Se,{modelValue:e.promptSearchSize,"onUpdate:modelValue":s[2]||(s[2]=d=>e.promptSearchSize=d),persistent:""},{default:n(()=>[a(q,{style:{"min-width":"350px"}},{default:n(()=>[a(U,{align:"center"},{default:n(()=>[Cs]),_:1}),a(U,{class:"q-pt-none",align:"center"},{default:n(()=>[a(Jt,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":s[0]||(s[0]=d=>e.searchSize=d)},null,8,["modelValue"])]),_:1}),a(ke,{align:"center",class:"text-white"},{default:n(()=>[E(a(w,{flat:"",label:"Cancel"},null,512),[[W]]),E(a(w,{flat:"",label:"Update results size",onClick:s[1]||(s[1]=d=>this.updateSearchSize())},null,512),[[W]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l("div",ks,[a(Te,{bordered:"",class:"rounded-borders"},{default:n(()=>[a(qe,null,{header:n(()=>[a(de,{avatar:""},{default:n(()=>[a(es,{icon:"search",color:"primary","text-color":"white"})]),_:1}),a(de,null,{default:n(()=>[y(" Search ")]),_:1})]),default:n(()=>[a(q,null,{default:n(()=>[l("div",Ss,[a(Ce,{class:"bg-primary text-white rounded-borders q-my-md"},{default:n(()=>[a(w,{dark:"",standout:"",onClick:s[3]||(s[3]=d=>e.promptSearchSize=!0)},{default:n(()=>[y(p(this.searchResults.length)+" ",1),a(K,null,{default:n(()=>[y("Change results limit ("+p(this.searchSize)+")",1)]),_:1})]),_:1}),$s,a(ie,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":s[6]||(s[6]=d=>e.searchTerms=d),"input-class":"text-right",class:"q-ml-md",onKeyup:[s[7]||(s[7]=d=>this.update()),s[8]||(s[8]=ot(d=>this.doSearch(),["enter"]))]},{append:n(()=>[e.searchTerms===""?(u(),N(x,{key:0,name:"search",onClick:s[4]||(s[4]=d=>this.doSearch())})):(u(),N(x,{key:1,name:"clear",class:"cursor-pointer",onClick:s[5]||(s[5]=d=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(u(),f("div",bs,[(u(!0),f(j,null,re(this.searchResults,(d,r)=>(u(),N(q,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":s[9]||(s[9]=k=>this.searchResults=k),key:r},{default:n(()=>[l("div",ws,[l("span",{class:"history-title col-grow",onClick:k=>this.load(r)},p(r)+". "+p(d.title.slice(0,25)),9,Vs),l("span",xs,[a(x,{class:"primary",size:e.xl,color:e.primary,name:"close",onClick:k=>this.remove(r)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):z("",!0)]),_:1})]),_:1})]),_:1})])],64)}var qs=se(ys,[["render",Ds]]);const Ts=te({name:"CurrentPage",props:{},setup(e){return{reStore:ae(),ck:m("-"),aid:m("-"),pageTitle:m("-"),langVoiceKey:m(),flagName:m("fi fi-gb"),imgIdx:m(0),imgs:m([]),imgTot:m(0),imgFit:m("-"),guideWords:m("-"),mapCoords:m("-"),pageid:m("-"),pctReplace:m(),canonicalUrl:m(),props:e,isCustom:m(null),langNames:m(["en","th","es","fr","it","de","zh","ja","sw","pt","ru","id","ke"]),promptGuideWords:m(!1)}},mounted(){console.log(this.props),L(this.reStore.courses,async(e,s)=>{try{console.log("CurrentPage watcher",this.reStore.courses);const c=this.reStore.courses.pgIdx,_=this.reStore.page;let V,B;if(_){console.log("CurrentPage ",_),B=_.ck,V=_.aid,this.pageTitle=_.pageTitle,this.imgIdx=_.imgIdx,this.imgs=_.imgs,this.imgTot=_.imgs.length,this.imgFit=_.imgFit,this.guideWords=_.guideWords,this.mapCoords=_.mapCoords,this.pageid=_.pageid,this.langVoiceKey=_.langVoiceKey,this.flagName=this.reStore.langVoices[_.langVoiceKey].flagName;for(const[d,r]of Object.entries(this.reStore.langVoices)){const k=r.flagName;ee(".flagicon").classed(k,!1)}ee(".flagicon").classed(this.flagName,!0),this.pctReplace=_.pctReplace,this.canonicalUrl=_.canonicalUrl,this.isCustom=m(this.reStore.page.isCustom)}this.aid=V,this.ck=B}catch(c){console.log(c)}},{immediate:!0,deep:!0})},methods:{updateGuideWords(){console.log("updateGuideWords",this.guideWords),this.reStore.page.guideWords=this.guideWords},langLinkCB(e){console.log(e.url),window.open(e.url,"_blank")},speak(){console.log("CurrentPage.speak",this.reStore),this.reStore.speak()},cycleFitMode(){const e=["scale-down","cover","contain"];let s=e.indexOf(this.imgFit);s+=1,s>e.length-1&&(s=0),this.imgFit=e[s],this.reStore.page.imgFit=this.imgFit,console.log("fit: ",this.imgFit),this.reStore.courses.trigger+=1},nextImg(){this.imgIdx=this.imgIdx+1>this.imgs.length-1?0:this.imgIdx+1,this.reStore.page.imgIdx=this.imgIdx,this.reStore.courses.imgIdx=this.imgIdx,this.reStore.courses.trigger+=1},imgCB(e,s){console.log(e,s),this.reStore.page.imgIdx=e,this.reStore.courses.imgIdx=e,this.reStore.courses.trigger+=1},loadURL(e){console.log("loadURL ",e),window.open(e,"_blank")},mapCB(){const e="https://maps.google.com/?ll="+this.mapCoords.split(",")[0]+","+this.mapCoords.split(",")[1];window.open(e,"_blank")},saveImage(e,s){console.log("saveImage: ",e,s),this.reStore.saveImage(e,s)},saveCurrentImage(){const e=this.imgs[this.imgIdx];console.log("saveCurrentImage: ",e),this.reStore.saveImage(this.imgIdx,e)},remove(e,s){console.log("remove: ",e,s),this.reStore.page.imgs.splice(e,1)},toggleText(){G("#slideTextDiv").classed("hidden")?ee("#slideTextDiv").classed("hidden",!1):ee("#slideTextDiv").classed("hidden",!0)},addBookmark(){console.log("addBookmark"),this.reStore.saveBookmark()},resetPage(){this.reStore.newPage()},newPage(){console.log("CurrentPage newPageCB "),this.reStore.newPage()},appendPage(){console.log("CurrentPage appendPage"),this.reStore.appendPage()},updatePage(){console.log("CurrentPage updatePage"),this.reStore.updatePage()},updateType(e,s){console.log("CurrentPage updateType"),this.reStore.page.isCustom=this.isCustom}}}),Is=l("div",{class:"text-h6"},"Guide Words",-1),Ks={class:"text-weight-bolder text-center q-pa-md text-white"},Ps=l("br",null,null,-1),Bs={style:{border:"1px solid gray","border-radius":"5px"}},Ms={width:"100%"},Os={style:{width:"50%","text-align":"center"}},Ns={style:{"text-align":"center"}},Us={style:{"text-align":"center"}},Hs=l("td",{style:{"text-align":"center"}},"Speak Text",-1),Rs={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},As={width:"100%"},Ls=l("td",null,"Course-Key",-1),Qs={style:{width:"50%"}},js={class:"ptr float-left"},Fs=l("td",null,"Assgmnt Id",-1),zs={style:{width:"50%"}},Ys={class:"ptr float-left"},Es=l("td",null,"WP Page Id",-1),Ws={style:{width:"50%"}},Gs=l("td",null,"Language",-1),Js={style:{width:"50%"}},Xs={class:"q-mt-xs float-right flagicon text-h6"},Zs=l("td",null,"Images",-1),ea={style:{width:"50%"}},ta=l("td",null,"Image Fit",-1),sa={class:"align-left"},aa=l("td",null,"Guide Words",-1),oa={style:{width:"50%"}},la=l("td",null,"Percent Replace",-1),na={class:"float-left"},ia=l("td",null,"Map Coords",-1),ra={class:"float-left"},da=l("td",null,"Toggle Text",-1),ua=l("td",null,"Alt Langs",-1),ca=["onClick"],ma={key:0,style:{cursor:"pointer"}},ha={key:0},ga={class:"row cardheader justify-between"},fa={class:"history-remove"},va={key:0},pa={class:"history-remove ptr"};function _a(e,s,c,_,V,B){const d=O("router-link");return u(),f(j,null,[a(Se,{modelValue:e.promptGuideWords,"onUpdate:modelValue":s[3]||(s[3]=r=>e.promptGuideWords=r),persistent:""},{default:n(()=>[a(q,{style:{"min-width":"350px"}},{default:n(()=>[a(U,null,{default:n(()=>[Is]),_:1}),a(U,{class:"q-pt-none"},{default:n(()=>[a(ie,{dense:"",modelValue:e.guideWords,"onUpdate:modelValue":s[0]||(s[0]=r=>e.guideWords=r),autofocus:"",onKeyup:s[1]||(s[1]=ot(r=>e.promptGuideWords=!1,["enter"]))},null,8,["modelValue"])]),_:1}),a(ke,{align:"right"},{default:n(()=>[E(a(w,{outline:"",label:"Cancel"},null,512),[[W]]),E(a(w,{outline:"",label:"Update guide words",onClick:s[2]||(s[2]=r=>this.updateGuideWords())},null,512),[[W]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(q,{flat:""},{default:n(()=>[a(U,null,{default:n(()=>[l("div",Ks,[a(d,{to:"/teacher/editor",class:"text-white"},{default:n(()=>[y(p(this.pageTitle.slice(0,30)),1)]),_:1}),Ps,a(x,{class:"on-right",name:"replay",onClick:this.resetPage,size:"sm"},null,8,["onClick"]),a(x,{class:"on-right",name:"add_circle",onClick:this.newPage,size:"sm"},null,8,["onClick"]),a(x,{class:"on-right",name:"publish",onClick:this.updatePage,size:"sm"},{default:n(()=>[a(K,null,{default:n(()=>[y("Update current page")]),_:1})]),_:1},8,["onClick"]),a(x,{class:"on-right",name:"publish",onClick:this.appendPage,size:"sm"},{default:n(()=>[a(K,null,{default:n(()=>[y("Push as new page")]),_:1})]),_:1},8,["onClick"])]),l("div",Bs,[l("table",Ms,[l("tr",null,[l("td",Os,[a(gs,{modelValue:e.isCustom,"onUpdate:modelValue":[s[4]||(s[4]=r=>e.isCustom=r),this.updateType],color:"accent"},null,8,["modelValue","onUpdate:modelValue"])]),l("td",Ns,[a(w,{round:"",class:"q-pa-md",icon:"volume_up",color:"secondary",onClick:s[5]||(s[5]=r=>this.speak())})])]),l("tr",null,[l("td",Us,p(e.isCustom===!0?"Custom":"Random"),1),Hs])])]),l("div",Rs,[l("table",As,[l("tr",null,[Ls,l("td",Qs,[l("a",js,p(this.ck),1)])]),l("tr",null,[Fs,l("td",zs,[l("a",Ys,p(this.aid),1)])]),l("tr",null,[Es,l("td",Ws,[l("a",{class:"ptr float-left",onClick:s[6]||(s[6]=r=>this.loadURL(this.canonicalUrl))},p(this.pageid),1),a(x,{name:"bookmark",onClick:this.addBookmark,class:"float-right"},null,8,["onClick"])])]),l("tr",null,[Gs,l("td",Js,[l("span",Xs,[a(K,{class:"float-left"},{default:n(()=>[y(p(this.langVoiceKey),1)]),_:1})])])]),l("tr",null,[Zs,l("td",ea,[l("span",{onClick:s[7]||(s[7]=(...r)=>this.nextImg&&this.nextImg(...r)),class:"ptr float-left"},p(this.imgIdx+1)+" / "+p(this.imgTot),1),l("span",{class:"float-right ptr",onClick:s[8]||(s[8]=(...r)=>this.saveCurrentImage&&this.saveCurrentImage(...r))},[a(x,{name:"bookmark"})])])]),l("tr",{class:"ptr",onClick:s[9]||(s[9]=(...r)=>this.cycleFitMode&&this.cycleFitMode(...r))},[ta,l("td",null,[l("span",sa,p(this.imgFit),1),a(x,{class:"float-right",name:"fit_screen"})])]),l("tr",null,[aa,l("td",oa,[y(p(this.guideWords.replaceAll(",",", "))+" ",1),a(x,{class:"float-right",name:"tune",onClick:s[10]||(s[10]=r=>this.promptGuideWords=!0)})])]),l("tr",null,[la,l("td",null,[l("span",na,p(this.pctReplace)+" %",1),a(x,{class:"float-right",name:"tune"})])]),l("tr",null,[ia,l("td",{onClick:s[11]||(s[11]=(...r)=>this.mapCB&&this.mapCB(...r)),class:"ptr"},[l("span",ra,p(this.mapCoords),1),a(x,{class:"float-right",name:"place"})])]),l("tr",null,[da,l("td",{onClick:s[12]||(s[12]=(...r)=>this.toggleText&&this.toggleText(...r)),class:"ptr"},[a(x,{class:"float-right",name:"article"})])]),l("tr",null,[ua,l("td",null,[(u(!0),f(j,null,re(this.reStore.page.currentLangLinks,(r,k)=>(u(),f("span",{key:k,onClick:T=>this.langLinkCB(r)},[this.langNames.indexOf(r.lang)>-1?(u(),f("span",ma,[l("u",null,p(r.lang),1),y(",\xA0 ")])):z("",!0)],8,ca))),128))])])])])]),_:1})]),_:1}),a(q,{flat:""},{default:n(()=>[a(U,null,{default:n(()=>[a(Te,{padding:"",class:"rounded-borders"},{default:n(()=>[a(qe,{"header-style":{border:"1px solid gray"},label:"Page Images"},{default:n(()=>[this.imgs.length?(u(),f("div",ha,[(u(!0),f(j,null,re(this.imgs,(r,k)=>(u(),N(q,{bordered:"",class:"q-ma-sm",flat:"",modelValue:this.imgs,"onUpdate:modelValue":s[13]||(s[13]=T=>this.imgs=T),key:k},{default:n(()=>[l("div",ga,[l("span",fa,[a(x,{name:"bookmark",onClick:T=>this.saveImage(k,r)},null,8,["onClick"]),a(x,{name:"article",onClick:this.toggleText},{default:n(()=>[a(K,null,{default:n(()=>[y("Convenience button to toggle current text ")]),_:1})]),_:1},8,["onClick"]),a(x,{name:"fit_screen",onClick:this.cycleFitMode},{default:n(()=>[a(K,null,{default:n(()=>[y("Convenience button to toggle current image-fit mode ")]),_:1})]),_:1},8,["onClick"])]),r.cap?(u(),f("span",va,p(r.cap.slice(0,25)),1)):z("",!0),l("span",pa,[a(x,{name:"close",onClick:T=>this.remove(k,r)},null,8,["onClick"])])]),a(De,{class:"cardimage",onClick:T=>this.imgCB(k,r),src:r.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])):z("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var ya=se(Ts,[["render",_a]]);const Ca=te({name:"ImagesComponent",setup(){return{reStore:ae(),newCap:m(""),newDesc:m(""),newName:m(""),newSource:m(""),newUrl:m(""),promptAddImage:m(!1)}},mounted(){L(this.reStore.userSnapshot.images,async(e,s)=>{console.log("watcher ",e,s)})},methods:{addImageCB(){console.log("addImageCB",this.newUrl);const e={name:this.newName,desc:this.newDesc,cap:this.newCap,source:this.newSource,url:this.newUrl};this.reStore.saveImage(null,e)},imgCB(e,s){this.reStore.router.push("/teacher/editor"),console.log(e,s),this.reStore.loadImgId(e)},remove(e,s){console.log(e,s),this.reStore.removeImage(e)}}}),ka={class:"q-pa-md",style:{"max-width":"350px"}},Sa={class:"row cardheader justify-between"},$a={class:""},ba={key:0},wa={class:"history-remove ptr"};function Va(e,s,c,_,V,B){return u(),f(j,null,[a(Se,{modelValue:e.promptAddImage,"onUpdate:modelValue":s[5]||(s[5]=d=>e.promptAddImage=d)},{default:n(()=>[a(q,null,{default:n(()=>[a(U,null,{default:n(()=>[a(ie,{modelValue:e.newCap,"onUpdate:modelValue":s[0]||(s[0]=d=>e.newCap=d),label:"caption"},null,8,["modelValue"]),a(ie,{modelValue:e.newDesc,"onUpdate:modelValue":s[1]||(s[1]=d=>e.newDesc=d),label:"description"},null,8,["modelValue"]),a(ie,{modelValue:e.newName,"onUpdate:modelValue":s[2]||(s[2]=d=>e.newName=d),label:"name"},null,8,["modelValue"]),a(ie,{modelValue:e.newSource,"onUpdate:modelValue":s[3]||(s[3]=d=>e.newSource=d),label:"source"},null,8,["modelValue"]),a(ie,{modelValue:e.newUrl,"onUpdate:modelValue":s[4]||(s[4]=d=>e.newUrl=d),label:"url"},null,8,["modelValue"])]),_:1}),a(ke,{align:"center",class:"text-white"},{default:n(()=>[E(a(w,{flat:"",label:"Cancel"},null,512),[[W]]),E(a(w,{flat:"",label:"Add",onClick:this.addImageCB},null,8,["onClick"]),[[W]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l("div",ka,[a(Te,{bordered:"",class:"rounded-borders"},{default:n(()=>[a(qe,{label:"Saved Images"},{header:n(()=>[a(de,{avatar:""},{default:n(()=>[a(st,{icon:"image"})]),_:1}),a(de,null,{default:n(()=>[y(" Images ")]),_:1})]),default:n(()=>[a(q,null,{default:n(()=>[a(Ce,{class:"bg-primary text-white rounded-borders q-my-md"},{default:n(()=>[a(w,{bordered:"","no-caps":"",standout:"",onClick:s[6]||(s[6]=d=>e.promptAddImage=!0)},{default:n(()=>[y(" Add Image "),a(K,null,{default:n(()=>[y("Add a custom image (only saves url, not image data)")]),_:1})]),_:1})]),_:1}),l("div",null,[(u(!0),f(j,null,re(this.reStore.userSnapshot.images,(d,r)=>(u(),N(q,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":s[7]||(s[7]=k=>this.reStore.userSnapshot.images=k),key:r},{default:n(()=>[l("div",Sa,[l("span",$a,[a(x,{name:"title",onClick:k=>this.reStore.setCover(d)},null,8,["onClick"])]),d.cap?(u(),f("span",ba,p(d.cap.slice(0,25)),1)):z("",!0),l("span",wa,[a(x,{name:"close",onClick:k=>this.remove(r,d)},null,8,["onClick"])])]),a(De,{class:"cardimage",onClick:k=>this.imgCB(r,d),src:d.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])],64)}var xa=se(Ca,[["render",Va]]);const Da=te({name:"BookmarksComponent",setup(){return{reStore:ae()}},mounted(){L(this.reStore.userSnapshot.bookmarks,async(e,s)=>{console.log("watcher ",e,s)})},methods:{imgCB(e,s){this.reStore.router.push("/teacher/editor"),console.log(e,s),this.reStore.page=s,this.reStore.courses.imgIdx=s.imgIdx,this.reStore.courses.trigger+=1,this.reStore.courses.pageid=s.pageid},remove(e,s){console.log(e,s),this.reStore.removeBookmark(e)}}}),qa={class:"q-pa-md",style:{"max-width":"350px"}},Ta={class:"row cardheader justify-between"},Ia={class:"history-remove hidden"},Ka={key:0,class:"fi fi-gb"},Pa={key:1,class:"fi fi-us"},Ba={key:2,class:"fi fi-mx"},Ma={key:3,class:"fi fi-fr"},Oa={key:4,class:"fi fi-de"},Na={key:5,class:"fi fi-it"},Ua={key:6,class:"fi fi-br"},Ha={key:7,class:"fi fi-ke"},Ra={key:8,class:"fi fi-ru"},Aa={key:9,class:"fi fi-th"},La={key:10,class:"fi fi-cn"},Qa={key:11,class:"fi fi-hk"},ja={key:12,class:"fi fi-tw"},Fa={key:13,class:"fi fi-kr"},za={key:14,class:"fi fi-jp"},Ya={key:15,class:"fi fi-id"},Ea={key:16,class:"fi fi-xx"},Wa={class:"history-remove ptr"};function Ga(e,s,c,_,V,B){return u(),f("div",qa,[a(Te,{bordered:"",class:"rounded-borders"},{default:n(()=>[a(qe,{label:"Wikipedia Bookmarks"},{header:n(()=>[a(de,{avatar:""},{default:n(()=>[a(st,{icon:"bookmark"})]),_:1}),a(de,null,{default:n(()=>[y(" Bookmarks ")]),_:1})]),default:n(()=>[a(q,null,{default:n(()=>[l("div",null,[(u(!0),f(j,null,re(this.reStore.userSnapshot.bookmarks,(d,r)=>(u(),N(q,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":s[0]||(s[0]=k=>this.reStore.userSnapshot.bookmarks=k),key:r},{default:n(()=>[l("div",Ta,[l("span",Ia,[a(x)]),d.langVoiceKey==="Eng-UK-Fem"?(u(),f("span",Ka)):d.langVoiceKey==="Eng-US"?(u(),f("span",Pa)):d.langVoiceKey==="espa\xF1ol"?(u(),f("span",Ba)):d.langVoiceKey==="fran\xE7ais"?(u(),f("span",Ma)):d.langVoiceKey==="Deutsch"?(u(),f("span",Oa)):d.langVoiceKey==="italiano"?(u(),f("span",Na)):d.langVoiceKey==="portugu\xEAs do Brasil"?(u(),f("span",Ua)):d.langVoiceKey==="Kiswahili"?(u(),f("span",Ha)):d.langVoiceKey==="\u0440\u0443\u0441\u0441\u043A\u0438\u0439"?(u(),f("span",Ra)):d.langVoiceKey==="\u0E44\u0E17\u0E22"?(u(),f("span",Aa)):d.langVoiceKey==="\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09"?(u(),f("span",La)):d.langVoiceKey==="\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09"?(u(),f("span",Qa)):d.langVoiceKey==="\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09"?(u(),f("span",ja)):d.langVoiceKey==="\uD55C\uAD6D\uC758"?(u(),f("span",Fa)):d.langVoiceKey==="\u65E5\u672C\u8A9E"?(u(),f("span",za)):d.langVoiceKey==="Bahasa Indonesia"?(u(),f("span",Ya)):(u(),f("span",Ea)),y(" "+p(d.pageTitle.slice(0,25))+" ",1),l("span",Wa,[a(x,{name:"close",onClick:k=>this.remove(r,d)},null,8,["onClick"])])]),a(De,{class:"cardimage",onClick:k=>this.imgCB(r,d),src:d.imgs[d.imgIdx].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])}var Ja=se(Da,[["render",Ga]]);const Xa=["gregorian","persian"],Za={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Xa.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},eo=["update:modelValue"];function le(e){return e.year+"/"+he(e.month)+"/"+he(e.day)}function to(e,s){const c=$(()=>e.disable!==!0&&e.readonly!==!0),_=$(()=>e.editable===!0?0:-1),V=$(()=>{const r=[];return e.color!==void 0&&r.push(`bg-${e.color}`),e.textColor!==void 0&&r.push(`text-${e.textColor}`),r.join(" ")});function B(){return e.locale!==void 0?{...s.lang.date,...e.locale}:s.lang.date}function d(r){const k=new Date,T=r===!0?null:0;if(e.calendar==="persian"){const J=us(k);return{year:J.jy,month:J.jm,day:J.jd}}return{year:k.getFullYear(),month:k.getMonth()+1,day:k.getDate(),hour:T,minute:T,second:T,millisecond:T}}return{editable:c,tabindex:_,headerClass:V,getLocale:B,getCurrentDate:d}}const me=20,so=["Calendar","Years","Months"],xt=e=>so.includes(e),tt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),ye=" \u2014 ";function ne(e){return e.year+"/"+he(e.month)}var ao=at({name:"QDate",props:{...Za,...Et,...vs,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:tt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:tt},navigationMaxYearMonth:{type:String,validator:tt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:xt}},emits:[...eo,"rangeStart","rangeEnd","navigation"],setup(e,{slots:s,emit:c}){const{proxy:_}=as(),{$q:V}=_,B=ps(e,V),{getCache:d}=Xt(),{tabindex:r,headerClass:k,getLocale:T,getCurrentDate:J}=to(e,V);let ge;const Ue=Wt(e),He=Gt(Ue),$e=m(null),X=m(mt()),P=m(T()),Re=$(()=>mt()),M=$(()=>T()),Z=$(()=>J()),S=m(ht(X.value,P.value)),Q=m(e.defaultView),lt=V.lang.rtl===!0?"right":"left",Ie=m(lt.value),Ae=m(lt.value),Le=S.value.year,Ke=m(Le-Le%me-(Le<0?me:0)),H=m(null),qt=$(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(B.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),ue=$(()=>e.color||"primary"),fe=$(()=>e.textColor||"white"),Pe=$(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Qe=$(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),Y=$(()=>Qe.value.filter(t=>typeof t=="string").map(t=>Ye(t,X.value,P.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),ve=$(()=>{const t=o=>Ye(o,X.value,P.value);return Qe.value.filter(o=>ts(o)===!0&&o.from!==void 0&&o.to!==void 0).map(o=>({from:t(o.from),to:t(o.to)})).filter(o=>o.from.dateHash!==null&&o.to.dateHash!==null&&o.from.dateHash<o.to.dateHash)}),Be=$(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const o=wt(t.year,t.month,t.day);return new Date(o.gy,o.gm-1,o.gd)}),je=$(()=>e.calendar==="persian"?le:(t,o,i)=>cs(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),o===void 0?X.value:o,i===void 0?P.value:i,t.year,t.timezoneOffset)),be=$(()=>Y.value.length+ve.value.reduce((t,o)=>t+1+ms(Be.value(o.to),Be.value(o.from)),0)),nt=$(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(H.value!==null){const i=H.value.init,g=Be.value(i);return P.value.daysShort[g.getDay()]+", "+P.value.monthsShort[i.month-1]+" "+i.day+ye+"?"}if(be.value===0)return ye;if(be.value>1)return`${be.value} ${P.value.pluralDay}`;const t=Y.value[0],o=Be.value(t);return isNaN(o.valueOf())===!0?ye:P.value.headerTitle!==void 0?P.value.headerTitle(o,t):P.value.daysShort[o.getDay()]+", "+P.value.monthsShort[t.month-1]+" "+t.day}),Tt=$(()=>Y.value.concat(ve.value.map(o=>o.from)).sort((o,i)=>o.year-i.year||o.month-i.month)[0]),It=$(()=>Y.value.concat(ve.value.map(o=>o.to)).sort((o,i)=>i.year-o.year||i.month-o.month)[0]),it=$(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(be.value===0)return ye;if(be.value>1){const t=Tt.value,o=It.value,i=P.value.monthsShort;return i[t.month-1]+(t.year!==o.year?" "+t.year+ye+i[o.month-1]+" ":t.month!==o.month?ye+i[o.month-1]:"")+" "+o.year}return Y.value[0].year}),Me=$(()=>{const t=[V.iconSet.datetime.arrowLeft,V.iconSet.datetime.arrowRight];return V.lang.rtl===!0?t.reverse():t}),rt=$(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):P.value.firstDayOfWeek),Kt=$(()=>{const t=P.value.daysShort,o=rt.value;return o>0?t.slice(o,7).concat(t.slice(0,o)):t}),oe=$(()=>{const t=S.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():et(t.year,t.month)}),Pt=$(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),R=$(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),A=$(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Fe=$(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return R.value!==null&&R.value.year>=S.value.year&&(t.year.prev=!1,R.value.year===S.value.year&&R.value.month>=S.value.month&&(t.month.prev=!1)),A.value!==null&&A.value.year<=S.value.year&&(t.year.next=!1,A.value.year===S.value.year&&A.value.month<=S.value.month&&(t.month.next=!1)),t}),Oe=$(()=>{const t={};return Y.value.forEach(o=>{const i=ne(o);t[i]===void 0&&(t[i]=[]),t[i].push(o.day)}),t}),dt=$(()=>{const t={};return ve.value.forEach(o=>{const i=ne(o.from),g=ne(o.to);if(t[i]===void 0&&(t[i]=[]),t[i].push({from:o.from.day,to:i===g?o.to.day:void 0,range:o}),i<g){let h;const{year:D,month:v}=o.from,b=v<12?{year:D,month:v+1}:{year:D+1,month:1};for(;(h=ne(b))<=g;)t[h]===void 0&&(t[h]=[]),t[h].push({from:void 0,to:h===g?o.to.day:void 0,range:o}),b.month++,b.month>12&&(b.year++,b.month=1)}}),t}),we=$(()=>{if(H.value===null)return;const{init:t,initHash:o,final:i,finalHash:g}=H.value,[h,D]=o<=g?[t,i]:[i,t],v=ne(h),b=ne(D);if(v!==F.value&&b!==F.value)return;const I={};return v===F.value?(I.from=h.day,I.includeFrom=!0):I.from=1,b===F.value?(I.to=D.day,I.includeTo=!0):I.to=oe.value,I}),F=$(()=>ne(S.value)),Bt=$(()=>{const t={};if(e.options===void 0){for(let i=1;i<=oe.value;i++)t[i]=!0;return t}const o=typeof e.options=="function"?e.options:i=>e.options.includes(i);for(let i=1;i<=oe.value;i++){const g=F.value+"/"+he(i);t[i]=o(g)}return t}),Mt=$(()=>{const t={};if(e.events===void 0)for(let o=1;o<=oe.value;o++)t[o]=!1;else{const o=typeof e.events=="function"?e.events:i=>e.events.includes(i);for(let i=1;i<=oe.value;i++){const g=F.value+"/"+he(i);t[i]=o(g)===!0&&Pt.value(g)}}return t}),Ot=$(()=>{let t,o;const{year:i,month:g}=S.value;if(e.calendar!=="persian")t=new Date(i,g-1,1),o=new Date(i,g-1,0).getDate();else{const h=wt(i,g,1);t=new Date(h.gy,h.gm-1,h.gd);let D=g-1,v=i;D===0&&(D=12,v--),o=et(v,D)}return{days:t.getDay()-rt.value-1,endDay:o}}),ut=$(()=>{const t=[],{days:o,endDay:i}=Ot.value,g=o<0?o+7:o;if(g<6)for(let v=i-g;v<=i;v++)t.push({i:v,fill:!0});const h=t.length;for(let v=1;v<=oe.value;v++){const b={i:v,event:Mt.value[v],classes:[]};Bt.value[v]===!0&&(b.in=!0,b.flat=!0),t.push(b)}if(Oe.value[F.value]!==void 0&&Oe.value[F.value].forEach(v=>{const b=h+v-1;Object.assign(t[b],{selected:!0,unelevated:!0,flat:!1,color:ue.value,textColor:fe.value})}),dt.value[F.value]!==void 0&&dt.value[F.value].forEach(v=>{if(v.from!==void 0){const b=h+v.from-1,I=h+(v.to||oe.value)-1;for(let Xe=b;Xe<=I;Xe++)Object.assign(t[Xe],{range:v.range,unelevated:!0,color:ue.value,textColor:fe.value});Object.assign(t[b],{rangeFrom:!0,flat:!1}),v.to!==void 0&&Object.assign(t[I],{rangeTo:!0,flat:!1})}else if(v.to!==void 0){const b=h+v.to-1;for(let I=h;I<=b;I++)Object.assign(t[I],{range:v.range,unelevated:!0,color:ue.value,textColor:fe.value});Object.assign(t[b],{flat:!1,rangeTo:!0})}else{const b=h+oe.value-1;for(let I=h;I<=b;I++)Object.assign(t[I],{range:v.range,unelevated:!0,color:ue.value,textColor:fe.value})}}),we.value!==void 0){const v=h+we.value.from-1,b=h+we.value.to-1;for(let I=v;I<=b;I++)t[I].color=ue.value,t[I].editRange=!0;we.value.includeFrom===!0&&(t[v].editRangeFrom=!0),we.value.includeTo===!0&&(t[b].editRangeTo=!0)}S.value.year===Z.value.year&&S.value.month===Z.value.month&&(t[h+Z.value.day-1].today=!0);const D=t.length%7;if(D>0){const v=7-D;for(let b=1;b<=v;b++)t.push({i:b,fill:!0})}return t.forEach(v=>{let b="q-date__calendar-item ";v.fill===!0?b+="q-date__calendar-item--fill":(b+=`q-date__calendar-item--${v.in===!0?"in":"out"}`,v.range!==void 0&&(b+=` q-date__range${v.rangeTo===!0?"-to":v.rangeFrom===!0?"-from":""}`),v.editRange===!0&&(b+=` q-date__edit-range${v.editRangeFrom===!0?"-from":""}${v.editRangeTo===!0?"-to":""}`),(v.range!==void 0||v.editRange===!0)&&(b+=` text-${v.color}`)),v.classes=b}),t}),Nt=$(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});L(()=>e.modelValue,t=>{if(ge===t)ge=0;else{const{year:o,month:i}=ht(X.value,P.value);pe(o,i)}}),L(Q,()=>{$e.value!==null&&_.$el.contains(document.activeElement)===!0&&$e.value.focus()}),L(()=>S.value.year,t=>{c("navigation",{year:t,month:S.value.month})}),L(()=>S.value.month,t=>{c("navigation",{year:S.value.year,month:t})}),L(Re,t=>{_t(t,P.value,"mask"),X.value=t}),L(M,t=>{_t(X.value,t,"locale"),P.value=t});function ct(){const t=Z.value,o=Oe.value[ne(t)];(o===void 0||o.includes(t.day)===!1)&&We(t),ze(t.year,t.month)}function Ut(t){xt(t)===!0&&(Q.value=t)}function Ht(t,o){["month","year"].includes(t)&&(t==="month"?ft:Ee)(o===!0?-1:1)}function ze(t,o){Q.value="Calendar",pe(t,o)}function Rt(t,o){if(e.range===!1||!t){H.value=null;return}const i=Object.assign({...S.value},t),g=o!==void 0?Object.assign({...S.value},o):i;H.value={init:i,initHash:le(i),final:g,finalHash:le(g)},ze(i.year,i.month)}function mt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ye(t,o,i){return hs(t,o,i,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function ht(t,o){const i=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(i.length===0)return gt();const g=i[i.length-1],h=Ye(g.from!==void 0?g.from:g,t,o);return h.dateHash===null?gt():h}function gt(){let t,o;if(e.defaultYearMonth!==void 0){const i=e.defaultYearMonth.split("/");t=parseInt(i[0],10),o=parseInt(i[1],10)}else{const i=Z.value!==void 0?Z.value:J();t=i.year,o=i.month}return{year:t,month:o,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+he(o)+"/01"}}function ft(t){let o=S.value.year,i=Number(S.value.month)+t;i===13?(i=1,o++):i===0&&(i=12,o--),pe(o,i),Pe.value===!0&&Ne("month")}function Ee(t){const o=Number(S.value.year)+t;pe(o,S.value.month),Pe.value===!0&&Ne("year")}function At(t){pe(t,S.value.month),Q.value=e.defaultView==="Years"?"Months":"Calendar",Pe.value===!0&&Ne("year")}function Lt(t){pe(S.value.year,t),Q.value="Calendar",Pe.value===!0&&Ne("month")}function Qt(t,o){const i=Oe.value[o];(i!==void 0&&i.includes(t.day)===!0?Ge:We)(t)}function ce(t){return{year:t.year,month:t.month,day:t.day}}function pe(t,o){R.value!==null&&t<=R.value.year&&(t=R.value.year,o<R.value.month&&(o=R.value.month)),A.value!==null&&t>=A.value.year&&(t=A.value.year,o>A.value.month&&(o=A.value.month));const i=t+"/"+he(o)+"/01";i!==S.value.dateHash&&(Ie.value=S.value.dateHash<i==(V.lang.rtl!==!0)?"left":"right",t!==S.value.year&&(Ae.value=Ie.value),Ct(()=>{Ke.value=t-t%me-(t<0?me:0),Object.assign(S.value,{year:t,month:o,day:1,dateHash:i})}))}function vt(t,o,i){const g=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;ge=g;const{reason:h,details:D}=pt(o,i);c("update:modelValue",g,h,D)}function Ne(t){const o=Y.value[0]!==void 0&&Y.value[0].dateHash!==null?{...Y.value[0]}:{...S.value};Ct(()=>{o.year=S.value.year,o.month=S.value.month;const i=e.calendar!=="persian"?new Date(o.year,o.month,0).getDate():et(o.year,o.month);o.day=Math.min(Math.max(1,o.day),i);const g=_e(o);ge=g;const{details:h}=pt("",o);c("update:modelValue",g,t,h)})}function pt(t,o){return o.from!==void 0?{reason:`${t}-range`,details:{...ce(o.target),from:ce(o.from),to:ce(o.to)}}:{reason:`${t}-day`,details:ce(o)}}function _e(t,o,i){return t.from!==void 0?{from:je.value(t.from,o,i),to:je.value(t.to,o,i)}:je.value(t,o,i)}function We(t){let o;if(e.multiple===!0)if(t.from!==void 0){const i=le(t.from),g=le(t.to),h=Y.value.filter(v=>v.dateHash<i||v.dateHash>g),D=ve.value.filter(({from:v,to:b})=>b.dateHash<i||v.dateHash>g);o=h.concat(D).concat(t).map(v=>_e(v))}else{const i=Qe.value.slice();i.push(_e(t)),o=i}else o=_e(t);vt(o,"add",t)}function Ge(t){if(e.noUnset===!0)return;let o=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const i=_e(t);t.from!==void 0?o=e.modelValue.filter(g=>g.from!==void 0?g.from!==i.from&&g.to!==i.to:!0):o=e.modelValue.filter(g=>g!==i),o.length===0&&(o=null)}vt(o,"remove",t)}function _t(t,o,i){const g=Y.value.concat(ve.value).map(h=>_e(h,t,o)).filter(h=>h.from!==void 0?h.from.dateHash!==null&&h.to.dateHash!==null:h.dateHash!==null);c("update:modelValue",(e.multiple===!0?g:g[0])||null,i)}function jt(){if(e.minimal!==!0)return C("div",{class:"q-date__header "+k.value},[C("div",{class:"relative-position"},[C(Ve,{name:"q-transition--fade"},()=>C("div",{key:"h-yr-"+it.value,class:"q-date__header-subtitle q-date__header-link "+(Q.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:r.value,...d("vY",{onClick(){Q.value="Years"},onKeyup(t){t.keyCode===13&&(Q.value="Years")}})},[it.value]))]),C("div",{class:"q-date__header-title relative-position flex no-wrap"},[C("div",{class:"relative-position col"},[C(Ve,{name:"q-transition--fade"},()=>C("div",{key:"h-sub"+nt.value,class:"q-date__header-title-label q-date__header-link "+(Q.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:r.value,...d("vC",{onClick(){Q.value="Calendar"},onKeyup(t){t.keyCode===13&&(Q.value="Calendar")}})},[nt.value]))]),e.todayBtn===!0?C(w,{class:"q-date__header-today self-start",icon:V.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:r.value,onClick:ct}):null])])}function Je({label:t,type:o,key:i,dir:g,goTo:h,boundaries:D,cls:v}){return[C("div",{class:"row items-center q-date__arrow"},[C(w,{round:!0,dense:!0,size:"sm",flat:!0,icon:Me.value[0],tabindex:r.value,disable:D.prev===!1,...d("go-#"+o,{onClick(){h(-1)}})})]),C("div",{class:"relative-position overflow-hidden flex flex-center"+v},[C(Ve,{name:"q-transition--jump-"+g},()=>C("div",{key:i},[C(w,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:r.value,...d("view#"+o,{onClick:()=>{Q.value=o}})})]))]),C("div",{class:"row items-center q-date__arrow"},[C(w,{round:!0,dense:!0,size:"sm",flat:!0,icon:Me.value[1],tabindex:r.value,disable:D.next===!1,...d("go+#"+o,{onClick(){h(1)}})})])]}const Ft={Calendar:()=>[C("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[C("div",{class:"q-date__navigation row items-center no-wrap"},Je({label:P.value.months[S.value.month-1],type:"Months",key:S.value.month,dir:Ie.value,goTo:ft,boundaries:Fe.value.month,cls:" col"}).concat(Je({label:S.value.year,type:"Years",key:S.value.year,dir:Ae.value,goTo:Ee,boundaries:Fe.value.year,cls:""}))),C("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Kt.value.map(t=>C("div",{class:"q-date__calendar-item"},[C("div",t)]))),C("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[C(Ve,{name:"q-transition--slide-"+Ie.value},()=>C("div",{key:F.value,class:"q-date__calendar-days fit"},ut.value.map(t=>C("div",{class:t.classes},[t.in===!0?C(w,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:r.value,...d("day#"+t.i,{onClick:()=>{zt(t.i)},onMouseover:()=>{Yt(t.i)}})},t.event!==!1?()=>C("div",{class:"q-date__event bg-"+t.event}):null):C("div",""+t.i)]))))])])],Months(){const t=S.value.year===Z.value.year,o=g=>R.value!==null&&S.value.year===R.value.year&&R.value.month>g||A.value!==null&&S.value.year===A.value.year&&A.value.month<g,i=P.value.monthsShort.map((g,h)=>{const D=S.value.month===h+1;return C("div",{class:"q-date__months-item flex flex-center"},[C(w,{class:t===!0&&Z.value.month===h+1?"q-date__today":null,flat:D!==!0,label:g,unelevated:D,color:D===!0?ue.value:null,textColor:D===!0?fe.value:null,tabindex:r.value,disable:o(h+1),...d("month#"+h,{onClick:()=>{Lt(h+1)}})})])});return e.yearsInMonthView===!0&&i.unshift(C("div",{class:"row no-wrap full-width"},[Je({label:S.value.year,type:"Years",key:S.value.year,dir:Ae.value,goTo:Ee,boundaries:Fe.value.year,cls:" col"})])),C("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},i)},Years(){const t=Ke.value,o=t+me,i=[],g=h=>R.value!==null&&R.value.year>h||A.value!==null&&A.value.year<h;for(let h=t;h<=o;h++){const D=S.value.year===h;i.push(C("div",{class:"q-date__years-item flex flex-center"},[C(w,{key:"yr"+h,class:Z.value.year===h?"q-date__today":null,flat:!D,label:h,dense:!0,unelevated:D,color:D===!0?ue.value:null,textColor:D===!0?fe.value:null,tabindex:r.value,disable:g(h),...d("yr#"+h,{onClick:()=>{At(h)}})})]))}return C("div",{class:"q-date__view q-date__years flex flex-center"},[C("div",{class:"col-auto"},[C(w,{round:!0,dense:!0,flat:!0,icon:Me.value[0],tabindex:r.value,disable:g(t),...d("y-",{onClick:()=>{Ke.value-=me}})})]),C("div",{class:"q-date__years-content col self-stretch row items-center"},i),C("div",{class:"col-auto"},[C(w,{round:!0,dense:!0,flat:!0,icon:Me.value[1],tabindex:r.value,disable:g(o),...d("y+",{onClick:()=>{Ke.value+=me}})})])])}};function zt(t){const o={...S.value,day:t};if(e.range===!1){Qt(o,F.value);return}if(H.value===null){const i=ut.value.find(h=>h.fill!==!0&&h.i===t);if(e.noUnset!==!0&&i.range!==void 0){Ge({target:o,from:i.range.from,to:i.range.to});return}if(i.selected===!0){Ge(o);return}const g=le(o);H.value={init:o,initHash:g,final:o,finalHash:g},c("rangeStart",ce(o))}else{const i=H.value.initHash,g=le(o),h=i<=g?{from:H.value.init,to:o}:{from:o,to:H.value.init};H.value=null,We(i===g?o:{target:o,...h}),c("rangeEnd",{from:ce(h.from),to:ce(h.to)})}}function Yt(t){if(H.value!==null){const o={...S.value,day:t};Object.assign(H.value,{final:o,finalHash:le(o)})}}return Object.assign(_,{setToday:ct,setView:Ut,offsetCalendar:Ht,setCalendarTo:ze,setEditingRange:Rt}),()=>{const t=[C("div",{class:"q-date__content col relative-position"},[C(Ve,{name:"q-transition--fade"},Ft[Q.value])])],o=ss(s.default);return o!==void 0&&t.push(C("div",{class:"q-date__actions"},o)),e.name!==void 0&&e.disable!==!0&&He(t,"push"),C("div",{class:qt.value,...Nt.value},[jt(),C("div",{ref:$e,class:"q-date__main col column",tabindex:-1},t)])}}});const oo=["top","middle","bottom"];var lo=at({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>oo.includes(e)}},setup(e,{slots:s}){const c=$(()=>e.align!==void 0?{verticalAlign:e.align}:null),_=$(()=>{const V=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(V!==void 0?` text-${V}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>C("div",{class:_.value,style:c.value,role:"status","aria-label":e.label},os(s.default,e.label!==void 0?[e.label]:[]))}});const no=te({name:"OTDComponent",setup(){const e=ae(),s=Date.now(),c=Vt.formatDate(s,"MM/DD");return{reStore:e,otditems:m([]),promptOTDDate:m(!1),otddate:m(Date.now()),otdlabel:m(c),otdtype:m("selected")}},mounted(){this.init(),L(this.reStore.preferences,async(e,s)=>{console.log("OTD watcher"),e.langVoiceKey!==s.langVoiceKey?this.init():(console.log("OTD watcher ",e),this.init())})},methods:{async init(){console.log("OTD init");const e=this.reStore.preferences.langVoiceKey;await this.reStore.wiki.setLang(this.reStore.langVoices[e].langName);const s=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=s[this.otdtype],console.log(this.otditems);for(const[_,V]of Object.entries(this.reStore.langVoices)){const B=V.flagName;G("#otdfi").classed(B,!1)}const c=this.reStore.langVoices[e].flagName;G("#otdfi").classed(c,!0)},async loadPageId(e){console.log("loadPageId ",e);const s=this.reStore.preferences.langVoiceKey;console.log("OTD load ",s),this.reStore.loadPageId(e,s),this.reStore.router.push("/teacher/editor")},async load(e){console.log("load",this.otditems[e].text),console.log("load",this.otditems[e]);const s=this.reStore.preferences.langVoiceKey;console.log("OTD load ",s),this.reStore.loadPageId(this.otditems[e].pages[0].pageid,s),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const e=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=e.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=Vt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(e){console.log("otdOptionsCB",this.otdtype);const s=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=s[this.otdtype]}}}),io=l("div",{class:"text-h6"},"Select Date",-1),ro={class:"q-pa-md",style:{"max-width":"350px"}},uo={class:"q-gutter-y-sm column"},co=l("span",{id:"otdfi",class:"pfi text-h4"},null,-1),mo={class:""},ho=["onClick"],go=l("br",null,null,-1);function fo(e,s,c,_,V,B){return u(),f(j,null,[a(Se,{modelValue:e.promptOTDDate,"onUpdate:modelValue":s[2]||(s[2]=d=>e.promptOTDDate=d),persistent:""},{default:n(()=>[a(q,{style:{"min-width":"350px"}},{default:n(()=>[a(U,{align:"center"},{default:n(()=>[io]),_:1}),a(ao,{modelValue:e.otddate,"onUpdate:modelValue":s[0]||(s[0]=d=>e.otddate=d),minimal:""},null,8,["modelValue"]),a(ke,{align:"center",class:"text-white"},{default:n(()=>[E(a(w,{flat:"",label:"Cancel"},null,512),[[W]]),E(a(w,{flat:"",label:"Update OTD date",onClick:s[1]||(s[1]=d=>this.updateOTDDate())},null,512),[[W]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l("div",ro,[a(Te,{bordered:"",class:"rounded-borders"},{default:n(()=>[a(qe,null,{header:n(()=>[a(de,{avatar:""},{default:n(()=>[a(st,{icon:"stars"})]),_:1}),a(de,null,{default:n(()=>[y(" On This Day ")]),_:1})]),default:n(()=>[a(q,null,{default:n(()=>[l("div",uo,[a(Ce,{class:"bg-primary text-white rounded-borders q-my-md"},{default:n(()=>[a(w,{dark:"",standout:"",onClick:s[3]||(s[3]=d=>e.promptOTDDate=!0)},{default:n(()=>[y(p(e.otdlabel),1)]),_:1}),a(xe),co,a(xe),a(Dt,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":s[4]||(s[4]=d=>this.otdtype=d),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:s[5]||(s[5]=d=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),l("div",mo,[(u(!0),f(j,null,re(e.otditems,(d,r)=>(u(),N(q,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:e.otditems,"onUpdate:modelValue":s[6]||(s[6]=k=>e.otditems=k),key:r},{default:n(()=>[l("span",{style:{cursor:"pointer"},onClick:k=>this.load(r)},p(r),9,ho),y(". "+p(d.year)+" "+p(d.text),1),go,(u(!0),f(j,null,re(d.pages,(k,T)=>(u(),f("span",{key:T},[a(lo,{class:"on-left",color:"accent",style:{cursor:"pointer"},onClick:J=>this.loadPageId(k.pageid)},{default:n(()=>[a(K,null,{default:n(()=>[y(p(k.title),1)]),_:2},1024),a(x,{size:"xs",name:"link"})]),_:2},1032,["onClick"])]))),128))]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])],64)}var vo=se(no,[["render",fo]]);const po=te({name:"CurrentAssignment",setup(){const e=ae();return{reStore:e,ck:m("-"),goal:m("-"),created:m("-"),updated:m("-"),id:m("-"),points:m("-"),pages:m([]),pgIdx:m(e.courses.pgIdx),title:m(""),promptEditTitle:m(!1)}},mounted(){console.log("CurrentAssignment mounted"),L(this.reStore.courses,async(e,s)=>{try{console.log("CurrentAssignment.watcher");const c=e.ck,_=e.aid;this.id=_,this.ck=c,this.goal=this.reStore.courses[c].assignments[_].goal,this.created=this.reStore.courses[c].assignments[_].created,this.updated=this.reStore.courses[c].assignments[_].updated,this.points=this.reStore.courses[c].assignments[_].points;try{const V=this.reStore.courses[c].assignments[_].pages.length;console.log("pages.length ",V)}catch{this.reStore.courses[c].assignments[_].pages=[]}this.pages=this.reStore.courses[c].assignments[_].pages,this.title=this.reStore.courses[c].assignments[_].title,this.pgIdx=this.reStore.courses.pgIdx}catch(c){console.log(c)}},{immediate:!0,deep:!0})},methods:{save(){console.log("save"),this.reStore.saveCurrentAssignment()},nextPage(){this.reStore.nextPage()},changeTitleCB(){console.log("CurrentAssignment.changeTitleCB",this.title),this.reStore.setAssignmentTitle(this.reStore.courses.ck,this.reStore.courses.aid,this.title)}}}),_o=l("div",{class:"text-h6"},"Change assignment title",-1),yo={class:"text-weight-bolder text-center q-pa-md text-white"},Co=l("br",null,null,-1),ko={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},So={width:"100%"},$o=l("td",null,"Title",-1),bo={style:{width:"50%"}},wo=l("td",null,"Course-Key",-1),Vo={style:{width:"50%"}},xo=l("td",null,"Assgmnt Id",-1),Do={style:{width:"50%"}},qo=l("td",null,"Created",-1),To={style:{width:"50%"}},Io=l("td",null,"Updated",-1),Ko={style:{width:"50%"}},Po=l("td",null,"Goal",-1),Bo={style:{width:"50%"}},Mo=l("td",null,"Pages",-1);function Oo(e,s,c,_,V,B){const d=O("router-link");return u(),f(j,null,[a(Se,{modelValue:e.promptEditTitle,"onUpdate:modelValue":s[3]||(s[3]=r=>e.promptEditTitle=r),persistent:""},{default:n(()=>[a(q,{style:{"min-width":"350px"}},{default:n(()=>[a(U,null,{default:n(()=>[_o]),_:1}),a(U,{class:"q-pt-none"},{default:n(()=>[a(ie,{dense:"",modelValue:e.title,"onUpdate:modelValue":s[0]||(s[0]=r=>e.title=r),autofocus:"",onKeyup:s[1]||(s[1]=ot(r=>{e.prompt=!1,this.changeTitleCB()},["enter"]))},null,8,["modelValue"])]),_:1}),a(ke,{align:"right",class:"text-white"},{default:n(()=>[E(a(w,{outline:"",label:"Cancel"},null,512),[[W]]),E(a(w,{outline:"",label:"Save",onClick:s[2]||(s[2]=r=>this.changeTitleCB())},null,512),[[W]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(q,{flat:""},{default:n(()=>[a(U,null,{default:n(()=>[l("div",yo,[a(d,{to:"/teacher/editor",class:"text-white"},{default:n(()=>[y(p(this.title.slice(0,20)),1)]),_:1}),Co,a(x,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:s[4]||(s[4]=r=>this.promptEditTitle=!0),size:"sm"}),a(x,{style:{cursor:"pointer"},class:"on-right",name:"save",onClick:this.save,size:"sm"},null,8,["onClick"])]),l("div",ko,[l("table",So,[l("tr",null,[$o,l("td",bo,p(this.title),1)]),l("tr",null,[wo,l("td",Vo,p(this.ck),1)]),l("tr",null,[xo,l("td",Do,p(this.id),1)]),l("tr",null,[qo,l("td",To,p(this.created),1)]),l("tr",null,[Io,l("td",Ko,p(this.updated),1)]),l("tr",null,[Po,l("td",Bo,p(this.goal),1)]),l("tr",null,[Mo,l("td",{style:{width:"50%",cursor:"pointer"},onClick:s[5]||(s[5]=r=>this.nextPage())},p(this.pgIdx+1)+" / "+p(this.pages.length),1)])])])]),_:1})]),_:1})],64)}var No=se(po,[["render",Oo]]);const Uo=te({name:"CurrentCourse",setup(){return{reStore:ae(),title:m(""),assignmentCount:m(0),courseKey:m(""),created:m(""),updated:m(""),enrollmentCount:m(0),owner:m("")}},mounted(){console.log("CurrentCourse mounted"),L(this.reStore.courses,async(e,s)=>{try{if(this.reStore.courses.ck!=="undefined"){const c=this.reStore.courses.ck;console.log("CurrentCourse ",c),this.title=this.reStore.courses[c].title,this.courseKey=this.reStore.courses[c].courseKey,this.created=this.reStore.courses[c].created,this.updated=this.reStore.courses[c].updated,this.assignmentCount=Object.keys(this.reStore.courses[c].assignments).length,this.enrollmentCount=Object.keys(this.reStore.courses[c].enrollment).length,this.owner=this.reStore.courses[c].owner}}catch(c){console.log(c)}},{immediate:!0,deep:!0})},methods:{dummy(){console.log("dummy")}}}),Ho={class:"text-weight-bolder text-center q-pa-md"},Ro={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Ao={width:"100%"},Lo=l("td",null,"Title",-1),Qo={style:{width:"50%"}},jo=l("td",null,"Course-Key",-1),Fo={style:{width:"50%"}},zo=l("td",null,"Created",-1),Yo={style:{width:"50%"}},Eo=l("td",null,"Updated",-1),Wo={style:{width:"50%"}},Go=l("td",null,"Owner",-1),Jo={style:{width:"50%"}},Xo=l("td",null,"Assignments",-1),Zo={style:{width:"50%"}},el=l("td",null,"Enrollment",-1),tl={style:{width:"50%"}};function sl(e,s,c,_,V,B){return u(),N(q,{flat:""},{default:n(()=>[a(U,null,{default:n(()=>[l("div",Ho,p(this.title),1),l("div",Ro,[l("table",Ao,[l("tr",null,[Lo,l("td",Qo,p(this.title),1)]),l("tr",null,[jo,l("td",Fo,p(this.courseKey),1)]),l("tr",null,[zo,l("td",Yo,p(this.created),1)]),l("tr",null,[Eo,l("td",Wo,p(this.updated),1)]),l("tr",null,[Go,l("td",Jo,p(this.owner.slice(0,10)),1)]),l("tr",null,[Xo,l("td",Zo,p(this.assignmentCount),1)]),l("tr",null,[el,l("td",tl,p(this.enrollmentCount),1)])])])]),_:1})]),_:1})}var al=se(Uo,[["render",sl]]);const ol=te({name:"PagerComponent",setup(){return{reStore:ae(),assignment:m(null)}},mounted(){console.log("mounted"),this.reStore.courses.ck&&this.reStore.courses.aid&&(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[this.reStore.courses.ck].assignments[this.reStore.courses.aid]))),L(this.reStore.courses,async(e,s)=>{if(this.reStore.courses.aid||(this.assignment=null),!this.assignment)this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid]));else{const c=this.assignment.ck,_=this.assignment.id;(c!==e.ck||_!==e.aid)&&(console.log("PagerComponent assignment changed"),this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid])))}})},methods:{nextImg(e){const s=this.assignment.pages[e].imgIdx,c=this.assignment.pages[e].imgs.length;s+1<c?this.assignment.pages[e].imgIdx+=1:this.assignment.pages[e].imgIdx=0},prevImg(e){const s=this.assignment.pages[e].imgIdx,c=this.assignment.pages[e].imgs.length;s-1>-1?this.assignment.pages[e].imgIdx-=1:this.assignment.pages[e].imgIdx=c-1},loadCoverCB(){console.log("Pager loadCoverCB "),this.reStore.loadCover()},loadPageCB(e){console.log("Pager loadPageCB ",e),this.reStore.page=this.assignment.pages[e],this.reStore.courses.pgIdx=e,this.reStore.page.imgIdx=this.assignment.pages[e].imgIdx,this.reStore.courses.imgIdx=this.assignment.pages[e].imgIdx,ee(".assignment").classed("hidden",!1),ee(".coverslide").classed("hidden",!0),this.reStore.courses.trigger+=1},remove(e){console.log("remove ",e);const s=this.reStore.ck,c=this.reStore.aid;this.assignment.pages.splice(e,e+1),this.reStore.courses[s].assignments[c].pages.splice(e,e+1),this.reStore.courses.trigger+=1},dummy(){console.log("dummy")}}}),ll={class:"flex flex-center"},nl={class:"text-weight-bolder text-center q-pa-xs"},il={key:0},rl={class:"text-weight-bolder text-center q-pa-xs"},dl={key:0},ul=l("div",{class:"text-weight-bolder text-center q-pa-xs"}," Page ",-1),cl={key:0},ml=l("span",{class:"float-left"},"Cover Page",-1),hl={class:"float-left"},gl={key:0,class:"float-left on-left"},fl=l("br",null,null,-1),vl={class:"custLED"},pl={key:1,class:"float-left on-left"},_l=l("br",null,null,-1),yl={class:"randLED"},Cl={style:{"vertical-align":"top"}},kl={class:"float-right"},Sl={class:"float-right"},$l={key:0,class:"fi fi-gb"},bl={key:1,class:"fi fi-us"},wl={key:2,class:"fi fi-mx"},Vl={key:3,class:"fi fi-fr"},xl={key:4,class:"fi fi-de"},Dl={key:5,class:"fi fi-it"},ql={key:6,class:"fi fi-br"},Tl={key:7,class:"fi fi-ke"},Il={key:8,class:"fi fi-ru"},Kl={key:9,class:"fi fi-th"},Pl={key:10,class:"fi fi-cn"},Bl={key:11,class:"fi fi-hk"},Ml={key:12,class:"fi fi-tw"},Ol={key:13,class:"fi fi-kr"},Nl={key:14,class:"fi fi-jp"},Ul={key:15,class:"fi fi-id"},Hl={key:16,class:"fi fi-xx"};function Rl(e,s,c,_,V,B){const d=O("router-link");return u(),N(q,{flat:"",style:{"max-width":"300px"},class:"q-pa-xs"},{default:n(()=>[a(U,null,{default:n(()=>[l("div",ll,p(this.reStore.courses.ck.slice(0,3))+" | "+p(this.reStore.courses.aid.slice(0,3))+" | "+p(this.reStore.courses.pageid)+" | "+p(this.reStore.courses.imgIdx)+" | "+p(this.reStore.courses.pgIdx)+" | "+p(this.reStore.courses.trigger),1),l("div",nl,[y("Course: "),this.assignment?(u(),f("span",il,p(this.reStore.courses[this.assignment.ck].title),1)):z("",!0)]),l("div",rl,[y(" Title: "),this.assignment?(u(),f("span",dl,[a(d,{to:"/teacher/editor",class:"text-white"},{default:n(()=>[y(p(this.assignment.title)+" ",1),a(K,null,{default:n(()=>[y("Go to Editor")]),_:1})]),_:1}),a(x,{style:{cursor:"pointer"},class:"on-right",name:"save",onClick:s[0]||(s[0]=r=>this.reStore.saveCurrentAssignment()),size:"sm"})])):z("",!0)]),ul,this.assignment?(u(),f("span",cl,[a(q,{class:"bg-primary otdcard q-pa-xs q-my-md",flat:"",bordered:""},{default:n(()=>[ml,a(De,{src:this.assignment.coverUrl,onClick:e.loadCoverCB},null,8,["src","onClick"])]),_:1}),(u(!0),f(j,null,re(this.assignment.pages,(r,k)=>(u(),N(q,{class:"bg-primary otdcard q-pa-xs q-my-md",flat:"",bordered:"",modelValue:this.assignment.pages,"onUpdate:modelValue":s[1]||(s[1]=T=>this.assignment.pages=T),key:k},{default:n(()=>[l("span",hl,[r.isCustom?(u(),f("span",gl,[a(K,null,{default:n(()=>[y("Red is for Random, green is for Custom."),fl,y("The number is the page number.")]),_:1}),l("div",vl,p(k),1)])):(u(),f("span",pl,[a(K,null,{default:n(()=>[y("Red is for Random, green is for Custom."),_l,y("The number is the page number.")]),_:1}),l("div",yl,[l("span",Cl,p(k),1)])])),y(" "+p(r.pageTitle.slice(0,25)),1)]),a(x,{class:"float-right",name:"publish",onClick:this.reStore.updatePage,size:"sm"},{default:n(()=>[a(K,null,{default:n(()=>[y("Update current page")]),_:1})]),_:1},8,["onClick"]),a(x,{class:"float-right",name:"publish",onClick:this.reStore.appendPage,size:"sm"},{default:n(()=>[a(K,null,{default:n(()=>[y("Push as new page")]),_:1})]),_:1},8,["onClick"]),l("span",kl,[a(x,{size:"sm",name:"delete",onClick:T=>e.remove(k)},null,8,["onClick"])]),l("span",Sl,[r.langVoiceKey==="Eng-UK-Fem"?(u(),f("span",$l)):r.langVoiceKey==="Eng-US"?(u(),f("span",bl)):r.langVoiceKey==="espa\xF1ol"?(u(),f("span",wl)):r.langVoiceKey==="fran\xE7ais"?(u(),f("span",Vl)):r.langVoiceKey==="Deutsch"?(u(),f("span",xl)):r.langVoiceKey==="italiano"?(u(),f("span",Dl)):r.langVoiceKey==="portugu\xEAs do Brasil"?(u(),f("span",ql)):r.langVoiceKey==="Kiswahili"?(u(),f("span",Tl)):r.langVoiceKey==="\u0440\u0443\u0441\u0441\u043A\u0438\u0439"?(u(),f("span",Il)):r.langVoiceKey==="\u0E44\u0E17\u0E22"?(u(),f("span",Kl)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09"?(u(),f("span",Pl)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09"?(u(),f("span",Bl)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09"?(u(),f("span",Ml)):r.langVoiceKey==="\uD55C\uAD6D\uC758"?(u(),f("span",Ol)):r.langVoiceKey==="\u65E5\u672C\u8A9E"?(u(),f("span",Nl)):r.langVoiceKey==="Bahasa Indonesia"?(u(),f("span",Ul)):(u(),f("span",Hl)),a(K,null,{default:n(()=>[y(p(r.langVoiceKey),1)]),_:2},1024)]),a(De,{height:"200px",src:r.imgs[r.imgIdx].url,onClick:T=>e.loadPageCB(k)},null,8,["src","onClick"]),a(w,{onClick:T=>e.prevImg(k),icon:"arrow_left"},{default:n(()=>[y("Back")]),_:2},1032,["onClick"]),a(w,{class:"float-right",onClick:T=>e.nextImg(k),"icon-right":"arrow_right"},{default:n(()=>[y("Next")]),_:2},1032,["onClick"])]),_:2},1032,["modelValue"]))),128))])):z("",!0)]),_:1})]),_:1})}var Al=se(ol,[["render",Rl]]);const Ll=te({name:"TeacherLayout",components:{PagerComponent:Al,CurrentCourse:al,DocumentationComponent:fs,SearchComponent:qs,ImagesComponent:xa,BookmarksComponent:Ja,OTDComponent:vo,CurrentAssignment:No,PreferencesComponent:Zt,CurrentPage:ya},setup(){const e=m(!1),s=m(!1),c=ae(),_=c.preferences,V=m(null),B=m(null);return{step:m(1),reStore:c,initialValues:m(_),scrollAreaRHS:V,scrollAreaLHS:B,leftDrawerOpen:e,rightDrawerOpen:s,flagName:m(c.langVoices[c.preferences.langVoiceKey].flagName),promptLanguage:m(!1),langVoices:m(c.preferences.langVoices),toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){s.value=!s.value}}},mounted(){kt.isActive||(kt.toggle(),Ze("primary","#333"),Ze("secondary",this.initialValues.secondaryColor),Ze("accent",this.initialValues.accentColor),this.flagName=this.reStore.langVoices[this.reStore.prefereneces.langVoiceKey].flagName,ee(".pfi").classed(this.flagName,!0))},methods:{setRHS(e){e==="pager"?(G("#advancedDiv").classed("hidden",!0),G("#pagerDiv").classed("hidden",!1)):(G("#advancedDiv").classed("hidden",!1),G("#pagerDiv").classed("hidden",!0))},scrollTopRHS(){this.scrollAreaRHS.setScrollPosition("vertical",0)},scrollTopLHS(){this.scrollAreaLHS.setScrollPosition("vertical",0)},setLangVoiceCB(e){this.flagName=this.reStore.langVoices[e].flagName;for(const[s,c]of Object.entries(this.reStore.langVoices)){const _=c.flagName;ee(".pfi").classed(_,!1)}ee(".pfi").classed(this.flagName,!0),this.reStore.preferences.langVoiceKey=e,this.reStore.preferences.langVoice=this.reStore.langVoices[e],console.log("langVoiceKey set to ",e,this.flagName),this.reStore.courses.trigger+=1}}}),Ql=l("div",{class:"text-h6"},"Set Current Language",-1),jl={width:"100%"},Fl={class:"dashboard-wrapper"},zl=l("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),Yl={class:"hidden"},El=l("br",null,null,-1),Wl=l("br",null,null,-1),Gl=l("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),Jl={id:"pagerDiv"},Xl={key:0},Zl={key:1},en={class:"q-gutter-y-sm"},tn={id:"advancedDiv",class:"hidden"},sn={class:"hidden"},an={key:0},on={key:1},ln={class:"q-gutter-y-sm"};function nn(e,s,c,_,V,B){const d=O("router-link"),r=O("router-view"),k=O("DocumentationComponent"),T=O("SearchComponent"),J=O("BookmarksComponent"),ge=O("OTDComponent"),Ue=O("ImagesComponent"),He=O("PreferencesComponent"),$e=O("PagerComponent"),X=O("CurrentCourse"),P=O("CurrentAssignment"),Re=O("CurrentPage");return u(),N(rs,{view:"hHh LpR fFf"},{default:n(()=>[a(ns,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:n(()=>[a(Se,{modelValue:e.promptLanguage,"onUpdate:modelValue":s[1]||(s[1]=M=>e.promptLanguage=M),persistent:""},{default:n(()=>[a(q,{style:{"min-width":"350px"}},{default:n(()=>[a(U,null,{default:n(()=>[Ql]),_:1}),a(U,{class:"q-pt-none"},{default:n(()=>[l("table",jl,[l("tr",null,[l("td",null,[a(Dt,{modelValue:this.langVoice,"onUpdate:modelValue":[s[0]||(s[0]=M=>this.langVoice=M),this.setLangVoiceCB],options:e.langVoices},null,8,["modelValue","options","onUpdate:modelValue"])])])])]),_:1}),a(ke,{align:"right",class:"text-white"},{default:n(()=>[E(a(w,{outline:"",flat:"",label:"Close"},null,512),[[W]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(Ce,null,{default:n(()=>[a(w,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),a(ls,null,{default:n(()=>[a(d,{to:"/teacher"},{default:n(()=>[a(x,{name:"home",color:"white"},{default:n(()=>[a(K,null,{default:n(()=>[y("Return to My Teacher Page")]),_:1})]),_:1})]),_:1})]),_:1}),this.reStore.authenticated?(u(),N(w,{key:0,onClick:s[2]||(s[2]=M=>this.reStore.router.push("/teacher/editor")),icon:"switch_account"},{default:n(()=>[a(K,null,{default:n(()=>[y(" Editor Mode ")]),_:1})]),_:1})):z("",!0),this.reStore.authenticated?(u(),N(w,{key:1,onClick:s[3]||(s[3]=M=>this.reStore.router.push("/teacher/assignment")),icon:"switch_account"},{default:n(()=>[a(K,null,{default:n(()=>[y(" Assignment Mode ")]),_:1})]),_:1})):z("",!0),this.reStore.authenticated?(u(),N(w,{key:2,onClick:s[4]||(s[4]=M=>this.reStore.router.push("/student")),icon:"switch_account"},{default:n(()=>[a(K,null,{default:n(()=>[y(" Switch between Teacher or Student role ")]),_:1})]),_:1})):z("",!0),this.reStore.authenticated?(u(),N(w,{key:3,icon:"logout",onClick:s[5]||(s[5]=M=>this.reStore.logout())})):z("",!0),a(w,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1})]),_:1}),a(is,{class:"container-fluid"},{default:n(()=>[l("div",Fl,[a(r)]),a(St,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":s[6]||(s[6]=M=>e.leftDrawerOpen=M),side:"left"},{default:n(()=>[a(Ce,{flat:"",class:"bg-primary text-white"},{default:n(()=>[a(xe),a(w,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopLHS},{default:n(()=>[a(K,null,{default:n(()=>[y("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),zl,a($t,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaLHS"},{default:n(()=>[a(k),a(T),a(J),a(ge),a(Ue),a(He,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"]),a(St,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":s[10]||(s[10]=M=>e.rightDrawerOpen=M),side:"right"},{default:n(()=>[a(Ce,{flat:"",class:"bg-primary text-white"},{default:n(()=>[l("span",Yl,[a(w,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),a(bt,{dark:"",vertical:"",inset:""}),a(w,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),a(bt,{dark:"",vertical:"",inset:""})]),a(ds,{align:"left"},{default:n(()=>[a(yt,{icon:"theaters",onClick:s[7]||(s[7]=M=>this.setRHS("pager"))},{default:n(()=>[a(K,null,{default:n(()=>[y("Visual Assignment Builder")]),_:1})]),_:1}),a(yt,{icon:"handyman",onClick:s[8]||(s[8]=M=>this.setRHS("advanced"))},{default:n(()=>[a(K,null,{default:n(()=>[y("Detailed assignment configuration")]),_:1})]),_:1})]),_:1}),a(xe),l("span",{class:"pfi fi fi-xx text-h5 ptr",onClick:s[9]||(s[9]=M=>e.promptLanguage=!0)},[a(K,null,{default:n(()=>[y("Set current language "),El,y("Applied to new pages/searches."),Wl,y("Sync current page using sync-lang button.")]),_:1})]),a(xe),a(w,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopRHS},{default:n(()=>[a(K,null,{default:n(()=>[y("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),Gl,a($t,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaRHS"},{default:n(()=>[l("div",Jl,[this.reStore.courses.aid?(u(),f("span",Xl,[a($e)])):(u(),f("span",Zl,[l("div",en,[a(q,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:n(()=>[y(" No current assignment. You can load an assignment at the "),l("u",null,[a(d,{to:"/teacher",class:"text-white ptr"},{default:n(()=>[y("Teacher Dashboard")]),_:1})]),y(". ")]),_:1})])]))]),l("div",tn,[l("span",sn,[a(X)]),this.reStore.courses.aid?(u(),f("span",an,[a(P),a(Re)])):(u(),f("span",on,[l("div",ln,[a(q,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:n(()=>[y(" No current assignment. You can load an assignment at the "),l("u",null,[a(d,{to:"/teacher",class:"text-white ptr"},{default:n(()=>[y("Teacher Dashboard")]),_:1})]),y(". ")]),_:1})])]))])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var Pn=se(Ll,[["render",nn]]);export{Pn as default};
