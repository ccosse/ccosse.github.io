import{g as De,h as v,i as m,z as Ye,aL as ta,B as Lt,r as c,D as A,l as aa,p as J,ax as oa,j as ct,x as T,q as la,d as re,_ as ue,o as _,au as x,a as l,w as i,Q as V,e as n,af as M,ag as k,aJ as mt,c as E,av as W,aK as ye,aI as ve,f as F,al as na,am as Pe,G as Vt,y as sa,P as Dt,s as st}from"./index.1deb3562.js";import{Q as Y}from"./QTooltip.8f6ce2d7.js";import{Q as xe,a as ia,b as ra,c as Ne,d as ua,e as Tt,f as It,g as da,h as ca}from"./QLayout.44c2e6cb.js";import{d as Ee,f as We,c as ma,e as ha,u as qt,g as ga}from"./use-dark.53501f50.js";import{u as de,s as Ve,a as Fe,p as fe,t as fa,c as Bt,f as va,g as ya,j as it,_ as _a,d as Mt}from"./re-store.8c917562.js";import{a as O,Q as R,i as Le,C as Z,h as He,u as pa,b as Ca,c as Sa}from"./ClosePopup.5f90af1d.js";import{a as ba,b as ka,c as Ot,d as rt,e as wa,u as $a,f as xa,D as Va,P as Da}from"./DocumentationComponent.5d600328.js";import{Q as ie}from"./QInput.72233dc8.js";import{Q as Ta}from"./QToggle.08b1650e.js";import{Q as ht}from"./QImg.14cb4b51.js";import"./selection.e4d02687.js";import"./use-portal.c63e052d.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";import"./use-key-composition.014f8bc6.js";import"./QCheckbox.756ba675.js";const Ia={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},ut={xs:2,sm:4,md:8,lg:16,xl:24};var $e=De({name:"QSeparator",props:{...Ee,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const a=Ye(),h=We(e,a.proxy.$q),S=v(()=>e.vertical===!0?"vertical":"horizontal"),w=v(()=>` q-separator--${S.value}`),C=v(()=>e.inset!==!1?`${w.value}-${Ia[e.inset]}`:""),r=v(()=>`q-separator${w.value}${C.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(h.value===!0?" q-separator--dark":"")),u=v(()=>{const b={};if(e.size!==void 0&&(b[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const B=e.spaced===!0?`${ut.md}px`:e.spaced in ut?`${ut[e.spaced]}px`:e.spaced,L=e.vertical===!0?["Left","Right"]:["Top","Bottom"];b[`margin${L[0]}`]=b[`margin${L[1]}`]=B}return b});return()=>m("hr",{class:r.value,style:u.value,"aria-orientation":S.value})}});const qa=m("div",{class:"q-space"});var ze=De({name:"QSpace",setup(){return()=>qa}});const he=ta({}),Ba=Object.keys(Lt);var Ke=De({name:"QExpansionItem",props:{...Lt,...ma,...Ee,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ha,"click","afterShow","afterHide"],setup(e,{slots:a,emit:h}){const{proxy:{$q:S}}=Ye(),w=We(e,S),C=c(e.modelValue!==null?e.modelValue:e.defaultOpened),r=c(null),u=qt(),{show:b,hide:B,toggle:L}=ga({showing:C});let U,X;const Te=v(()=>`q-expansion-item q-item-type q-expansion-item--${C.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),ce=v(()=>{if(e.contentInsetLevel===void 0)return null;const y=S.lang.rtl===!0?"Right":"Left";return{["padding"+y]:e.contentInsetLevel*56+"px"}}),j=v(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),I=v(()=>{const y={};return Ba.forEach(K=>{y[K]=e[K]}),y}),ee=v(()=>j.value===!0||e.expandIconToggle!==!0),Ge=v(()=>e.expandedIcon!==void 0&&C.value===!0?e.expandedIcon:e.expandIcon||S.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),G=v(()=>e.disable!==!0&&(j.value===!0||e.expandIconToggle===!0)),p=v(()=>({expanded:C.value===!0,detailsId:e.targetUid,toggle:L,show:b,hide:B})),H=v(()=>{const y=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:S.lang.label[C.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":C.value===!0?"true":"false","aria-controls":u,"aria-label":y}});A(()=>e.group,y=>{X!==void 0&&X(),y!==void 0&&P()});function Re(y){j.value!==!0&&L(y),h("click",y)}function _e(y){y.keyCode===13&&pe(y,!0)}function pe(y,K){K!==!0&&r.value!==null&&r.value.focus(),L(y),la(y)}function Ie(){h("afterShow")}function Ce(){h("afterHide")}function P(){U===void 0&&(U=qt()),C.value===!0&&(he[e.group]=U);const y=A(C,ae=>{ae===!0?he[e.group]=U:he[e.group]===U&&delete he[e.group]}),K=A(()=>he[e.group],(ae,Be)=>{Be===U&&ae!==void 0&&ae!==U&&B()});X=()=>{y(),K(),he[e.group]===U&&delete he[e.group],X=void 0}}function Je(){const y={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},K=[m(T,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&C.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:Ge.value})];return G.value===!0&&(Object.assign(y,{tabindex:0,...H.value,onClick:pe,onKeyup:_e}),K.unshift(m("div",{ref:r,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),m(rt,y,()=>K)}function te(){let y;return a.header!==void 0?y=[].concat(a.header(p.value)):(y=[m(rt,()=>[m(Ot,{lines:e.labelLines},()=>e.label||""),e.caption?m(Ot,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&y[e.switchToggleSide===!0?"push":"unshift"](m(rt,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>m(T,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&y[e.switchToggleSide===!0?"unshift":"push"](Je()),y}function oe(){const y={ref:"item",style:e.headerStyle,class:e.headerClass,dark:w.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return ee.value===!0&&(y.clickable=!0,y.onClick=Re,Object.assign(y,j.value===!0?I.value:H.value)),m(ka,y,te)}function Se(){return J(m("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:ce.value,id:u},ct(a.default)),[[oa,C.value]])}function qe(){const y=[oe(),m(ba,{duration:e.duration,onShow:Ie,onHide:Ce},Se)];return e.expandSeparator===!0&&y.push(m($e,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:w.value}),m($e,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:w.value})),y}return e.group!==void 0&&P(),aa(()=>{X!==void 0&&X()}),()=>m("div",{class:Te.value},[m("div",{class:"q-expansion-item__container relative-position"},qe())])}}),Ae=De({name:"QList",props:{...Ee,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:a}){const h=Ye(),S=We(e,h.proxy.$q),w=v(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(S.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>m(e.tag,{class:w.value},ct(a.default))}});const Ma=re({name:"SearchComponent",setup(){const e=de(),a=c("");return{reStore:e,searchTerms:a,searchSize:c(e.preferences.resLimit),searchResults:c([]),promptSearchSize:c(!1)}},mounted(){A(this.reStore.preferences,async(h,S)=>{console.log("watcher ",h,S),this.searchSize=h.resLimit;for(const[C,r]of Object.entries(this.reStore.langVoices))Ve("#sfi").classed(r.flagName,!1);const w=this.reStore.preferences.langVoiceKey;Ve("#sfi").classed(this.reStore.langVoices[w].flagName,!0)});const e=this.reStore.preferences.langVoiceKey,a=this.reStore.langVoices[e].flagName;Ve("#sfi").classed(a,!0)},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchResults.splice(e,1)},load(e){console.log(e),console.log(this.searchResults[e]);const a=this.reStore.preferences.langVoiceKey;console.log("calling loadPageId ",this.searchResults[e].pageid,a),this.reStore.loadPageId(this.searchResults[e].pageid,a),this.reStore.courses.trigger+=1},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("doSearch ",e),this.reStore.wiki.setLang(e.langName);const a=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",a.results.length),this.searchResults=a.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),Oa=n("div",{class:"text-h6"},"Search Results Size",-1),Pa={class:"q-gutter-y-sm column"},La=n("span",{class:"on-right text-h2",id:"sfi"},null,-1),Ha={key:0},Ka={class:"row cardheader ptr justify-between"},Aa=["onClick"],Ra={class:"history-remove"};function Ua(e,a,h,S,w,C){return _(),x(W,null,[l(He,{modelValue:e.promptSearchSize,"onUpdate:modelValue":a[2]||(a[2]=r=>e.promptSearchSize=r),persistent:""},{default:i(()=>[l(O,{style:{"min-width":"350px"}},{default:i(()=>[l(R,{align:"center"},{default:i(()=>[Oa]),_:1}),l(R,{class:"q-pt-none",align:"center"},{default:i(()=>[l(wa,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":a[0]||(a[0]=r=>e.searchSize=r)},null,8,["modelValue"])]),_:1}),l(Le,{align:"center",class:"text-white"},{default:i(()=>[J(l(V,{flat:"",label:"Cancel"},null,512),[[Z]]),J(l(V,{flat:"",label:"Update results size",onClick:a[1]||(a[1]=r=>this.updateSearchSize())},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(O,{flat:""},{default:i(()=>[l(R,null,{default:i(()=>[l(Ae,{padding:"",class:"rounded-borders"},{default:i(()=>[l(Ke,{"header-style":{border:"1px solid gray"},label:"Search & Results"},{default:i(()=>[n("div",Pa,[l(xe,{class:"bg-primary text-white rounded-borders q-my-md"},{default:i(()=>[l(V,{dark:"",standout:"",onClick:a[3]||(a[3]=r=>e.promptSearchSize=!0)},{default:i(()=>[M(k(this.searchResults.length)+" ",1),l(Y,null,{default:i(()=>[M("Change results limit ("+k(this.searchSize)+")",1)]),_:1})]),_:1}),La,l(ie,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":a[6]||(a[6]=r=>e.searchTerms=r),"input-class":"text-right",class:"q-ml-md",onKeyup:[a[7]||(a[7]=r=>this.update()),a[8]||(a[8]=mt(r=>this.doSearch(),["enter"]))]},{append:i(()=>[e.searchTerms===""?(_(),E(T,{key:0,name:"search",onClick:a[4]||(a[4]=r=>this.doSearch())})):(_(),E(T,{key:1,name:"clear",class:"cursor-pointer",onClick:a[5]||(a[5]=r=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(_(),x("div",Ha,[(_(!0),x(W,null,ye(this.searchResults,(r,u)=>(_(),E(O,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":a[9]||(a[9]=b=>this.searchResults=b),key:u},{default:i(()=>[n("div",Ka,[n("span",{class:"history-title col-grow",onClick:b=>this.load(u)},k(u)+". "+k(r.title.slice(0,25)),9,Aa),n("span",Ra,[l(T,{class:"primary",size:e.xl,color:e.primary,name:"close",onClick:b=>this.remove(u)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):ve("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var ja=ue(Ma,[["render",Ua]]);const Qa=re({name:"CurrentPage",props:{},setup(e){return{reStore:de(),ck:c("-"),aid:c("-"),pageTitle:c("-"),langVoiceKey:c(),flagName:c("fi fi-gb"),imgIdx:c(0),imgs:c([]),imgTot:c(0),imgFit:c("-"),guideWords:c("-"),mapCoords:c("-"),pageid:c("-"),pctReplace:c(),canonicalUrl:c(),props:e,isCustom:c(!1),langNames:c(["en","th","es","fr","it","de","zh","ja","sw","pt","ru","id","ke"]),promptGuideWords:c(!1)}},mounted(){console.log(this.props),A(this.reStore.courses,async(e,a)=>{try{console.log("CurrentPage watcher",this.reStore.courses);const h=this.reStore.courses.ck,S=this.reStore.courses.aid,w=this.reStore.courses.pgIdx,C=this.reStore.page;if(C){console.log("CurrentPage ",C),this.pageTitle=C.pageTitle,this.imgIdx=C.imgIdx,this.imgs=C.imgs,this.imgTot=C.imgs.length,this.imgFit=C.imgFit,this.guideWords=C.guideWords,this.mapCoords=C.mapCoords,this.pageid=C.pageid,this.langVoiceKey=C.langVoiceKey,this.flagName=this.reStore.langVoices[C.langVoiceKey].flagName;for(const[r,u]of Object.entries(this.reStore.langVoices)){const b=u.flagName;Fe(".flagicon").classed(b,!1)}Fe(".flagicon").classed(this.flagName,!0),this.pctReplace=C.pctReplace,this.canonicalUrl=C.canonicalUrl,this.isCustom=c(this.reStore.page.isCustom)}this.aid=S,this.ck=h}catch(h){console.log(h)}},{immediate:!0,deep:!0})},methods:{updateGuideWords(){console.log("updateGuideWords",this.guideWords),this.reStore.page.guideWords=this.guideWords},langLinkCB(e){console.log(e.url),window.open(e.url,"_blank")},speak(){console.log("CurrentPage.speak",this.reStore),this.reStore.speak()},cycleFitMode(){const e=["scale-down","cover","contain"];let a=e.indexOf(this.imgFit);a+=1,a>e.length-1&&(a=0),this.imgFit=e[a],this.reStore.page.imgFit=this.imgFit,console.log("fit: ",this.imgFit),this.reStore.courses.trigger+=1},nextImg(){this.imgIdx=this.imgIdx+1>this.imgs.length-1?0:this.imgIdx+1,this.reStore.page.imgIdx=this.imgIdx,this.reStore.courses.imgIdx=this.imgIdx,this.reStore.courses.trigger+=1},imgCB(e,a){console.log(e,a),this.reStore.page.imgIdx=e,this.reStore.courses.imgIdx=e,this.reStore.courses.trigger+=1},loadURL(e){console.log("loadURL ",e),window.open(e,"_blank")},mapCB(){const e="https://maps.google.com/?ll="+this.mapCoords.split(",")[0]+","+this.mapCoords.split(",")[1];window.open(e,"_blank")},saveImage(e,a){console.log("saveImage: ",e,a),this.reStore.saveImage(e,a)},saveCurrentImage(){const e=this.imgs[this.imgIdx];console.log("saveCurrentImage: ",e),this.reStore.saveImage(this.imgIdx,e)},remove(e,a){console.log("remove: ",e,a),this.imgs.splice(e,1),this.reStore.page.imgs.splice(e,1)},toggleText(){Ve("#slideTextDiv").classed("hidden")?Fe("#slideTextDiv").classed("hidden",!1):Fe("#slideTextDiv").classed("hidden",!0)},addBookmark(){console.log("addBookmark"),this.reStore.saveBookmark()},resetPage(){this.reStore.newPage()},newPage(){console.log("CurrentPage newPageCB "),this.reStore.newPage()},appendPage(){this.reStore.appendPage()},updatePage(){this.reStore.updatePage()},updateType(e,a){this.reStore.page.isCustom=this.isCustom}}}),Na=n("div",{class:"text-h6"},"Guide Words",-1),Fa={class:"text-weight-bolder text-center q-pa-md text-white"},za=n("br",null,null,-1),Ya={style:{border:"1px solid gray","border-radius":"5px"}},Ea={width:"100%"},Wa={style:{width:"50%","text-align":"center"}},Ga={style:{"text-align":"center"}},Ja={style:{"text-align":"center"}},Xa=n("td",{style:{"text-align":"center"}},"Speak Text",-1),Za={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},eo={width:"100%"},to=n("td",null,"Course-Key",-1),ao={style:{width:"50%"}},oo={class:"ptr float-left"},lo=n("td",null,"Assgmnt Id",-1),no={style:{width:"50%"}},so={class:"ptr float-left"},io=n("td",null,"WP Page Id",-1),ro={style:{width:"50%"}},uo=n("td",null,"Language",-1),co={style:{width:"50%"}},mo={class:"q-mt-xs float-right flagicon text-h6"},ho=n("td",null,"Images",-1),go={style:{width:"50%"}},fo=n("td",null,"Image Fit",-1),vo={class:"align-left"},yo=n("td",null,"Guide Words",-1),_o={style:{width:"50%"}},po=n("td",null,"Percent Replace",-1),Co={class:"float-left"},So=n("td",null,"Map Coords",-1),bo={class:"float-left"},ko=n("td",null,"Toggle Text",-1),wo=n("td",null,"Alt Langs",-1),$o=["onClick"],xo={key:0,style:{cursor:"pointer"}},Vo={key:0},Do={class:"row cardheader justify-between"},To={class:"history-remove"},Io={key:0},qo={class:"history-remove ptr"};function Bo(e,a,h,S,w,C){const r=F("router-link");return _(),x(W,null,[l(He,{modelValue:e.promptGuideWords,"onUpdate:modelValue":a[3]||(a[3]=u=>e.promptGuideWords=u),persistent:""},{default:i(()=>[l(O,{style:{"min-width":"350px"}},{default:i(()=>[l(R,null,{default:i(()=>[Na]),_:1}),l(R,{class:"q-pt-none"},{default:i(()=>[l(ie,{dense:"",modelValue:e.guideWords,"onUpdate:modelValue":a[0]||(a[0]=u=>e.guideWords=u),autofocus:"",onKeyup:a[1]||(a[1]=mt(u=>e.promptGuideWords=!1,["enter"]))},null,8,["modelValue"])]),_:1}),l(Le,{align:"right"},{default:i(()=>[J(l(V,{outline:"",label:"Cancel"},null,512),[[Z]]),J(l(V,{outline:"",label:"Update guide words",onClick:a[2]||(a[2]=u=>this.updateGuideWords())},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(O,{flat:""},{default:i(()=>[l(R,null,{default:i(()=>[n("div",Fa,[l(r,{to:"/teacher/editor",class:"text-white"},{default:i(()=>[M(k(this.pageTitle.slice(0,20)),1)]),_:1}),za,l(T,{class:"on-right",name:"replay",onClick:this.resetPage,size:"sm"},null,8,["onClick"]),l(T,{class:"on-right",name:"add_circle",onClick:this.newPage,size:"sm"},null,8,["onClick"]),l(T,{class:"on-right",name:"publish",onClick:this.updatePage,size:"sm"},{default:i(()=>[l(Y,null,{default:i(()=>[M("Update current page")]),_:1})]),_:1},8,["onClick"]),l(T,{class:"on-right",name:"publish",onClick:this.appendPage,size:"sm"},{default:i(()=>[l(Y,null,{default:i(()=>[M("Push as new page")]),_:1})]),_:1},8,["onClick"])]),n("div",Ya,[n("table",Ea,[n("tr",null,[n("td",Wa,[l(Ta,{modelValue:e.isCustom,"onUpdate:modelValue":[a[4]||(a[4]=u=>e.isCustom=u),this.updateType],color:"accent"},null,8,["modelValue","onUpdate:modelValue"])]),n("td",Ga,[l(V,{round:"",class:"q-pa-md",icon:"volume_up",color:"secondary",onClick:a[5]||(a[5]=u=>this.speak())})])]),n("tr",null,[n("td",Ja,k(e.isCustom===!0?"Custom":"Random"),1),Xa])])]),n("div",Za,[n("table",eo,[n("tr",null,[to,n("td",ao,[n("a",oo,k(this.ck),1)])]),n("tr",null,[lo,n("td",no,[n("a",so,k(this.aid),1)])]),n("tr",null,[io,n("td",ro,[n("a",{class:"ptr float-left",onClick:a[6]||(a[6]=u=>this.loadURL(this.canonicalUrl))},k(this.pageid),1),l(T,{name:"bookmark",onClick:this.addBookmark,class:"float-right"},null,8,["onClick"])])]),n("tr",null,[uo,n("td",co,[n("span",mo,[l(Y,{class:"float-left"},{default:i(()=>[M(k(this.langVoiceKey),1)]),_:1})])])]),n("tr",null,[ho,n("td",go,[n("span",{onClick:a[7]||(a[7]=(...u)=>this.nextImg&&this.nextImg(...u)),class:"ptr float-left"},k(this.imgIdx+1)+" / "+k(this.imgTot),1),n("span",{class:"float-right ptr",onClick:a[8]||(a[8]=(...u)=>this.saveCurrentImage&&this.saveCurrentImage(...u))},[l(T,{name:"bookmark"})])])]),n("tr",{class:"ptr",onClick:a[9]||(a[9]=(...u)=>this.cycleFitMode&&this.cycleFitMode(...u))},[fo,n("td",null,[n("span",vo,k(this.imgFit),1),l(T,{class:"float-right",name:"fit_screen"})])]),n("tr",null,[yo,n("td",_o,[M(k(this.guideWords.replaceAll(",",", "))+" ",1),l(T,{class:"float-right",name:"tune",onClick:a[10]||(a[10]=u=>this.promptGuideWords=!0)})])]),n("tr",null,[po,n("td",null,[n("span",Co,k(this.pctReplace)+" %",1),l(T,{class:"float-right",name:"tune"})])]),n("tr",null,[So,n("td",{onClick:a[11]||(a[11]=(...u)=>this.mapCB&&this.mapCB(...u)),class:"ptr"},[n("span",bo,k(this.mapCoords),1),l(T,{class:"float-right",name:"place"})])]),n("tr",null,[ko,n("td",{onClick:a[12]||(a[12]=(...u)=>this.toggleText&&this.toggleText(...u)),class:"ptr"},[l(T,{class:"float-right",name:"article"})])]),n("tr",null,[wo,n("td",null,[(_(!0),x(W,null,ye(this.reStore.currentLangLinks,(u,b)=>(_(),x("span",{key:b,onClick:B=>this.langLinkCB(u)},[this.langNames.indexOf(u.lang)>-1?(_(),x("span",xo,[n("u",null,k(u.lang),1),M(",\xA0 ")])):ve("",!0)],8,$o))),128))])])])])]),_:1})]),_:1}),l(O,{flat:""},{default:i(()=>[l(R,null,{default:i(()=>[l(Ae,{padding:"",class:"rounded-borders"},{default:i(()=>[l(Ke,{"header-style":{border:"1px solid gray"},label:"Page Images"},{default:i(()=>[this.imgs.length?(_(),x("div",Vo,[(_(!0),x(W,null,ye(this.imgs,(u,b)=>(_(),E(O,{bordered:"",class:"q-ma-sm",flat:"",modelValue:this.imgs,"onUpdate:modelValue":a[13]||(a[13]=B=>this.imgs=B),key:b},{default:i(()=>[n("div",Do,[n("span",To,[l(T,{name:"bookmark",onClick:B=>this.saveImage(b,u)},null,8,["onClick"]),l(T,{name:"article",onClick:this.toggleText},{default:i(()=>[l(Y,null,{default:i(()=>[M("Convenience button to toggle current text ")]),_:1})]),_:1},8,["onClick"]),l(T,{name:"fit_screen",onClick:this.cycleFitMode},{default:i(()=>[l(Y,null,{default:i(()=>[M("Convenience button to toggle current image-fit mode ")]),_:1})]),_:1},8,["onClick"])]),u.cap?(_(),x("span",Io,k(u.cap.slice(0,25)),1)):ve("",!0),n("span",qo,[l(T,{name:"close",onClick:B=>this.remove(b,u)},null,8,["onClick"])])]),l(ht,{class:"cardimage",onClick:B=>this.imgCB(b,u),src:u.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])):ve("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Mo=ue(Qa,[["render",Bo]]);const Oo=re({name:"ImagesComponent",setup(){return{reStore:de(),newCap:c(""),newDesc:c(""),newName:c(""),newSource:c(""),newUrl:c(""),promptAddImage:c(!1)}},mounted(){A(this.reStore.userSnapshot.images,async(e,a)=>{console.log("watcher ",e,a)})},methods:{addImageCB(){console.log("addImageCB",this.newUrl);const e={name:this.newName,desc:this.newDesc,cap:this.newCap,source:this.newSource,url:this.newUrl};this.reStore.saveImage(null,e)},imgCB(e,a){this.reStore.router.push("/teacher/editor"),console.log(e,a),this.reStore.loadImgId(e)},remove(e,a){console.log(e,a),this.reStore.removeImage(e)}}}),Po={class:"row cardheader justify-between"},Lo={class:"history-remove hidden"},Ho={key:0},Ko={class:"history-remove ptr"};function Ao(e,a,h,S,w,C){return _(),x(W,null,[l(He,{modelValue:e.promptAddImage,"onUpdate:modelValue":a[5]||(a[5]=r=>e.promptAddImage=r)},{default:i(()=>[l(O,null,{default:i(()=>[l(R,null,{default:i(()=>[l(ie,{modelValue:e.newCap,"onUpdate:modelValue":a[0]||(a[0]=r=>e.newCap=r),label:"caption"},null,8,["modelValue"]),l(ie,{modelValue:e.newDesc,"onUpdate:modelValue":a[1]||(a[1]=r=>e.newDesc=r),label:"description"},null,8,["modelValue"]),l(ie,{modelValue:e.newName,"onUpdate:modelValue":a[2]||(a[2]=r=>e.newName=r),label:"name"},null,8,["modelValue"]),l(ie,{modelValue:e.newSource,"onUpdate:modelValue":a[3]||(a[3]=r=>e.newSource=r),label:"source"},null,8,["modelValue"]),l(ie,{modelValue:e.newUrl,"onUpdate:modelValue":a[4]||(a[4]=r=>e.newUrl=r),label:"url"},null,8,["modelValue"])]),_:1}),l(Le,{align:"center",class:"text-white"},{default:i(()=>[J(l(V,{flat:"",label:"Cancel"},null,512),[[Z]]),J(l(V,{flat:"",label:"Add",onClick:this.addImageCB},null,8,["onClick"]),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(O,{flat:""},{default:i(()=>[l(R,null,{default:i(()=>[l(Ae,{padding:"",class:"rounded-borders"},{default:i(()=>[l(Ke,{"header-style":{border:"1px solid gray"},label:"My Images"},{default:i(()=>[l(xe,{class:"bg-primary text-white rounded-borders q-my-md"},{default:i(()=>[l(V,{bordered:"","no-caps":"",standout:"",onClick:a[6]||(a[6]=r=>e.promptAddImage=!0)},{default:i(()=>[M(" Add Image "),l(Y,null,{default:i(()=>[M("Add a custom image (only saves url, not image data)")]),_:1})]),_:1})]),_:1}),n("div",null,[(_(!0),x(W,null,ye(this.reStore.userSnapshot.images,(r,u)=>(_(),E(O,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":a[7]||(a[7]=b=>this.reStore.userSnapshot.images=b),key:u},{default:i(()=>[n("div",Po,[n("span",Lo,[l(T)]),r.desc?(_(),x("span",Ho,k(r.desc.slice(0,25)),1)):ve("",!0),n("span",Ko,[l(T,{name:"close",onClick:b=>this.remove(u,r)},null,8,["onClick"])])]),l(ht,{class:"cardimage",onClick:b=>this.imgCB(u,r),src:r.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Ro=ue(Oo,[["render",Ao]]);const Uo=re({name:"BookmarksComponent",setup(){return{reStore:de()}},mounted(){A(this.reStore.userSnapshot.bookmarks,async(e,a)=>{console.log("watcher ",e,a)})},methods:{imgCB(e,a){this.reStore.router.push("/teacher/editor"),console.log(e,a),this.reStore.page=a,this.reStore.courses.imgIdx=a.imgIdx,this.reStore.courses.trigger+=1,this.reStore.courses.pageid=a.pageid},remove(e,a){console.log(e,a),this.reStore.removeBookmark(e)}}}),jo={class:"row cardheader justify-between"},Qo={class:"history-remove hidden"},No={key:0,class:"fi fi-gb"},Fo={key:1,class:"fi fi-us"},zo={key:2,class:"fi fi-mx"},Yo={key:3,class:"fi fi-fr"},Eo={key:4,class:"fi fi-de"},Wo={key:5,class:"fi fi-it"},Go={key:6,class:"fi fi-br"},Jo={key:7,class:"fi fi-ke"},Xo={key:8,class:"fi fi-ru"},Zo={key:9,class:"fi fi-th"},el={key:10,class:"fi fi-cn"},tl={key:11,class:"fi fi-hk"},al={key:12,class:"fi fi-tw"},ol={key:13,class:"fi fi-kr"},ll={key:14,class:"fi fi-jp"},nl={key:15,class:"fi fi-id"},sl={key:16,class:"fi fi-xx"},il={class:"history-remove ptr"};function rl(e,a,h,S,w,C){return _(),E(O,{flat:""},{default:i(()=>[l(R,null,{default:i(()=>[l(Ae,{padding:"",class:"rounded-borders"},{default:i(()=>[l(Ke,{"header-style":{border:"1px solid gray"},label:"My bookmarks"},{default:i(()=>[n("div",null,[(_(!0),x(W,null,ye(this.reStore.userSnapshot.bookmarks,(r,u)=>(_(),E(O,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":a[0]||(a[0]=b=>this.reStore.userSnapshot.bookmarks=b),key:u},{default:i(()=>[n("div",jo,[n("span",Qo,[l(T)]),r.langVoiceKey==="Eng-UK-Fem"?(_(),x("span",No)):r.langVoiceKey==="Eng-US"?(_(),x("span",Fo)):r.langVoiceKey==="espa\xF1ol"?(_(),x("span",zo)):r.langVoiceKey==="fran\xE7ais"?(_(),x("span",Yo)):r.langVoiceKey==="Deutsch"?(_(),x("span",Eo)):r.langVoiceKey==="italiano"?(_(),x("span",Wo)):r.langVoiceKey==="portugu\xEAs do Brasil"?(_(),x("span",Go)):r.langVoiceKey==="Kiswahili"?(_(),x("span",Jo)):r.langVoiceKey==="\u0440\u0443\u0441\u0441\u043A\u0438\u0439"?(_(),x("span",Xo)):r.langVoiceKey==="\u0E44\u0E17\u0E22"?(_(),x("span",Zo)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09"?(_(),x("span",el)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09"?(_(),x("span",tl)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09"?(_(),x("span",al)):r.langVoiceKey==="\uD55C\uAD6D\uC758"?(_(),x("span",ol)):r.langVoiceKey==="\u65E5\u672C\u8A9E"?(_(),x("span",ll)):r.langVoiceKey==="Bahasa Indonesia"?(_(),x("span",nl)):(_(),x("span",sl)),M(" "+k(r.pageTitle.slice(0,25))+" ",1),n("span",il,[l(T,{name:"close",onClick:b=>this.remove(u,r)},null,8,["onClick"])])]),l(ht,{class:"cardimage",onClick:b=>this.imgCB(u,r),src:r.imgs[r.imgIdx].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var ul=ue(Uo,[["render",rl]]);const dl=["gregorian","persian"],cl={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>dl.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},ml=["update:modelValue"];function ne(e){return e.year+"/"+fe(e.month)+"/"+fe(e.day)}function hl(e,a){const h=v(()=>e.disable!==!0&&e.readonly!==!0),S=v(()=>e.editable===!0?0:-1),w=v(()=>{const u=[];return e.color!==void 0&&u.push(`bg-${e.color}`),e.textColor!==void 0&&u.push(`text-${e.textColor}`),u.join(" ")});function C(){return e.locale!==void 0?{...a.lang.date,...e.locale}:a.lang.date}function r(u){const b=new Date,B=u===!0?null:0;if(e.calendar==="persian"){const L=fa(b);return{year:L.jy,month:L.jm,day:L.jd}}return{year:b.getFullYear(),month:b.getMonth()+1,day:b.getDate(),hour:B,minute:B,second:B,millisecond:B}}return{editable:h,tabindex:S,headerClass:w,getLocale:C,getCurrentDate:r}}const ge=20,gl=["Calendar","Years","Months"],Pt=e=>gl.includes(e),dt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),we=" \u2014 ";function se(e){return e.year+"/"+fe(e.month)}var fl=De({name:"QDate",props:{...cl,...pa,...Ee,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:dt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:dt},navigationMaxYearMonth:{type:String,validator:dt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Pt}},emits:[...ml,"rangeStart","rangeEnd","navigation"],setup(e,{slots:a,emit:h}){const{proxy:S}=Ye(),{$q:w}=S,C=We(e,w),{getCache:r}=$a(),{tabindex:u,headerClass:b,getLocale:B,getCurrentDate:L}=hl(e,w);let U;const X=Ca(e),Te=Sa(X),ce=c(null),j=c(Ct()),I=c(B()),ee=v(()=>Ct()),Ge=v(()=>B()),G=v(()=>L()),p=c(St(j.value,I.value)),H=c(e.defaultView),Re=w.lang.rtl===!0?"right":"left",_e=c(Re.value),pe=c(Re.value),Ie=p.value.year,Ce=c(Ie-Ie%ge-(Ie<0?ge:0)),P=c(null),Je=v(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(C.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),te=v(()=>e.color||"primary"),oe=v(()=>e.textColor||"white"),Se=v(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),qe=v(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),y=v(()=>qe.value.filter(t=>typeof t=="string").map(t=>et(t,j.value,I.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),K=v(()=>{const t=o=>et(o,j.value,I.value);return qe.value.filter(o=>na(o)===!0&&o.from!==void 0&&o.to!==void 0).map(o=>({from:t(o.from),to:t(o.to)})).filter(o=>o.from.dateHash!==null&&o.to.dateHash!==null&&o.from.dateHash<o.to.dateHash)}),ae=v(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const o=Bt(t.year,t.month,t.day);return new Date(o.gy,o.gm-1,o.gd)}),Be=v(()=>e.calendar==="persian"?ne:(t,o,s)=>va(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),o===void 0?j.value:o,s===void 0?I.value:s,t.year,t.timezoneOffset)),Me=v(()=>y.value.length+K.value.reduce((t,o)=>t+1+ya(ae.value(o.to),ae.value(o.from)),0)),gt=v(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(P.value!==null){const s=P.value.init,g=ae.value(s);return I.value.daysShort[g.getDay()]+", "+I.value.monthsShort[s.month-1]+" "+s.day+we+"?"}if(Me.value===0)return we;if(Me.value>1)return`${Me.value} ${I.value.pluralDay}`;const t=y.value[0],o=ae.value(t);return isNaN(o.valueOf())===!0?we:I.value.headerTitle!==void 0?I.value.headerTitle(o,t):I.value.daysShort[o.getDay()]+", "+I.value.monthsShort[t.month-1]+" "+t.day}),Ht=v(()=>y.value.concat(K.value.map(o=>o.from)).sort((o,s)=>o.year-s.year||o.month-s.month)[0]),Kt=v(()=>y.value.concat(K.value.map(o=>o.to)).sort((o,s)=>s.year-o.year||s.month-o.month)[0]),ft=v(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(Me.value===0)return we;if(Me.value>1){const t=Ht.value,o=Kt.value,s=I.value.monthsShort;return s[t.month-1]+(t.year!==o.year?" "+t.year+we+s[o.month-1]+" ":t.month!==o.month?we+s[o.month-1]:"")+" "+o.year}return y.value[0].year}),Ue=v(()=>{const t=[w.iconSet.datetime.arrowLeft,w.iconSet.datetime.arrowRight];return w.lang.rtl===!0?t.reverse():t}),vt=v(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):I.value.firstDayOfWeek),At=v(()=>{const t=I.value.daysShort,o=vt.value;return o>0?t.slice(o,7).concat(t.slice(0,o)):t}),le=v(()=>{const t=p.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():it(t.year,t.month)}),Rt=v(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),Q=v(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),N=v(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Xe=v(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return Q.value!==null&&Q.value.year>=p.value.year&&(t.year.prev=!1,Q.value.year===p.value.year&&Q.value.month>=p.value.month&&(t.month.prev=!1)),N.value!==null&&N.value.year<=p.value.year&&(t.year.next=!1,N.value.year===p.value.year&&N.value.month<=p.value.month&&(t.month.next=!1)),t}),je=v(()=>{const t={};return y.value.forEach(o=>{const s=se(o);t[s]===void 0&&(t[s]=[]),t[s].push(o.day)}),t}),yt=v(()=>{const t={};return K.value.forEach(o=>{const s=se(o.from),g=se(o.to);if(t[s]===void 0&&(t[s]=[]),t[s].push({from:o.from.day,to:s===g?o.to.day:void 0,range:o}),s<g){let d;const{year:D,month:f}=o.from,$=f<12?{year:D,month:f+1}:{year:D+1,month:1};for(;(d=se($))<=g;)t[d]===void 0&&(t[d]=[]),t[d].push({from:void 0,to:d===g?o.to.day:void 0,range:o}),$.month++,$.month>12&&($.year++,$.month=1)}}),t}),Oe=v(()=>{if(P.value===null)return;const{init:t,initHash:o,final:s,finalHash:g}=P.value,[d,D]=o<=g?[t,s]:[s,t],f=se(d),$=se(D);if(f!==z.value&&$!==z.value)return;const q={};return f===z.value?(q.from=d.day,q.includeFrom=!0):q.from=1,$===z.value?(q.to=D.day,q.includeTo=!0):q.to=le.value,q}),z=v(()=>se(p.value)),Ut=v(()=>{const t={};if(e.options===void 0){for(let s=1;s<=le.value;s++)t[s]=!0;return t}const o=typeof e.options=="function"?e.options:s=>e.options.includes(s);for(let s=1;s<=le.value;s++){const g=z.value+"/"+fe(s);t[s]=o(g)}return t}),jt=v(()=>{const t={};if(e.events===void 0)for(let o=1;o<=le.value;o++)t[o]=!1;else{const o=typeof e.events=="function"?e.events:s=>e.events.includes(s);for(let s=1;s<=le.value;s++){const g=z.value+"/"+fe(s);t[s]=o(g)===!0&&Rt.value(g)}}return t}),Qt=v(()=>{let t,o;const{year:s,month:g}=p.value;if(e.calendar!=="persian")t=new Date(s,g-1,1),o=new Date(s,g-1,0).getDate();else{const d=Bt(s,g,1);t=new Date(d.gy,d.gm-1,d.gd);let D=g-1,f=s;D===0&&(D=12,f--),o=it(f,D)}return{days:t.getDay()-vt.value-1,endDay:o}}),_t=v(()=>{const t=[],{days:o,endDay:s}=Qt.value,g=o<0?o+7:o;if(g<6)for(let f=s-g;f<=s;f++)t.push({i:f,fill:!0});const d=t.length;for(let f=1;f<=le.value;f++){const $={i:f,event:jt.value[f],classes:[]};Ut.value[f]===!0&&($.in=!0,$.flat=!0),t.push($)}if(je.value[z.value]!==void 0&&je.value[z.value].forEach(f=>{const $=d+f-1;Object.assign(t[$],{selected:!0,unelevated:!0,flat:!1,color:te.value,textColor:oe.value})}),yt.value[z.value]!==void 0&&yt.value[z.value].forEach(f=>{if(f.from!==void 0){const $=d+f.from-1,q=d+(f.to||le.value)-1;for(let nt=$;nt<=q;nt++)Object.assign(t[nt],{range:f.range,unelevated:!0,color:te.value,textColor:oe.value});Object.assign(t[$],{rangeFrom:!0,flat:!1}),f.to!==void 0&&Object.assign(t[q],{rangeTo:!0,flat:!1})}else if(f.to!==void 0){const $=d+f.to-1;for(let q=d;q<=$;q++)Object.assign(t[q],{range:f.range,unelevated:!0,color:te.value,textColor:oe.value});Object.assign(t[$],{flat:!1,rangeTo:!0})}else{const $=d+le.value-1;for(let q=d;q<=$;q++)Object.assign(t[q],{range:f.range,unelevated:!0,color:te.value,textColor:oe.value})}}),Oe.value!==void 0){const f=d+Oe.value.from-1,$=d+Oe.value.to-1;for(let q=f;q<=$;q++)t[q].color=te.value,t[q].editRange=!0;Oe.value.includeFrom===!0&&(t[f].editRangeFrom=!0),Oe.value.includeTo===!0&&(t[$].editRangeTo=!0)}p.value.year===G.value.year&&p.value.month===G.value.month&&(t[d+G.value.day-1].today=!0);const D=t.length%7;if(D>0){const f=7-D;for(let $=1;$<=f;$++)t.push({i:$,fill:!0})}return t.forEach(f=>{let $="q-date__calendar-item ";f.fill===!0?$+="q-date__calendar-item--fill":($+=`q-date__calendar-item--${f.in===!0?"in":"out"}`,f.range!==void 0&&($+=` q-date__range${f.rangeTo===!0?"-to":f.rangeFrom===!0?"-from":""}`),f.editRange===!0&&($+=` q-date__edit-range${f.editRangeFrom===!0?"-from":""}${f.editRangeTo===!0?"-to":""}`),(f.range!==void 0||f.editRange===!0)&&($+=` text-${f.color}`)),f.classes=$}),t}),Nt=v(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});A(()=>e.modelValue,t=>{if(U===t)U=0;else{const{year:o,month:s}=St(j.value,I.value);be(o,s)}}),A(H,()=>{ce.value!==null&&S.$el.contains(document.activeElement)===!0&&ce.value.focus()}),A(()=>p.value.year,t=>{h("navigation",{year:t,month:p.value.month})}),A(()=>p.value.month,t=>{h("navigation",{year:p.value.year,month:t})}),A(ee,t=>{xt(t,I.value,"mask"),j.value=t}),A(Ge,t=>{xt(j.value,t,"locale"),I.value=t});function pt(){const t=G.value,o=je.value[se(t)];(o===void 0||o.includes(t.day)===!1)&&at(t),Ze(t.year,t.month)}function Ft(t){Pt(t)===!0&&(H.value=t)}function zt(t,o){["month","year"].includes(t)&&(t==="month"?kt:tt)(o===!0?-1:1)}function Ze(t,o){H.value="Calendar",be(t,o)}function Yt(t,o){if(e.range===!1||!t){P.value=null;return}const s=Object.assign({...p.value},t),g=o!==void 0?Object.assign({...p.value},o):s;P.value={init:s,initHash:ne(s),final:g,finalHash:ne(g)},Ze(s.year,s.month)}function Ct(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function et(t,o,s){return _a(t,o,s,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function St(t,o){const s=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(s.length===0)return bt();const g=s[s.length-1],d=et(g.from!==void 0?g.from:g,t,o);return d.dateHash===null?bt():d}function bt(){let t,o;if(e.defaultYearMonth!==void 0){const s=e.defaultYearMonth.split("/");t=parseInt(s[0],10),o=parseInt(s[1],10)}else{const s=G.value!==void 0?G.value:L();t=s.year,o=s.month}return{year:t,month:o,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+fe(o)+"/01"}}function kt(t){let o=p.value.year,s=Number(p.value.month)+t;s===13?(s=1,o++):s===0&&(s=12,o--),be(o,s),Se.value===!0&&Qe("month")}function tt(t){const o=Number(p.value.year)+t;be(o,p.value.month),Se.value===!0&&Qe("year")}function Et(t){be(t,p.value.month),H.value=e.defaultView==="Years"?"Months":"Calendar",Se.value===!0&&Qe("year")}function Wt(t){be(p.value.year,t),H.value="Calendar",Se.value===!0&&Qe("month")}function Gt(t,o){const s=je.value[o];(s!==void 0&&s.includes(t.day)===!0?ot:at)(t)}function me(t){return{year:t.year,month:t.month,day:t.day}}function be(t,o){Q.value!==null&&t<=Q.value.year&&(t=Q.value.year,o<Q.value.month&&(o=Q.value.month)),N.value!==null&&t>=N.value.year&&(t=N.value.year,o>N.value.month&&(o=N.value.month));const s=t+"/"+fe(o)+"/01";s!==p.value.dateHash&&(_e.value=p.value.dateHash<s==(w.lang.rtl!==!0)?"left":"right",t!==p.value.year&&(pe.value=_e.value),Vt(()=>{Ce.value=t-t%ge-(t<0?ge:0),Object.assign(p.value,{year:t,month:o,day:1,dateHash:s})}))}function wt(t,o,s){const g=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;U=g;const{reason:d,details:D}=$t(o,s);h("update:modelValue",g,d,D)}function Qe(t){const o=y.value[0]!==void 0&&y.value[0].dateHash!==null?{...y.value[0]}:{...p.value};Vt(()=>{o.year=p.value.year,o.month=p.value.month;const s=e.calendar!=="persian"?new Date(o.year,o.month,0).getDate():it(o.year,o.month);o.day=Math.min(Math.max(1,o.day),s);const g=ke(o);U=g;const{details:d}=$t("",o);h("update:modelValue",g,t,d)})}function $t(t,o){return o.from!==void 0?{reason:`${t}-range`,details:{...me(o.target),from:me(o.from),to:me(o.to)}}:{reason:`${t}-day`,details:me(o)}}function ke(t,o,s){return t.from!==void 0?{from:Be.value(t.from,o,s),to:Be.value(t.to,o,s)}:Be.value(t,o,s)}function at(t){let o;if(e.multiple===!0)if(t.from!==void 0){const s=ne(t.from),g=ne(t.to),d=y.value.filter(f=>f.dateHash<s||f.dateHash>g),D=K.value.filter(({from:f,to:$})=>$.dateHash<s||f.dateHash>g);o=d.concat(D).concat(t).map(f=>ke(f))}else{const s=qe.value.slice();s.push(ke(t)),o=s}else o=ke(t);wt(o,"add",t)}function ot(t){if(e.noUnset===!0)return;let o=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const s=ke(t);t.from!==void 0?o=e.modelValue.filter(g=>g.from!==void 0?g.from!==s.from&&g.to!==s.to:!0):o=e.modelValue.filter(g=>g!==s),o.length===0&&(o=null)}wt(o,"remove",t)}function xt(t,o,s){const g=y.value.concat(K.value).map(d=>ke(d,t,o)).filter(d=>d.from!==void 0?d.from.dateHash!==null&&d.to.dateHash!==null:d.dateHash!==null);h("update:modelValue",(e.multiple===!0?g:g[0])||null,s)}function Jt(){if(e.minimal!==!0)return m("div",{class:"q-date__header "+b.value},[m("div",{class:"relative-position"},[m(Pe,{name:"q-transition--fade"},()=>m("div",{key:"h-yr-"+ft.value,class:"q-date__header-subtitle q-date__header-link "+(H.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:u.value,...r("vY",{onClick(){H.value="Years"},onKeyup(t){t.keyCode===13&&(H.value="Years")}})},[ft.value]))]),m("div",{class:"q-date__header-title relative-position flex no-wrap"},[m("div",{class:"relative-position col"},[m(Pe,{name:"q-transition--fade"},()=>m("div",{key:"h-sub"+gt.value,class:"q-date__header-title-label q-date__header-link "+(H.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:u.value,...r("vC",{onClick(){H.value="Calendar"},onKeyup(t){t.keyCode===13&&(H.value="Calendar")}})},[gt.value]))]),e.todayBtn===!0?m(V,{class:"q-date__header-today self-start",icon:w.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:u.value,onClick:pt}):null])])}function lt({label:t,type:o,key:s,dir:g,goTo:d,boundaries:D,cls:f}){return[m("div",{class:"row items-center q-date__arrow"},[m(V,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ue.value[0],tabindex:u.value,disable:D.prev===!1,...r("go-#"+o,{onClick(){d(-1)}})})]),m("div",{class:"relative-position overflow-hidden flex flex-center"+f},[m(Pe,{name:"q-transition--jump-"+g},()=>m("div",{key:s},[m(V,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:u.value,...r("view#"+o,{onClick:()=>{H.value=o}})})]))]),m("div",{class:"row items-center q-date__arrow"},[m(V,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ue.value[1],tabindex:u.value,disable:D.next===!1,...r("go+#"+o,{onClick(){d(1)}})})])]}const Xt={Calendar:()=>[m("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[m("div",{class:"q-date__navigation row items-center no-wrap"},lt({label:I.value.months[p.value.month-1],type:"Months",key:p.value.month,dir:_e.value,goTo:kt,boundaries:Xe.value.month,cls:" col"}).concat(lt({label:p.value.year,type:"Years",key:p.value.year,dir:pe.value,goTo:tt,boundaries:Xe.value.year,cls:""}))),m("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},At.value.map(t=>m("div",{class:"q-date__calendar-item"},[m("div",t)]))),m("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[m(Pe,{name:"q-transition--slide-"+_e.value},()=>m("div",{key:z.value,class:"q-date__calendar-days fit"},_t.value.map(t=>m("div",{class:t.classes},[t.in===!0?m(V,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:u.value,...r("day#"+t.i,{onClick:()=>{Zt(t.i)},onMouseover:()=>{ea(t.i)}})},t.event!==!1?()=>m("div",{class:"q-date__event bg-"+t.event}):null):m("div",""+t.i)]))))])])],Months(){const t=p.value.year===G.value.year,o=g=>Q.value!==null&&p.value.year===Q.value.year&&Q.value.month>g||N.value!==null&&p.value.year===N.value.year&&N.value.month<g,s=I.value.monthsShort.map((g,d)=>{const D=p.value.month===d+1;return m("div",{class:"q-date__months-item flex flex-center"},[m(V,{class:t===!0&&G.value.month===d+1?"q-date__today":null,flat:D!==!0,label:g,unelevated:D,color:D===!0?te.value:null,textColor:D===!0?oe.value:null,tabindex:u.value,disable:o(d+1),...r("month#"+d,{onClick:()=>{Wt(d+1)}})})])});return e.yearsInMonthView===!0&&s.unshift(m("div",{class:"row no-wrap full-width"},[lt({label:p.value.year,type:"Years",key:p.value.year,dir:pe.value,goTo:tt,boundaries:Xe.value.year,cls:" col"})])),m("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},s)},Years(){const t=Ce.value,o=t+ge,s=[],g=d=>Q.value!==null&&Q.value.year>d||N.value!==null&&N.value.year<d;for(let d=t;d<=o;d++){const D=p.value.year===d;s.push(m("div",{class:"q-date__years-item flex flex-center"},[m(V,{key:"yr"+d,class:G.value.year===d?"q-date__today":null,flat:!D,label:d,dense:!0,unelevated:D,color:D===!0?te.value:null,textColor:D===!0?oe.value:null,tabindex:u.value,disable:g(d),...r("yr#"+d,{onClick:()=>{Et(d)}})})]))}return m("div",{class:"q-date__view q-date__years flex flex-center"},[m("div",{class:"col-auto"},[m(V,{round:!0,dense:!0,flat:!0,icon:Ue.value[0],tabindex:u.value,disable:g(t),...r("y-",{onClick:()=>{Ce.value-=ge}})})]),m("div",{class:"q-date__years-content col self-stretch row items-center"},s),m("div",{class:"col-auto"},[m(V,{round:!0,dense:!0,flat:!0,icon:Ue.value[1],tabindex:u.value,disable:g(o),...r("y+",{onClick:()=>{Ce.value+=ge}})})])])}};function Zt(t){const o={...p.value,day:t};if(e.range===!1){Gt(o,z.value);return}if(P.value===null){const s=_t.value.find(d=>d.fill!==!0&&d.i===t);if(e.noUnset!==!0&&s.range!==void 0){ot({target:o,from:s.range.from,to:s.range.to});return}if(s.selected===!0){ot(o);return}const g=ne(o);P.value={init:o,initHash:g,final:o,finalHash:g},h("rangeStart",me(o))}else{const s=P.value.initHash,g=ne(o),d=s<=g?{from:P.value.init,to:o}:{from:o,to:P.value.init};P.value=null,at(s===g?o:{target:o,...d}),h("rangeEnd",{from:me(d.from),to:me(d.to)})}}function ea(t){if(P.value!==null){const o={...p.value,day:t};Object.assign(P.value,{final:o,finalHash:ne(o)})}}return Object.assign(S,{setToday:pt,setView:Ft,offsetCalendar:zt,setCalendarTo:Ze,setEditingRange:Yt}),()=>{const t=[m("div",{class:"q-date__content col relative-position"},[m(Pe,{name:"q-transition--fade"},Xt[H.value])])],o=ct(a.default);return o!==void 0&&t.push(m("div",{class:"q-date__actions"},o)),e.name!==void 0&&e.disable!==!0&&Te(t,"push"),m("div",{class:Je.value,...Nt.value},[Jt(),m("div",{ref:ce,class:"q-date__main col column",tabindex:-1},t)])}}});const vl=["top","middle","bottom"];var yl=De({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>vl.includes(e)}},setup(e,{slots:a}){const h=v(()=>e.align!==void 0?{verticalAlign:e.align}:null),S=v(()=>{const w=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(w!==void 0?` text-${w}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>m("div",{class:S.value,style:h.value,role:"status","aria-label":e.label},sa(a.default,e.label!==void 0?[e.label]:[]))}});const _l=re({name:"OTDComponent",setup(){const e=de(),a=Date.now(),h=Mt.formatDate(a,"MM/DD");return{reStore:e,otditems:c([]),promptOTDDate:c(!1),otddate:c(Date.now()),otdlabel:c(h),otdtype:c("selected")}},mounted(){this.init(),A(this.reStore.preferences,async(e,a)=>{console.log("OTD watcher"),e.langVoiceKey!==a.langVoiceKey?this.init():(console.log("OTD watcher ",e),this.init())})},methods:{async init(){console.log("OTD init");const e=this.reStore.preferences.langVoiceKey;await this.reStore.wiki.setLang(this.reStore.langVoices[e].langName);const a=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=a[this.otdtype],console.log(this.otditems);for(const[S,w]of Object.entries(this.reStore.langVoices)){const C=w.flagName;Ve("#otdfi").classed(C,!1)}const h=this.reStore.langVoices[e].flagName;Ve("#otdfi").classed(h,!0)},async loadPageId(e){console.log("loadPageId ",e);const a=this.reStore.preferences.langVoiceKey;console.log("OTD load ",a),this.reStore.loadPageId(e,a),this.reStore.router.push("/teacher/editor")},async load(e){console.log("load",this.otditems[e].text),console.log("load",this.otditems[e]);const a=this.reStore.preferences.langVoiceKey;console.log("OTD load ",a),this.reStore.loadPageId(this.otditems[e].pages[0].pageid,a),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const e=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=e.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=Mt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(e){console.log("otdOptionsCB",this.otdtype);const a=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=a[this.otdtype]}}}),pl=n("div",{class:"text-h6"},"Select Date",-1),Cl={class:"q-gutter-y-sm column"},Sl=n("span",{id:"otdfi",class:"text-h4"},null,-1),bl={class:""},kl=["onClick"],wl=n("br",null,null,-1);function $l(e,a,h,S,w,C){return _(),x(W,null,[l(He,{modelValue:e.promptOTDDate,"onUpdate:modelValue":a[2]||(a[2]=r=>e.promptOTDDate=r),persistent:""},{default:i(()=>[l(O,{style:{"min-width":"350px"}},{default:i(()=>[l(R,{align:"center"},{default:i(()=>[pl]),_:1}),l(fl,{modelValue:e.otddate,"onUpdate:modelValue":a[0]||(a[0]=r=>e.otddate=r),minimal:""},null,8,["modelValue"]),l(Le,{align:"center",class:"text-white"},{default:i(()=>[J(l(V,{flat:"",label:"Cancel"},null,512),[[Z]]),J(l(V,{flat:"",label:"Update OTD date",onClick:a[1]||(a[1]=r=>this.updateOTDDate())},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(O,{flat:""},{default:i(()=>[l(R,null,{default:i(()=>[l(Ae,{padding:"",class:"rounded-borders"},{default:i(()=>[l(Ke,{"header-style":{border:"1px solid gray"},label:"On This Day"},{default:i(()=>[n("div",Cl,[l(xe,{class:"bg-primary text-white rounded-borders q-my-md"},{default:i(()=>[l(V,{dark:"",standout:"",onClick:a[3]||(a[3]=r=>e.promptOTDDate=!0)},{default:i(()=>[M(k(e.otdlabel),1)]),_:1}),l(ze),Sl,l(ze),l(xa,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":a[4]||(a[4]=r=>this.otdtype=r),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:a[5]||(a[5]=r=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),n("div",bl,[(_(!0),x(W,null,ye(e.otditems,(r,u)=>(_(),E(O,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:e.otditems,"onUpdate:modelValue":a[6]||(a[6]=b=>e.otditems=b),key:u},{default:i(()=>[n("span",{style:{cursor:"pointer"},onClick:b=>this.load(u)},k(u),9,kl),M(". "+k(r.year)+" "+k(r.text),1),wl,(_(!0),x(W,null,ye(r.pages,(b,B)=>(_(),x("span",{key:B},[l(yl,{class:"on-left",color:"accent",style:{cursor:"pointer"},onClick:L=>this.loadPageId(b.pageid)},{default:i(()=>[l(Y,null,{default:i(()=>[M(k(b.title),1)]),_:2},1024),l(T,{size:"xs",name:"link"})]),_:2},1032,["onClick"])]))),128))]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}var xl=ue(_l,[["render",$l]]);const Vl=re({name:"CurrentAssignment",setup(){const e=de();return{reStore:e,ck:c("-"),goal:c("-"),created:c("-"),updated:c("-"),id:c("-"),points:c("-"),pages:c([]),pgIdx:c(e.courses.pgIdx),title:c(""),promptEditTitle:c(!1)}},mounted(){console.log("CurrentAssignment mounted"),A(this.reStore.courses,async(e,a)=>{try{console.log("CurrentAssignment.watcher");const h=e.ck,S=e.aid;this.id=S,this.ck=h,this.goal=this.reStore.courses[h].assignments[S].goal,this.created=this.reStore.courses[h].assignments[S].created,this.updated=this.reStore.courses[h].assignments[S].updated,this.points=this.reStore.courses[h].assignments[S].points;try{const w=this.reStore.courses[h].assignments[S].pages.length;console.log("pages.length ",w)}catch{this.reStore.courses[h].assignments[S].pages=[]}this.pages=this.reStore.courses[h].assignments[S].pages,this.title=this.reStore.courses[h].assignments[S].title,this.pgIdx=this.reStore.courses.pgIdx}catch(h){console.log(h)}},{immediate:!0,deep:!0})},methods:{save(){console.log("save"),this.reStore.saveCurrentAssignment()},nextPage(){this.reStore.nextPage()},changeTitleCB(){console.log("CurrentAssignment.changeTitleCB",this.title),this.reStore.setAssignmentTitle(this.reStore.courses.ck,this.reStore.courses.aid,this.title)}}}),Dl=n("div",{class:"text-h6"},"Change assignment title",-1),Tl={class:"text-weight-bolder text-center q-pa-md text-white"},Il=n("br",null,null,-1),ql={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Bl={width:"100%"},Ml=n("td",null,"Title",-1),Ol={style:{width:"50%"}},Pl=n("td",null,"Course-Key",-1),Ll={style:{width:"50%"}},Hl=n("td",null,"Assgmnt Id",-1),Kl={style:{width:"50%"}},Al=n("td",null,"Created",-1),Rl={style:{width:"50%"}},Ul=n("td",null,"Updated",-1),jl={style:{width:"50%"}},Ql=n("td",null,"Goal",-1),Nl={style:{width:"50%"}},Fl=n("td",null,"Pages",-1);function zl(e,a,h,S,w,C){const r=F("router-link");return _(),x(W,null,[l(He,{modelValue:e.promptEditTitle,"onUpdate:modelValue":a[3]||(a[3]=u=>e.promptEditTitle=u),persistent:""},{default:i(()=>[l(O,{style:{"min-width":"350px"}},{default:i(()=>[l(R,null,{default:i(()=>[Dl]),_:1}),l(R,{class:"q-pt-none"},{default:i(()=>[l(ie,{dense:"",modelValue:e.title,"onUpdate:modelValue":a[0]||(a[0]=u=>e.title=u),autofocus:"",onKeyup:a[1]||(a[1]=mt(u=>{e.prompt=!1,this.changeTitleCB()},["enter"]))},null,8,["modelValue"])]),_:1}),l(Le,{align:"right",class:"text-white"},{default:i(()=>[J(l(V,{outline:"",label:"Cancel"},null,512),[[Z]]),J(l(V,{outline:"",label:"Save",onClick:a[2]||(a[2]=u=>this.changeTitleCB())},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(O,{flat:""},{default:i(()=>[l(R,null,{default:i(()=>[n("div",Tl,[l(r,{to:"/teacher/editor",class:"text-white"},{default:i(()=>[M(k(this.title.slice(0,20)),1)]),_:1}),Il,l(T,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:a[4]||(a[4]=u=>this.promptEditTitle=!0),size:"sm"}),l(T,{style:{cursor:"pointer"},class:"on-right",name:"save",onClick:this.save,size:"sm"},null,8,["onClick"])]),n("div",ql,[n("table",Bl,[n("tr",null,[Ml,n("td",Ol,k(this.title),1)]),n("tr",null,[Pl,n("td",Ll,k(this.ck),1)]),n("tr",null,[Hl,n("td",Kl,k(this.id),1)]),n("tr",null,[Al,n("td",Rl,k(this.created),1)]),n("tr",null,[Ul,n("td",jl,k(this.updated),1)]),n("tr",null,[Ql,n("td",Nl,k(this.goal),1)]),n("tr",null,[Fl,n("td",{style:{width:"50%",cursor:"pointer"},onClick:a[5]||(a[5]=u=>this.nextPage())},k(this.pgIdx+1)+" / "+k(this.pages.length),1)])])])]),_:1})]),_:1})],64)}var Yl=ue(Vl,[["render",zl]]);const El=re({name:"CurrentCourse",setup(){return{reStore:de(),title:c(""),assignmentCount:c(0),courseKey:c(""),created:c(""),updated:c(""),enrollmentCount:c(0),owner:c("")}},mounted(){console.log("CurrentCourse mounted"),A(this.reStore.courses,async(e,a)=>{try{if(this.reStore.courses.ck!=="undefined"){const h=this.reStore.courses.ck;console.log("CurrentCourse ",h),this.title=this.reStore.courses[h].title,this.courseKey=this.reStore.courses[h].courseKey,this.created=this.reStore.courses[h].created,this.updated=this.reStore.courses[h].updated,this.assignmentCount=Object.keys(this.reStore.courses[h].assignments).length,this.enrollmentCount=Object.keys(this.reStore.courses[h].enrollment).length,this.owner=this.reStore.courses[h].owner}}catch(h){console.log(h)}},{immediate:!0,deep:!0})},methods:{dummy(){console.log("dummy")}}}),Wl={class:"text-weight-bolder text-center q-pa-md"},Gl={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Jl={width:"100%"},Xl=n("td",null,"Title",-1),Zl={style:{width:"50%"}},en=n("td",null,"Course-Key",-1),tn={style:{width:"50%"}},an=n("td",null,"Created",-1),on={style:{width:"50%"}},ln=n("td",null,"Updated",-1),nn={style:{width:"50%"}},sn=n("td",null,"Owner",-1),rn={style:{width:"50%"}},un=n("td",null,"Assignments",-1),dn={style:{width:"50%"}},cn=n("td",null,"Enrollment",-1),mn={style:{width:"50%"}};function hn(e,a,h,S,w,C){return _(),E(O,{flat:""},{default:i(()=>[l(R,null,{default:i(()=>[n("div",Wl,k(this.title),1),n("div",Gl,[n("table",Jl,[n("tr",null,[Xl,n("td",Zl,k(this.title),1)]),n("tr",null,[en,n("td",tn,k(this.courseKey),1)]),n("tr",null,[an,n("td",on,k(this.created),1)]),n("tr",null,[ln,n("td",nn,k(this.updated),1)]),n("tr",null,[sn,n("td",rn,k(this.owner.slice(0,10)),1)]),n("tr",null,[un,n("td",dn,k(this.assignmentCount),1)]),n("tr",null,[cn,n("td",mn,k(this.enrollmentCount),1)])])])]),_:1})]),_:1})}var gn=ue(El,[["render",hn]]);const fn=re({name:"TeacherLayout",components:{CurrentCourse:gn,DocumentationComponent:Va,SearchComponent:ja,ImagesComponent:Ro,BookmarksComponent:ul,OTDComponent:xl,CurrentAssignment:Yl,PreferencesComponent:Da,CurrentPage:Mo},setup(){const e=c(!1),a=c(!1),h=de(),S=h.preferences,w=c(null),C=c(null);return{step:c(1),reStore:h,initialValues:c(S),scrollAreaRHS:w,scrollAreaLHS:C,leftDrawerOpen:e,rightDrawerOpen:a,toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){a.value=!a.value}}},mounted(){Dt.isActive||(Dt.toggle(),st("primary","#333"),st("secondary",this.initialValues.secondaryColor),st("accent",this.initialValues.accentColor))},methods:{scrollTopRHS(){this.scrollAreaRHS.setScrollPosition("vertical",0)},scrollTopLHS(){this.scrollAreaLHS.setScrollPosition("vertical",0)}}}),vn={class:"dashboard-wrapper"},yn=n("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),_n=n("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1);function pn(e,a,h,S,w,C){const r=F("router-link"),u=F("router-view"),b=F("DocumentationComponent"),B=F("SearchComponent"),L=F("ImagesComponent"),U=F("BookmarksComponent"),X=F("OTDComponent"),Te=F("CurrentCourse"),ce=F("CurrentAssignment"),j=F("CurrentPage"),I=F("PreferencesComponent");return _(),E(ca,{view:"hHh LpR fFf"},{default:i(()=>[l(ua,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:i(()=>[l(xe,null,{default:i(()=>[l(V,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),l(ia,null,{default:i(()=>[l(r,{to:"/teacher"},{default:i(()=>[l(T,{name:"home",color:"white"},{default:i(()=>[l(Y,null,{default:i(()=>[M("Return to My Teacher Page")]),_:1})]),_:1})]),_:1})]),_:1}),this.reStore.authenticated?(_(),E(V,{key:0,onClick:a[0]||(a[0]=ee=>this.reStore.router.push("/student")),icon:"switch_account"},{default:i(()=>[l(Y,null,{default:i(()=>[M(" Switch between Teacher or Student role ")]),_:1})]),_:1})):ve("",!0),this.reStore.authenticated?(_(),E(V,{key:1,icon:"logout",onClick:a[1]||(a[1]=ee=>this.reStore.logout())})):ve("",!0),l(V,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1}),l(ra,{align:"left",class:"hidden"},{default:i(()=>[l(Ne,{to:"/logo",label:"Logo"}),l(Ne,{to:"/teaching",label:"Teaching"}),l(Ne,{to:"/taking",label:"Taking"}),l(Ne,{to:"/gradebook",label:"Gradebook"})]),_:1})]),_:1}),l(da,{class:"container-fluid"},{default:i(()=>[n("div",vn,[l(u)]),l(Tt,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":a[2]||(a[2]=ee=>e.leftDrawerOpen=ee),side:"left"},{default:i(()=>[l(xe,{flat:"",class:"bg-primary text-white"},{default:i(()=>[l(V,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l($e,{dark:"",vertical:"",inset:""}),l(V,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l($e,{dark:"",vertical:"",inset:""}),l(ze),l(V,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopLHS},{default:i(()=>[l(Y,null,{default:i(()=>[M("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),yn,l(It,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaLHS"},{default:i(()=>[l(b),l(B),l(L),l(U),l(X)]),_:1},8,["visible"])]),_:1},8,["modelValue"]),l(Tt,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":a[3]||(a[3]=ee=>e.rightDrawerOpen=ee),side:"right"},{default:i(()=>[l(xe,{flat:"",class:"bg-primary text-white"},{default:i(()=>[l(V,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l($e,{dark:"",vertical:"",inset:""}),l(V,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l($e,{dark:"",vertical:"",inset:""}),l(ze),l(V,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopRHS},{default:i(()=>[l(Y,null,{default:i(()=>[M("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),_n,l(It,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaRHS"},{default:i(()=>[l(Te),l(ce),l(j),l(I,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var Ln=ue(fn,[["render",pn]]);export{Ln as default};
