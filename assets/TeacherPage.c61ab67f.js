import{Q as k}from"./use-form.3ccd5fe5.js";import{Q}from"./QInput.deb67921.js";import{_ as K,r as g,o as r,c as w,w as o,a as t,aL as V,K as B,Q as _,e as n,af as u,ak as P,ag as d,ai as y,ah as v,aj as m,a1 as S,aM as x}from"./index.b48f1b2b.js";import{a as $,r as E,d as z,Q as q,C as T}from"./ClosePopup.04e023d2.js";import{Q as b}from"./QCard.35cd3687.js";import{Q as h}from"./QTooltip.e9dc233a.js";import{Q as D}from"./QImg.d781b1cb.js";import{a as N,Q as I}from"./QList.32c35eca.js";import{Q as U}from"./QPage.123dba2b.js";import{u as F}from"./re-store.d4331609.js";import"./use-key-composition.af798746.js";import"./use-dark.78a7e6c5.js";import"./use-prevent-scroll.d39605cc.js";import"./scroll.3f86a34c.js";import"./use-portal.5cfce4c0.js";import"./selection.c2947f01.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";function L(s){const e=document.createElement("textarea");e.value=s,e.contentEditable="true",e.style.position="fixed";const f=()=>{};$(f),document.body.appendChild(e),e.focus(),e.select();const a=document.execCommand("copy");return e.remove(),E(f),a}function j(s){return navigator.clipboard!==void 0?navigator.clipboard.writeText(s):new Promise((e,f)=>{const a=L(s);a?e(!0):f(a)})}const H=F(),M={components:{},setup(){return{reStore:H,mval:g(!0),label:g("howdy"),courseKey:g(null),courseTitle:g(null),prompt:g(!1)}},mounted(){console.log("TeacherPage mounted ",this.reStore.courses),this.reStore.unloadCurrent()},methods:{selectAssignment(s,e){this.reStore.courses.ck===s&&this.reStore.courses.aid===e?this.reStore.unloadCurrent():(this.reStore.courses.ck=s,this.reStore.courses.aid=e,this.reStore.courses.trigger+=1)},copyCK(s){j(s).then(()=>{console.log("ck copied to clipboard",s)}).catch(e=>{console.log(e)})},newCourseCB(){console.log("courseCB"),this.reStore.newCourse()},newAssignmentCB(s){console.log("assignmentCB: ",s),this.reStore.newAssignment(s)},editAssignmentCB(s,e){console.log("editAssignmentCB: ",s,e),this.reStore.loadAssignment(s,e),this.reStore.router.push("/teacher/editor")},changeTitleCB(){console.log("TeacherPage.titleCB",this.courseKey,this.courseTitle),this.reStore.setCourseTitle(this.courseKey,this.courseTitle)},deleteCourseCB(s){this.reStore.deleteCourse(s)},deleteAssignmentCB(s,e){this.reStore.deleteAssignment(s,e)},takeAssignmentCB(s,e){console.log("TeacherPage.takeAssignment ",s,e),this.reStore.loadAssignment(s,e),this.reStore.router.push("/teacher/assignment")}}},R=n("div",{class:"text-h6"},"Change course title",-1),G={class:"flex-center row q-gutter-md"},J=n("div",{style:{fontSize:"18pt"}},"Teacher Dashboard",-1),O={class:"q-pa-md"},W=n("br",null,null,-1),X=n("br",null,null,-1),Y=n("br",null,null,-1),Z={class:"flex flex-row justify-center"},ee={class:"absolute-top text-center"},te={class:"text-h6"},oe={class:"text-subtitle2"},se={key:0},le={key:1},ne={style:{"font-size":"22pt",width:"100%"},class:"text-center absolute-bottom"},re=n("br",null,null,-1),ie={class:"hidden"},ae={width:"100%"},ue=n("tr",null,[n("th",{colSpan:"100"},"Course Score Sheet")],-1),de=n("th",null,"Student",-1),ce={style:{"text-align":"center"}},me={key:0},he={key:1};function pe(s,e,f,a,_e,fe){return r(),w(U,{class:"q-gutter-md"},{default:o(()=>[t(q,{modelValue:a.prompt,"onUpdate:modelValue":e[3]||(e[3]=c=>a.prompt=c),persistent:""},{default:o(()=>[t(b,{style:{"min-width":"350px"}},{default:o(()=>[t(k,null,{default:o(()=>[R]),_:1}),t(k,{class:"q-pt-none"},{default:o(()=>[t(Q,{dense:"",modelValue:a.courseTitle,"onUpdate:modelValue":e[0]||(e[0]=c=>a.courseTitle=c),autofocus:"",onKeyup:e[1]||(e[1]=V(c=>{a.prompt=!1,this.changeTitleCB()},["enter"])),onHide:this.dck},null,8,["modelValue","onHide"])]),_:1}),t(z,{align:"right",class:"text-white"},{default:o(()=>[B(t(_,{outline:"",label:"Cancel"},null,512),[[T]]),B(t(_,{outline:"",label:"Save",onClick:e[2]||(e[2]=c=>this.changeTitleCB())},null,512),[[T]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n("div",G,[J,n("div",null,[t(_,{icon:"list_alt",onClick:e[4]||(e[4]=c=>this.newCourseCB())},{default:o(()=>[t(h,null,{default:o(()=>[u("Create a new course")]),_:1})]),_:1}),this.reStore.authenticated?(r(),w(_,{key:0,onClick:e[5]||(e[5]=c=>this.reStore.router.push("/student")),icon:"switch_account"},{default:o(()=>[t(h,null,{default:o(()=>[u(" Switch to Student-role ")]),_:1})]),_:1})):P("",!0)])]),(r(!0),d(v,null,y(this.reStore.userSnapshot.teaching,(c,i,A)=>(r(),w(b,{flat:"",key:A,style:{opacity:"1.0"}},{default:o(()=>[n("div",O,[t(N,{bordered:"",class:"rounded-borders"},{default:o(()=>[t(I,{label:"Expand Course",modelValue:a.mval,"onUpdate:modelValue":e[9]||(e[9]=l=>a.mval=l),"header-style":{fontSize:"16pt"}},{default:o(()=>[t(b,{flat:""},{default:o(()=>[t(k,{class:"text-center",style:{fontSize:"12pt"}},{default:o(()=>[u(" Course Title: "+m(this.reStore.courses[i].title)+" \xA0",1),t(S,{class:"ptr",name:"edit",onClick:l=>{a.prompt=!0,this.courseTitle=this.reStore.courses[i].title,this.courseKey=i}},null,8,["onClick"]),W,u(" Course-Key: "+m(i)+" ",1),t(S,{class:"ptr",name:"content_copy",onClick:l=>this.copyCK(i)},null,8,["onClick"]),n("div",null,[t(_,{icon:"delete",onClick:l=>this.deleteCourseCB(c.ck)},{default:o(()=>[t(h,null,{default:o(()=>[u("Delete Course")]),_:1})]),_:2},1032,["onClick"]),t(_,{icon:"post_add",onClick:l=>this.newAssignmentCB(c.ck)},{default:o(()=>[t(h,null,{default:o(()=>[u("New Assignment")]),_:1})]),_:2},1032,["onClick"]),t(_,{icon:"content_copy",onClick:l=>this.copyCK(i)},{default:o(()=>[t(h,null,{default:o(()=>[u("Copy this course-key to clipboard. Enroll "),X,u("in this course using this course-key from "),Y,u("the Student Page.")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1024),n("div",Z,[(r(!0),d(v,null,y(this.reStore.courses[i].assignments,(l,p)=>(r(),d("div",{key:l},[t(b,{bordered:"",flat:"",class:"ccard q-mx-sm q-my-md"},{default:o(()=>[t(D,{fit:s.cover,src:l.coverUrl,height:"100%",onClick:C=>this.selectAssignment(i,l.id)},{default:o(()=>[n("div",ee,[n("div",te,m(l.title.slice(0,18)),1),n("div",oe,[l.pages?(r(),d("span",se,"Pages: "+m(l.pages.length),1)):(r(),d("span",le,"Pages: None"))])]),n("div",ne,[t(S,{onClick:[C=>this.takeAssignmentCB(i,l.id),e[6]||(e[6]=x(()=>{},["stop","prevent"]))],name:"play_circle",class:"ptr z-top"},{default:o(()=>[t(h,null,{default:o(()=>[u("Take Assignment")]),_:1})]),_:2},1032,["onClick"]),t(S,{onClick:[C=>this.editAssignmentCB(i,l.id),e[7]||(e[7]=x(()=>{},["stop","prevent"]))],name:"edit",class:"ptr on-right z-top"},{default:o(()=>[t(h,null,{default:o(()=>[u("Edit Assignment"),re,u(m(l.id),1)]),_:2},1024)]),_:2},1032,["onClick"]),t(S,{onClick:[C=>this.deleteAssignmentCB(i,l.id),e[8]||(e[8]=x(()=>{},["stop","prevent"]))],name:"delete",class:"ptr on-right z-top"},{default:o(()=>[t(h,null,{default:o(()=>[u("Delete Assignment")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["fit","src","onClick"])]),_:2},1024),n("span",ie,m(p),1)]))),128))]),t(k,null,{default:o(()=>[n("table",ae,[ue,n("tr",null,[de,(r(!0),d(v,null,y(this.reStore.courses[i].assignments,(l,p)=>(r(),d("th",{key:p},[n("span",null,m(l.title),1)]))),128))]),(r(!0),d(v,null,y(this.reStore.courses[i].enrollment,l=>(r(),d("tr",{key:l.name},[n("td",ce,m(l.name),1),(r(!0),d(v,null,y(this.reStore.courses[i].assignments,(p,C)=>(r(),d("td",{style:{"text-align":"center"},key:C},[p.scores&&p.scores[l.emailKey]?(r(),d("span",me,m(p.scores[l.emailKey]),1)):(r(),d("span",he," -- "))]))),128))]))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})}var ze=K(M,[["render",pe]]);export{ze as default};
