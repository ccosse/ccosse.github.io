import{d as P,r as K,a as y,Q as v,i as V,h as $,C as A}from"./ClosePopup.09a6a61a.js";import{Q as q}from"./QInput.84bdab0e.js";import{_ as E,r as k,o as a,c as S,w as s,a as t,aK as N,p as w,Q as h,e as l,af as n,aJ as b,au as u,av as x,aL as B,ag as C,x as f}from"./index.b1b5193b.js";import{Q as d}from"./QTooltip.dcc808c0.js";import{Q as D}from"./QImg.92a3e4c0.js";import{Q as F}from"./QScrollArea.5272cab8.js";import{Q as I}from"./QPage.c4d313f1.js";import{u as U}from"./re-store.7482dd2f.js";import"./use-dark.d7d8326b.js";import"./use-portal.bf1b573e.js";import"./use-key-composition.ff0a38a1.js";import"./position-engine.17b12f2c.js";import"./selection.24e63d94.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";function H(o){const e=document.createElement("textarea");e.value=o,e.contentEditable="true",e.style.position="fixed";const _=()=>{};P(_),document.body.appendChild(e),e.focus(),e.select();const i=document.execCommand("copy");return e.remove(),K(_),i}function L(o){return navigator.clipboard!==void 0?navigator.clipboard.writeText(o):new Promise((e,_)=>{const i=H(o);i?e(!0):_(i)})}const z=U(),J={components:{},setup(){return{reStore:z,courseKey:k(null),courseTitle:k(null),prompt:k(!1)}},mounted(){console.log("TeacherPage mounted ",this.reStore.courses)},methods:{copyCK(o){L(o).then(()=>{console.log("ck copied to clipboard",o)}).catch(e=>{console.log(e)})},newCourseCB(){console.log("courseCB"),this.reStore.newCourse()},newAssignmentCB(o){console.log("assignmentCB: ",o),this.reStore.newAssignment(o)},editAssignmentCB(o,e){console.log("editAssignmentCB: ",o,e),this.reStore.editAssignment(o,e)},changeTitleCB(){console.log("TeacherPage.titleCB",this.courseKey,this.courseTitle),this.reStore.setCourseTitle(this.courseKey,this.courseTitle)},deleteCourseCB(o){this.reStore.deleteCourse(o)},deleteAssignmentCB(o,e){this.reStore.deleteAssignment(o,e)},takeAssignmentCB(o,e){console.log("TeacherPage.takeAssignment ",o,e),this.reStore.takeAssignmentAsTeacher(o,e)}}},M=l("div",{class:"text-h6"},"Change course title",-1),R={class:"flex-center q-mt-xl q-mb-xl row q-gutter-md"},j=l("div",{class:"text-h6"},"My Teacher Page",-1),G={key:0,class:"flex-center"},O=l("br",null,null,-1),W=l("br",null,null,-1),X=l("br",null,null,-1),Y={id:"iconbar",class:"q-mx-sm"},Z={class:"absolute-top text-center"},ee={class:"text-h6"},te={class:"text-subtitle2"},se={key:0},oe={key:1},le={style:{"font-size":"22pt",width:"100%"},class:"text-center absolute-bottom"},ne={class:"hidden"};function ie(o,e,_,i,re,ae){return a(),S(I,{class:"q-gutter-md"},{default:s(()=>[t($,{modelValue:i.prompt,"onUpdate:modelValue":e[3]||(e[3]=r=>i.prompt=r),persistent:""},{default:s(()=>[t(y,{style:{"min-width":"350px"}},{default:s(()=>[t(v,null,{default:s(()=>[M]),_:1}),t(v,{class:"q-pt-none"},{default:s(()=>[t(q,{dense:"",modelValue:i.courseTitle,"onUpdate:modelValue":e[0]||(e[0]=r=>i.courseTitle=r),autofocus:"",onKeyup:e[1]||(e[1]=N(r=>{i.prompt=!1,this.changeTitleCB()},["enter"])),onHide:this.dck},null,8,["modelValue","onHide"])]),_:1}),t(V,{align:"right",class:"text-white"},{default:s(()=>[w(t(h,{outline:"",label:"Cancel"},null,512),[[A]]),w(t(h,{outline:"",label:"Save",onClick:e[2]||(e[2]=r=>this.changeTitleCB())},null,512),[[A]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l("div",R,[j,l("div",null,[t(h,{icon:"list_alt",onClick:e[4]||(e[4]=r=>this.newCourseCB())},{default:s(()=>[t(d,null,{default:s(()=>[n("Add a course")]),_:1})]),_:1}),this.reStore.authenticated?(a(),S(h,{key:0,onClick:e[5]||(e[5]=r=>this.reStore.router.push("/student")),icon:"switch_account"},{default:s(()=>[t(d,null,{default:s(()=>[n(" Switch to Student role ")]),_:1})]),_:1})):b("",!0)])]),this.reStore.userSnapshot.teaching?(a(),u("div",G,[(a(!0),u(x,null,B(this.reStore.userSnapshot.teaching,(r,m)=>(a(),S(y,{key:r.ck,style:{opacity:"1.0"}},{default:s(()=>[t(v,{class:"text-center"},{default:s(()=>[n(" Title: "+C(this.reStore.courses[m].title)+" \xA0",1),t(f,{class:"ptr",name:"edit",onClick:p=>{i.prompt=!0,this.courseTitle=this.reStore.courses[m].title,this.courseKey=m}},null,8,["onClick"]),O,n(" Key: "+C(m)+" ",1),t(f,{class:"ptr",name:"content_copy",onClick:p=>this.copyCK(m)},null,8,["onClick"]),l("div",null,[t(h,{icon:"delete",onClick:p=>this.deleteCourseCB(r.ck)},{default:s(()=>[t(d,null,{default:s(()=>[n("Delete Course")]),_:1})]),_:2},1032,["onClick"]),t(h,{icon:"post_add",onClick:p=>this.newAssignmentCB(r.ck)},{default:s(()=>[t(d,null,{default:s(()=>[n("New Assignment")]),_:1})]),_:2},1032,["onClick"]),t(h,{icon:"content_copy",onClick:p=>this.copyCK(m)},{default:s(()=>[t(d,null,{default:s(()=>[n("Copy this course-key to clipboard. Enroll "),W,n("in this course using this course-key from "),X,n("the Student Page.")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1024),t(v,null,{default:s(()=>[l("div",Y,[t(F,{style:{height:"300px","max-width":"100%"}},{default:s(()=>[(a(!0),u(x,null,B(this.reStore.userSnapshot.teaching,(p,g)=>(a(),u("ul",{id:"icons_ul",key:p.ck},[(a(!0),u(x,null,B(this.reStore.courses[g].assignments,(c,Q)=>(a(),u("li",{key:c},[t(y,{flat:"",class:"ccard q-mx-sm"},{default:s(()=>[t(D,{fit:o.cover,src:c.coverUrl,height:"100%"},{default:s(()=>[l("div",Z,[l("div",ee,C(c.title.slice(0,18)),1),l("div",te,[c.pages?(a(),u("span",se,"Pages: "+C(c.pages.length),1)):(a(),u("span",oe,"Pages: None"))])]),l("div",le,[t(f,{onClick:T=>this.takeAssignmentCB(g,c.id),name:"play_circle",class:"ptr"},{default:s(()=>[t(d,null,{default:s(()=>[n("Take Assignment")]),_:1})]),_:2},1032,["onClick"]),t(f,{onClick:T=>this.editAssignmentCB(g,c.id),name:"edit",class:"ptr on-right"},{default:s(()=>[t(d,null,{default:s(()=>[n("Edit Assignment")]),_:1})]),_:2},1032,["onClick"]),t(f,{onClick:T=>this.deleteAssignmentCB(g,c.id),name:"delete",class:"ptr on-right"},{default:s(()=>[t(d,null,{default:s(()=>[n("Delete Assignment")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["fit","src"])]),_:2},1024),l("span",ne,C(Q),1)]))),128))]))),128))]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))])):b("",!0)]),_:1})}var Be=E(J,[["render",ie]]);export{Be as default};
