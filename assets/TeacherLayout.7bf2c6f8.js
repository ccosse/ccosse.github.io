import{a as G,Q as ne}from"./QCardSection.cf481c09.js";import{u as Wt,Q as at,P as jt,S as Gt,a as yt}from"./ScoreCard.848cea1f.js";import{e as ee,r as _,u as N,_ as te,o as u,an as c,g as o,w as a,J as X,Q as C,k as l,ao as j,j as m,ap as f,aO as xt,f as O,i as T,ar as Y,as as de,aq as M,a as $,c as qt,ay as Xt,h as S,T as De,d as Zt,y as es,q as St,O as ts,l as R,at as et,P as kt,s as tt}from"./index.d600388f.js";import{d as Ce,C as Z,Q as $e}from"./ClosePopup.aee17fcf.js";import{Q as A}from"./QCard.7b650bf7.js";import{Q as q}from"./QTooltip.964104bb.js";import{Q as Ue,D as ss,A as os}from"./DocumentationComponent.e5e7a90d.js";import{Q as xe,a as as,b as Ct,c as $t,d as ns,e as ls}from"./QLayout.94128589.js";import{Q as J,a as B,e as Vt}from"./QExpansionItem.6d0615e7.js";import{Q as rs}from"./QTabs.045c29fb.js";import{u as se,p as fe,t as is,a as bt,f as us,g as ds,j as st,_ as cs,d as wt,s as qe}from"./re-store.b0427d37.js";import{Q as ms}from"./QKnob.abf888dd.js";import{Q as ge}from"./QInput.fcc64e42.js";import{Q as le}from"./QList.fa616e6e.js";import{s as I}from"./transform.aea72fbe.js";import{u as hs,a as gs}from"./use-dark.03719e33.js";import{u as fs,b as ps,a as vs}from"./use-form.3e87e194.js";import{Q as _s}from"./QToggle.72916609.js";import"./TouchPan.5d90484b.js";import"./use-key-composition.f943ac04.js";import"./uid.667792d6.js";import"./use-prevent-scroll.a1a3b042.js";import"./QCheckbox.43d0ba88.js";import"./firebase.79bf92f9.js";import"./index.2cf0d985.js";const ys=ee({name:"SearchComponent",setup(){const e=se(),s=_("");return{reStore:e,searchTerms:s,searchSize:_(e.preferences.resLimit),searchResults:_([]),promptSearchSize:_(!1)}},mounted(){N(this.reStore.preferences,async(p,P)=>{console.log("watcher ",p,P),this.searchSize=p.resLimit;for(const[U,i]of Object.entries(this.reStore.langVoices))I("#sfi").classed(i.flagName,!1);const D=this.reStore.preferences.langVoiceKey;I("#sfi").classed(this.reStore.langVoices[D].flagName,!0)});const e=this.reStore.preferences.langVoiceKey,s=this.reStore.langVoices[e].flagName;I("#sfi").classed(s,!0)},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchResults.splice(e,1)},async load(e){console.log(e),console.log(this.searchResults[e]);const s=this.reStore.preferences.langVoiceKey;console.log("calling loadPageId ",this.searchResults[e].pageid,s),await this.reStore.loadPageId(this.searchResults[e].pageid,s),this.reStore.page.imgIdx=0,this.reStore.courses.trigger+=1},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("doSearch ",e,this.searchTerms),this.reStore.wiki.setLang(e.langName);const s=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",s.results.length),this.searchResults=s.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),Ss=l("div",{class:"text-h6"},"Search Results Size",-1),ks={class:"q-pa-md",style:{"max-width":"350px"}},Cs={class:"q-gutter-y-sm column"},$s=l("span",{class:"on-right text-h2",id:"sfi"},null,-1),Vs={key:0},bs={class:"row cardheader ptr justify-between"},ws=["onClick"],Ds={class:"history-remove"};function xs(e,s,p,P,D,U){return u(),c(Y,null,[o($e,{modelValue:e.promptSearchSize,"onUpdate:modelValue":s[2]||(s[2]=i=>e.promptSearchSize=i),persistent:""},{default:a(()=>[o(A,{style:{"min-width":"350px"}},{default:a(()=>[o(G,{align:"center"},{default:a(()=>[Ss]),_:1}),o(G,{class:"q-pt-none",align:"center"},{default:a(()=>[o(ms,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":s[0]||(s[0]=i=>e.searchSize=i)},null,8,["modelValue"])]),_:1}),o(Ce,{align:"center",class:"text-white"},{default:a(()=>[X(o(C,{flat:"",label:"Cancel"},null,512),[[Z]]),X(o(C,{flat:"",label:"Update results size",onClick:s[1]||(s[1]=i=>this.updateSearchSize())},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l("div",ks,[o(le,{bordered:"",class:"rounded-borders"},{default:a(()=>[o(J,null,{header:a(()=>[o(B,{avatar:""},{default:a(()=>[o(j,{size:"md",icon:"search",color:"positive","text-color":"white"})]),_:1}),o(B,null,{default:a(()=>[m(" Search ")]),_:1})]),default:a(()=>[o(A,null,{default:a(()=>[l("div",Cs,[o(xe,{class:"bg-primary text-white rounded-borders q-my-md"},{default:a(()=>[o(C,{dark:"",standout:"",onClick:s[3]||(s[3]=i=>e.promptSearchSize=!0)},{default:a(()=>[m(f(this.searchResults.length)+" ",1),o(q,null,{default:a(()=>[m("Change results limit ("+f(this.searchSize)+")",1)]),_:1})]),_:1}),$s,o(ge,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":s[6]||(s[6]=i=>e.searchTerms=i),"input-class":"text-right",class:"q-ml-md",onKeyup:[s[7]||(s[7]=i=>this.update()),s[8]||(s[8]=xt(i=>this.doSearch(),["enter"]))]},{append:a(()=>[e.searchTerms===""?(u(),O(T,{key:0,name:"search",onClick:s[4]||(s[4]=i=>this.doSearch())})):(u(),O(T,{key:1,name:"clear",class:"cursor-pointer",onClick:s[5]||(s[5]=i=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(u(),c("div",Vs,[(u(!0),c(Y,null,de(this.searchResults,(i,d)=>(u(),O(A,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":s[9]||(s[9]=y=>this.searchResults=y),key:d},{default:a(()=>[l("div",bs,[l("span",{class:"history-title col-grow",onClick:y=>this.load(d)},f(d)+". "+f(i.title.slice(0,25)),9,ws),l("span",Ds,[o(T,{class:"primary",size:e.xl,color:e.primary,name:"delete",onClick:y=>this.remove(d)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):M("",!0)]),_:1})]),_:1})]),_:1})])],64)}var qs=te(ys,[["render",xs]]);const Ps=ee({name:"ImagesComponent",setup(){return{reStore:se(),newCap:_(""),newDesc:_(""),newName:_(""),newSource:_(""),newUrl:_(""),promptAddImage:_(!1)}},mounted(){N(this.reStore.userSnapshot.images,async(e,s)=>{console.log("watcher ",e,s)})},methods:{addImageCB(){console.log("addImageCB",this.newUrl);const e={name:this.newName,desc:this.newDesc,cap:this.newCap,source:this.newSource,url:this.newUrl};this.reStore.saveImage(null,e)},imgCB(e,s){this.reStore.router.push("/teacher/editor"),console.log(e,s),this.reStore.loadImgId(e)},remove(e,s){console.log(e,s),this.reStore.removeImage(e)}}}),Ts={class:"q-pa-md",style:{"max-width":"350px"}},As={class:"flex flex-center q-ma-sm"},Bs={class:"row cardheader justify-between"},Ks={class:""},Hs={key:0},Is={class:"history-remove ptr"};function Ms(e,s,p,P,D,U){return u(),c(Y,null,[o($e,{modelValue:e.promptAddImage,"onUpdate:modelValue":s[5]||(s[5]=i=>e.promptAddImage=i)},{default:a(()=>[o(A,null,{default:a(()=>[o(G,null,{default:a(()=>[o(ge,{modelValue:e.newCap,"onUpdate:modelValue":s[0]||(s[0]=i=>e.newCap=i),label:"caption"},null,8,["modelValue"]),o(ge,{modelValue:e.newDesc,"onUpdate:modelValue":s[1]||(s[1]=i=>e.newDesc=i),label:"description"},null,8,["modelValue"]),o(ge,{modelValue:e.newName,"onUpdate:modelValue":s[2]||(s[2]=i=>e.newName=i),label:"name"},null,8,["modelValue"]),o(ge,{modelValue:e.newSource,"onUpdate:modelValue":s[3]||(s[3]=i=>e.newSource=i),label:"source"},null,8,["modelValue"]),o(ge,{modelValue:e.newUrl,"onUpdate:modelValue":s[4]||(s[4]=i=>e.newUrl=i),label:"url"},null,8,["modelValue"])]),_:1}),o(Ce,{align:"center",class:"text-white"},{default:a(()=>[X(o(C,{flat:"",label:"Cancel"},null,512),[[Z]]),X(o(C,{flat:"",label:"Add",onClick:this.addImageCB},null,8,["onClick"]),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l("div",Ts,[o(le,{bordered:"",class:"rounded-borders"},{default:a(()=>[o(J,{label:"Saved Images"},{header:a(()=>[o(B,{avatar:""},{default:a(()=>[o(j,{size:"md",color:"positive",icon:"image"})]),_:1}),o(B,null,{default:a(()=>[m(" Images ")]),_:1})]),default:a(()=>[o(A,null,{default:a(()=>[l("div",As,[o(C,{"no-caps":"",onClick:s[6]||(s[6]=i=>e.promptAddImage=!0)},{default:a(()=>[m(" Add Image "),o(q,null,{default:a(()=>[m("Add a custom image (only saves url, not image data)")]),_:1})]),_:1})]),l("div",null,[(u(!0),c(Y,null,de(this.reStore.userSnapshot.images,(i,d)=>(u(),O(A,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":s[7]||(s[7]=y=>this.reStore.userSnapshot.images=y),key:d},{default:a(()=>[l("div",Bs,[l("span",Ks,[o(T,{name:"title",onClick:y=>this.reStore.setCover(i)},null,8,["onClick"])]),i.cap?(u(),c("span",Hs,f(i.cap.slice(0,25)),1)):M("",!0),l("span",Is,[o(T,{name:"delete",onClick:y=>this.remove(d,i)},null,8,["onClick"])])]),o(ne,{class:"cardimage",onClick:y=>this.imgCB(d,i),src:i.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])],64)}var Us=te(Ps,[["render",Ms]]);const Rs=ee({name:"BookmarksComponent",setup(){return{reStore:se()}},mounted(){N(this.reStore.userSnapshot.bookmarks,async(e,s)=>{console.log("watcher ",e,s)})},methods:{imgCB(e,s){this.reStore.router.push("/teacher/editor"),console.log(e,s),this.reStore.page=JSON.parse(JSON.stringify(s)),this.reStore.courses.trigger+=1},remove(e,s){console.log(e,s),this.reStore.removeBookmark(e)}}}),Os={class:"q-pa-md",style:{"max-width":"350px"}},Ns={class:"row cardheader justify-between"},Ls={class:"history-remove hidden"},zs={key:0,class:"fi fi-gb"},Qs={key:1,class:"fi fi-us"},Es={key:2,class:"fi fi-mx"},Ys={key:3,class:"fi fi-fr"},Fs={key:4,class:"fi fi-de"},Js={key:5,class:"fi fi-it"},Ws={key:6,class:"fi fi-br"},js={key:7,class:"fi fi-ke"},Gs={key:8,class:"fi fi-ru"},Xs={key:9,class:"fi fi-th"},Zs={key:10,class:"fi fi-cn"},eo={key:11,class:"fi fi-hk"},to={key:12,class:"fi fi-tw"},so={key:13,class:"fi fi-kr"},oo={key:14,class:"fi fi-jp"},ao={key:15,class:"fi fi-id"},no={key:16,class:"fi fi-xx"},lo={class:"history-remove ptr"};function ro(e,s,p,P,D,U){return u(),c("div",Os,[o(le,{bordered:"",class:"rounded-borders"},{default:a(()=>[o(J,{label:"Wikipedia Bookmarks"},{header:a(()=>[o(B,{avatar:""},{default:a(()=>[o(j,{size:"md",color:"positive",icon:"bookmark"})]),_:1}),o(B,null,{default:a(()=>[m(" Bookmarks ")]),_:1})]),default:a(()=>[o(A,null,{default:a(()=>[l("div",null,[(u(!0),c(Y,null,de(this.reStore.userSnapshot.bookmarks,(i,d)=>(u(),O(A,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":s[0]||(s[0]=y=>this.reStore.userSnapshot.bookmarks=y),key:d},{default:a(()=>[l("div",Ns,[l("span",Ls,[o(T)]),i.langVoiceKey==="Eng-UK-Fem"?(u(),c("span",zs)):i.langVoiceKey==="Eng-US"?(u(),c("span",Qs)):i.langVoiceKey==="espa\xF1ol"?(u(),c("span",Es)):i.langVoiceKey==="fran\xE7ais"?(u(),c("span",Ys)):i.langVoiceKey==="Deutsch"?(u(),c("span",Fs)):i.langVoiceKey==="italiano"?(u(),c("span",Js)):i.langVoiceKey==="portugu\xEAs do Brasil"?(u(),c("span",Ws)):i.langVoiceKey==="Kiswahili"?(u(),c("span",js)):i.langVoiceKey==="\u0440\u0443\u0441\u0441\u043A\u0438\u0439"?(u(),c("span",Gs)):i.langVoiceKey==="\u0E44\u0E17\u0E22"?(u(),c("span",Xs)):i.langVoiceKey==="\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09"?(u(),c("span",Zs)):i.langVoiceKey==="\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09"?(u(),c("span",eo)):i.langVoiceKey==="\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09"?(u(),c("span",to)):i.langVoiceKey==="\uD55C\uAD6D\uC758"?(u(),c("span",so)):i.langVoiceKey==="\u65E5\u672C\u8A9E"?(u(),c("span",oo)):i.langVoiceKey==="Bahasa Indonesia"?(u(),c("span",ao)):(u(),c("span",no)),m(" "+f(i.pageTitle.slice(0,25))+" ",1),l("span",lo,[o(T,{name:"delete",onClick:y=>this.remove(d,i)},null,8,["onClick"])])]),o(ne,{class:"cardimage",onClick:y=>this.imgCB(d,i),src:i.imgs[i.imgIdx].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])}var io=te(Rs,[["render",ro]]);const uo=["gregorian","persian"],co={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>uo.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},mo=["update:modelValue"];function ie(e){return e.year+"/"+fe(e.month)+"/"+fe(e.day)}function ho(e,s){const p=$(()=>e.disable!==!0&&e.readonly!==!0),P=$(()=>e.editable===!0?0:-1),D=$(()=>{const d=[];return e.color!==void 0&&d.push(`bg-${e.color}`),e.textColor!==void 0&&d.push(`text-${e.textColor}`),d.join(" ")});function U(){return e.locale!==void 0?{...s.lang.date,...e.locale}:s.lang.date}function i(d){const y=new Date,w=d===!0?null:0;if(e.calendar==="persian"){const oe=is(y);return{year:oe.jy,month:oe.jm,day:oe.jd}}return{year:y.getFullYear(),month:y.getMonth()+1,day:y.getDate(),hour:w,minute:w,second:w,millisecond:w}}return{editable:p,tabindex:P,headerClass:D,getLocale:U,getCurrentDate:i}}const he=20,go=["Calendar","Years","Months"],Dt=e=>go.includes(e),ot=e=>/^-?[\d]+\/[0-1]\d$/.test(e),ke=" \u2014 ";function ue(e){return e.year+"/"+fe(e.month)}var fo=qt({name:"QDate",props:{...co,...fs,...hs,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:ot},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:ot},navigationMaxYearMonth:{type:String,validator:ot},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Dt}},emits:[...mo,"rangeStart","rangeEnd","navigation"],setup(e,{slots:s,emit:p}){const{proxy:P}=es(),{$q:D}=P,U=gs(e,D),{getCache:i}=Wt(),{tabindex:d,headerClass:y,getLocale:w,getCurrentDate:oe}=ho(e,D);let pe;const Re=ps(e),Oe=vs(Re),Ve=_(null),ae=_(mt()),H=_(w()),Pe=$(()=>mt()),Ne=$(()=>w()),E=$(()=>oe()),k=_(ht(ae.value,H.value)),V=_(e.defaultView),nt=D.lang.rtl===!0?"right":"left",Te=_(nt.value),Le=_(nt.value),ze=k.value.year,Ae=_(ze-ze%he-(ze<0?he:0)),L=_(null),Pt=$(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(U.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),ce=$(()=>e.color||"primary"),ve=$(()=>e.textColor||"white"),Be=$(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Qe=$(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),W=$(()=>Qe.value.filter(t=>typeof t=="string").map(t=>Je(t,ae.value,H.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),_e=$(()=>{const t=n=>Je(n,ae.value,H.value);return Qe.value.filter(n=>Xt(n)===!0&&n.from!==void 0&&n.to!==void 0).map(n=>({from:t(n.from),to:t(n.to)})).filter(n=>n.from.dateHash!==null&&n.to.dateHash!==null&&n.from.dateHash<n.to.dateHash)}),Ke=$(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const n=bt(t.year,t.month,t.day);return new Date(n.gy,n.gm-1,n.gd)}),Ee=$(()=>e.calendar==="persian"?ie:(t,n,r)=>us(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),n===void 0?ae.value:n,r===void 0?H.value:r,t.year,t.timezoneOffset)),be=$(()=>W.value.length+_e.value.reduce((t,n)=>t+1+ds(Ke.value(n.to),Ke.value(n.from)),0)),lt=$(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(L.value!==null){const r=L.value.init,g=Ke.value(r);return H.value.daysShort[g.getDay()]+", "+H.value.monthsShort[r.month-1]+" "+r.day+ke+"?"}if(be.value===0)return ke;if(be.value>1)return`${be.value} ${H.value.pluralDay}`;const t=W.value[0],n=Ke.value(t);return isNaN(n.valueOf())===!0?ke:H.value.headerTitle!==void 0?H.value.headerTitle(n,t):H.value.daysShort[n.getDay()]+", "+H.value.monthsShort[t.month-1]+" "+t.day}),Tt=$(()=>W.value.concat(_e.value.map(n=>n.from)).sort((n,r)=>n.year-r.year||n.month-r.month)[0]),At=$(()=>W.value.concat(_e.value.map(n=>n.to)).sort((n,r)=>r.year-n.year||r.month-n.month)[0]),rt=$(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(be.value===0)return ke;if(be.value>1){const t=Tt.value,n=At.value,r=H.value.monthsShort;return r[t.month-1]+(t.year!==n.year?" "+t.year+ke+r[n.month-1]+" ":t.month!==n.month?ke+r[n.month-1]:"")+" "+n.year}return W.value[0].year}),He=$(()=>{const t=[D.iconSet.datetime.arrowLeft,D.iconSet.datetime.arrowRight];return D.lang.rtl===!0?t.reverse():t}),it=$(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):H.value.firstDayOfWeek),Bt=$(()=>{const t=H.value.daysShort,n=it.value;return n>0?t.slice(n,7).concat(t.slice(0,n)):t}),re=$(()=>{const t=k.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():st(t.year,t.month)}),Kt=$(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),z=$(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Q=$(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Ye=$(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return z.value!==null&&z.value.year>=k.value.year&&(t.year.prev=!1,z.value.year===k.value.year&&z.value.month>=k.value.month&&(t.month.prev=!1)),Q.value!==null&&Q.value.year<=k.value.year&&(t.year.next=!1,Q.value.year===k.value.year&&Q.value.month<=k.value.month&&(t.month.next=!1)),t}),Ie=$(()=>{const t={};return W.value.forEach(n=>{const r=ue(n);t[r]===void 0&&(t[r]=[]),t[r].push(n.day)}),t}),ut=$(()=>{const t={};return _e.value.forEach(n=>{const r=ue(n.from),g=ue(n.to);if(t[r]===void 0&&(t[r]=[]),t[r].push({from:n.from.day,to:r===g?n.to.day:void 0,range:n}),r<g){let h;const{year:x,month:v}=n.from,b=v<12?{year:x,month:v+1}:{year:x+1,month:1};for(;(h=ue(b))<=g;)t[h]===void 0&&(t[h]=[]),t[h].push({from:void 0,to:h===g?n.to.day:void 0,range:n}),b.month++,b.month>12&&(b.year++,b.month=1)}}),t}),we=$(()=>{if(L.value===null)return;const{init:t,initHash:n,final:r,finalHash:g}=L.value,[h,x]=n<=g?[t,r]:[r,t],v=ue(h),b=ue(x);if(v!==F.value&&b!==F.value)return;const K={};return v===F.value?(K.from=h.day,K.includeFrom=!0):K.from=1,b===F.value?(K.to=x.day,K.includeTo=!0):K.to=re.value,K}),F=$(()=>ue(k.value)),Ht=$(()=>{const t={};if(e.options===void 0){for(let r=1;r<=re.value;r++)t[r]=!0;return t}const n=typeof e.options=="function"?e.options:r=>e.options.includes(r);for(let r=1;r<=re.value;r++){const g=F.value+"/"+fe(r);t[r]=n(g)}return t}),It=$(()=>{const t={};if(e.events===void 0)for(let n=1;n<=re.value;n++)t[n]=!1;else{const n=typeof e.events=="function"?e.events:r=>e.events.includes(r);for(let r=1;r<=re.value;r++){const g=F.value+"/"+fe(r);t[r]=n(g)===!0&&Kt.value(g)}}return t}),Mt=$(()=>{let t,n;const{year:r,month:g}=k.value;if(e.calendar!=="persian")t=new Date(r,g-1,1),n=new Date(r,g-1,0).getDate();else{const h=bt(r,g,1);t=new Date(h.gy,h.gm-1,h.gd);let x=g-1,v=r;x===0&&(x=12,v--),n=st(v,x)}return{days:t.getDay()-it.value-1,endDay:n}}),dt=$(()=>{const t=[],{days:n,endDay:r}=Mt.value,g=n<0?n+7:n;if(g<6)for(let v=r-g;v<=r;v++)t.push({i:v,fill:!0});const h=t.length;for(let v=1;v<=re.value;v++){const b={i:v,event:It.value[v],classes:[]};Ht.value[v]===!0&&(b.in=!0,b.flat=!0),t.push(b)}if(Ie.value[F.value]!==void 0&&Ie.value[F.value].forEach(v=>{const b=h+v-1;Object.assign(t[b],{selected:!0,unelevated:!0,flat:!1,color:ce.value,textColor:ve.value})}),ut.value[F.value]!==void 0&&ut.value[F.value].forEach(v=>{if(v.from!==void 0){const b=h+v.from-1,K=h+(v.to||re.value)-1;for(let Ze=b;Ze<=K;Ze++)Object.assign(t[Ze],{range:v.range,unelevated:!0,color:ce.value,textColor:ve.value});Object.assign(t[b],{rangeFrom:!0,flat:!1}),v.to!==void 0&&Object.assign(t[K],{rangeTo:!0,flat:!1})}else if(v.to!==void 0){const b=h+v.to-1;for(let K=h;K<=b;K++)Object.assign(t[K],{range:v.range,unelevated:!0,color:ce.value,textColor:ve.value});Object.assign(t[b],{flat:!1,rangeTo:!0})}else{const b=h+re.value-1;for(let K=h;K<=b;K++)Object.assign(t[K],{range:v.range,unelevated:!0,color:ce.value,textColor:ve.value})}}),we.value!==void 0){const v=h+we.value.from-1,b=h+we.value.to-1;for(let K=v;K<=b;K++)t[K].color=ce.value,t[K].editRange=!0;we.value.includeFrom===!0&&(t[v].editRangeFrom=!0),we.value.includeTo===!0&&(t[b].editRangeTo=!0)}k.value.year===E.value.year&&k.value.month===E.value.month&&(t[h+E.value.day-1].today=!0);const x=t.length%7;if(x>0){const v=7-x;for(let b=1;b<=v;b++)t.push({i:b,fill:!0})}return t.forEach(v=>{let b="q-date__calendar-item ";v.fill===!0?b+="q-date__calendar-item--fill":(b+=`q-date__calendar-item--${v.in===!0?"in":"out"}`,v.range!==void 0&&(b+=` q-date__range${v.rangeTo===!0?"-to":v.rangeFrom===!0?"-from":""}`),v.editRange===!0&&(b+=` q-date__edit-range${v.editRangeFrom===!0?"-from":""}${v.editRangeTo===!0?"-to":""}`),(v.range!==void 0||v.editRange===!0)&&(b+=` text-${v.color}`)),v.classes=b}),t}),Ut=$(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});N(()=>e.modelValue,t=>{if(pe===t)pe=0;else{const{year:n,month:r}=ht(ae.value,H.value);ye(n,r)}}),N(V,()=>{Ve.value!==null&&P.$el.contains(document.activeElement)===!0&&Ve.value.focus()}),N(()=>k.value.year,t=>{p("navigation",{year:t,month:k.value.month})}),N(()=>k.value.month,t=>{p("navigation",{year:k.value.year,month:t})}),N(Pe,t=>{_t(t,H.value,"mask"),ae.value=t}),N(Ne,t=>{_t(ae.value,t,"locale"),H.value=t});function ct(){const t=E.value,n=Ie.value[ue(t)];(n===void 0||n.includes(t.day)===!1)&&je(t),Fe(t.year,t.month)}function Rt(t){Dt(t)===!0&&(V.value=t)}function Ot(t,n){["month","year"].includes(t)&&(t==="month"?ft:We)(n===!0?-1:1)}function Fe(t,n){V.value="Calendar",ye(t,n)}function Nt(t,n){if(e.range===!1||!t){L.value=null;return}const r=Object.assign({...k.value},t),g=n!==void 0?Object.assign({...k.value},n):r;L.value={init:r,initHash:ie(r),final:g,finalHash:ie(g)},Fe(r.year,r.month)}function mt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Je(t,n,r){return cs(t,n,r,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function ht(t,n){const r=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(r.length===0)return gt();const g=r[r.length-1],h=Je(g.from!==void 0?g.from:g,t,n);return h.dateHash===null?gt():h}function gt(){let t,n;if(e.defaultYearMonth!==void 0){const r=e.defaultYearMonth.split("/");t=parseInt(r[0],10),n=parseInt(r[1],10)}else{const r=E.value!==void 0?E.value:oe();t=r.year,n=r.month}return{year:t,month:n,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+fe(n)+"/01"}}function ft(t){let n=k.value.year,r=Number(k.value.month)+t;r===13?(r=1,n++):r===0&&(r=12,n--),ye(n,r),Be.value===!0&&Me("month")}function We(t){const n=Number(k.value.year)+t;ye(n,k.value.month),Be.value===!0&&Me("year")}function Lt(t){ye(t,k.value.month),V.value=e.defaultView==="Years"?"Months":"Calendar",Be.value===!0&&Me("year")}function zt(t){ye(k.value.year,t),V.value="Calendar",Be.value===!0&&Me("month")}function Qt(t,n){const r=Ie.value[n];(r!==void 0&&r.includes(t.day)===!0?Ge:je)(t)}function me(t){return{year:t.year,month:t.month,day:t.day}}function ye(t,n){z.value!==null&&t<=z.value.year&&(t=z.value.year,n<z.value.month&&(n=z.value.month)),Q.value!==null&&t>=Q.value.year&&(t=Q.value.year,n>Q.value.month&&(n=Q.value.month));const r=t+"/"+fe(n)+"/01";r!==k.value.dateHash&&(Te.value=k.value.dateHash<r==(D.lang.rtl!==!0)?"left":"right",t!==k.value.year&&(Le.value=Te.value),St(()=>{Ae.value=t-t%he-(t<0?he:0),Object.assign(k.value,{year:t,month:n,day:1,dateHash:r})}))}function pt(t,n,r){const g=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;pe=g;const{reason:h,details:x}=vt(n,r);p("update:modelValue",g,h,x)}function Me(t){const n=W.value[0]!==void 0&&W.value[0].dateHash!==null?{...W.value[0]}:{...k.value};St(()=>{n.year=k.value.year,n.month=k.value.month;const r=e.calendar!=="persian"?new Date(n.year,n.month,0).getDate():st(n.year,n.month);n.day=Math.min(Math.max(1,n.day),r);const g=Se(n);pe=g;const{details:h}=vt("",n);p("update:modelValue",g,t,h)})}function vt(t,n){return n.from!==void 0?{reason:`${t}-range`,details:{...me(n.target),from:me(n.from),to:me(n.to)}}:{reason:`${t}-day`,details:me(n)}}function Se(t,n,r){return t.from!==void 0?{from:Ee.value(t.from,n,r),to:Ee.value(t.to,n,r)}:Ee.value(t,n,r)}function je(t){let n;if(e.multiple===!0)if(t.from!==void 0){const r=ie(t.from),g=ie(t.to),h=W.value.filter(v=>v.dateHash<r||v.dateHash>g),x=_e.value.filter(({from:v,to:b})=>b.dateHash<r||v.dateHash>g);n=h.concat(x).concat(t).map(v=>Se(v))}else{const r=Qe.value.slice();r.push(Se(t)),n=r}else n=Se(t);pt(n,"add",t)}function Ge(t){if(e.noUnset===!0)return;let n=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const r=Se(t);t.from!==void 0?n=e.modelValue.filter(g=>g.from!==void 0?g.from!==r.from&&g.to!==r.to:!0):n=e.modelValue.filter(g=>g!==r),n.length===0&&(n=null)}pt(n,"remove",t)}function _t(t,n,r){const g=W.value.concat(_e.value).map(h=>Se(h,t,n)).filter(h=>h.from!==void 0?h.from.dateHash!==null&&h.to.dateHash!==null:h.dateHash!==null);p("update:modelValue",(e.multiple===!0?g:g[0])||null,r)}function Et(){if(e.minimal!==!0)return S("div",{class:"q-date__header "+y.value},[S("div",{class:"relative-position"},[S(De,{name:"q-transition--fade"},()=>S("div",{key:"h-yr-"+rt.value,class:"q-date__header-subtitle q-date__header-link "+(V.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:d.value,...i("vY",{onClick(){V.value="Years"},onKeyup(t){t.keyCode===13&&(V.value="Years")}})},[rt.value]))]),S("div",{class:"q-date__header-title relative-position flex no-wrap"},[S("div",{class:"relative-position col"},[S(De,{name:"q-transition--fade"},()=>S("div",{key:"h-sub"+lt.value,class:"q-date__header-title-label q-date__header-link "+(V.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:d.value,...i("vC",{onClick(){V.value="Calendar"},onKeyup(t){t.keyCode===13&&(V.value="Calendar")}})},[lt.value]))]),e.todayBtn===!0?S(C,{class:"q-date__header-today self-start",icon:D.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:d.value,onClick:ct}):null])])}function Xe({label:t,type:n,key:r,dir:g,goTo:h,boundaries:x,cls:v}){return[S("div",{class:"row items-center q-date__arrow"},[S(C,{round:!0,dense:!0,size:"sm",flat:!0,icon:He.value[0],tabindex:d.value,disable:x.prev===!1,...i("go-#"+n,{onClick(){h(-1)}})})]),S("div",{class:"relative-position overflow-hidden flex flex-center"+v},[S(De,{name:"q-transition--jump-"+g},()=>S("div",{key:r},[S(C,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:d.value,...i("view#"+n,{onClick:()=>{V.value=n}})})]))]),S("div",{class:"row items-center q-date__arrow"},[S(C,{round:!0,dense:!0,size:"sm",flat:!0,icon:He.value[1],tabindex:d.value,disable:x.next===!1,...i("go+#"+n,{onClick(){h(1)}})})])]}const Yt={Calendar:()=>[S("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[S("div",{class:"q-date__navigation row items-center no-wrap"},Xe({label:H.value.months[k.value.month-1],type:"Months",key:k.value.month,dir:Te.value,goTo:ft,boundaries:Ye.value.month,cls:" col"}).concat(Xe({label:k.value.year,type:"Years",key:k.value.year,dir:Le.value,goTo:We,boundaries:Ye.value.year,cls:""}))),S("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Bt.value.map(t=>S("div",{class:"q-date__calendar-item"},[S("div",t)]))),S("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[S(De,{name:"q-transition--slide-"+Te.value},()=>S("div",{key:F.value,class:"q-date__calendar-days fit"},dt.value.map(t=>S("div",{class:t.classes},[t.in===!0?S(C,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:d.value,...i("day#"+t.i,{onClick:()=>{Ft(t.i)},onMouseover:()=>{Jt(t.i)}})},t.event!==!1?()=>S("div",{class:"q-date__event bg-"+t.event}):null):S("div",""+t.i)]))))])])],Months(){const t=k.value.year===E.value.year,n=g=>z.value!==null&&k.value.year===z.value.year&&z.value.month>g||Q.value!==null&&k.value.year===Q.value.year&&Q.value.month<g,r=H.value.monthsShort.map((g,h)=>{const x=k.value.month===h+1;return S("div",{class:"q-date__months-item flex flex-center"},[S(C,{class:t===!0&&E.value.month===h+1?"q-date__today":null,flat:x!==!0,label:g,unelevated:x,color:x===!0?ce.value:null,textColor:x===!0?ve.value:null,tabindex:d.value,disable:n(h+1),...i("month#"+h,{onClick:()=>{zt(h+1)}})})])});return e.yearsInMonthView===!0&&r.unshift(S("div",{class:"row no-wrap full-width"},[Xe({label:k.value.year,type:"Years",key:k.value.year,dir:Le.value,goTo:We,boundaries:Ye.value.year,cls:" col"})])),S("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},r)},Years(){const t=Ae.value,n=t+he,r=[],g=h=>z.value!==null&&z.value.year>h||Q.value!==null&&Q.value.year<h;for(let h=t;h<=n;h++){const x=k.value.year===h;r.push(S("div",{class:"q-date__years-item flex flex-center"},[S(C,{key:"yr"+h,class:E.value.year===h?"q-date__today":null,flat:!x,label:h,dense:!0,unelevated:x,color:x===!0?ce.value:null,textColor:x===!0?ve.value:null,tabindex:d.value,disable:g(h),...i("yr#"+h,{onClick:()=>{Lt(h)}})})]))}return S("div",{class:"q-date__view q-date__years flex flex-center"},[S("div",{class:"col-auto"},[S(C,{round:!0,dense:!0,flat:!0,icon:He.value[0],tabindex:d.value,disable:g(t),...i("y-",{onClick:()=>{Ae.value-=he}})})]),S("div",{class:"q-date__years-content col self-stretch row items-center"},r),S("div",{class:"col-auto"},[S(C,{round:!0,dense:!0,flat:!0,icon:He.value[1],tabindex:d.value,disable:g(n),...i("y+",{onClick:()=>{Ae.value+=he}})})])])}};function Ft(t){const n={...k.value,day:t};if(e.range===!1){Qt(n,F.value);return}if(L.value===null){const r=dt.value.find(h=>h.fill!==!0&&h.i===t);if(e.noUnset!==!0&&r.range!==void 0){Ge({target:n,from:r.range.from,to:r.range.to});return}if(r.selected===!0){Ge(n);return}const g=ie(n);L.value={init:n,initHash:g,final:n,finalHash:g},p("rangeStart",me(n))}else{const r=L.value.initHash,g=ie(n),h=r<=g?{from:L.value.init,to:n}:{from:n,to:L.value.init};L.value=null,je(r===g?n:{target:n,...h}),p("rangeEnd",{from:me(h.from),to:me(h.to)})}}function Jt(t){if(L.value!==null){const n={...k.value,day:t};Object.assign(L.value,{final:n,finalHash:ie(n)})}}return Object.assign(P,{setToday:ct,setView:Rt,offsetCalendar:Ot,setCalendarTo:Fe,setEditingRange:Nt}),()=>{const t=[S("div",{class:"q-date__content col relative-position"},[S(De,{name:"q-transition--fade"},Yt[V.value])])],n=Zt(s.default);return n!==void 0&&t.push(S("div",{class:"q-date__actions"},n)),e.name!==void 0&&e.disable!==!0&&Oe(t,"push"),S("div",{class:Pt.value,...Ut.value},[Et(),S("div",{ref:Ve,class:"q-date__main col column",tabindex:-1},t)])}}});const po=["top","middle","bottom"];var vo=qt({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>po.includes(e)}},setup(e,{slots:s}){const p=$(()=>e.align!==void 0?{verticalAlign:e.align}:null),P=$(()=>{const D=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(D!==void 0?` text-${D}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>S("div",{class:P.value,style:p.value,role:"status","aria-label":e.label},ts(s.default,e.label!==void 0?[e.label]:[]))}});const _o=ee({name:"OTDComponent",setup(){const e=se(),s=Date.now(),p=wt.formatDate(s,"MM/DD");return{reStore:e,otditems:_([]),promptOTDDate:_(!1),otddate:_(Date.now()),otdlabel:_(p),otdtype:_("selected")}},mounted(){this.init(),N(this.reStore.preferences,async(e,s)=>{console.log("OTD watcher"),e.langVoiceKey!==s.langVoiceKey?this.init():(console.log("OTD watcher ",e),this.init())})},methods:{async init(){console.log("OTD init");const e=this.reStore.preferences.langVoiceKey;await this.reStore.wiki.setLang(this.reStore.langVoices[e].langName);const s=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=s[this.otdtype],console.log(this.otditems);for(const[P,D]of Object.entries(this.reStore.langVoices)){const U=D.flagName;I("#otdfi").classed(U,!1)}const p=this.reStore.langVoices[e].flagName;I("#otdfi").classed(p,!0)},async loadPageId(e){console.log("loadPageId ",e);const s=this.reStore.preferences.langVoiceKey;console.log("OTD load ",s),this.reStore.loadPageId(e,s),this.reStore.router.push("/teacher/editor")},async load(e){console.log("load",this.otditems[e].text),console.log("load",this.otditems[e]);const s=this.reStore.preferences.langVoiceKey;console.log("OTD load ",s),this.reStore.loadPageId(this.otditems[e].pages[0].pageid,s),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const e=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=e.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=wt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(e){console.log("otdOptionsCB",this.otdtype);const s=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=s[this.otdtype]}}}),yo=l("div",{class:"text-h6"},"Select Date",-1),So={class:"q-pa-md",style:{"max-width":"350px"}},ko={class:"q-gutter-y-sm column"},Co=l("span",{id:"otdfi",class:"pfi text-h4"},null,-1),$o={class:""},Vo=["onClick"],bo=l("br",null,null,-1);function wo(e,s,p,P,D,U){return u(),c(Y,null,[o($e,{modelValue:e.promptOTDDate,"onUpdate:modelValue":s[2]||(s[2]=i=>e.promptOTDDate=i),persistent:""},{default:a(()=>[o(A,{style:{"min-width":"350px"}},{default:a(()=>[o(G,{align:"center"},{default:a(()=>[yo]),_:1}),o(fo,{modelValue:e.otddate,"onUpdate:modelValue":s[0]||(s[0]=i=>e.otddate=i),minimal:""},null,8,["modelValue"]),o(Ce,{align:"center",class:"text-white"},{default:a(()=>[X(o(C,{flat:"",label:"Cancel"},null,512),[[Z]]),X(o(C,{flat:"",label:"Update OTD date",onClick:s[1]||(s[1]=i=>this.updateOTDDate())},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l("div",So,[o(le,{bordered:"",class:"rounded-borders"},{default:a(()=>[o(J,null,{header:a(()=>[o(B,{avatar:""},{default:a(()=>[o(j,{size:"md",color:"positive",icon:"stars"})]),_:1}),o(B,null,{default:a(()=>[m(" On This Day ")]),_:1})]),default:a(()=>[o(A,null,{default:a(()=>[l("div",ko,[o(xe,{class:"bg-primary text-white rounded-borders q-my-md"},{default:a(()=>[o(C,{dark:"",standout:"",onClick:s[3]||(s[3]=i=>e.promptOTDDate=!0)},{default:a(()=>[m(f(e.otdlabel),1)]),_:1}),o(Ue),Co,o(Ue),o(at,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":s[4]||(s[4]=i=>this.otdtype=i),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:s[5]||(s[5]=i=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),l("div",$o,[(u(!0),c(Y,null,de(e.otditems,(i,d)=>(u(),O(A,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:e.otditems,"onUpdate:modelValue":s[6]||(s[6]=y=>e.otditems=y),key:d},{default:a(()=>[l("span",{style:{cursor:"pointer"},onClick:y=>this.load(d)},f(d),9,Vo),m(". "+f(i.year)+" "+f(i.text),1),bo,(u(!0),c(Y,null,de(i.pages,(y,w)=>(u(),c("span",{key:w},[o(vo,{class:"on-left",color:"accent",style:{cursor:"pointer"},onClick:oe=>this.loadPageId(y.pageid)},{default:a(()=>[o(q,null,{default:a(()=>[m(f(y.title),1)]),_:2},1024),o(T,{size:"xs",name:"link"})]),_:2},1032,["onClick"])]))),128))]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])],64)}var Do=te(_o,[["render",wo]]);const xo=ee({name:"PagerComponent",setup(){const e=se();return{reStore:e,assignment:_(null),promptAssignmentTitle:_(!1),promptPageTitle:_(!1),promptPctReplace:_(!1),promptLanguage:_(!1),promptGuideWords:_(!1),langVoices:_(e.preferences.langVoices),targetLangVoiceKey:_(null),targetPctReplace:_(null),targetGuideWords:_(null),statusExpanded:_(!0),coverExpanded:_(!1),pagesExpanded:_(!1)}},mounted(){console.log("mounted"),this.reStore.courses.ck&&this.reStore.courses.aid&&(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[this.reStore.courses.ck].assignments[this.reStore.courses.aid]))),N(this.reStore.courses,async(e,s)=>{this.reStore.courses.ck||(this.assignment=null),this.reStore.courses.aid||(this.assignment=null),this.assignment&&e.aid&&e.ck&&this.assignment.pages.length!=e[e.ck].assignments[e.aid].pages.length&&(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid])),console.log("Pager reloading assignment b/c pages.length changed")),!this.assignment&&e.ck&&e.aid?(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid])),console.log("Pager loaded fresh copy of assignment")):e.aid&&e.ck&&this.assignment.coverUrl!=e[e.ck].assignments.coverUrl?(this.assignment.coverUrl=e[e.ck].assignments[e.aid].coverUrl,console.log("Pager coverUrl")):this.assignment&&this.assignment.ck!==e.ck||this.assignment&&this.assignment.id!==e.aid?(console.log("PagerComponent assignment changed"),this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid]))):console.log("Pager nothing seems to have changed")})},methods:{setPageLang(e){this.targetPgIdx=e,this.targetLangVoiceKey=this.assignment.pages[e].langVoiceKey,this.promptLanguage=!0},setLangVoiceCB(e){const s=this.targetPgIdx;this.targetPgIdx=null;const p=this.targetLangVoiceKey;console.log(s,p),this.assignment.pages[s].langVoiceKey=p,this.reStore.courses.pgIdx==this.targetPgIdx&&(this.reStore.page.langVoiceKey=p)},resetPage(){this.reStore.newPage()},newPage(){console.log("PagerComponent newPageCB "),this.reStore.newPage()},updateAssignmentTitle(){console.log("Pager updateAssignmentTitle",this.assignment.title);const e=this.reStore.courses.ck,s=this.reStore.courses.aid;this.reStore.courses[e].assignments[s].title=this.assignment.title},updatePageTitle(){console.log("updatePageTitle",this.reStore.page.pageTitle);const e=this.reStore.courses.ck,s=this.reStore.courses.aid,p=this.reStore.courses.pgIdx;this.reStore.courses[e].assignments[s].pages[p].pageTitle=this.reStore.page.pageTitle},updateAllPages(){for(var e=0;e<this.assignment.pages.length;e++)this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages[e]=JSON.parse(JSON.stringify(this.assignment.pages[e])),e===this.reStore.courses.pgIdx&&(this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e])));this.reStore.saveCurrentAssignment(),this.reStore.courses.trigger+=1},nextImg(e){const s=this.assignment.pages[e].imgIdx,p=this.assignment.pages[e].imgs.length;s+1<p?this.assignment.pages[e].imgIdx+=1:this.assignment.pages[e].imgIdx=0},prevImg(e){const s=this.assignment.pages[e].imgIdx,p=this.assignment.pages[e].imgs.length;s-1>-1?this.assignment.pages[e].imgIdx-=1:this.assignment.pages[e].imgIdx=p-1},loadCoverCB(){console.log("Pager loadCoverCB "),this.reStore.loadCover(),this.reStore.router.push("/teacher/editor")},async loadPageCB(e){console.log("Pager loadPageCB ",e),this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e])),this.reStore.courses.pgIdx=e,this.reStore.page.imgIdx=this.assignment.pages[e].imgIdx,this.reStore.courses.imgIdx=this.assignment.pages[e].imgIdx,qe(".assignment").classed("hidden",!1),qe(".coverslide").classed("hidden",!0),this.reStore.courses.trigger+=1,this.reStore.page.isCustom||(console.log("calling restore.reloadPage"),await this.reStore.reloadPage(),this.reStore.courses.trigger+=1),this.reStore.mode==="editor"?this.reStore.router.push("/teacher/editor"):this.reStore.router.push("/teacher/assignment")},remove(e){console.log("remove ",e);const s=this.reStore.ck,p=this.reStore.aid;this.assignment.pages.splice(e,1),this.reStore.courses[s].assignments[p].pages.splice(e,1),this.reStore.courses.trigger+=1},mapCB(e){const s="https://maps.google.com/?ll="+this.assignment.pages[e].mapCoords.split(",")[0]+","+this.assignment.pages[e].mapCoords.split(",")[1];window.open(s,"_blank")},dummy(){console.log("dummy")}}}),qo=l("div",{class:"text-h6"},"Set Current Language",-1),Po={width:"100%"},To={class:"q-pa-md",style:{"max-width":"350px"}},Ao={key:0},Bo=l("td",null,"Assignment",-1),Ko=l("td",null,"Pages",-1),Ho=l("td",null,"Images",-1),Io={key:0},Mo={key:1},Uo=l("td",null,"Loaded",-1),Ro={key:0},Oo={key:1},No={key:0,class:"flex flex-center"},Lo={class:"text-weight-bolder text-center q-pa-xs"},zo={key:0},Qo={class:"text-weight-bolder text-center q-pa-xs"},Eo={key:0},Yo={class:"text-weight-bolder text-center q-pa-xs"},Fo={key:1,class:"hidden"},Jo={class:"flex flex-row justify-between"},Wo={class:""},jo={class:""},Go={class:""},Xo=l("br",null,null,-1),Zo=["onClick"],ea={key:0,class:"fi fi-gb"},ta={key:1,class:"fi fi-us"},sa={key:2,class:"fi fi-mx"},oa={key:3,class:"fi fi-fr"},aa={key:4,class:"fi fi-de"},na={key:5,class:"fi fi-it"},la={key:6,class:"fi fi-br"},ra={key:7,class:"fi fi-ke"},ia={key:8,class:"fi fi-ru"},ua={key:9,class:"fi fi-th"},da={key:10,class:"fi fi-cn"},ca={key:11,class:"fi fi-hk"},ma={key:12,class:"fi fi-tw"},ha={key:13,class:"fi fi-kr"},ga={key:14,class:"fi fi-jp"},fa={key:15,class:"fi fi-id"},pa={key:16,class:"fi fi-xx"},va=l("br",null,null,-1),_a={class:""},ya={class:""},Sa={class:""},ka={key:0};function Ca(e,s,p,P,D,U){const i=R("router-link");return u(),c(Y,null,[o($e,{modelValue:e.promptLanguage,"onUpdate:modelValue":s[1]||(s[1]=d=>e.promptLanguage=d),persistent:""},{default:a(()=>[o(A,{style:{"min-width":"350px"}},{default:a(()=>[o(G,null,{default:a(()=>[qo]),_:1}),o(G,{class:"q-pt-none"},{default:a(()=>[l("table",Po,[l("tr",null,[l("td",null,[o(at,{modelValue:this.targetLangVoiceKey,"onUpdate:modelValue":[s[0]||(s[0]=d=>this.targetLangVoiceKey=d),this.setLangVoiceCB],options:e.langVoices},null,8,["modelValue","options","onUpdate:modelValue"])])])])]),_:1}),o(Ce,{align:"right",class:"text-white"},{default:a(()=>[X(o(C,{outline:"",flat:"",label:"Close"},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l("div",To,[o(le,{bordered:"",class:"rounded-borders"},{default:a(()=>[o(J,{modelValue:e.statusExpanded,"onUpdate:modelValue":s[3]||(s[3]=d=>e.statusExpanded=d)},{header:a(()=>[o(B,{avatar:""},{default:a(()=>[o(j,{size:"md",color:"positive",icon:"collections"})]),_:1}),o(B,null,{default:a(()=>[m(" Assignment Info")]),_:1})]),default:a(()=>[this.assignment?(u(),c("span",Ao,[o(ne,{src:this.assignment.coverUrl,onClick:s[2]||(s[2]=d=>this.reStore.router.push("/teacher/assignmenteditor"))},null,8,["src"]),this.assignment?(u(),O(A,{key:0,class:"q-pa-md"},{default:a(()=>[l("table",null,[l("tr",null,[Bo,m(),l("td",null,f(this.assignment.title),1)]),l("tr",null,[Ko,m(),l("td",null,f(this.reStore.courses.pgIdx+1)+" / "+f(this.assignment.pages.length),1)]),l("tr",null,[Ho,m(),l("td",null,[m(f(this.reStore.courses.imgIdx+1)+" / ",1),this.assignment.pages[this.reStore.courses.pgIdx].imgs?(u(),c("span",Io,f(this.assignment.pages[this.reStore.courses.pgIdx].imgs.length),1)):(u(),c("span",Mo,"?"))])]),l("tr",null,[Uo,l("td",null,[this.assignment.pages[this.reStore.courses.pgIdx]&&this.assignment.pages[this.reStore.courses.pgIdx].pageTitle?(u(),c("span",Ro,f(this.assignment.pages[this.reStore.courses.pgIdx].pageTitle),1)):(u(),c("span",Oo,"None"))])])])]),_:1})):M("",!0)])):M("",!0)]),_:1},8,["modelValue"])]),_:1}),this.assignment?(u(),O(A,{key:0,class:"bg-primary q-pa-xs q-my-md hidden",flat:"",bordered:""},{default:a(()=>[o(J,null,{header:a(()=>[o(B,{avatar:""},{default:a(()=>[o(j,{size:"md",color:"positive",icon:"assignment"})]),_:1}),o(B,null,{default:a(()=>[m(f(this.assignment.title),1)]),_:1})]),default:a(()=>[this.reStore.courses.ck?(u(),c("div",No,f(this.reStore.courses.ck.slice(0,3))+" | "+f(this.reStore.courses.aid.slice(0,3))+" | "+f(this.reStore.courses.pageid)+" | "+f(this.reStore.courses.imgIdx)+" | "+f(this.reStore.courses.pgIdx)+" | "+f(this.reStore.courses.trigger)+" | "+f(this.reStore.mode),1)):M("",!0),l("div",Lo,[m("Course: "),this.reStore.courses.ck?(u(),c("span",zo,f(this.reStore.courses[this.reStore.courses.ck].title),1)):M("",!0)]),l("div",Qo,[m(" Title: "),this.assignment?(u(),c("span",Eo,[o(i,{to:"/teacher/editor",class:"text-white"},{default:a(()=>[m(f(this.assignment.title)+" ",1),o(q,null,{default:a(()=>[m("Go to Editor")]),_:1})]),_:1}),o(T,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:s[4]||(s[4]=d=>e.promptAssignmentTitle=!0),size:"sm"}),o(T,{style:{cursor:"pointer"},class:"on-right",name:"save",onClick:s[5]||(s[5]=d=>this.reStore.saveCurrentAssignment()),size:"sm"})])):M("",!0)]),l("div",Yo,[m(" Page "+f(this.reStore.courses.pgIdx)+": "+f(this.reStore.page.pageTitle.slice(0,5))+" ",1),o(T,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:s[6]||(s[6]=d=>this.promptPageTitle=!0),size:"sm"}),o(T,{class:"hidden on-right",name:"replay",onClick:this.resetPage,size:"sm"},null,8,["onClick"]),o(T,{class:"on-right",name:"add_circle",onClick:this.newPage,size:"sm"},null,8,["onClick"]),o(T,{class:"on-right",name:"volume_up",onClick:s[7]||(s[7]=d=>this.reStore.speak()),size:"sm"})])]),_:1})]),_:1})):M("",!0),this.assignment?(u(),c("span",Fo,[o(A,{class:"bg-primary q-pa-xs q-my-md",flat:"",bordered:""},{default:a(()=>[o(J,{modelValue:e.coverExpanded,"onUpdate:modelValue":s[8]||(s[8]=d=>e.coverExpanded=d)},{header:a(()=>[o(B,{avatar:""},{default:a(()=>[o(j,{size:"md",color:"positive",icon:"insert_photo"})]),_:1}),o(B,null,{default:a(()=>[m(" Cover Image ")]),_:1})]),default:a(()=>[o(ne,{src:this.assignment.coverUrl,onClick:e.loadCoverCB},null,8,["src","onClick"])]),_:1},8,["modelValue"])]),_:1}),(u(!0),c(Y,null,de(this.assignment.pages,(d,y)=>(u(),O(A,{class:"bg-primary q-pa-xs q-my-md",flat:"",bordered:"",modelValue:this.assignment.pages,"onUpdate:modelValue":s[12]||(s[12]=w=>this.assignment.pages=w),key:y},{default:a(()=>[o(J,null,{header:a(()=>[o(B,null,{default:a(()=>[o(_s,{modelValue:d.isCustom,"onUpdate:modelValue":w=>d.isCustom=w,color:"positive",icon:"shuffle","checked-icon":"check"},{default:a(()=>[o(q,null,{default:a(()=>[m(f(d.isCustom?"Custom":"Random"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),o(B,null,{default:a(()=>[m(f(y+1)+" "+f(d.pageTitle.slice(0,8)),1)]),_:2},1024)]),default:a(()=>[l("span",Jo,[l("span",Wo,[o(T,{size:"sm",name:"input",onClick:w=>e.takeStorePage(y)},{default:a(()=>[o(q,null,{default:a(()=>[m(" Pull editor page contents to this Page ")]),_:1})]),_:2},1032,["onClick"])]),l("span",jo,[o(T,{name:"restore_page",size:"sm",onClick:w=>e.restorePage(y)},{default:a(()=>[o(q,null,{default:a(()=>[m("Restore page to saved values")]),_:1})]),_:2},1032,["onClick"])]),o(T,{class:"",name:"save",onClick:w=>this.updatePage(y),size:"sm"},{default:a(()=>[o(q,null,{default:a(()=>[m("Update & Save current page")]),_:1})]),_:2},1032,["onClick"]),l("span",Go,[o(T,{name:"signpost",size:"sm",onClick:w=>e.gwCB(y)},{default:a(()=>[o(q,null,{default:a(()=>[m("Update the guide-words for this page:"),Xo,m(f(d.guideWords),1)]),_:2},1024)]),_:2},1032,["onClick"])]),l("span",{class:"",onClick:w=>this.setPageLang(y)},[d.langVoiceKey==="Eng-UK-Fem"?(u(),c("span",ea)):d.langVoiceKey==="Eng-US"?(u(),c("span",ta)):d.langVoiceKey==="espa\xF1ol"?(u(),c("span",sa)):d.langVoiceKey==="fran\xE7ais"?(u(),c("span",oa)):d.langVoiceKey==="Deutsch"?(u(),c("span",aa)):d.langVoiceKey==="italiano"?(u(),c("span",na)):d.langVoiceKey==="portugu\xEAs do Brasil"?(u(),c("span",la)):d.langVoiceKey==="Kiswahili"?(u(),c("span",ra)):d.langVoiceKey==="\u0440\u0443\u0441\u0441\u043A\u0438\u0439"?(u(),c("span",ia)):d.langVoiceKey==="\u0E44\u0E17\u0E22"?(u(),c("span",ua)):d.langVoiceKey==="\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09"?(u(),c("span",da)):d.langVoiceKey==="\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09"?(u(),c("span",ca)):d.langVoiceKey==="\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09"?(u(),c("span",ma)):d.langVoiceKey==="\uD55C\uAD6D\uC758"?(u(),c("span",ha)):d.langVoiceKey==="\u65E5\u672C\u8A9E"?(u(),c("span",ga)):d.langVoiceKey==="Bahasa Indonesia"?(u(),c("span",fa)):(u(),c("span",pa)),o(q,null,{default:a(()=>[m(f(d.langVoiceKey)+" ",1),va,m(" Click to set language for this page ")]),_:2},1024)],8,Zo),l("span",_a,[o(T,{name:"percent",size:"sm",onClick:w=>e.pctCB(y)},{default:a(()=>[o(q,null,{default:a(()=>[m("Set percentage of words to replace from paragraph on this page.")]),_:1})]),_:2},1032,["onClick"])]),l("span",ya,[o(T,{name:"location_on",size:"sm",onClick:w=>e.mapCB(y)},{default:a(()=>[o(q,null,{default:a(()=>[m(" Launch Google Maps: "+f(d.mapCoords),1)]),_:2},1024)]),_:2},1032,["onClick"])]),l("span",Sa,[o(T,{name:"language",size:"sm",onClick:w=>e.wpCB(y)},{default:a(()=>[o(q,null,{default:a(()=>[m("Wikipedia page "+f(d.pageid)+" "+f(d.canonical_url),1)]),_:2},1024)]),_:2},1032,["onClick"])])]),d.imgs.length>d.imgIdx?(u(),c("span",ka,[o(C,{fab:"","label-position":"left",color:"primary",icon:"arrow_left",onClick:[w=>this.prevImg(y),s[9]||(s[9]=et(()=>{},["stop","prevent"]))],padding:"xs",class:"float-left text-h5 z-max",style:{top:"100px"}},null,8,["onClick"]),o(C,{fab:"","label-position":"right",color:"primary",icon:"arrow_right",onClick:[w=>this.nextImg(y),s[10]||(s[10]=et(()=>{},["stop","prevent"]))],padding:"xs",class:"float-right text-h5 z-max",style:{top:"100px"}},null,8,["onClick"]),o(T,{size:"sm",style:{top:"190px",left:"190px"},color:"red",class:"z-max",name:"delete",onClick:[w=>this.remove(y),s[11]||(s[11]=et(()=>{},["stop","prevent"]))]},null,8,["onClick"]),o(ne,{height:"200px",src:d.imgs[d.imgIdx].url,onClick:w=>e.loadPageCB(y)},null,8,["src","onClick"])])):M("",!0)]),_:2},1024)]),_:2},1032,["modelValue"]))),128))])):M("",!0)])],64)}var $a=te(xo,[["render",Ca]]);const Va=ee({name:"MyHistory",setup(){return{reStore:se(),enabledLabel:_("History Enabled")}},mounted(){},methods:{load(e){console.log(e),console.log(this.reStore.myhistory[e]),this.reStore.loadHistory(e)},remove(e){console.log(e),this.reStore.myhistory=this.reStore.myhistory.slice(0,e).concat(this.reStore.myhistory.slice(e+1,1e3))}}}),ba={class:"q-pa-md",style:{"max-width":"350px"}},wa={class:"flex flex-center q-ma-sm"},Da={class:""},xa={class:"row cardheader justify-between"},qa=["onClick"],Pa={class:"history-remove"};function Ta(e,s,p,P,D,U){return u(),c("div",ba,[o(le,{bordered:"",class:"rounded-borders"},{default:a(()=>[o(J,null,{header:a(()=>[o(B,{avatar:""},{default:a(()=>[o(j,{size:"md",color:"positive",icon:"history"})]),_:1}),o(B,null,{default:a(()=>[m(" Page History ")]),_:1})]),default:a(()=>[l("div",wa,[o(C,{center:"","no-caps":"",label:"Clear History",onClick:s[0]||(s[0]=i=>this.reStore.clearHistory())})]),l("div",Da,[(u(!0),c(Y,null,de(this.reStore.myhistory,(i,d)=>(u(),O(A,{class:"bg-primary otdcard q-pa-xs q-ma-sm",flat:"",bordered:"",modelValue:this.reStore.myhistory,"onUpdate:modelValue":s[1]||(s[1]=y=>this.reStore.myhistory=y),key:d},{default:a(()=>[l("div",xa,[l("span",{class:"history-title col-grow",onClick:y=>this.load(d)},f(d)+". "+f(i.pageTitle.slice(0,25)),9,qa),l("span",Pa,[o(T,{name:"delete",onClick:y=>this.remove(d)},null,8,["onClick"])])])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})])}var Aa=te(Va,[["render",Ta]]);const Ba=ee({name:"AssignmentPager",setup(){return{reStore:se(),course:_(null),defaultOpen:_(!0),autoAwesomeGuideWords:_(""),promptAwesome2:_(!1)}},mounted(){console.log("      AssignmentPager: The purpose of this component is to present       available Demo assignments (from Demo Course) available to try    "),N(this.reStore.courses,async(e,s)=>{console.log("AssignmentPager watcher");const p=e.ck;e.aid;try{console.log("AP setcourse 0",p),p!=="undefined"&&p!==null?this.course=this.reStore.courses[p]:console.log("did not set AP course")}catch(P){console.log("ERROR AssignmentPager ",P)}!this.course&&p?(console.log("AP setcourse 1"),this.course=this.reStore.courses[p]):this.course&&this.course.courseKey!==e.ck&&(console.log("AP setcourse 2"),this.course=this.reStore.courses[p]),console.log("AssignmentPager watcher COURSE",this.course)},{immediate:!0,deep:!0})},methods:{editAssignmentCB(e){console.log("AP editAssigmentCB ",e);const s=this.reStore.courses.ck;this.reStore.loadAssignment(s,e),this.reStore.courses.trigger+=1},newAssignmentCB(){const e=this.reStore.courses.ck;console.log("assignmentCB: ",e),this.reStore.newAssignment(e)},removeAssignmentCB(e){const s=this.reStore.courses.ck;console.log("removeAssignmentCB",s,e),this.reStore.deleteAssignment(s,e),console.log("done")},loadAssignmentCB(e){console.log("AssignmentPager loadAssignmentCB",e);const s=this.reStore.courses.ck;this.reStore.loadAssignment(s,e),this.reStore.courses.trigger+=1,this.reStore.authenticated?this.reStore.router.push("/teacher/assignmenteditor"):this.reStore.router.push("/demo")},autoAwesomeCB(){this.reStore.autoAwesomeCB(this.reStore.ck,this.autoAwesomeGuideWords)}}}),Ka=l("div",{class:"text-h6"},"Provide guide-words",-1),Ha={class:"q-pa-md",style:{"max-width":"350px"}},Ia=l("td",null,"Course",-1),Ma={class:"hidden"},Ua=l("td",null,"Key",-1),Ra=l("td",null,"Enrollment",-1),Oa=l("td",null,"Assignments",-1),Na={key:0},La=l("td",null,"Loaded",-1),za={key:0},Qa={key:1};function Ea(e,s,p,P,D,U){return u(),c(Y,null,[o($e,{modelValue:e.promptAwesome2,"onUpdate:modelValue":s[4]||(s[4]=i=>e.promptAwesome2=i),persistent:"",class:"z-max"},{default:a(()=>[o(A,{style:{"min-width":"350px"}},{default:a(()=>[o(G,null,{default:a(()=>[Ka]),_:1}),o(G,{class:"q-pt-none"},{default:a(()=>[o(ge,{dense:"",modelValue:e.autoAwesomeGuideWords,"onUpdate:modelValue":s[0]||(s[0]=i=>e.autoAwesomeGuideWords=i),autofocus:"",onKeyup:s[1]||(s[1]=xt(i=>{e.promptAwesome2=!1,this.autoAwesomeCB()},["enter"]))},null,8,["modelValue"])]),_:1}),o(Ce,{align:"right",class:"text-white"},{default:a(()=>[X(o(C,{outline:"",label:"Cancel",onClick:s[2]||(s[2]=i=>e.promptAwesome2=!1)},null,512),[[Z]]),X(o(C,{outline:"",label:"Save",onClick:s[3]||(s[3]=i=>this.autoAwesomeCB())},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l("div",Ha,[o(le,{bordered:"",class:"rounded-borders"},{default:a(()=>[o(J,{modelValue:e.defaultOpen,"onUpdate:modelValue":s[6]||(s[6]=i=>e.defaultOpen=i)},{header:a(()=>[o(B,{avatar:""},{default:a(()=>[o(j,{size:"md",color:"positive",icon:"collections"})]),_:1}),o(B,null,{default:a(()=>[m(" Course Info ")]),_:1})]),default:a(()=>[this.course?(u(),O(A,{key:0,class:"q-pa-md"},{default:a(()=>[l("table",null,[l("tr",null,[Ia,m(),l("td",{onClick:s[5]||(s[5]=i=>this.reStore.router.push("/teacher/courseeditor")),class:"ptr"},f(this.course.title),1)]),l("tr",Ma,[Ua,m(),l("td",null,f(this.course.courseKey),1)]),l("tr",null,[Ra,m(),l("td",null,f(Object.keys(this.course.enrollment).length),1)]),l("tr",null,[Oa,m(),l("td",null,[this.course.assignments?(u(),c("span",Na,f(Object.keys(this.course.assignments).length),1)):M("",!0)])]),l("tr",null,[La,l("td",null,[this.reStore.courses.aid&&this.course.assignments[this.reStore.courses.aid]?(u(),c("span",za,f(this.course.assignments[this.reStore.courses.aid].title),1)):(u(),c("span",Qa,"None"))])])])]),_:1})):M("",!0)]),_:1},8,["modelValue"])]),_:1})])],64)}var Ya=te(Ba,[["render",Ea]]);const Fa=ee({name:"CoursePager",setup(){return{reStore:se(),course:_(null),defaultOpen:_(!0)}},mounted(){console.log("      CoursePager:     "),N(this.reStore.courses,async(e,s)=>{console.log("CoursePager watcher"),e.ck,e.aid},{immediate:!0,deep:!0})},methods:{removeCourseCB(e){console.log("removeCourseCB",e),console.log("done")},editCourseCB(e){this.loadCourse(e),this.reStore.router.push("/teacher/courseeditor")},loadCourse(e){console.log("loadCourse ",e),this.reStore.loadCourse(e)}}}),Ja={class:"q-pa-md",style:{"max-width":"350px"}},Wa=l("td",null,null,-1),ja=l("tr",{class:"hidden"},[l("td",null,"Key"),m(),l("td")],-1),Ga=l("tr",null,[l("td",null,"Enrollment"),m(),l("td")],-1),Xa=l("tr",null,[l("td",null,"Assignments"),m(),l("td")],-1),Za=l("tr",null,[l("td",null,"Loaded"),l("td",null,[l("span",null,"None")])],-1),en=l("span",{class:"flex flex-center text-bold q-my-md hidden"},"Account: Courses",-1),tn={class:"absolute-top text-center"},sn={class:"text-h6"},on={class:"text-subtitle2"},an={key:0},nn={key:1},ln={style:{"font-size":"22pt",width:"100%"},class:"text-center absolute-bottom"},rn=l("br",null,null,-1),un=l("br",null,null,-1);function dn(e,s,p,P,D,U){return u(),c("div",Ja,[o(le,{bordered:"",class:"rounded-borders"},{default:a(()=>[o(J,{modelValue:e.defaultOpen,"onUpdate:modelValue":s[1]||(s[1]=i=>e.defaultOpen=i)},{header:a(()=>[o(B,{avatar:""},{default:a(()=>[o(j,{size:"md",color:"positive",icon:"collections"})]),_:1}),o(B,null,{default:a(()=>[m(" Account Info ")]),_:1})]),default:a(()=>[o(A,{class:"q-pa-md"},{default:a(()=>[l("table",null,[l("tr",null,[l("td",{onClick:s[0]||(s[0]=i=>this.reStore.router.push("/teacher")),class:"ptr"},"Course"),m(),Wa]),ja,Ga,Xa,Za])]),_:1})]),_:1},8,["modelValue"])]),_:1}),en,(u(!0),c(Y,null,de(this.reStore.userSnapshot.teaching,(i,d,y)=>(u(),c("div",{key:y,class:"hidden"},[o(A,{bordered:"",flat:"",class:"otdcard q-mx-sm q-my-md"},{default:a(()=>[o(ne,{fit:e.cover,src:this.reStore.logoURL,height:"100%",onClick:w=>this.loadCourse(d)},{default:a(()=>[l("div",tn,[l("div",sn,f(this.reStore.courses[d].title.slice(0,18)),1),l("div",on,[this.reStore.courses[d].assignments?(u(),c("span",an,"Assignments: "+f(Object.keys(this.reStore.courses[d].assignments).length),1)):(u(),c("span",nn,"Assignments: None"))])]),l("div",ln,[l("div",null,[o(T,{color:"red",class:"ptr",name:"delete",onClick:w=>this.deleteCourseCB(d)},{default:a(()=>[o(q,null,{default:a(()=>[m("Delete Course")]),_:1})]),_:2},1032,["onClick"]),o(C,{icon:"content_copy",onClick:w=>this.copyCK(d)},{default:a(()=>[o(q,null,{default:a(()=>[m("Copy this course-key to clipboard. Enroll "),rn,m("in this course using this course-key from "),un,m("the Student Page.")]),_:1})]),_:2},1032,["onClick"]),o(C,{icon:"edit",onClick:w=>this.editCourseCB(d)},{default:a(()=>[o(q,null,{default:a(()=>[m("Edit Course")]),_:1})]),_:2},1032,["onClick"])])])]),_:2},1032,["fit","src","onClick"])]),_:2},1024)]))),128))])}var cn=te(Fa,[["render",dn]]);const mn=ee({name:"StatusPager",setup(){return{reStore:se()}},mounted(){console.log("SP mounted"),N(this.reStore.courses,async(e,s)=>{})},methods:{dummy(){console.log("dummy")}}}),hn={class:"q-pa-md",style:{"max-width":"350px"}},gn={key:0},fn={key:1},pn={key:2},vn={width:"100%"},_n=l("tr",null,[l("th",{colSpan:"2"},"Course")],-1),yn=l("td",null,"Enrollment",-1),Sn=l("td",null,"Assignments",-1),kn=l("tr",null,[l("th",{colSpan:"2"},"Assignment")],-1),Cn=l("td",null,"Assignment",-1),$n=l("td",null,"Language",-1),Vn={key:0},bn=l("td",null,"Pages",-1),wn={key:0},Dn=l("tr",null,[l("th",{colSpan:"2"},"Page")],-1),xn=l("td",null,"Title",-1),qn=l("td",null,"Type",-1),Pn={key:0},Tn={key:1},An={key:2},Bn={key:3},Kn=l("td",null,"Page #",-1),Hn={key:0},In=l("td",null,"Image #",-1),Mn={key:0},Un=l("td",null,"Speak",-1),Rn=l("td",null,"Translations",-1);function On(e,s,p,P,D,U){return u(),c("div",hn,[o(le,{bordered:"",class:"rounded-borders"},{default:a(()=>[o(J,{modelValue:e.defaultOpen,"onUpdate:modelValue":s[7]||(s[7]=i=>e.defaultOpen=i)},{header:a(()=>[o(B,{avatar:""},{default:a(()=>[o(j,{size:"md",color:"positive",icon:"collections"})]),_:1}),o(B,null,{default:a(()=>[m(" App State ")]),_:1})]),default:a(()=>[this.reStore.page?(u(),c("span",gn,[o(ne,{id:"firstChoice",src:this.reStore.page.imgs[this.reStore.page.imgIdx].url,onClick:s[0]||(s[0]=i=>this.reStore.router.push("/teacher/editor"))},null,8,["src"])])):this.reStore.aid?(u(),c("span",fn,[o(ne,{id:"secondChoice",src:this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].coverUrl,onClick:s[1]||(s[1]=i=>this.reStore.router.push("/teacher/editor"))},null,8,["src"])])):(u(),c("span",pn,[o(ne,{id:"thirdChoice",src:this.reStore.logoURL,onClick:s[2]||(s[2]=i=>this.reStore.router.push("/teacher"))},null,8,["src"])])),o(A,{class:"q-pa-md"},{default:a(()=>[l("table",vn,[_n,l("tr",null,[l("td",{onClick:s[3]||(s[3]=i=>this.reStore.router.push("/teacher")),class:"ptr"},"Course"),l("td",{onClick:s[4]||(s[4]=i=>this.reStore.router.push("/teacher/courseeditor")),class:"ptr"},f(this.reStore.courseTitle),1)]),l("tr",null,[yn,l("td",null,f(this.reStore.enrollment),1)]),l("tr",null,[Sn,l("td",null,f(this.reStore.numAssignments),1)]),kn,l("tr",null,[Cn,l("td",{class:"ptr",onClick:s[5]||(s[5]=i=>this.reStore.router.push("/teacher/assignmenteditor"))},f(this.reStore.assignmentTitle),1)]),l("tr",null,[$n,this.reStore.page?(u(),c("td",Vn,f(this.reStore.page.langVoiceKey),1)):M("",!0)]),l("tr",null,[bn,this.reStore.aid?(u(),c("td",wn,f(this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages.length),1)):M("",!0)]),Dn,l("tr",null,[xn,this.reStore.page?(u(),c("td",{key:0,class:"ptr",onClick:s[6]||(s[6]=i=>this.reStore.router.push("/teacher/editor"))},f(this.reStore.page.pageTitle),1)):M("",!0)]),l("tr",null,[qn,this.reStore.ck&&this.reStore.aid&&this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages[this.reStore.courses.pgIdx].isCustom?(u(),c("td",Pn," Custom ")):this.reStore.ck&&this.reStore.aid&&this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages[this.reStore.courses.pgIdx].pageid?(u(),c("td",Tn," WP #"+f(this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages[this.reStore.courses.pgIdx].pageid),1)):this.reStore.ck&&this.reStore.aid&&this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages[this.reStore.courses.pgIdx].guideWords.length>0?(u(),c("td",An," GuideWords Random ")):(u(),c("td",Bn,"Random"))]),l("tr",null,[Kn,this.reStore.ck&&this.reStore.aid?(u(),c("td",Hn,f(this.reStore.courses.pgIdx)+" / "+f(this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages.length),1)):M("",!0)]),l("tr",null,[In,this.reStore.ck&&this.reStore.aid?(u(),c("td",Mn,f(this.reStore.courses.imgIdx)+" / "+f(this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages[this.reStore.courses.pgIdx].imgs.length),1)):M("",!0)]),l("tr",null,[Un,l("td",null,[o(T,{name:"volume_up"})])]),l("tr",null,[Rn,l("td",null,[o(T,{name:"translate"})])])])]),_:1})]),_:1},8,["modelValue"])]),_:1})])}var Nn=te(mn,[["render",On]]);const Ln=ee({name:"TeacherLayout",components:{StatusPager:Nn,PagerComponent:$a,DocumentationComponent:ss,SearchComponent:qs,ImagesComponent:Us,BookmarksComponent:io,OTDComponent:Do,PreferencesComponent:jt,AssignmentStatus:os,MyHistory:Aa,AssignmentPager:Ya,CoursePager:cn,ScoreCard:Gt},setup(){const e=_(!1),s=_(!1),p=se(),P=p.preferences,D=_(null),U=_(null);return{step:_(1),reStore:p,selectedRHSTab:_(p.courses.selectedRHSTab),initialValues:_(P),scrollAreaRHS:D,scrollAreaLHS:U,leftDrawerOpen:e,rightDrawerOpen:s,flagName:_(p.langVoices[p.preferences.langVoiceKey].flagName),promptLanguage:_(!1),langVoices:_(p.preferences.langVoices),toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){s.value=!s.value}}},mounted(){this.reStore.role="teacher",N(this.reStore.courses,async(e,s)=>{console.log("TL watcher ",e,s),this.selectedRHSTab!==e.selectedRHSTab&&this.setRHS(e.selectedRHSTab)}),kt.isActive||(kt.toggle(),tt("primary","#333"),tt("secondary",this.initialValues.secondaryColor),tt("accent",this.initialValues.accentColor),this.flagName=this.reStore.langVoices[this.reStore.prefereneces.langVoiceKey].flagName,qe(".pfi").classed(this.flagName,!0))},methods:{tabUpdate(e){console.log("tabUpdate",e),this.setRHS(e)},goEditor(){this.reStore.mode="editor",this.reStore.router.push("/teacher/editor")},goAssignment(){this.reStore.mode="assignment",this.reStore.router.push("/teacher/assignment")},setRHS(e){e==="pagerTab"?(I("#assignmentPagerDiv").classed("hidden",!0),I("#pagerDiv").classed("hidden",!1),I("#statusDiv").classed("hidden",!0),I("#coursePagerDiv").classed("hidden",!0)):e==="statusTab"?(I("#assignmentPagerDiv").classed("hidden",!0),I("#pagerDiv").classed("hidden",!0),I("#statusDiv").classed("hidden",!1),I("#coursePagerDiv").classed("hidden",!0)):e==="assignmentsTab"?(I("#assignmentPagerDiv").classed("hidden",!1),I("#pagerDiv").classed("hidden",!0),I("#statusDiv").classed("hidden",!0),I("#coursePagerDiv").classed("hidden",!0)):e==="coursesTab"&&(I("#assignmentPagerDiv").classed("hidden",!0),I("#pagerDiv").classed("hidden",!0),I("#statusDiv").classed("hidden",!0),I("#coursePagerDiv").classed("hidden",!1))},scrollTopRHS(){this.scrollAreaRHS.setScrollPosition("vertical",0)},scrollTopLHS(){this.scrollAreaLHS.setScrollPosition("vertical",0)},setLangVoiceCB(e){this.flagName=this.reStore.langVoices[e].flagName;for(const[s,p]of Object.entries(this.reStore.langVoices)){const P=p.flagName;qe(".pfi").classed(P,!1)}qe(".pfi").classed(this.flagName,!0),console.log("langVoiceKey set to ",e,this.flagName),this.reStore.courses.trigger+=1}}}),zn=l("div",{class:"text-h6"},"Set Current Language",-1),Qn=l("span",{class:"pfi fi fi-xx"},null,-1),En=l("br",null,null,-1),Yn=l("br",null,null,-1),Fn={class:"dashboard-wrapper"},Jn=l("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),Wn={class:"hidden"},jn=l("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),Gn={id:"overviewDiv"},Xn={key:0},Zn={class:"flex flex-center flex-row"},el={class:"hidden"},tl={key:1},sl={class:"q-gutter-y-sm"},ol={id:"pagerDiv",class:"hidden"},al={key:0},nl={key:1},ll={class:"q-gutter-y-sm"},rl={id:"assignmentPagerDiv",class:"hidden"},il=l("span",{class:"hidden"},null,-1),ul={key:0},dl={key:1},cl={class:"q-gutter-y-sm"},ml={id:"statusDiv",class:"hidden"};function hl(e,s,p,P,D,U){const i=R("router-view"),d=R("DocumentationComponent"),y=R("SearchComponent"),w=R("OTDComponent"),oe=R("BookmarksComponent"),pe=R("ImagesComponent"),Re=R("MyHistory"),Oe=R("PreferencesComponent"),Ve=R("StatusPager"),ae=R("AssignmentStatus"),H=R("PagerComponent"),Pe=R("AssignmentPager"),Ne=R("CoursePager"),E=R("router-link"),k=R("ScoreCard");return u(),O(ls,{view:"hHh LpR fFf"},{default:a(()=>[o(as,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:a(()=>[o($e,{modelValue:e.promptLanguage,"onUpdate:modelValue":s[1]||(s[1]=V=>e.promptLanguage=V),persistent:""},{default:a(()=>[o(A,{style:{"max-width":"300px"}},{default:a(()=>[o(G,null,{default:a(()=>[zn]),_:1}),o(G,{class:"q-pt-none"},{default:a(()=>[o(at,{modelValue:this.reStore.preferences.langVoiceKey,"onUpdate:modelValue":[s[0]||(s[0]=V=>this.reStore.preferences.langVoiceKey=V),this.setLangVoiceCB],options:e.langVoices},null,8,["modelValue","options","onUpdate:modelValue"])]),_:1}),o(Ce,{align:"right",class:"text-white"},{default:a(()=>[X(o(C,{outline:"",flat:"",label:"Close"},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(xe,null,{default:a(()=>[o(C,{icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),o(C,{onClick:s[2]||(s[2]=V=>this.reStore.router.push("/teacher")),icon:"home",class:"hidden"},{default:a(()=>[o(q,null,{default:a(()=>[m("Return to Dashboard")]),_:1})]),_:1}),o(Ue),o(C,{onClick:s[3]||(s[3]=V=>this.reStore.router.push("/teacher")),icon:"home"},{default:a(()=>[o(q,null,{default:a(()=>[m("Return to Dashboard")]),_:1})]),_:1}),o(C,{onClick:s[4]||(s[4]=V=>e.promptLanguage=!0)},{default:a(()=>[Qn,o(q,null,{default:a(()=>[m("Set current language "),En,m("Applied to new pages/searches."),Yn,m("Sync current page using sync-lang button.")]),_:1})]),_:1}),this.reStore.mode=="assignment"?(u(),O(C,{key:0,onClick:s[5]||(s[5]=V=>this.goEditor()),icon:"switch_account"},{default:a(()=>[o(q,null,{default:a(()=>[m(" Switch from Assignment to Editor Mode ")]),_:1})]),_:1})):(u(),O(C,{key:1,onClick:s[6]||(s[6]=V=>this.goAssignment()),icon:"switch_account"},{default:a(()=>[o(q,null,{default:a(()=>[m(" Switch from Editor to Assignment Mode ")]),_:1})]),_:1})),this.reStore.authenticated?(u(),O(C,{key:2,onClick:s[7]||(s[7]=V=>this.reStore.router.push("/student")),icon:"switch_account"},{default:a(()=>[o(q,null,{default:a(()=>[m(" Switch between Teacher or Student role ")]),_:1})]),_:1})):M("",!0),this.reStore.authenticated?(u(),O(C,{key:3,icon:"logout",onClick:s[8]||(s[8]=V=>this.reStore.logout())})):M("",!0),o(C,{icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1})]),_:1}),o(ns,{class:"container-fluid"},{default:a(()=>[l("div",Fn,[o(i)]),o(Ct,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":s[10]||(s[10]=V=>e.leftDrawerOpen=V),side:"left"},{default:a(()=>[o(xe,{flat:"",class:"bg-primary text-white"},{default:a(()=>[o(Ue),o(C,{flat:"",round:"",dense:"",icon:"home",class:"float-right",onClick:s[9]||(s[9]=V=>this.reStore.router.push("/teacher"))},{default:a(()=>[o(q,null,{default:a(()=>[m("Return to dashboard")]),_:1})]),_:1}),o(C,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopLHS},{default:a(()=>[o(q,null,{default:a(()=>[m("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),Jn,o($t,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaLHS"},{default:a(()=>[o(d),o(y),o(w),o(oe),o(pe),o(Re),o(Oe,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"]),o(Ct,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":s[19]||(s[19]=V=>e.rightDrawerOpen=V),side:"right"},{default:a(()=>[o(xe,{flat:"",class:"flex-center bg-primary text-white"},{default:a(()=>[l("span",Wn,[o(C,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),o(Vt,{dark:"",vertical:"",inset:""}),o(C,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),o(Vt,{dark:"",vertical:"",inset:""})]),o(rs,{dense:"",align:"left",modelValue:this.reStore.courses.selectedRHSTab,"onUpdate:modelValue":[s[13]||(s[13]=V=>this.reStore.courses.selectedRHSTab=V),this.tabUpdate]},{default:a(()=>[o(yt,{id:"coursesTab",name:"coursesTab",icon:"collections",onClick:s[11]||(s[11]=V=>this.setRHS("coursesTab"))},{default:a(()=>[o(q,null,{default:a(()=>[m("My Courses")]),_:1})]),_:1}),o(yt,{id:"statusTab",name:"statusTab",icon:"summarize",onClick:s[12]||(s[12]=V=>this.setRHS("statusTab"))},{default:a(()=>[o(q,null,{default:a(()=>[m("Status/Progress while taking assignment")]),_:1})]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"]),o(C,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right hidden",onClick:this.scrollTopRHS},{default:a(()=>[o(q,null,{default:a(()=>[m("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),jn,o($t,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaRHS"},{default:a(()=>[l("div",Gn,[this.reStore.courses?(u(),c("span",Xn,[l("div",Zn,[o(C,{onClick:s[14]||(s[14]=V=>this.reStore.router.push("/teacher"))},{default:a(()=>[m(" 1 ")]),_:1}),o(C,{onClick:s[15]||(s[15]=V=>this.reStore.router.push("/teacher/courseeditor"))},{default:a(()=>[m(" 2 ")]),_:1}),o(C,{onClick:s[16]||(s[16]=V=>this.reStore.router.push("/teacher/assignmenteditor"))},{default:a(()=>[m(" 3 ")]),_:1}),o(C,{onClick:s[17]||(s[17]=V=>this.reStore.router.push("/teacher/editor"))},{default:a(()=>[m(" 4 ")]),_:1}),o(C,{onClick:s[18]||(s[18]=V=>this.reStore.router.push("/teacher/assignment"))},{default:a(()=>[m(" 5 ")]),_:1})]),o(Ve),l("span",el,[o(ae),o(H),o(Pe),o(Ne)])])):(u(),c("span",tl,[l("div",sl,[o(A,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:a(()=>[m(" Please create a course at the "),l("u",null,[o(E,{to:"/teacher",class:"text-white ptr"},{default:a(()=>[m("Teacher Dashboard")]),_:1})]),m(". ")]),_:1})])]))]),l("div",ol,[this.reStore.courses.aid?(u(),c("span",al,[o(H)])):(u(),c("span",nl,[l("div",ll,[o(A,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:a(()=>[m(" Please load an assignment at the "),l("u",null,[o(E,{to:"/teacher",class:"text-white ptr"},{default:a(()=>[m("Teacher Dashboard")]),_:1})]),m(". ")]),_:1})])]))]),l("div",rl,[il,this.reStore.courses.ck?(u(),c("span",ul,[o(Pe)])):(u(),c("span",dl,[l("div",cl,[o(A,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:a(()=>[m(" Please load a course at the "),l("u",null,[o(E,{to:"/teacher",class:"text-white ptr"},{default:a(()=>[m("Teacher Dashboard")]),_:1})]),m(". ")]),_:1})])]))]),l("div",ml,[o(k)])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var Rl=te(Ln,[["render",hl]]);export{Rl as default};
