import{g as ke,h as f,i as u,z as je,aM as Xt,B as Vt,r as v,D as L,l as Zt,p as Me,ax as ea,j as st,x as D,q as ta,d as le,_ as se,o as $,au as z,a as l,w as r,Q as q,e as s,af as M,ag as C,aK as aa,c as Y,av as ee,aL as Se,aJ as be,f as K,al as oa,am as Ie,G as St,y as na,P as bt,s as et}from"./index.d717154c.js";import{Q as G}from"./QTooltip.f6046130.js";import{Q as Ve,a as la,b as sa,c as Ae,d as ra,e as kt,f as wt,g as ia,h as ua}from"./QLayout.a7476e35.js";import{d as Fe,f as ze,c as da,e as ca,u as xt,g as ha}from"./use-dark.eeea0e21.js";import{u as re,s as ma,a as $t,p as he,t as ga,c as Dt,f as va,g as fa,j as tt,_ as _a,d as qt}from"./re-store.1c6233ea.js";import{a as A,Q as E,i as Mt,C as Qe,h as Bt,u as ya,b as pa,c as Ca}from"./ClosePopup.64807c7a.js";import{a as Sa,b as ba,c as Tt,d as at,e as ka,u as wa,f as xa,D as $a,P as Da}from"./DocumentationComponent.228cd6eb.js";import{Q as qa}from"./QInput.bad3dc7c.js";import{Q as Ta}from"./QToggle.d78833f1.js";import{Q as rt}from"./QImg.e30a0091.js";import"./position-engine.30d70622.js";import"./selection.5ba62cbb.js";import"./use-portal.8d302ad6.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";import"./use-key-composition.2b5fcc30.js";import"./QCheckbox.510930ee.js";const Ia={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},ot={xs:2,sm:4,md:8,lg:16,xl:24};var Ce=ke({name:"QSeparator",props:{...Fe,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const o=je(),m=ze(e,o.proxy.$q),S=f(()=>e.vertical===!0?"vertical":"horizontal"),w=f(()=>` q-separator--${S.value}`),p=f(()=>e.inset!==!1?`${w.value}-${Ia[e.inset]}`:""),h=f(()=>`q-separator${w.value}${p.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(m.value===!0?" q-separator--dark":"")),c=f(()=>{const b={};if(e.size!==void 0&&(b[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const V=e.spaced===!0?`${ot.md}px`:e.spaced in ot?`${ot[e.spaced]}px`:e.spaced,O=e.vertical===!0?["Left","Right"]:["Top","Bottom"];b[`margin${O[0]}`]=b[`margin${O[1]}`]=V}return b});return()=>u("hr",{class:h.value,style:c.value,"aria-orientation":S.value})}});const Va=u("div",{class:"q-space"});var lt=ke({name:"QSpace",setup(){return()=>Va}});const de=Xt({}),Ma=Object.keys(Vt);var Be=ke({name:"QExpansionItem",props:{...Vt,...da,...Fe,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ca,"click","afterShow","afterHide"],setup(e,{slots:o,emit:m}){const{proxy:{$q:S}}=je(),w=ze(e,S),p=v(e.modelValue!==null?e.modelValue:e.defaultOpened),h=v(null),c=xt(),{show:b,hide:V,toggle:O}=ha({showing:p});let R,W;const we=f(()=>`q-expansion-item q-item-type q-expansion-item--${p.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),ie=f(()=>{if(e.contentInsetLevel===void 0)return null;const _=S.lang.rtl===!0?"Right":"Left";return{["padding"+_]:e.contentInsetLevel*56+"px"}}),Q=f(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),T=f(()=>{const _={};return Ma.forEach(H=>{_[H]=e[H]}),_}),J=f(()=>Q.value===!0||e.expandIconToggle!==!0),Ye=f(()=>e.expandedIcon!==void 0&&p.value===!0?e.expandedIcon:e.expandIcon||S.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),N=f(()=>e.disable!==!0&&(Q.value===!0||e.expandIconToggle===!0)),y=f(()=>({expanded:p.value===!0,detailsId:e.targetUid,toggle:O,show:b,hide:V})),P=f(()=>{const _=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:S.lang.label[p.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":p.value===!0?"true":"false","aria-controls":c,"aria-label":_}});L(()=>e.group,_=>{W!==void 0&&W(),_!==void 0&&B()});function Pe(_){Q.value!==!0&&O(_),m("click",_)}function me(_){_.keyCode===13&&ge(_,!0)}function ge(_,H){H!==!0&&h.value!==null&&h.value.focus(),O(_),ta(_)}function xe(){m("afterShow")}function ve(){m("afterHide")}function B(){R===void 0&&(R=xt()),p.value===!0&&(de[e.group]=R);const _=L(p,Z=>{Z===!0?de[e.group]=R:de[e.group]===R&&delete de[e.group]}),H=L(()=>de[e.group],(Z,De)=>{De===R&&Z!==void 0&&Z!==R&&V()});W=()=>{_(),H(),de[e.group]===R&&delete de[e.group],W=void 0}}function Ue(){const _={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},H=[u(D,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&p.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:Ye.value})];return N.value===!0&&(Object.assign(_,{tabindex:0,...P.value,onClick:ge,onKeyup:me}),H.unshift(u("div",{ref:h,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),u(at,_,()=>H)}function X(){let _;return o.header!==void 0?_=[].concat(o.header(y.value)):(_=[u(at,()=>[u(Tt,{lines:e.labelLines},()=>e.label||""),e.caption?u(Tt,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&_[e.switchToggleSide===!0?"push":"unshift"](u(at,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>u(D,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&_[e.switchToggleSide===!0?"unshift":"push"](Ue()),_}function te(){const _={ref:"item",style:e.headerStyle,class:e.headerClass,dark:w.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return J.value===!0&&(_.clickable=!0,_.onClick=Pe,Object.assign(_,Q.value===!0?T.value:P.value)),u(ba,_,X)}function fe(){return Me(u("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:ie.value,id:c},st(o.default)),[[ea,p.value]])}function $e(){const _=[te(),u(Sa,{duration:e.duration,onShow:xe,onHide:ve},fe)];return e.expandSeparator===!0&&_.push(u(Ce,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:w.value}),u(Ce,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:w.value})),_}return e.group!==void 0&&B(),Zt(()=>{W!==void 0&&W()}),()=>u("div",{class:we.value},[u("div",{class:"q-expansion-item__container relative-position"},$e())])}}),Oe=ke({name:"QList",props:{...Fe,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:o}){const m=je(),S=ze(e,m.proxy.$q),w=f(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(S.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>u(e.tag,{class:w.value},st(o.default))}});const Ba=le({name:"SearchComponent",setup(){const e=re(),o=v("");return{reStore:e,searchTerms:o,searchSize:v(e.preferences.resLimit),searchResults:v([]),promptSearchSize:v(!1)}},mounted(){L(this.reStore.preferences,async(e,o)=>{console.log("watcher ",e,o),this.searchSize=e.resLimit})},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchResults.splice(e,1)},load(e){console.log(e),console.log(this.searchResults[e]);const o=this.reStore.preferences.langVoiceKey;console.log("calling loadPageId ",this.searchResults[e].pageid,o),this.reStore.loadPageId(this.searchResults[e].pageid,o),this.reStore.courses.trigger+=1},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("doSearch ",e),this.reStore.wiki.setLang(e.langName);const o=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",o.results.length),this.searchResults=o.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),Oa=s("div",{class:"text-h6"},"Search Results Size",-1),Pa={class:"q-gutter-y-sm column"},Ha={key:0},Ra={class:"row cardheader ptr justify-between"},La=["onClick"],Aa={class:"history-remove"};function Qa(e,o,m,S,w,p){return $(),z(ee,null,[l(Bt,{modelValue:e.promptSearchSize,"onUpdate:modelValue":o[2]||(o[2]=h=>e.promptSearchSize=h),persistent:""},{default:r(()=>[l(A,{style:{"min-width":"350px"}},{default:r(()=>[l(E,{align:"center"},{default:r(()=>[Oa]),_:1}),l(E,{class:"q-pt-none",align:"center"},{default:r(()=>[l(ka,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":o[0]||(o[0]=h=>e.searchSize=h)},null,8,["modelValue"])]),_:1}),l(Mt,{align:"center",class:"text-white"},{default:r(()=>[Me(l(q,{flat:"",label:"Cancel"},null,512),[[Qe]]),Me(l(q,{flat:"",label:"Update results size",onClick:o[1]||(o[1]=h=>this.updateSearchSize())},null,512),[[Qe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(A,{flat:""},{default:r(()=>[l(E,null,{default:r(()=>[l(Oe,{padding:"",class:"rounded-borders"},{default:r(()=>[l(Be,{"header-style":{border:"1px solid gray"},label:"Search & Results"},{default:r(()=>[s("div",Pa,[l(Ve,{class:"bg-primary text-white rounded-borders q-my-md"},{default:r(()=>[l(q,{dark:"",standout:"",onClick:o[3]||(o[3]=h=>e.promptSearchSize=!0)},{default:r(()=>[M(C(this.searchResults.length)+" ",1),l(G,null,{default:r(()=>[M("Change results limit ("+C(this.searchSize)+")",1)]),_:1})]),_:1}),l(qa,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":o[6]||(o[6]=h=>e.searchTerms=h),"input-class":"text-right",class:"q-ml-md",onKeyup:[o[7]||(o[7]=h=>this.update()),o[8]||(o[8]=aa(h=>this.doSearch(),["enter"]))]},{append:r(()=>[e.searchTerms===""?($(),Y(D,{key:0,name:"search",onClick:o[4]||(o[4]=h=>this.doSearch())})):($(),Y(D,{key:1,name:"clear",class:"cursor-pointer",onClick:o[5]||(o[5]=h=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?($(),z("div",Ha,[($(!0),z(ee,null,Se(this.searchResults,(h,c)=>($(),Y(A,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":o[9]||(o[9]=b=>this.searchResults=b),key:c},{default:r(()=>[s("div",Ra,[s("span",{class:"history-title col-grow",onClick:b=>this.load(c)},C(c)+". "+C(h.title.slice(0,25)),9,La),s("span",Aa,[l(D,{class:"primary",size:e.xl,color:e.primary,name:"close",onClick:b=>this.remove(c)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):be("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var ja=se(Ba,[["render",Qa]]);const Fa=le({name:"CurrentPage",props:{},setup(e){return{reStore:re(),ck:v("-"),aid:v("-"),pageTitle:v("-"),langVoiceKey:v(),imgIdx:v(0),imgs:v([]),imgTot:v(0),imgFit:v("-"),guideWords:v("-"),mapCoords:v("-"),pageid:v("-"),pctReplace:v(),canonicalUrl:v(),props:e,isCustom:v(!1)}},mounted(){console.log(this.props),L(this.reStore.courses,async(e,o)=>{try{console.log("CurrentPage watcher",this.reStore.courses);const m=this.reStore.courses.ck,S=this.reStore.courses.aid,w=this.reStore.courses.pgIdx,p=this.reStore.page;p&&(console.log("CurrentPage ",p),this.pageTitle=p.pageTitle,this.imgIdx=p.imgIdx,this.imgs=p.imgs,this.imgTot=p.imgs.length,this.imgFit=p.imgFit,this.guideWords=p.guideWords,this.mapCoords=p.mapCoords,this.pageid=p.pageid,this.langVoiceKey=p.langVoiceKey,this.pctReplace=p.pctReplace,this.canonicalUrl=p.canonicalUrl,this.isCustom=v(this.reStore.page.isCustom)),this.aid=S,this.ck=m}catch(m){console.log(m)}},{immediate:!0,deep:!0})},methods:{speak(){console.log("CurrentPage.speak",this.reStore),this.reStore.speak()},cycleFitMode(){const e=["scale-down","cover"];let o=e.indexOf(this.imgFit);o+=1,o>e.length-1&&(o=0),this.imgFit=e[o],this.reStore.page.imgFit=this.imgFit,console.log("fit: ",this.imgFit),this.reStore.courses.trigger+=1},nextImg(){this.imgIdx=this.imgIdx+1>this.imgs.length-1?0:this.imgIdx+1,this.reStore.page.imgIdx=this.imgIdx,this.reStore.courses.imgIdx=this.imgIdx,this.reStore.courses.trigger+=1},imgCB(e,o){console.log(e,o),this.reStore.page.imgIdx=e,this.reStore.courses.imgIdx=e,this.reStore.courses.trigger+=1},loadURL(e){console.log("loadURL ",e),window.open(e,"_blank")},mapCB(){const e="https://maps.google.com/?ll="+this.mapCoords.split(",")[0]+","+this.mapCoords.split(",")[1];window.open(e,"_blank")},saveImage(e,o){console.log("saveImage: ",e,o),this.reStore.saveImage(e,o)},saveCurrentImage(){const e=this.imgs[this.imgIdx];console.log("saveCurrentImage: ",e),this.reStore.saveImage(this.imgIdx,e)},remove(e,o){console.log("remove: ",e,o),this.imgs.splice(e,1),this.reStore.page.imgs.splice(e,1)},toggleText(){ma("#slideTextDiv").classed("hidden")?$t("#slideTextDiv").classed("hidden",!1):$t("#slideTextDiv").classed("hidden",!0)},addBookmark(){console.log("addBookmark"),this.reStore.saveBookmark()},resetPage(){this.reStore.newPage()},newPage(){console.log("CurrentPage newPageCB "),this.reStore.newPage()},appendPage(){this.reStore.appendPage()},updatePage(){this.reStore.updatePage()},updateType(e,o){this.reStore.page.isCustom=this.isCustom}}}),za={class:"text-weight-bolder text-center q-pa-md text-white"},Ya=s("br",null,null,-1),Ua={style:{border:"1px solid gray","border-radius":"5px"}},Ka={width:"100%"},Na={style:{width:"50%","text-align":"center"}},Ea={style:{"text-align":"center"}},Wa={style:{"text-align":"center"}},Ga=s("td",{style:{"text-align":"center"}},"Speak Text",-1),Ja={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Xa={width:"100%"},Za=s("td",null,"Course-Key",-1),eo={style:{width:"50%"}},to={class:"ptr float-left"},ao=s("td",null,"Assgmnt Id",-1),oo={style:{width:"50%"}},no={class:"ptr float-left"},lo=s("td",null,"WP Page Id",-1),so={style:{width:"50%"}},ro=s("td",null,"Language",-1),io={style:{width:"50%"}},uo={class:"float-left"},co=s("td",null,"Images",-1),ho={style:{width:"50%"}},mo=s("td",null,"Image Fit",-1),go={class:"align-left"},vo=s("td",null,"Guide Words",-1),fo={style:{width:"50%"}},_o=s("td",null,"Percent Replace",-1),yo={class:"float-left"},po=s("td",null,"Map Coords",-1),Co={class:"float-left"},So=s("td",null,"Toggle Text",-1),bo={key:0},ko={class:"row cardheader justify-between"},wo={class:"history-remove"},xo={key:0},$o={class:"history-remove ptr"};function Do(e,o,m,S,w,p){const h=K("router-link");return $(),z(ee,null,[l(A,{flat:""},{default:r(()=>[l(E,null,{default:r(()=>[s("div",za,[l(h,{to:"/teacher/editor"},{default:r(()=>[M(C(this.pageTitle.slice(0,20)),1)]),_:1}),Ya,l(D,{class:"on-right",name:"replay",onClick:this.resetPage,size:"sm"},null,8,["onClick"]),l(D,{class:"on-right",name:"add_circle",onClick:this.newPage,size:"sm"},null,8,["onClick"]),l(D,{class:"on-right",name:"publish",onClick:this.updatePage,size:"sm"},{default:r(()=>[l(G,null,{default:r(()=>[M("Update current page")]),_:1})]),_:1},8,["onClick"]),l(D,{class:"on-right",name:"publish",onClick:this.appendPage,size:"sm"},{default:r(()=>[l(G,null,{default:r(()=>[M("Push as new page")]),_:1})]),_:1},8,["onClick"])]),s("div",Ua,[s("table",Ka,[s("tr",null,[s("td",Na,[l(Ta,{modelValue:e.isCustom,"onUpdate:modelValue":[o[0]||(o[0]=c=>e.isCustom=c),this.updateType],color:"accent"},null,8,["modelValue","onUpdate:modelValue"])]),s("td",Ea,[l(q,{round:"",class:"q-pa-md",icon:"volume_up",color:"secondary",onClick:o[1]||(o[1]=c=>this.speak())})])]),s("tr",null,[s("td",Wa,C(e.isCustom===!0?"Custom":"Random"),1),Ga])])]),s("div",Ja,[s("table",Xa,[s("tr",null,[Za,s("td",eo,[s("a",to,C(this.ck),1)])]),s("tr",null,[ao,s("td",oo,[s("a",no,C(this.aid),1)])]),s("tr",null,[lo,s("td",so,[s("a",{class:"ptr float-left",onClick:o[2]||(o[2]=c=>this.loadURL(this.canonicalUrl))},C(this.pageid),1),l(D,{name:"bookmark",onClick:this.addBookmark,class:"float-right"},null,8,["onClick"])])]),s("tr",null,[ro,s("td",io,[s("span",uo,C(this.langVoiceKey),1),l(D,{class:"float-right",name:"translate"})])]),s("tr",null,[co,s("td",ho,[s("span",{onClick:o[3]||(o[3]=(...c)=>this.nextImg&&this.nextImg(...c)),class:"ptr float-left"},C(this.imgIdx+1)+" / "+C(this.imgTot),1),s("span",{class:"float-right ptr",onClick:o[4]||(o[4]=(...c)=>this.saveCurrentImage&&this.saveCurrentImage(...c))},[l(D,{name:"bookmark"})])])]),s("tr",{class:"ptr",onClick:o[5]||(o[5]=(...c)=>this.cycleFitMode&&this.cycleFitMode(...c))},[mo,s("td",null,[s("span",go,C(this.imgFit),1),l(D,{class:"float-right",name:"fit_screen"})])]),s("tr",null,[vo,s("td",fo,[M(C(this.guideWords.replaceAll(",",", "))+" ",1),l(D,{class:"float-right",name:"tune"})])]),s("tr",null,[_o,s("td",null,[s("span",yo,C(this.pctReplace)+" %",1),l(D,{class:"float-right",name:"tune"})])]),s("tr",null,[po,s("td",{onClick:o[6]||(o[6]=(...c)=>this.mapCB&&this.mapCB(...c)),class:"ptr"},[s("span",Co,C(this.mapCoords),1),l(D,{class:"float-right",name:"place"})])]),s("tr",null,[So,s("td",{onClick:o[7]||(o[7]=(...c)=>this.toggleText&&this.toggleText(...c)),class:"ptr"},[l(D,{class:"float-right",name:"article"})])])])])]),_:1})]),_:1}),l(A,{flat:""},{default:r(()=>[l(E,null,{default:r(()=>[l(Oe,{padding:"",class:"rounded-borders"},{default:r(()=>[l(Be,{"header-style":{border:"1px solid gray"},label:"Page Images"},{default:r(()=>[this.imgs.length?($(),z("div",bo,[($(!0),z(ee,null,Se(this.imgs,(c,b)=>($(),Y(A,{bordered:"",class:"q-ma-sm",flat:"",modelValue:this.imgs,"onUpdate:modelValue":o[8]||(o[8]=V=>this.imgs=V),key:b},{default:r(()=>[s("div",ko,[s("span",wo,[l(D,{name:"bookmark",onClick:V=>this.saveImage(b,c)},null,8,["onClick"]),l(D,{name:"article",onClick:this.toggleText},{default:r(()=>[l(G,null,{default:r(()=>[M("Convenience button to toggle current text ")]),_:1})]),_:1},8,["onClick"]),l(D,{name:"fit_screen",onClick:this.cycleFitMode},{default:r(()=>[l(G,null,{default:r(()=>[M("Convenience button to toggle current image-fit mode ")]),_:1})]),_:1},8,["onClick"])]),c.cap?($(),z("span",xo,C(c.cap.slice(0,25)),1)):be("",!0),s("span",$o,[l(D,{name:"close",onClick:V=>this.remove(b,c)},null,8,["onClick"])])]),l(rt,{class:"cardimage",onClick:V=>this.imgCB(b,c),src:c.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])):be("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var qo=se(Fa,[["render",Do]]);const To=le({name:"ImagesComponent",setup(){return{reStore:re()}},mounted(){L(this.reStore.userSnapshot.images,async(e,o)=>{console.log("watcher ",e,o)})},methods:{imgCB(e,o){this.reStore.router.push("/teacher/editor"),console.log(e,o),this.reStore.loadImgId(e)},remove(e,o){console.log(e,o),this.reStore.removeImage(e)}}}),Io={class:"row cardheader justify-between"},Vo={class:"history-remove hidden"},Mo={key:0},Bo={class:"history-remove ptr"};function Oo(e,o,m,S,w,p){return $(),Y(A,{flat:""},{default:r(()=>[l(E,null,{default:r(()=>[l(Oe,{padding:"",class:"rounded-borders"},{default:r(()=>[l(Be,{"header-style":{border:"1px solid gray"},label:"My Images"},{default:r(()=>[s("div",null,[($(!0),z(ee,null,Se(this.reStore.userSnapshot.images,(h,c)=>($(),Y(A,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":o[0]||(o[0]=b=>this.reStore.userSnapshot.images=b),key:c},{default:r(()=>[s("div",Io,[s("span",Vo,[l(D)]),h.desc?($(),z("span",Mo,C(h.desc.slice(0,25)),1)):be("",!0),s("span",Bo,[l(D,{name:"close",onClick:b=>this.remove(c,h)},null,8,["onClick"])])]),l(rt,{class:"cardimage",onClick:b=>this.imgCB(c,h),src:h.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var Po=se(To,[["render",Oo]]);const Ho=le({name:"BookmarksComponent",setup(){return{reStore:re()}},mounted(){L(this.reStore.userSnapshot.bookmarks,async(e,o)=>{console.log("watcher ",e,o)})},methods:{imgCB(e,o){this.reStore.page.imgs=JSON.parse(JSON.stringify(o.imgs)),this.reStore.router.push("/teacher/editor")},remove(e,o){console.log(e,o),this.reStore.removeBookmark(e)}}}),Ro={class:"row cardheader justify-between"},Lo={class:"history-remove hidden"},Ao={class:"history-remove ptr"};function Qo(e,o,m,S,w,p){return $(),Y(A,{flat:""},{default:r(()=>[l(E,null,{default:r(()=>[l(Oe,{padding:"",class:"rounded-borders"},{default:r(()=>[l(Be,{"header-style":{border:"1px solid gray"},label:"My bookmarks"},{default:r(()=>[s("div",null,[($(!0),z(ee,null,Se(this.reStore.userSnapshot.bookmarks,(h,c)=>($(),Y(A,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":o[0]||(o[0]=b=>this.reStore.userSnapshot.bookmarks=b),key:c},{default:r(()=>[s("div",Ro,[s("span",Lo,[l(D)]),M(" "+C(h.pageTitle.slice(0,25))+" ",1),s("span",Ao,[l(D,{name:"close",onClick:b=>this.remove(c,h)},null,8,["onClick"])])]),l(rt,{class:"cardimage",onClick:b=>this.imgCB(c,h),src:h.imgs[0].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var jo=se(Ho,[["render",Qo]]);const Fo=["gregorian","persian"],zo={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Fo.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Yo=["update:modelValue"];function oe(e){return e.year+"/"+he(e.month)+"/"+he(e.day)}function Uo(e,o){const m=f(()=>e.disable!==!0&&e.readonly!==!0),S=f(()=>e.editable===!0?0:-1),w=f(()=>{const c=[];return e.color!==void 0&&c.push(`bg-${e.color}`),e.textColor!==void 0&&c.push(`text-${e.textColor}`),c.join(" ")});function p(){return e.locale!==void 0?{...o.lang.date,...e.locale}:o.lang.date}function h(c){const b=new Date,V=c===!0?null:0;if(e.calendar==="persian"){const O=ga(b);return{year:O.jy,month:O.jm,day:O.jd}}return{year:b.getFullYear(),month:b.getMonth()+1,day:b.getDate(),hour:V,minute:V,second:V,millisecond:V}}return{editable:m,tabindex:S,headerClass:w,getLocale:p,getCurrentDate:h}}const ce=20,Ko=["Calendar","Years","Months"],It=e=>Ko.includes(e),nt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),pe=" \u2014 ";function ne(e){return e.year+"/"+he(e.month)}var No=ke({name:"QDate",props:{...zo,...ya,...Fe,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:nt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:nt},navigationMaxYearMonth:{type:String,validator:nt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:It}},emits:[...Yo,"rangeStart","rangeEnd","navigation"],setup(e,{slots:o,emit:m}){const{proxy:S}=je(),{$q:w}=S,p=ze(e,w),{getCache:h}=wa(),{tabindex:c,headerClass:b,getLocale:V,getCurrentDate:O}=Uo(e,w);let R;const W=pa(e),we=Ca(W),ie=v(null),Q=v(gt()),T=v(V()),J=f(()=>gt()),Ye=f(()=>V()),N=f(()=>O()),y=v(vt(Q.value,T.value)),P=v(e.defaultView),Pe=w.lang.rtl===!0?"right":"left",me=v(Pe.value),ge=v(Pe.value),xe=y.value.year,ve=v(xe-xe%ce-(xe<0?ce:0)),B=v(null),Ue=f(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(p.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),X=f(()=>e.color||"primary"),te=f(()=>e.textColor||"white"),fe=f(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),$e=f(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),_=f(()=>$e.value.filter(t=>typeof t=="string").map(t=>Ee(t,Q.value,T.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),H=f(()=>{const t=a=>Ee(a,Q.value,T.value);return $e.value.filter(a=>oa(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),Z=f(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=Dt(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),De=f(()=>e.calendar==="persian"?oe:(t,a,n)=>va(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?Q.value:a,n===void 0?T.value:n,t.year,t.timezoneOffset)),qe=f(()=>_.value.length+H.value.reduce((t,a)=>t+1+fa(Z.value(a.to),Z.value(a.from)),0)),it=f(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(B.value!==null){const n=B.value.init,d=Z.value(n);return T.value.daysShort[d.getDay()]+", "+T.value.monthsShort[n.month-1]+" "+n.day+pe+"?"}if(qe.value===0)return pe;if(qe.value>1)return`${qe.value} ${T.value.pluralDay}`;const t=_.value[0],a=Z.value(t);return isNaN(a.valueOf())===!0?pe:T.value.headerTitle!==void 0?T.value.headerTitle(a,t):T.value.daysShort[a.getDay()]+", "+T.value.monthsShort[t.month-1]+" "+t.day}),Ot=f(()=>_.value.concat(H.value.map(a=>a.from)).sort((a,n)=>a.year-n.year||a.month-n.month)[0]),Pt=f(()=>_.value.concat(H.value.map(a=>a.to)).sort((a,n)=>n.year-a.year||n.month-a.month)[0]),ut=f(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(qe.value===0)return pe;if(qe.value>1){const t=Ot.value,a=Pt.value,n=T.value.monthsShort;return n[t.month-1]+(t.year!==a.year?" "+t.year+pe+n[a.month-1]+" ":t.month!==a.month?pe+n[a.month-1]:"")+" "+a.year}return _.value[0].year}),He=f(()=>{const t=[w.iconSet.datetime.arrowLeft,w.iconSet.datetime.arrowRight];return w.lang.rtl===!0?t.reverse():t}),dt=f(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):T.value.firstDayOfWeek),Ht=f(()=>{const t=T.value.daysShort,a=dt.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),ae=f(()=>{const t=y.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():tt(t.year,t.month)}),Rt=f(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),j=f(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),F=f(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Ke=f(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return j.value!==null&&j.value.year>=y.value.year&&(t.year.prev=!1,j.value.year===y.value.year&&j.value.month>=y.value.month&&(t.month.prev=!1)),F.value!==null&&F.value.year<=y.value.year&&(t.year.next=!1,F.value.year===y.value.year&&F.value.month<=y.value.month&&(t.month.next=!1)),t}),Re=f(()=>{const t={};return _.value.forEach(a=>{const n=ne(a);t[n]===void 0&&(t[n]=[]),t[n].push(a.day)}),t}),ct=f(()=>{const t={};return H.value.forEach(a=>{const n=ne(a.from),d=ne(a.to);if(t[n]===void 0&&(t[n]=[]),t[n].push({from:a.from.day,to:n===d?a.to.day:void 0,range:a}),n<d){let i;const{year:x,month:g}=a.from,k=g<12?{year:x,month:g+1}:{year:x+1,month:1};for(;(i=ne(k))<=d;)t[i]===void 0&&(t[i]=[]),t[i].push({from:void 0,to:i===d?a.to.day:void 0,range:a}),k.month++,k.month>12&&(k.year++,k.month=1)}}),t}),Te=f(()=>{if(B.value===null)return;const{init:t,initHash:a,final:n,finalHash:d}=B.value,[i,x]=a<=d?[t,n]:[n,t],g=ne(i),k=ne(x);if(g!==U.value&&k!==U.value)return;const I={};return g===U.value?(I.from=i.day,I.includeFrom=!0):I.from=1,k===U.value?(I.to=x.day,I.includeTo=!0):I.to=ae.value,I}),U=f(()=>ne(y.value)),Lt=f(()=>{const t={};if(e.options===void 0){for(let n=1;n<=ae.value;n++)t[n]=!0;return t}const a=typeof e.options=="function"?e.options:n=>e.options.includes(n);for(let n=1;n<=ae.value;n++){const d=U.value+"/"+he(n);t[n]=a(d)}return t}),At=f(()=>{const t={};if(e.events===void 0)for(let a=1;a<=ae.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:n=>e.events.includes(n);for(let n=1;n<=ae.value;n++){const d=U.value+"/"+he(n);t[n]=a(d)===!0&&Rt.value(d)}}return t}),Qt=f(()=>{let t,a;const{year:n,month:d}=y.value;if(e.calendar!=="persian")t=new Date(n,d-1,1),a=new Date(n,d-1,0).getDate();else{const i=Dt(n,d,1);t=new Date(i.gy,i.gm-1,i.gd);let x=d-1,g=n;x===0&&(x=12,g--),a=tt(g,x)}return{days:t.getDay()-dt.value-1,endDay:a}}),ht=f(()=>{const t=[],{days:a,endDay:n}=Qt.value,d=a<0?a+7:a;if(d<6)for(let g=n-d;g<=n;g++)t.push({i:g,fill:!0});const i=t.length;for(let g=1;g<=ae.value;g++){const k={i:g,event:At.value[g],classes:[]};Lt.value[g]===!0&&(k.in=!0,k.flat=!0),t.push(k)}if(Re.value[U.value]!==void 0&&Re.value[U.value].forEach(g=>{const k=i+g-1;Object.assign(t[k],{selected:!0,unelevated:!0,flat:!1,color:X.value,textColor:te.value})}),ct.value[U.value]!==void 0&&ct.value[U.value].forEach(g=>{if(g.from!==void 0){const k=i+g.from-1,I=i+(g.to||ae.value)-1;for(let Ze=k;Ze<=I;Ze++)Object.assign(t[Ze],{range:g.range,unelevated:!0,color:X.value,textColor:te.value});Object.assign(t[k],{rangeFrom:!0,flat:!1}),g.to!==void 0&&Object.assign(t[I],{rangeTo:!0,flat:!1})}else if(g.to!==void 0){const k=i+g.to-1;for(let I=i;I<=k;I++)Object.assign(t[I],{range:g.range,unelevated:!0,color:X.value,textColor:te.value});Object.assign(t[k],{flat:!1,rangeTo:!0})}else{const k=i+ae.value-1;for(let I=i;I<=k;I++)Object.assign(t[I],{range:g.range,unelevated:!0,color:X.value,textColor:te.value})}}),Te.value!==void 0){const g=i+Te.value.from-1,k=i+Te.value.to-1;for(let I=g;I<=k;I++)t[I].color=X.value,t[I].editRange=!0;Te.value.includeFrom===!0&&(t[g].editRangeFrom=!0),Te.value.includeTo===!0&&(t[k].editRangeTo=!0)}y.value.year===N.value.year&&y.value.month===N.value.month&&(t[i+N.value.day-1].today=!0);const x=t.length%7;if(x>0){const g=7-x;for(let k=1;k<=g;k++)t.push({i:k,fill:!0})}return t.forEach(g=>{let k="q-date__calendar-item ";g.fill===!0?k+="q-date__calendar-item--fill":(k+=`q-date__calendar-item--${g.in===!0?"in":"out"}`,g.range!==void 0&&(k+=` q-date__range${g.rangeTo===!0?"-to":g.rangeFrom===!0?"-from":""}`),g.editRange===!0&&(k+=` q-date__edit-range${g.editRangeFrom===!0?"-from":""}${g.editRangeTo===!0?"-to":""}`),(g.range!==void 0||g.editRange===!0)&&(k+=` text-${g.color}`)),g.classes=k}),t}),jt=f(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});L(()=>e.modelValue,t=>{if(R===t)R=0;else{const{year:a,month:n}=vt(Q.value,T.value);_e(a,n)}}),L(P,()=>{ie.value!==null&&S.$el.contains(document.activeElement)===!0&&ie.value.focus()}),L(()=>y.value.year,t=>{m("navigation",{year:t,month:y.value.month})}),L(()=>y.value.month,t=>{m("navigation",{year:y.value.year,month:t})}),L(J,t=>{Ct(t,T.value,"mask"),Q.value=t}),L(Ye,t=>{Ct(Q.value,t,"locale"),T.value=t});function mt(){const t=N.value,a=Re.value[ne(t)];(a===void 0||a.includes(t.day)===!1)&&Ge(t),Ne(t.year,t.month)}function Ft(t){It(t)===!0&&(P.value=t)}function zt(t,a){["month","year"].includes(t)&&(t==="month"?_t:We)(a===!0?-1:1)}function Ne(t,a){P.value="Calendar",_e(t,a)}function Yt(t,a){if(e.range===!1||!t){B.value=null;return}const n=Object.assign({...y.value},t),d=a!==void 0?Object.assign({...y.value},a):n;B.value={init:n,initHash:oe(n),final:d,finalHash:oe(d)},Ne(n.year,n.month)}function gt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ee(t,a,n){return _a(t,a,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function vt(t,a){const n=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(n.length===0)return ft();const d=n[n.length-1],i=Ee(d.from!==void 0?d.from:d,t,a);return i.dateHash===null?ft():i}function ft(){let t,a;if(e.defaultYearMonth!==void 0){const n=e.defaultYearMonth.split("/");t=parseInt(n[0],10),a=parseInt(n[1],10)}else{const n=N.value!==void 0?N.value:O();t=n.year,a=n.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+he(a)+"/01"}}function _t(t){let a=y.value.year,n=Number(y.value.month)+t;n===13?(n=1,a++):n===0&&(n=12,a--),_e(a,n),fe.value===!0&&Le("month")}function We(t){const a=Number(y.value.year)+t;_e(a,y.value.month),fe.value===!0&&Le("year")}function Ut(t){_e(t,y.value.month),P.value=e.defaultView==="Years"?"Months":"Calendar",fe.value===!0&&Le("year")}function Kt(t){_e(y.value.year,t),P.value="Calendar",fe.value===!0&&Le("month")}function Nt(t,a){const n=Re.value[a];(n!==void 0&&n.includes(t.day)===!0?Je:Ge)(t)}function ue(t){return{year:t.year,month:t.month,day:t.day}}function _e(t,a){j.value!==null&&t<=j.value.year&&(t=j.value.year,a<j.value.month&&(a=j.value.month)),F.value!==null&&t>=F.value.year&&(t=F.value.year,a>F.value.month&&(a=F.value.month));const n=t+"/"+he(a)+"/01";n!==y.value.dateHash&&(me.value=y.value.dateHash<n==(w.lang.rtl!==!0)?"left":"right",t!==y.value.year&&(ge.value=me.value),St(()=>{ve.value=t-t%ce-(t<0?ce:0),Object.assign(y.value,{year:t,month:a,day:1,dateHash:n})}))}function yt(t,a,n){const d=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;R=d;const{reason:i,details:x}=pt(a,n);m("update:modelValue",d,i,x)}function Le(t){const a=_.value[0]!==void 0&&_.value[0].dateHash!==null?{..._.value[0]}:{...y.value};St(()=>{a.year=y.value.year,a.month=y.value.month;const n=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():tt(a.year,a.month);a.day=Math.min(Math.max(1,a.day),n);const d=ye(a);R=d;const{details:i}=pt("",a);m("update:modelValue",d,t,i)})}function pt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...ue(a.target),from:ue(a.from),to:ue(a.to)}}:{reason:`${t}-day`,details:ue(a)}}function ye(t,a,n){return t.from!==void 0?{from:De.value(t.from,a,n),to:De.value(t.to,a,n)}:De.value(t,a,n)}function Ge(t){let a;if(e.multiple===!0)if(t.from!==void 0){const n=oe(t.from),d=oe(t.to),i=_.value.filter(g=>g.dateHash<n||g.dateHash>d),x=H.value.filter(({from:g,to:k})=>k.dateHash<n||g.dateHash>d);a=i.concat(x).concat(t).map(g=>ye(g))}else{const n=$e.value.slice();n.push(ye(t)),a=n}else a=ye(t);yt(a,"add",t)}function Je(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const n=ye(t);t.from!==void 0?a=e.modelValue.filter(d=>d.from!==void 0?d.from!==n.from&&d.to!==n.to:!0):a=e.modelValue.filter(d=>d!==n),a.length===0&&(a=null)}yt(a,"remove",t)}function Ct(t,a,n){const d=_.value.concat(H.value).map(i=>ye(i,t,a)).filter(i=>i.from!==void 0?i.from.dateHash!==null&&i.to.dateHash!==null:i.dateHash!==null);m("update:modelValue",(e.multiple===!0?d:d[0])||null,n)}function Et(){if(e.minimal!==!0)return u("div",{class:"q-date__header "+b.value},[u("div",{class:"relative-position"},[u(Ie,{name:"q-transition--fade"},()=>u("div",{key:"h-yr-"+ut.value,class:"q-date__header-subtitle q-date__header-link "+(P.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:c.value,...h("vY",{onClick(){P.value="Years"},onKeyup(t){t.keyCode===13&&(P.value="Years")}})},[ut.value]))]),u("div",{class:"q-date__header-title relative-position flex no-wrap"},[u("div",{class:"relative-position col"},[u(Ie,{name:"q-transition--fade"},()=>u("div",{key:"h-sub"+it.value,class:"q-date__header-title-label q-date__header-link "+(P.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:c.value,...h("vC",{onClick(){P.value="Calendar"},onKeyup(t){t.keyCode===13&&(P.value="Calendar")}})},[it.value]))]),e.todayBtn===!0?u(q,{class:"q-date__header-today self-start",icon:w.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:c.value,onClick:mt}):null])])}function Xe({label:t,type:a,key:n,dir:d,goTo:i,boundaries:x,cls:g}){return[u("div",{class:"row items-center q-date__arrow"},[u(q,{round:!0,dense:!0,size:"sm",flat:!0,icon:He.value[0],tabindex:c.value,disable:x.prev===!1,...h("go-#"+a,{onClick(){i(-1)}})})]),u("div",{class:"relative-position overflow-hidden flex flex-center"+g},[u(Ie,{name:"q-transition--jump-"+d},()=>u("div",{key:n},[u(q,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:c.value,...h("view#"+a,{onClick:()=>{P.value=a}})})]))]),u("div",{class:"row items-center q-date__arrow"},[u(q,{round:!0,dense:!0,size:"sm",flat:!0,icon:He.value[1],tabindex:c.value,disable:x.next===!1,...h("go+#"+a,{onClick(){i(1)}})})])]}const Wt={Calendar:()=>[u("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[u("div",{class:"q-date__navigation row items-center no-wrap"},Xe({label:T.value.months[y.value.month-1],type:"Months",key:y.value.month,dir:me.value,goTo:_t,boundaries:Ke.value.month,cls:" col"}).concat(Xe({label:y.value.year,type:"Years",key:y.value.year,dir:ge.value,goTo:We,boundaries:Ke.value.year,cls:""}))),u("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Ht.value.map(t=>u("div",{class:"q-date__calendar-item"},[u("div",t)]))),u("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[u(Ie,{name:"q-transition--slide-"+me.value},()=>u("div",{key:U.value,class:"q-date__calendar-days fit"},ht.value.map(t=>u("div",{class:t.classes},[t.in===!0?u(q,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:c.value,...h("day#"+t.i,{onClick:()=>{Gt(t.i)},onMouseover:()=>{Jt(t.i)}})},t.event!==!1?()=>u("div",{class:"q-date__event bg-"+t.event}):null):u("div",""+t.i)]))))])])],Months(){const t=y.value.year===N.value.year,a=d=>j.value!==null&&y.value.year===j.value.year&&j.value.month>d||F.value!==null&&y.value.year===F.value.year&&F.value.month<d,n=T.value.monthsShort.map((d,i)=>{const x=y.value.month===i+1;return u("div",{class:"q-date__months-item flex flex-center"},[u(q,{class:t===!0&&N.value.month===i+1?"q-date__today":null,flat:x!==!0,label:d,unelevated:x,color:x===!0?X.value:null,textColor:x===!0?te.value:null,tabindex:c.value,disable:a(i+1),...h("month#"+i,{onClick:()=>{Kt(i+1)}})})])});return e.yearsInMonthView===!0&&n.unshift(u("div",{class:"row no-wrap full-width"},[Xe({label:y.value.year,type:"Years",key:y.value.year,dir:ge.value,goTo:We,boundaries:Ke.value.year,cls:" col"})])),u("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const t=ve.value,a=t+ce,n=[],d=i=>j.value!==null&&j.value.year>i||F.value!==null&&F.value.year<i;for(let i=t;i<=a;i++){const x=y.value.year===i;n.push(u("div",{class:"q-date__years-item flex flex-center"},[u(q,{key:"yr"+i,class:N.value.year===i?"q-date__today":null,flat:!x,label:i,dense:!0,unelevated:x,color:x===!0?X.value:null,textColor:x===!0?te.value:null,tabindex:c.value,disable:d(i),...h("yr#"+i,{onClick:()=>{Ut(i)}})})]))}return u("div",{class:"q-date__view q-date__years flex flex-center"},[u("div",{class:"col-auto"},[u(q,{round:!0,dense:!0,flat:!0,icon:He.value[0],tabindex:c.value,disable:d(t),...h("y-",{onClick:()=>{ve.value-=ce}})})]),u("div",{class:"q-date__years-content col self-stretch row items-center"},n),u("div",{class:"col-auto"},[u(q,{round:!0,dense:!0,flat:!0,icon:He.value[1],tabindex:c.value,disable:d(a),...h("y+",{onClick:()=>{ve.value+=ce}})})])])}};function Gt(t){const a={...y.value,day:t};if(e.range===!1){Nt(a,U.value);return}if(B.value===null){const n=ht.value.find(i=>i.fill!==!0&&i.i===t);if(e.noUnset!==!0&&n.range!==void 0){Je({target:a,from:n.range.from,to:n.range.to});return}if(n.selected===!0){Je(a);return}const d=oe(a);B.value={init:a,initHash:d,final:a,finalHash:d},m("rangeStart",ue(a))}else{const n=B.value.initHash,d=oe(a),i=n<=d?{from:B.value.init,to:a}:{from:a,to:B.value.init};B.value=null,Ge(n===d?a:{target:a,...i}),m("rangeEnd",{from:ue(i.from),to:ue(i.to)})}}function Jt(t){if(B.value!==null){const a={...y.value,day:t};Object.assign(B.value,{final:a,finalHash:oe(a)})}}return Object.assign(S,{setToday:mt,setView:Ft,offsetCalendar:zt,setCalendarTo:Ne,setEditingRange:Yt}),()=>{const t=[u("div",{class:"q-date__content col relative-position"},[u(Ie,{name:"q-transition--fade"},Wt[P.value])])],a=st(o.default);return a!==void 0&&t.push(u("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&we(t,"push"),u("div",{class:Ue.value,...jt.value},[Et(),u("div",{ref:ie,class:"q-date__main col column",tabindex:-1},t)])}}});const Eo=["top","middle","bottom"];var Wo=ke({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Eo.includes(e)}},setup(e,{slots:o}){const m=f(()=>e.align!==void 0?{verticalAlign:e.align}:null),S=f(()=>{const w=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(w!==void 0?` text-${w}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>u("div",{class:S.value,style:m.value,role:"status","aria-label":e.label},na(o.default,e.label!==void 0?[e.label]:[]))}});const Go=le({name:"OTDComponent",setup(){const e=re(),o=Date.now(),m=qt.formatDate(o,"MM/DD");return{reStore:e,otditems:v([]),promptOTDDate:v(!1),otddate:v(Date.now()),otdlabel:v(m),otdtype:v("selected")}},mounted(){this.init()},methods:{async init(){const e=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=e[this.otdtype],console.log(this.otditems)},async loadPageId(e){console.log("loadPageId ",e);const o=this.reStore.preferences.langVoiceKey;console.log("OTD load ",o),this.reStore.loadPageId(e,o),this.reStore.router.push("/teacher/editor")},async load(e){console.log("load",this.otditems[e].text),console.log("load",this.otditems[e]);const o=this.reStore.preferences.langVoiceKey;console.log("OTD load ",o),this.reStore.loadPageId(this.otditems[e].pages[0].pageid,o),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const e=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=e.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=qt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(e){console.log("otdOptionsCB",this.otdtype);const o=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=o[this.otdtype]}}}),Jo=s("div",{class:"text-h6"},"Select Date",-1),Xo={class:"q-gutter-y-sm column"},Zo={class:""},en=["onClick"];function tn(e,o,m,S,w,p){return $(),z(ee,null,[l(Bt,{modelValue:e.promptOTDDate,"onUpdate:modelValue":o[2]||(o[2]=h=>e.promptOTDDate=h),persistent:""},{default:r(()=>[l(A,{style:{"min-width":"350px"}},{default:r(()=>[l(E,{align:"center"},{default:r(()=>[Jo]),_:1}),l(No,{modelValue:e.otddate,"onUpdate:modelValue":o[0]||(o[0]=h=>e.otddate=h),minimal:""},null,8,["modelValue"]),l(Mt,{align:"center",class:"text-white"},{default:r(()=>[Me(l(q,{flat:"",label:"Cancel"},null,512),[[Qe]]),Me(l(q,{flat:"",label:"Update OTD date",onClick:o[1]||(o[1]=h=>this.updateOTDDate())},null,512),[[Qe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(A,{flat:""},{default:r(()=>[l(E,null,{default:r(()=>[l(Oe,{padding:"",class:"rounded-borders"},{default:r(()=>[l(Be,{"header-style":{border:"1px solid gray"},label:"On This Day"},{default:r(()=>[s("div",Xo,[l(Ve,{class:"bg-primary text-white rounded-borders q-my-md"},{default:r(()=>[l(q,{dark:"",standout:"",onClick:o[3]||(o[3]=h=>e.promptOTDDate=!0)},{default:r(()=>[M(C(e.otdlabel),1)]),_:1}),l(lt),l(xa,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":o[4]||(o[4]=h=>this.otdtype=h),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:o[5]||(o[5]=h=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),s("div",Zo,[($(!0),z(ee,null,Se(e.otditems,(h,c)=>($(),Y(A,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:e.otditems,"onUpdate:modelValue":o[6]||(o[6]=b=>e.otditems=b),key:c},{default:r(()=>[s("span",{style:{cursor:"pointer"},onClick:b=>this.load(c)},C(c),9,en),M(". "+C(h.year)+" "+C(h.text)+" ",1),($(!0),z(ee,null,Se(h.pages,(b,V)=>($(),z("span",{key:V},[l(Wo,{class:"on-left",color:"accent",style:{cursor:"pointer"},onClick:O=>this.loadPageId(b.pageid)},{default:r(()=>[l(G,null,{default:r(()=>[M(C(b.title),1)]),_:2},1024),M(" Link"+C(V),1)]),_:2},1032,["onClick"])]))),128))]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}var an=se(Go,[["render",tn]]);const on=le({name:"CurrentAssignment",setup(){const e=re();return{reStore:e,ck:v("-"),goal:v("-"),created:v("-"),id:v("-"),points:v("-"),pages:v([]),pgIdx:v(e.courses.pgIdx),title:v("")}},mounted(){console.log("CurrentAssignment mounted"),L(this.reStore.courses,async(e,o)=>{try{console.log("CurrentAssignment.watcher");const m=e.ck,S=e.aid;this.id=S,this.ck=m,this.goal=this.reStore.courses[m].assignments[S].goal,this.created=this.reStore.courses[m].assignments[S].created,this.points=this.reStore.courses[m].assignments[S].points;try{const w=this.reStore.courses[m].assignments[S].pages.length;console.log("pages.length ",w)}catch{this.reStore.courses[m].assignments[S].pages=[]}this.pages=this.reStore.courses[m].assignments[S].pages,this.pgIdx=this.reStore.courses.pgIdx,this.title=this.reStore.courses[m].assignments[S].title}catch(m){console.log(m)}},{immediate:!0,deep:!0})},methods:{save(){console.log("save"),this.reStore.saveCurrentAssignment()},nextPage(){this.reStore.nextPage()}}}),nn={class:"text-weight-bolder text-center q-pa-md"},ln={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},sn={width:"100%"},rn=s("td",null,"Title",-1),un={style:{width:"50%"}},dn=s("td",null,"Course-Key",-1),cn={style:{width:"50%"}},hn=s("td",null,"Assgmnt Id",-1),mn={style:{width:"50%"}},gn=s("td",null,"Created",-1),vn={style:{width:"50%"}},fn=s("td",null,"Goal",-1),_n={style:{width:"50%"}},yn=s("td",null,"Pages",-1);function pn(e,o,m,S,w,p){return $(),Y(A,{flat:""},{default:r(()=>[l(E,null,{default:r(()=>[s("div",nn,[M(C(this.title)+" ",1),l(D,{class:"on-right",name:"save",onClick:this.save,size:"sm"},null,8,["onClick"])]),s("div",ln,[s("table",sn,[s("tr",null,[rn,s("td",un,C(this.title),1)]),s("tr",null,[dn,s("td",cn,C(this.ck),1)]),s("tr",null,[hn,s("td",mn,C(this.id),1)]),s("tr",null,[gn,s("td",vn,C(this.created),1)]),s("tr",null,[fn,s("td",_n,C(this.goal),1)]),s("tr",null,[yn,s("td",{style:{width:"50%",cursor:"pointer"},onClick:o[0]||(o[0]=h=>this.nextPage())},C(this.pgIdx+1)+" / "+C(this.pages.length),1)])])])]),_:1})]),_:1})}var Cn=se(on,[["render",pn]]);const Sn=le({name:"CurrentCourse",setup(){return{reStore:re(),title:v(""),assignmentCount:v(0),courseKey:v(""),created:v(""),enrollmentCount:v(0),owner:v("")}},mounted(){console.log("CurrentCourse mounted"),L(this.reStore.courses,async(e,o)=>{try{if(this.reStore.courses.ck!=="undefined"){const m=this.reStore.courses.ck;console.log("CurrentCourse ",m),this.title=this.reStore.courses[m].title,this.courseKey=this.reStore.courses[m].courseKey,this.created=this.reStore.courses[m].created,this.assignmentCount=Object.keys(this.reStore.courses[m].assignments).length,this.enrollmentCount=Object.keys(this.reStore.courses[m].enrollment).length,this.owner=this.reStore.courses[m].owner}}catch(m){console.log(m)}},{immediate:!0,deep:!0})},methods:{dummy(){console.log("dummy")}}}),bn={class:"text-weight-bolder text-center q-pa-md"},kn={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},wn={width:"100%"},xn=s("td",null,"Title",-1),$n={style:{width:"50%"}},Dn=s("td",null,"Course-Key",-1),qn={style:{width:"50%"}},Tn=s("td",null,"Created",-1),In={style:{width:"50%"}},Vn=s("td",null,"Owner",-1),Mn={style:{width:"50%"}},Bn=s("td",null,"Assignments",-1),On={style:{width:"50%"}},Pn=s("td",null,"Enrollment",-1),Hn={style:{width:"50%"}};function Rn(e,o,m,S,w,p){return $(),Y(A,{flat:""},{default:r(()=>[l(E,null,{default:r(()=>[s("div",bn,C(this.title),1),s("div",kn,[s("table",wn,[s("tr",null,[xn,s("td",$n,C(this.title),1)]),s("tr",null,[Dn,s("td",qn,C(this.courseKey),1)]),s("tr",null,[Tn,s("td",In,C(this.created),1)]),s("tr",null,[Vn,s("td",Mn,C(this.owner.slice(0,10)),1)]),s("tr",null,[Bn,s("td",On,C(this.assignmentCount),1)]),s("tr",null,[Pn,s("td",Hn,C(this.enrollmentCount),1)])])])]),_:1})]),_:1})}var Ln=se(Sn,[["render",Rn]]);const An=le({name:"TeacherLayout",components:{CurrentCourse:Ln,DocumentationComponent:$a,SearchComponent:ja,ImagesComponent:Po,BookmarksComponent:jo,OTDComponent:an,CurrentAssignment:Cn,PreferencesComponent:Da,CurrentPage:qo},setup(){const e=v(!1),o=v(!1),m=re(),S=m.userSnapshot.preferences,w=v(null),p=v(null);return{step:v(1),reStore:m,initialValues:v(S),scrollAreaRHS:w,scrollAreaLHS:p,leftDrawerOpen:e,rightDrawerOpen:o,toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){o.value=!o.value}}},mounted(){bt.isActive||(bt.toggle(),et("primary","#333"),et("secondary",this.initialValues.secondaryColor),et("accent",this.initialValues.accentColor))},methods:{scrollTopRHS(){this.scrollAreaRHS.setScrollPosition("vertical",0)},scrollTopLHS(){this.scrollAreaLHS.setScrollPosition("vertical",0)}}}),Qn={class:"dashboard-wrapper"},jn=s("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),Fn=s("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1);function zn(e,o,m,S,w,p){const h=K("router-link"),c=K("router-view"),b=K("DocumentationComponent"),V=K("SearchComponent"),O=K("ImagesComponent"),R=K("BookmarksComponent"),W=K("OTDComponent"),we=K("CurrentCourse"),ie=K("CurrentAssignment"),Q=K("CurrentPage"),T=K("PreferencesComponent");return $(),Y(ua,{view:"hHh LpR fFf"},{default:r(()=>[l(ra,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:r(()=>[l(Ve,null,{default:r(()=>[l(q,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),l(la,null,{default:r(()=>[l(h,{to:"/teacher"},{default:r(()=>[l(D,{name:"home",color:"white"},{default:r(()=>[l(G,null,{default:r(()=>[M("Return to My Teacher Page")]),_:1})]),_:1})]),_:1})]),_:1}),this.reStore.authenticated?($(),Y(q,{key:0,onClick:o[0]||(o[0]=J=>this.reStore.router.push("/student")),icon:"switch_account"},{default:r(()=>[l(G,null,{default:r(()=>[M(" Switch between Teacher or Student role ")]),_:1})]),_:1})):be("",!0),this.reStore.authenticated?($(),Y(q,{key:1,icon:"logout",onClick:o[1]||(o[1]=J=>this.reStore.logout())})):be("",!0),l(q,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1}),l(sa,{align:"left",class:"hidden"},{default:r(()=>[l(Ae,{to:"/logo",label:"Logo"}),l(Ae,{to:"/teaching",label:"Teaching"}),l(Ae,{to:"/taking",label:"Taking"}),l(Ae,{to:"/gradebook",label:"Gradebook"})]),_:1})]),_:1}),l(ia,{class:"container-fluid"},{default:r(()=>[s("div",Qn,[l(c)]),l(kt,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":o[2]||(o[2]=J=>e.leftDrawerOpen=J),side:"left"},{default:r(()=>[l(Ve,{flat:"",class:"bg-primary text-white"},{default:r(()=>[l(q,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Ce,{dark:"",vertical:"",inset:""}),l(q,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Ce,{dark:"",vertical:"",inset:""}),l(lt),l(q,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopLHS},{default:r(()=>[l(G,null,{default:r(()=>[M("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),jn,l(wt,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaLHS"},{default:r(()=>[l(b),l(V),l(O),l(R),l(W)]),_:1},8,["visible"])]),_:1},8,["modelValue"]),l(kt,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":o[3]||(o[3]=J=>e.rightDrawerOpen=J),side:"right"},{default:r(()=>[l(Ve,{flat:"",class:"bg-primary text-white"},{default:r(()=>[l(q,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Ce,{dark:"",vertical:"",inset:""}),l(q,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(Ce,{dark:"",vertical:"",inset:""}),l(lt),l(q,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopRHS},{default:r(()=>[l(G,null,{default:r(()=>[M("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),Fn,l(wt,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaRHS"},{default:r(()=>[l(we),l(ie),l(Q),l(T,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var rl=se(An,[["render",zn]]);export{rl as default};
