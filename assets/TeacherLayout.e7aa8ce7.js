import{g as $e,h as v,i as u,z as Qe,aL as Jt,B as Tt,r as p,D as Y,l as Xt,p as De,ax as Zt,j as ot,x as T,q as ea,d as fe,_ as ye,o as k,au as j,a as n,w as m,Q as I,e as d,af as J,ag as V,aK as ta,c as P,av as ae,aM as qe,aJ as ge,al as aa,am as xe,G as _t,P as bt,s as Xe,aI as oa,f as K}from"./index.fd0c91d0.js";import{Q as lt,a as la,b as na,c as He,d as sa,e as Re,f as St,g as ra,h as ia}from"./QLayout.7dbf0a17.js";import{Q as Vt}from"./QTooltip.b6607b43.js";import{u as pe,s as ua,a as Ct,p as re,t as da,c as kt,f as ca,g as ma,j as Ze,_ as va,d as wt}from"./re-store.9b9ddf75.js";import{a as U,Q as G,i as It,C as Le,h as Mt,u as ha,b as ga,c as fa}from"./ClosePopup.e4b71328.js";import{a as ya,b as pa,c as xt,d as et,e as _a,u as ba,f as Sa,D as Ca,P as ka}from"./DocumentationComponent.6785989c.js";import{Q as wa}from"./QInput.d8b47516.js";import{d as Fe,f as Pe,c as xa,e as Da,u as Dt,g as $a}from"./use-dark.6e174d7a.js";import{Q as nt}from"./QImg.4caad9ad.js";import"./selection.8201d631.js";import"./position-engine.7b1a9bc0.js";import"./use-portal.7786b934.js";import"./firebase.ea708b63.js";import"./use-key-composition.265d8c0f.js";import"./QCheckbox.8be52896.js";const qa={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},tt={xs:2,sm:4,md:8,lg:16,xl:24};var $t=$e({name:"QSeparator",props:{...Fe,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const o=Qe(),b=Pe(e,o.proxy.$q),w=v(()=>e.vertical===!0?"vertical":"horizontal"),C=v(()=>` q-separator--${w.value}`),D=v(()=>e.inset!==!1?`${C.value}-${qa[e.inset]}`:""),s=v(()=>`q-separator${C.value}${D.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(b.value===!0?" q-separator--dark":"")),g=v(()=>{const _={};if(e.size!==void 0&&(_[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const L=e.spaced===!0?`${tt.md}px`:e.spaced in tt?`${tt[e.spaced]}px`:e.spaced,H=e.vertical===!0?["Left","Right"]:["Top","Bottom"];_[`margin${H[0]}`]=_[`margin${H[1]}`]=L}return _});return()=>u("hr",{class:s.value,style:g.value,"aria-orientation":w.value})}});const ne=Jt({}),Ta=Object.keys(Tt);var Te=$e({name:"QExpansionItem",props:{...Tt,...xa,...Fe,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Da,"click","afterShow","afterHide"],setup(e,{slots:o,emit:b}){const{proxy:{$q:w}}=Qe(),C=Pe(e,w),D=p(e.modelValue!==null?e.modelValue:e.defaultOpened),s=p(null),g=Dt(),{show:_,hide:L,toggle:H}=$a({showing:D});let R,N;const _e=v(()=>`q-expansion-item q-item-type q-expansion-item--${D.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),oe=v(()=>{if(e.contentInsetLevel===void 0)return null;const h=w.lang.rtl===!0?"Right":"Left";return{["padding"+h]:e.contentInsetLevel*56+"px"}}),$=v(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),q=v(()=>{const h={};return Ta.forEach(O=>{h[O]=e[O]}),h}),Ye=v(()=>$.value===!0||e.expandIconToggle!==!0),Ue=v(()=>e.expandedIcon!==void 0&&D.value===!0?e.expandedIcon:e.expandIcon||w.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),A=v(()=>e.disable!==!0&&($.value===!0||e.expandIconToggle===!0)),f=v(()=>({expanded:D.value===!0,detailsId:e.targetUid,toggle:H,show:_,hide:L})),B=v(()=>{const h=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:w.lang.label[D.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":D.value===!0?"true":"false","aria-controls":g,"aria-label":h}});Y(()=>e.group,h=>{N!==void 0&&N(),h!==void 0&&M()});function Ie(h){$.value!==!0&&H(h),b("click",h)}function ie(h){h.keyCode===13&&ue(h,!0)}function ue(h,O){O!==!0&&s.value!==null&&s.value.focus(),H(h),ea(h)}function be(){b("afterShow")}function de(){b("afterHide")}function M(){R===void 0&&(R=Dt()),D.value===!0&&(ne[e.group]=R);const h=Y(D,W=>{W===!0?ne[e.group]=R:ne[e.group]===R&&delete ne[e.group]}),O=Y(()=>ne[e.group],(W,Ce)=>{Ce===R&&W!==void 0&&W!==R&&L()});N=()=>{h(),O(),ne[e.group]===R&&delete ne[e.group],N=void 0}}function ze(){const h={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},O=[u(T,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&D.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:Ue.value})];return A.value===!0&&(Object.assign(h,{tabindex:0,...B.value,onClick:ue,onKeyup:ie}),O.unshift(u("div",{ref:s,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),u(et,h,()=>O)}function E(){let h;return o.header!==void 0?h=[].concat(o.header(f.value)):(h=[u(et,()=>[u(xt,{lines:e.labelLines},()=>e.label||""),e.caption?u(xt,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&h[e.switchToggleSide===!0?"push":"unshift"](u(et,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>u(T,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&h[e.switchToggleSide===!0?"unshift":"push"](ze()),h}function X(){const h={ref:"item",style:e.headerStyle,class:e.headerClass,dark:C.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return Ye.value===!0&&(h.clickable=!0,h.onClick=Ie,Object.assign(h,$.value===!0?q.value:B.value)),u(pa,h,E)}function ce(){return De(u("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:oe.value,id:g},ot(o.default)),[[Zt,D.value]])}function Se(){const h=[X(),u(ya,{duration:e.duration,onShow:be,onHide:de},ce)];return e.expandSeparator===!0&&h.push(u($t,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:C.value}),u($t,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:C.value})),h}return e.group!==void 0&&M(),Xt(()=>{N!==void 0&&N()}),()=>u("div",{class:_e.value},[u("div",{class:"q-expansion-item__container relative-position"},Se())])}}),Ve=$e({name:"QList",props:{...Fe,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:o}){const b=Qe(),w=Pe(e,b.proxy.$q),C=v(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(w.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>u(e.tag,{class:C.value},ot(o.default))}});const Va=fe({name:"SearchComponent",setup(){const e=pe(),o=p("");return{reStore:e,searchTerms:o,searchSize:p(e.preferences.resLimit),searchResults:p([]),promptSearchSize:p(!1)}},mounted(){Y(this.reStore.preferences,async(e,o)=>{console.log("watcher ",e,o),this.searchSize=e.resLimit})},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchResults.splice(e,1)},load(e){console.log(e),console.log(this.searchResults[e]);const o=this.reStore.langVoices[this.reStore.preferences.langVoice];this.reStore.loadPageId(this.searchResults[e].pageid,o)},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoice];this.reStore.wiki.setLang(e.langName);const o=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",o.results.length),this.searchResults=o.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),Ia=d("div",{class:"text-h6"},"Search Results Size",-1),Ma={class:"q-gutter-y-sm column"},Ba={key:0},Oa={class:"row cardheader ptr justify-between"},Ha=["onClick"],Ra={class:"history-remove"};function La(e,o,b,w,C,D){return k(),j(ae,null,[n(Mt,{modelValue:e.promptSearchSize,"onUpdate:modelValue":o[2]||(o[2]=s=>e.promptSearchSize=s),persistent:""},{default:m(()=>[n(U,{style:{"min-width":"350px"}},{default:m(()=>[n(G,{align:"center"},{default:m(()=>[Ia]),_:1}),n(G,{class:"q-pt-none",align:"center"},{default:m(()=>[n(_a,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":o[0]||(o[0]=s=>e.searchSize=s)},null,8,["modelValue"])]),_:1}),n(It,{align:"center",class:"text-primary"},{default:m(()=>[De(n(I,{flat:"",label:"Cancel"},null,512),[[Le]]),De(n(I,{flat:"",label:"Update results size",onClick:o[1]||(o[1]=s=>this.updateSearchSize())},null,512),[[Le]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(U,{flat:""},{default:m(()=>[n(G,null,{default:m(()=>[n(Ve,{padding:"",bordered:"",class:"rounded-borders"},{default:m(()=>[n(Te,{"header-style":{border:"0px solid gray"},label:"Search & Results"},{default:m(()=>[d("div",Ma,[n(lt,{class:"bg-primary text-white rounded-borders q-my-md"},{default:m(()=>[n(I,{dark:"",standout:"",onClick:o[3]||(o[3]=s=>e.promptSearchSize=!0)},{default:m(()=>[J(V(this.searchResults.length)+" ",1),n(Vt,null,{default:m(()=>[J("Change results limit ("+V(this.searchSize)+")",1)]),_:1})]),_:1}),n(wa,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":o[6]||(o[6]=s=>e.searchTerms=s),"input-class":"text-right",class:"q-ml-md",onKeyup:[o[7]||(o[7]=s=>this.update()),o[8]||(o[8]=ta(s=>this.doSearch(),["enter"]))]},{append:m(()=>[e.searchTerms===""?(k(),P(T,{key:0,name:"search",onClick:o[4]||(o[4]=s=>this.doSearch())})):(k(),P(T,{key:1,name:"clear",class:"cursor-pointer",onClick:o[5]||(o[5]=s=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(k(),j("div",Ba,[(k(!0),j(ae,null,qe(this.searchResults,(s,g)=>(k(),P(U,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":o[9]||(o[9]=_=>this.searchResults=_),key:g},{default:m(()=>[d("div",Oa,[d("span",{class:"history-title col-grow",onClick:_=>this.load(g)},V(g)+". "+V(s.title.slice(0,25)),9,Ha),d("span",Ra,[n(T,{class:"primary",size:e.xl,color:e.primary,name:"close",onClick:_=>this.remove(g)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Qa=ye(Va,[["render",La]]);const Fa=fe({name:"CurrentPage",props:{},setup(e){const o=pe();return{reStore:o,courseid:p("---"),assignmentTitle:p("---"),pageTitle:p(o.page.pageTitle),lang:p(o.page.langVoice.longName),imgIdx:p(o.page.imgIdx),imgs:p(o.page.imgs),imgTot:p(o.page.imgs.length),imgFit:p(o.page.imgFit),guideWords:p(o.page.guideWords),mapCoords:p(o.page.mapCoords),pageid:p(o.page.pageid),pctReplace:p(o.page.pctReplace),canonicalUrl:p(o.page.canonicalUrl),props:e}},mounted(){console.log(this.props),Y(this.reStore.page,async(e,o)=>{console.log("watcher ",e,o),this.pageTitle=e.pageTitle,this.imgIdx=e.imgIdx,this.imgs=e.imgs,this.imgTot=e.imgs.length,this.imgFit=e.imgFit,this.guideWords=e.guideWords,this.mapCoords=e.mapCoords,this.pageid=e.pageid,this.lang=e.langVoice.longName,this.pctReplace=e.pctReplace,this.canonicalUrl=e.canonicalUrl})},methods:{speak(){console.log("CurrentPage.speak",this.reStore),this.reStore.speak()},cycleFitMode(){const e=["scale-down","cover"];let o=e.indexOf(this.imgFit);o+=1,o>e.length-1&&(o=0),this.imgFit=e[o],this.reStore.page.imgFit=this.imgFit,console.log("fit: ",this.imgFit)},nextImg(){this.imgIdx=this.imgIdx+1>this.imgs.length-1?0:this.imgIdx+1,this.reStore.page.imgIdx=this.imgIdx},imgCB(e,o){console.log(e,o),this.reStore.page.imgIdx=e},loadURL(e){console.log("loadURL ",e),window.open(e,"_blank")},mapCB(){const e="https://maps.google.com/?ll="+this.mapCoords.split(",")[0]+","+this.mapCoords.split(",")[1];window.open(e,"_blank")},saveImage(e,o){console.log("saveImage: ",e,o),this.reStore.saveImage(o)},saveCurrentImage(){const e=this.imgs[this.imgIdx];console.log("saveCurrentImage: ",e),this.reStore.saveImage(e)},remove(e,o){console.log("remove: ",e,o),this.imgs.splice(e,1),this.reStore.page.imgs.splice(e,1)},toggleText(){ua("#slideTextDiv").classed("hidden")?Ct("#slideTextDiv").classed("hidden",!1):Ct("#slideTextDiv").classed("hidden",!0)},addBookmark(){console.log("addBookmark"),this.reStore.saveBookmark()}}}),Pa={class:"text-weight-bolder text-center q-pa-md"},Ya={style:{border:"1px solid gray","border-radius":"5px"}},Ua={width:"100%"},za=d("td",{style:{width:"50%"}},null,-1),Aa=d("tr",null,[d("td"),d("td",null,"Speak Text")],-1),Na={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},ja={width:"100%"},Ea=d("td",null,"WP Page Id",-1),Wa={style:{width:"50%"}},Ka=d("td",null,"Language",-1),Ga={style:{width:"50%"}},Ja={class:"float-left"},Xa=d("td",null,"Current Image",-1),Za={class:"float-left"},eo={class:"float-right"},to=d("td",null,"Image Fit",-1),ao={class:"align-left"},oo=d("td",null,"Guide Words",-1),lo={style:{width:"50%"}},no=d("td",null,"Percent Replace",-1),so={class:"float-left"},ro=d("td",null,"Map Coords",-1),io={class:"float-left"},uo=d("td",null,"Toggle Text",-1),co={key:0},mo={class:"row cardheader justify-between"},vo={class:"history-remove"},ho={class:"history-remove ptr"};function go(e,o,b,w,C,D){return k(),j(ae,null,[n(U,{flat:""},{default:m(()=>[n(G,null,{default:m(()=>[d("div",Pa,V(this.pageTitle),1),d("div",Ya,[d("table",Ua,[d("tr",null,[za,d("td",null,[n(I,{round:"",class:"q-pa-md",icon:"volume_up",color:"secondary",onClick:o[0]||(o[0]=s=>this.speak())})])]),Aa])]),d("div",Na,[d("table",ja,[d("tr",null,[Ea,d("td",Wa,[d("a",{class:"bold_ptr float-left",onClick:o[1]||(o[1]=s=>this.loadURL(this.canonicalUrl))},V(this.pageid),1),n(T,{name:"bookmark",onClick:this.addBookmark,class:"float-right"},null,8,["onClick"])])]),d("tr",null,[Ka,d("td",Ga,[d("span",Ja,V(this.lang),1),n(T,{class:"float-right",name:"translate"})])]),d("tr",null,[Xa,d("td",{style:{width:"50%",cursor:"pointer"},onClick:o[2]||(o[2]=(...s)=>this.nextImg&&this.nextImg(...s))},[d("span",Za,V(this.imgIdx+1)+" / "+V(this.imgTot),1),d("span",eo,[n(T,{name:"bookmark",onClick:this.saveCurrentImage},null,8,["onClick"])])])]),d("tr",{class:"ptr",onClick:o[3]||(o[3]=(...s)=>this.cycleFitMode&&this.cycleFitMode(...s))},[to,d("td",null,[d("span",ao,V(this.imgFit),1),n(T,{class:"float-right",name:"fit_screen"})])]),d("tr",null,[oo,d("td",lo,[J(V(this.guideWords.replaceAll(",",", "))+" ",1),n(T,{class:"float-right",name:"tune"})])]),d("tr",null,[no,d("td",null,[d("span",so,V(this.pctReplace)+" %",1),n(T,{class:"float-right",name:"tune"})])]),d("tr",null,[ro,d("td",{onClick:o[4]||(o[4]=(...s)=>this.mapCB&&this.mapCB(...s)),class:"ptr"},[d("span",io,V(this.mapCoords),1),n(T,{class:"float-right",name:"place"})])]),d("tr",null,[uo,d("td",{onClick:o[5]||(o[5]=(...s)=>this.toggleText&&this.toggleText(...s)),class:"ptr"},[n(T,{class:"float-right",name:"article"})])])])])]),_:1})]),_:1}),n(U,{flat:""},{default:m(()=>[n(G,null,{default:m(()=>[n(Ve,{padding:"",bordered:"",class:"rounded-borders"},{default:m(()=>[n(Te,{"header-style":{border:"0px solid gray"},label:"Page Images"},{default:m(()=>[this.imgs.length?(k(),j("div",co,[(k(!0),j(ae,null,qe(this.imgs,(s,g)=>(k(),P(U,{bordered:"",class:"q-ma-sm",flat:"",modelValue:this.imgs,"onUpdate:modelValue":o[6]||(o[6]=_=>this.imgs=_),key:g},{default:m(()=>[d("div",mo,[d("span",vo,[n(T,{name:"bookmark",onClick:_=>this.saveImage(g,s)},null,8,["onClick"]),n(T,{name:"article",onClick:this.toggleText},null,8,["onClick"]),n(T,{name:"fit_screen",onClick:this.cycleFitMode},null,8,["onClick"])]),J(" "+V(s.cap.slice(0,25))+" ",1),d("span",ho,[n(T,{name:"close",onClick:_=>this.remove(g,s)},null,8,["onClick"])])]),n(nt,{class:"cardimage",onClick:_=>this.imgCB(g,s),src:s.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])):ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var fo=ye(Fa,[["render",go]]);const yo=fe({name:"ImagesComponent",setup(){return{reStore:pe()}},mounted(){Y(this.reStore.userSnapshot.images,async(e,o)=>{console.log("watcher ",e,o)})},methods:{imgCB(e,o){this.reStore.router.push("/teacher/editor"),console.log(e,o);const b={url:o.url,cap:o.desc};this.reStore.page.imgs.push(b),this.reStore.page.imgIdx=this.reStore.page.imgs.length-1},remove(e,o){console.log(e,o),this.reStore.removeImage(e)}}}),po={class:"row cardheader justify-between"},_o={class:"history-remove hidden"},bo={class:"history-remove ptr"};function So(e,o,b,w,C,D){return k(),P(U,{flat:""},{default:m(()=>[n(G,null,{default:m(()=>[n(Ve,{padding:"",bordered:"",class:"rounded-borders"},{default:m(()=>[this.reStore.userSnapshot.images?(k(),P(Te,{key:0,"header-style":{border:"0px solid gray"},label:"My Images"},{default:m(()=>[d("div",null,[(k(!0),j(ae,null,qe(this.reStore.userSnapshot.images,(s,g)=>(k(),P(U,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":o[0]||(o[0]=_=>this.reStore.userSnapshot.images=_),key:g},{default:m(()=>[d("div",po,[d("span",_o,[n(T)]),J(" "+V(s.desc.slice(0,25))+" ",1),d("span",bo,[n(T,{name:"close",onClick:_=>this.remove(g,s)},null,8,["onClick"])])]),n(nt,{class:"cardimage",onClick:_=>this.imgCB(g,s),src:s.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1})}var Co=ye(yo,[["render",So]]);const ko=fe({name:"BookmarksComponent",setup(){return{reStore:pe()}},mounted(){Y(this.reStore.userSnapshot.bookmarks,async(e,o)=>{console.log("watcher ",e,o)})},methods:{imgCB(e,o){this.reStore.page.imgs=JSON.parse(JSON.stringify(o.imgs)),this.reStore.router.push("/teacher/editor")},remove(e,o){console.log(e,o),this.reStore.removeBookmark(e)}}}),wo={class:"row cardheader justify-between"},xo={class:"history-remove hidden"},Do={class:"history-remove ptr"};function $o(e,o,b,w,C,D){return k(),P(U,{flat:""},{default:m(()=>[n(G,null,{default:m(()=>[n(Ve,{padding:"",bordered:"",class:"rounded-borders"},{default:m(()=>[this.reStore.userSnapshot.bookmarks?(k(),P(Te,{key:0,"header-style":{border:"0px solid gray"},label:"My bookmarks"},{default:m(()=>[d("div",null,[(k(!0),j(ae,null,qe(this.reStore.userSnapshot.bookmarks,(s,g)=>(k(),P(U,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":o[0]||(o[0]=_=>this.reStore.userSnapshot.bookmarks=_),key:g},{default:m(()=>[d("div",wo,[d("span",xo,[n(T)]),J(" "+V(s.pageTitle.slice(0,25))+" ",1),d("span",Do,[n(T,{name:"close",onClick:_=>this.remove(g,s)},null,8,["onClick"])])]),n(nt,{class:"cardimage",onClick:_=>this.imgCB(g,s),src:s.imgs[0].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1})}var qo=ye(ko,[["render",$o]]);const To=["gregorian","persian"],Vo={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>To.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Io=["update:modelValue"];function ee(e){return e.year+"/"+re(e.month)+"/"+re(e.day)}function Mo(e,o){const b=v(()=>e.disable!==!0&&e.readonly!==!0),w=v(()=>e.editable===!0?0:-1),C=v(()=>{const g=[];return e.color!==void 0&&g.push(`bg-${e.color}`),e.textColor!==void 0&&g.push(`text-${e.textColor}`),g.join(" ")});function D(){return e.locale!==void 0?{...o.lang.date,...e.locale}:o.lang.date}function s(g){const _=new Date,L=g===!0?null:0;if(e.calendar==="persian"){const H=da(_);return{year:H.jy,month:H.jm,day:H.jd}}return{year:_.getFullYear(),month:_.getMonth()+1,day:_.getDate(),hour:L,minute:L,second:L,millisecond:L}}return{editable:b,tabindex:w,headerClass:C,getLocale:D,getCurrentDate:s}}const se=20,Bo=["Calendar","Years","Months"],qt=e=>Bo.includes(e),at=e=>/^-?[\d]+\/[0-1]\d$/.test(e),he=" \u2014 ";function te(e){return e.year+"/"+re(e.month)}var Oo=$e({name:"QDate",props:{...Vo,...ha,...Fe,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:at},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:at},navigationMaxYearMonth:{type:String,validator:at},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:qt}},emits:[...Io,"rangeStart","rangeEnd","navigation"],setup(e,{slots:o,emit:b}){const{proxy:w}=Qe(),{$q:C}=w,D=Pe(e,C),{getCache:s}=ba(),{tabindex:g,headerClass:_,getLocale:L,getCurrentDate:H}=Mo(e,C);let R;const N=ga(e),_e=fa(N),oe=p(null),$=p(mt()),q=p(L()),Ye=v(()=>mt()),Ue=v(()=>L()),A=v(()=>H()),f=p(vt($.value,q.value)),B=p(e.defaultView),Ie=C.lang.rtl===!0?"right":"left",ie=p(Ie.value),ue=p(Ie.value),be=f.value.year,de=p(be-be%se-(be<0?se:0)),M=p(null),ze=v(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(D.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),E=v(()=>e.color||"primary"),X=v(()=>e.textColor||"white"),ce=v(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Se=v(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),h=v(()=>Se.value.filter(t=>typeof t=="string").map(t=>je(t,$.value,q.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),O=v(()=>{const t=a=>je(a,$.value,q.value);return Se.value.filter(a=>aa(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),W=v(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=kt(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),Ce=v(()=>e.calendar==="persian"?ee:(t,a,l)=>ca(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?$.value:a,l===void 0?q.value:l,t.year,t.timezoneOffset)),ke=v(()=>h.value.length+O.value.reduce((t,a)=>t+1+ma(W.value(a.to),W.value(a.from)),0)),st=v(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(M.value!==null){const l=M.value.init,i=W.value(l);return q.value.daysShort[i.getDay()]+", "+q.value.monthsShort[l.month-1]+" "+l.day+he+"?"}if(ke.value===0)return he;if(ke.value>1)return`${ke.value} ${q.value.pluralDay}`;const t=h.value[0],a=W.value(t);return isNaN(a.valueOf())===!0?he:q.value.headerTitle!==void 0?q.value.headerTitle(a,t):q.value.daysShort[a.getDay()]+", "+q.value.monthsShort[t.month-1]+" "+t.day}),Bt=v(()=>h.value.concat(O.value.map(a=>a.from)).sort((a,l)=>a.year-l.year||a.month-l.month)[0]),Ot=v(()=>h.value.concat(O.value.map(a=>a.to)).sort((a,l)=>l.year-a.year||l.month-a.month)[0]),rt=v(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(ke.value===0)return he;if(ke.value>1){const t=Bt.value,a=Ot.value,l=q.value.monthsShort;return l[t.month-1]+(t.year!==a.year?" "+t.year+he+l[a.month-1]+" ":t.month!==a.month?he+l[a.month-1]:"")+" "+a.year}return h.value[0].year}),Me=v(()=>{const t=[C.iconSet.datetime.arrowLeft,C.iconSet.datetime.arrowRight];return C.lang.rtl===!0?t.reverse():t}),it=v(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):q.value.firstDayOfWeek),Ht=v(()=>{const t=q.value.daysShort,a=it.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),Z=v(()=>{const t=f.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():Ze(t.year,t.month)}),Rt=v(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),Q=v(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),F=v(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Ae=v(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return Q.value!==null&&Q.value.year>=f.value.year&&(t.year.prev=!1,Q.value.year===f.value.year&&Q.value.month>=f.value.month&&(t.month.prev=!1)),F.value!==null&&F.value.year<=f.value.year&&(t.year.next=!1,F.value.year===f.value.year&&F.value.month<=f.value.month&&(t.month.next=!1)),t}),Be=v(()=>{const t={};return h.value.forEach(a=>{const l=te(a);t[l]===void 0&&(t[l]=[]),t[l].push(a.day)}),t}),ut=v(()=>{const t={};return O.value.forEach(a=>{const l=te(a.from),i=te(a.to);if(t[l]===void 0&&(t[l]=[]),t[l].push({from:a.from.day,to:l===i?a.to.day:void 0,range:a}),l<i){let r;const{year:S,month:c}=a.from,y=c<12?{year:S,month:c+1}:{year:S+1,month:1};for(;(r=te(y))<=i;)t[r]===void 0&&(t[r]=[]),t[r].push({from:void 0,to:r===i?a.to.day:void 0,range:a}),y.month++,y.month>12&&(y.year++,y.month=1)}}),t}),we=v(()=>{if(M.value===null)return;const{init:t,initHash:a,final:l,finalHash:i}=M.value,[r,S]=a<=i?[t,l]:[l,t],c=te(r),y=te(S);if(c!==z.value&&y!==z.value)return;const x={};return c===z.value?(x.from=r.day,x.includeFrom=!0):x.from=1,y===z.value?(x.to=S.day,x.includeTo=!0):x.to=Z.value,x}),z=v(()=>te(f.value)),Lt=v(()=>{const t={};if(e.options===void 0){for(let l=1;l<=Z.value;l++)t[l]=!0;return t}const a=typeof e.options=="function"?e.options:l=>e.options.includes(l);for(let l=1;l<=Z.value;l++){const i=z.value+"/"+re(l);t[l]=a(i)}return t}),Qt=v(()=>{const t={};if(e.events===void 0)for(let a=1;a<=Z.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:l=>e.events.includes(l);for(let l=1;l<=Z.value;l++){const i=z.value+"/"+re(l);t[l]=a(i)===!0&&Rt.value(i)}}return t}),Ft=v(()=>{let t,a;const{year:l,month:i}=f.value;if(e.calendar!=="persian")t=new Date(l,i-1,1),a=new Date(l,i-1,0).getDate();else{const r=kt(l,i,1);t=new Date(r.gy,r.gm-1,r.gd);let S=i-1,c=l;S===0&&(S=12,c--),a=Ze(c,S)}return{days:t.getDay()-it.value-1,endDay:a}}),dt=v(()=>{const t=[],{days:a,endDay:l}=Ft.value,i=a<0?a+7:a;if(i<6)for(let c=l-i;c<=l;c++)t.push({i:c,fill:!0});const r=t.length;for(let c=1;c<=Z.value;c++){const y={i:c,event:Qt.value[c],classes:[]};Lt.value[c]===!0&&(y.in=!0,y.flat=!0),t.push(y)}if(Be.value[z.value]!==void 0&&Be.value[z.value].forEach(c=>{const y=r+c-1;Object.assign(t[y],{selected:!0,unelevated:!0,flat:!1,color:E.value,textColor:X.value})}),ut.value[z.value]!==void 0&&ut.value[z.value].forEach(c=>{if(c.from!==void 0){const y=r+c.from-1,x=r+(c.to||Z.value)-1;for(let Je=y;Je<=x;Je++)Object.assign(t[Je],{range:c.range,unelevated:!0,color:E.value,textColor:X.value});Object.assign(t[y],{rangeFrom:!0,flat:!1}),c.to!==void 0&&Object.assign(t[x],{rangeTo:!0,flat:!1})}else if(c.to!==void 0){const y=r+c.to-1;for(let x=r;x<=y;x++)Object.assign(t[x],{range:c.range,unelevated:!0,color:E.value,textColor:X.value});Object.assign(t[y],{flat:!1,rangeTo:!0})}else{const y=r+Z.value-1;for(let x=r;x<=y;x++)Object.assign(t[x],{range:c.range,unelevated:!0,color:E.value,textColor:X.value})}}),we.value!==void 0){const c=r+we.value.from-1,y=r+we.value.to-1;for(let x=c;x<=y;x++)t[x].color=E.value,t[x].editRange=!0;we.value.includeFrom===!0&&(t[c].editRangeFrom=!0),we.value.includeTo===!0&&(t[y].editRangeTo=!0)}f.value.year===A.value.year&&f.value.month===A.value.month&&(t[r+A.value.day-1].today=!0);const S=t.length%7;if(S>0){const c=7-S;for(let y=1;y<=c;y++)t.push({i:y,fill:!0})}return t.forEach(c=>{let y="q-date__calendar-item ";c.fill===!0?y+="q-date__calendar-item--fill":(y+=`q-date__calendar-item--${c.in===!0?"in":"out"}`,c.range!==void 0&&(y+=` q-date__range${c.rangeTo===!0?"-to":c.rangeFrom===!0?"-from":""}`),c.editRange===!0&&(y+=` q-date__edit-range${c.editRangeFrom===!0?"-from":""}${c.editRangeTo===!0?"-to":""}`),(c.range!==void 0||c.editRange===!0)&&(y+=` text-${c.color}`)),c.classes=y}),t}),Pt=v(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});Y(()=>e.modelValue,t=>{if(R===t)R=0;else{const{year:a,month:l}=vt($.value,q.value);me(a,l)}}),Y(B,()=>{oe.value!==null&&w.$el.contains(document.activeElement)===!0&&oe.value.focus()}),Y(()=>f.value.year,t=>{b("navigation",{year:t,month:f.value.month})}),Y(()=>f.value.month,t=>{b("navigation",{year:f.value.year,month:t})}),Y(Ye,t=>{pt(t,q.value,"mask"),$.value=t}),Y(Ue,t=>{pt($.value,t,"locale"),q.value=t});function ct(){const t=A.value,a=Be.value[te(t)];(a===void 0||a.includes(t.day)===!1)&&We(t),Ne(t.year,t.month)}function Yt(t){qt(t)===!0&&(B.value=t)}function Ut(t,a){["month","year"].includes(t)&&(t==="month"?gt:Ee)(a===!0?-1:1)}function Ne(t,a){B.value="Calendar",me(t,a)}function zt(t,a){if(e.range===!1||!t){M.value=null;return}const l=Object.assign({...f.value},t),i=a!==void 0?Object.assign({...f.value},a):l;M.value={init:l,initHash:ee(l),final:i,finalHash:ee(i)},Ne(l.year,l.month)}function mt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function je(t,a,l){return va(t,a,l,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function vt(t,a){const l=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(l.length===0)return ht();const i=l[l.length-1],r=je(i.from!==void 0?i.from:i,t,a);return r.dateHash===null?ht():r}function ht(){let t,a;if(e.defaultYearMonth!==void 0){const l=e.defaultYearMonth.split("/");t=parseInt(l[0],10),a=parseInt(l[1],10)}else{const l=A.value!==void 0?A.value:H();t=l.year,a=l.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+re(a)+"/01"}}function gt(t){let a=f.value.year,l=Number(f.value.month)+t;l===13?(l=1,a++):l===0&&(l=12,a--),me(a,l),ce.value===!0&&Oe("month")}function Ee(t){const a=Number(f.value.year)+t;me(a,f.value.month),ce.value===!0&&Oe("year")}function At(t){me(t,f.value.month),B.value=e.defaultView==="Years"?"Months":"Calendar",ce.value===!0&&Oe("year")}function Nt(t){me(f.value.year,t),B.value="Calendar",ce.value===!0&&Oe("month")}function jt(t,a){const l=Be.value[a];(l!==void 0&&l.includes(t.day)===!0?Ke:We)(t)}function le(t){return{year:t.year,month:t.month,day:t.day}}function me(t,a){Q.value!==null&&t<=Q.value.year&&(t=Q.value.year,a<Q.value.month&&(a=Q.value.month)),F.value!==null&&t>=F.value.year&&(t=F.value.year,a>F.value.month&&(a=F.value.month));const l=t+"/"+re(a)+"/01";l!==f.value.dateHash&&(ie.value=f.value.dateHash<l==(C.lang.rtl!==!0)?"left":"right",t!==f.value.year&&(ue.value=ie.value),_t(()=>{de.value=t-t%se-(t<0?se:0),Object.assign(f.value,{year:t,month:a,day:1,dateHash:l})}))}function ft(t,a,l){const i=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;R=i;const{reason:r,details:S}=yt(a,l);b("update:modelValue",i,r,S)}function Oe(t){const a=h.value[0]!==void 0&&h.value[0].dateHash!==null?{...h.value[0]}:{...f.value};_t(()=>{a.year=f.value.year,a.month=f.value.month;const l=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Ze(a.year,a.month);a.day=Math.min(Math.max(1,a.day),l);const i=ve(a);R=i;const{details:r}=yt("",a);b("update:modelValue",i,t,r)})}function yt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...le(a.target),from:le(a.from),to:le(a.to)}}:{reason:`${t}-day`,details:le(a)}}function ve(t,a,l){return t.from!==void 0?{from:Ce.value(t.from,a,l),to:Ce.value(t.to,a,l)}:Ce.value(t,a,l)}function We(t){let a;if(e.multiple===!0)if(t.from!==void 0){const l=ee(t.from),i=ee(t.to),r=h.value.filter(c=>c.dateHash<l||c.dateHash>i),S=O.value.filter(({from:c,to:y})=>y.dateHash<l||c.dateHash>i);a=r.concat(S).concat(t).map(c=>ve(c))}else{const l=Se.value.slice();l.push(ve(t)),a=l}else a=ve(t);ft(a,"add",t)}function Ke(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const l=ve(t);t.from!==void 0?a=e.modelValue.filter(i=>i.from!==void 0?i.from!==l.from&&i.to!==l.to:!0):a=e.modelValue.filter(i=>i!==l),a.length===0&&(a=null)}ft(a,"remove",t)}function pt(t,a,l){const i=h.value.concat(O.value).map(r=>ve(r,t,a)).filter(r=>r.from!==void 0?r.from.dateHash!==null&&r.to.dateHash!==null:r.dateHash!==null);b("update:modelValue",(e.multiple===!0?i:i[0])||null,l)}function Et(){if(e.minimal!==!0)return u("div",{class:"q-date__header "+_.value},[u("div",{class:"relative-position"},[u(xe,{name:"q-transition--fade"},()=>u("div",{key:"h-yr-"+rt.value,class:"q-date__header-subtitle q-date__header-link "+(B.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:g.value,...s("vY",{onClick(){B.value="Years"},onKeyup(t){t.keyCode===13&&(B.value="Years")}})},[rt.value]))]),u("div",{class:"q-date__header-title relative-position flex no-wrap"},[u("div",{class:"relative-position col"},[u(xe,{name:"q-transition--fade"},()=>u("div",{key:"h-sub"+st.value,class:"q-date__header-title-label q-date__header-link "+(B.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:g.value,...s("vC",{onClick(){B.value="Calendar"},onKeyup(t){t.keyCode===13&&(B.value="Calendar")}})},[st.value]))]),e.todayBtn===!0?u(I,{class:"q-date__header-today self-start",icon:C.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:g.value,onClick:ct}):null])])}function Ge({label:t,type:a,key:l,dir:i,goTo:r,boundaries:S,cls:c}){return[u("div",{class:"row items-center q-date__arrow"},[u(I,{round:!0,dense:!0,size:"sm",flat:!0,icon:Me.value[0],tabindex:g.value,disable:S.prev===!1,...s("go-#"+a,{onClick(){r(-1)}})})]),u("div",{class:"relative-position overflow-hidden flex flex-center"+c},[u(xe,{name:"q-transition--jump-"+i},()=>u("div",{key:l},[u(I,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:g.value,...s("view#"+a,{onClick:()=>{B.value=a}})})]))]),u("div",{class:"row items-center q-date__arrow"},[u(I,{round:!0,dense:!0,size:"sm",flat:!0,icon:Me.value[1],tabindex:g.value,disable:S.next===!1,...s("go+#"+a,{onClick(){r(1)}})})])]}const Wt={Calendar:()=>[u("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[u("div",{class:"q-date__navigation row items-center no-wrap"},Ge({label:q.value.months[f.value.month-1],type:"Months",key:f.value.month,dir:ie.value,goTo:gt,boundaries:Ae.value.month,cls:" col"}).concat(Ge({label:f.value.year,type:"Years",key:f.value.year,dir:ue.value,goTo:Ee,boundaries:Ae.value.year,cls:""}))),u("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Ht.value.map(t=>u("div",{class:"q-date__calendar-item"},[u("div",t)]))),u("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[u(xe,{name:"q-transition--slide-"+ie.value},()=>u("div",{key:z.value,class:"q-date__calendar-days fit"},dt.value.map(t=>u("div",{class:t.classes},[t.in===!0?u(I,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:g.value,...s("day#"+t.i,{onClick:()=>{Kt(t.i)},onMouseover:()=>{Gt(t.i)}})},t.event!==!1?()=>u("div",{class:"q-date__event bg-"+t.event}):null):u("div",""+t.i)]))))])])],Months(){const t=f.value.year===A.value.year,a=i=>Q.value!==null&&f.value.year===Q.value.year&&Q.value.month>i||F.value!==null&&f.value.year===F.value.year&&F.value.month<i,l=q.value.monthsShort.map((i,r)=>{const S=f.value.month===r+1;return u("div",{class:"q-date__months-item flex flex-center"},[u(I,{class:t===!0&&A.value.month===r+1?"q-date__today":null,flat:S!==!0,label:i,unelevated:S,color:S===!0?E.value:null,textColor:S===!0?X.value:null,tabindex:g.value,disable:a(r+1),...s("month#"+r,{onClick:()=>{Nt(r+1)}})})])});return e.yearsInMonthView===!0&&l.unshift(u("div",{class:"row no-wrap full-width"},[Ge({label:f.value.year,type:"Years",key:f.value.year,dir:ue.value,goTo:Ee,boundaries:Ae.value.year,cls:" col"})])),u("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},l)},Years(){const t=de.value,a=t+se,l=[],i=r=>Q.value!==null&&Q.value.year>r||F.value!==null&&F.value.year<r;for(let r=t;r<=a;r++){const S=f.value.year===r;l.push(u("div",{class:"q-date__years-item flex flex-center"},[u(I,{key:"yr"+r,class:A.value.year===r?"q-date__today":null,flat:!S,label:r,dense:!0,unelevated:S,color:S===!0?E.value:null,textColor:S===!0?X.value:null,tabindex:g.value,disable:i(r),...s("yr#"+r,{onClick:()=>{At(r)}})})]))}return u("div",{class:"q-date__view q-date__years flex flex-center"},[u("div",{class:"col-auto"},[u(I,{round:!0,dense:!0,flat:!0,icon:Me.value[0],tabindex:g.value,disable:i(t),...s("y-",{onClick:()=>{de.value-=se}})})]),u("div",{class:"q-date__years-content col self-stretch row items-center"},l),u("div",{class:"col-auto"},[u(I,{round:!0,dense:!0,flat:!0,icon:Me.value[1],tabindex:g.value,disable:i(a),...s("y+",{onClick:()=>{de.value+=se}})})])])}};function Kt(t){const a={...f.value,day:t};if(e.range===!1){jt(a,z.value);return}if(M.value===null){const l=dt.value.find(r=>r.fill!==!0&&r.i===t);if(e.noUnset!==!0&&l.range!==void 0){Ke({target:a,from:l.range.from,to:l.range.to});return}if(l.selected===!0){Ke(a);return}const i=ee(a);M.value={init:a,initHash:i,final:a,finalHash:i},b("rangeStart",le(a))}else{const l=M.value.initHash,i=ee(a),r=l<=i?{from:M.value.init,to:a}:{from:a,to:M.value.init};M.value=null,We(l===i?a:{target:a,...r}),b("rangeEnd",{from:le(r.from),to:le(r.to)})}}function Gt(t){if(M.value!==null){const a={...f.value,day:t};Object.assign(M.value,{final:a,finalHash:ee(a)})}}return Object.assign(w,{setToday:ct,setView:Yt,offsetCalendar:Ut,setCalendarTo:Ne,setEditingRange:zt}),()=>{const t=[u("div",{class:"q-date__content col relative-position"},[u(xe,{name:"q-transition--fade"},Wt[B.value])])],a=ot(o.default);return a!==void 0&&t.push(u("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&_e(t,"push"),u("div",{class:ze.value,...Pt.value},[Et(),u("div",{ref:oe,class:"q-date__main col column",tabindex:-1},t)])}}});const Ho=u("div",{class:"q-space"});var Ro=$e({name:"QSpace",setup(){return()=>Ho}});const Lo=fe({name:"OTDComponent",setup(){const e=pe(),o=Date.now(),b=wt.formatDate(o,"MM/DD");return{reStore:e,otditems:p([]),promptOTDDate:p(!1),otddate:p(Date.now()),otdlabel:p(b),otdtype:p("selected")}},mounted(){this.init()},methods:{async init(){const e=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=e[this.otdtype],console.log(this.otditems)},async load(e){console.log("load",this.otditems[e].text),console.log("load",this.otditems[e]);const o=this.reStore.langVoices[this.reStore.preferences.langVoice];this.reStore.loadPageId(this.otditems[e].pages[0].pageid,o),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const e=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=e.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=wt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(e){console.log("otdOptionsCB",this.otdtype);const o=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=o[this.otdtype]}}}),Qo=d("div",{class:"text-h6"},"Select Date",-1),Fo={class:"q-gutter-y-sm column"},Po={class:""};function Yo(e,o,b,w,C,D){return k(),j(ae,null,[n(Mt,{modelValue:e.promptOTDDate,"onUpdate:modelValue":o[2]||(o[2]=s=>e.promptOTDDate=s),persistent:""},{default:m(()=>[n(U,{style:{"min-width":"350px"}},{default:m(()=>[n(G,{align:"center"},{default:m(()=>[Qo]),_:1}),n(Oo,{modelValue:e.otddate,"onUpdate:modelValue":o[0]||(o[0]=s=>e.otddate=s),minimal:""},null,8,["modelValue"]),n(It,{align:"center",class:"text-white"},{default:m(()=>[De(n(I,{flat:"",label:"Cancel"},null,512),[[Le]]),De(n(I,{flat:"",label:"Update OTD date",onClick:o[1]||(o[1]=s=>this.updateOTDDate())},null,512),[[Le]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(U,{flat:""},{default:m(()=>[n(G,null,{default:m(()=>[n(Ve,{padding:"",bordered:"",class:"rounded-borders"},{default:m(()=>[n(Te,{"header-style":{border:"0px solid gray"},label:"On This Day"},{default:m(()=>[d("div",Fo,[n(lt,{class:"bg-primary text-white rounded-borders q-my-md"},{default:m(()=>[n(I,{dark:"",standout:"",onClick:o[3]||(o[3]=s=>e.promptOTDDate=!0)},{default:m(()=>[J(V(e.otdlabel),1)]),_:1}),n(Ro),n(Sa,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":o[4]||(o[4]=s=>this.otdtype=s),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:o[5]||(o[5]=s=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),d("div",Po,[(k(!0),j(ae,null,qe(e.otditems,(s,g)=>(k(),P(U,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:e.otditems,"onUpdate:modelValue":o[6]||(o[6]=_=>e.otditems=_),key:g,onClick:_=>this.load(g)},{default:m(()=>[J(V(g)+". "+V(s.year)+" "+V(s.text),1)]),_:2},1032,["modelValue","onClick"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Uo=ye(Lo,[["render",Yo]]);const zo=fe({name:"TeacherLayout",components:{DocumentationComponent:Ca,SearchComponent:Qa,PreferencesComponent:ka,CurrentPage:fo,ImagesComponent:Co,BookmarksComponent:qo,OTDComponent:Uo},setup(){const e=p(!1),o=p(!1),b=pe(),w=b.preferences;return{step:p(1),reStore:b,initialValues:p(w),leftDrawerOpen:e,rightDrawerOpen:o,toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){o.value=!o.value}}},mounted(){bt.isActive||(bt.toggle(),Xe("primary","#333"),Xe("secondary",this.reStore.preferences.secondaryColor),Xe("accent",this.reStore.preferences.accentColor))}}),Ao=d("img",{src:"https://readingedgeca.s3.us-west-1.amazonaws.com/static/pub/img/reading_edge_200x200.png"},null,-1),No={class:"dashboard-wrapper"};function jo(e,o,b,w,C,D){const s=K("router-link"),g=K("DocumentationComponent"),_=K("SearchComponent"),L=K("ImagesComponent"),H=K("BookmarksComponent"),R=K("OTDComponent"),N=K("PreferencesComponent"),_e=K("CurrentPage"),oe=K("router-view");return k(),P(ia,{view:"hHh lpR fFf"},{default:m(()=>[n(sa,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:m(()=>[n(lt,null,{default:m(()=>[n(I,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),n(la,null,{default:m(()=>[n(s,{to:"/"},{default:m(()=>[n(oa,{size:"25px"},{default:m(()=>[Ao]),_:1})]),_:1})]),_:1}),this.reStore.authenticated?(k(),P(I,{key:0,onClick:o[0]||(o[0]=$=>this.reStore.router.push("/student")),icon:"switch_account"},{default:m(()=>[n(Vt,null,{default:m(()=>[J(" Switch between Teacher or Student role ")]),_:1})]),_:1})):ge("",!0),this.reStore.authenticated?(k(),P(I,{key:1,icon:"logout",onClick:o[1]||(o[1]=$=>this.reStore.logout())})):ge("",!0),n(I,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1}),n(na,{align:"left",class:"hidden"},{default:m(()=>[n(He,{to:"/logo",label:"Logo"}),n(He,{to:"/teaching",label:"Teaching"}),n(He,{to:"/taking",label:"Taking"}),n(He,{to:"/gradebook",label:"Gradebook"})]),_:1})]),_:1}),n(Re,{"show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":o[2]||(o[2]=$=>e.leftDrawerOpen=$),side:"left",bordered:""},null,8,["modelValue"]),n(Re,{"show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":o[3]||(o[3]=$=>e.rightDrawerOpen=$),side:"right",bordered:""},null,8,["modelValue"]),n(ra,{class:"container-fluid"},{default:m(()=>[n(Re,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":o[4]||(o[4]=$=>e.leftDrawerOpen=$),side:"left"},{default:m(()=>[n(St,{visible:e.visible,style:{height:"95vh","max-width":"350px"}},{default:m(()=>[n(g),n(_),n(L),n(H),n(R)]),_:1},8,["visible"])]),_:1},8,["modelValue"]),n(Re,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":o[5]||(o[5]=$=>e.rightDrawerOpen=$),side:"right"},{default:m(()=>[n(St,{visible:e.visible,style:{height:"95vh","max-width":"350px"}},{default:m(()=>[n(N,{initialValues:this.initialValues},null,8,["initialValues"]),n(_e)]),_:1},8,["visible"])]),_:1},8,["modelValue"]),d("div",No,[n(oe)])]),_:1})]),_:1})}var il=ye(zo,[["render",jo]]);export{il as default};
