import{a as O,Q as M,i as qe,C as Z,h as Te,u as aa,b as oa,c as la}from"./ClosePopup.35754a8a.js";import{a as sa,b as na,c as Vt,d as nt,e as ia,u as ra,f as Lt,D as da,P as ua,g as xt}from"./DocumentationComponent.0e23febe.js";import{g as Ie,h as p,i as h,z as Ee,aL as ca,a1 as Ht,r as c,F as H,l as ma,p as J,ax as ha,j as ct,x as q,q as ga,d as se,_ as ne,o as y,au as $,a as l,w as i,Q as V,e as s,af as T,ag as S,aJ as mt,c as j,av as W,aK as he,aI as le,f as E,al as fa,am as Ne,D as Dt,y as va,P as qt,s as it}from"./index.a59af852.js";import{Q}from"./QTooltip.73cbe3b4.js";import{Q as De,a as pa,c as ya,d as Tt,e as It,b as _a,f as Ca,g as Sa}from"./QLayout.eb2443c6.js";import{d as We,f as Ge,c as ka,e as ba,u as Bt,g as wa}from"./use-dark.558ba38e.js";import{u as ie,s as te,a as ye,p as _e,t as $a,c as Pt,f as Va,g as xa,j as rt,_ as Da,d as Ot}from"./re-store.fb3b18c5.js";import{Q as me}from"./QInput.6056d1b9.js";import{Q as qa}from"./QToggle.1beac414.js";import{Q as Re}from"./QImg.b6225a88.js";import"./use-portal.6b612945.js";import"./selection.61dc086d.js";import"./use-key-composition.6f074956.js";import"./QCheckbox.3e5c8cf8.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";const Ta={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},dt={xs:2,sm:4,md:8,lg:16,xl:24};var xe=Ie({name:"QSeparator",props:{...We,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const a=Ee(),u=Ge(e,a.proxy.$q),f=p(()=>e.vertical===!0?"vertical":"horizontal"),b=p(()=>` q-separator--${f.value}`),x=p(()=>e.inset!==!1?`${b.value}-${Ta[e.inset]}`:""),r=p(()=>`q-separator${b.value}${x.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(u.value===!0?" q-separator--dark":"")),d=p(()=>{const k={};if(e.size!==void 0&&(k[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const P=e.spaced===!0?`${dt.md}px`:e.spaced in dt?`${dt[e.spaced]}px`:e.spaced,K=e.vertical===!0?["Left","Right"]:["Top","Bottom"];k[`margin${K[0]}`]=k[`margin${K[1]}`]=P}return k});return()=>h("hr",{class:r.value,style:d.value,"aria-orientation":f.value})}});const Ia=h("div",{class:"q-space"});var Ae=Ie({name:"QSpace",setup(){return()=>Ia}});const ve=ca({}),Ba=Object.keys(Ht);var Ue=Ie({name:"QExpansionItem",props:{...Ht,...ka,...We,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ba,"click","afterShow","afterHide"],setup(e,{slots:a,emit:u}){const{proxy:{$q:f}}=Ee(),b=Ge(e,f),x=c(e.modelValue!==null?e.modelValue:e.defaultOpened),r=c(null),d=Bt(),{show:k,hide:P,toggle:K}=wa({showing:x});let U,ee;const Be=p(()=>`q-expansion-item q-item-type q-expansion-item--${x.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),ge=p(()=>{if(e.contentInsetLevel===void 0)return null;const _=f.lang.rtl===!0?"Right":"Left";return{["padding"+_]:e.contentInsetLevel*56+"px"}}),F=p(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),I=p(()=>{const _={};return Ba.forEach(R=>{_[R]=e[R]}),_}),Pe=p(()=>F.value===!0||e.expandIconToggle!==!0),N=p(()=>e.expandedIcon!==void 0&&x.value===!0?e.expandedIcon:e.expandIcon||f.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),X=p(()=>e.disable!==!0&&(F.value===!0||e.expandIconToggle===!0)),C=p(()=>({expanded:x.value===!0,detailsId:e.targetUid,toggle:K,show:k,hide:P})),A=p(()=>{const _=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:f.lang.label[x.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":x.value===!0?"true":"false","aria-controls":d,"aria-label":_}});H(()=>e.group,_=>{ee!==void 0&&ee(),_!==void 0&&L()});function je(_){F.value!==!0&&K(_),u("click",_)}function Ce(_){_.keyCode===13&&Se(_,!0)}function Se(_,R){R!==!0&&r.value!==null&&r.value.focus(),K(_),ga(_)}function Oe(){u("afterShow")}function ke(){u("afterHide")}function L(){U===void 0&&(U=Bt()),x.value===!0&&(ve[e.group]=U);const _=H(x,oe=>{oe===!0?ve[e.group]=U:ve[e.group]===U&&delete ve[e.group]}),R=H(()=>ve[e.group],(oe,Le)=>{Le===U&&oe!==void 0&&oe!==U&&P()});ee=()=>{_(),R(),ve[e.group]===U&&delete ve[e.group],ee=void 0}}function Je(){const _={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},R=[h(q,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&x.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:N.value})];return X.value===!0&&(Object.assign(_,{tabindex:0,...A.value,onClick:Se,onKeyup:Ce}),R.unshift(h("div",{ref:r,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),h(nt,_,()=>R)}function ae(){let _;return a.header!==void 0?_=[].concat(a.header(C.value)):(_=[h(nt,()=>[h(Vt,{lines:e.labelLines},()=>e.label||""),e.caption?h(Vt,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&_[e.switchToggleSide===!0?"push":"unshift"](h(nt,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>h(q,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&_[e.switchToggleSide===!0?"unshift":"push"](Je()),_}function re(){const _={ref:"item",style:e.headerStyle,class:e.headerClass,dark:b.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return Pe.value===!0&&(_.clickable=!0,_.onClick=je,Object.assign(_,F.value===!0?I.value:A.value)),h(na,_,ae)}function be(){return J(h("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:ge.value,id:d},ct(a.default)),[[ha,x.value]])}function Me(){const _=[re(),h(sa,{duration:e.duration,onShow:Oe,onHide:ke},be)];return e.expandSeparator===!0&&_.push(h(xe,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:b.value}),h(xe,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:b.value})),_}return e.group!==void 0&&L(),ma(()=>{ee!==void 0&&ee()}),()=>h("div",{class:Be.value},[h("div",{class:"q-expansion-item__container relative-position"},Me())])}}),Qe=Ie({name:"QList",props:{...We,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:a}){const u=Ee(),f=Ge(e,u.proxy.$q),b=p(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(f.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>h(e.tag,{class:b.value},ct(a.default))}});const Pa=se({name:"SearchComponent",setup(){const e=ie(),a=c("");return{reStore:e,searchTerms:a,searchSize:c(e.preferences.resLimit),searchResults:c([]),promptSearchSize:c(!1)}},mounted(){H(this.reStore.preferences,async(u,f)=>{console.log("watcher ",u,f),this.searchSize=u.resLimit;for(const[x,r]of Object.entries(this.reStore.langVoices))te("#sfi").classed(r.flagName,!1);const b=this.reStore.preferences.langVoiceKey;te("#sfi").classed(this.reStore.langVoices[b].flagName,!0)});const e=this.reStore.preferences.langVoiceKey,a=this.reStore.langVoices[e].flagName;te("#sfi").classed(a,!0)},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchResults.splice(e,1)},load(e){console.log(e),console.log(this.searchResults[e]);const a=this.reStore.preferences.langVoiceKey;console.log("calling loadPageId ",this.searchResults[e].pageid,a),this.reStore.loadPageId(this.searchResults[e].pageid,a),this.reStore.courses.trigger+=1},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("doSearch ",e),this.reStore.wiki.setLang(e.langName);const a=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",a.results.length),this.searchResults=a.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),Oa=s("div",{class:"text-h6"},"Search Results Size",-1),Ma={class:"q-gutter-y-sm column"},La=s("span",{class:"on-right text-h2",id:"sfi"},null,-1),Ha={key:0},Ka={class:"row cardheader ptr justify-between"},Na=["onClick"],Aa={class:"history-remove"};function Ra(e,a,u,f,b,x){return y(),$(W,null,[l(Te,{modelValue:e.promptSearchSize,"onUpdate:modelValue":a[2]||(a[2]=r=>e.promptSearchSize=r),persistent:""},{default:i(()=>[l(O,{style:{"min-width":"350px"}},{default:i(()=>[l(M,{align:"center"},{default:i(()=>[Oa]),_:1}),l(M,{class:"q-pt-none",align:"center"},{default:i(()=>[l(ia,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":a[0]||(a[0]=r=>e.searchSize=r)},null,8,["modelValue"])]),_:1}),l(qe,{align:"center",class:"text-white"},{default:i(()=>[J(l(V,{flat:"",label:"Cancel"},null,512),[[Z]]),J(l(V,{flat:"",label:"Update results size",onClick:a[1]||(a[1]=r=>this.updateSearchSize())},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(O,{flat:""},{default:i(()=>[l(M,null,{default:i(()=>[l(Qe,{padding:"",class:"rounded-borders"},{default:i(()=>[l(Ue,{"header-style":{border:"1px solid gray"},label:"Search & Results"},{default:i(()=>[s("div",Ma,[l(De,{class:"bg-primary text-white rounded-borders q-my-md"},{default:i(()=>[l(V,{dark:"",standout:"",onClick:a[3]||(a[3]=r=>e.promptSearchSize=!0)},{default:i(()=>[T(S(this.searchResults.length)+" ",1),l(Q,null,{default:i(()=>[T("Change results limit ("+S(this.searchSize)+")",1)]),_:1})]),_:1}),La,l(me,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":a[6]||(a[6]=r=>e.searchTerms=r),"input-class":"text-right",class:"q-ml-md",onKeyup:[a[7]||(a[7]=r=>this.update()),a[8]||(a[8]=mt(r=>this.doSearch(),["enter"]))]},{append:i(()=>[e.searchTerms===""?(y(),j(q,{key:0,name:"search",onClick:a[4]||(a[4]=r=>this.doSearch())})):(y(),j(q,{key:1,name:"clear",class:"cursor-pointer",onClick:a[5]||(a[5]=r=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(y(),$("div",Ha,[(y(!0),$(W,null,he(this.searchResults,(r,d)=>(y(),j(O,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":a[9]||(a[9]=k=>this.searchResults=k),key:d},{default:i(()=>[s("div",Ka,[s("span",{class:"history-title col-grow",onClick:k=>this.load(d)},S(d)+". "+S(r.title.slice(0,25)),9,Na),s("span",Aa,[l(q,{class:"primary",size:e.xl,color:e.primary,name:"close",onClick:k=>this.remove(d)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):le("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Ua=ne(Pa,[["render",Ra]]);const Qa=se({name:"CurrentPage",props:{},setup(e){return{reStore:ie(),ck:c("-"),aid:c("-"),pageTitle:c("-"),langVoiceKey:c(),flagName:c("fi fi-gb"),imgIdx:c(0),imgs:c([]),imgTot:c(0),imgFit:c("-"),guideWords:c("-"),mapCoords:c("-"),pageid:c("-"),pctReplace:c(),canonicalUrl:c(),props:e,isCustom:c(null),langNames:c(["en","th","es","fr","it","de","zh","ja","sw","pt","ru","id","ke"]),promptGuideWords:c(!1)}},mounted(){console.log(this.props),H(this.reStore.courses,async(e,a)=>{try{console.log("CurrentPage watcher",this.reStore.courses);const u=this.reStore.courses.pgIdx,f=this.reStore.page;let b,x;if(f){console.log("CurrentPage ",f),x=f.ck,b=f.aid,this.pageTitle=f.pageTitle,this.imgIdx=f.imgIdx,this.imgs=f.imgs,this.imgTot=f.imgs.length,this.imgFit=f.imgFit,this.guideWords=f.guideWords,this.mapCoords=f.mapCoords,this.pageid=f.pageid,this.langVoiceKey=f.langVoiceKey,this.flagName=this.reStore.langVoices[f.langVoiceKey].flagName;for(const[r,d]of Object.entries(this.reStore.langVoices)){const k=d.flagName;ye(".flagicon").classed(k,!1)}ye(".flagicon").classed(this.flagName,!0),this.pctReplace=f.pctReplace,this.canonicalUrl=f.canonicalUrl,this.isCustom=c(this.reStore.page.isCustom)}this.aid=b,this.ck=x}catch(u){console.log(u)}},{immediate:!0,deep:!0})},methods:{updateGuideWords(){console.log("updateGuideWords",this.guideWords),this.reStore.page.guideWords=this.guideWords},langLinkCB(e){console.log(e.url),window.open(e.url,"_blank")},speak(){console.log("CurrentPage.speak",this.reStore),this.reStore.speak()},cycleFitMode(){const e=["scale-down","cover","contain"];let a=e.indexOf(this.imgFit);a+=1,a>e.length-1&&(a=0),this.imgFit=e[a],this.reStore.page.imgFit=this.imgFit,console.log("fit: ",this.imgFit),this.reStore.courses.trigger+=1},nextImg(){this.imgIdx=this.imgIdx+1>this.imgs.length-1?0:this.imgIdx+1,this.reStore.page.imgIdx=this.imgIdx,this.reStore.courses.imgIdx=this.imgIdx,this.reStore.courses.trigger+=1},imgCB(e,a){console.log(e,a),this.reStore.page.imgIdx=e,this.reStore.courses.imgIdx=e,this.reStore.courses.trigger+=1},loadURL(e){console.log("loadURL ",e),window.open(e,"_blank")},mapCB(){const e="https://maps.google.com/?ll="+this.mapCoords.split(",")[0]+","+this.mapCoords.split(",")[1];window.open(e,"_blank")},saveImage(e,a){console.log("saveImage: ",e,a),this.reStore.saveImage(e,a)},saveCurrentImage(){const e=this.imgs[this.imgIdx];console.log("saveCurrentImage: ",e),this.reStore.saveImage(this.imgIdx,e)},remove(e,a){console.log("remove: ",e,a),this.imgs.splice(e,1),this.reStore.page.imgs.splice(e,1)},toggleText(){te("#slideTextDiv").classed("hidden")?ye("#slideTextDiv").classed("hidden",!1):ye("#slideTextDiv").classed("hidden",!0)},addBookmark(){console.log("addBookmark"),this.reStore.saveBookmark()},resetPage(){this.reStore.newPage()},newPage(){console.log("CurrentPage newPageCB "),this.reStore.newPage()},appendPage(){this.reStore.appendPage()},updatePage(){this.reStore.updatePage()},updateType(e,a){this.reStore.page.isCustom=this.isCustom}}}),ja=s("div",{class:"text-h6"},"Guide Words",-1),Fa={class:"text-weight-bolder text-center q-pa-md text-white"},za=s("br",null,null,-1),Ya={style:{border:"1px solid gray","border-radius":"5px"}},Ea={width:"100%"},Wa={style:{width:"50%","text-align":"center"}},Ga={style:{"text-align":"center"}},Ja={style:{"text-align":"center"}},Xa=s("td",{style:{"text-align":"center"}},"Speak Text",-1),Za={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},eo={width:"100%"},to=s("td",null,"Course-Key",-1),ao={style:{width:"50%"}},oo={class:"ptr float-left"},lo=s("td",null,"Assgmnt Id",-1),so={style:{width:"50%"}},no={class:"ptr float-left"},io=s("td",null,"WP Page Id",-1),ro={style:{width:"50%"}},uo=s("td",null,"Language",-1),co={style:{width:"50%"}},mo={class:"q-mt-xs float-right flagicon text-h6"},ho=s("td",null,"Images",-1),go={style:{width:"50%"}},fo=s("td",null,"Image Fit",-1),vo={class:"align-left"},po=s("td",null,"Guide Words",-1),yo={style:{width:"50%"}},_o=s("td",null,"Percent Replace",-1),Co={class:"float-left"},So=s("td",null,"Map Coords",-1),ko={class:"float-left"},bo=s("td",null,"Toggle Text",-1),wo=s("td",null,"Alt Langs",-1),$o=["onClick"],Vo={key:0,style:{cursor:"pointer"}},xo={key:0},Do={class:"row cardheader justify-between"},qo={class:"history-remove"},To={key:0},Io={class:"history-remove ptr"};function Bo(e,a,u,f,b,x){const r=E("router-link");return y(),$(W,null,[l(Te,{modelValue:e.promptGuideWords,"onUpdate:modelValue":a[3]||(a[3]=d=>e.promptGuideWords=d),persistent:""},{default:i(()=>[l(O,{style:{"min-width":"350px"}},{default:i(()=>[l(M,null,{default:i(()=>[ja]),_:1}),l(M,{class:"q-pt-none"},{default:i(()=>[l(me,{dense:"",modelValue:e.guideWords,"onUpdate:modelValue":a[0]||(a[0]=d=>e.guideWords=d),autofocus:"",onKeyup:a[1]||(a[1]=mt(d=>e.promptGuideWords=!1,["enter"]))},null,8,["modelValue"])]),_:1}),l(qe,{align:"right"},{default:i(()=>[J(l(V,{outline:"",label:"Cancel"},null,512),[[Z]]),J(l(V,{outline:"",label:"Update guide words",onClick:a[2]||(a[2]=d=>this.updateGuideWords())},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(O,{flat:""},{default:i(()=>[l(M,null,{default:i(()=>[s("div",Fa,[l(r,{to:"/teacher/editor",class:"text-white"},{default:i(()=>[T(S(this.pageTitle.slice(0,20)),1)]),_:1}),za,l(q,{class:"on-right",name:"replay",onClick:this.resetPage,size:"sm"},null,8,["onClick"]),l(q,{class:"on-right",name:"add_circle",onClick:this.newPage,size:"sm"},null,8,["onClick"]),l(q,{class:"on-right",name:"publish",onClick:this.updatePage,size:"sm"},{default:i(()=>[l(Q,null,{default:i(()=>[T("Update current page")]),_:1})]),_:1},8,["onClick"]),l(q,{class:"on-right",name:"publish",onClick:this.appendPage,size:"sm"},{default:i(()=>[l(Q,null,{default:i(()=>[T("Push as new page")]),_:1})]),_:1},8,["onClick"])]),s("div",Ya,[s("table",Ea,[s("tr",null,[s("td",Wa,[l(qa,{modelValue:e.isCustom,"onUpdate:modelValue":[a[4]||(a[4]=d=>e.isCustom=d),this.updateType],color:"accent"},null,8,["modelValue","onUpdate:modelValue"])]),s("td",Ga,[l(V,{round:"",class:"q-pa-md",icon:"volume_up",color:"secondary",onClick:a[5]||(a[5]=d=>this.speak())})])]),s("tr",null,[s("td",Ja,S(e.isCustom===!0?"Custom":"Random"),1),Xa])])]),s("div",Za,[s("table",eo,[s("tr",null,[to,s("td",ao,[s("a",oo,S(this.ck),1)])]),s("tr",null,[lo,s("td",so,[s("a",no,S(this.aid),1)])]),s("tr",null,[io,s("td",ro,[s("a",{class:"ptr float-left",onClick:a[6]||(a[6]=d=>this.loadURL(this.canonicalUrl))},S(this.pageid),1),l(q,{name:"bookmark",onClick:this.addBookmark,class:"float-right"},null,8,["onClick"])])]),s("tr",null,[uo,s("td",co,[s("span",mo,[l(Q,{class:"float-left"},{default:i(()=>[T(S(this.langVoiceKey),1)]),_:1})])])]),s("tr",null,[ho,s("td",go,[s("span",{onClick:a[7]||(a[7]=(...d)=>this.nextImg&&this.nextImg(...d)),class:"ptr float-left"},S(this.imgIdx+1)+" / "+S(this.imgTot),1),s("span",{class:"float-right ptr",onClick:a[8]||(a[8]=(...d)=>this.saveCurrentImage&&this.saveCurrentImage(...d))},[l(q,{name:"bookmark"})])])]),s("tr",{class:"ptr",onClick:a[9]||(a[9]=(...d)=>this.cycleFitMode&&this.cycleFitMode(...d))},[fo,s("td",null,[s("span",vo,S(this.imgFit),1),l(q,{class:"float-right",name:"fit_screen"})])]),s("tr",null,[po,s("td",yo,[T(S(this.guideWords.replaceAll(",",", "))+" ",1),l(q,{class:"float-right",name:"tune",onClick:a[10]||(a[10]=d=>this.promptGuideWords=!0)})])]),s("tr",null,[_o,s("td",null,[s("span",Co,S(this.pctReplace)+" %",1),l(q,{class:"float-right",name:"tune"})])]),s("tr",null,[So,s("td",{onClick:a[11]||(a[11]=(...d)=>this.mapCB&&this.mapCB(...d)),class:"ptr"},[s("span",ko,S(this.mapCoords),1),l(q,{class:"float-right",name:"place"})])]),s("tr",null,[bo,s("td",{onClick:a[12]||(a[12]=(...d)=>this.toggleText&&this.toggleText(...d)),class:"ptr"},[l(q,{class:"float-right",name:"article"})])]),s("tr",null,[wo,s("td",null,[(y(!0),$(W,null,he(this.reStore.currentLangLinks,(d,k)=>(y(),$("span",{key:k,onClick:P=>this.langLinkCB(d)},[this.langNames.indexOf(d.lang)>-1?(y(),$("span",Vo,[s("u",null,S(d.lang),1),T(",\xA0 ")])):le("",!0)],8,$o))),128))])])])])]),_:1})]),_:1}),l(O,{flat:""},{default:i(()=>[l(M,null,{default:i(()=>[l(Qe,{padding:"",class:"rounded-borders"},{default:i(()=>[l(Ue,{"header-style":{border:"1px solid gray"},label:"Page Images"},{default:i(()=>[this.imgs.length?(y(),$("div",xo,[(y(!0),$(W,null,he(this.imgs,(d,k)=>(y(),j(O,{bordered:"",class:"q-ma-sm",flat:"",modelValue:this.imgs,"onUpdate:modelValue":a[13]||(a[13]=P=>this.imgs=P),key:k},{default:i(()=>[s("div",Do,[s("span",qo,[l(q,{name:"bookmark",onClick:P=>this.saveImage(k,d)},null,8,["onClick"]),l(q,{name:"article",onClick:this.toggleText},{default:i(()=>[l(Q,null,{default:i(()=>[T("Convenience button to toggle current text ")]),_:1})]),_:1},8,["onClick"]),l(q,{name:"fit_screen",onClick:this.cycleFitMode},{default:i(()=>[l(Q,null,{default:i(()=>[T("Convenience button to toggle current image-fit mode ")]),_:1})]),_:1},8,["onClick"])]),d.cap?(y(),$("span",To,S(d.cap.slice(0,25)),1)):le("",!0),s("span",Io,[l(q,{name:"close",onClick:P=>this.remove(k,d)},null,8,["onClick"])])]),l(Re,{class:"cardimage",onClick:P=>this.imgCB(k,d),src:d.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])):le("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Po=ne(Qa,[["render",Bo]]);const Oo=se({name:"ImagesComponent",setup(){return{reStore:ie(),newCap:c(""),newDesc:c(""),newName:c(""),newSource:c(""),newUrl:c(""),promptAddImage:c(!1)}},mounted(){H(this.reStore.userSnapshot.images,async(e,a)=>{console.log("watcher ",e,a)})},methods:{addImageCB(){console.log("addImageCB",this.newUrl);const e={name:this.newName,desc:this.newDesc,cap:this.newCap,source:this.newSource,url:this.newUrl};this.reStore.saveImage(null,e)},imgCB(e,a){this.reStore.router.push("/teacher/editor"),console.log(e,a),this.reStore.loadImgId(e)},remove(e,a){console.log(e,a),this.reStore.removeImage(e)}}}),Mo={class:"row cardheader justify-between"},Lo={class:"history-remove hidden"},Ho={key:0},Ko={class:"history-remove ptr"};function No(e,a,u,f,b,x){return y(),$(W,null,[l(Te,{modelValue:e.promptAddImage,"onUpdate:modelValue":a[5]||(a[5]=r=>e.promptAddImage=r)},{default:i(()=>[l(O,null,{default:i(()=>[l(M,null,{default:i(()=>[l(me,{modelValue:e.newCap,"onUpdate:modelValue":a[0]||(a[0]=r=>e.newCap=r),label:"caption"},null,8,["modelValue"]),l(me,{modelValue:e.newDesc,"onUpdate:modelValue":a[1]||(a[1]=r=>e.newDesc=r),label:"description"},null,8,["modelValue"]),l(me,{modelValue:e.newName,"onUpdate:modelValue":a[2]||(a[2]=r=>e.newName=r),label:"name"},null,8,["modelValue"]),l(me,{modelValue:e.newSource,"onUpdate:modelValue":a[3]||(a[3]=r=>e.newSource=r),label:"source"},null,8,["modelValue"]),l(me,{modelValue:e.newUrl,"onUpdate:modelValue":a[4]||(a[4]=r=>e.newUrl=r),label:"url"},null,8,["modelValue"])]),_:1}),l(qe,{align:"center",class:"text-white"},{default:i(()=>[J(l(V,{flat:"",label:"Cancel"},null,512),[[Z]]),J(l(V,{flat:"",label:"Add",onClick:this.addImageCB},null,8,["onClick"]),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(O,{flat:""},{default:i(()=>[l(M,null,{default:i(()=>[l(Qe,{padding:"",class:"rounded-borders"},{default:i(()=>[l(Ue,{"header-style":{border:"1px solid gray"},label:"My Images"},{default:i(()=>[l(De,{class:"bg-primary text-white rounded-borders q-my-md"},{default:i(()=>[l(V,{bordered:"","no-caps":"",standout:"",onClick:a[6]||(a[6]=r=>e.promptAddImage=!0)},{default:i(()=>[T(" Add Image "),l(Q,null,{default:i(()=>[T("Add a custom image (only saves url, not image data)")]),_:1})]),_:1})]),_:1}),s("div",null,[(y(!0),$(W,null,he(this.reStore.userSnapshot.images,(r,d)=>(y(),j(O,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":a[7]||(a[7]=k=>this.reStore.userSnapshot.images=k),key:d},{default:i(()=>[s("div",Mo,[s("span",Lo,[l(q)]),r.desc?(y(),$("span",Ho,S(r.url.slice(0,25)),1)):le("",!0),s("span",Ko,[l(q,{name:"close",onClick:k=>this.remove(d,r)},null,8,["onClick"])])]),l(Re,{class:"cardimage",onClick:k=>this.imgCB(d,r),src:r.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Ao=ne(Oo,[["render",No]]);const Ro=se({name:"BookmarksComponent",setup(){return{reStore:ie()}},mounted(){H(this.reStore.userSnapshot.bookmarks,async(e,a)=>{console.log("watcher ",e,a)})},methods:{imgCB(e,a){this.reStore.router.push("/teacher/editor"),console.log(e,a),this.reStore.page=a,this.reStore.courses.imgIdx=a.imgIdx,this.reStore.courses.trigger+=1,this.reStore.courses.pageid=a.pageid},remove(e,a){console.log(e,a),this.reStore.removeBookmark(e)}}}),Uo={class:"row cardheader justify-between"},Qo={class:"history-remove hidden"},jo={key:0,class:"fi fi-gb"},Fo={key:1,class:"fi fi-us"},zo={key:2,class:"fi fi-mx"},Yo={key:3,class:"fi fi-fr"},Eo={key:4,class:"fi fi-de"},Wo={key:5,class:"fi fi-it"},Go={key:6,class:"fi fi-br"},Jo={key:7,class:"fi fi-ke"},Xo={key:8,class:"fi fi-ru"},Zo={key:9,class:"fi fi-th"},el={key:10,class:"fi fi-cn"},tl={key:11,class:"fi fi-hk"},al={key:12,class:"fi fi-tw"},ol={key:13,class:"fi fi-kr"},ll={key:14,class:"fi fi-jp"},sl={key:15,class:"fi fi-id"},nl={key:16,class:"fi fi-xx"},il={class:"history-remove ptr"};function rl(e,a,u,f,b,x){return y(),j(O,{flat:""},{default:i(()=>[l(M,null,{default:i(()=>[l(Qe,{padding:"",class:"rounded-borders"},{default:i(()=>[l(Ue,{"header-style":{border:"1px solid gray"},label:"My bookmarks"},{default:i(()=>[s("div",null,[(y(!0),$(W,null,he(this.reStore.userSnapshot.bookmarks,(r,d)=>(y(),j(O,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":a[0]||(a[0]=k=>this.reStore.userSnapshot.bookmarks=k),key:d},{default:i(()=>[s("div",Uo,[s("span",Qo,[l(q)]),r.langVoiceKey==="Eng-UK-Fem"?(y(),$("span",jo)):r.langVoiceKey==="Eng-US"?(y(),$("span",Fo)):r.langVoiceKey==="espa\xF1ol"?(y(),$("span",zo)):r.langVoiceKey==="fran\xE7ais"?(y(),$("span",Yo)):r.langVoiceKey==="Deutsch"?(y(),$("span",Eo)):r.langVoiceKey==="italiano"?(y(),$("span",Wo)):r.langVoiceKey==="portugu\xEAs do Brasil"?(y(),$("span",Go)):r.langVoiceKey==="Kiswahili"?(y(),$("span",Jo)):r.langVoiceKey==="\u0440\u0443\u0441\u0441\u043A\u0438\u0439"?(y(),$("span",Xo)):r.langVoiceKey==="\u0E44\u0E17\u0E22"?(y(),$("span",Zo)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09"?(y(),$("span",el)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09"?(y(),$("span",tl)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09"?(y(),$("span",al)):r.langVoiceKey==="\uD55C\uAD6D\uC758"?(y(),$("span",ol)):r.langVoiceKey==="\u65E5\u672C\u8A9E"?(y(),$("span",ll)):r.langVoiceKey==="Bahasa Indonesia"?(y(),$("span",sl)):(y(),$("span",nl)),T(" "+S(r.pageTitle.slice(0,25))+" ",1),s("span",il,[l(q,{name:"close",onClick:k=>this.remove(d,r)},null,8,["onClick"])])]),l(Re,{class:"cardimage",onClick:k=>this.imgCB(d,r),src:r.imgs[r.imgIdx].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var dl=ne(Ro,[["render",rl]]);const ul=["gregorian","persian"],cl={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>ul.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},ml=["update:modelValue"];function ue(e){return e.year+"/"+_e(e.month)+"/"+_e(e.day)}function hl(e,a){const u=p(()=>e.disable!==!0&&e.readonly!==!0),f=p(()=>e.editable===!0?0:-1),b=p(()=>{const d=[];return e.color!==void 0&&d.push(`bg-${e.color}`),e.textColor!==void 0&&d.push(`text-${e.textColor}`),d.join(" ")});function x(){return e.locale!==void 0?{...a.lang.date,...e.locale}:a.lang.date}function r(d){const k=new Date,P=d===!0?null:0;if(e.calendar==="persian"){const K=$a(k);return{year:K.jy,month:K.jm,day:K.jd}}return{year:k.getFullYear(),month:k.getMonth()+1,day:k.getDate(),hour:P,minute:P,second:P,millisecond:P}}return{editable:u,tabindex:f,headerClass:b,getLocale:x,getCurrentDate:r}}const pe=20,gl=["Calendar","Years","Months"],Mt=e=>gl.includes(e),ut=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Ve=" \u2014 ";function ce(e){return e.year+"/"+_e(e.month)}var fl=Ie({name:"QDate",props:{...cl,...aa,...We,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:ut},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:ut},navigationMaxYearMonth:{type:String,validator:ut},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Mt}},emits:[...ml,"rangeStart","rangeEnd","navigation"],setup(e,{slots:a,emit:u}){const{proxy:f}=Ee(),{$q:b}=f,x=Ge(e,b),{getCache:r}=ra(),{tabindex:d,headerClass:k,getLocale:P,getCurrentDate:K}=hl(e,b);let U;const ee=oa(e),Be=la(ee),ge=c(null),F=c(_t()),I=c(P()),Pe=p(()=>_t()),N=p(()=>P()),X=p(()=>K()),C=c(Ct(F.value,I.value)),A=c(e.defaultView),je=b.lang.rtl===!0?"right":"left",Ce=c(je.value),Se=c(je.value),Oe=C.value.year,ke=c(Oe-Oe%pe-(Oe<0?pe:0)),L=c(null),Je=p(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(x.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),ae=p(()=>e.color||"primary"),re=p(()=>e.textColor||"white"),be=p(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Me=p(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),_=p(()=>Me.value.filter(t=>typeof t=="string").map(t=>et(t,F.value,I.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),R=p(()=>{const t=o=>et(o,F.value,I.value);return Me.value.filter(o=>fa(o)===!0&&o.from!==void 0&&o.to!==void 0).map(o=>({from:t(o.from),to:t(o.to)})).filter(o=>o.from.dateHash!==null&&o.to.dateHash!==null&&o.from.dateHash<o.to.dateHash)}),oe=p(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const o=Pt(t.year,t.month,t.day);return new Date(o.gy,o.gm-1,o.gd)}),Le=p(()=>e.calendar==="persian"?ue:(t,o,n)=>Va(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),o===void 0?F.value:o,n===void 0?I.value:n,t.year,t.timezoneOffset)),He=p(()=>_.value.length+R.value.reduce((t,o)=>t+1+xa(oe.value(o.to),oe.value(o.from)),0)),ht=p(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(L.value!==null){const n=L.value.init,g=oe.value(n);return I.value.daysShort[g.getDay()]+", "+I.value.monthsShort[n.month-1]+" "+n.day+Ve+"?"}if(He.value===0)return Ve;if(He.value>1)return`${He.value} ${I.value.pluralDay}`;const t=_.value[0],o=oe.value(t);return isNaN(o.valueOf())===!0?Ve:I.value.headerTitle!==void 0?I.value.headerTitle(o,t):I.value.daysShort[o.getDay()]+", "+I.value.monthsShort[t.month-1]+" "+t.day}),Kt=p(()=>_.value.concat(R.value.map(o=>o.from)).sort((o,n)=>o.year-n.year||o.month-n.month)[0]),Nt=p(()=>_.value.concat(R.value.map(o=>o.to)).sort((o,n)=>n.year-o.year||n.month-o.month)[0]),gt=p(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(He.value===0)return Ve;if(He.value>1){const t=Kt.value,o=Nt.value,n=I.value.monthsShort;return n[t.month-1]+(t.year!==o.year?" "+t.year+Ve+n[o.month-1]+" ":t.month!==o.month?Ve+n[o.month-1]:"")+" "+o.year}return _.value[0].year}),Fe=p(()=>{const t=[b.iconSet.datetime.arrowLeft,b.iconSet.datetime.arrowRight];return b.lang.rtl===!0?t.reverse():t}),ft=p(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):I.value.firstDayOfWeek),At=p(()=>{const t=I.value.daysShort,o=ft.value;return o>0?t.slice(o,7).concat(t.slice(0,o)):t}),de=p(()=>{const t=C.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():rt(t.year,t.month)}),Rt=p(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),z=p(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Y=p(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Xe=p(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return z.value!==null&&z.value.year>=C.value.year&&(t.year.prev=!1,z.value.year===C.value.year&&z.value.month>=C.value.month&&(t.month.prev=!1)),Y.value!==null&&Y.value.year<=C.value.year&&(t.year.next=!1,Y.value.year===C.value.year&&Y.value.month<=C.value.month&&(t.month.next=!1)),t}),ze=p(()=>{const t={};return _.value.forEach(o=>{const n=ce(o);t[n]===void 0&&(t[n]=[]),t[n].push(o.day)}),t}),vt=p(()=>{const t={};return R.value.forEach(o=>{const n=ce(o.from),g=ce(o.to);if(t[n]===void 0&&(t[n]=[]),t[n].push({from:o.from.day,to:n===g?o.to.day:void 0,range:o}),n<g){let m;const{year:D,month:v}=o.from,w=v<12?{year:D,month:v+1}:{year:D+1,month:1};for(;(m=ce(w))<=g;)t[m]===void 0&&(t[m]=[]),t[m].push({from:void 0,to:m===g?o.to.day:void 0,range:o}),w.month++,w.month>12&&(w.year++,w.month=1)}}),t}),Ke=p(()=>{if(L.value===null)return;const{init:t,initHash:o,final:n,finalHash:g}=L.value,[m,D]=o<=g?[t,n]:[n,t],v=ce(m),w=ce(D);if(v!==G.value&&w!==G.value)return;const B={};return v===G.value?(B.from=m.day,B.includeFrom=!0):B.from=1,w===G.value?(B.to=D.day,B.includeTo=!0):B.to=de.value,B}),G=p(()=>ce(C.value)),Ut=p(()=>{const t={};if(e.options===void 0){for(let n=1;n<=de.value;n++)t[n]=!0;return t}const o=typeof e.options=="function"?e.options:n=>e.options.includes(n);for(let n=1;n<=de.value;n++){const g=G.value+"/"+_e(n);t[n]=o(g)}return t}),Qt=p(()=>{const t={};if(e.events===void 0)for(let o=1;o<=de.value;o++)t[o]=!1;else{const o=typeof e.events=="function"?e.events:n=>e.events.includes(n);for(let n=1;n<=de.value;n++){const g=G.value+"/"+_e(n);t[n]=o(g)===!0&&Rt.value(g)}}return t}),jt=p(()=>{let t,o;const{year:n,month:g}=C.value;if(e.calendar!=="persian")t=new Date(n,g-1,1),o=new Date(n,g-1,0).getDate();else{const m=Pt(n,g,1);t=new Date(m.gy,m.gm-1,m.gd);let D=g-1,v=n;D===0&&(D=12,v--),o=rt(v,D)}return{days:t.getDay()-ft.value-1,endDay:o}}),pt=p(()=>{const t=[],{days:o,endDay:n}=jt.value,g=o<0?o+7:o;if(g<6)for(let v=n-g;v<=n;v++)t.push({i:v,fill:!0});const m=t.length;for(let v=1;v<=de.value;v++){const w={i:v,event:Qt.value[v],classes:[]};Ut.value[v]===!0&&(w.in=!0,w.flat=!0),t.push(w)}if(ze.value[G.value]!==void 0&&ze.value[G.value].forEach(v=>{const w=m+v-1;Object.assign(t[w],{selected:!0,unelevated:!0,flat:!1,color:ae.value,textColor:re.value})}),vt.value[G.value]!==void 0&&vt.value[G.value].forEach(v=>{if(v.from!==void 0){const w=m+v.from-1,B=m+(v.to||de.value)-1;for(let st=w;st<=B;st++)Object.assign(t[st],{range:v.range,unelevated:!0,color:ae.value,textColor:re.value});Object.assign(t[w],{rangeFrom:!0,flat:!1}),v.to!==void 0&&Object.assign(t[B],{rangeTo:!0,flat:!1})}else if(v.to!==void 0){const w=m+v.to-1;for(let B=m;B<=w;B++)Object.assign(t[B],{range:v.range,unelevated:!0,color:ae.value,textColor:re.value});Object.assign(t[w],{flat:!1,rangeTo:!0})}else{const w=m+de.value-1;for(let B=m;B<=w;B++)Object.assign(t[B],{range:v.range,unelevated:!0,color:ae.value,textColor:re.value})}}),Ke.value!==void 0){const v=m+Ke.value.from-1,w=m+Ke.value.to-1;for(let B=v;B<=w;B++)t[B].color=ae.value,t[B].editRange=!0;Ke.value.includeFrom===!0&&(t[v].editRangeFrom=!0),Ke.value.includeTo===!0&&(t[w].editRangeTo=!0)}C.value.year===X.value.year&&C.value.month===X.value.month&&(t[m+X.value.day-1].today=!0);const D=t.length%7;if(D>0){const v=7-D;for(let w=1;w<=v;w++)t.push({i:w,fill:!0})}return t.forEach(v=>{let w="q-date__calendar-item ";v.fill===!0?w+="q-date__calendar-item--fill":(w+=`q-date__calendar-item--${v.in===!0?"in":"out"}`,v.range!==void 0&&(w+=` q-date__range${v.rangeTo===!0?"-to":v.rangeFrom===!0?"-from":""}`),v.editRange===!0&&(w+=` q-date__edit-range${v.editRangeFrom===!0?"-from":""}${v.editRangeTo===!0?"-to":""}`),(v.range!==void 0||v.editRange===!0)&&(w+=` text-${v.color}`)),v.classes=w}),t}),Ft=p(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});H(()=>e.modelValue,t=>{if(U===t)U=0;else{const{year:o,month:n}=Ct(F.value,I.value);we(o,n)}}),H(A,()=>{ge.value!==null&&f.$el.contains(document.activeElement)===!0&&ge.value.focus()}),H(()=>C.value.year,t=>{u("navigation",{year:t,month:C.value.month})}),H(()=>C.value.month,t=>{u("navigation",{year:C.value.year,month:t})}),H(Pe,t=>{$t(t,I.value,"mask"),F.value=t}),H(N,t=>{$t(F.value,t,"locale"),I.value=t});function yt(){const t=X.value,o=ze.value[ce(t)];(o===void 0||o.includes(t.day)===!1)&&at(t),Ze(t.year,t.month)}function zt(t){Mt(t)===!0&&(A.value=t)}function Yt(t,o){["month","year"].includes(t)&&(t==="month"?kt:tt)(o===!0?-1:1)}function Ze(t,o){A.value="Calendar",we(t,o)}function Et(t,o){if(e.range===!1||!t){L.value=null;return}const n=Object.assign({...C.value},t),g=o!==void 0?Object.assign({...C.value},o):n;L.value={init:n,initHash:ue(n),final:g,finalHash:ue(g)},Ze(n.year,n.month)}function _t(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function et(t,o,n){return Da(t,o,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Ct(t,o){const n=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(n.length===0)return St();const g=n[n.length-1],m=et(g.from!==void 0?g.from:g,t,o);return m.dateHash===null?St():m}function St(){let t,o;if(e.defaultYearMonth!==void 0){const n=e.defaultYearMonth.split("/");t=parseInt(n[0],10),o=parseInt(n[1],10)}else{const n=X.value!==void 0?X.value:K();t=n.year,o=n.month}return{year:t,month:o,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+_e(o)+"/01"}}function kt(t){let o=C.value.year,n=Number(C.value.month)+t;n===13?(n=1,o++):n===0&&(n=12,o--),we(o,n),be.value===!0&&Ye("month")}function tt(t){const o=Number(C.value.year)+t;we(o,C.value.month),be.value===!0&&Ye("year")}function Wt(t){we(t,C.value.month),A.value=e.defaultView==="Years"?"Months":"Calendar",be.value===!0&&Ye("year")}function Gt(t){we(C.value.year,t),A.value="Calendar",be.value===!0&&Ye("month")}function Jt(t,o){const n=ze.value[o];(n!==void 0&&n.includes(t.day)===!0?ot:at)(t)}function fe(t){return{year:t.year,month:t.month,day:t.day}}function we(t,o){z.value!==null&&t<=z.value.year&&(t=z.value.year,o<z.value.month&&(o=z.value.month)),Y.value!==null&&t>=Y.value.year&&(t=Y.value.year,o>Y.value.month&&(o=Y.value.month));const n=t+"/"+_e(o)+"/01";n!==C.value.dateHash&&(Ce.value=C.value.dateHash<n==(b.lang.rtl!==!0)?"left":"right",t!==C.value.year&&(Se.value=Ce.value),Dt(()=>{ke.value=t-t%pe-(t<0?pe:0),Object.assign(C.value,{year:t,month:o,day:1,dateHash:n})}))}function bt(t,o,n){const g=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;U=g;const{reason:m,details:D}=wt(o,n);u("update:modelValue",g,m,D)}function Ye(t){const o=_.value[0]!==void 0&&_.value[0].dateHash!==null?{..._.value[0]}:{...C.value};Dt(()=>{o.year=C.value.year,o.month=C.value.month;const n=e.calendar!=="persian"?new Date(o.year,o.month,0).getDate():rt(o.year,o.month);o.day=Math.min(Math.max(1,o.day),n);const g=$e(o);U=g;const{details:m}=wt("",o);u("update:modelValue",g,t,m)})}function wt(t,o){return o.from!==void 0?{reason:`${t}-range`,details:{...fe(o.target),from:fe(o.from),to:fe(o.to)}}:{reason:`${t}-day`,details:fe(o)}}function $e(t,o,n){return t.from!==void 0?{from:Le.value(t.from,o,n),to:Le.value(t.to,o,n)}:Le.value(t,o,n)}function at(t){let o;if(e.multiple===!0)if(t.from!==void 0){const n=ue(t.from),g=ue(t.to),m=_.value.filter(v=>v.dateHash<n||v.dateHash>g),D=R.value.filter(({from:v,to:w})=>w.dateHash<n||v.dateHash>g);o=m.concat(D).concat(t).map(v=>$e(v))}else{const n=Me.value.slice();n.push($e(t)),o=n}else o=$e(t);bt(o,"add",t)}function ot(t){if(e.noUnset===!0)return;let o=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const n=$e(t);t.from!==void 0?o=e.modelValue.filter(g=>g.from!==void 0?g.from!==n.from&&g.to!==n.to:!0):o=e.modelValue.filter(g=>g!==n),o.length===0&&(o=null)}bt(o,"remove",t)}function $t(t,o,n){const g=_.value.concat(R.value).map(m=>$e(m,t,o)).filter(m=>m.from!==void 0?m.from.dateHash!==null&&m.to.dateHash!==null:m.dateHash!==null);u("update:modelValue",(e.multiple===!0?g:g[0])||null,n)}function Xt(){if(e.minimal!==!0)return h("div",{class:"q-date__header "+k.value},[h("div",{class:"relative-position"},[h(Ne,{name:"q-transition--fade"},()=>h("div",{key:"h-yr-"+gt.value,class:"q-date__header-subtitle q-date__header-link "+(A.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:d.value,...r("vY",{onClick(){A.value="Years"},onKeyup(t){t.keyCode===13&&(A.value="Years")}})},[gt.value]))]),h("div",{class:"q-date__header-title relative-position flex no-wrap"},[h("div",{class:"relative-position col"},[h(Ne,{name:"q-transition--fade"},()=>h("div",{key:"h-sub"+ht.value,class:"q-date__header-title-label q-date__header-link "+(A.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:d.value,...r("vC",{onClick(){A.value="Calendar"},onKeyup(t){t.keyCode===13&&(A.value="Calendar")}})},[ht.value]))]),e.todayBtn===!0?h(V,{class:"q-date__header-today self-start",icon:b.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:d.value,onClick:yt}):null])])}function lt({label:t,type:o,key:n,dir:g,goTo:m,boundaries:D,cls:v}){return[h("div",{class:"row items-center q-date__arrow"},[h(V,{round:!0,dense:!0,size:"sm",flat:!0,icon:Fe.value[0],tabindex:d.value,disable:D.prev===!1,...r("go-#"+o,{onClick(){m(-1)}})})]),h("div",{class:"relative-position overflow-hidden flex flex-center"+v},[h(Ne,{name:"q-transition--jump-"+g},()=>h("div",{key:n},[h(V,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:d.value,...r("view#"+o,{onClick:()=>{A.value=o}})})]))]),h("div",{class:"row items-center q-date__arrow"},[h(V,{round:!0,dense:!0,size:"sm",flat:!0,icon:Fe.value[1],tabindex:d.value,disable:D.next===!1,...r("go+#"+o,{onClick(){m(1)}})})])]}const Zt={Calendar:()=>[h("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[h("div",{class:"q-date__navigation row items-center no-wrap"},lt({label:I.value.months[C.value.month-1],type:"Months",key:C.value.month,dir:Ce.value,goTo:kt,boundaries:Xe.value.month,cls:" col"}).concat(lt({label:C.value.year,type:"Years",key:C.value.year,dir:Se.value,goTo:tt,boundaries:Xe.value.year,cls:""}))),h("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},At.value.map(t=>h("div",{class:"q-date__calendar-item"},[h("div",t)]))),h("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[h(Ne,{name:"q-transition--slide-"+Ce.value},()=>h("div",{key:G.value,class:"q-date__calendar-days fit"},pt.value.map(t=>h("div",{class:t.classes},[t.in===!0?h(V,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:d.value,...r("day#"+t.i,{onClick:()=>{ea(t.i)},onMouseover:()=>{ta(t.i)}})},t.event!==!1?()=>h("div",{class:"q-date__event bg-"+t.event}):null):h("div",""+t.i)]))))])])],Months(){const t=C.value.year===X.value.year,o=g=>z.value!==null&&C.value.year===z.value.year&&z.value.month>g||Y.value!==null&&C.value.year===Y.value.year&&Y.value.month<g,n=I.value.monthsShort.map((g,m)=>{const D=C.value.month===m+1;return h("div",{class:"q-date__months-item flex flex-center"},[h(V,{class:t===!0&&X.value.month===m+1?"q-date__today":null,flat:D!==!0,label:g,unelevated:D,color:D===!0?ae.value:null,textColor:D===!0?re.value:null,tabindex:d.value,disable:o(m+1),...r("month#"+m,{onClick:()=>{Gt(m+1)}})})])});return e.yearsInMonthView===!0&&n.unshift(h("div",{class:"row no-wrap full-width"},[lt({label:C.value.year,type:"Years",key:C.value.year,dir:Se.value,goTo:tt,boundaries:Xe.value.year,cls:" col"})])),h("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const t=ke.value,o=t+pe,n=[],g=m=>z.value!==null&&z.value.year>m||Y.value!==null&&Y.value.year<m;for(let m=t;m<=o;m++){const D=C.value.year===m;n.push(h("div",{class:"q-date__years-item flex flex-center"},[h(V,{key:"yr"+m,class:X.value.year===m?"q-date__today":null,flat:!D,label:m,dense:!0,unelevated:D,color:D===!0?ae.value:null,textColor:D===!0?re.value:null,tabindex:d.value,disable:g(m),...r("yr#"+m,{onClick:()=>{Wt(m)}})})]))}return h("div",{class:"q-date__view q-date__years flex flex-center"},[h("div",{class:"col-auto"},[h(V,{round:!0,dense:!0,flat:!0,icon:Fe.value[0],tabindex:d.value,disable:g(t),...r("y-",{onClick:()=>{ke.value-=pe}})})]),h("div",{class:"q-date__years-content col self-stretch row items-center"},n),h("div",{class:"col-auto"},[h(V,{round:!0,dense:!0,flat:!0,icon:Fe.value[1],tabindex:d.value,disable:g(o),...r("y+",{onClick:()=>{ke.value+=pe}})})])])}};function ea(t){const o={...C.value,day:t};if(e.range===!1){Jt(o,G.value);return}if(L.value===null){const n=pt.value.find(m=>m.fill!==!0&&m.i===t);if(e.noUnset!==!0&&n.range!==void 0){ot({target:o,from:n.range.from,to:n.range.to});return}if(n.selected===!0){ot(o);return}const g=ue(o);L.value={init:o,initHash:g,final:o,finalHash:g},u("rangeStart",fe(o))}else{const n=L.value.initHash,g=ue(o),m=n<=g?{from:L.value.init,to:o}:{from:o,to:L.value.init};L.value=null,at(n===g?o:{target:o,...m}),u("rangeEnd",{from:fe(m.from),to:fe(m.to)})}}function ta(t){if(L.value!==null){const o={...C.value,day:t};Object.assign(L.value,{final:o,finalHash:ue(o)})}}return Object.assign(f,{setToday:yt,setView:zt,offsetCalendar:Yt,setCalendarTo:Ze,setEditingRange:Et}),()=>{const t=[h("div",{class:"q-date__content col relative-position"},[h(Ne,{name:"q-transition--fade"},Zt[A.value])])],o=ct(a.default);return o!==void 0&&t.push(h("div",{class:"q-date__actions"},o)),e.name!==void 0&&e.disable!==!0&&Be(t,"push"),h("div",{class:Je.value,...Ft.value},[Xt(),h("div",{ref:ge,class:"q-date__main col column",tabindex:-1},t)])}}});const vl=["top","middle","bottom"];var pl=Ie({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>vl.includes(e)}},setup(e,{slots:a}){const u=p(()=>e.align!==void 0?{verticalAlign:e.align}:null),f=p(()=>{const b=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(b!==void 0?` text-${b}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>h("div",{class:f.value,style:u.value,role:"status","aria-label":e.label},va(a.default,e.label!==void 0?[e.label]:[]))}});const yl=se({name:"OTDComponent",setup(){const e=ie(),a=Date.now(),u=Ot.formatDate(a,"MM/DD");return{reStore:e,otditems:c([]),promptOTDDate:c(!1),otddate:c(Date.now()),otdlabel:c(u),otdtype:c("selected")}},mounted(){this.init(),H(this.reStore.preferences,async(e,a)=>{console.log("OTD watcher"),e.langVoiceKey!==a.langVoiceKey?this.init():(console.log("OTD watcher ",e),this.init())})},methods:{async init(){console.log("OTD init");const e=this.reStore.preferences.langVoiceKey;await this.reStore.wiki.setLang(this.reStore.langVoices[e].langName);const a=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=a[this.otdtype],console.log(this.otditems);for(const[f,b]of Object.entries(this.reStore.langVoices)){const x=b.flagName;te("#otdfi").classed(x,!1)}const u=this.reStore.langVoices[e].flagName;te("#otdfi").classed(u,!0)},async loadPageId(e){console.log("loadPageId ",e);const a=this.reStore.preferences.langVoiceKey;console.log("OTD load ",a),this.reStore.loadPageId(e,a),this.reStore.router.push("/teacher/editor")},async load(e){console.log("load",this.otditems[e].text),console.log("load",this.otditems[e]);const a=this.reStore.preferences.langVoiceKey;console.log("OTD load ",a),this.reStore.loadPageId(this.otditems[e].pages[0].pageid,a),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const e=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=e.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=Ot.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(e){console.log("otdOptionsCB",this.otdtype);const a=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=a[this.otdtype]}}}),_l=s("div",{class:"text-h6"},"Select Date",-1),Cl={class:"q-gutter-y-sm column"},Sl=s("span",{id:"otdfi",class:"pfi text-h4"},null,-1),kl={class:""},bl=["onClick"],wl=s("br",null,null,-1);function $l(e,a,u,f,b,x){return y(),$(W,null,[l(Te,{modelValue:e.promptOTDDate,"onUpdate:modelValue":a[2]||(a[2]=r=>e.promptOTDDate=r),persistent:""},{default:i(()=>[l(O,{style:{"min-width":"350px"}},{default:i(()=>[l(M,{align:"center"},{default:i(()=>[_l]),_:1}),l(fl,{modelValue:e.otddate,"onUpdate:modelValue":a[0]||(a[0]=r=>e.otddate=r),minimal:""},null,8,["modelValue"]),l(qe,{align:"center",class:"text-white"},{default:i(()=>[J(l(V,{flat:"",label:"Cancel"},null,512),[[Z]]),J(l(V,{flat:"",label:"Update OTD date",onClick:a[1]||(a[1]=r=>this.updateOTDDate())},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(O,{flat:""},{default:i(()=>[l(M,null,{default:i(()=>[l(Qe,{padding:"",class:"rounded-borders"},{default:i(()=>[l(Ue,{"header-style":{border:"1px solid gray"},label:"On This Day"},{default:i(()=>[s("div",Cl,[l(De,{class:"bg-primary text-white rounded-borders q-my-md"},{default:i(()=>[l(V,{dark:"",standout:"",onClick:a[3]||(a[3]=r=>e.promptOTDDate=!0)},{default:i(()=>[T(S(e.otdlabel),1)]),_:1}),l(Ae),Sl,l(Ae),l(Lt,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":a[4]||(a[4]=r=>this.otdtype=r),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:a[5]||(a[5]=r=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),s("div",kl,[(y(!0),$(W,null,he(e.otditems,(r,d)=>(y(),j(O,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:e.otditems,"onUpdate:modelValue":a[6]||(a[6]=k=>e.otditems=k),key:d},{default:i(()=>[s("span",{style:{cursor:"pointer"},onClick:k=>this.load(d)},S(d),9,bl),T(". "+S(r.year)+" "+S(r.text),1),wl,(y(!0),$(W,null,he(r.pages,(k,P)=>(y(),$("span",{key:P},[l(pl,{class:"on-left",color:"accent",style:{cursor:"pointer"},onClick:K=>this.loadPageId(k.pageid)},{default:i(()=>[l(Q,null,{default:i(()=>[T(S(k.title),1)]),_:2},1024),l(q,{size:"xs",name:"link"})]),_:2},1032,["onClick"])]))),128))]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Vl=ne(yl,[["render",$l]]);const xl=se({name:"CurrentAssignment",setup(){const e=ie();return{reStore:e,ck:c("-"),goal:c("-"),created:c("-"),updated:c("-"),id:c("-"),points:c("-"),pages:c([]),pgIdx:c(e.courses.pgIdx),title:c(""),promptEditTitle:c(!1)}},mounted(){console.log("CurrentAssignment mounted"),H(this.reStore.courses,async(e,a)=>{try{console.log("CurrentAssignment.watcher");const u=e.ck,f=e.aid;this.id=f,this.ck=u,this.goal=this.reStore.courses[u].assignments[f].goal,this.created=this.reStore.courses[u].assignments[f].created,this.updated=this.reStore.courses[u].assignments[f].updated,this.points=this.reStore.courses[u].assignments[f].points;try{const b=this.reStore.courses[u].assignments[f].pages.length;console.log("pages.length ",b)}catch{this.reStore.courses[u].assignments[f].pages=[]}this.pages=this.reStore.courses[u].assignments[f].pages,this.title=this.reStore.courses[u].assignments[f].title,this.pgIdx=this.reStore.courses.pgIdx}catch(u){console.log(u)}},{immediate:!0,deep:!0})},methods:{save(){console.log("save"),this.reStore.saveCurrentAssignment()},nextPage(){this.reStore.nextPage()},changeTitleCB(){console.log("CurrentAssignment.changeTitleCB",this.title),this.reStore.setAssignmentTitle(this.reStore.courses.ck,this.reStore.courses.aid,this.title)}}}),Dl=s("div",{class:"text-h6"},"Change assignment title",-1),ql={class:"text-weight-bolder text-center q-pa-md text-white"},Tl=s("br",null,null,-1),Il={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Bl={width:"100%"},Pl=s("td",null,"Title",-1),Ol={style:{width:"50%"}},Ml=s("td",null,"Course-Key",-1),Ll={style:{width:"50%"}},Hl=s("td",null,"Assgmnt Id",-1),Kl={style:{width:"50%"}},Nl=s("td",null,"Created",-1),Al={style:{width:"50%"}},Rl=s("td",null,"Updated",-1),Ul={style:{width:"50%"}},Ql=s("td",null,"Goal",-1),jl={style:{width:"50%"}},Fl=s("td",null,"Pages",-1);function zl(e,a,u,f,b,x){const r=E("router-link");return y(),$(W,null,[l(Te,{modelValue:e.promptEditTitle,"onUpdate:modelValue":a[3]||(a[3]=d=>e.promptEditTitle=d),persistent:""},{default:i(()=>[l(O,{style:{"min-width":"350px"}},{default:i(()=>[l(M,null,{default:i(()=>[Dl]),_:1}),l(M,{class:"q-pt-none"},{default:i(()=>[l(me,{dense:"",modelValue:e.title,"onUpdate:modelValue":a[0]||(a[0]=d=>e.title=d),autofocus:"",onKeyup:a[1]||(a[1]=mt(d=>{e.prompt=!1,this.changeTitleCB()},["enter"]))},null,8,["modelValue"])]),_:1}),l(qe,{align:"right",class:"text-white"},{default:i(()=>[J(l(V,{outline:"",label:"Cancel"},null,512),[[Z]]),J(l(V,{outline:"",label:"Save",onClick:a[2]||(a[2]=d=>this.changeTitleCB())},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(O,{flat:""},{default:i(()=>[l(M,null,{default:i(()=>[s("div",ql,[l(r,{to:"/teacher/editor",class:"text-white"},{default:i(()=>[T(S(this.title.slice(0,20)),1)]),_:1}),Tl,l(q,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:a[4]||(a[4]=d=>this.promptEditTitle=!0),size:"sm"}),l(q,{style:{cursor:"pointer"},class:"on-right",name:"save",onClick:this.save,size:"sm"},null,8,["onClick"])]),s("div",Il,[s("table",Bl,[s("tr",null,[Pl,s("td",Ol,S(this.title),1)]),s("tr",null,[Ml,s("td",Ll,S(this.ck),1)]),s("tr",null,[Hl,s("td",Kl,S(this.id),1)]),s("tr",null,[Nl,s("td",Al,S(this.created),1)]),s("tr",null,[Rl,s("td",Ul,S(this.updated),1)]),s("tr",null,[Ql,s("td",jl,S(this.goal),1)]),s("tr",null,[Fl,s("td",{style:{width:"50%",cursor:"pointer"},onClick:a[5]||(a[5]=d=>this.nextPage())},S(this.pgIdx+1)+" / "+S(this.pages.length),1)])])])]),_:1})]),_:1})],64)}var Yl=ne(xl,[["render",zl]]);const El=se({name:"CurrentCourse",setup(){return{reStore:ie(),title:c(""),assignmentCount:c(0),courseKey:c(""),created:c(""),updated:c(""),enrollmentCount:c(0),owner:c("")}},mounted(){console.log("CurrentCourse mounted"),H(this.reStore.courses,async(e,a)=>{try{if(this.reStore.courses.ck!=="undefined"){const u=this.reStore.courses.ck;console.log("CurrentCourse ",u),this.title=this.reStore.courses[u].title,this.courseKey=this.reStore.courses[u].courseKey,this.created=this.reStore.courses[u].created,this.updated=this.reStore.courses[u].updated,this.assignmentCount=Object.keys(this.reStore.courses[u].assignments).length,this.enrollmentCount=Object.keys(this.reStore.courses[u].enrollment).length,this.owner=this.reStore.courses[u].owner}}catch(u){console.log(u)}},{immediate:!0,deep:!0})},methods:{dummy(){console.log("dummy")}}}),Wl={class:"text-weight-bolder text-center q-pa-md"},Gl={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Jl={width:"100%"},Xl=s("td",null,"Title",-1),Zl={style:{width:"50%"}},es=s("td",null,"Course-Key",-1),ts={style:{width:"50%"}},as=s("td",null,"Created",-1),os={style:{width:"50%"}},ls=s("td",null,"Updated",-1),ss={style:{width:"50%"}},ns=s("td",null,"Owner",-1),is={style:{width:"50%"}},rs=s("td",null,"Assignments",-1),ds={style:{width:"50%"}},us=s("td",null,"Enrollment",-1),cs={style:{width:"50%"}};function ms(e,a,u,f,b,x){return y(),j(O,{flat:""},{default:i(()=>[l(M,null,{default:i(()=>[s("div",Wl,S(this.title),1),s("div",Gl,[s("table",Jl,[s("tr",null,[Xl,s("td",Zl,S(this.title),1)]),s("tr",null,[es,s("td",ts,S(this.courseKey),1)]),s("tr",null,[as,s("td",os,S(this.created),1)]),s("tr",null,[ls,s("td",ss,S(this.updated),1)]),s("tr",null,[ns,s("td",is,S(this.owner.slice(0,10)),1)]),s("tr",null,[rs,s("td",ds,S(this.assignmentCount),1)]),s("tr",null,[us,s("td",cs,S(this.enrollmentCount),1)])])])]),_:1})]),_:1})}var hs=ne(El,[["render",ms]]);const gs=se({name:"PagerComponent",setup(){return{reStore:ie(),assignment:c(null)}},mounted(){console.log("mounted"),this.reStore.courses.ck&&this.reStore.courses.aid&&(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[this.reStore.courses.ck].assignments[this.reStore.courses.aid]))),H(this.reStore.courses,async(e,a)=>{if(!this.assignment)this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid]));else{const u=this.assignment.ck,f=this.assignment.id;(u!==e.ck||f!==e.aid)&&(console.log("PagerComponent assignment changed"),this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid])))}})},methods:{loadCoverCB(){console.log("Pager loadCoverCB "),this.reStore.loadCover()},loadPageCB(e){console.log("Pager loadPageCB ",e),this.reStore.page=this.assignment.pages[e],this.reStore.courses.trigger+=1},dummy(){console.log("dummy")}}}),fs={class:"text-weight-bolder text-center q-pa-xs"},vs={class:"text-weight-bolder text-center q-pa-xs"},ps={class:"text-weight-bolder text-center q-pa-xs"},ys={key:0},_s=s("span",{class:"float-left"},"Cover Page",-1);function Cs(e,a,u,f,b,x){return y(),j(O,{flat:"",style:{"max-width":"300px"},class:"q-pa-xs"},{default:i(()=>[l(M,null,{default:i(()=>[s("div",fs,"Course: "+S(this.reStore.courses.ck),1),s("div",vs,"Assignment: "+S(this.reStore.courses.aid),1),s("div",ps,"Page: "+S(this.reStore.page.pageTitle),1),this.assignment?(y(),$("span",ys,[l(O,{class:"bg-primary otdcard q-pa-xs q-my-md",flat:"",bordered:""},{default:i(()=>[_s,l(Re,{src:this.assignment.coverUrl,onClick:e.loadCoverCB},null,8,["src","onClick"])]),_:1}),(y(!0),$(W,null,he(this.assignment.pages,(r,d)=>(y(),j(O,{class:"bg-primary otdcard q-pa-xs q-my-md",flat:"",bordered:"",modelValue:this.assignment.pages,"onUpdate:modelValue":a[0]||(a[0]=k=>this.assignment.pages=k),key:d},{default:i(()=>[T(S(r.pageTitle)+" ",1),r.imgs.length>0?(y(),j(Re,{key:0,src:r.imgs[0].url,onClick:k=>e.loadPageCB(d)},null,8,["src","onClick"])):le("",!0)]),_:2},1032,["modelValue"]))),128))])):le("",!0)]),_:1})]),_:1})}var Ss=ne(gs,[["render",Cs]]);const ks=se({name:"TeacherLayout",components:{PagerComponent:Ss,CurrentCourse:hs,DocumentationComponent:da,SearchComponent:Ua,ImagesComponent:Ao,BookmarksComponent:dl,OTDComponent:Vl,CurrentAssignment:Yl,PreferencesComponent:ua,CurrentPage:Po},setup(){const e=c(!1),a=c(!1),u=ie(),f=u.preferences,b=c(null),x=c(null);return{step:c(1),reStore:u,initialValues:c(f),scrollAreaRHS:b,scrollAreaLHS:x,leftDrawerOpen:e,rightDrawerOpen:a,flagName:c(u.langVoices[u.preferences.langVoiceKey].flagName),promptLanguage:c(!1),langVoices:c(u.preferences.langVoices),toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){a.value=!a.value}}},mounted(){qt.isActive||(qt.toggle(),it("primary","#333"),it("secondary",this.initialValues.secondaryColor),it("accent",this.initialValues.accentColor),this.flagName=this.reStore.langVoices[this.reStore.prefereneces.langVoiceKey].flagName,ye(".pfi").classed(this.flagName,!0))},methods:{setRHS(e){e==="pager"?(te("#advancedDiv").classed("hidden",!0),te("#pagerDiv").classed("hidden",!1)):(te("#advancedDiv").classed("hidden",!1),te("#pagerDiv").classed("hidden",!0))},scrollTopRHS(){this.scrollAreaRHS.setScrollPosition("vertical",0)},scrollTopLHS(){this.scrollAreaLHS.setScrollPosition("vertical",0)},setLangVoiceCB(e){this.flagName=this.reStore.langVoices[e].flagName;for(const[a,u]of Object.entries(this.reStore.langVoices)){const f=u.flagName;ye(".pfi").classed(f,!1)}ye(".pfi").classed(this.flagName,!0),this.reStore.preferences.langVoiceKey=e,this.reStore.preferences.langVoice=this.reStore.langVoices[e],console.log("langVoiceKey set to ",e,this.flagName),this.reStore.courses.trigger+=1}}}),bs=s("div",{class:"text-h6"},"Set Current Language",-1),ws={width:"100%"},$s={class:"dashboard-wrapper"},Vs=s("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),xs={class:"hidden"},Ds=s("br",null,null,-1),qs=s("br",null,null,-1),Ts=s("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),Is={id:"pagerDiv"},Bs={id:"advancedDiv",class:"hidden"},Ps={class:"hidden"};function Os(e,a,u,f,b,x){const r=E("router-link"),d=E("router-view"),k=E("DocumentationComponent"),P=E("SearchComponent"),K=E("ImagesComponent"),U=E("BookmarksComponent"),ee=E("OTDComponent"),Be=E("PagerComponent"),ge=E("CurrentCourse"),F=E("CurrentAssignment"),I=E("CurrentPage"),Pe=E("PreferencesComponent");return y(),j(Sa,{view:"hHh LpR fFf"},{default:i(()=>[l(ya,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:i(()=>[l(Te,{modelValue:e.promptLanguage,"onUpdate:modelValue":a[1]||(a[1]=N=>e.promptLanguage=N),persistent:""},{default:i(()=>[l(O,{style:{"min-width":"350px"}},{default:i(()=>[l(M,null,{default:i(()=>[bs]),_:1}),l(M,{class:"q-pt-none"},{default:i(()=>[s("table",ws,[s("tr",null,[s("td",null,[l(Lt,{modelValue:this.langVoice,"onUpdate:modelValue":[a[0]||(a[0]=N=>this.langVoice=N),this.setLangVoiceCB],options:e.langVoices},null,8,["modelValue","options","onUpdate:modelValue"])])])])]),_:1}),l(qe,{align:"right",class:"text-white"},{default:i(()=>[J(l(V,{outline:"",flat:"",label:"Close"},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(De,null,{default:i(()=>[l(V,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),l(pa,null,{default:i(()=>[l(r,{to:"/teacher"},{default:i(()=>[l(q,{name:"home",color:"white"},{default:i(()=>[l(Q,null,{default:i(()=>[T("Return to My Teacher Page")]),_:1})]),_:1})]),_:1})]),_:1}),this.reStore.authenticated?(y(),j(V,{key:0,onClick:a[2]||(a[2]=N=>this.reStore.router.push("/student")),icon:"switch_account"},{default:i(()=>[l(Q,null,{default:i(()=>[T(" Switch between Teacher or Student role ")]),_:1})]),_:1})):le("",!0),this.reStore.authenticated?(y(),j(V,{key:1,icon:"logout",onClick:a[3]||(a[3]=N=>this.reStore.logout())})):le("",!0),l(V,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1})]),_:1}),l(Ca,{class:"container-fluid"},{default:i(()=>[s("div",$s,[l(d)]),l(Tt,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":a[4]||(a[4]=N=>e.leftDrawerOpen=N),side:"left"},{default:i(()=>[l(De,{flat:"",class:"bg-primary text-white"},{default:i(()=>[l(V,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(xe,{dark:"",vertical:"",inset:""}),l(V,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(xe,{dark:"",vertical:"",inset:""}),l(Ae),l(V,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopLHS},{default:i(()=>[l(Q,null,{default:i(()=>[T("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),Vs,l(It,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaLHS"},{default:i(()=>[l(k),l(P),l(K),l(U),l(ee)]),_:1},8,["visible"])]),_:1},8,["modelValue"]),l(Tt,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":a[8]||(a[8]=N=>e.rightDrawerOpen=N),side:"right"},{default:i(()=>[l(De,{flat:"",class:"bg-primary text-white"},{default:i(()=>[s("span",xs,[l(V,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(xe,{dark:"",vertical:"",inset:""}),l(V,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),l(xe,{dark:"",vertical:"",inset:""})]),l(_a,{align:"left"},{default:i(()=>[l(xt,{icon:"theaters",onClick:a[5]||(a[5]=N=>this.setRHS("pager"))},{default:i(()=>[l(Q,null,{default:i(()=>[T("Visual Assignment Builder")]),_:1})]),_:1}),l(xt,{icon:"handyman",onClick:a[6]||(a[6]=N=>this.setRHS("advanced"))},{default:i(()=>[l(Q,null,{default:i(()=>[T("Detailed assignment configuration")]),_:1})]),_:1})]),_:1}),l(Ae),s("span",{class:"pfi fi fi-xx text-h5 ptr",onClick:a[7]||(a[7]=N=>e.promptLanguage=!0)},[l(Q,null,{default:i(()=>[T("Set current language "),Ds,T("Applied to new pages/searches."),qs,T("Sync current page using sync-lang button.")]),_:1})]),l(Ae),l(V,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopRHS},{default:i(()=>[l(Q,null,{default:i(()=>[T("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),Ts,l(It,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaRHS"},{default:i(()=>[s("div",Is,[l(Be)]),s("div",Bs,[s("span",Ps,[l(ge)]),l(F),l(I),l(Pe,{initialValues:this.initialValues},null,8,["initialValues"])])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var Js=ne(ks,[["render",Os]]);export{Js as default};
