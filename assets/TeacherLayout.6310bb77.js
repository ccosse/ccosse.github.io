import{Q as N,u as jt,a as Xt,b as Zt}from"./use-form.23bcedc2.js";import{Q as Pt,u as ea,a as st,P as ta,b as _t}from"./PreferencesComponent.0c029034.js";import{i as v,g as ot,d as he,r as _,v as G,_ as fe,o as u,ah as g,a,w as l,K as R,Q as k,e as d,ai as me,ag as f,al as b,aN as Ue,c as Q,a1 as q,aj as j,ak as ge,am as X,h as C,av as aa,aw as De,j as sa,q as oa,p as St,R as la,f as W,aO as kt,P as Ct,s as et}from"./index.c3013db6.js";import{d as te,C as U,Q as ae}from"./ClosePopup.08986487.js";import{Q as T}from"./QCard.ca194130.js";import{Q as x}from"./QTooltip.41beac98.js";import{Q as Ve,a as na,b as ia,c as Vt,d as bt,e as ra,f as ua}from"./QLayout.e83791cc.js";import{Q as ie,a as O,b as Te,f as wt}from"./QList.106701a9.js";import{Q as da}from"./QTabs.5d2d5ee9.js";import{u as pe,p as ce,t as ca,a as $t,f as ma,g as ga,j as tt,_ as ha,d as Dt,s as qe}from"./re-store.0a128343.js";import{Q as se}from"./QInput.d070f8b4.js";import{s as H}from"./transform.aea72fbe.js";import{D as fa,A as pa}from"./DocumentationComponent.59574d53.js";import{Q as He}from"./QImg.be2d0d7f.js";import{u as va,a as ya}from"./use-dark.16a673d4.js";import{Q as _a}from"./QToggle.47604a44.js";import"./selection.f5fbab2b.js";import"./use-key-composition.f8326dee.js";import"./use-prevent-scroll.77f34a50.js";import"./scroll.aa235de0.js";import"./use-portal.687a63e5.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";import"./QCheckbox.8a612ca6.js";const Sa=v("div",{class:"q-space"});var Oe=ot({name:"QSpace",setup(){return()=>Sa}});const ka=he({name:"SearchComponent",setup(){const e=pe(),s=_("");return{reStore:e,searchTerms:s,searchSize:_(e.preferences.resLimit),searchResults:_([]),promptSearchSize:_(!1)}},mounted(){G(this.reStore.preferences,async(p,B)=>{console.log("watcher ",p,B),this.searchSize=p.resLimit;for(const[A,r]of Object.entries(this.reStore.langVoices))H("#sfi").classed(r.flagName,!1);const D=this.reStore.preferences.langVoiceKey;H("#sfi").classed(this.reStore.langVoices[D].flagName,!0)});const e=this.reStore.preferences.langVoiceKey,s=this.reStore.langVoices[e].flagName;H("#sfi").classed(s,!0)},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchResults.splice(e,1)},async load(e){console.log(e),console.log(this.searchResults[e]);const s=this.reStore.preferences.langVoiceKey;console.log("calling loadPageId ",this.searchResults[e].pageid,s),await this.reStore.loadPageId(this.searchResults[e].pageid,s),this.reStore.page.imgIdx=0,this.reStore.courses.trigger+=1},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("doSearch ",e),this.reStore.wiki.setLang(e.langName);const s=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",s.results.length),this.searchResults=s.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),Ca=d("div",{class:"text-h6"},"Search Results Size",-1),Va={class:"q-pa-md",style:{"max-width":"350px"}},ba={class:"q-gutter-y-sm column"},wa=d("span",{class:"on-right text-h2",id:"sfi"},null,-1),$a={key:0},Da={class:"row cardheader ptr justify-between"},qa=["onClick"],Ta={class:"history-remove"};function Pa(e,s,p,B,D,A){return u(),g(j,null,[a(ae,{modelValue:e.promptSearchSize,"onUpdate:modelValue":s[2]||(s[2]=r=>e.promptSearchSize=r),persistent:""},{default:l(()=>[a(T,{style:{"min-width":"350px"}},{default:l(()=>[a(N,{align:"center"},{default:l(()=>[Ca]),_:1}),a(N,{class:"q-pt-none",align:"center"},{default:l(()=>[a(Pt,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":s[0]||(s[0]=r=>e.searchSize=r)},null,8,["modelValue"])]),_:1}),a(te,{align:"center",class:"text-white"},{default:l(()=>[R(a(k,{flat:"",label:"Cancel"},null,512),[[U]]),R(a(k,{flat:"",label:"Update results size",onClick:s[1]||(s[1]=r=>this.updateSearchSize())},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),d("div",Va,[a(Te,{bordered:"",class:"rounded-borders"},{default:l(()=>[a(ie,null,{header:l(()=>[a(O,{avatar:""},{default:l(()=>[a(me,{size:"md",icon:"search",color:"positive","text-color":"white"})]),_:1}),a(O,null,{default:l(()=>[f(" Search ")]),_:1})]),default:l(()=>[a(T,null,{default:l(()=>[d("div",ba,[a(Ve,{class:"bg-primary text-white rounded-borders q-my-md"},{default:l(()=>[a(k,{dark:"",standout:"",onClick:s[3]||(s[3]=r=>e.promptSearchSize=!0)},{default:l(()=>[f(b(this.searchResults.length)+" ",1),a(x,null,{default:l(()=>[f("Change results limit ("+b(this.searchSize)+")",1)]),_:1})]),_:1}),wa,a(se,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":s[6]||(s[6]=r=>e.searchTerms=r),"input-class":"text-right",class:"q-ml-md",onKeyup:[s[7]||(s[7]=r=>this.update()),s[8]||(s[8]=Ue(r=>this.doSearch(),["enter"]))]},{append:l(()=>[e.searchTerms===""?(u(),Q(q,{key:0,name:"search",onClick:s[4]||(s[4]=r=>this.doSearch())})):(u(),Q(q,{key:1,name:"clear",class:"cursor-pointer",onClick:s[5]||(s[5]=r=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(u(),g("div",$a,[(u(!0),g(j,null,ge(this.searchResults,(r,i)=>(u(),Q(T,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":s[9]||(s[9]=y=>this.searchResults=y),key:i},{default:l(()=>[d("div",Da,[d("span",{class:"history-title col-grow",onClick:y=>this.load(i)},b(i)+". "+b(r.title.slice(0,25)),9,qa),d("span",Ta,[a(q,{class:"primary",size:e.xl,color:e.primary,name:"delete",onClick:y=>this.remove(i)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):X("",!0)]),_:1})]),_:1})]),_:1})])],64)}var xa=fe(ka,[["render",Pa]]);const Ba=he({name:"ImagesComponent",setup(){return{reStore:pe(),newCap:_(""),newDesc:_(""),newName:_(""),newSource:_(""),newUrl:_(""),promptAddImage:_(!1)}},mounted(){G(this.reStore.userSnapshot.images,async(e,s)=>{console.log("watcher ",e,s)})},methods:{addImageCB(){console.log("addImageCB",this.newUrl);const e={name:this.newName,desc:this.newDesc,cap:this.newCap,source:this.newSource,url:this.newUrl};this.reStore.saveImage(null,e)},imgCB(e,s){this.reStore.router.push("/teacher/editor"),console.log(e,s),this.reStore.loadImgId(e)},remove(e,s){console.log(e,s),this.reStore.removeImage(e)}}}),Ka={class:"q-pa-md",style:{"max-width":"350px"}},Ma={class:"row cardheader justify-between"},Na={class:""},Ra={key:0},Ua={class:"history-remove ptr"};function Ha(e,s,p,B,D,A){return u(),g(j,null,[a(ae,{modelValue:e.promptAddImage,"onUpdate:modelValue":s[5]||(s[5]=r=>e.promptAddImage=r)},{default:l(()=>[a(T,null,{default:l(()=>[a(N,null,{default:l(()=>[a(se,{modelValue:e.newCap,"onUpdate:modelValue":s[0]||(s[0]=r=>e.newCap=r),label:"caption"},null,8,["modelValue"]),a(se,{modelValue:e.newDesc,"onUpdate:modelValue":s[1]||(s[1]=r=>e.newDesc=r),label:"description"},null,8,["modelValue"]),a(se,{modelValue:e.newName,"onUpdate:modelValue":s[2]||(s[2]=r=>e.newName=r),label:"name"},null,8,["modelValue"]),a(se,{modelValue:e.newSource,"onUpdate:modelValue":s[3]||(s[3]=r=>e.newSource=r),label:"source"},null,8,["modelValue"]),a(se,{modelValue:e.newUrl,"onUpdate:modelValue":s[4]||(s[4]=r=>e.newUrl=r),label:"url"},null,8,["modelValue"])]),_:1}),a(te,{align:"center",class:"text-white"},{default:l(()=>[R(a(k,{flat:"",label:"Cancel"},null,512),[[U]]),R(a(k,{flat:"",label:"Add",onClick:this.addImageCB},null,8,["onClick"]),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),d("div",Ka,[a(Te,{bordered:"",class:"rounded-borders"},{default:l(()=>[a(ie,{label:"Saved Images"},{header:l(()=>[a(O,{avatar:""},{default:l(()=>[a(me,{size:"md",color:"positive",icon:"image"})]),_:1}),a(O,null,{default:l(()=>[f(" Images ")]),_:1})]),default:l(()=>[a(T,null,{default:l(()=>[a(Ve,{class:"bg-primary text-white rounded-borders q-my-md"},{default:l(()=>[a(k,{bordered:"","no-caps":"",standout:"",onClick:s[6]||(s[6]=r=>e.promptAddImage=!0)},{default:l(()=>[f(" Add Image "),a(x,null,{default:l(()=>[f("Add a custom image (only saves url, not image data)")]),_:1})]),_:1})]),_:1}),d("div",null,[(u(!0),g(j,null,ge(this.reStore.userSnapshot.images,(r,i)=>(u(),Q(T,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":s[7]||(s[7]=y=>this.reStore.userSnapshot.images=y),key:i},{default:l(()=>[d("div",Ma,[d("span",Na,[a(q,{name:"title",onClick:y=>this.reStore.setCover(r)},null,8,["onClick"])]),r.cap?(u(),g("span",Ra,b(r.cap.slice(0,25)),1)):X("",!0),d("span",Ua,[a(q,{name:"delete",onClick:y=>this.remove(i,r)},null,8,["onClick"])])]),a(He,{class:"cardimage",onClick:y=>this.imgCB(i,r),src:r.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])],64)}var Oa=fe(Ba,[["render",Ha]]);const Aa=he({name:"BookmarksComponent",setup(){return{reStore:pe()}},mounted(){G(this.reStore.userSnapshot.bookmarks,async(e,s)=>{console.log("watcher ",e,s)})},methods:{imgCB(e,s){this.reStore.router.push("/teacher/editor"),console.log(e,s),this.reStore.page=JSON.parse(JSON.stringify(s)),this.reStore.courses.trigger+=1},remove(e,s){console.log(e,s),this.reStore.removeBookmark(e)}}}),Ia={class:"q-pa-md",style:{"max-width":"350px"}},La={class:"row cardheader justify-between"},za={class:"history-remove hidden"},Qa={key:0,class:"fi fi-gb"},Ya={key:1,class:"fi fi-us"},Ea={key:2,class:"fi fi-mx"},Wa={key:3,class:"fi fi-fr"},Ja={key:4,class:"fi fi-de"},Fa={key:5,class:"fi fi-it"},Ga={key:6,class:"fi fi-br"},ja={key:7,class:"fi fi-ke"},Xa={key:8,class:"fi fi-ru"},Za={key:9,class:"fi fi-th"},es={key:10,class:"fi fi-cn"},ts={key:11,class:"fi fi-hk"},as={key:12,class:"fi fi-tw"},ss={key:13,class:"fi fi-kr"},os={key:14,class:"fi fi-jp"},ls={key:15,class:"fi fi-id"},ns={key:16,class:"fi fi-xx"},is={class:"history-remove ptr"};function rs(e,s,p,B,D,A){return u(),g("div",Ia,[a(Te,{bordered:"",class:"rounded-borders"},{default:l(()=>[a(ie,{label:"Wikipedia Bookmarks"},{header:l(()=>[a(O,{avatar:""},{default:l(()=>[a(me,{size:"md",color:"positive",icon:"bookmark"})]),_:1}),a(O,null,{default:l(()=>[f(" Bookmarks ")]),_:1})]),default:l(()=>[a(T,null,{default:l(()=>[d("div",null,[(u(!0),g(j,null,ge(this.reStore.userSnapshot.bookmarks,(r,i)=>(u(),Q(T,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":s[0]||(s[0]=y=>this.reStore.userSnapshot.bookmarks=y),key:i},{default:l(()=>[d("div",La,[d("span",za,[a(q)]),r.langVoiceKey==="Eng-UK-Fem"?(u(),g("span",Qa)):r.langVoiceKey==="Eng-US"?(u(),g("span",Ya)):r.langVoiceKey==="espa\xF1ol"?(u(),g("span",Ea)):r.langVoiceKey==="fran\xE7ais"?(u(),g("span",Wa)):r.langVoiceKey==="Deutsch"?(u(),g("span",Ja)):r.langVoiceKey==="italiano"?(u(),g("span",Fa)):r.langVoiceKey==="portugu\xEAs do Brasil"?(u(),g("span",Ga)):r.langVoiceKey==="Kiswahili"?(u(),g("span",ja)):r.langVoiceKey==="\u0440\u0443\u0441\u0441\u043A\u0438\u0439"?(u(),g("span",Xa)):r.langVoiceKey==="\u0E44\u0E17\u0E22"?(u(),g("span",Za)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09"?(u(),g("span",es)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09"?(u(),g("span",ts)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09"?(u(),g("span",as)):r.langVoiceKey==="\uD55C\uAD6D\uC758"?(u(),g("span",ss)):r.langVoiceKey==="\u65E5\u672C\u8A9E"?(u(),g("span",os)):r.langVoiceKey==="Bahasa Indonesia"?(u(),g("span",ls)):(u(),g("span",ns)),f(" "+b(r.pageTitle.slice(0,25))+" ",1),d("span",is,[a(q,{name:"delete",onClick:y=>this.remove(i,r)},null,8,["onClick"])])]),a(He,{class:"cardimage",onClick:y=>this.imgCB(i,r),src:r.imgs[r.imgIdx].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])}var us=fe(Aa,[["render",rs]]);const ds=["gregorian","persian"],cs={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>ds.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},ms=["update:modelValue"];function le(e){return e.year+"/"+ce(e.month)+"/"+ce(e.day)}function gs(e,s){const p=C(()=>e.disable!==!0&&e.readonly!==!0),B=C(()=>e.editable===!0?0:-1),D=C(()=>{const i=[];return e.color!==void 0&&i.push(`bg-${e.color}`),e.textColor!==void 0&&i.push(`text-${e.textColor}`),i.join(" ")});function A(){return e.locale!==void 0?{...s.lang.date,...e.locale}:s.lang.date}function r(i){const y=new Date,$=i===!0?null:0;if(e.calendar==="persian"){const Z=ca(y);return{year:Z.jy,month:Z.jm,day:Z.jd}}return{year:y.getFullYear(),month:y.getMonth()+1,day:y.getDate(),hour:$,minute:$,second:$,millisecond:$}}return{editable:p,tabindex:B,headerClass:D,getLocale:A,getCurrentDate:r}}const de=20,hs=["Calendar","Years","Months"],qt=e=>hs.includes(e),at=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Ce=" \u2014 ";function ne(e){return e.year+"/"+ce(e.month)}var fs=ot({name:"QDate",props:{...cs,...jt,...va,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:at},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:at},navigationMaxYearMonth:{type:String,validator:at},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:qt}},emits:[...ms,"rangeStart","rangeEnd","navigation"],setup(e,{slots:s,emit:p}){const{proxy:B}=oa(),{$q:D}=B,A=ya(e,D),{getCache:r}=ea(),{tabindex:i,headerClass:y,getLocale:$,getCurrentDate:Z}=gs(e,D);let ve;const Ae=Xt(e),Ie=Zt(Ae),be=_(null),J=_(mt()),K=_($()),M=C(()=>mt()),xt=C(()=>$()),ee=C(()=>Z()),S=_(gt(J.value,K.value)),Y=_(e.defaultView),lt=D.lang.rtl===!0?"right":"left",Pe=_(lt.value),Le=_(lt.value),ze=S.value.year,xe=_(ze-ze%de-(ze<0?de:0)),I=_(null),Bt=C(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(A.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),re=C(()=>e.color||"primary"),ye=C(()=>e.textColor||"white"),Be=C(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Qe=C(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),F=C(()=>Qe.value.filter(t=>typeof t=="string").map(t=>Je(t,J.value,K.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),_e=C(()=>{const t=o=>Je(o,J.value,K.value);return Qe.value.filter(o=>aa(o)===!0&&o.from!==void 0&&o.to!==void 0).map(o=>({from:t(o.from),to:t(o.to)})).filter(o=>o.from.dateHash!==null&&o.to.dateHash!==null&&o.from.dateHash<o.to.dateHash)}),Ke=C(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const o=$t(t.year,t.month,t.day);return new Date(o.gy,o.gm-1,o.gd)}),Ye=C(()=>e.calendar==="persian"?le:(t,o,n)=>ma(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),o===void 0?J.value:o,n===void 0?K.value:n,t.year,t.timezoneOffset)),we=C(()=>F.value.length+_e.value.reduce((t,o)=>t+1+ga(Ke.value(o.to),Ke.value(o.from)),0)),nt=C(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(I.value!==null){const n=I.value.init,m=Ke.value(n);return K.value.daysShort[m.getDay()]+", "+K.value.monthsShort[n.month-1]+" "+n.day+Ce+"?"}if(we.value===0)return Ce;if(we.value>1)return`${we.value} ${K.value.pluralDay}`;const t=F.value[0],o=Ke.value(t);return isNaN(o.valueOf())===!0?Ce:K.value.headerTitle!==void 0?K.value.headerTitle(o,t):K.value.daysShort[o.getDay()]+", "+K.value.monthsShort[t.month-1]+" "+t.day}),Kt=C(()=>F.value.concat(_e.value.map(o=>o.from)).sort((o,n)=>o.year-n.year||o.month-n.month)[0]),Mt=C(()=>F.value.concat(_e.value.map(o=>o.to)).sort((o,n)=>n.year-o.year||n.month-o.month)[0]),it=C(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(we.value===0)return Ce;if(we.value>1){const t=Kt.value,o=Mt.value,n=K.value.monthsShort;return n[t.month-1]+(t.year!==o.year?" "+t.year+Ce+n[o.month-1]+" ":t.month!==o.month?Ce+n[o.month-1]:"")+" "+o.year}return F.value[0].year}),Me=C(()=>{const t=[D.iconSet.datetime.arrowLeft,D.iconSet.datetime.arrowRight];return D.lang.rtl===!0?t.reverse():t}),rt=C(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):K.value.firstDayOfWeek),Nt=C(()=>{const t=K.value.daysShort,o=rt.value;return o>0?t.slice(o,7).concat(t.slice(0,o)):t}),oe=C(()=>{const t=S.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():tt(t.year,t.month)}),Rt=C(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),L=C(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),z=C(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Ee=C(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return L.value!==null&&L.value.year>=S.value.year&&(t.year.prev=!1,L.value.year===S.value.year&&L.value.month>=S.value.month&&(t.month.prev=!1)),z.value!==null&&z.value.year<=S.value.year&&(t.year.next=!1,z.value.year===S.value.year&&z.value.month<=S.value.month&&(t.month.next=!1)),t}),Ne=C(()=>{const t={};return F.value.forEach(o=>{const n=ne(o);t[n]===void 0&&(t[n]=[]),t[n].push(o.day)}),t}),ut=C(()=>{const t={};return _e.value.forEach(o=>{const n=ne(o.from),m=ne(o.to);if(t[n]===void 0&&(t[n]=[]),t[n].push({from:o.from.day,to:n===m?o.to.day:void 0,range:o}),n<m){let c;const{year:w,month:h}=o.from,V=h<12?{year:w,month:h+1}:{year:w+1,month:1};for(;(c=ne(V))<=m;)t[c]===void 0&&(t[c]=[]),t[c].push({from:void 0,to:c===m?o.to.day:void 0,range:o}),V.month++,V.month>12&&(V.year++,V.month=1)}}),t}),$e=C(()=>{if(I.value===null)return;const{init:t,initHash:o,final:n,finalHash:m}=I.value,[c,w]=o<=m?[t,n]:[n,t],h=ne(c),V=ne(w);if(h!==E.value&&V!==E.value)return;const P={};return h===E.value?(P.from=c.day,P.includeFrom=!0):P.from=1,V===E.value?(P.to=w.day,P.includeTo=!0):P.to=oe.value,P}),E=C(()=>ne(S.value)),Ut=C(()=>{const t={};if(e.options===void 0){for(let n=1;n<=oe.value;n++)t[n]=!0;return t}const o=typeof e.options=="function"?e.options:n=>e.options.includes(n);for(let n=1;n<=oe.value;n++){const m=E.value+"/"+ce(n);t[n]=o(m)}return t}),Ht=C(()=>{const t={};if(e.events===void 0)for(let o=1;o<=oe.value;o++)t[o]=!1;else{const o=typeof e.events=="function"?e.events:n=>e.events.includes(n);for(let n=1;n<=oe.value;n++){const m=E.value+"/"+ce(n);t[n]=o(m)===!0&&Rt.value(m)}}return t}),Ot=C(()=>{let t,o;const{year:n,month:m}=S.value;if(e.calendar!=="persian")t=new Date(n,m-1,1),o=new Date(n,m-1,0).getDate();else{const c=$t(n,m,1);t=new Date(c.gy,c.gm-1,c.gd);let w=m-1,h=n;w===0&&(w=12,h--),o=tt(h,w)}return{days:t.getDay()-rt.value-1,endDay:o}}),dt=C(()=>{const t=[],{days:o,endDay:n}=Ot.value,m=o<0?o+7:o;if(m<6)for(let h=n-m;h<=n;h++)t.push({i:h,fill:!0});const c=t.length;for(let h=1;h<=oe.value;h++){const V={i:h,event:Ht.value[h],classes:[]};Ut.value[h]===!0&&(V.in=!0,V.flat=!0),t.push(V)}if(Ne.value[E.value]!==void 0&&Ne.value[E.value].forEach(h=>{const V=c+h-1;Object.assign(t[V],{selected:!0,unelevated:!0,flat:!1,color:re.value,textColor:ye.value})}),ut.value[E.value]!==void 0&&ut.value[E.value].forEach(h=>{if(h.from!==void 0){const V=c+h.from-1,P=c+(h.to||oe.value)-1;for(let Ze=V;Ze<=P;Ze++)Object.assign(t[Ze],{range:h.range,unelevated:!0,color:re.value,textColor:ye.value});Object.assign(t[V],{rangeFrom:!0,flat:!1}),h.to!==void 0&&Object.assign(t[P],{rangeTo:!0,flat:!1})}else if(h.to!==void 0){const V=c+h.to-1;for(let P=c;P<=V;P++)Object.assign(t[P],{range:h.range,unelevated:!0,color:re.value,textColor:ye.value});Object.assign(t[V],{flat:!1,rangeTo:!0})}else{const V=c+oe.value-1;for(let P=c;P<=V;P++)Object.assign(t[P],{range:h.range,unelevated:!0,color:re.value,textColor:ye.value})}}),$e.value!==void 0){const h=c+$e.value.from-1,V=c+$e.value.to-1;for(let P=h;P<=V;P++)t[P].color=re.value,t[P].editRange=!0;$e.value.includeFrom===!0&&(t[h].editRangeFrom=!0),$e.value.includeTo===!0&&(t[V].editRangeTo=!0)}S.value.year===ee.value.year&&S.value.month===ee.value.month&&(t[c+ee.value.day-1].today=!0);const w=t.length%7;if(w>0){const h=7-w;for(let V=1;V<=h;V++)t.push({i:V,fill:!0})}return t.forEach(h=>{let V="q-date__calendar-item ";h.fill===!0?V+="q-date__calendar-item--fill":(V+=`q-date__calendar-item--${h.in===!0?"in":"out"}`,h.range!==void 0&&(V+=` q-date__range${h.rangeTo===!0?"-to":h.rangeFrom===!0?"-from":""}`),h.editRange===!0&&(V+=` q-date__edit-range${h.editRangeFrom===!0?"-from":""}${h.editRangeTo===!0?"-to":""}`),(h.range!==void 0||h.editRange===!0)&&(V+=` text-${h.color}`)),h.classes=V}),t}),At=C(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});G(()=>e.modelValue,t=>{if(ve===t)ve=0;else{const{year:o,month:n}=gt(J.value,K.value);Se(o,n)}}),G(Y,()=>{be.value!==null&&B.$el.contains(document.activeElement)===!0&&be.value.focus()}),G(()=>S.value.year,t=>{p("navigation",{year:t,month:S.value.month})}),G(()=>S.value.month,t=>{p("navigation",{year:S.value.year,month:t})}),G(M,t=>{yt(t,K.value,"mask"),J.value=t}),G(xt,t=>{yt(J.value,t,"locale"),K.value=t});function ct(){const t=ee.value,o=Ne.value[ne(t)];(o===void 0||o.includes(t.day)===!1)&&Ge(t),We(t.year,t.month)}function It(t){qt(t)===!0&&(Y.value=t)}function Lt(t,o){["month","year"].includes(t)&&(t==="month"?ft:Fe)(o===!0?-1:1)}function We(t,o){Y.value="Calendar",Se(t,o)}function zt(t,o){if(e.range===!1||!t){I.value=null;return}const n=Object.assign({...S.value},t),m=o!==void 0?Object.assign({...S.value},o):n;I.value={init:n,initHash:le(n),final:m,finalHash:le(m)},We(n.year,n.month)}function mt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Je(t,o,n){return ha(t,o,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function gt(t,o){const n=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(n.length===0)return ht();const m=n[n.length-1],c=Je(m.from!==void 0?m.from:m,t,o);return c.dateHash===null?ht():c}function ht(){let t,o;if(e.defaultYearMonth!==void 0){const n=e.defaultYearMonth.split("/");t=parseInt(n[0],10),o=parseInt(n[1],10)}else{const n=ee.value!==void 0?ee.value:Z();t=n.year,o=n.month}return{year:t,month:o,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+ce(o)+"/01"}}function ft(t){let o=S.value.year,n=Number(S.value.month)+t;n===13?(n=1,o++):n===0&&(n=12,o--),Se(o,n),Be.value===!0&&Re("month")}function Fe(t){const o=Number(S.value.year)+t;Se(o,S.value.month),Be.value===!0&&Re("year")}function Qt(t){Se(t,S.value.month),Y.value=e.defaultView==="Years"?"Months":"Calendar",Be.value===!0&&Re("year")}function Yt(t){Se(S.value.year,t),Y.value="Calendar",Be.value===!0&&Re("month")}function Et(t,o){const n=Ne.value[o];(n!==void 0&&n.includes(t.day)===!0?je:Ge)(t)}function ue(t){return{year:t.year,month:t.month,day:t.day}}function Se(t,o){L.value!==null&&t<=L.value.year&&(t=L.value.year,o<L.value.month&&(o=L.value.month)),z.value!==null&&t>=z.value.year&&(t=z.value.year,o>z.value.month&&(o=z.value.month));const n=t+"/"+ce(o)+"/01";n!==S.value.dateHash&&(Pe.value=S.value.dateHash<n==(D.lang.rtl!==!0)?"left":"right",t!==S.value.year&&(Le.value=Pe.value),St(()=>{xe.value=t-t%de-(t<0?de:0),Object.assign(S.value,{year:t,month:o,day:1,dateHash:n})}))}function pt(t,o,n){const m=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;ve=m;const{reason:c,details:w}=vt(o,n);p("update:modelValue",m,c,w)}function Re(t){const o=F.value[0]!==void 0&&F.value[0].dateHash!==null?{...F.value[0]}:{...S.value};St(()=>{o.year=S.value.year,o.month=S.value.month;const n=e.calendar!=="persian"?new Date(o.year,o.month,0).getDate():tt(o.year,o.month);o.day=Math.min(Math.max(1,o.day),n);const m=ke(o);ve=m;const{details:c}=vt("",o);p("update:modelValue",m,t,c)})}function vt(t,o){return o.from!==void 0?{reason:`${t}-range`,details:{...ue(o.target),from:ue(o.from),to:ue(o.to)}}:{reason:`${t}-day`,details:ue(o)}}function ke(t,o,n){return t.from!==void 0?{from:Ye.value(t.from,o,n),to:Ye.value(t.to,o,n)}:Ye.value(t,o,n)}function Ge(t){let o;if(e.multiple===!0)if(t.from!==void 0){const n=le(t.from),m=le(t.to),c=F.value.filter(h=>h.dateHash<n||h.dateHash>m),w=_e.value.filter(({from:h,to:V})=>V.dateHash<n||h.dateHash>m);o=c.concat(w).concat(t).map(h=>ke(h))}else{const n=Qe.value.slice();n.push(ke(t)),o=n}else o=ke(t);pt(o,"add",t)}function je(t){if(e.noUnset===!0)return;let o=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const n=ke(t);t.from!==void 0?o=e.modelValue.filter(m=>m.from!==void 0?m.from!==n.from&&m.to!==n.to:!0):o=e.modelValue.filter(m=>m!==n),o.length===0&&(o=null)}pt(o,"remove",t)}function yt(t,o,n){const m=F.value.concat(_e.value).map(c=>ke(c,t,o)).filter(c=>c.from!==void 0?c.from.dateHash!==null&&c.to.dateHash!==null:c.dateHash!==null);p("update:modelValue",(e.multiple===!0?m:m[0])||null,n)}function Wt(){if(e.minimal!==!0)return v("div",{class:"q-date__header "+y.value},[v("div",{class:"relative-position"},[v(De,{name:"q-transition--fade"},()=>v("div",{key:"h-yr-"+it.value,class:"q-date__header-subtitle q-date__header-link "+(Y.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...r("vY",{onClick(){Y.value="Years"},onKeyup(t){t.keyCode===13&&(Y.value="Years")}})},[it.value]))]),v("div",{class:"q-date__header-title relative-position flex no-wrap"},[v("div",{class:"relative-position col"},[v(De,{name:"q-transition--fade"},()=>v("div",{key:"h-sub"+nt.value,class:"q-date__header-title-label q-date__header-link "+(Y.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...r("vC",{onClick(){Y.value="Calendar"},onKeyup(t){t.keyCode===13&&(Y.value="Calendar")}})},[nt.value]))]),e.todayBtn===!0?v(k,{class:"q-date__header-today self-start",icon:D.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:i.value,onClick:ct}):null])])}function Xe({label:t,type:o,key:n,dir:m,goTo:c,boundaries:w,cls:h}){return[v("div",{class:"row items-center q-date__arrow"},[v(k,{round:!0,dense:!0,size:"sm",flat:!0,icon:Me.value[0],tabindex:i.value,disable:w.prev===!1,...r("go-#"+o,{onClick(){c(-1)}})})]),v("div",{class:"relative-position overflow-hidden flex flex-center"+h},[v(De,{name:"q-transition--jump-"+m},()=>v("div",{key:n},[v(k,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:i.value,...r("view#"+o,{onClick:()=>{Y.value=o}})})]))]),v("div",{class:"row items-center q-date__arrow"},[v(k,{round:!0,dense:!0,size:"sm",flat:!0,icon:Me.value[1],tabindex:i.value,disable:w.next===!1,...r("go+#"+o,{onClick(){c(1)}})})])]}const Jt={Calendar:()=>[v("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[v("div",{class:"q-date__navigation row items-center no-wrap"},Xe({label:K.value.months[S.value.month-1],type:"Months",key:S.value.month,dir:Pe.value,goTo:ft,boundaries:Ee.value.month,cls:" col"}).concat(Xe({label:S.value.year,type:"Years",key:S.value.year,dir:Le.value,goTo:Fe,boundaries:Ee.value.year,cls:""}))),v("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Nt.value.map(t=>v("div",{class:"q-date__calendar-item"},[v("div",t)]))),v("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[v(De,{name:"q-transition--slide-"+Pe.value},()=>v("div",{key:E.value,class:"q-date__calendar-days fit"},dt.value.map(t=>v("div",{class:t.classes},[t.in===!0?v(k,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:i.value,...r("day#"+t.i,{onClick:()=>{Ft(t.i)},onMouseover:()=>{Gt(t.i)}})},t.event!==!1?()=>v("div",{class:"q-date__event bg-"+t.event}):null):v("div",""+t.i)]))))])])],Months(){const t=S.value.year===ee.value.year,o=m=>L.value!==null&&S.value.year===L.value.year&&L.value.month>m||z.value!==null&&S.value.year===z.value.year&&z.value.month<m,n=K.value.monthsShort.map((m,c)=>{const w=S.value.month===c+1;return v("div",{class:"q-date__months-item flex flex-center"},[v(k,{class:t===!0&&ee.value.month===c+1?"q-date__today":null,flat:w!==!0,label:m,unelevated:w,color:w===!0?re.value:null,textColor:w===!0?ye.value:null,tabindex:i.value,disable:o(c+1),...r("month#"+c,{onClick:()=>{Yt(c+1)}})})])});return e.yearsInMonthView===!0&&n.unshift(v("div",{class:"row no-wrap full-width"},[Xe({label:S.value.year,type:"Years",key:S.value.year,dir:Le.value,goTo:Fe,boundaries:Ee.value.year,cls:" col"})])),v("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const t=xe.value,o=t+de,n=[],m=c=>L.value!==null&&L.value.year>c||z.value!==null&&z.value.year<c;for(let c=t;c<=o;c++){const w=S.value.year===c;n.push(v("div",{class:"q-date__years-item flex flex-center"},[v(k,{key:"yr"+c,class:ee.value.year===c?"q-date__today":null,flat:!w,label:c,dense:!0,unelevated:w,color:w===!0?re.value:null,textColor:w===!0?ye.value:null,tabindex:i.value,disable:m(c),...r("yr#"+c,{onClick:()=>{Qt(c)}})})]))}return v("div",{class:"q-date__view q-date__years flex flex-center"},[v("div",{class:"col-auto"},[v(k,{round:!0,dense:!0,flat:!0,icon:Me.value[0],tabindex:i.value,disable:m(t),...r("y-",{onClick:()=>{xe.value-=de}})})]),v("div",{class:"q-date__years-content col self-stretch row items-center"},n),v("div",{class:"col-auto"},[v(k,{round:!0,dense:!0,flat:!0,icon:Me.value[1],tabindex:i.value,disable:m(o),...r("y+",{onClick:()=>{xe.value+=de}})})])])}};function Ft(t){const o={...S.value,day:t};if(e.range===!1){Et(o,E.value);return}if(I.value===null){const n=dt.value.find(c=>c.fill!==!0&&c.i===t);if(e.noUnset!==!0&&n.range!==void 0){je({target:o,from:n.range.from,to:n.range.to});return}if(n.selected===!0){je(o);return}const m=le(o);I.value={init:o,initHash:m,final:o,finalHash:m},p("rangeStart",ue(o))}else{const n=I.value.initHash,m=le(o),c=n<=m?{from:I.value.init,to:o}:{from:o,to:I.value.init};I.value=null,Ge(n===m?o:{target:o,...c}),p("rangeEnd",{from:ue(c.from),to:ue(c.to)})}}function Gt(t){if(I.value!==null){const o={...S.value,day:t};Object.assign(I.value,{final:o,finalHash:le(o)})}}return Object.assign(B,{setToday:ct,setView:It,offsetCalendar:Lt,setCalendarTo:We,setEditingRange:zt}),()=>{const t=[v("div",{class:"q-date__content col relative-position"},[v(De,{name:"q-transition--fade"},Jt[Y.value])])],o=sa(s.default);return o!==void 0&&t.push(v("div",{class:"q-date__actions"},o)),e.name!==void 0&&e.disable!==!0&&Ie(t,"push"),v("div",{class:Bt.value,...At.value},[Wt(),v("div",{ref:be,class:"q-date__main col column",tabindex:-1},t)])}}});const ps=["top","middle","bottom"];var vs=ot({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>ps.includes(e)}},setup(e,{slots:s}){const p=C(()=>e.align!==void 0?{verticalAlign:e.align}:null),B=C(()=>{const D=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(D!==void 0?` text-${D}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>v("div",{class:B.value,style:p.value,role:"status","aria-label":e.label},la(s.default,e.label!==void 0?[e.label]:[]))}});const ys=he({name:"OTDComponent",setup(){const e=pe(),s=Date.now(),p=Dt.formatDate(s,"MM/DD");return{reStore:e,otditems:_([]),promptOTDDate:_(!1),otddate:_(Date.now()),otdlabel:_(p),otdtype:_("selected")}},mounted(){this.init(),G(this.reStore.preferences,async(e,s)=>{console.log("OTD watcher"),e.langVoiceKey!==s.langVoiceKey?this.init():(console.log("OTD watcher ",e),this.init())})},methods:{async init(){console.log("OTD init");const e=this.reStore.preferences.langVoiceKey;await this.reStore.wiki.setLang(this.reStore.langVoices[e].langName);const s=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=s[this.otdtype],console.log(this.otditems);for(const[B,D]of Object.entries(this.reStore.langVoices)){const A=D.flagName;H("#otdfi").classed(A,!1)}const p=this.reStore.langVoices[e].flagName;H("#otdfi").classed(p,!0)},async loadPageId(e){console.log("loadPageId ",e);const s=this.reStore.preferences.langVoiceKey;console.log("OTD load ",s),this.reStore.loadPageId(e,s),this.reStore.router.push("/teacher/editor")},async load(e){console.log("load",this.otditems[e].text),console.log("load",this.otditems[e]);const s=this.reStore.preferences.langVoiceKey;console.log("OTD load ",s),this.reStore.loadPageId(this.otditems[e].pages[0].pageid,s),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const e=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=e.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=Dt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(e){console.log("otdOptionsCB",this.otdtype);const s=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=s[this.otdtype]}}}),_s=d("div",{class:"text-h6"},"Select Date",-1),Ss={class:"q-pa-md",style:{"max-width":"350px"}},ks={class:"q-gutter-y-sm column"},Cs=d("span",{id:"otdfi",class:"pfi text-h4"},null,-1),Vs={class:""},bs=["onClick"],ws=d("br",null,null,-1);function $s(e,s,p,B,D,A){return u(),g(j,null,[a(ae,{modelValue:e.promptOTDDate,"onUpdate:modelValue":s[2]||(s[2]=r=>e.promptOTDDate=r),persistent:""},{default:l(()=>[a(T,{style:{"min-width":"350px"}},{default:l(()=>[a(N,{align:"center"},{default:l(()=>[_s]),_:1}),a(fs,{modelValue:e.otddate,"onUpdate:modelValue":s[0]||(s[0]=r=>e.otddate=r),minimal:""},null,8,["modelValue"]),a(te,{align:"center",class:"text-white"},{default:l(()=>[R(a(k,{flat:"",label:"Cancel"},null,512),[[U]]),R(a(k,{flat:"",label:"Update OTD date",onClick:s[1]||(s[1]=r=>this.updateOTDDate())},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),d("div",Ss,[a(Te,{bordered:"",class:"rounded-borders"},{default:l(()=>[a(ie,null,{header:l(()=>[a(O,{avatar:""},{default:l(()=>[a(me,{size:"md",color:"positive",icon:"stars"})]),_:1}),a(O,null,{default:l(()=>[f(" On This Day ")]),_:1})]),default:l(()=>[a(T,null,{default:l(()=>[d("div",ks,[a(Ve,{class:"bg-primary text-white rounded-borders q-my-md"},{default:l(()=>[a(k,{dark:"",standout:"",onClick:s[3]||(s[3]=r=>e.promptOTDDate=!0)},{default:l(()=>[f(b(e.otdlabel),1)]),_:1}),a(Oe),Cs,a(Oe),a(st,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":s[4]||(s[4]=r=>this.otdtype=r),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:s[5]||(s[5]=r=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),d("div",Vs,[(u(!0),g(j,null,ge(e.otditems,(r,i)=>(u(),Q(T,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:e.otditems,"onUpdate:modelValue":s[6]||(s[6]=y=>e.otditems=y),key:i},{default:l(()=>[d("span",{style:{cursor:"pointer"},onClick:y=>this.load(i)},b(i),9,bs),f(". "+b(r.year)+" "+b(r.text),1),ws,(u(!0),g(j,null,ge(r.pages,(y,$)=>(u(),g("span",{key:$},[a(vs,{class:"on-left",color:"accent",style:{cursor:"pointer"},onClick:Z=>this.loadPageId(y.pageid)},{default:l(()=>[a(x,null,{default:l(()=>[f(b(y.title),1)]),_:2},1024),a(q,{size:"xs",name:"link"})]),_:2},1032,["onClick"])]))),128))]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])],64)}var Ds=fe(ys,[["render",$s]]);function Tt(e){return e===null||e===""?!1:(e=e.toString(),e=e.replaceAll("&nbsp;",""),e.replace(/(<([^>]+)>)/ig,""))}const qs=he({name:"PagerComponent",setup(){const e=pe();return{reStore:e,assignment:_(null),promptAssignmentTitle:_(!1),promptPageTitle:_(!1),promptPctReplace:_(!1),promptLanguage:_(!1),promptGuideWords:_(!1),langVoices:_(e.preferences.langVoices),targetLangVoiceKey:_(null),targetPctReplace:_(null),targetGuideWords:_(null),coverExpanded:_(!0)}},mounted(){console.log("mounted"),this.reStore.courses.ck&&this.reStore.courses.aid&&(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[this.reStore.courses.ck].assignments[this.reStore.courses.aid]))),G(this.reStore.courses,async(e,s)=>{this.reStore.courses.ck||(this.assignment=null),this.reStore.courses.aid||(this.assignment=null),this.assignment&&e.aid&&e.ck&&this.assignment.pages.length!=e[e.ck].assignments[e.aid].pages.length&&(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid])),console.log("Pager reloading assignment b/c pages.length changed")),!this.assignment&&e.ck&&e.aid?(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid])),console.log("Pager loaded fresh copy of assignment")):e.aid&&e.ck&&this.assignment.coverUrl!=e[e.ck].assignments.coverUrl?(this.assignment.coverUrl=e[e.ck].assignments[e.aid].coverUrl,console.log("Pager coverUrl")):this.assignment&&this.assignment.ck!==e.ck||this.assignment.id!==e.aid?(console.log("PagerComponent assignment changed"),this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid]))):console.log("Pager nothing seems to have changed")})},methods:{pctCB(e){this.targetPgIdx=e,this.targetPctReplace=this.assignment.pages[e].pctReplace,this.promptPctReplace=!0},updatePctReplaceCB(){console.log("updatePctReplaceCB "),this.assignment.pages[this.targetPgIdx].pctReplace=this.targetPctReplace,this.targetPgIdx==this.reStore.courses.pgIdx?(console.log("updating restore.page.pctReplace",this.targetPctReplace,this.assignment.pages[this.targetPgIdx].pctReplace),this.reStore.page.pctReplace=parseInt(this.targetPctReplace)):console.log("Not updating pctReplace",this.targetPgIdx,this.reStore.courses.pgIdx),this.targetPctReplace=null,this.targetPgIdx=null},wpCB(e){console.log("wpCB",e),this.assignment.pages[e].pageid;const s=this.assignment.pages[e].canonicalUrl;window.open(s,"_blank")},gwCB(e){console.log("updateGuideWords",e),this.targetPgIdx=e,this.targetGuideWords=this.assignment.pages[e].guideWords,this.promptGuideWords=!0},updateGuideWordsCB(){console.log(),this.assignment.pages[this.targetPgIdx].guideWords=this.targetGuideWords,this.reStore.courses.pgIdx==this.targetPgIdx?(console.log("updating page guidewords"),this.reStore.page.guideWords=this.targetGuideWords,this.reStore.notify("page guide-words updated ")):console.log("NOT updating page guidewords",this.reStore.courses.pgIdx,this.targetPgIdx),this.targetPgIdx=null,this.targetGuideWords=null},setPageLang(e){this.targetPgIdx=e,this.targetLangVoiceKey=this.assignment.pages[e].langVoiceKey,this.promptLanguage=!0},setLangVoiceCB(e){const s=this.targetPgIdx;this.targetPgIdx=null;const p=this.targetLangVoiceKey;console.log(s,p),this.assignment.pages[s].langVoiceKey=p,this.reStore.courses.pgIdx==this.targetPgIdx&&(this.reStore.page.langVoiceKey=p)},restorePage(e){console.log("Pager restorePage ",e);const s=this.reStore.courses.ck,p=this.reStore.courses.aid;console.log("Pager ",e,s,p),console.log(this.reStore.courses[s]),console.log(this.reStore.courses[s].assignments),console.log(this.reStore.courses[s].assignments[p]),this.assignment.pages[e]=JSON.parse(JSON.stringify(this.reStore.courses[s].assignments[p].pages[e])),this.reStore.courses.pgIdx==e&&(this.reStore.page=JSON.parse(JSON.stringify(this.reStore.courses[s].assignments[p].pages[e])))},resetPage(){this.reStore.newPage()},newPage(){console.log("PagerComponent newPageCB "),this.reStore.newPage()},updateAssignmentTitle(){console.log("Pager updateAssignmentTitle",this.assignment.title);const e=this.reStore.courses.ck,s=this.reStore.courses.aid;this.reStore.courses[e].assignments[s].title=this.assignment.title},updatePageTitle(){console.log("updatePageTitle",this.reStore.page.pageTitle);const e=this.reStore.courses.ck,s=this.reStore.courses.aid,p=this.reStore.courses.pgIdx;this.reStore.courses[e].assignments[s].pages[p].pageTitle=this.reStore.page.pageTitle},updatePage(e){this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages[e]=this.assignment.pages[e],e===this.reStore.courses.pgIdx&&(this.assignment.pages[e].pageText=Tt(H("#slideTextDiv").html()),this.assignment.pages[e].imgs[this.assignment.pages[e].imgIdx].cap=Tt(H("#slideCaptionDiv").html()),this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e]))),this.reStore.saveCurrentAssignment(),this.reStore.courses.trigger+=1},updateAllPages(){for(var e=0;e<this.assignment.pages.length;e++)this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages[e]=JSON.parse(JSON.stringify(this.assignment.pages[e])),e===this.reStore.courses.pgIdx&&(this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e])));this.reStore.saveCurrentAssignment(),this.reStore.courses.trigger+=1},nextImg(e){const s=this.assignment.pages[e].imgIdx,p=this.assignment.pages[e].imgs.length;s+1<p?this.assignment.pages[e].imgIdx+=1:this.assignment.pages[e].imgIdx=0},prevImg(e){const s=this.assignment.pages[e].imgIdx,p=this.assignment.pages[e].imgs.length;s-1>-1?this.assignment.pages[e].imgIdx-=1:this.assignment.pages[e].imgIdx=p-1},loadCoverCB(){console.log("Pager loadCoverCB "),this.reStore.loadCover()},takeStorePage(e){this.assignment.pages[e]=JSON.parse(JSON.stringify(this.reStore.page)),this.reStore.courses.trigger+=1},loadPageCB(e){console.log("Pager loadPageCB ",e),this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e])),this.reStore.courses.pgIdx=e,this.reStore.page.imgIdx=this.assignment.pages[e].imgIdx,this.reStore.courses.imgIdx=this.assignment.pages[e].imgIdx,qe(".assignment").classed("hidden",!1),qe(".coverslide").classed("hidden",!0),this.reStore.courses.trigger+=1},remove(e){console.log("remove ",e);const s=this.reStore.ck,p=this.reStore.aid;this.assignment.pages.splice(e,1),this.reStore.courses[s].assignments[p].pages.splice(e,1),this.reStore.courses.trigger+=1},mapCB(e){const s="https://maps.google.com/?ll="+this.assignment.pages[e].mapCoords.split(",")[0]+","+this.assignment.pages[e].mapCoords.split(",")[1];window.open(s,"_blank")},dummy(){console.log("dummy")}}}),Ts=d("div",{class:"text-h6"},"Percent Replace",-1),Ps=d("div",{class:"text-h6"},"Guide Words",-1),xs=d("div",{class:"text-h6"},"Assignment Title",-1),Bs=d("div",{class:"text-h6"},"Page Title",-1),Ks=d("div",{class:"text-h6"},"Set Current Language",-1),Ms={width:"100%"},Ns={class:"flex flex-center"},Rs={class:"text-weight-bolder text-center q-pa-xs"},Us={key:0},Hs={class:"text-weight-bolder text-center q-pa-xs"},Os={key:0},As={class:"text-weight-bolder text-center q-pa-xs"},Is={key:1},Ls={class:"flex flex-row justify-between"},zs={class:""},Qs={class:""},Ys=["onClick"],Es={key:0,class:"fi fi-gb"},Ws={key:1,class:"fi fi-us"},Js={key:2,class:"fi fi-mx"},Fs={key:3,class:"fi fi-fr"},Gs={key:4,class:"fi fi-de"},js={key:5,class:"fi fi-it"},Xs={key:6,class:"fi fi-br"},Zs={key:7,class:"fi fi-ke"},eo={key:8,class:"fi fi-ru"},to={key:9,class:"fi fi-th"},ao={key:10,class:"fi fi-cn"},so={key:11,class:"fi fi-hk"},oo={key:12,class:"fi fi-tw"},lo={key:13,class:"fi fi-kr"},no={key:14,class:"fi fi-jp"},io={key:15,class:"fi fi-id"},ro={key:16,class:"fi fi-xx"},uo=d("br",null,null,-1),co={class:""},mo={class:""},go={class:""},ho={class:""},fo={class:""},po=d("br",null,null,-1),vo={key:0};function yo(e,s,p,B,D,A){const r=W("router-link");return u(),g(j,null,[a(ae,{modelValue:e.promptPctReplace,"onUpdate:modelValue":s[2]||(s[2]=i=>e.promptPctReplace=i),persistent:""},{default:l(()=>[a(T,{style:{"min-width":"350px"}},{default:l(()=>[a(N,null,{default:l(()=>[Ts]),_:1}),a(N,{class:"q-pt-none"},{default:l(()=>[d("table",null,[d("tr",null,[d("td",null,[a(Pt,{"show-value":"",class:"text-white q-ma-md",modelValue:e.targetPctReplace,"onUpdate:modelValue":s[0]||(s[0]=i=>e.targetPctReplace=i),size:"90px",thickness:.2,color:"grey-5","track-color":"secondary","center-color":"positive",min:"0",max:"100"},null,8,["modelValue","thickness"])])])])]),_:1}),a(te,{align:"right"},{default:l(()=>[R(a(k,{outline:"",label:"Cancel"},null,512),[[U]]),R(a(k,{outline:"",label:"Update percent replace",onClick:s[1]||(s[1]=i=>this.updatePctReplaceCB())},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(ae,{modelValue:e.promptGuideWords,"onUpdate:modelValue":s[6]||(s[6]=i=>e.promptGuideWords=i),persistent:""},{default:l(()=>[a(T,{style:{"min-width":"350px"}},{default:l(()=>[a(N,null,{default:l(()=>[Ps]),_:1}),a(N,{class:"q-pt-none"},{default:l(()=>[a(se,{dense:"",modelValue:this.targetGuideWords,"onUpdate:modelValue":s[3]||(s[3]=i=>this.targetGuideWords=i),autofocus:"",onKeyup:s[4]||(s[4]=Ue(i=>e.promptGuideWords=!1,["enter"]))},null,8,["modelValue"])]),_:1}),a(te,{align:"right"},{default:l(()=>[R(a(k,{outline:"",label:"Cancel"},null,512),[[U]]),R(a(k,{outline:"",label:"Update guide words",onClick:s[5]||(s[5]=i=>this.updateGuideWordsCB())},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(ae,{modelValue:e.promptAssignmentTitle,"onUpdate:modelValue":s[10]||(s[10]=i=>e.promptAssignmentTitle=i),persistent:""},{default:l(()=>[a(T,{style:{"min-width":"350px"}},{default:l(()=>[a(N,null,{default:l(()=>[xs]),_:1}),a(N,{class:"q-pt-none"},{default:l(()=>[a(se,{dense:"",modelValue:this.assignment.title,"onUpdate:modelValue":s[7]||(s[7]=i=>this.assignment.title=i),autofocus:"",onKeyup:s[8]||(s[8]=Ue(i=>e.promptAssignmentTitle=!1,["enter"]))},null,8,["modelValue"])]),_:1}),a(te,{align:"right"},{default:l(()=>[R(a(k,{outline:"",label:"Cancel"},null,512),[[U]]),R(a(k,{outline:"",label:"Update assignment title",onClick:s[9]||(s[9]=i=>this.updateAssignmentTitle())},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(ae,{modelValue:e.promptPageTitle,"onUpdate:modelValue":s[14]||(s[14]=i=>e.promptPageTitle=i),persistent:""},{default:l(()=>[a(T,{style:{"min-width":"350px"}},{default:l(()=>[a(N,null,{default:l(()=>[Bs]),_:1}),a(N,{class:"q-pt-none"},{default:l(()=>[a(se,{dense:"",modelValue:this.reStore.page.pageTitle,"onUpdate:modelValue":s[11]||(s[11]=i=>this.reStore.page.pageTitle=i),autofocus:"",onKeyup:s[12]||(s[12]=Ue(i=>e.promptAssignmentTitle=!1,["enter"]))},null,8,["modelValue"])]),_:1}),a(te,{align:"right"},{default:l(()=>[R(a(k,{outline:"",label:"Cancel"},null,512),[[U]]),R(a(k,{outline:"",label:"Update page title",onClick:s[13]||(s[13]=i=>this.updatePageTitle())},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(ae,{modelValue:e.promptLanguage,"onUpdate:modelValue":s[16]||(s[16]=i=>e.promptLanguage=i),persistent:""},{default:l(()=>[a(T,{style:{"min-width":"350px"}},{default:l(()=>[a(N,null,{default:l(()=>[Ks]),_:1}),a(N,{class:"q-pt-none"},{default:l(()=>[d("table",Ms,[d("tr",null,[d("td",null,[a(st,{modelValue:this.targetLangVoiceKey,"onUpdate:modelValue":[s[15]||(s[15]=i=>this.targetLangVoiceKey=i),this.setLangVoiceCB],options:e.langVoices},null,8,["modelValue","options","onUpdate:modelValue"])])])])]),_:1}),a(te,{align:"right",class:"text-white"},{default:l(()=>[R(a(k,{outline:"",flat:"",label:"Close"},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(T,{flat:"",style:{"max-width":"300px"},class:"q-pa-xs"},{default:l(()=>[a(N,null,{default:l(()=>[this.assignment?(u(),Q(T,{key:0,class:"bg-primary q-pa-xs q-my-md",flat:"",bordered:""},{default:l(()=>[a(ie,null,{header:l(()=>[a(O,{avatar:""},{default:l(()=>[a(me,{size:"md",color:"positive",icon:"assignment"})]),_:1}),a(O,null,{default:l(()=>[f(b(this.assignment.title),1)]),_:1})]),default:l(()=>[d("div",Ns,b(this.reStore.courses.ck.slice(0,3))+" | "+b(this.reStore.courses.aid.slice(0,3))+" | "+b(this.reStore.courses.pageid)+" | "+b(this.reStore.courses.imgIdx)+" | "+b(this.reStore.courses.pgIdx)+" | "+b(this.reStore.courses.trigger)+" | "+b(this.reStore.mode),1),d("div",Rs,[f("Course: "),this.reStore.courses.ck?(u(),g("span",Us,b(this.reStore.courses[this.reStore.courses.ck].title),1)):X("",!0)]),d("div",Hs,[f(" Title: "),this.assignment?(u(),g("span",Os,[a(r,{to:"/teacher/editor",class:"text-white"},{default:l(()=>[f(b(this.assignment.title)+" ",1),a(x,null,{default:l(()=>[f("Go to Editor")]),_:1})]),_:1}),a(q,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:s[17]||(s[17]=i=>e.promptAssignmentTitle=!0),size:"sm"}),a(q,{style:{cursor:"pointer"},class:"on-right",name:"save",onClick:s[18]||(s[18]=i=>this.reStore.saveCurrentAssignment()),size:"sm"})])):X("",!0)]),d("div",As,[f(" Page "+b(this.reStore.courses.pgIdx)+": "+b(this.reStore.page.pageTitle.slice(0,5))+" ",1),a(q,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:s[19]||(s[19]=i=>this.promptPageTitle=!0),size:"sm"}),a(q,{class:"hidden on-right",name:"replay",onClick:this.resetPage,size:"sm"},null,8,["onClick"]),a(q,{class:"on-right",name:"add_circle",onClick:this.newPage,size:"sm"},null,8,["onClick"]),a(q,{class:"on-right",name:"volume_up",onClick:s[20]||(s[20]=i=>this.reStore.speak()),size:"sm"})])]),_:1})]),_:1})):X("",!0),this.assignment?(u(),g("span",Is,[a(T,{class:"bg-primary q-pa-xs q-my-md",flat:"",bordered:""},{default:l(()=>[a(ie,{modelValue:e.coverExpanded,"onUpdate:modelValue":s[21]||(s[21]=i=>e.coverExpanded=i)},{header:l(()=>[a(O,{avatar:""},{default:l(()=>[a(me,{size:"md",color:"positive",icon:"insert_photo"})]),_:1}),a(O,null,{default:l(()=>[f(" Cover Image ")]),_:1})]),default:l(()=>[a(He,{src:this.assignment.coverUrl,onClick:e.loadCoverCB},null,8,["src","onClick"])]),_:1},8,["modelValue"])]),_:1}),(u(!0),g(j,null,ge(this.assignment.pages,(i,y)=>(u(),Q(T,{class:"bg-primary q-pa-xs q-my-md",flat:"",bordered:"",modelValue:this.assignment.pages,"onUpdate:modelValue":s[24]||(s[24]=$=>this.assignment.pages=$),key:y},{default:l(()=>[a(ie,null,{header:l(()=>[a(O,null,{default:l(()=>[a(_a,{modelValue:i.isCustom,"onUpdate:modelValue":$=>i.isCustom=$,color:"positive",icon:"shuffle","checked-icon":"check"},{default:l(()=>[a(x,null,{default:l(()=>[f(b(i.isCustom?"Custom":"Random"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(O,null,{default:l(()=>[f(b(i.pageTitle.slice(0,10)),1)]),_:2},1024)]),default:l(()=>[d("span",Ls,[d("span",zs,[a(q,{size:"sm",name:"input",onClick:$=>e.takeStorePage(y)},{default:l(()=>[a(x,null,{default:l(()=>[f(" Pull editor page contents to this Page ")]),_:1})]),_:2},1032,["onClick"])]),a(q,{class:"",name:"save",onClick:$=>this.updatePage(y),size:"sm"},{default:l(()=>[a(x,null,{default:l(()=>[f("Update & Save current page")]),_:1})]),_:2},1032,["onClick"]),d("span",Qs,[a(q,{size:"sm",name:"delete",onClick:$=>e.remove(y)},null,8,["onClick"])]),d("span",{class:"",onClick:$=>this.setPageLang(y)},[i.langVoiceKey==="Eng-UK-Fem"?(u(),g("span",Es)):i.langVoiceKey==="Eng-US"?(u(),g("span",Ws)):i.langVoiceKey==="espa\xF1ol"?(u(),g("span",Js)):i.langVoiceKey==="fran\xE7ais"?(u(),g("span",Fs)):i.langVoiceKey==="Deutsch"?(u(),g("span",Gs)):i.langVoiceKey==="italiano"?(u(),g("span",js)):i.langVoiceKey==="portugu\xEAs do Brasil"?(u(),g("span",Xs)):i.langVoiceKey==="Kiswahili"?(u(),g("span",Zs)):i.langVoiceKey==="\u0440\u0443\u0441\u0441\u043A\u0438\u0439"?(u(),g("span",eo)):i.langVoiceKey==="\u0E44\u0E17\u0E22"?(u(),g("span",to)):i.langVoiceKey==="\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09"?(u(),g("span",ao)):i.langVoiceKey==="\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09"?(u(),g("span",so)):i.langVoiceKey==="\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09"?(u(),g("span",oo)):i.langVoiceKey==="\uD55C\uAD6D\uC758"?(u(),g("span",lo)):i.langVoiceKey==="\u65E5\u672C\u8A9E"?(u(),g("span",no)):i.langVoiceKey==="Bahasa Indonesia"?(u(),g("span",io)):(u(),g("span",ro)),a(x,null,{default:l(()=>[f(b(i.langVoiceKey)+" ",1),uo,f(" Click to set language for this page ")]),_:2},1024)],8,Ys),d("span",co,[a(q,{name:"location_on",size:"sm",onClick:$=>e.mapCB(y)},{default:l(()=>[a(x,null,{default:l(()=>[f(" Launch Google Maps: "+b(i.mapCoords),1)]),_:2},1024)]),_:2},1032,["onClick"])]),d("span",mo,[a(q,{name:"restore_page",size:"sm",onClick:$=>e.restorePage(y)},{default:l(()=>[a(x,null,{default:l(()=>[f("Restore page to saved values")]),_:1})]),_:2},1032,["onClick"])]),d("span",go,[a(q,{name:"percent",size:"sm",onClick:$=>e.pctCB(y)},{default:l(()=>[a(x,null,{default:l(()=>[f("Set percentage of words to replace from paragraph on this page.")]),_:1})]),_:2},1032,["onClick"])]),d("span",ho,[a(q,{name:"language",size:"sm",onClick:$=>e.wpCB(y)},{default:l(()=>[a(x,null,{default:l(()=>[f("Wikipedia page "+b(i.pageid)+" "+b(i.canonical_url),1)]),_:2},1024)]),_:2},1032,["onClick"])]),d("span",fo,[a(q,{name:"signpost",size:"sm",onClick:$=>e.gwCB(y)},{default:l(()=>[a(x,null,{default:l(()=>[f("Update the guide-words for this page:"),po,f(b(i.guideWords),1)]),_:2},1024)]),_:2},1032,["onClick"])])]),i.imgs.length>i.imgIdx?(u(),g("span",vo,[a(k,{fab:"","label-position":"left",color:"primary",icon:"arrow_left",onClick:[$=>this.prevImg(y),s[22]||(s[22]=kt(()=>{},["stop","prevent"]))],padding:"xs",class:"float-left text-h5 z-max",style:{top:"100px"}},null,8,["onClick"]),a(k,{fab:"","label-position":"right",color:"primary",icon:"arrow_right",onClick:[$=>this.nextImg(y),s[23]||(s[23]=kt(()=>{},["stop","prevent"]))],padding:"xs",class:"float-right text-h5 z-max",style:{top:"100px"}},null,8,["onClick"]),a(He,{height:"200px",src:i.imgs[i.imgIdx].url,onClick:$=>e.loadPageCB(y)},null,8,["src","onClick"])])):X("",!0)]),_:2},1024)]),_:2},1032,["modelValue"]))),128))])):X("",!0)]),_:1})]),_:1})],64)}var _o=fe(qs,[["render",yo]]);const So=he({name:"MyHistory",setup(){return{reStore:pe(),enabledLabel:_("History Enabled")}},mounted(){},methods:{load(e){console.log(e),console.log(this.reStore.myhistory[e]),this.reStore.loadHistory(e)},remove(e){console.log(e),this.reStore.myhistory=this.reStore.myhistory.slice(0,e).concat(this.reStore.myhistory.slice(e+1,1e3))}}}),ko={class:"q-pa-md",style:{"max-width":"350px"}},Co={class:"row cardheader justify-between"},Vo=["onClick"],bo={class:"history-remove"};function wo(e,s,p,B,D,A){return u(),g("div",ko,[a(Te,{bordered:"",class:"rounded-borders"},{default:l(()=>[a(ie,null,{header:l(()=>[a(O,{avatar:""},{default:l(()=>[a(me,{size:"md",color:"positive",icon:"history"})]),_:1}),a(O,null,{default:l(()=>[f(" Page History ")]),_:1})]),default:l(()=>[(u(!0),g(j,null,ge(this.reStore.myhistory,(r,i)=>(u(),Q(T,{class:"cardcontainer",flat:"",bordered:"",modelValue:this.reStore.myhistory,"onUpdate:modelValue":s[0]||(s[0]=y=>this.reStore.myhistory=y),key:i},{default:l(()=>[d("div",Co,[d("span",{class:"history-title col-grow",onClick:y=>this.load(i)},b(i)+" "+b(r.pageTitle.slice(0,25)),9,Vo),d("span",bo,[a(q,{name:"close",onClick:y=>this.remove(i)},null,8,["onClick"])])])]),_:2},1032,["modelValue"]))),128))]),_:1})]),_:1})])}var $o=fe(So,[["render",wo]]);const Do=he({name:"TeacherLayout",components:{PagerComponent:_o,DocumentationComponent:fa,SearchComponent:xa,ImagesComponent:Oa,BookmarksComponent:us,OTDComponent:Ds,PreferencesComponent:ta,AssignmentStatus:pa,MyHistory:$o},setup(){const e=_(!1),s=_(!1),p=pe(),B=p.preferences,D=_(null),A=_(null);return{step:_(1),reStore:p,initialValues:_(B),scrollAreaRHS:D,scrollAreaLHS:A,leftDrawerOpen:e,rightDrawerOpen:s,flagName:_(p.langVoices[p.preferences.langVoiceKey].flagName),promptLanguage:_(!1),langVoices:_(p.preferences.langVoices),toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){s.value=!s.value}}},mounted(){Ct.isActive||(Ct.toggle(),et("primary","#333"),et("secondary",this.initialValues.secondaryColor),et("accent",this.initialValues.accentColor),this.flagName=this.reStore.langVoices[this.reStore.prefereneces.langVoiceKey].flagName,qe(".pfi").classed(this.flagName,!0))},methods:{goEditor(){this.reStore.mode="editor",this.reStore.router.push("/teacher/editor")},goAssignment(){this.reStore.mode="assignment",this.reStore.router.push("/teacher/assignment")},setRHS(e){e==="pager"?(H("#advancedDiv").classed("hidden",!0),H("#pagerDiv").classed("hidden",!1),H("#statusDiv").classed("hidden",!0)):e==="status"?(H("#advancedDiv").classed("hidden",!0),H("#pagerDiv").classed("hidden",!0),H("#statusDiv").classed("hidden",!1)):(H("#advancedDiv").classed("hidden",!1),H("#pagerDiv").classed("hidden",!0),H("#statusDiv").classed("hidden",!0))},scrollTopRHS(){this.scrollAreaRHS.setScrollPosition("vertical",0)},scrollTopLHS(){this.scrollAreaLHS.setScrollPosition("vertical",0)},setLangVoiceCB(e){this.flagName=this.reStore.langVoices[e].flagName;for(const[s,p]of Object.entries(this.reStore.langVoices)){const B=p.flagName;qe(".pfi").classed(B,!1)}qe(".pfi").classed(this.flagName,!0),console.log("langVoiceKey set to ",e,this.flagName),this.reStore.courses.trigger+=1}}}),qo=d("div",{class:"text-h6"},"Set Current Language",-1),To={width:"100%"},Po=d("span",{class:"pfi fi fi-xx"},null,-1),xo=d("br",null,null,-1),Bo=d("br",null,null,-1),Ko={class:"dashboard-wrapper"},Mo=d("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),No={class:"hidden"},Ro=d("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),Uo={id:"pagerDiv"},Ho={key:0},Oo={key:1},Ao={class:"q-gutter-y-sm"},Io={id:"advancedDiv",class:"hidden"},Lo=d("span",{class:"hidden"},null,-1),zo={key:0},Qo={key:1},Yo={class:"q-gutter-y-sm"},Eo={id:"statusDiv",class:"hidden"},Wo={key:0},Jo={key:1},Fo={class:"q-gutter-y-sm"};function Go(e,s,p,B,D,A){const r=W("router-view"),i=W("DocumentationComponent"),y=W("SearchComponent"),$=W("BookmarksComponent"),Z=W("OTDComponent"),ve=W("ImagesComponent"),Ae=W("MyHistory"),Ie=W("PreferencesComponent"),be=W("PagerComponent"),J=W("router-link"),K=W("AssignmentStatus");return u(),Q(ua,{view:"hHh LpR fFf"},{default:l(()=>[a(ia,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:l(()=>[a(ae,{modelValue:e.promptLanguage,"onUpdate:modelValue":s[1]||(s[1]=M=>e.promptLanguage=M),persistent:""},{default:l(()=>[a(T,{style:{"min-width":"350px"}},{default:l(()=>[a(N,null,{default:l(()=>[qo]),_:1}),a(N,{class:"q-pt-none"},{default:l(()=>[d("table",To,[d("tr",null,[d("td",null,[a(st,{modelValue:this.reStore.preferences.langVoiceKey,"onUpdate:modelValue":[s[0]||(s[0]=M=>this.reStore.preferences.langVoiceKey=M),this.setLangVoiceCB],options:e.langVoices},null,8,["modelValue","options","onUpdate:modelValue"])])])])]),_:1}),a(te,{align:"right",class:"text-white"},{default:l(()=>[R(a(k,{outline:"",flat:"",label:"Close"},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(Ve,null,{default:l(()=>[a(k,{icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),a(na,null,{default:l(()=>[a(k,{onClick:s[2]||(s[2]=M=>this.reStore.router.push("/teacher"))},{default:l(()=>[a(q,{name:"home",color:"white"},{default:l(()=>[a(x,null,{default:l(()=>[f("Return to My Teacher Page")]),_:1})]),_:1})]),_:1})]),_:1}),a(k,{onClick:s[3]||(s[3]=M=>this.reStore.router.push("/teacher"))},{default:l(()=>[a(q,{name:"home",color:"white"},{default:l(()=>[a(x,null,{default:l(()=>[f("Return to My Teacher Page")]),_:1})]),_:1})]),_:1}),a(k,{onClick:s[4]||(s[4]=M=>e.promptLanguage=!0)},{default:l(()=>[Po,a(x,null,{default:l(()=>[f("Set current language "),xo,f("Applied to new pages/searches."),Bo,f("Sync current page using sync-lang button.")]),_:1})]),_:1}),this.reStore.mode=="assignment"?(u(),Q(k,{key:0,onClick:s[5]||(s[5]=M=>this.goEditor()),icon:"switch_account"},{default:l(()=>[a(x,null,{default:l(()=>[f(" Switch from Assignment to Editor Mode ")]),_:1})]),_:1})):this.reStore.mode=="editor"?(u(),Q(k,{key:1,onClick:s[6]||(s[6]=M=>this.goAssignment()),icon:"switch_account"},{default:l(()=>[a(x,null,{default:l(()=>[f(" Switch from Editor to Assignment Mode ")]),_:1})]),_:1})):X("",!0),this.reStore.authenticated?(u(),Q(k,{key:2,onClick:s[7]||(s[7]=M=>this.reStore.router.push("/student")),icon:"switch_account"},{default:l(()=>[a(x,null,{default:l(()=>[f(" Switch between Teacher or Student role ")]),_:1})]),_:1})):X("",!0),this.reStore.authenticated?(u(),Q(k,{key:3,icon:"logout",onClick:s[8]||(s[8]=M=>this.reStore.logout())})):X("",!0),a(k,{icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1})]),_:1}),a(ra,{class:"container-fluid"},{default:l(()=>[d("div",Ko,[a(r)]),a(Vt,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":s[9]||(s[9]=M=>e.leftDrawerOpen=M),side:"left"},{default:l(()=>[a(Ve,{flat:"",class:"bg-primary text-white"},{default:l(()=>[a(Oe),a(k,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopLHS},{default:l(()=>[a(x,null,{default:l(()=>[f("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),Mo,a(bt,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaLHS"},{default:l(()=>[a(i),a(y),a($),a(Z),a(ve),a(Ae),a(Ie,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"]),a(Vt,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":s[12]||(s[12]=M=>e.rightDrawerOpen=M),side:"right"},{default:l(()=>[a(Ve,{flat:"",class:"bg-primary text-white"},{default:l(()=>[d("span",No,[a(k,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),a(wt,{dark:"",vertical:"",inset:""}),a(k,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),a(wt,{dark:"",vertical:"",inset:""})]),a(da,{dense:"",align:"left"},{default:l(()=>[a(_t,{icon:"theaters",onClick:s[10]||(s[10]=M=>this.setRHS("pager"))},{default:l(()=>[a(x,null,{default:l(()=>[f("Visual Assignment Builder")]),_:1})]),_:1}),a(_t,{icon:"summarize",onClick:s[11]||(s[11]=M=>this.setRHS("status"))},{default:l(()=>[a(x,null,{default:l(()=>[f("Status while taking assignment")]),_:1})]),_:1})]),_:1}),a(Oe),a(k,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopRHS},{default:l(()=>[a(x,null,{default:l(()=>[f("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),Ro,a(bt,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaRHS"},{default:l(()=>[d("div",Uo,[this.reStore.courses.aid?(u(),g("span",Ho,[a(be)])):(u(),g("span",Oo,[d("div",Ao,[a(T,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:l(()=>[f(" No current assignment. You can load an assignment at the "),d("u",null,[a(J,{to:"/teacher",class:"text-white ptr"},{default:l(()=>[f("Teacher Dashboard")]),_:1})]),f(". ")]),_:1})])]))]),d("div",Io,[Lo,this.reStore.courses.aid?(u(),g("span",zo)):(u(),g("span",Qo,[d("div",Yo,[a(T,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:l(()=>[f(" No current assignment. You can load an assignment at the "),d("u",null,[a(J,{to:"/teacher",class:"text-white ptr"},{default:l(()=>[f("Teacher Dashboard")]),_:1})]),f(". ")]),_:1})])]))]),d("div",Eo,[this.reStore.courses.aid?(u(),g("span",Wo,[a(K)])):(u(),g("span",Jo,[d("div",Fo,[a(T,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:l(()=>[f(" No current assignment. You can load an assignment at the "),d("u",null,[a(J,{to:"/teacher",class:"text-white ptr"},{default:l(()=>[f("Teacher Dashboard")]),_:1})]),f(". ")]),_:1})])]))])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var kl=fe(Do,[["render",Go]]);export{kl as default};
