import{Q as y}from"./QPage.700ad262.js";import{u as C,s as u}from"./re-store.b87a5479.js";import{Q as B}from"./QBanner.97f76202.js";import{Q as h}from"./QImg.6e72f900.js";import{Q as p}from"./QCard.b91a836c.js";import{Q as _}from"./QTooltip.0ecd756a.js";import{e as k,r as P,u as Q,_ as v,o as n,f as g,w as t,k as o,g as r,ar as c,aq as f,at as E,aH as $,i as w,j as S,Q as A,aG as N,l as V}from"./index.1d356e18.js";import"./transform.aea72fbe.js";import"./firebase.79bf92f9.js";import"./index.2cf0d985.js";import"./use-dark.04fe2716.js";import"./scroll.f4960302.js";const q=k({name:"AssignmentEditor",setup(){return{reStore:C(),assignment:P(null)}},mounted(){console.log("AE mounted"),Q(this.reStore.courses,async(e,s)=>{if(console.log("AE watcher ",e,s),!this.assignment||this.assignment.id!==e.aid){const d=this.reStore.courses.ck,m=this.reStore.courses.aid;this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[d].assignments[m]))}});try{if(!this.assignment||this.assignment.id!==newObj.aid){const e=this.reStore.courses.ck,s=this.reStore.courses.aid;this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e].assignments[s]))}}catch(e){console.log(e)}},methods:{pgCB(e){console.log("AE pgCB ",e),this.reStore.courses.selectedRHSTab="pagerTab"},deletePageCB(e){},async loadPageCB(e){console.log("Pager loadPageCB ",e),this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e])),this.reStore.courses.pgIdx=e,this.reStore.page.imgIdx=this.assignment.pages[e].imgIdx,this.reStore.courses.imgIdx=this.assignment.pages[e].imgIdx,u(".assignment").classed("hidden",!1),u(".coverslide").classed("hidden",!0),this.reStore.courses.trigger+=1,this.reStore.page.isCustom||(console.log("calling restore.reloadPage"),await this.reStore.reloadPage(),this.reStore.courses.trigger+=1),this.reStore.mode==="editor"?this.reStore.router.push("/teacher/editor"):this.reStore.router.push("/teacher/assignment")},dummy(){console.log("dummy")}}}),J={class:"q-pa-md"},O={class:"text-weight-bolder text-center text-h4 q-pa-md"},T={key:0,class:"flex flex-row justify-center"},j=o("div",{class:"absolute-top text-center",style:{"background-color":"#2228",height:"100%"}},[o("div",{class:"atit"},"p00. Cover")],-1),U={class:"absolute-top text-center",style:{"background-color":"#2228",height:"100%"}},D={class:"atit"},H={style:{"font-size":"22pt",width:"100%"},class:"text-center absolute-bottom"};function R(e,s,d,m,b,x){return n(),g(y,{class:"q-gutter-md bg-primary",style:{width:"100%"}},{default:t(()=>[o("div",J,[r(B,{class:"bg-positive text-white"},{default:t(()=>[o("div",O,c(this.reStore.courses[this.reStore.courses.ck].title)+"."+c(this.reStore.courses[this.reStore.courses.ck].assignments[this.reStore.courses.aid].title),1)]),_:1})]),this.assignment?(n(),f("div",T,[r(p,{class:"acard bg-primary q-ma-sm",flat:"",bordered:"",modelValue:this.assignment.pages,"onUpdate:modelValue":s[0]||(s[0]=a=>this.assignment.pages=a)},{default:t(()=>[r(h,{class:"aimg",src:this.assignment.coverUrl},{default:t(()=>[j]),_:1},8,["src"])]),_:1},8,["modelValue"]),(n(!0),f(E,null,$(this.assignment.pages,(a,i)=>(n(),g(p,{class:"acard bg-primary q-ma-sm",flat:"",bordered:"",modelValue:this.assignment.pages,"onUpdate:modelValue":s[1]||(s[1]=l=>this.assignment.pages=l),key:i},{default:t(()=>[r(h,{class:"aimg",src:a.imgs[a.imgIdx].url,onClick:l=>this.pgCB(i)},{default:t(()=>[o("div",U,[o("div",D,"p"+c(i+1)+". "+c(a.pageTitle.slice(0,10)),1)]),o("div",H,[o("div",null,[r(w,{class:"ptr",name:"delete",onClick:l=>this.deletePageCB(i)},{default:t(()=>[r(_,null,{default:t(()=>[S("Delete Page")]),_:1})]),_:2},1032,["onClick"]),r(A,{icon:"edit",onClick:l=>this.loadPageCB(i)},{default:t(()=>[r(_,null,{default:t(()=>[S("Edit Page")]),_:1})]),_:2},1032,["onClick"])])])]),_:2},1032,["src","onClick"])]),_:2},1032,["modelValue"]))),128))])):N("",!0)]),_:1})}var z=v(q,[["render",R]]);const F=k({name:"AssignmentEditorPage",components:{AssignmentEditor:z},setup(e){const s=C();return{props:e,reStore:s}}});function G(e,s,d,m,b,x){const a=V("AssignmentEditor");return n(),g(y,{id:"QPage",class:"row justify-center"},{default:t(()=>[r(a)]),_:1})}var oe=v(F,[["render",G]]);export{oe as default};
