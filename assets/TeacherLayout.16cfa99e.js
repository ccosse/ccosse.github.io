import{Q as U}from"./QCardSection.f9d46400.js";import{Q as qt,u as jt,a as lt,P as Xt,S as Zt,b as St}from"./ScoreCard.83e8a8cc.js";import{e as le,r as y,u as W,_ as ne,o as d,an as c,g as t,w as o,O as H,Q as _,k as n,ao as ae,j as m,ap as k,aO as Te,f as O,i as x,ar as J,as as ce,aq as E,a as V,c as xt,aB as es,h as C,T as Pe,d as ts,y as ss,q as Ct,W as as,l as I,at as tt,P as kt,s as st}from"./index.c828c6c3.js";import{d as ee,C as M,Q as te}from"./ClosePopup.6dc627a5.js";import{Q as D}from"./QCard.5d6afa29.js";import{Q as T}from"./QTooltip.18034685.js";import{Q as Ne,D as os,A as ls}from"./DocumentationComponent.3471d41f.js";import{Q as qe,a as ns,b as Vt,c as bt,d as rs,e as is}from"./QLayout.e8839bfc.js";import{Q as X,a as R,e as $t}from"./QExpansionItem.dea6ae11.js";import{Q as us}from"./QTabs.776992bb.js";import{u as re,p as pe,t as ds,a as wt,f as cs,g as ms,j as at,_ as hs,d as Dt,s as xe}from"./re-store.cd501dae.js";import{Q as se}from"./QInput.1fa4f977.js";import{Q as me}from"./QList.9392daa0.js";import{s as B}from"./transform.aea72fbe.js";import{Q as Ve}from"./QImg.3e1e341c.js";import{u as gs,a as fs}from"./use-dark.98cfec29.js";import{u as ps,a as vs,b as ys}from"./use-form.3bbfefaa.js";import{Q as _s}from"./QToggle.16679149.js";import"./use-key-composition.d7dab9a1.js";import"./uid.42677368.js";import"./scroll.91926555.js";import"./use-prevent-scroll.dc91eccf.js";import"./QCheckbox.38a54b5c.js";import"./firebase.79bf92f9.js";import"./index.2cf0d985.js";const Ss=le({name:"SearchComponent",setup(){const e=re(),s=y("");return{reStore:e,searchTerms:s,searchSize:y(e.preferences.resLimit),searchResults:y([]),promptSearchSize:y(!1)}},mounted(){W(this.reStore.preferences,async(p,q)=>{console.log("watcher ",p,q),this.searchSize=p.resLimit;for(const[N,u]of Object.entries(this.reStore.langVoices))B("#sfi").classed(u.flagName,!1);const P=this.reStore.preferences.langVoiceKey;B("#sfi").classed(this.reStore.langVoices[P].flagName,!0)});const e=this.reStore.preferences.langVoiceKey,s=this.reStore.langVoices[e].flagName;B("#sfi").classed(s,!0)},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchResults.splice(e,1)},async load(e){console.log(e),console.log(this.searchResults[e]);const s=this.reStore.preferences.langVoiceKey;console.log("calling loadPageId ",this.searchResults[e].pageid,s),await this.reStore.loadPageId(this.searchResults[e].pageid,s),this.reStore.page.imgIdx=0,this.reStore.courses.trigger+=1},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("doSearch ",e,this.searchTerms),this.reStore.wiki.setLang(e.langName);const s=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",s.results.length),this.searchResults=s.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),Cs=n("div",{class:"text-h6"},"Search Results Size",-1),ks={class:"q-pa-md",style:{"max-width":"350px"}},Vs={class:"q-gutter-y-sm column"},bs=n("span",{class:"on-right text-h2",id:"sfi"},null,-1),$s={key:0},ws={class:"row cardheader ptr justify-between"},Ds=["onClick"],Ps={class:"history-remove"};function Ts(e,s,p,q,P,N){return d(),c(J,null,[t(te,{modelValue:e.promptSearchSize,"onUpdate:modelValue":s[2]||(s[2]=u=>e.promptSearchSize=u),persistent:""},{default:o(()=>[t(D,{style:{"min-width":"350px"}},{default:o(()=>[t(U,{align:"center"},{default:o(()=>[Cs]),_:1}),t(U,{class:"q-pt-none",align:"center"},{default:o(()=>[t(qt,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":s[0]||(s[0]=u=>e.searchSize=u)},null,8,["modelValue"])]),_:1}),t(ee,{align:"center",class:"text-white"},{default:o(()=>[H(t(_,{flat:"",label:"Cancel"},null,512),[[M]]),H(t(_,{flat:"",label:"Update results size",onClick:s[1]||(s[1]=u=>this.updateSearchSize())},null,512),[[M]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n("div",ks,[t(me,{bordered:"",class:"rounded-borders"},{default:o(()=>[t(X,null,{header:o(()=>[t(R,{avatar:""},{default:o(()=>[t(ae,{size:"md",icon:"search",color:"positive","text-color":"white"})]),_:1}),t(R,null,{default:o(()=>[m(" Search ")]),_:1})]),default:o(()=>[t(D,null,{default:o(()=>[n("div",Vs,[t(qe,{class:"bg-primary text-white rounded-borders q-my-md"},{default:o(()=>[t(_,{dark:"",standout:"",onClick:s[3]||(s[3]=u=>e.promptSearchSize=!0)},{default:o(()=>[m(k(this.searchResults.length)+" ",1),t(T,null,{default:o(()=>[m("Change results limit ("+k(this.searchSize)+")",1)]),_:1})]),_:1}),bs,t(se,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":s[6]||(s[6]=u=>e.searchTerms=u),"input-class":"text-right",class:"q-ml-md",onKeyup:[s[7]||(s[7]=u=>this.update()),s[8]||(s[8]=Te(u=>this.doSearch(),["enter"]))]},{append:o(()=>[e.searchTerms===""?(d(),O(x,{key:0,name:"search",onClick:s[4]||(s[4]=u=>this.doSearch())})):(d(),O(x,{key:1,name:"clear",class:"cursor-pointer",onClick:s[5]||(s[5]=u=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(d(),c("div",$s,[(d(!0),c(J,null,ce(this.searchResults,(u,i)=>(d(),O(D,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":s[9]||(s[9]=S=>this.searchResults=S),key:i},{default:o(()=>[n("div",ws,[n("span",{class:"history-title col-grow",onClick:S=>this.load(i)},k(i)+". "+k(u.title.slice(0,25)),9,Ds),n("span",Ps,[t(x,{class:"primary",size:e.xl,color:e.primary,name:"delete",onClick:S=>this.remove(i)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):E("",!0)]),_:1})]),_:1})]),_:1})])],64)}var qs=ne(Ss,[["render",Ts]]);const xs=le({name:"ImagesComponent",setup(){return{reStore:re(),newCap:y(""),newDesc:y(""),newName:y(""),newSource:y(""),newUrl:y(""),promptAddImage:y(!1)}},mounted(){W(this.reStore.userSnapshot.images,async(e,s)=>{console.log("watcher ",e,s)})},methods:{addImageCB(){console.log("addImageCB",this.newUrl);const e={name:this.newName,desc:this.newDesc,cap:this.newCap,source:this.newSource,url:this.newUrl};this.reStore.saveImage(null,e)},imgCB(e,s){this.reStore.router.push("/teacher/editor"),console.log(e,s),this.reStore.loadImgId(e)},remove(e,s){console.log(e,s),this.reStore.removeImage(e)}}}),As={class:"q-pa-md",style:{"max-width":"350px"}},Bs={class:"flex flex-center q-ma-sm"},Ks={class:"row cardheader justify-between"},Rs={class:""},Us={key:0},Hs={class:"history-remove ptr"};function Ms(e,s,p,q,P,N){return d(),c(J,null,[t(te,{modelValue:e.promptAddImage,"onUpdate:modelValue":s[5]||(s[5]=u=>e.promptAddImage=u)},{default:o(()=>[t(D,null,{default:o(()=>[t(U,null,{default:o(()=>[t(se,{modelValue:e.newCap,"onUpdate:modelValue":s[0]||(s[0]=u=>e.newCap=u),label:"caption"},null,8,["modelValue"]),t(se,{modelValue:e.newDesc,"onUpdate:modelValue":s[1]||(s[1]=u=>e.newDesc=u),label:"description"},null,8,["modelValue"]),t(se,{modelValue:e.newName,"onUpdate:modelValue":s[2]||(s[2]=u=>e.newName=u),label:"name"},null,8,["modelValue"]),t(se,{modelValue:e.newSource,"onUpdate:modelValue":s[3]||(s[3]=u=>e.newSource=u),label:"source"},null,8,["modelValue"]),t(se,{modelValue:e.newUrl,"onUpdate:modelValue":s[4]||(s[4]=u=>e.newUrl=u),label:"url"},null,8,["modelValue"])]),_:1}),t(ee,{align:"center",class:"text-white"},{default:o(()=>[H(t(_,{flat:"",label:"Cancel"},null,512),[[M]]),H(t(_,{flat:"",label:"Add",onClick:this.addImageCB},null,8,["onClick"]),[[M]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n("div",As,[t(me,{bordered:"",class:"rounded-borders"},{default:o(()=>[t(X,{label:"Saved Images"},{header:o(()=>[t(R,{avatar:""},{default:o(()=>[t(ae,{size:"md",color:"positive",icon:"image"})]),_:1}),t(R,null,{default:o(()=>[m(" Images ")]),_:1})]),default:o(()=>[t(D,null,{default:o(()=>[n("div",Bs,[t(_,{"no-caps":"",onClick:s[6]||(s[6]=u=>e.promptAddImage=!0)},{default:o(()=>[m(" Add Image "),t(T,null,{default:o(()=>[m("Add a custom image (only saves url, not image data)")]),_:1})]),_:1})]),n("div",null,[(d(!0),c(J,null,ce(this.reStore.userSnapshot.images,(u,i)=>(d(),O(D,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":s[7]||(s[7]=S=>this.reStore.userSnapshot.images=S),key:i},{default:o(()=>[n("div",Ks,[n("span",Rs,[t(x,{name:"title",onClick:S=>this.reStore.setCover(u)},null,8,["onClick"])]),u.cap?(d(),c("span",Us,k(u.cap.slice(0,25)),1)):E("",!0),n("span",Hs,[t(x,{name:"delete",onClick:S=>this.remove(i,u)},null,8,["onClick"])])]),t(Ve,{class:"cardimage",onClick:S=>this.imgCB(i,u),src:u.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])],64)}var Ns=ne(xs,[["render",Ms]]);const Os=le({name:"BookmarksComponent",setup(){return{reStore:re()}},mounted(){W(this.reStore.userSnapshot.bookmarks,async(e,s)=>{console.log("watcher ",e,s)})},methods:{imgCB(e,s){this.reStore.router.push("/teacher/editor"),console.log(e,s),this.reStore.page=JSON.parse(JSON.stringify(s)),this.reStore.courses.trigger+=1},remove(e,s){console.log(e,s),this.reStore.removeBookmark(e)}}}),Is={class:"q-pa-md",style:{"max-width":"350px"}},Ls={class:"row cardheader justify-between"},zs={class:"history-remove hidden"},Qs={key:0,class:"fi fi-gb"},Es={key:1,class:"fi fi-us"},Ws={key:2,class:"fi fi-mx"},Ys={key:3,class:"fi fi-fr"},Js={key:4,class:"fi fi-de"},Fs={key:5,class:"fi fi-it"},Gs={key:6,class:"fi fi-br"},js={key:7,class:"fi fi-ke"},Xs={key:8,class:"fi fi-ru"},Zs={key:9,class:"fi fi-th"},ea={key:10,class:"fi fi-cn"},ta={key:11,class:"fi fi-hk"},sa={key:12,class:"fi fi-tw"},aa={key:13,class:"fi fi-kr"},oa={key:14,class:"fi fi-jp"},la={key:15,class:"fi fi-id"},na={key:16,class:"fi fi-xx"},ra={class:"history-remove ptr"};function ia(e,s,p,q,P,N){return d(),c("div",Is,[t(me,{bordered:"",class:"rounded-borders"},{default:o(()=>[t(X,{label:"Wikipedia Bookmarks"},{header:o(()=>[t(R,{avatar:""},{default:o(()=>[t(ae,{size:"md",color:"positive",icon:"bookmark"})]),_:1}),t(R,null,{default:o(()=>[m(" Bookmarks ")]),_:1})]),default:o(()=>[t(D,null,{default:o(()=>[n("div",null,[(d(!0),c(J,null,ce(this.reStore.userSnapshot.bookmarks,(u,i)=>(d(),O(D,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":s[0]||(s[0]=S=>this.reStore.userSnapshot.bookmarks=S),key:i},{default:o(()=>[n("div",Ls,[n("span",zs,[t(x)]),u.langVoiceKey==="Eng-UK-Fem"?(d(),c("span",Qs)):u.langVoiceKey==="Eng-US"?(d(),c("span",Es)):u.langVoiceKey==="espa\xF1ol"?(d(),c("span",Ws)):u.langVoiceKey==="fran\xE7ais"?(d(),c("span",Ys)):u.langVoiceKey==="Deutsch"?(d(),c("span",Js)):u.langVoiceKey==="italiano"?(d(),c("span",Fs)):u.langVoiceKey==="portugu\xEAs do Brasil"?(d(),c("span",Gs)):u.langVoiceKey==="Kiswahili"?(d(),c("span",js)):u.langVoiceKey==="\u0440\u0443\u0441\u0441\u043A\u0438\u0439"?(d(),c("span",Xs)):u.langVoiceKey==="\u0E44\u0E17\u0E22"?(d(),c("span",Zs)):u.langVoiceKey==="\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09"?(d(),c("span",ea)):u.langVoiceKey==="\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09"?(d(),c("span",ta)):u.langVoiceKey==="\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09"?(d(),c("span",sa)):u.langVoiceKey==="\uD55C\uAD6D\uC758"?(d(),c("span",aa)):u.langVoiceKey==="\u65E5\u672C\u8A9E"?(d(),c("span",oa)):u.langVoiceKey==="Bahasa Indonesia"?(d(),c("span",la)):(d(),c("span",na)),m(" "+k(u.pageTitle.slice(0,25))+" ",1),n("span",ra,[t(x,{name:"delete",onClick:S=>this.remove(i,u)},null,8,["onClick"])])]),t(Ve,{class:"cardimage",onClick:S=>this.imgCB(i,u),src:u.imgs[u.imgIdx].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])}var ua=ne(Os,[["render",ia]]);const da=["gregorian","persian"],ca={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>da.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},ma=["update:modelValue"];function ue(e){return e.year+"/"+pe(e.month)+"/"+pe(e.day)}function ha(e,s){const p=V(()=>e.disable!==!0&&e.readonly!==!0),q=V(()=>e.editable===!0?0:-1),P=V(()=>{const i=[];return e.color!==void 0&&i.push(`bg-${e.color}`),e.textColor!==void 0&&i.push(`text-${e.textColor}`),i.join(" ")});function N(){return e.locale!==void 0?{...s.lang.date,...e.locale}:s.lang.date}function u(i){const S=new Date,$=i===!0?null:0;if(e.calendar==="persian"){const oe=ds(S);return{year:oe.jy,month:oe.jm,day:oe.jd}}return{year:S.getFullYear(),month:S.getMonth()+1,day:S.getDate(),hour:$,minute:$,second:$,millisecond:$}}return{editable:p,tabindex:q,headerClass:P,getLocale:N,getCurrentDate:u}}const fe=20,ga=["Calendar","Years","Months"],Pt=e=>ga.includes(e),ot=e=>/^-?[\d]+\/[0-1]\d$/.test(e),ke=" \u2014 ";function de(e){return e.year+"/"+pe(e.month)}var fa=xt({name:"QDate",props:{...ca,...ps,...gs,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:ot},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:ot},navigationMaxYearMonth:{type:String,validator:ot},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Pt}},emits:[...ma,"rangeStart","rangeEnd","navigation"],setup(e,{slots:s,emit:p}){const{proxy:q}=ss(),{$q:P}=q,N=fs(e,P),{getCache:u}=jt(),{tabindex:i,headerClass:S,getLocale:$,getCurrentDate:oe}=ha(e,P);let ve;const Oe=vs(e),Ie=ys(Oe),be=y(null),Z=y(ht()),K=y($()),Le=V(()=>ht()),$e=V(()=>$()),G=V(()=>oe()),g=y(gt(Z.value,K.value)),Y=y(e.defaultView),nt=P.lang.rtl===!0?"right":"left",Ae=y(nt.value),ze=y(nt.value),Qe=g.value.year,Be=y(Qe-Qe%fe-(Qe<0?fe:0)),L=y(null),At=V(()=>{const a=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${a} q-date--${a}-${e.minimal===!0?"minimal":"standard"}`+(N.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),he=V(()=>e.color||"primary"),ye=V(()=>e.textColor||"white"),Ke=V(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Ee=V(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),j=V(()=>Ee.value.filter(a=>typeof a=="string").map(a=>Fe(a,Z.value,K.value)).filter(a=>a.dateHash!==null&&a.day!==null&&a.month!==null&&a.year!==null)),_e=V(()=>{const a=l=>Fe(l,Z.value,K.value);return Ee.value.filter(l=>es(l)===!0&&l.from!==void 0&&l.to!==void 0).map(l=>({from:a(l.from),to:a(l.to)})).filter(l=>l.from.dateHash!==null&&l.to.dateHash!==null&&l.from.dateHash<l.to.dateHash)}),Re=V(()=>e.calendar!=="persian"?a=>new Date(a.year,a.month-1,a.day):a=>{const l=wt(a.year,a.month,a.day);return new Date(l.gy,l.gm-1,l.gd)}),We=V(()=>e.calendar==="persian"?ue:(a,l,r)=>cs(new Date(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond),l===void 0?Z.value:l,r===void 0?K.value:r,a.year,a.timezoneOffset)),we=V(()=>j.value.length+_e.value.reduce((a,l)=>a+1+ms(Re.value(l.to),Re.value(l.from)),0)),rt=V(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(L.value!==null){const r=L.value.init,f=Re.value(r);return K.value.daysShort[f.getDay()]+", "+K.value.monthsShort[r.month-1]+" "+r.day+ke+"?"}if(we.value===0)return ke;if(we.value>1)return`${we.value} ${K.value.pluralDay}`;const a=j.value[0],l=Re.value(a);return isNaN(l.valueOf())===!0?ke:K.value.headerTitle!==void 0?K.value.headerTitle(l,a):K.value.daysShort[l.getDay()]+", "+K.value.monthsShort[a.month-1]+" "+a.day}),Bt=V(()=>j.value.concat(_e.value.map(l=>l.from)).sort((l,r)=>l.year-r.year||l.month-r.month)[0]),Kt=V(()=>j.value.concat(_e.value.map(l=>l.to)).sort((l,r)=>r.year-l.year||r.month-l.month)[0]),it=V(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(we.value===0)return ke;if(we.value>1){const a=Bt.value,l=Kt.value,r=K.value.monthsShort;return r[a.month-1]+(a.year!==l.year?" "+a.year+ke+r[l.month-1]+" ":a.month!==l.month?ke+r[l.month-1]:"")+" "+l.year}return j.value[0].year}),Ue=V(()=>{const a=[P.iconSet.datetime.arrowLeft,P.iconSet.datetime.arrowRight];return P.lang.rtl===!0?a.reverse():a}),ut=V(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):K.value.firstDayOfWeek),Rt=V(()=>{const a=K.value.daysShort,l=ut.value;return l>0?a.slice(l,7).concat(a.slice(0,l)):a}),ie=V(()=>{const a=g.value;return e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():at(a.year,a.month)}),Ut=V(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),z=V(()=>{if(e.navigationMinYearMonth===void 0)return null;const a=e.navigationMinYearMonth.split("/");return{year:parseInt(a[0],10),month:parseInt(a[1],10)}}),Q=V(()=>{if(e.navigationMaxYearMonth===void 0)return null;const a=e.navigationMaxYearMonth.split("/");return{year:parseInt(a[0],10),month:parseInt(a[1],10)}}),Ye=V(()=>{const a={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return z.value!==null&&z.value.year>=g.value.year&&(a.year.prev=!1,z.value.year===g.value.year&&z.value.month>=g.value.month&&(a.month.prev=!1)),Q.value!==null&&Q.value.year<=g.value.year&&(a.year.next=!1,Q.value.year===g.value.year&&Q.value.month<=g.value.month&&(a.month.next=!1)),a}),He=V(()=>{const a={};return j.value.forEach(l=>{const r=de(l);a[r]===void 0&&(a[r]=[]),a[r].push(l.day)}),a}),dt=V(()=>{const a={};return _e.value.forEach(l=>{const r=de(l.from),f=de(l.to);if(a[r]===void 0&&(a[r]=[]),a[r].push({from:l.from.day,to:r===f?l.to.day:void 0,range:l}),r<f){let h;const{year:w,month:v}=l.from,b=v<12?{year:w,month:v+1}:{year:w+1,month:1};for(;(h=de(b))<=f;)a[h]===void 0&&(a[h]=[]),a[h].push({from:void 0,to:h===f?l.to.day:void 0,range:l}),b.month++,b.month>12&&(b.year++,b.month=1)}}),a}),De=V(()=>{if(L.value===null)return;const{init:a,initHash:l,final:r,finalHash:f}=L.value,[h,w]=l<=f?[a,r]:[r,a],v=de(h),b=de(w);if(v!==F.value&&b!==F.value)return;const A={};return v===F.value?(A.from=h.day,A.includeFrom=!0):A.from=1,b===F.value?(A.to=w.day,A.includeTo=!0):A.to=ie.value,A}),F=V(()=>de(g.value)),Ht=V(()=>{const a={};if(e.options===void 0){for(let r=1;r<=ie.value;r++)a[r]=!0;return a}const l=typeof e.options=="function"?e.options:r=>e.options.includes(r);for(let r=1;r<=ie.value;r++){const f=F.value+"/"+pe(r);a[r]=l(f)}return a}),Mt=V(()=>{const a={};if(e.events===void 0)for(let l=1;l<=ie.value;l++)a[l]=!1;else{const l=typeof e.events=="function"?e.events:r=>e.events.includes(r);for(let r=1;r<=ie.value;r++){const f=F.value+"/"+pe(r);a[r]=l(f)===!0&&Ut.value(f)}}return a}),Nt=V(()=>{let a,l;const{year:r,month:f}=g.value;if(e.calendar!=="persian")a=new Date(r,f-1,1),l=new Date(r,f-1,0).getDate();else{const h=wt(r,f,1);a=new Date(h.gy,h.gm-1,h.gd);let w=f-1,v=r;w===0&&(w=12,v--),l=at(v,w)}return{days:a.getDay()-ut.value-1,endDay:l}}),ct=V(()=>{const a=[],{days:l,endDay:r}=Nt.value,f=l<0?l+7:l;if(f<6)for(let v=r-f;v<=r;v++)a.push({i:v,fill:!0});const h=a.length;for(let v=1;v<=ie.value;v++){const b={i:v,event:Mt.value[v],classes:[]};Ht.value[v]===!0&&(b.in=!0,b.flat=!0),a.push(b)}if(He.value[F.value]!==void 0&&He.value[F.value].forEach(v=>{const b=h+v-1;Object.assign(a[b],{selected:!0,unelevated:!0,flat:!1,color:he.value,textColor:ye.value})}),dt.value[F.value]!==void 0&&dt.value[F.value].forEach(v=>{if(v.from!==void 0){const b=h+v.from-1,A=h+(v.to||ie.value)-1;for(let et=b;et<=A;et++)Object.assign(a[et],{range:v.range,unelevated:!0,color:he.value,textColor:ye.value});Object.assign(a[b],{rangeFrom:!0,flat:!1}),v.to!==void 0&&Object.assign(a[A],{rangeTo:!0,flat:!1})}else if(v.to!==void 0){const b=h+v.to-1;for(let A=h;A<=b;A++)Object.assign(a[A],{range:v.range,unelevated:!0,color:he.value,textColor:ye.value});Object.assign(a[b],{flat:!1,rangeTo:!0})}else{const b=h+ie.value-1;for(let A=h;A<=b;A++)Object.assign(a[A],{range:v.range,unelevated:!0,color:he.value,textColor:ye.value})}}),De.value!==void 0){const v=h+De.value.from-1,b=h+De.value.to-1;for(let A=v;A<=b;A++)a[A].color=he.value,a[A].editRange=!0;De.value.includeFrom===!0&&(a[v].editRangeFrom=!0),De.value.includeTo===!0&&(a[b].editRangeTo=!0)}g.value.year===G.value.year&&g.value.month===G.value.month&&(a[h+G.value.day-1].today=!0);const w=a.length%7;if(w>0){const v=7-w;for(let b=1;b<=v;b++)a.push({i:b,fill:!0})}return a.forEach(v=>{let b="q-date__calendar-item ";v.fill===!0?b+="q-date__calendar-item--fill":(b+=`q-date__calendar-item--${v.in===!0?"in":"out"}`,v.range!==void 0&&(b+=` q-date__range${v.rangeTo===!0?"-to":v.rangeFrom===!0?"-from":""}`),v.editRange===!0&&(b+=` q-date__edit-range${v.editRangeFrom===!0?"-from":""}${v.editRangeTo===!0?"-to":""}`),(v.range!==void 0||v.editRange===!0)&&(b+=` text-${v.color}`)),v.classes=b}),a}),Ot=V(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});W(()=>e.modelValue,a=>{if(ve===a)ve=0;else{const{year:l,month:r}=gt(Z.value,K.value);Se(l,r)}}),W(Y,()=>{be.value!==null&&q.$el.contains(document.activeElement)===!0&&be.value.focus()}),W(()=>g.value.year,a=>{p("navigation",{year:a,month:g.value.month})}),W(()=>g.value.month,a=>{p("navigation",{year:g.value.year,month:a})}),W(Le,a=>{_t(a,K.value,"mask"),Z.value=a}),W($e,a=>{_t(Z.value,a,"locale"),K.value=a});function mt(){const a=G.value,l=He.value[de(a)];(l===void 0||l.includes(a.day)===!1)&&je(a),Je(a.year,a.month)}function It(a){Pt(a)===!0&&(Y.value=a)}function Lt(a,l){["month","year"].includes(a)&&(a==="month"?pt:Ge)(l===!0?-1:1)}function Je(a,l){Y.value="Calendar",Se(a,l)}function zt(a,l){if(e.range===!1||!a){L.value=null;return}const r=Object.assign({...g.value},a),f=l!==void 0?Object.assign({...g.value},l):r;L.value={init:r,initHash:ue(r),final:f,finalHash:ue(f)},Je(r.year,r.month)}function ht(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Fe(a,l,r){return hs(a,l,r,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function gt(a,l){const r=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(r.length===0)return ft();const f=r[r.length-1],h=Fe(f.from!==void 0?f.from:f,a,l);return h.dateHash===null?ft():h}function ft(){let a,l;if(e.defaultYearMonth!==void 0){const r=e.defaultYearMonth.split("/");a=parseInt(r[0],10),l=parseInt(r[1],10)}else{const r=G.value!==void 0?G.value:oe();a=r.year,l=r.month}return{year:a,month:l,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:a+"/"+pe(l)+"/01"}}function pt(a){let l=g.value.year,r=Number(g.value.month)+a;r===13?(r=1,l++):r===0&&(r=12,l--),Se(l,r),Ke.value===!0&&Me("month")}function Ge(a){const l=Number(g.value.year)+a;Se(l,g.value.month),Ke.value===!0&&Me("year")}function Qt(a){Se(a,g.value.month),Y.value=e.defaultView==="Years"?"Months":"Calendar",Ke.value===!0&&Me("year")}function Et(a){Se(g.value.year,a),Y.value="Calendar",Ke.value===!0&&Me("month")}function Wt(a,l){const r=He.value[l];(r!==void 0&&r.includes(a.day)===!0?Xe:je)(a)}function ge(a){return{year:a.year,month:a.month,day:a.day}}function Se(a,l){z.value!==null&&a<=z.value.year&&(a=z.value.year,l<z.value.month&&(l=z.value.month)),Q.value!==null&&a>=Q.value.year&&(a=Q.value.year,l>Q.value.month&&(l=Q.value.month));const r=a+"/"+pe(l)+"/01";r!==g.value.dateHash&&(Ae.value=g.value.dateHash<r==(P.lang.rtl!==!0)?"left":"right",a!==g.value.year&&(ze.value=Ae.value),Ct(()=>{Be.value=a-a%fe-(a<0?fe:0),Object.assign(g.value,{year:a,month:l,day:1,dateHash:r})}))}function vt(a,l,r){const f=a!==null&&a.length===1&&e.multiple===!1?a[0]:a;ve=f;const{reason:h,details:w}=yt(l,r);p("update:modelValue",f,h,w)}function Me(a){const l=j.value[0]!==void 0&&j.value[0].dateHash!==null?{...j.value[0]}:{...g.value};Ct(()=>{l.year=g.value.year,l.month=g.value.month;const r=e.calendar!=="persian"?new Date(l.year,l.month,0).getDate():at(l.year,l.month);l.day=Math.min(Math.max(1,l.day),r);const f=Ce(l);ve=f;const{details:h}=yt("",l);p("update:modelValue",f,a,h)})}function yt(a,l){return l.from!==void 0?{reason:`${a}-range`,details:{...ge(l.target),from:ge(l.from),to:ge(l.to)}}:{reason:`${a}-day`,details:ge(l)}}function Ce(a,l,r){return a.from!==void 0?{from:We.value(a.from,l,r),to:We.value(a.to,l,r)}:We.value(a,l,r)}function je(a){let l;if(e.multiple===!0)if(a.from!==void 0){const r=ue(a.from),f=ue(a.to),h=j.value.filter(v=>v.dateHash<r||v.dateHash>f),w=_e.value.filter(({from:v,to:b})=>b.dateHash<r||v.dateHash>f);l=h.concat(w).concat(a).map(v=>Ce(v))}else{const r=Ee.value.slice();r.push(Ce(a)),l=r}else l=Ce(a);vt(l,"add",a)}function Xe(a){if(e.noUnset===!0)return;let l=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const r=Ce(a);a.from!==void 0?l=e.modelValue.filter(f=>f.from!==void 0?f.from!==r.from&&f.to!==r.to:!0):l=e.modelValue.filter(f=>f!==r),l.length===0&&(l=null)}vt(l,"remove",a)}function _t(a,l,r){const f=j.value.concat(_e.value).map(h=>Ce(h,a,l)).filter(h=>h.from!==void 0?h.from.dateHash!==null&&h.to.dateHash!==null:h.dateHash!==null);p("update:modelValue",(e.multiple===!0?f:f[0])||null,r)}function Yt(){if(e.minimal!==!0)return C("div",{class:"q-date__header "+S.value},[C("div",{class:"relative-position"},[C(Pe,{name:"q-transition--fade"},()=>C("div",{key:"h-yr-"+it.value,class:"q-date__header-subtitle q-date__header-link "+(Y.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...u("vY",{onClick(){Y.value="Years"},onKeyup(a){a.keyCode===13&&(Y.value="Years")}})},[it.value]))]),C("div",{class:"q-date__header-title relative-position flex no-wrap"},[C("div",{class:"relative-position col"},[C(Pe,{name:"q-transition--fade"},()=>C("div",{key:"h-sub"+rt.value,class:"q-date__header-title-label q-date__header-link "+(Y.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...u("vC",{onClick(){Y.value="Calendar"},onKeyup(a){a.keyCode===13&&(Y.value="Calendar")}})},[rt.value]))]),e.todayBtn===!0?C(_,{class:"q-date__header-today self-start",icon:P.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:i.value,onClick:mt}):null])])}function Ze({label:a,type:l,key:r,dir:f,goTo:h,boundaries:w,cls:v}){return[C("div",{class:"row items-center q-date__arrow"},[C(_,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ue.value[0],tabindex:i.value,disable:w.prev===!1,...u("go-#"+l,{onClick(){h(-1)}})})]),C("div",{class:"relative-position overflow-hidden flex flex-center"+v},[C(Pe,{name:"q-transition--jump-"+f},()=>C("div",{key:r},[C(_,{flat:!0,dense:!0,noCaps:!0,label:a,tabindex:i.value,...u("view#"+l,{onClick:()=>{Y.value=l}})})]))]),C("div",{class:"row items-center q-date__arrow"},[C(_,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ue.value[1],tabindex:i.value,disable:w.next===!1,...u("go+#"+l,{onClick(){h(1)}})})])]}const Jt={Calendar:()=>[C("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[C("div",{class:"q-date__navigation row items-center no-wrap"},Ze({label:K.value.months[g.value.month-1],type:"Months",key:g.value.month,dir:Ae.value,goTo:pt,boundaries:Ye.value.month,cls:" col"}).concat(Ze({label:g.value.year,type:"Years",key:g.value.year,dir:ze.value,goTo:Ge,boundaries:Ye.value.year,cls:""}))),C("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Rt.value.map(a=>C("div",{class:"q-date__calendar-item"},[C("div",a)]))),C("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[C(Pe,{name:"q-transition--slide-"+Ae.value},()=>C("div",{key:F.value,class:"q-date__calendar-days fit"},ct.value.map(a=>C("div",{class:a.classes},[a.in===!0?C(_,{class:a.today===!0?"q-date__today":"",dense:!0,flat:a.flat,unelevated:a.unelevated,color:a.color,textColor:a.textColor,label:a.i,tabindex:i.value,...u("day#"+a.i,{onClick:()=>{Ft(a.i)},onMouseover:()=>{Gt(a.i)}})},a.event!==!1?()=>C("div",{class:"q-date__event bg-"+a.event}):null):C("div",""+a.i)]))))])])],Months(){const a=g.value.year===G.value.year,l=f=>z.value!==null&&g.value.year===z.value.year&&z.value.month>f||Q.value!==null&&g.value.year===Q.value.year&&Q.value.month<f,r=K.value.monthsShort.map((f,h)=>{const w=g.value.month===h+1;return C("div",{class:"q-date__months-item flex flex-center"},[C(_,{class:a===!0&&G.value.month===h+1?"q-date__today":null,flat:w!==!0,label:f,unelevated:w,color:w===!0?he.value:null,textColor:w===!0?ye.value:null,tabindex:i.value,disable:l(h+1),...u("month#"+h,{onClick:()=>{Et(h+1)}})})])});return e.yearsInMonthView===!0&&r.unshift(C("div",{class:"row no-wrap full-width"},[Ze({label:g.value.year,type:"Years",key:g.value.year,dir:ze.value,goTo:Ge,boundaries:Ye.value.year,cls:" col"})])),C("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},r)},Years(){const a=Be.value,l=a+fe,r=[],f=h=>z.value!==null&&z.value.year>h||Q.value!==null&&Q.value.year<h;for(let h=a;h<=l;h++){const w=g.value.year===h;r.push(C("div",{class:"q-date__years-item flex flex-center"},[C(_,{key:"yr"+h,class:G.value.year===h?"q-date__today":null,flat:!w,label:h,dense:!0,unelevated:w,color:w===!0?he.value:null,textColor:w===!0?ye.value:null,tabindex:i.value,disable:f(h),...u("yr#"+h,{onClick:()=>{Qt(h)}})})]))}return C("div",{class:"q-date__view q-date__years flex flex-center"},[C("div",{class:"col-auto"},[C(_,{round:!0,dense:!0,flat:!0,icon:Ue.value[0],tabindex:i.value,disable:f(a),...u("y-",{onClick:()=>{Be.value-=fe}})})]),C("div",{class:"q-date__years-content col self-stretch row items-center"},r),C("div",{class:"col-auto"},[C(_,{round:!0,dense:!0,flat:!0,icon:Ue.value[1],tabindex:i.value,disable:f(l),...u("y+",{onClick:()=>{Be.value+=fe}})})])])}};function Ft(a){const l={...g.value,day:a};if(e.range===!1){Wt(l,F.value);return}if(L.value===null){const r=ct.value.find(h=>h.fill!==!0&&h.i===a);if(e.noUnset!==!0&&r.range!==void 0){Xe({target:l,from:r.range.from,to:r.range.to});return}if(r.selected===!0){Xe(l);return}const f=ue(l);L.value={init:l,initHash:f,final:l,finalHash:f},p("rangeStart",ge(l))}else{const r=L.value.initHash,f=ue(l),h=r<=f?{from:L.value.init,to:l}:{from:l,to:L.value.init};L.value=null,je(r===f?l:{target:l,...h}),p("rangeEnd",{from:ge(h.from),to:ge(h.to)})}}function Gt(a){if(L.value!==null){const l={...g.value,day:a};Object.assign(L.value,{final:l,finalHash:ue(l)})}}return Object.assign(q,{setToday:mt,setView:It,offsetCalendar:Lt,setCalendarTo:Je,setEditingRange:zt}),()=>{const a=[C("div",{class:"q-date__content col relative-position"},[C(Pe,{name:"q-transition--fade"},Jt[Y.value])])],l=ts(s.default);return l!==void 0&&a.push(C("div",{class:"q-date__actions"},l)),e.name!==void 0&&e.disable!==!0&&Ie(a,"push"),C("div",{class:At.value,...Ot.value},[Yt(),C("div",{ref:be,class:"q-date__main col column",tabindex:-1},a)])}}});const pa=["top","middle","bottom"];var va=xt({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>pa.includes(e)}},setup(e,{slots:s}){const p=V(()=>e.align!==void 0?{verticalAlign:e.align}:null),q=V(()=>{const P=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(P!==void 0?` text-${P}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>C("div",{class:q.value,style:p.value,role:"status","aria-label":e.label},as(s.default,e.label!==void 0?[e.label]:[]))}});const ya=le({name:"OTDComponent",setup(){const e=re(),s=Date.now(),p=Dt.formatDate(s,"MM/DD");return{reStore:e,otditems:y([]),promptOTDDate:y(!1),otddate:y(Date.now()),otdlabel:y(p),otdtype:y("selected")}},mounted(){this.init(),W(this.reStore.preferences,async(e,s)=>{console.log("OTD watcher"),e.langVoiceKey!==s.langVoiceKey?this.init():(console.log("OTD watcher ",e),this.init())})},methods:{async init(){console.log("OTD init");const e=this.reStore.preferences.langVoiceKey;await this.reStore.wiki.setLang(this.reStore.langVoices[e].langName);const s=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=s[this.otdtype],console.log(this.otditems);for(const[q,P]of Object.entries(this.reStore.langVoices)){const N=P.flagName;B("#otdfi").classed(N,!1)}const p=this.reStore.langVoices[e].flagName;B("#otdfi").classed(p,!0)},async loadPageId(e){console.log("loadPageId ",e);const s=this.reStore.preferences.langVoiceKey;console.log("OTD load ",s),this.reStore.loadPageId(e,s),this.reStore.router.push("/teacher/editor")},async load(e){console.log("load",this.otditems[e].text),console.log("load",this.otditems[e]);const s=this.reStore.preferences.langVoiceKey;console.log("OTD load ",s),this.reStore.loadPageId(this.otditems[e].pages[0].pageid,s),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const e=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=e.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=Dt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(e){console.log("otdOptionsCB",this.otdtype);const s=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=s[this.otdtype]}}}),_a=n("div",{class:"text-h6"},"Select Date",-1),Sa={class:"q-pa-md",style:{"max-width":"350px"}},Ca={class:"q-gutter-y-sm column"},ka=n("span",{id:"otdfi",class:"pfi text-h4"},null,-1),Va={class:""},ba=["onClick"],$a=n("br",null,null,-1);function wa(e,s,p,q,P,N){return d(),c(J,null,[t(te,{modelValue:e.promptOTDDate,"onUpdate:modelValue":s[2]||(s[2]=u=>e.promptOTDDate=u),persistent:""},{default:o(()=>[t(D,{style:{"min-width":"350px"}},{default:o(()=>[t(U,{align:"center"},{default:o(()=>[_a]),_:1}),t(fa,{modelValue:e.otddate,"onUpdate:modelValue":s[0]||(s[0]=u=>e.otddate=u),minimal:""},null,8,["modelValue"]),t(ee,{align:"center",class:"text-white"},{default:o(()=>[H(t(_,{flat:"",label:"Cancel"},null,512),[[M]]),H(t(_,{flat:"",label:"Update OTD date",onClick:s[1]||(s[1]=u=>this.updateOTDDate())},null,512),[[M]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n("div",Sa,[t(me,{bordered:"",class:"rounded-borders"},{default:o(()=>[t(X,null,{header:o(()=>[t(R,{avatar:""},{default:o(()=>[t(ae,{size:"md",color:"positive",icon:"stars"})]),_:1}),t(R,null,{default:o(()=>[m(" On This Day ")]),_:1})]),default:o(()=>[t(D,null,{default:o(()=>[n("div",Ca,[t(qe,{class:"bg-primary text-white rounded-borders q-my-md"},{default:o(()=>[t(_,{dark:"",standout:"",onClick:s[3]||(s[3]=u=>e.promptOTDDate=!0)},{default:o(()=>[m(k(e.otdlabel),1)]),_:1}),t(Ne),ka,t(Ne),t(lt,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":s[4]||(s[4]=u=>this.otdtype=u),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:s[5]||(s[5]=u=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),n("div",Va,[(d(!0),c(J,null,ce(e.otditems,(u,i)=>(d(),O(D,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:e.otditems,"onUpdate:modelValue":s[6]||(s[6]=S=>e.otditems=S),key:i},{default:o(()=>[n("span",{style:{cursor:"pointer"},onClick:S=>this.load(i)},k(i),9,ba),m(". "+k(u.year)+" "+k(u.text),1),$a,(d(!0),c(J,null,ce(u.pages,(S,$)=>(d(),c("span",{key:$},[t(va,{class:"on-left",color:"accent",style:{cursor:"pointer"},onClick:oe=>this.loadPageId(S.pageid)},{default:o(()=>[t(T,null,{default:o(()=>[m(k(S.title),1)]),_:2},1024),t(x,{size:"xs",name:"link"})]),_:2},1032,["onClick"])]))),128))]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])],64)}var Da=ne(ya,[["render",wa]]);function Tt(e){return e===null||e===""?!1:(e=e.toString(),e=e.replaceAll("&nbsp;",""),e.replace(/(<([^>]+)>)/ig,""))}const Pa=le({name:"PagerComponent",setup(){const e=re();return{reStore:e,assignment:y(null),promptAssignmentTitle:y(!1),promptPageTitle:y(!1),promptPctReplace:y(!1),promptLanguage:y(!1),promptGuideWords:y(!1),langVoices:y(e.preferences.langVoices),targetLangVoiceKey:y(null),targetPctReplace:y(null),targetGuideWords:y(null),statusExpanded:y(!0),coverExpanded:y(!1),pagesExpanded:y(!1)}},mounted(){console.log("mounted"),this.reStore.courses.ck&&this.reStore.courses.aid&&(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[this.reStore.courses.ck].assignments[this.reStore.courses.aid]))),W(this.reStore.courses,async(e,s)=>{this.reStore.courses.ck||(this.assignment=null),this.reStore.courses.aid||(this.assignment=null),this.assignment&&e.aid&&e.ck&&this.assignment.pages.length!=e[e.ck].assignments[e.aid].pages.length&&(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid])),console.log("Pager reloading assignment b/c pages.length changed")),!this.assignment&&e.ck&&e.aid?(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid])),console.log("Pager loaded fresh copy of assignment")):e.aid&&e.ck&&this.assignment.coverUrl!=e[e.ck].assignments.coverUrl?(this.assignment.coverUrl=e[e.ck].assignments[e.aid].coverUrl,console.log("Pager coverUrl")):this.assignment&&this.assignment.ck!==e.ck||this.assignment&&this.assignment.id!==e.aid?(console.log("PagerComponent assignment changed"),this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid]))):console.log("Pager nothing seems to have changed")})},methods:{pctCB(e){this.targetPgIdx=e,this.targetPctReplace=this.assignment.pages[e].pctReplace,this.promptPctReplace=!0},updatePctReplaceCB(){console.log("updatePctReplaceCB "),this.assignment.pages[this.targetPgIdx].pctReplace=this.targetPctReplace,this.targetPgIdx==this.reStore.courses.pgIdx?(console.log("updating restore.page.pctReplace",this.targetPctReplace,this.assignment.pages[this.targetPgIdx].pctReplace),this.reStore.page.pctReplace=parseInt(this.targetPctReplace)):console.log("Not updating pctReplace",this.targetPgIdx,this.reStore.courses.pgIdx),this.targetPctReplace=null,this.targetPgIdx=null},wpCB(e){console.log("wpCB",e),this.assignment.pages[e].pageid;const s=this.assignment.pages[e].canonicalUrl;window.open(s,"_blank")},gwCB(e){console.log("updateGuideWords",e),this.targetPgIdx=e,this.targetGuideWords=this.assignment.pages[e].guideWords,this.promptGuideWords=!0},updateGuideWordsCB(){console.log(),this.assignment.pages[this.targetPgIdx].guideWords=this.targetGuideWords,this.reStore.courses.pgIdx==this.targetPgIdx?(console.log("updating page guidewords"),this.reStore.page.guideWords=this.targetGuideWords,this.reStore.notify("page guide-words updated ")):console.log("NOT updating page guidewords",this.reStore.courses.pgIdx,this.targetPgIdx),this.targetPgIdx=null,this.targetGuideWords=null},setPageLang(e){this.targetPgIdx=e,this.targetLangVoiceKey=this.assignment.pages[e].langVoiceKey,this.promptLanguage=!0},setLangVoiceCB(e){const s=this.targetPgIdx;this.targetPgIdx=null;const p=this.targetLangVoiceKey;console.log(s,p),this.assignment.pages[s].langVoiceKey=p,this.reStore.courses.pgIdx==this.targetPgIdx&&(this.reStore.page.langVoiceKey=p)},restorePage(e){console.log("Pager restorePage ",e);const s=this.reStore.courses.ck,p=this.reStore.courses.aid;console.log("Pager ",e,s,p),console.log(this.reStore.courses[s]),console.log(this.reStore.courses[s].assignments),console.log(this.reStore.courses[s].assignments[p]),this.assignment.pages[e]=JSON.parse(JSON.stringify(this.reStore.courses[s].assignments[p].pages[e])),this.reStore.courses.pgIdx==e&&(this.reStore.page=JSON.parse(JSON.stringify(this.reStore.courses[s].assignments[p].pages[e])))},resetPage(){this.reStore.newPage()},newPage(){console.log("PagerComponent newPageCB "),this.reStore.newPage()},updateAssignmentTitle(){console.log("Pager updateAssignmentTitle",this.assignment.title);const e=this.reStore.courses.ck,s=this.reStore.courses.aid;this.reStore.courses[e].assignments[s].title=this.assignment.title},updatePageTitle(){console.log("updatePageTitle",this.reStore.page.pageTitle);const e=this.reStore.courses.ck,s=this.reStore.courses.aid,p=this.reStore.courses.pgIdx;this.reStore.courses[e].assignments[s].pages[p].pageTitle=this.reStore.page.pageTitle},updatePage(e){this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages[e]=this.assignment.pages[e],e===this.reStore.courses.pgIdx&&(this.assignment.pages[e].pageText=Tt(B("#slideTextDiv").html()),this.assignment.pages[e].imgs[this.assignment.pages[e].imgIdx].cap=Tt(B("#slideCaptionDiv").html()),this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e]))),this.reStore.saveCurrentAssignment(),this.reStore.courses.trigger+=1},updateAllPages(){for(var e=0;e<this.assignment.pages.length;e++)this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages[e]=JSON.parse(JSON.stringify(this.assignment.pages[e])),e===this.reStore.courses.pgIdx&&(this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e])));this.reStore.saveCurrentAssignment(),this.reStore.courses.trigger+=1},nextImg(e){const s=this.assignment.pages[e].imgIdx,p=this.assignment.pages[e].imgs.length;s+1<p?this.assignment.pages[e].imgIdx+=1:this.assignment.pages[e].imgIdx=0},prevImg(e){const s=this.assignment.pages[e].imgIdx,p=this.assignment.pages[e].imgs.length;s-1>-1?this.assignment.pages[e].imgIdx-=1:this.assignment.pages[e].imgIdx=p-1},loadCoverCB(){console.log("Pager loadCoverCB "),this.reStore.loadCover(),this.reStore.router.push("/teacher/editor")},takeStorePage(e){this.assignment.pages[e]=JSON.parse(JSON.stringify(this.reStore.page)),this.reStore.courses.trigger+=1},async loadPageCB(e){console.log("Pager loadPageCB ",e),this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e])),this.reStore.courses.pgIdx=e,this.reStore.page.imgIdx=this.assignment.pages[e].imgIdx,this.reStore.courses.imgIdx=this.assignment.pages[e].imgIdx,xe(".assignment").classed("hidden",!1),xe(".coverslide").classed("hidden",!0),this.reStore.courses.trigger+=1,this.reStore.page.isCustom||(console.log("calling restore.reloadPage"),await this.reStore.reloadPage(),this.reStore.courses.trigger+=1),this.reStore.mode==="editor"?this.reStore.router.push("/teacher/editor"):this.reStore.router.push("/teacher/assignment")},remove(e){console.log("remove ",e);const s=this.reStore.ck,p=this.reStore.aid;this.assignment.pages.splice(e,1),this.reStore.courses[s].assignments[p].pages.splice(e,1),this.reStore.courses.trigger+=1},mapCB(e){const s="https://maps.google.com/?ll="+this.assignment.pages[e].mapCoords.split(",")[0]+","+this.assignment.pages[e].mapCoords.split(",")[1];window.open(s,"_blank")},dummy(){console.log("dummy")}}}),Ta=n("div",{class:"text-h6"},"Percent Replace",-1),qa=n("div",{class:"text-h6"},"Guide Words",-1),xa=n("div",{class:"text-h6"},"Assignment Title",-1),Aa=n("div",{class:"text-h6"},"Page Title",-1),Ba=n("div",{class:"text-h6"},"Set Current Language",-1),Ka={width:"100%"},Ra={class:"q-pa-md",style:{"max-width":"350px"}},Ua={key:0},Ha=n("td",null,"Assignment",-1),Ma=n("td",null,"Pages",-1),Na=n("td",null,"Images",-1),Oa={key:0},Ia={key:1},La=n("td",null,"Loaded",-1),za={key:0},Qa={key:1},Ea={key:0,class:"flex flex-center"},Wa={class:"text-weight-bolder text-center q-pa-xs"},Ya={key:0},Ja={class:"text-weight-bolder text-center q-pa-xs"},Fa={key:0},Ga={class:"text-weight-bolder text-center q-pa-xs"},ja={key:1,class:"hidden"},Xa={class:"flex flex-row justify-between"},Za={class:""},eo={class:""},to={class:""},so=n("br",null,null,-1),ao=["onClick"],oo={key:0,class:"fi fi-gb"},lo={key:1,class:"fi fi-us"},no={key:2,class:"fi fi-mx"},ro={key:3,class:"fi fi-fr"},io={key:4,class:"fi fi-de"},uo={key:5,class:"fi fi-it"},co={key:6,class:"fi fi-br"},mo={key:7,class:"fi fi-ke"},ho={key:8,class:"fi fi-ru"},go={key:9,class:"fi fi-th"},fo={key:10,class:"fi fi-cn"},po={key:11,class:"fi fi-hk"},vo={key:12,class:"fi fi-tw"},yo={key:13,class:"fi fi-kr"},_o={key:14,class:"fi fi-jp"},So={key:15,class:"fi fi-id"},Co={key:16,class:"fi fi-xx"},ko=n("br",null,null,-1),Vo={class:""},bo={class:""},$o={class:""},wo={key:0};function Do(e,s,p,q,P,N){const u=I("router-link");return d(),c(J,null,[t(te,{modelValue:e.promptPctReplace,"onUpdate:modelValue":s[2]||(s[2]=i=>e.promptPctReplace=i),persistent:""},{default:o(()=>[t(D,{style:{"min-width":"350px"}},{default:o(()=>[t(U,{align:"center"},{default:o(()=>[Ta]),_:1}),t(U,{class:"q-pt-none",align:"center"},{default:o(()=>[t(qt,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.targetPctReplace,"onUpdate:modelValue":s[0]||(s[0]=i=>e.targetPctReplace=i)},null,8,["modelValue"])]),_:1}),t(ee,{align:"right"},{default:o(()=>[H(t(_,{outline:"",label:"Cancel"},null,512),[[M]]),H(t(_,{outline:"",label:"Update % replace",onClick:s[1]||(s[1]=i=>this.updatePctReplaceCB())},null,512),[[M]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(te,{modelValue:e.promptGuideWords,"onUpdate:modelValue":s[6]||(s[6]=i=>e.promptGuideWords=i),persistent:""},{default:o(()=>[t(D,{style:{"min-width":"350px"}},{default:o(()=>[t(U,null,{default:o(()=>[qa]),_:1}),t(U,{class:"q-pt-none"},{default:o(()=>[t(se,{dense:"",modelValue:this.targetGuideWords,"onUpdate:modelValue":s[3]||(s[3]=i=>this.targetGuideWords=i),autofocus:"",onKeyup:s[4]||(s[4]=Te(i=>e.promptGuideWords=!1,["enter"]))},null,8,["modelValue"])]),_:1}),t(ee,{align:"right"},{default:o(()=>[H(t(_,{outline:"",label:"Cancel"},null,512),[[M]]),H(t(_,{outline:"",label:"Update guide words",onClick:s[5]||(s[5]=i=>this.updateGuideWordsCB())},null,512),[[M]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(te,{modelValue:e.promptAssignmentTitle,"onUpdate:modelValue":s[10]||(s[10]=i=>e.promptAssignmentTitle=i),persistent:""},{default:o(()=>[t(D,{style:{"min-width":"350px"}},{default:o(()=>[t(U,null,{default:o(()=>[xa]),_:1}),t(U,{class:"q-pt-none"},{default:o(()=>[t(se,{dense:"",modelValue:this.assignment.title,"onUpdate:modelValue":s[7]||(s[7]=i=>this.assignment.title=i),autofocus:"",onKeyup:s[8]||(s[8]=Te(i=>e.promptAssignmentTitle=!1,["enter"]))},null,8,["modelValue"])]),_:1}),t(ee,{align:"right"},{default:o(()=>[H(t(_,{outline:"",label:"Cancel"},null,512),[[M]]),H(t(_,{outline:"",label:"Update assignment title",onClick:s[9]||(s[9]=i=>this.updateAssignmentTitle())},null,512),[[M]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(te,{modelValue:e.promptPageTitle,"onUpdate:modelValue":s[14]||(s[14]=i=>e.promptPageTitle=i),persistent:""},{default:o(()=>[t(D,{style:{"min-width":"350px"}},{default:o(()=>[t(U,null,{default:o(()=>[Aa]),_:1}),t(U,{class:"q-pt-none"},{default:o(()=>[t(se,{dense:"",modelValue:this.reStore.page.pageTitle,"onUpdate:modelValue":s[11]||(s[11]=i=>this.reStore.page.pageTitle=i),autofocus:"",onKeyup:s[12]||(s[12]=Te(i=>e.promptAssignmentTitle=!1,["enter"]))},null,8,["modelValue"])]),_:1}),t(ee,{align:"right"},{default:o(()=>[H(t(_,{outline:"",label:"Cancel"},null,512),[[M]]),H(t(_,{outline:"",label:"Update page title",onClick:s[13]||(s[13]=i=>this.updatePageTitle())},null,512),[[M]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(te,{modelValue:e.promptLanguage,"onUpdate:modelValue":s[16]||(s[16]=i=>e.promptLanguage=i),persistent:""},{default:o(()=>[t(D,{style:{"min-width":"350px"}},{default:o(()=>[t(U,null,{default:o(()=>[Ba]),_:1}),t(U,{class:"q-pt-none"},{default:o(()=>[n("table",Ka,[n("tr",null,[n("td",null,[t(lt,{modelValue:this.targetLangVoiceKey,"onUpdate:modelValue":[s[15]||(s[15]=i=>this.targetLangVoiceKey=i),this.setLangVoiceCB],options:e.langVoices},null,8,["modelValue","options","onUpdate:modelValue"])])])])]),_:1}),t(ee,{align:"right",class:"text-white"},{default:o(()=>[H(t(_,{outline:"",flat:"",label:"Close"},null,512),[[M]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n("div",Ra,[t(me,{bordered:"",class:"rounded-borders"},{default:o(()=>[t(X,{modelValue:e.statusExpanded,"onUpdate:modelValue":s[18]||(s[18]=i=>e.statusExpanded=i)},{header:o(()=>[t(R,{avatar:""},{default:o(()=>[t(ae,{size:"md",color:"positive",icon:"collections"})]),_:1}),t(R,null,{default:o(()=>[m(" Assignment Info")]),_:1})]),default:o(()=>[this.assignment?(d(),c("span",Ua,[t(Ve,{src:this.assignment.coverUrl,onClick:s[17]||(s[17]=i=>this.reStore.router.push("/teacher/assignmenteditor"))},null,8,["src"]),this.assignment?(d(),O(D,{key:0,class:"q-pa-md"},{default:o(()=>[n("table",null,[n("tr",null,[Ha,m(),n("td",null,k(this.assignment.title),1)]),n("tr",null,[Ma,m(),n("td",null,k(this.reStore.courses.pgIdx+1)+" / "+k(this.assignment.pages.length),1)]),n("tr",null,[Na,m(),n("td",null,[m(k(this.reStore.courses.imgIdx+1)+" / ",1),this.assignment.pages[this.reStore.courses.pgIdx].imgs?(d(),c("span",Oa,k(this.assignment.pages[this.reStore.courses.pgIdx].imgs.length),1)):(d(),c("span",Ia,"?"))])]),n("tr",null,[La,n("td",null,[this.assignment.pages[this.reStore.courses.pgIdx]&&this.assignment.pages[this.reStore.courses.pgIdx].pageTitle?(d(),c("span",za,k(this.assignment.pages[this.reStore.courses.pgIdx].pageTitle),1)):(d(),c("span",Qa,"None"))])])])]),_:1})):E("",!0)])):E("",!0)]),_:1},8,["modelValue"])]),_:1}),this.assignment?(d(),O(D,{key:0,class:"bg-primary q-pa-xs q-my-md hidden",flat:"",bordered:""},{default:o(()=>[t(X,null,{header:o(()=>[t(R,{avatar:""},{default:o(()=>[t(ae,{size:"md",color:"positive",icon:"assignment"})]),_:1}),t(R,null,{default:o(()=>[m(k(this.assignment.title),1)]),_:1})]),default:o(()=>[this.reStore.courses.ck?(d(),c("div",Ea,k(this.reStore.courses.ck.slice(0,3))+" | "+k(this.reStore.courses.aid.slice(0,3))+" | "+k(this.reStore.courses.pageid)+" | "+k(this.reStore.courses.imgIdx)+" | "+k(this.reStore.courses.pgIdx)+" | "+k(this.reStore.courses.trigger)+" | "+k(this.reStore.mode),1)):E("",!0),n("div",Wa,[m("Course: "),this.reStore.courses.ck?(d(),c("span",Ya,k(this.reStore.courses[this.reStore.courses.ck].title),1)):E("",!0)]),n("div",Ja,[m(" Title: "),this.assignment?(d(),c("span",Fa,[t(u,{to:"/teacher/editor",class:"text-white"},{default:o(()=>[m(k(this.assignment.title)+" ",1),t(T,null,{default:o(()=>[m("Go to Editor")]),_:1})]),_:1}),t(x,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:s[19]||(s[19]=i=>e.promptAssignmentTitle=!0),size:"sm"}),t(x,{style:{cursor:"pointer"},class:"on-right",name:"save",onClick:s[20]||(s[20]=i=>this.reStore.saveCurrentAssignment()),size:"sm"})])):E("",!0)]),n("div",Ga,[m(" Page "+k(this.reStore.courses.pgIdx)+": "+k(this.reStore.page.pageTitle.slice(0,5))+" ",1),t(x,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:s[21]||(s[21]=i=>this.promptPageTitle=!0),size:"sm"}),t(x,{class:"hidden on-right",name:"replay",onClick:this.resetPage,size:"sm"},null,8,["onClick"]),t(x,{class:"on-right",name:"add_circle",onClick:this.newPage,size:"sm"},null,8,["onClick"]),t(x,{class:"on-right",name:"volume_up",onClick:s[22]||(s[22]=i=>this.reStore.speak()),size:"sm"})])]),_:1})]),_:1})):E("",!0),this.assignment?(d(),c("span",ja,[t(D,{class:"bg-primary q-pa-xs q-my-md",flat:"",bordered:""},{default:o(()=>[t(X,{modelValue:e.coverExpanded,"onUpdate:modelValue":s[23]||(s[23]=i=>e.coverExpanded=i)},{header:o(()=>[t(R,{avatar:""},{default:o(()=>[t(ae,{size:"md",color:"positive",icon:"insert_photo"})]),_:1}),t(R,null,{default:o(()=>[m(" Cover Image ")]),_:1})]),default:o(()=>[t(Ve,{src:this.assignment.coverUrl,onClick:e.loadCoverCB},null,8,["src","onClick"])]),_:1},8,["modelValue"])]),_:1}),(d(!0),c(J,null,ce(this.assignment.pages,(i,S)=>(d(),O(D,{class:"bg-primary q-pa-xs q-my-md",flat:"",bordered:"",modelValue:this.assignment.pages,"onUpdate:modelValue":s[27]||(s[27]=$=>this.assignment.pages=$),key:S},{default:o(()=>[t(X,null,{header:o(()=>[t(R,null,{default:o(()=>[t(_s,{modelValue:i.isCustom,"onUpdate:modelValue":$=>i.isCustom=$,color:"positive",icon:"shuffle","checked-icon":"check"},{default:o(()=>[t(T,null,{default:o(()=>[m(k(i.isCustom?"Custom":"Random"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(R,null,{default:o(()=>[m(k(S+1)+" "+k(i.pageTitle.slice(0,8)),1)]),_:2},1024)]),default:o(()=>[n("span",Xa,[n("span",Za,[t(x,{size:"sm",name:"input",onClick:$=>e.takeStorePage(S)},{default:o(()=>[t(T,null,{default:o(()=>[m(" Pull editor page contents to this Page ")]),_:1})]),_:2},1032,["onClick"])]),n("span",eo,[t(x,{name:"restore_page",size:"sm",onClick:$=>e.restorePage(S)},{default:o(()=>[t(T,null,{default:o(()=>[m("Restore page to saved values")]),_:1})]),_:2},1032,["onClick"])]),t(x,{class:"",name:"save",onClick:$=>this.updatePage(S),size:"sm"},{default:o(()=>[t(T,null,{default:o(()=>[m("Update & Save current page")]),_:1})]),_:2},1032,["onClick"]),n("span",to,[t(x,{name:"signpost",size:"sm",onClick:$=>e.gwCB(S)},{default:o(()=>[t(T,null,{default:o(()=>[m("Update the guide-words for this page:"),so,m(k(i.guideWords),1)]),_:2},1024)]),_:2},1032,["onClick"])]),n("span",{class:"",onClick:$=>this.setPageLang(S)},[i.langVoiceKey==="Eng-UK-Fem"?(d(),c("span",oo)):i.langVoiceKey==="Eng-US"?(d(),c("span",lo)):i.langVoiceKey==="espa\xF1ol"?(d(),c("span",no)):i.langVoiceKey==="fran\xE7ais"?(d(),c("span",ro)):i.langVoiceKey==="Deutsch"?(d(),c("span",io)):i.langVoiceKey==="italiano"?(d(),c("span",uo)):i.langVoiceKey==="portugu\xEAs do Brasil"?(d(),c("span",co)):i.langVoiceKey==="Kiswahili"?(d(),c("span",mo)):i.langVoiceKey==="\u0440\u0443\u0441\u0441\u043A\u0438\u0439"?(d(),c("span",ho)):i.langVoiceKey==="\u0E44\u0E17\u0E22"?(d(),c("span",go)):i.langVoiceKey==="\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09"?(d(),c("span",fo)):i.langVoiceKey==="\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09"?(d(),c("span",po)):i.langVoiceKey==="\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09"?(d(),c("span",vo)):i.langVoiceKey==="\uD55C\uAD6D\uC758"?(d(),c("span",yo)):i.langVoiceKey==="\u65E5\u672C\u8A9E"?(d(),c("span",_o)):i.langVoiceKey==="Bahasa Indonesia"?(d(),c("span",So)):(d(),c("span",Co)),t(T,null,{default:o(()=>[m(k(i.langVoiceKey)+" ",1),ko,m(" Click to set language for this page ")]),_:2},1024)],8,ao),n("span",Vo,[t(x,{name:"percent",size:"sm",onClick:$=>e.pctCB(S)},{default:o(()=>[t(T,null,{default:o(()=>[m("Set percentage of words to replace from paragraph on this page.")]),_:1})]),_:2},1032,["onClick"])]),n("span",bo,[t(x,{name:"location_on",size:"sm",onClick:$=>e.mapCB(S)},{default:o(()=>[t(T,null,{default:o(()=>[m(" Launch Google Maps: "+k(i.mapCoords),1)]),_:2},1024)]),_:2},1032,["onClick"])]),n("span",$o,[t(x,{name:"language",size:"sm",onClick:$=>e.wpCB(S)},{default:o(()=>[t(T,null,{default:o(()=>[m("Wikipedia page "+k(i.pageid)+" "+k(i.canonical_url),1)]),_:2},1024)]),_:2},1032,["onClick"])])]),i.imgs.length>i.imgIdx?(d(),c("span",wo,[t(_,{fab:"","label-position":"left",color:"primary",icon:"arrow_left",onClick:[$=>this.prevImg(S),s[24]||(s[24]=tt(()=>{},["stop","prevent"]))],padding:"xs",class:"float-left text-h5 z-max",style:{top:"100px"}},null,8,["onClick"]),t(_,{fab:"","label-position":"right",color:"primary",icon:"arrow_right",onClick:[$=>this.nextImg(S),s[25]||(s[25]=tt(()=>{},["stop","prevent"]))],padding:"xs",class:"float-right text-h5 z-max",style:{top:"100px"}},null,8,["onClick"]),t(x,{size:"sm",style:{top:"190px",left:"190px"},color:"red",class:"z-max",name:"delete",onClick:[$=>this.remove(S),s[26]||(s[26]=tt(()=>{},["stop","prevent"]))]},null,8,["onClick"]),t(Ve,{height:"200px",src:i.imgs[i.imgIdx].url,onClick:$=>e.loadPageCB(S)},null,8,["src","onClick"])])):E("",!0)]),_:2},1024)]),_:2},1032,["modelValue"]))),128))])):E("",!0)])],64)}var Po=ne(Pa,[["render",Do]]);const To=le({name:"MyHistory",setup(){return{reStore:re(),enabledLabel:y("History Enabled")}},mounted(){},methods:{load(e){console.log(e),console.log(this.reStore.myhistory[e]),this.reStore.loadHistory(e)},remove(e){console.log(e),this.reStore.myhistory=this.reStore.myhistory.slice(0,e).concat(this.reStore.myhistory.slice(e+1,1e3))}}}),qo={class:"q-pa-md",style:{"max-width":"350px"}},xo={class:"flex flex-center q-ma-sm"},Ao={class:""},Bo={class:"row cardheader justify-between"},Ko=["onClick"],Ro={class:"history-remove"};function Uo(e,s,p,q,P,N){return d(),c("div",qo,[t(me,{bordered:"",class:"rounded-borders"},{default:o(()=>[t(X,null,{header:o(()=>[t(R,{avatar:""},{default:o(()=>[t(ae,{size:"md",color:"positive",icon:"history"})]),_:1}),t(R,null,{default:o(()=>[m(" Page History ")]),_:1})]),default:o(()=>[n("div",xo,[t(_,{center:"","no-caps":"",label:"Clear History",onClick:s[0]||(s[0]=u=>this.reStore.clearHistory())})]),n("div",Ao,[(d(!0),c(J,null,ce(this.reStore.myhistory,(u,i)=>(d(),O(D,{class:"bg-primary otdcard q-pa-xs q-ma-sm",flat:"",bordered:"",modelValue:this.reStore.myhistory,"onUpdate:modelValue":s[1]||(s[1]=S=>this.reStore.myhistory=S),key:i},{default:o(()=>[n("div",Bo,[n("span",{class:"history-title col-grow",onClick:S=>this.load(i)},k(i)+". "+k(u.pageTitle.slice(0,25)),9,Ko),n("span",Ro,[t(x,{name:"delete",onClick:S=>this.remove(i)},null,8,["onClick"])])])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})])}var Ho=ne(To,[["render",Uo]]);const Mo=le({name:"AssignmentPager",setup(){return{reStore:re(),course:y(null),defaultOpen:y(!0),autoAwesomeGuideWords:y(""),promptAwesome2:y(!1)}},mounted(){console.log("      AssignmentPager: The purpose of this component is to present       available Demo assignments (from Demo Course) available to try    "),W(this.reStore.courses,async(e,s)=>{console.log("AssignmentPager watcher");const p=e.ck;e.aid;try{console.log("AP setcourse 0",p),p!=="undefined"&&p!==null?this.course=this.reStore.courses[p]:console.log("did not set AP course")}catch(q){console.log("ERROR AssignmentPager ",q)}!this.course&&p?(console.log("AP setcourse 1"),this.course=this.reStore.courses[p]):this.course&&this.course.courseKey!==e.ck&&(console.log("AP setcourse 2"),this.course=this.reStore.courses[p]),console.log("AssignmentPager watcher COURSE",this.course)},{immediate:!0,deep:!0})},methods:{editAssignmentCB(e){console.log("AP editAssigmentCB ",e);const s=this.reStore.courses.ck;this.reStore.loadAssignment(s,e),this.reStore.courses.trigger+=1},newAssignmentCB(){const e=this.reStore.courses.ck;console.log("assignmentCB: ",e),this.reStore.newAssignment(e)},removeAssignmentCB(e){const s=this.reStore.courses.ck;console.log("removeAssignmentCB",s,e),this.reStore.deleteAssignment(s,e),console.log("done")},loadAssignmentCB(e){console.log("AssignmentPager loadAssignmentCB",e);const s=this.reStore.courses.ck;this.reStore.loadAssignment(s,e),this.reStore.courses.trigger+=1,this.reStore.authenticated?this.reStore.router.push("/teacher/assignmenteditor"):this.reStore.router.push("/demo")},autoAwesomeCB(){this.reStore.autoAwesomeCB(this.reStore.ck,this.autoAwesomeGuideWords)}}}),No=n("div",{class:"text-h6"},"Provide guide-words",-1),Oo={class:"q-pa-md",style:{"max-width":"350px"}},Io=n("td",null,"Course",-1),Lo={class:"hidden"},zo=n("td",null,"Key",-1),Qo=n("td",null,"Enrollment",-1),Eo=n("td",null,"Assignments",-1),Wo={key:0},Yo=n("td",null,"Loaded",-1),Jo={key:0},Fo={key:1};function Go(e,s,p,q,P,N){return d(),c(J,null,[t(te,{modelValue:e.promptAwesome2,"onUpdate:modelValue":s[4]||(s[4]=u=>e.promptAwesome2=u),persistent:"",class:"z-max"},{default:o(()=>[t(D,{style:{"min-width":"350px"}},{default:o(()=>[t(U,null,{default:o(()=>[No]),_:1}),t(U,{class:"q-pt-none"},{default:o(()=>[t(se,{dense:"",modelValue:e.autoAwesomeGuideWords,"onUpdate:modelValue":s[0]||(s[0]=u=>e.autoAwesomeGuideWords=u),autofocus:"",onKeyup:s[1]||(s[1]=Te(u=>{e.promptAwesome2=!1,this.autoAwesomeCB()},["enter"]))},null,8,["modelValue"])]),_:1}),t(ee,{align:"right",class:"text-white"},{default:o(()=>[H(t(_,{outline:"",label:"Cancel",onClick:s[2]||(s[2]=u=>e.promptAwesome2=!1)},null,512),[[M]]),H(t(_,{outline:"",label:"Save",onClick:s[3]||(s[3]=u=>this.autoAwesomeCB())},null,512),[[M]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n("div",Oo,[t(me,{bordered:"",class:"rounded-borders"},{default:o(()=>[t(X,{modelValue:e.defaultOpen,"onUpdate:modelValue":s[6]||(s[6]=u=>e.defaultOpen=u)},{header:o(()=>[t(R,{avatar:""},{default:o(()=>[t(ae,{size:"md",color:"positive",icon:"collections"})]),_:1}),t(R,null,{default:o(()=>[m(" Course Info ")]),_:1})]),default:o(()=>[this.course?(d(),O(D,{key:0,class:"q-pa-md"},{default:o(()=>[n("table",null,[n("tr",null,[Io,m(),n("td",{onClick:s[5]||(s[5]=u=>this.reStore.router.push("/teacher/courseeditor")),class:"ptr"},k(this.course.title),1)]),n("tr",Lo,[zo,m(),n("td",null,k(this.course.courseKey),1)]),n("tr",null,[Qo,m(),n("td",null,k(Object.keys(this.course.enrollment).length),1)]),n("tr",null,[Eo,m(),n("td",null,[this.course.assignments?(d(),c("span",Wo,k(Object.keys(this.course.assignments).length),1)):E("",!0)])]),n("tr",null,[Yo,n("td",null,[this.reStore.courses.aid&&this.course.assignments[this.reStore.courses.aid]?(d(),c("span",Jo,k(this.course.assignments[this.reStore.courses.aid].title),1)):(d(),c("span",Fo,"None"))])])])]),_:1})):E("",!0)]),_:1},8,["modelValue"])]),_:1})])],64)}var jo=ne(Mo,[["render",Go]]);const Xo=le({name:"CoursePager",setup(){return{reStore:re(),course:y(null),defaultOpen:y(!0)}},mounted(){console.log("      CoursePager:     "),W(this.reStore.courses,async(e,s)=>{console.log("CoursePager watcher"),e.ck,e.aid},{immediate:!0,deep:!0})},methods:{removeCourseCB(e){console.log("removeCourseCB",e),console.log("done")},editCourseCB(e){this.loadCourse(e),this.reStore.router.push("/teacher/courseeditor")},loadCourse(e){console.log("loadCourse ",e),this.reStore.loadCourse(e)}}}),Zo={class:"q-pa-md",style:{"max-width":"350px"}},el=n("td",null,null,-1),tl=n("tr",{class:"hidden"},[n("td",null,"Key"),m(),n("td")],-1),sl=n("tr",null,[n("td",null,"Enrollment"),m(),n("td")],-1),al=n("tr",null,[n("td",null,"Assignments"),m(),n("td")],-1),ol=n("tr",null,[n("td",null,"Loaded"),n("td",null,[n("span",null,"None")])],-1),ll=n("span",{class:"flex flex-center text-bold q-my-md hidden"},"Account: Courses",-1),nl={class:"absolute-top text-center"},rl={class:"text-h6"},il={class:"text-subtitle2"},ul={key:0},dl={key:1},cl={style:{"font-size":"22pt",width:"100%"},class:"text-center absolute-bottom"},ml=n("br",null,null,-1),hl=n("br",null,null,-1);function gl(e,s,p,q,P,N){return d(),c("div",Zo,[t(me,{bordered:"",class:"rounded-borders"},{default:o(()=>[t(X,{modelValue:e.defaultOpen,"onUpdate:modelValue":s[1]||(s[1]=u=>e.defaultOpen=u)},{header:o(()=>[t(R,{avatar:""},{default:o(()=>[t(ae,{size:"md",color:"positive",icon:"collections"})]),_:1}),t(R,null,{default:o(()=>[m(" Account Info ")]),_:1})]),default:o(()=>[t(D,{class:"q-pa-md"},{default:o(()=>[n("table",null,[n("tr",null,[n("td",{onClick:s[0]||(s[0]=u=>this.reStore.router.push("/teacher")),class:"ptr"},"Course"),m(),el]),tl,sl,al,ol])]),_:1})]),_:1},8,["modelValue"])]),_:1}),ll,(d(!0),c(J,null,ce(this.reStore.userSnapshot.teaching,(u,i,S)=>(d(),c("div",{key:S,class:"hidden"},[t(D,{bordered:"",flat:"",class:"otdcard q-mx-sm q-my-md"},{default:o(()=>[t(Ve,{fit:e.cover,src:this.reStore.logoURL,height:"100%",onClick:$=>this.loadCourse(i)},{default:o(()=>[n("div",nl,[n("div",rl,k(this.reStore.courses[i].title.slice(0,18)),1),n("div",il,[this.reStore.courses[i].assignments?(d(),c("span",ul,"Assignments: "+k(Object.keys(this.reStore.courses[i].assignments).length),1)):(d(),c("span",dl,"Assignments: None"))])]),n("div",cl,[n("div",null,[t(x,{color:"red",class:"ptr",name:"delete",onClick:$=>this.deleteCourseCB(i)},{default:o(()=>[t(T,null,{default:o(()=>[m("Delete Course")]),_:1})]),_:2},1032,["onClick"]),t(_,{icon:"content_copy",onClick:$=>this.copyCK(i)},{default:o(()=>[t(T,null,{default:o(()=>[m("Copy this course-key to clipboard. Enroll "),ml,m("in this course using this course-key from "),hl,m("the Student Page.")]),_:1})]),_:2},1032,["onClick"]),t(_,{icon:"edit",onClick:$=>this.editCourseCB(i)},{default:o(()=>[t(T,null,{default:o(()=>[m("Edit Course")]),_:1})]),_:2},1032,["onClick"])])])]),_:2},1032,["fit","src","onClick"])]),_:2},1024)]))),128))])}var fl=ne(Xo,[["render",gl]]);const pl=le({name:"TeacherLayout",components:{PagerComponent:Po,DocumentationComponent:os,SearchComponent:qs,ImagesComponent:Ns,BookmarksComponent:ua,OTDComponent:Da,PreferencesComponent:Xt,AssignmentStatus:ls,MyHistory:Ho,AssignmentPager:jo,CoursePager:fl,ScoreCard:Zt},setup(){const e=y(!1),s=y(!1),p=re(),q=p.preferences,P=y(null),N=y(null);return{step:y(1),reStore:p,selectedRHSTab:y(p.courses.selectedRHSTab),initialValues:y(q),scrollAreaRHS:P,scrollAreaLHS:N,leftDrawerOpen:e,rightDrawerOpen:s,flagName:y(p.langVoices[p.preferences.langVoiceKey].flagName),promptLanguage:y(!1),langVoices:y(p.preferences.langVoices),toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){s.value=!s.value}}},mounted(){this.reStore.role="teacher",W(this.reStore.courses,async(e,s)=>{console.log("TL watcher ",e,s),this.selectedRHSTab!==e.selectedRHSTab&&this.setRHS(e.selectedRHSTab)}),kt.isActive||(kt.toggle(),st("primary","#333"),st("secondary",this.initialValues.secondaryColor),st("accent",this.initialValues.accentColor),this.flagName=this.reStore.langVoices[this.reStore.prefereneces.langVoiceKey].flagName,xe(".pfi").classed(this.flagName,!0))},methods:{tabUpdate(e){console.log("tabUpdate",e),this.setRHS(e)},goEditor(){this.reStore.mode="editor",this.reStore.router.push("/teacher/editor")},goAssignment(){this.reStore.mode="assignment",this.reStore.router.push("/teacher/assignment")},setRHS(e){e==="pagerTab"?(B("#assignmentPagerDiv").classed("hidden",!0),B("#pagerDiv").classed("hidden",!1),B("#statusDiv").classed("hidden",!0),B("#coursePagerDiv").classed("hidden",!0)):e==="statusTab"?(B("#assignmentPagerDiv").classed("hidden",!0),B("#pagerDiv").classed("hidden",!0),B("#statusDiv").classed("hidden",!1),B("#coursePagerDiv").classed("hidden",!0)):e==="assignmentsTab"?(B("#assignmentPagerDiv").classed("hidden",!1),B("#pagerDiv").classed("hidden",!0),B("#statusDiv").classed("hidden",!0),B("#coursePagerDiv").classed("hidden",!0)):e==="coursesTab"&&(B("#assignmentPagerDiv").classed("hidden",!0),B("#pagerDiv").classed("hidden",!0),B("#statusDiv").classed("hidden",!0),B("#coursePagerDiv").classed("hidden",!1))},scrollTopRHS(){this.scrollAreaRHS.setScrollPosition("vertical",0)},scrollTopLHS(){this.scrollAreaLHS.setScrollPosition("vertical",0)},setLangVoiceCB(e){this.flagName=this.reStore.langVoices[e].flagName;for(const[s,p]of Object.entries(this.reStore.langVoices)){const q=p.flagName;xe(".pfi").classed(q,!1)}xe(".pfi").classed(this.flagName,!0),console.log("langVoiceKey set to ",e,this.flagName),this.reStore.courses.trigger+=1}}}),vl=n("div",{class:"text-h6"},"Set Current Language",-1),yl=n("span",{class:"pfi fi fi-xx"},null,-1),_l=n("br",null,null,-1),Sl=n("br",null,null,-1),Cl={class:"dashboard-wrapper"},kl=n("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),Vl={class:"hidden"},bl=n("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),$l={id:"coursePagerDiv"},wl={key:0},Dl={key:1},Pl={class:"q-gutter-y-sm"},Tl={id:"pagerDiv",class:"hidden"},ql={key:0},xl={key:1},Al={class:"q-gutter-y-sm"},Bl={id:"assignmentPagerDiv",class:"hidden"},Kl=n("span",{class:"hidden"},null,-1),Rl={key:0},Ul={key:1},Hl={class:"q-gutter-y-sm"},Ml={id:"statusDiv",class:"hidden"};function Nl(e,s,p,q,P,N){const u=I("router-view"),i=I("DocumentationComponent"),S=I("SearchComponent"),$=I("OTDComponent"),oe=I("BookmarksComponent"),ve=I("ImagesComponent"),Oe=I("MyHistory"),Ie=I("PreferencesComponent"),be=I("AssignmentStatus"),Z=I("PagerComponent"),K=I("AssignmentPager"),Le=I("CoursePager"),$e=I("router-link"),G=I("ScoreCard");return d(),O(is,{view:"hHh LpR fFf"},{default:o(()=>[t(ns,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:o(()=>[t(te,{modelValue:e.promptLanguage,"onUpdate:modelValue":s[1]||(s[1]=g=>e.promptLanguage=g),persistent:""},{default:o(()=>[t(D,{style:{"max-width":"300px"}},{default:o(()=>[t(U,null,{default:o(()=>[vl]),_:1}),t(U,{class:"q-pt-none"},{default:o(()=>[t(lt,{modelValue:this.reStore.preferences.langVoiceKey,"onUpdate:modelValue":[s[0]||(s[0]=g=>this.reStore.preferences.langVoiceKey=g),this.setLangVoiceCB],options:e.langVoices},null,8,["modelValue","options","onUpdate:modelValue"])]),_:1}),t(ee,{align:"right",class:"text-white"},{default:o(()=>[H(t(_,{outline:"",flat:"",label:"Close"},null,512),[[M]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(qe,null,{default:o(()=>[t(_,{icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),t(_,{onClick:s[2]||(s[2]=g=>this.reStore.router.push("/teacher")),icon:"home",class:"hidden"},{default:o(()=>[t(T,null,{default:o(()=>[m("Return to Dashboard")]),_:1})]),_:1}),t(Ne),t(_,{onClick:s[3]||(s[3]=g=>this.reStore.router.push("/teacher")),icon:"home"},{default:o(()=>[t(T,null,{default:o(()=>[m("Return to Dashboard")]),_:1})]),_:1}),t(_,{onClick:s[4]||(s[4]=g=>e.promptLanguage=!0)},{default:o(()=>[yl,t(T,null,{default:o(()=>[m("Set current language "),_l,m("Applied to new pages/searches."),Sl,m("Sync current page using sync-lang button.")]),_:1})]),_:1}),this.reStore.mode=="assignment"?(d(),O(_,{key:0,onClick:s[5]||(s[5]=g=>this.goEditor()),icon:"switch_account"},{default:o(()=>[t(T,null,{default:o(()=>[m(" Switch from Assignment to Editor Mode ")]),_:1})]),_:1})):(d(),O(_,{key:1,onClick:s[6]||(s[6]=g=>this.goAssignment()),icon:"switch_account"},{default:o(()=>[t(T,null,{default:o(()=>[m(" Switch from Editor to Assignment Mode ")]),_:1})]),_:1})),this.reStore.authenticated?(d(),O(_,{key:2,onClick:s[7]||(s[7]=g=>this.reStore.router.push("/student")),icon:"switch_account"},{default:o(()=>[t(T,null,{default:o(()=>[m(" Switch between Teacher or Student role ")]),_:1})]),_:1})):E("",!0),this.reStore.authenticated?(d(),O(_,{key:3,icon:"logout",onClick:s[8]||(s[8]=g=>this.reStore.logout())})):E("",!0),t(_,{icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1})]),_:1}),t(rs,{class:"container-fluid"},{default:o(()=>[n("div",Cl,[t(u)]),t(Vt,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":s[10]||(s[10]=g=>e.leftDrawerOpen=g),side:"left"},{default:o(()=>[t(qe,{flat:"",class:"bg-primary text-white"},{default:o(()=>[t(Ne),t(_,{flat:"",round:"",dense:"",icon:"home",class:"float-right",onClick:s[9]||(s[9]=g=>this.reStore.router.push("/teacher"))},{default:o(()=>[t(T,null,{default:o(()=>[m("Return to dashboard")]),_:1})]),_:1}),t(_,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopLHS},{default:o(()=>[t(T,null,{default:o(()=>[m("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),kl,t(bt,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaLHS"},{default:o(()=>[t(i),t(S),t($),t(oe),t(ve),t(Oe),t(Ie,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"]),t(Vt,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":s[14]||(s[14]=g=>e.rightDrawerOpen=g),side:"right"},{default:o(()=>[t(qe,{flat:"",class:"bg-primary text-white"},{default:o(()=>[n("span",Vl,[t(_,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),t($t,{dark:"",vertical:"",inset:""}),t(_,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),t($t,{dark:"",vertical:"",inset:""})]),t(us,{dense:"",align:"left",modelValue:this.reStore.courses.selectedRHSTab,"onUpdate:modelValue":[s[13]||(s[13]=g=>this.reStore.courses.selectedRHSTab=g),this.tabUpdate]},{default:o(()=>[t(St,{id:"coursesTab",name:"coursesTab",icon:"collections",onClick:s[11]||(s[11]=g=>this.setRHS("coursesTab"))},{default:o(()=>[t(T,null,{default:o(()=>[m("My Courses")]),_:1})]),_:1}),t(St,{id:"statusTab",name:"statusTab",icon:"summarize",onClick:s[12]||(s[12]=g=>this.setRHS("statusTab"))},{default:o(()=>[t(T,null,{default:o(()=>[m("Status/Progress while taking assignment")]),_:1})]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"]),t(_,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right hidden",onClick:this.scrollTopRHS},{default:o(()=>[t(T,null,{default:o(()=>[m("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),bl,t(bt,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaRHS"},{default:o(()=>[n("div",$l,[this.reStore.courses?(d(),c("span",wl,[t(be),t(Z),t(K),t(Le)])):(d(),c("span",Dl,[n("div",Pl,[t(D,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:o(()=>[m(" Please create a course at the "),n("u",null,[t($e,{to:"/teacher",class:"text-white ptr"},{default:o(()=>[m("Teacher Dashboard")]),_:1})]),m(". ")]),_:1})])]))]),n("div",Tl,[this.reStore.courses.aid?(d(),c("span",ql,[t(Z)])):(d(),c("span",xl,[n("div",Al,[t(D,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:o(()=>[m(" Please load an assignment at the "),n("u",null,[t($e,{to:"/teacher",class:"text-white ptr"},{default:o(()=>[m("Teacher Dashboard")]),_:1})]),m(". ")]),_:1})])]))]),n("div",Bl,[Kl,this.reStore.courses.ck?(d(),c("span",Rl,[t(K)])):(d(),c("span",Ul,[n("div",Hl,[t(D,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:o(()=>[m(" Please load a course at the "),n("u",null,[t($e,{to:"/teacher",class:"text-white ptr"},{default:o(()=>[m("Teacher Dashboard")]),_:1})]),m(". ")]),_:1})])]))]),n("div",Ml,[t(G)])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var mn=ne(pl,[["render",Nl]]);export{mn as default};
