import{Q as M}from"./QCardSection.f76536bb.js";import{Q as qt,u as jt,a as nt,P as Xt,A as Zt,b as tt}from"./AssignmentPager.38e310fe.js";import{e as he,r as y,u as F,_ as fe,o as u,aq as m,g as s,w as l,O as N,Q as S,k as d,as as re,j as h,ar as C,aO as Ue,f as O,i as x,at as X,aG as ge,aF as J,a as V,c as xt,ay as es,h as v,T as De,d as ts,y as ss,q as kt,W as as,l as E,aH as st,P as Ct,s as at}from"./index.503ca5c1.js";import{d as te,C as U,Q as se}from"./ClosePopup.c7c00b91.js";import{Q as P}from"./QCard.c405f211.js";import{Q as T}from"./QTooltip.2482cc3e.js";import{Q as Te,D as os,A as ls}from"./DocumentationComponent.2ea607a5.js";import{Q as Pe,a as ns,b as Vt,c as bt,d as is,e as rs}from"./QLayout.078b6ec3.js";import{Q as oe,a as K,b as Ve,f as wt}from"./QList.61cc8922.js";import{Q as us}from"./QTabs.5b369537.js";import{u as pe,p as me,t as ds,a as $t,f as cs,g as ms,j as ot,_ as gs,d as Dt,s as qe}from"./re-store.c6e381ad.js";import{Q as ae}from"./QInput.94e659fa.js";import{s as A}from"./transform.aea72fbe.js";import{Q as Ae}from"./QImg.adc74993.js";import{u as hs,a as fs}from"./use-dark.1f9ef394.js";import{u as ps,a as vs,b as ys}from"./use-form.4a6b2f96.js";import{Q as _s}from"./QToggle.07bf0cba.js";import"./use-key-composition.b897e311.js";import"./use-prevent-scroll.75ef3c60.js";import"./scroll.f61452b2.js";import"./QCheckbox.822c53c3.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";const Ss=he({name:"SearchComponent",setup(){const e=pe(),a=y("");return{reStore:e,searchTerms:a,searchSize:y(e.preferences.resLimit),searchResults:y([]),promptSearchSize:y(!1)}},mounted(){F(this.reStore.preferences,async(p,R)=>{console.log("watcher ",p,R),this.searchSize=p.resLimit;for(const[I,r]of Object.entries(this.reStore.langVoices))A("#sfi").classed(r.flagName,!1);const D=this.reStore.preferences.langVoiceKey;A("#sfi").classed(this.reStore.langVoices[D].flagName,!0)});const e=this.reStore.preferences.langVoiceKey,a=this.reStore.langVoices[e].flagName;A("#sfi").classed(a,!0)},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchResults.splice(e,1)},async load(e){console.log(e),console.log(this.searchResults[e]);const a=this.reStore.preferences.langVoiceKey;console.log("calling loadPageId ",this.searchResults[e].pageid,a),await this.reStore.loadPageId(this.searchResults[e].pageid,a),this.reStore.page.imgIdx=0,this.reStore.courses.trigger+=1},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("doSearch ",e,this.searchTerms),this.reStore.wiki.setLang(e.langName);const a=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",a.results.length),this.searchResults=a.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),ks=d("div",{class:"text-h6"},"Search Results Size",-1),Cs={class:"q-pa-md",style:{"max-width":"350px"}},Vs={class:"q-gutter-y-sm column"},bs=d("span",{class:"on-right text-h2",id:"sfi"},null,-1),ws={key:0},$s={class:"row cardheader ptr justify-between"},Ds=["onClick"],Ts={class:"history-remove"};function Ps(e,a,p,R,D,I){return u(),m(X,null,[s(se,{modelValue:e.promptSearchSize,"onUpdate:modelValue":a[2]||(a[2]=r=>e.promptSearchSize=r),persistent:""},{default:l(()=>[s(P,{style:{"min-width":"350px"}},{default:l(()=>[s(M,{align:"center"},{default:l(()=>[ks]),_:1}),s(M,{class:"q-pt-none",align:"center"},{default:l(()=>[s(qt,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":a[0]||(a[0]=r=>e.searchSize=r)},null,8,["modelValue"])]),_:1}),s(te,{align:"center",class:"text-white"},{default:l(()=>[N(s(S,{flat:"",label:"Cancel"},null,512),[[U]]),N(s(S,{flat:"",label:"Update results size",onClick:a[1]||(a[1]=r=>this.updateSearchSize())},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),d("div",Cs,[s(Ve,{bordered:"",class:"rounded-borders"},{default:l(()=>[s(oe,null,{header:l(()=>[s(K,{avatar:""},{default:l(()=>[s(re,{size:"md",icon:"search",color:"positive","text-color":"white"})]),_:1}),s(K,null,{default:l(()=>[h(" Search ")]),_:1})]),default:l(()=>[s(P,null,{default:l(()=>[d("div",Vs,[s(Pe,{class:"bg-primary text-white rounded-borders q-my-md"},{default:l(()=>[s(S,{dark:"",standout:"",onClick:a[3]||(a[3]=r=>e.promptSearchSize=!0)},{default:l(()=>[h(C(this.searchResults.length)+" ",1),s(T,null,{default:l(()=>[h("Change results limit ("+C(this.searchSize)+")",1)]),_:1})]),_:1}),bs,s(ae,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":a[6]||(a[6]=r=>e.searchTerms=r),"input-class":"text-right",class:"q-ml-md",onKeyup:[a[7]||(a[7]=r=>this.update()),a[8]||(a[8]=Ue(r=>this.doSearch(),["enter"]))]},{append:l(()=>[e.searchTerms===""?(u(),O(x,{key:0,name:"search",onClick:a[4]||(a[4]=r=>this.doSearch())})):(u(),O(x,{key:1,name:"clear",class:"cursor-pointer",onClick:a[5]||(a[5]=r=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(u(),m("div",ws,[(u(!0),m(X,null,ge(this.searchResults,(r,i)=>(u(),O(P,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":a[9]||(a[9]=_=>this.searchResults=_),key:i},{default:l(()=>[d("div",$s,[d("span",{class:"history-title col-grow",onClick:_=>this.load(i)},C(i)+". "+C(r.title.slice(0,25)),9,Ds),d("span",Ts,[s(x,{class:"primary",size:e.xl,color:e.primary,name:"delete",onClick:_=>this.remove(i)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):J("",!0)]),_:1})]),_:1})]),_:1})])],64)}var qs=fe(Ss,[["render",Ps]]);const xs=he({name:"ImagesComponent",setup(){return{reStore:pe(),newCap:y(""),newDesc:y(""),newName:y(""),newSource:y(""),newUrl:y(""),promptAddImage:y(!1)}},mounted(){F(this.reStore.userSnapshot.images,async(e,a)=>{console.log("watcher ",e,a)})},methods:{addImageCB(){console.log("addImageCB",this.newUrl);const e={name:this.newName,desc:this.newDesc,cap:this.newCap,source:this.newSource,url:this.newUrl};this.reStore.saveImage(null,e)},imgCB(e,a){this.reStore.router.push("/teacher/editor"),console.log(e,a),this.reStore.loadImgId(e)},remove(e,a){console.log(e,a),this.reStore.removeImage(e)}}}),Hs={class:"q-pa-md",style:{"max-width":"350px"}},Rs={class:"flex flex-center"},Bs={class:"row cardheader justify-between"},Ks={class:""},Ms={key:0},Ns={class:"history-remove ptr"};function Us(e,a,p,R,D,I){return u(),m(X,null,[s(se,{modelValue:e.promptAddImage,"onUpdate:modelValue":a[5]||(a[5]=r=>e.promptAddImage=r)},{default:l(()=>[s(P,null,{default:l(()=>[s(M,null,{default:l(()=>[s(ae,{modelValue:e.newCap,"onUpdate:modelValue":a[0]||(a[0]=r=>e.newCap=r),label:"caption"},null,8,["modelValue"]),s(ae,{modelValue:e.newDesc,"onUpdate:modelValue":a[1]||(a[1]=r=>e.newDesc=r),label:"description"},null,8,["modelValue"]),s(ae,{modelValue:e.newName,"onUpdate:modelValue":a[2]||(a[2]=r=>e.newName=r),label:"name"},null,8,["modelValue"]),s(ae,{modelValue:e.newSource,"onUpdate:modelValue":a[3]||(a[3]=r=>e.newSource=r),label:"source"},null,8,["modelValue"]),s(ae,{modelValue:e.newUrl,"onUpdate:modelValue":a[4]||(a[4]=r=>e.newUrl=r),label:"url"},null,8,["modelValue"])]),_:1}),s(te,{align:"center",class:"text-white"},{default:l(()=>[N(s(S,{flat:"",label:"Cancel"},null,512),[[U]]),N(s(S,{flat:"",label:"Add",onClick:this.addImageCB},null,8,["onClick"]),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),d("div",Hs,[s(Ve,{bordered:"",class:"rounded-borders"},{default:l(()=>[s(oe,{label:"Saved Images"},{header:l(()=>[s(K,{avatar:""},{default:l(()=>[s(re,{size:"md",color:"positive",icon:"image"})]),_:1}),s(K,null,{default:l(()=>[h(" Images ")]),_:1})]),default:l(()=>[s(P,null,{default:l(()=>[d("div",Rs,[s(S,{"no-caps":"",onClick:a[6]||(a[6]=r=>e.promptAddImage=!0)},{default:l(()=>[h(" Add Image "),s(T,null,{default:l(()=>[h("Add a custom image (only saves url, not image data)")]),_:1})]),_:1})]),d("div",null,[(u(!0),m(X,null,ge(this.reStore.userSnapshot.images,(r,i)=>(u(),O(P,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":a[7]||(a[7]=_=>this.reStore.userSnapshot.images=_),key:i},{default:l(()=>[d("div",Bs,[d("span",Ks,[s(x,{name:"title",onClick:_=>this.reStore.setCover(r)},null,8,["onClick"])]),r.cap?(u(),m("span",Ms,C(r.cap.slice(0,25)),1)):J("",!0),d("span",Ns,[s(x,{name:"delete",onClick:_=>this.remove(i,r)},null,8,["onClick"])])]),s(Ae,{class:"cardimage",onClick:_=>this.imgCB(i,r),src:r.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])],64)}var As=fe(xs,[["render",Us]]);const Is=he({name:"BookmarksComponent",setup(){return{reStore:pe()}},mounted(){F(this.reStore.userSnapshot.bookmarks,async(e,a)=>{console.log("watcher ",e,a)})},methods:{imgCB(e,a){this.reStore.router.push("/teacher/editor"),console.log(e,a),this.reStore.page=JSON.parse(JSON.stringify(a)),this.reStore.courses.trigger+=1},remove(e,a){console.log(e,a),this.reStore.removeBookmark(e)}}}),Os={class:"q-pa-md",style:{"max-width":"350px"}},Ls={class:"row cardheader justify-between"},zs={class:"history-remove hidden"},Qs={key:0,class:"fi fi-gb"},Ys={key:1,class:"fi fi-us"},Es={key:2,class:"fi fi-mx"},Ws={key:3,class:"fi fi-fr"},Js={key:4,class:"fi fi-de"},Fs={key:5,class:"fi fi-it"},Gs={key:6,class:"fi fi-br"},js={key:7,class:"fi fi-ke"},Xs={key:8,class:"fi fi-ru"},Zs={key:9,class:"fi fi-th"},ea={key:10,class:"fi fi-cn"},ta={key:11,class:"fi fi-hk"},sa={key:12,class:"fi fi-tw"},aa={key:13,class:"fi fi-kr"},oa={key:14,class:"fi fi-jp"},la={key:15,class:"fi fi-id"},na={key:16,class:"fi fi-xx"},ia={class:"history-remove ptr"};function ra(e,a,p,R,D,I){return u(),m("div",Os,[s(Ve,{bordered:"",class:"rounded-borders"},{default:l(()=>[s(oe,{label:"Wikipedia Bookmarks"},{header:l(()=>[s(K,{avatar:""},{default:l(()=>[s(re,{size:"md",color:"positive",icon:"bookmark"})]),_:1}),s(K,null,{default:l(()=>[h(" Bookmarks ")]),_:1})]),default:l(()=>[s(P,null,{default:l(()=>[d("div",null,[(u(!0),m(X,null,ge(this.reStore.userSnapshot.bookmarks,(r,i)=>(u(),O(P,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":a[0]||(a[0]=_=>this.reStore.userSnapshot.bookmarks=_),key:i},{default:l(()=>[d("div",Ls,[d("span",zs,[s(x)]),r.langVoiceKey==="Eng-UK-Fem"?(u(),m("span",Qs)):r.langVoiceKey==="Eng-US"?(u(),m("span",Ys)):r.langVoiceKey==="espa\xF1ol"?(u(),m("span",Es)):r.langVoiceKey==="fran\xE7ais"?(u(),m("span",Ws)):r.langVoiceKey==="Deutsch"?(u(),m("span",Js)):r.langVoiceKey==="italiano"?(u(),m("span",Fs)):r.langVoiceKey==="portugu\xEAs do Brasil"?(u(),m("span",Gs)):r.langVoiceKey==="Kiswahili"?(u(),m("span",js)):r.langVoiceKey==="\u0440\u0443\u0441\u0441\u043A\u0438\u0439"?(u(),m("span",Xs)):r.langVoiceKey==="\u0E44\u0E17\u0E22"?(u(),m("span",Zs)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09"?(u(),m("span",ea)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09"?(u(),m("span",ta)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09"?(u(),m("span",sa)):r.langVoiceKey==="\uD55C\uAD6D\uC758"?(u(),m("span",aa)):r.langVoiceKey==="\u65E5\u672C\u8A9E"?(u(),m("span",oa)):r.langVoiceKey==="Bahasa Indonesia"?(u(),m("span",la)):(u(),m("span",na)),h(" "+C(r.pageTitle.slice(0,25))+" ",1),d("span",ia,[s(x,{name:"delete",onClick:_=>this.remove(i,r)},null,8,["onClick"])])]),s(Ae,{class:"cardimage",onClick:_=>this.imgCB(i,r),src:r.imgs[r.imgIdx].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])}var ua=fe(Is,[["render",ra]]);const da=["gregorian","persian"],ca={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>da.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},ma=["update:modelValue"];function ne(e){return e.year+"/"+me(e.month)+"/"+me(e.day)}function ga(e,a){const p=V(()=>e.disable!==!0&&e.readonly!==!0),R=V(()=>e.editable===!0?0:-1),D=V(()=>{const i=[];return e.color!==void 0&&i.push(`bg-${e.color}`),e.textColor!==void 0&&i.push(`text-${e.textColor}`),i.join(" ")});function I(){return e.locale!==void 0?{...a.lang.date,...e.locale}:a.lang.date}function r(i){const _=new Date,$=i===!0?null:0;if(e.calendar==="persian"){const Z=ds(_);return{year:Z.jy,month:Z.jm,day:Z.jd}}return{year:_.getFullYear(),month:_.getMonth()+1,day:_.getDate(),hour:$,minute:$,second:$,millisecond:$}}return{editable:p,tabindex:R,headerClass:D,getLocale:I,getCurrentDate:r}}const ce=20,ha=["Calendar","Years","Months"],Tt=e=>ha.includes(e),lt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Ce=" \u2014 ";function ie(e){return e.year+"/"+me(e.month)}var fa=xt({name:"QDate",props:{...ca,...ps,...hs,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:lt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:lt},navigationMaxYearMonth:{type:String,validator:lt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Tt}},emits:[...ma,"rangeStart","rangeEnd","navigation"],setup(e,{slots:a,emit:p}){const{proxy:R}=ss(),{$q:D}=R,I=fs(e,D),{getCache:r}=jt(),{tabindex:i,headerClass:_,getLocale:$,getCurrentDate:Z}=ga(e,D);let ve;const Ie=vs(e),Oe=ys(Ie),be=y(null),G=y(ht()),B=y($()),Le=V(()=>ht()),H=V(()=>$()),ee=V(()=>Z()),k=y(ft(G.value,B.value)),Y=y(e.defaultView),it=D.lang.rtl===!0?"right":"left",xe=y(it.value),ze=y(it.value),Qe=k.value.year,He=y(Qe-Qe%ce-(Qe<0?ce:0)),L=y(null),Ht=V(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(I.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),ue=V(()=>e.color||"primary"),ye=V(()=>e.textColor||"white"),Re=V(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Ye=V(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),j=V(()=>Ye.value.filter(t=>typeof t=="string").map(t=>Fe(t,G.value,B.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),_e=V(()=>{const t=o=>Fe(o,G.value,B.value);return Ye.value.filter(o=>es(o)===!0&&o.from!==void 0&&o.to!==void 0).map(o=>({from:t(o.from),to:t(o.to)})).filter(o=>o.from.dateHash!==null&&o.to.dateHash!==null&&o.from.dateHash<o.to.dateHash)}),Be=V(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const o=$t(t.year,t.month,t.day);return new Date(o.gy,o.gm-1,o.gd)}),Ee=V(()=>e.calendar==="persian"?ne:(t,o,n)=>cs(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),o===void 0?G.value:o,n===void 0?B.value:n,t.year,t.timezoneOffset)),we=V(()=>j.value.length+_e.value.reduce((t,o)=>t+1+ms(Be.value(o.to),Be.value(o.from)),0)),rt=V(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(L.value!==null){const n=L.value.init,g=Be.value(n);return B.value.daysShort[g.getDay()]+", "+B.value.monthsShort[n.month-1]+" "+n.day+Ce+"?"}if(we.value===0)return Ce;if(we.value>1)return`${we.value} ${B.value.pluralDay}`;const t=j.value[0],o=Be.value(t);return isNaN(o.valueOf())===!0?Ce:B.value.headerTitle!==void 0?B.value.headerTitle(o,t):B.value.daysShort[o.getDay()]+", "+B.value.monthsShort[t.month-1]+" "+t.day}),Rt=V(()=>j.value.concat(_e.value.map(o=>o.from)).sort((o,n)=>o.year-n.year||o.month-n.month)[0]),Bt=V(()=>j.value.concat(_e.value.map(o=>o.to)).sort((o,n)=>n.year-o.year||n.month-o.month)[0]),ut=V(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(we.value===0)return Ce;if(we.value>1){const t=Rt.value,o=Bt.value,n=B.value.monthsShort;return n[t.month-1]+(t.year!==o.year?" "+t.year+Ce+n[o.month-1]+" ":t.month!==o.month?Ce+n[o.month-1]:"")+" "+o.year}return j.value[0].year}),Ke=V(()=>{const t=[D.iconSet.datetime.arrowLeft,D.iconSet.datetime.arrowRight];return D.lang.rtl===!0?t.reverse():t}),dt=V(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):B.value.firstDayOfWeek),Kt=V(()=>{const t=B.value.daysShort,o=dt.value;return o>0?t.slice(o,7).concat(t.slice(0,o)):t}),le=V(()=>{const t=k.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():ot(t.year,t.month)}),Mt=V(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),z=V(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Q=V(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),We=V(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return z.value!==null&&z.value.year>=k.value.year&&(t.year.prev=!1,z.value.year===k.value.year&&z.value.month>=k.value.month&&(t.month.prev=!1)),Q.value!==null&&Q.value.year<=k.value.year&&(t.year.next=!1,Q.value.year===k.value.year&&Q.value.month<=k.value.month&&(t.month.next=!1)),t}),Me=V(()=>{const t={};return j.value.forEach(o=>{const n=ie(o);t[n]===void 0&&(t[n]=[]),t[n].push(o.day)}),t}),ct=V(()=>{const t={};return _e.value.forEach(o=>{const n=ie(o.from),g=ie(o.to);if(t[n]===void 0&&(t[n]=[]),t[n].push({from:o.from.day,to:n===g?o.to.day:void 0,range:o}),n<g){let c;const{year:w,month:f}=o.from,b=f<12?{year:w,month:f+1}:{year:w+1,month:1};for(;(c=ie(b))<=g;)t[c]===void 0&&(t[c]=[]),t[c].push({from:void 0,to:c===g?o.to.day:void 0,range:o}),b.month++,b.month>12&&(b.year++,b.month=1)}}),t}),$e=V(()=>{if(L.value===null)return;const{init:t,initHash:o,final:n,finalHash:g}=L.value,[c,w]=o<=g?[t,n]:[n,t],f=ie(c),b=ie(w);if(f!==W.value&&b!==W.value)return;const q={};return f===W.value?(q.from=c.day,q.includeFrom=!0):q.from=1,b===W.value?(q.to=w.day,q.includeTo=!0):q.to=le.value,q}),W=V(()=>ie(k.value)),Nt=V(()=>{const t={};if(e.options===void 0){for(let n=1;n<=le.value;n++)t[n]=!0;return t}const o=typeof e.options=="function"?e.options:n=>e.options.includes(n);for(let n=1;n<=le.value;n++){const g=W.value+"/"+me(n);t[n]=o(g)}return t}),Ut=V(()=>{const t={};if(e.events===void 0)for(let o=1;o<=le.value;o++)t[o]=!1;else{const o=typeof e.events=="function"?e.events:n=>e.events.includes(n);for(let n=1;n<=le.value;n++){const g=W.value+"/"+me(n);t[n]=o(g)===!0&&Mt.value(g)}}return t}),At=V(()=>{let t,o;const{year:n,month:g}=k.value;if(e.calendar!=="persian")t=new Date(n,g-1,1),o=new Date(n,g-1,0).getDate();else{const c=$t(n,g,1);t=new Date(c.gy,c.gm-1,c.gd);let w=g-1,f=n;w===0&&(w=12,f--),o=ot(f,w)}return{days:t.getDay()-dt.value-1,endDay:o}}),mt=V(()=>{const t=[],{days:o,endDay:n}=At.value,g=o<0?o+7:o;if(g<6)for(let f=n-g;f<=n;f++)t.push({i:f,fill:!0});const c=t.length;for(let f=1;f<=le.value;f++){const b={i:f,event:Ut.value[f],classes:[]};Nt.value[f]===!0&&(b.in=!0,b.flat=!0),t.push(b)}if(Me.value[W.value]!==void 0&&Me.value[W.value].forEach(f=>{const b=c+f-1;Object.assign(t[b],{selected:!0,unelevated:!0,flat:!1,color:ue.value,textColor:ye.value})}),ct.value[W.value]!==void 0&&ct.value[W.value].forEach(f=>{if(f.from!==void 0){const b=c+f.from-1,q=c+(f.to||le.value)-1;for(let et=b;et<=q;et++)Object.assign(t[et],{range:f.range,unelevated:!0,color:ue.value,textColor:ye.value});Object.assign(t[b],{rangeFrom:!0,flat:!1}),f.to!==void 0&&Object.assign(t[q],{rangeTo:!0,flat:!1})}else if(f.to!==void 0){const b=c+f.to-1;for(let q=c;q<=b;q++)Object.assign(t[q],{range:f.range,unelevated:!0,color:ue.value,textColor:ye.value});Object.assign(t[b],{flat:!1,rangeTo:!0})}else{const b=c+le.value-1;for(let q=c;q<=b;q++)Object.assign(t[q],{range:f.range,unelevated:!0,color:ue.value,textColor:ye.value})}}),$e.value!==void 0){const f=c+$e.value.from-1,b=c+$e.value.to-1;for(let q=f;q<=b;q++)t[q].color=ue.value,t[q].editRange=!0;$e.value.includeFrom===!0&&(t[f].editRangeFrom=!0),$e.value.includeTo===!0&&(t[b].editRangeTo=!0)}k.value.year===ee.value.year&&k.value.month===ee.value.month&&(t[c+ee.value.day-1].today=!0);const w=t.length%7;if(w>0){const f=7-w;for(let b=1;b<=f;b++)t.push({i:b,fill:!0})}return t.forEach(f=>{let b="q-date__calendar-item ";f.fill===!0?b+="q-date__calendar-item--fill":(b+=`q-date__calendar-item--${f.in===!0?"in":"out"}`,f.range!==void 0&&(b+=` q-date__range${f.rangeTo===!0?"-to":f.rangeFrom===!0?"-from":""}`),f.editRange===!0&&(b+=` q-date__edit-range${f.editRangeFrom===!0?"-from":""}${f.editRangeTo===!0?"-to":""}`),(f.range!==void 0||f.editRange===!0)&&(b+=` text-${f.color}`)),f.classes=b}),t}),It=V(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});F(()=>e.modelValue,t=>{if(ve===t)ve=0;else{const{year:o,month:n}=ft(G.value,B.value);Se(o,n)}}),F(Y,()=>{be.value!==null&&R.$el.contains(document.activeElement)===!0&&be.value.focus()}),F(()=>k.value.year,t=>{p("navigation",{year:t,month:k.value.month})}),F(()=>k.value.month,t=>{p("navigation",{year:k.value.year,month:t})}),F(Le,t=>{St(t,B.value,"mask"),G.value=t}),F(H,t=>{St(G.value,t,"locale"),B.value=t});function gt(){const t=ee.value,o=Me.value[ie(t)];(o===void 0||o.includes(t.day)===!1)&&je(t),Je(t.year,t.month)}function Ot(t){Tt(t)===!0&&(Y.value=t)}function Lt(t,o){["month","year"].includes(t)&&(t==="month"?vt:Ge)(o===!0?-1:1)}function Je(t,o){Y.value="Calendar",Se(t,o)}function zt(t,o){if(e.range===!1||!t){L.value=null;return}const n=Object.assign({...k.value},t),g=o!==void 0?Object.assign({...k.value},o):n;L.value={init:n,initHash:ne(n),final:g,finalHash:ne(g)},Je(n.year,n.month)}function ht(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Fe(t,o,n){return gs(t,o,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function ft(t,o){const n=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(n.length===0)return pt();const g=n[n.length-1],c=Fe(g.from!==void 0?g.from:g,t,o);return c.dateHash===null?pt():c}function pt(){let t,o;if(e.defaultYearMonth!==void 0){const n=e.defaultYearMonth.split("/");t=parseInt(n[0],10),o=parseInt(n[1],10)}else{const n=ee.value!==void 0?ee.value:Z();t=n.year,o=n.month}return{year:t,month:o,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+me(o)+"/01"}}function vt(t){let o=k.value.year,n=Number(k.value.month)+t;n===13?(n=1,o++):n===0&&(n=12,o--),Se(o,n),Re.value===!0&&Ne("month")}function Ge(t){const o=Number(k.value.year)+t;Se(o,k.value.month),Re.value===!0&&Ne("year")}function Qt(t){Se(t,k.value.month),Y.value=e.defaultView==="Years"?"Months":"Calendar",Re.value===!0&&Ne("year")}function Yt(t){Se(k.value.year,t),Y.value="Calendar",Re.value===!0&&Ne("month")}function Et(t,o){const n=Me.value[o];(n!==void 0&&n.includes(t.day)===!0?Xe:je)(t)}function de(t){return{year:t.year,month:t.month,day:t.day}}function Se(t,o){z.value!==null&&t<=z.value.year&&(t=z.value.year,o<z.value.month&&(o=z.value.month)),Q.value!==null&&t>=Q.value.year&&(t=Q.value.year,o>Q.value.month&&(o=Q.value.month));const n=t+"/"+me(o)+"/01";n!==k.value.dateHash&&(xe.value=k.value.dateHash<n==(D.lang.rtl!==!0)?"left":"right",t!==k.value.year&&(ze.value=xe.value),kt(()=>{He.value=t-t%ce-(t<0?ce:0),Object.assign(k.value,{year:t,month:o,day:1,dateHash:n})}))}function yt(t,o,n){const g=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;ve=g;const{reason:c,details:w}=_t(o,n);p("update:modelValue",g,c,w)}function Ne(t){const o=j.value[0]!==void 0&&j.value[0].dateHash!==null?{...j.value[0]}:{...k.value};kt(()=>{o.year=k.value.year,o.month=k.value.month;const n=e.calendar!=="persian"?new Date(o.year,o.month,0).getDate():ot(o.year,o.month);o.day=Math.min(Math.max(1,o.day),n);const g=ke(o);ve=g;const{details:c}=_t("",o);p("update:modelValue",g,t,c)})}function _t(t,o){return o.from!==void 0?{reason:`${t}-range`,details:{...de(o.target),from:de(o.from),to:de(o.to)}}:{reason:`${t}-day`,details:de(o)}}function ke(t,o,n){return t.from!==void 0?{from:Ee.value(t.from,o,n),to:Ee.value(t.to,o,n)}:Ee.value(t,o,n)}function je(t){let o;if(e.multiple===!0)if(t.from!==void 0){const n=ne(t.from),g=ne(t.to),c=j.value.filter(f=>f.dateHash<n||f.dateHash>g),w=_e.value.filter(({from:f,to:b})=>b.dateHash<n||f.dateHash>g);o=c.concat(w).concat(t).map(f=>ke(f))}else{const n=Ye.value.slice();n.push(ke(t)),o=n}else o=ke(t);yt(o,"add",t)}function Xe(t){if(e.noUnset===!0)return;let o=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const n=ke(t);t.from!==void 0?o=e.modelValue.filter(g=>g.from!==void 0?g.from!==n.from&&g.to!==n.to:!0):o=e.modelValue.filter(g=>g!==n),o.length===0&&(o=null)}yt(o,"remove",t)}function St(t,o,n){const g=j.value.concat(_e.value).map(c=>ke(c,t,o)).filter(c=>c.from!==void 0?c.from.dateHash!==null&&c.to.dateHash!==null:c.dateHash!==null);p("update:modelValue",(e.multiple===!0?g:g[0])||null,n)}function Wt(){if(e.minimal!==!0)return v("div",{class:"q-date__header "+_.value},[v("div",{class:"relative-position"},[v(De,{name:"q-transition--fade"},()=>v("div",{key:"h-yr-"+ut.value,class:"q-date__header-subtitle q-date__header-link "+(Y.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...r("vY",{onClick(){Y.value="Years"},onKeyup(t){t.keyCode===13&&(Y.value="Years")}})},[ut.value]))]),v("div",{class:"q-date__header-title relative-position flex no-wrap"},[v("div",{class:"relative-position col"},[v(De,{name:"q-transition--fade"},()=>v("div",{key:"h-sub"+rt.value,class:"q-date__header-title-label q-date__header-link "+(Y.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...r("vC",{onClick(){Y.value="Calendar"},onKeyup(t){t.keyCode===13&&(Y.value="Calendar")}})},[rt.value]))]),e.todayBtn===!0?v(S,{class:"q-date__header-today self-start",icon:D.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:i.value,onClick:gt}):null])])}function Ze({label:t,type:o,key:n,dir:g,goTo:c,boundaries:w,cls:f}){return[v("div",{class:"row items-center q-date__arrow"},[v(S,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ke.value[0],tabindex:i.value,disable:w.prev===!1,...r("go-#"+o,{onClick(){c(-1)}})})]),v("div",{class:"relative-position overflow-hidden flex flex-center"+f},[v(De,{name:"q-transition--jump-"+g},()=>v("div",{key:n},[v(S,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:i.value,...r("view#"+o,{onClick:()=>{Y.value=o}})})]))]),v("div",{class:"row items-center q-date__arrow"},[v(S,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ke.value[1],tabindex:i.value,disable:w.next===!1,...r("go+#"+o,{onClick(){c(1)}})})])]}const Jt={Calendar:()=>[v("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[v("div",{class:"q-date__navigation row items-center no-wrap"},Ze({label:B.value.months[k.value.month-1],type:"Months",key:k.value.month,dir:xe.value,goTo:vt,boundaries:We.value.month,cls:" col"}).concat(Ze({label:k.value.year,type:"Years",key:k.value.year,dir:ze.value,goTo:Ge,boundaries:We.value.year,cls:""}))),v("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Kt.value.map(t=>v("div",{class:"q-date__calendar-item"},[v("div",t)]))),v("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[v(De,{name:"q-transition--slide-"+xe.value},()=>v("div",{key:W.value,class:"q-date__calendar-days fit"},mt.value.map(t=>v("div",{class:t.classes},[t.in===!0?v(S,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:i.value,...r("day#"+t.i,{onClick:()=>{Ft(t.i)},onMouseover:()=>{Gt(t.i)}})},t.event!==!1?()=>v("div",{class:"q-date__event bg-"+t.event}):null):v("div",""+t.i)]))))])])],Months(){const t=k.value.year===ee.value.year,o=g=>z.value!==null&&k.value.year===z.value.year&&z.value.month>g||Q.value!==null&&k.value.year===Q.value.year&&Q.value.month<g,n=B.value.monthsShort.map((g,c)=>{const w=k.value.month===c+1;return v("div",{class:"q-date__months-item flex flex-center"},[v(S,{class:t===!0&&ee.value.month===c+1?"q-date__today":null,flat:w!==!0,label:g,unelevated:w,color:w===!0?ue.value:null,textColor:w===!0?ye.value:null,tabindex:i.value,disable:o(c+1),...r("month#"+c,{onClick:()=>{Yt(c+1)}})})])});return e.yearsInMonthView===!0&&n.unshift(v("div",{class:"row no-wrap full-width"},[Ze({label:k.value.year,type:"Years",key:k.value.year,dir:ze.value,goTo:Ge,boundaries:We.value.year,cls:" col"})])),v("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const t=He.value,o=t+ce,n=[],g=c=>z.value!==null&&z.value.year>c||Q.value!==null&&Q.value.year<c;for(let c=t;c<=o;c++){const w=k.value.year===c;n.push(v("div",{class:"q-date__years-item flex flex-center"},[v(S,{key:"yr"+c,class:ee.value.year===c?"q-date__today":null,flat:!w,label:c,dense:!0,unelevated:w,color:w===!0?ue.value:null,textColor:w===!0?ye.value:null,tabindex:i.value,disable:g(c),...r("yr#"+c,{onClick:()=>{Qt(c)}})})]))}return v("div",{class:"q-date__view q-date__years flex flex-center"},[v("div",{class:"col-auto"},[v(S,{round:!0,dense:!0,flat:!0,icon:Ke.value[0],tabindex:i.value,disable:g(t),...r("y-",{onClick:()=>{He.value-=ce}})})]),v("div",{class:"q-date__years-content col self-stretch row items-center"},n),v("div",{class:"col-auto"},[v(S,{round:!0,dense:!0,flat:!0,icon:Ke.value[1],tabindex:i.value,disable:g(o),...r("y+",{onClick:()=>{He.value+=ce}})})])])}};function Ft(t){const o={...k.value,day:t};if(e.range===!1){Et(o,W.value);return}if(L.value===null){const n=mt.value.find(c=>c.fill!==!0&&c.i===t);if(e.noUnset!==!0&&n.range!==void 0){Xe({target:o,from:n.range.from,to:n.range.to});return}if(n.selected===!0){Xe(o);return}const g=ne(o);L.value={init:o,initHash:g,final:o,finalHash:g},p("rangeStart",de(o))}else{const n=L.value.initHash,g=ne(o),c=n<=g?{from:L.value.init,to:o}:{from:o,to:L.value.init};L.value=null,je(n===g?o:{target:o,...c}),p("rangeEnd",{from:de(c.from),to:de(c.to)})}}function Gt(t){if(L.value!==null){const o={...k.value,day:t};Object.assign(L.value,{final:o,finalHash:ne(o)})}}return Object.assign(R,{setToday:gt,setView:Ot,offsetCalendar:Lt,setCalendarTo:Je,setEditingRange:zt}),()=>{const t=[v("div",{class:"q-date__content col relative-position"},[v(De,{name:"q-transition--fade"},Jt[Y.value])])],o=ts(a.default);return o!==void 0&&t.push(v("div",{class:"q-date__actions"},o)),e.name!==void 0&&e.disable!==!0&&Oe(t,"push"),v("div",{class:Ht.value,...It.value},[Wt(),v("div",{ref:be,class:"q-date__main col column",tabindex:-1},t)])}}});const pa=["top","middle","bottom"];var va=xt({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>pa.includes(e)}},setup(e,{slots:a}){const p=V(()=>e.align!==void 0?{verticalAlign:e.align}:null),R=V(()=>{const D=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(D!==void 0?` text-${D}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>v("div",{class:R.value,style:p.value,role:"status","aria-label":e.label},as(a.default,e.label!==void 0?[e.label]:[]))}});const ya=he({name:"OTDComponent",setup(){const e=pe(),a=Date.now(),p=Dt.formatDate(a,"MM/DD");return{reStore:e,otditems:y([]),promptOTDDate:y(!1),otddate:y(Date.now()),otdlabel:y(p),otdtype:y("selected")}},mounted(){this.init(),F(this.reStore.preferences,async(e,a)=>{console.log("OTD watcher"),e.langVoiceKey!==a.langVoiceKey?this.init():(console.log("OTD watcher ",e),this.init())})},methods:{async init(){console.log("OTD init");const e=this.reStore.preferences.langVoiceKey;await this.reStore.wiki.setLang(this.reStore.langVoices[e].langName);const a=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=a[this.otdtype],console.log(this.otditems);for(const[R,D]of Object.entries(this.reStore.langVoices)){const I=D.flagName;A("#otdfi").classed(I,!1)}const p=this.reStore.langVoices[e].flagName;A("#otdfi").classed(p,!0)},async loadPageId(e){console.log("loadPageId ",e);const a=this.reStore.preferences.langVoiceKey;console.log("OTD load ",a),this.reStore.loadPageId(e,a),this.reStore.router.push("/teacher/editor")},async load(e){console.log("load",this.otditems[e].text),console.log("load",this.otditems[e]);const a=this.reStore.preferences.langVoiceKey;console.log("OTD load ",a),this.reStore.loadPageId(this.otditems[e].pages[0].pageid,a),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const e=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=e.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=Dt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(e){console.log("otdOptionsCB",this.otdtype);const a=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=a[this.otdtype]}}}),_a=d("div",{class:"text-h6"},"Select Date",-1),Sa={class:"q-pa-md",style:{"max-width":"350px"}},ka={class:"q-gutter-y-sm column"},Ca=d("span",{id:"otdfi",class:"pfi text-h4"},null,-1),Va={class:""},ba=["onClick"],wa=d("br",null,null,-1);function $a(e,a,p,R,D,I){return u(),m(X,null,[s(se,{modelValue:e.promptOTDDate,"onUpdate:modelValue":a[2]||(a[2]=r=>e.promptOTDDate=r),persistent:""},{default:l(()=>[s(P,{style:{"min-width":"350px"}},{default:l(()=>[s(M,{align:"center"},{default:l(()=>[_a]),_:1}),s(fa,{modelValue:e.otddate,"onUpdate:modelValue":a[0]||(a[0]=r=>e.otddate=r),minimal:""},null,8,["modelValue"]),s(te,{align:"center",class:"text-white"},{default:l(()=>[N(s(S,{flat:"",label:"Cancel"},null,512),[[U]]),N(s(S,{flat:"",label:"Update OTD date",onClick:a[1]||(a[1]=r=>this.updateOTDDate())},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),d("div",Sa,[s(Ve,{bordered:"",class:"rounded-borders"},{default:l(()=>[s(oe,null,{header:l(()=>[s(K,{avatar:""},{default:l(()=>[s(re,{size:"md",color:"positive",icon:"stars"})]),_:1}),s(K,null,{default:l(()=>[h(" On This Day ")]),_:1})]),default:l(()=>[s(P,null,{default:l(()=>[d("div",ka,[s(Pe,{class:"bg-primary text-white rounded-borders q-my-md"},{default:l(()=>[s(S,{dark:"",standout:"",onClick:a[3]||(a[3]=r=>e.promptOTDDate=!0)},{default:l(()=>[h(C(e.otdlabel),1)]),_:1}),s(Te),Ca,s(Te),s(nt,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":a[4]||(a[4]=r=>this.otdtype=r),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:a[5]||(a[5]=r=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),d("div",Va,[(u(!0),m(X,null,ge(e.otditems,(r,i)=>(u(),O(P,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:e.otditems,"onUpdate:modelValue":a[6]||(a[6]=_=>e.otditems=_),key:i},{default:l(()=>[d("span",{style:{cursor:"pointer"},onClick:_=>this.load(i)},C(i),9,ba),h(". "+C(r.year)+" "+C(r.text),1),wa,(u(!0),m(X,null,ge(r.pages,(_,$)=>(u(),m("span",{key:$},[s(va,{class:"on-left",color:"accent",style:{cursor:"pointer"},onClick:Z=>this.loadPageId(_.pageid)},{default:l(()=>[s(T,null,{default:l(()=>[h(C(_.title),1)]),_:2},1024),s(x,{size:"xs",name:"link"})]),_:2},1032,["onClick"])]))),128))]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])],64)}var Da=fe(ya,[["render",$a]]);function Pt(e){return e===null||e===""?!1:(e=e.toString(),e=e.replaceAll("&nbsp;",""),e.replace(/(<([^>]+)>)/ig,""))}const Ta=he({name:"PagerComponent",setup(){const e=pe();return{reStore:e,assignment:y(null),promptAssignmentTitle:y(!1),promptPageTitle:y(!1),promptPctReplace:y(!1),promptLanguage:y(!1),promptGuideWords:y(!1),langVoices:y(e.preferences.langVoices),targetLangVoiceKey:y(null),targetPctReplace:y(null),targetGuideWords:y(null),coverExpanded:y(!0),pagesExpanded:y(!0)}},mounted(){console.log("mounted"),this.reStore.courses.ck&&this.reStore.courses.aid&&(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[this.reStore.courses.ck].assignments[this.reStore.courses.aid]))),F(this.reStore.courses,async(e,a)=>{this.reStore.courses.ck||(this.assignment=null),this.reStore.courses.aid||(this.assignment=null),this.assignment&&e.aid&&e.ck&&this.assignment.pages.length!=e[e.ck].assignments[e.aid].pages.length&&(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid])),console.log("Pager reloading assignment b/c pages.length changed")),!this.assignment&&e.ck&&e.aid?(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid])),console.log("Pager loaded fresh copy of assignment")):e.aid&&e.ck&&this.assignment.coverUrl!=e[e.ck].assignments.coverUrl?(this.assignment.coverUrl=e[e.ck].assignments[e.aid].coverUrl,console.log("Pager coverUrl")):this.assignment&&this.assignment.ck!==e.ck||this.assignment&&this.assignment.id!==e.aid?(console.log("PagerComponent assignment changed"),this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid]))):console.log("Pager nothing seems to have changed")})},methods:{pctCB(e){this.targetPgIdx=e,this.targetPctReplace=this.assignment.pages[e].pctReplace,this.promptPctReplace=!0},updatePctReplaceCB(){console.log("updatePctReplaceCB "),this.assignment.pages[this.targetPgIdx].pctReplace=this.targetPctReplace,this.targetPgIdx==this.reStore.courses.pgIdx?(console.log("updating restore.page.pctReplace",this.targetPctReplace,this.assignment.pages[this.targetPgIdx].pctReplace),this.reStore.page.pctReplace=parseInt(this.targetPctReplace)):console.log("Not updating pctReplace",this.targetPgIdx,this.reStore.courses.pgIdx),this.targetPctReplace=null,this.targetPgIdx=null},wpCB(e){console.log("wpCB",e),this.assignment.pages[e].pageid;const a=this.assignment.pages[e].canonicalUrl;window.open(a,"_blank")},gwCB(e){console.log("updateGuideWords",e),this.targetPgIdx=e,this.targetGuideWords=this.assignment.pages[e].guideWords,this.promptGuideWords=!0},updateGuideWordsCB(){console.log(),this.assignment.pages[this.targetPgIdx].guideWords=this.targetGuideWords,this.reStore.courses.pgIdx==this.targetPgIdx?(console.log("updating page guidewords"),this.reStore.page.guideWords=this.targetGuideWords,this.reStore.notify("page guide-words updated ")):console.log("NOT updating page guidewords",this.reStore.courses.pgIdx,this.targetPgIdx),this.targetPgIdx=null,this.targetGuideWords=null},setPageLang(e){this.targetPgIdx=e,this.targetLangVoiceKey=this.assignment.pages[e].langVoiceKey,this.promptLanguage=!0},setLangVoiceCB(e){const a=this.targetPgIdx;this.targetPgIdx=null;const p=this.targetLangVoiceKey;console.log(a,p),this.assignment.pages[a].langVoiceKey=p,this.reStore.courses.pgIdx==this.targetPgIdx&&(this.reStore.page.langVoiceKey=p)},restorePage(e){console.log("Pager restorePage ",e);const a=this.reStore.courses.ck,p=this.reStore.courses.aid;console.log("Pager ",e,a,p),console.log(this.reStore.courses[a]),console.log(this.reStore.courses[a].assignments),console.log(this.reStore.courses[a].assignments[p]),this.assignment.pages[e]=JSON.parse(JSON.stringify(this.reStore.courses[a].assignments[p].pages[e])),this.reStore.courses.pgIdx==e&&(this.reStore.page=JSON.parse(JSON.stringify(this.reStore.courses[a].assignments[p].pages[e])))},resetPage(){this.reStore.newPage()},newPage(){console.log("PagerComponent newPageCB "),this.reStore.newPage()},updateAssignmentTitle(){console.log("Pager updateAssignmentTitle",this.assignment.title);const e=this.reStore.courses.ck,a=this.reStore.courses.aid;this.reStore.courses[e].assignments[a].title=this.assignment.title},updatePageTitle(){console.log("updatePageTitle",this.reStore.page.pageTitle);const e=this.reStore.courses.ck,a=this.reStore.courses.aid,p=this.reStore.courses.pgIdx;this.reStore.courses[e].assignments[a].pages[p].pageTitle=this.reStore.page.pageTitle},updatePage(e){this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages[e]=this.assignment.pages[e],e===this.reStore.courses.pgIdx&&(this.assignment.pages[e].pageText=Pt(A("#slideTextDiv").html()),this.assignment.pages[e].imgs[this.assignment.pages[e].imgIdx].cap=Pt(A("#slideCaptionDiv").html()),this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e]))),this.reStore.saveCurrentAssignment(),this.reStore.courses.trigger+=1},updateAllPages(){for(var e=0;e<this.assignment.pages.length;e++)this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages[e]=JSON.parse(JSON.stringify(this.assignment.pages[e])),e===this.reStore.courses.pgIdx&&(this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e])));this.reStore.saveCurrentAssignment(),this.reStore.courses.trigger+=1},nextImg(e){const a=this.assignment.pages[e].imgIdx,p=this.assignment.pages[e].imgs.length;a+1<p?this.assignment.pages[e].imgIdx+=1:this.assignment.pages[e].imgIdx=0},prevImg(e){const a=this.assignment.pages[e].imgIdx,p=this.assignment.pages[e].imgs.length;a-1>-1?this.assignment.pages[e].imgIdx-=1:this.assignment.pages[e].imgIdx=p-1},loadCoverCB(){console.log("Pager loadCoverCB "),this.reStore.loadCover(),this.reStore.router.push("/teacher/editor")},takeStorePage(e){this.assignment.pages[e]=JSON.parse(JSON.stringify(this.reStore.page)),this.reStore.courses.trigger+=1},async loadPageCB(e){console.log("Pager loadPageCB ",e),this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e])),this.reStore.courses.pgIdx=e,this.reStore.page.imgIdx=this.assignment.pages[e].imgIdx,this.reStore.courses.imgIdx=this.assignment.pages[e].imgIdx,qe(".assignment").classed("hidden",!1),qe(".coverslide").classed("hidden",!0),this.reStore.courses.trigger+=1,this.reStore.page.isCustom||(console.log("calling restore.reloadPage"),await this.reStore.reloadPage(),this.reStore.courses.trigger+=1),this.reStore.mode==="editor"?this.reStore.router.push("/teacher/editor"):this.reStore.router.push("/teacher/assignment")},remove(e){console.log("remove ",e);const a=this.reStore.ck,p=this.reStore.aid;this.assignment.pages.splice(e,1),this.reStore.courses[a].assignments[p].pages.splice(e,1),this.reStore.courses.trigger+=1},mapCB(e){const a="https://maps.google.com/?ll="+this.assignment.pages[e].mapCoords.split(",")[0]+","+this.assignment.pages[e].mapCoords.split(",")[1];window.open(a,"_blank")},dummy(){console.log("dummy")}}}),Pa=d("div",{class:"text-h6"},"Percent Replace",-1),qa=d("div",{class:"text-h6"},"Guide Words",-1),xa=d("div",{class:"text-h6"},"Assignment Title",-1),Ha=d("div",{class:"text-h6"},"Page Title",-1),Ra=d("div",{class:"text-h6"},"Set Current Language",-1),Ba={width:"100%"},Ka={key:0,class:"q-pa-md",style:{"max-width":"350px"}},Ma=d("td",null,"Assignment",-1),Na=d("td",null,"Pages",-1),Ua=d("td",null,"Images",-1),Aa={key:0},Ia={key:1},Oa=d("td",null,"Loaded",-1),La={key:0},za={key:1},Qa={key:0,class:"flex flex-center"},Ya={class:"text-weight-bolder text-center q-pa-xs"},Ea={key:0},Wa={class:"text-weight-bolder text-center q-pa-xs"},Ja={key:0},Fa={class:"text-weight-bolder text-center q-pa-xs"},Ga={key:1},ja={class:"flex flex-row justify-between"},Xa={class:""},Za={class:""},eo={class:""},to=d("br",null,null,-1),so=["onClick"],ao={key:0,class:"fi fi-gb"},oo={key:1,class:"fi fi-us"},lo={key:2,class:"fi fi-mx"},no={key:3,class:"fi fi-fr"},io={key:4,class:"fi fi-de"},ro={key:5,class:"fi fi-it"},uo={key:6,class:"fi fi-br"},co={key:7,class:"fi fi-ke"},mo={key:8,class:"fi fi-ru"},go={key:9,class:"fi fi-th"},ho={key:10,class:"fi fi-cn"},fo={key:11,class:"fi fi-hk"},po={key:12,class:"fi fi-tw"},vo={key:13,class:"fi fi-kr"},yo={key:14,class:"fi fi-jp"},_o={key:15,class:"fi fi-id"},So={key:16,class:"fi fi-xx"},ko=d("br",null,null,-1),Co={class:""},Vo={class:""},bo={class:""},wo={key:0};function $o(e,a,p,R,D,I){const r=E("router-link");return u(),m(X,null,[s(se,{modelValue:e.promptPctReplace,"onUpdate:modelValue":a[2]||(a[2]=i=>e.promptPctReplace=i),persistent:""},{default:l(()=>[s(P,{style:{"min-width":"350px"}},{default:l(()=>[s(M,{align:"center"},{default:l(()=>[Pa]),_:1}),s(M,{class:"q-pt-none",align:"center"},{default:l(()=>[s(qt,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.targetPctReplace,"onUpdate:modelValue":a[0]||(a[0]=i=>e.targetPctReplace=i)},null,8,["modelValue"])]),_:1}),s(te,{align:"right"},{default:l(()=>[N(s(S,{outline:"",label:"Cancel"},null,512),[[U]]),N(s(S,{outline:"",label:"Update % replace",onClick:a[1]||(a[1]=i=>this.updatePctReplaceCB())},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(se,{modelValue:e.promptGuideWords,"onUpdate:modelValue":a[6]||(a[6]=i=>e.promptGuideWords=i),persistent:""},{default:l(()=>[s(P,{style:{"min-width":"350px"}},{default:l(()=>[s(M,null,{default:l(()=>[qa]),_:1}),s(M,{class:"q-pt-none"},{default:l(()=>[s(ae,{dense:"",modelValue:this.targetGuideWords,"onUpdate:modelValue":a[3]||(a[3]=i=>this.targetGuideWords=i),autofocus:"",onKeyup:a[4]||(a[4]=Ue(i=>e.promptGuideWords=!1,["enter"]))},null,8,["modelValue"])]),_:1}),s(te,{align:"right"},{default:l(()=>[N(s(S,{outline:"",label:"Cancel"},null,512),[[U]]),N(s(S,{outline:"",label:"Update guide words",onClick:a[5]||(a[5]=i=>this.updateGuideWordsCB())},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(se,{modelValue:e.promptAssignmentTitle,"onUpdate:modelValue":a[10]||(a[10]=i=>e.promptAssignmentTitle=i),persistent:""},{default:l(()=>[s(P,{style:{"min-width":"350px"}},{default:l(()=>[s(M,null,{default:l(()=>[xa]),_:1}),s(M,{class:"q-pt-none"},{default:l(()=>[s(ae,{dense:"",modelValue:this.assignment.title,"onUpdate:modelValue":a[7]||(a[7]=i=>this.assignment.title=i),autofocus:"",onKeyup:a[8]||(a[8]=Ue(i=>e.promptAssignmentTitle=!1,["enter"]))},null,8,["modelValue"])]),_:1}),s(te,{align:"right"},{default:l(()=>[N(s(S,{outline:"",label:"Cancel"},null,512),[[U]]),N(s(S,{outline:"",label:"Update assignment title",onClick:a[9]||(a[9]=i=>this.updateAssignmentTitle())},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(se,{modelValue:e.promptPageTitle,"onUpdate:modelValue":a[14]||(a[14]=i=>e.promptPageTitle=i),persistent:""},{default:l(()=>[s(P,{style:{"min-width":"350px"}},{default:l(()=>[s(M,null,{default:l(()=>[Ha]),_:1}),s(M,{class:"q-pt-none"},{default:l(()=>[s(ae,{dense:"",modelValue:this.reStore.page.pageTitle,"onUpdate:modelValue":a[11]||(a[11]=i=>this.reStore.page.pageTitle=i),autofocus:"",onKeyup:a[12]||(a[12]=Ue(i=>e.promptAssignmentTitle=!1,["enter"]))},null,8,["modelValue"])]),_:1}),s(te,{align:"right"},{default:l(()=>[N(s(S,{outline:"",label:"Cancel"},null,512),[[U]]),N(s(S,{outline:"",label:"Update page title",onClick:a[13]||(a[13]=i=>this.updatePageTitle())},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(se,{modelValue:e.promptLanguage,"onUpdate:modelValue":a[16]||(a[16]=i=>e.promptLanguage=i),persistent:""},{default:l(()=>[s(P,{style:{"min-width":"350px"}},{default:l(()=>[s(M,null,{default:l(()=>[Ra]),_:1}),s(M,{class:"q-pt-none"},{default:l(()=>[d("table",Ba,[d("tr",null,[d("td",null,[s(nt,{modelValue:this.targetLangVoiceKey,"onUpdate:modelValue":[a[15]||(a[15]=i=>this.targetLangVoiceKey=i),this.setLangVoiceCB],options:e.langVoices},null,8,["modelValue","options","onUpdate:modelValue"])])])])]),_:1}),s(te,{align:"right",class:"text-white"},{default:l(()=>[N(s(S,{outline:"",flat:"",label:"Close"},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),this.assignment?(u(),m("div",Ka,[s(Ve,{bordered:"",class:"rounded-borders"},{default:l(()=>[s(oe,null,{header:l(()=>[s(K,{avatar:""},{default:l(()=>[s(re,{size:"md",color:"positive",icon:"collections"})]),_:1}),s(K,null,{default:l(()=>[h(C(this.assignment.title),1)]),_:1})]),default:l(()=>[this.assignment?(u(),O(P,{key:0,class:"q-pa-md"},{default:l(()=>[d("table",null,[d("tr",null,[Ma,h(),d("td",null,C(this.assignment.title),1)]),d("tr",null,[Na,h(),d("td",null,C(this.reStore.courses.pgIdx+1)+" / "+C(this.assignment.pages.length),1)]),d("tr",null,[Ua,h(),d("td",null,[h(C(this.reStore.courses.imgIdx+1)+" / ",1),this.assignment.pages[this.reStore.courses.pgIdx].imgs?(u(),m("span",Aa,C(this.assignment.pages[this.reStore.courses.pgIdx].imgs.length),1)):(u(),m("span",Ia,"?"))])]),d("tr",null,[Oa,d("td",null,[this.assignment.pages[this.reStore.courses.pgIdx]&&this.assignment.pages[this.reStore.courses.pgIdx].pageTitle?(u(),m("span",La,C(this.assignment.pages[this.reStore.courses.pgIdx].pageTitle),1)):(u(),m("span",za,"None"))])])])]),_:1})):J("",!0)]),_:1})]),_:1}),this.assignment?(u(),O(P,{key:0,class:"bg-primary q-pa-xs q-my-md",flat:"",bordered:""},{default:l(()=>[s(oe,null,{header:l(()=>[s(K,{avatar:""},{default:l(()=>[s(re,{size:"md",color:"positive",icon:"assignment"})]),_:1}),s(K,null,{default:l(()=>[h(C(this.assignment.title),1)]),_:1})]),default:l(()=>[this.reStore.courses.ck?(u(),m("div",Qa,C(this.reStore.courses.ck.slice(0,3))+" | "+C(this.reStore.courses.aid.slice(0,3))+" | "+C(this.reStore.courses.pageid)+" | "+C(this.reStore.courses.imgIdx)+" | "+C(this.reStore.courses.pgIdx)+" | "+C(this.reStore.courses.trigger)+" | "+C(this.reStore.mode),1)):J("",!0),d("div",Ya,[h("Course: "),this.reStore.courses.ck?(u(),m("span",Ea,C(this.reStore.courses[this.reStore.courses.ck].title),1)):J("",!0)]),d("div",Wa,[h(" Title: "),this.assignment?(u(),m("span",Ja,[s(r,{to:"/teacher/editor",class:"text-white"},{default:l(()=>[h(C(this.assignment.title)+" ",1),s(T,null,{default:l(()=>[h("Go to Editor")]),_:1})]),_:1}),s(x,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:a[17]||(a[17]=i=>e.promptAssignmentTitle=!0),size:"sm"}),s(x,{style:{cursor:"pointer"},class:"on-right",name:"save",onClick:a[18]||(a[18]=i=>this.reStore.saveCurrentAssignment()),size:"sm"})])):J("",!0)]),d("div",Fa,[h(" Page "+C(this.reStore.courses.pgIdx)+": "+C(this.reStore.page.pageTitle.slice(0,5))+" ",1),s(x,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:a[19]||(a[19]=i=>this.promptPageTitle=!0),size:"sm"}),s(x,{class:"hidden on-right",name:"replay",onClick:this.resetPage,size:"sm"},null,8,["onClick"]),s(x,{class:"on-right",name:"add_circle",onClick:this.newPage,size:"sm"},null,8,["onClick"]),s(x,{class:"on-right",name:"volume_up",onClick:a[20]||(a[20]=i=>this.reStore.speak()),size:"sm"})])]),_:1})]),_:1})):J("",!0),this.assignment?(u(),m("span",Ga,[s(P,{class:"bg-primary q-pa-xs q-my-md",flat:"",bordered:""},{default:l(()=>[s(oe,{modelValue:e.coverExpanded,"onUpdate:modelValue":a[21]||(a[21]=i=>e.coverExpanded=i)},{header:l(()=>[s(K,{avatar:""},{default:l(()=>[s(re,{size:"md",color:"positive",icon:"insert_photo"})]),_:1}),s(K,null,{default:l(()=>[h(" Cover Image ")]),_:1})]),default:l(()=>[s(Ae,{src:this.assignment.coverUrl,onClick:e.loadCoverCB},null,8,["src","onClick"])]),_:1},8,["modelValue"])]),_:1}),(u(!0),m(X,null,ge(this.assignment.pages,(i,_)=>(u(),O(P,{class:"bg-primary q-pa-xs q-my-md",flat:"",bordered:"",modelValue:this.assignment.pages,"onUpdate:modelValue":a[25]||(a[25]=$=>this.assignment.pages=$),key:_},{default:l(()=>[s(oe,null,{header:l(()=>[s(K,null,{default:l(()=>[s(_s,{modelValue:i.isCustom,"onUpdate:modelValue":$=>i.isCustom=$,color:"positive",icon:"shuffle","checked-icon":"check"},{default:l(()=>[s(T,null,{default:l(()=>[h(C(i.isCustom?"Custom":"Random"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(K,null,{default:l(()=>[h(C(_+1)+" "+C(i.pageTitle.slice(0,8)),1)]),_:2},1024)]),default:l(()=>[d("span",ja,[d("span",Xa,[s(x,{size:"sm",name:"input",onClick:$=>e.takeStorePage(_)},{default:l(()=>[s(T,null,{default:l(()=>[h(" Pull editor page contents to this Page ")]),_:1})]),_:2},1032,["onClick"])]),d("span",Za,[s(x,{name:"restore_page",size:"sm",onClick:$=>e.restorePage(_)},{default:l(()=>[s(T,null,{default:l(()=>[h("Restore page to saved values")]),_:1})]),_:2},1032,["onClick"])]),s(x,{class:"",name:"save",onClick:$=>this.updatePage(_),size:"sm"},{default:l(()=>[s(T,null,{default:l(()=>[h("Update & Save current page")]),_:1})]),_:2},1032,["onClick"]),d("span",eo,[s(x,{name:"signpost",size:"sm",onClick:$=>e.gwCB(_)},{default:l(()=>[s(T,null,{default:l(()=>[h("Update the guide-words for this page:"),to,h(C(i.guideWords),1)]),_:2},1024)]),_:2},1032,["onClick"])]),d("span",{class:"",onClick:$=>this.setPageLang(_)},[i.langVoiceKey==="Eng-UK-Fem"?(u(),m("span",ao)):i.langVoiceKey==="Eng-US"?(u(),m("span",oo)):i.langVoiceKey==="espa\xF1ol"?(u(),m("span",lo)):i.langVoiceKey==="fran\xE7ais"?(u(),m("span",no)):i.langVoiceKey==="Deutsch"?(u(),m("span",io)):i.langVoiceKey==="italiano"?(u(),m("span",ro)):i.langVoiceKey==="portugu\xEAs do Brasil"?(u(),m("span",uo)):i.langVoiceKey==="Kiswahili"?(u(),m("span",co)):i.langVoiceKey==="\u0440\u0443\u0441\u0441\u043A\u0438\u0439"?(u(),m("span",mo)):i.langVoiceKey==="\u0E44\u0E17\u0E22"?(u(),m("span",go)):i.langVoiceKey==="\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09"?(u(),m("span",ho)):i.langVoiceKey==="\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09"?(u(),m("span",fo)):i.langVoiceKey==="\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09"?(u(),m("span",po)):i.langVoiceKey==="\uD55C\uAD6D\uC758"?(u(),m("span",vo)):i.langVoiceKey==="\u65E5\u672C\u8A9E"?(u(),m("span",yo)):i.langVoiceKey==="Bahasa Indonesia"?(u(),m("span",_o)):(u(),m("span",So)),s(T,null,{default:l(()=>[h(C(i.langVoiceKey)+" ",1),ko,h(" Click to set language for this page ")]),_:2},1024)],8,so),d("span",Co,[s(x,{name:"percent",size:"sm",onClick:$=>e.pctCB(_)},{default:l(()=>[s(T,null,{default:l(()=>[h("Set percentage of words to replace from paragraph on this page.")]),_:1})]),_:2},1032,["onClick"])]),d("span",Vo,[s(x,{name:"location_on",size:"sm",onClick:$=>e.mapCB(_)},{default:l(()=>[s(T,null,{default:l(()=>[h(" Launch Google Maps: "+C(i.mapCoords),1)]),_:2},1024)]),_:2},1032,["onClick"])]),d("span",bo,[s(x,{name:"language",size:"sm",onClick:$=>e.wpCB(_)},{default:l(()=>[s(T,null,{default:l(()=>[h("Wikipedia page "+C(i.pageid)+" "+C(i.canonical_url),1)]),_:2},1024)]),_:2},1032,["onClick"])])]),i.imgs.length>i.imgIdx?(u(),m("span",wo,[s(S,{fab:"","label-position":"left",color:"primary",icon:"arrow_left",onClick:[$=>this.prevImg(_),a[22]||(a[22]=st(()=>{},["stop","prevent"]))],padding:"xs",class:"float-left text-h5 z-max",style:{top:"100px"}},null,8,["onClick"]),s(S,{fab:"","label-position":"right",color:"primary",icon:"arrow_right",onClick:[$=>this.nextImg(_),a[23]||(a[23]=st(()=>{},["stop","prevent"]))],padding:"xs",class:"float-right text-h5 z-max",style:{top:"100px"}},null,8,["onClick"]),s(x,{size:"sm",style:{top:"190px",left:"190px"},color:"red",class:"z-max",name:"delete",onClick:[$=>this.remove(_),a[24]||(a[24]=st(()=>{},["stop","prevent"]))]},null,8,["onClick"]),s(Ae,{height:"200px",src:i.imgs[i.imgIdx].url,onClick:$=>e.loadPageCB(_)},null,8,["src","onClick"])])):J("",!0)]),_:2},1024)]),_:2},1032,["modelValue"]))),128))])):J("",!0)])):J("",!0)],64)}var Do=fe(Ta,[["render",$o]]);const To=he({name:"MyHistory",setup(){return{reStore:pe(),enabledLabel:y("History Enabled")}},mounted(){},methods:{load(e){console.log(e),console.log(this.reStore.myhistory[e]),this.reStore.loadHistory(e)},remove(e){console.log(e),this.reStore.myhistory=this.reStore.myhistory.slice(0,e).concat(this.reStore.myhistory.slice(e+1,1e3))}}}),Po={class:"q-pa-md",style:{"max-width":"350px"}},qo={class:"flex flex-center"},xo={class:""},Ho={class:"row cardheader justify-between"},Ro=["onClick"],Bo={class:"history-remove"};function Ko(e,a,p,R,D,I){return u(),m("div",Po,[s(Ve,{bordered:"",class:"rounded-borders"},{default:l(()=>[s(oe,null,{header:l(()=>[s(K,{avatar:""},{default:l(()=>[s(re,{size:"md",color:"positive",icon:"history"})]),_:1}),s(K,null,{default:l(()=>[h(" Page History ")]),_:1})]),default:l(()=>[d("div",qo,[s(S,{center:"","no-caps":"",label:"Clear History",onClick:a[0]||(a[0]=r=>this.reStore.clearHistory())})]),d("div",xo,[(u(!0),m(X,null,ge(this.reStore.myhistory,(r,i)=>(u(),O(P,{class:"bg-primary otdcard q-pa-xs q-ma-sm",flat:"",bordered:"",modelValue:this.reStore.myhistory,"onUpdate:modelValue":a[1]||(a[1]=_=>this.reStore.myhistory=_),key:i},{default:l(()=>[d("div",Ho,[d("span",{class:"history-title col-grow",onClick:_=>this.load(i)},C(i)+". "+C(r.pageTitle.slice(0,25)),9,Ro),d("span",Bo,[s(x,{name:"delete",onClick:_=>this.remove(i)},null,8,["onClick"])])])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})])}var Mo=fe(To,[["render",Ko]]);const No=he({name:"TeacherLayout",components:{PagerComponent:Do,DocumentationComponent:os,SearchComponent:qs,ImagesComponent:As,BookmarksComponent:ua,OTDComponent:Da,PreferencesComponent:Xt,AssignmentStatus:ls,MyHistory:Mo,AssignmentPager:Zt},setup(){const e=y(!1),a=y(!1),p=pe(),R=p.preferences,D=y(null),I=y(null);return{step:y(1),reStore:p,selectedRHSTab:y(p.courses.selectedRHSTab),initialValues:y(R),scrollAreaRHS:D,scrollAreaLHS:I,leftDrawerOpen:e,rightDrawerOpen:a,flagName:y(p.langVoices[p.preferences.langVoiceKey].flagName),promptLanguage:y(!1),langVoices:y(p.preferences.langVoices),toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){a.value=!a.value}}},mounted(){F(this.reStore.courses,async(e,a)=>{console.log("TL watcher ",e,a),this.selectedRHSTab=e.selectedRHSTab,this.setRHS(e.selectedRHSTab)}),Ct.isActive||(Ct.toggle(),at("primary","#333"),at("secondary",this.initialValues.secondaryColor),at("accent",this.initialValues.accentColor),this.flagName=this.reStore.langVoices[this.reStore.prefereneces.langVoiceKey].flagName,qe(".pfi").classed(this.flagName,!0))},methods:{tabUpdate(e){console.log("tabUpdate",e),this.reStore.courses.selectedRHSTab=e},goEditor(){this.reStore.mode="editor",this.reStore.router.push("/teacher/editor")},goAssignment(){this.reStore.mode="assignment",this.reStore.router.push("/teacher/assignment")},setRHS(e){e==="pagerTab"?(A("#assignmentPagerDiv").classed("hidden",!0),A("#pagerDiv").classed("hidden",!1),A("#statusDiv").classed("hidden",!0)):e==="statusTab"?(A("#assignmentPagerDiv").classed("hidden",!0),A("#pagerDiv").classed("hidden",!0),A("#statusDiv").classed("hidden",!1)):(A("#assignmentPagerDiv").classed("hidden",!1),A("#pagerDiv").classed("hidden",!0),A("#statusDiv").classed("hidden",!0))},scrollTopRHS(){this.scrollAreaRHS.setScrollPosition("vertical",0)},scrollTopLHS(){this.scrollAreaLHS.setScrollPosition("vertical",0)},setLangVoiceCB(e){this.flagName=this.reStore.langVoices[e].flagName;for(const[a,p]of Object.entries(this.reStore.langVoices)){const R=p.flagName;qe(".pfi").classed(R,!1)}qe(".pfi").classed(this.flagName,!0),console.log("langVoiceKey set to ",e,this.flagName),this.reStore.courses.trigger+=1}}}),Uo=d("div",{class:"text-h6"},"Set Current Language",-1),Ao=d("span",{class:"pfi fi fi-xx"},null,-1),Io=d("br",null,null,-1),Oo=d("br",null,null,-1),Lo={class:"dashboard-wrapper"},zo=d("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),Qo={class:"hidden"},Yo=d("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),Eo={id:"pagerDiv",class:"hidden"},Wo={key:0},Jo={key:1},Fo={class:"q-gutter-y-sm"},Go={id:"assignmentPagerDiv"},jo=d("span",{class:"hidden"},null,-1),Xo={key:0},Zo={key:1},el={class:"q-gutter-y-sm"},tl={id:"statusDiv",class:"hidden"},sl={key:0},al={key:1},ol={class:"q-gutter-y-sm"};function ll(e,a,p,R,D,I){const r=E("router-view"),i=E("DocumentationComponent"),_=E("SearchComponent"),$=E("OTDComponent"),Z=E("BookmarksComponent"),ve=E("ImagesComponent"),Ie=E("MyHistory"),Oe=E("PreferencesComponent"),be=E("PagerComponent"),G=E("router-link"),B=E("AssignmentPager"),Le=E("AssignmentStatus");return u(),O(rs,{view:"hHh LpR fFf"},{default:l(()=>[s(ns,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:l(()=>[s(se,{modelValue:e.promptLanguage,"onUpdate:modelValue":a[1]||(a[1]=H=>e.promptLanguage=H),persistent:""},{default:l(()=>[s(P,{style:{"max-width":"300px"}},{default:l(()=>[s(M,null,{default:l(()=>[Uo]),_:1}),s(M,{class:"q-pt-none"},{default:l(()=>[s(nt,{modelValue:this.reStore.preferences.langVoiceKey,"onUpdate:modelValue":[a[0]||(a[0]=H=>this.reStore.preferences.langVoiceKey=H),this.setLangVoiceCB],options:e.langVoices},null,8,["modelValue","options","onUpdate:modelValue"])]),_:1}),s(te,{align:"right",class:"text-white"},{default:l(()=>[N(s(S,{outline:"",flat:"",label:"Close"},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(Pe,null,{default:l(()=>[s(S,{icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),s(S,{onClick:a[2]||(a[2]=H=>this.reStore.router.push("/teacher")),icon:"home",class:"hidden"},{default:l(()=>[s(T,null,{default:l(()=>[h("Return to My Teacher Page")]),_:1})]),_:1}),s(Te),s(S,{onClick:a[3]||(a[3]=H=>this.reStore.router.push("/teacher")),icon:"home"},{default:l(()=>[s(T,null,{default:l(()=>[h("Return to My Teacher Page")]),_:1})]),_:1}),s(S,{onClick:a[4]||(a[4]=H=>e.promptLanguage=!0)},{default:l(()=>[Ao,s(T,null,{default:l(()=>[h("Set current language "),Io,h("Applied to new pages/searches."),Oo,h("Sync current page using sync-lang button.")]),_:1})]),_:1}),this.reStore.mode=="assignment"?(u(),O(S,{key:0,onClick:a[5]||(a[5]=H=>this.goEditor()),icon:"switch_account"},{default:l(()=>[s(T,null,{default:l(()=>[h(" Switch from Assignment to Editor Mode ")]),_:1})]),_:1})):(u(),O(S,{key:1,onClick:a[6]||(a[6]=H=>this.goAssignment()),icon:"switch_account"},{default:l(()=>[s(T,null,{default:l(()=>[h(" Switch from Editor to Assignment Mode ")]),_:1})]),_:1})),this.reStore.authenticated?(u(),O(S,{key:2,onClick:a[7]||(a[7]=H=>this.reStore.router.push("/student")),icon:"switch_account"},{default:l(()=>[s(T,null,{default:l(()=>[h(" Switch between Teacher or Student role ")]),_:1})]),_:1})):J("",!0),this.reStore.authenticated?(u(),O(S,{key:3,icon:"logout",onClick:a[8]||(a[8]=H=>this.reStore.logout())})):J("",!0),s(S,{icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1})]),_:1}),s(is,{class:"container-fluid"},{default:l(()=>[d("div",Lo,[s(r)]),s(Vt,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":a[10]||(a[10]=H=>e.leftDrawerOpen=H),side:"left"},{default:l(()=>[s(Pe,{flat:"",class:"bg-primary text-white"},{default:l(()=>[s(Te),s(S,{flat:"",round:"",dense:"",icon:"home",class:"float-right",onClick:a[9]||(a[9]=H=>this.reStore.router.push("/teacher"))},{default:l(()=>[s(T,null,{default:l(()=>[h("Return to dashboard")]),_:1})]),_:1}),s(S,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopLHS},{default:l(()=>[s(T,null,{default:l(()=>[h("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),zo,s(bt,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaLHS"},{default:l(()=>[s(i),s(_),s($),s(Z),s(ve),s(Ie),s(Oe,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"]),s(Vt,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":a[15]||(a[15]=H=>e.rightDrawerOpen=H),side:"right"},{default:l(()=>[s(Pe,{flat:"",class:"bg-primary text-white"},{default:l(()=>[d("span",Qo,[s(S,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),s(wt,{dark:"",vertical:"",inset:""}),s(S,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),s(wt,{dark:"",vertical:"",inset:""})]),s(us,{dense:"",align:"left",modelValue:this.selectedRHSTab,"onUpdate:modelValue":[a[14]||(a[14]=H=>this.selectedRHSTab=H),this.tabUpdate]},{default:l(()=>[s(tt,{id:"assignmentsTab",name:"assignmentsTab",icon:"library_books",onClick:a[11]||(a[11]=H=>this.setRHS("assignmentsTab"))},{default:l(()=>[s(T,null,{default:l(()=>[h("Assignments of this Course")]),_:1})]),_:1}),s(tt,{id:"pagerTab",name:"pagerTab",icon:"theaters",onClick:a[12]||(a[12]=H=>this.setRHS("pagerTab"))},{default:l(()=>[s(T,null,{default:l(()=>[h("Pages of this Assignment")]),_:1})]),_:1}),s(tt,{id:"statusTab",name:"statusTab",icon:"summarize",onClick:a[13]||(a[13]=H=>this.setRHS("statusTab"))},{default:l(()=>[s(T,null,{default:l(()=>[h("Status/Progress while taking assignment")]),_:1})]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"]),s(Te),s(S,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopRHS},{default:l(()=>[s(T,null,{default:l(()=>[h("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),Yo,s(bt,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaRHS"},{default:l(()=>[d("div",Eo,[this.reStore.courses.aid?(u(),m("span",Wo,[s(be)])):(u(),m("span",Jo,[d("div",Fo,[s(P,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:l(()=>[h(" No current assignment. You can load an assignment at the "),d("u",null,[s(G,{to:"/teacher",class:"text-white ptr"},{default:l(()=>[h("Teacher Dashboard")]),_:1})]),h(". ")]),_:1})])]))]),d("div",Go,[jo,this.reStore.courses.ck?(u(),m("span",Xo,[s(B)])):(u(),m("span",Zo,[d("div",el,[s(P,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:l(()=>[h(" No current course. You can load a course at the "),d("u",null,[s(G,{to:"/teacher",class:"text-white ptr"},{default:l(()=>[h("Teacher Dashboard")]),_:1})]),h(". ")]),_:1})])]))]),d("div",tl,[this.reStore.courses.aid?(u(),m("span",sl,[s(Le)])):(u(),m("span",al,[d("div",ol,[s(P,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:l(()=>[h(" No current assignment. You can load an assignment at the "),d("u",null,[s(G,{to:"/teacher",class:"text-white ptr"},{default:l(()=>[h("Teacher Dashboard")]),_:1})]),h(". ")]),_:1})])]))])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var Pl=fe(No,[["render",ll]]);export{Pl as default};
