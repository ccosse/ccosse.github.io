import{Q as g,a as v}from"./use-form.40a366a1.js";import{Q as b}from"./QInput.1b613e87.js";import{_ as Q,r as y,o as u,c as S,w as s,a as t,aL as K,K as k,Q as h,e as n,af as r,ak as B,ag as m,ai as x,ah as T,aj as p,a1 as C}from"./index.589793f5.js";import{a as P,r as $,d as V,Q as D,C as w}from"./ClosePopup.1b49aa5b.js";import{Q as d}from"./QTooltip.de692a26.js";import{Q as E}from"./QImg.59600fc1.js";import{Q as N}from"./QPage.c343e3b5.js";import{u as q}from"./re-store.84ce131d.js";import"./use-dark.dd1c7729.js";import"./scroll.6e8133d8.js";import"./use-key-composition.0817fa3a.js";import"./use-portal.448d6786.js";import"./selection.b1420e03.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";function F(o){const e=document.createElement("textarea");e.value=o,e.contentEditable="true",e.style.position="fixed";const _=()=>{};P(_),document.body.appendChild(e),e.focus(),e.select();const i=document.execCommand("copy");return e.remove(),$(_),i}function I(o){return navigator.clipboard!==void 0?navigator.clipboard.writeText(o):new Promise((e,_)=>{const i=F(o);i?e(!0):_(i)})}const U=q(),j={components:{},setup(){return{reStore:U,courseKey:y(null),courseTitle:y(null),prompt:y(!1)}},mounted(){console.log("TeacherPage mounted ",this.reStore.courses),this.reStore.unloadCurrent()},methods:{selectAssignment(o,e){this.reStore.courses.ck===o&&this.reStore.courses.aid===e||(this.reStore.courses.ck=o,this.reStore.courses.aid=e,this.reStore.courses.trigger+=1)},copyCK(o){I(o).then(()=>{console.log("ck copied to clipboard",o)}).catch(e=>{console.log(e)})},newCourseCB(){console.log("courseCB"),this.reStore.newCourse()},newAssignmentCB(o){console.log("assignmentCB: ",o),this.reStore.newAssignment(o)},editAssignmentCB(o,e){console.log("editAssignmentCB: ",o,e),this.reStore.loadAssignment(o,e),this.reStore.router.push("/teacher/editor")},changeTitleCB(){console.log("TeacherPage.titleCB",this.courseKey,this.courseTitle),this.reStore.setCourseTitle(this.courseKey,this.courseTitle)},deleteCourseCB(o){this.reStore.deleteCourse(o)},deleteAssignmentCB(o,e){this.reStore.deleteAssignment(o,e)},takeAssignmentCB(o,e){console.log("TeacherPage.takeAssignment ",o,e),this.reStore.loadAssignment(o,e),this.reStore.router.push("/teacher/assignment")}}},H=n("div",{class:"text-h6"},"Change course title",-1),L={class:"flex-center row q-gutter-md"},z=n("div",{class:"text-h6"},"Teacher Dashboard",-1),R=n("br",null,null,-1),G=n("br",null,null,-1),J=n("br",null,null,-1),M={class:"flex flex-row justify-center"},O={class:"absolute-top text-center"},W={class:"text-h6"},X={class:"text-subtitle2"},Y={key:0},Z={key:1},ee={style:{"font-size":"22pt",width:"100%"},class:"text-center absolute-bottom"},te=n("br",null,null,-1),se={class:"hidden"},oe={key:0,class:"flex-center"};function le(o,e,_,i,ne,re){return u(),S(N,{class:"q-gutter-md"},{default:s(()=>[t(D,{modelValue:i.prompt,"onUpdate:modelValue":e[3]||(e[3]=a=>i.prompt=a),persistent:""},{default:s(()=>[t(g,{style:{"min-width":"350px"}},{default:s(()=>[t(v,null,{default:s(()=>[H]),_:1}),t(v,{class:"q-pt-none"},{default:s(()=>[t(b,{dense:"",modelValue:i.courseTitle,"onUpdate:modelValue":e[0]||(e[0]=a=>i.courseTitle=a),autofocus:"",onKeyup:e[1]||(e[1]=K(a=>{i.prompt=!1,this.changeTitleCB()},["enter"])),onHide:this.dck},null,8,["modelValue","onHide"])]),_:1}),t(V,{align:"right",class:"text-white"},{default:s(()=>[k(t(h,{outline:"",label:"Cancel"},null,512),[[w]]),k(t(h,{outline:"",label:"Save",onClick:e[2]||(e[2]=a=>this.changeTitleCB())},null,512),[[w]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n("div",L,[z,n("div",null,[t(h,{icon:"list_alt",onClick:e[4]||(e[4]=a=>this.newCourseCB())},{default:s(()=>[t(d,null,{default:s(()=>[r("Create a new course")]),_:1})]),_:1}),this.reStore.authenticated?(u(),S(h,{key:0,onClick:e[5]||(e[5]=a=>this.reStore.router.push("/student")),icon:"switch_account"},{default:s(()=>[t(d,null,{default:s(()=>[r(" Switch to Student-role ")]),_:1})]),_:1})):B("",!0)])]),(u(!0),m(T,null,x(this.reStore.userSnapshot.teaching,(a,c)=>(u(),S(g,{flat:"",key:a.ck,style:{opacity:"1.0"}},{default:s(()=>[t(v,{class:"text-center"},{default:s(()=>[r(" Title: "+p(this.reStore.courses[c].title)+" \xA0",1),t(C,{class:"ptr",name:"edit",onClick:l=>{i.prompt=!0,this.courseTitle=this.reStore.courses[c].title,this.courseKey=c}},null,8,["onClick"]),R,r(" Key: "+p(c)+" ",1),t(C,{class:"ptr",name:"content_copy",onClick:l=>this.copyCK(c)},null,8,["onClick"]),n("div",null,[t(h,{icon:"delete",onClick:l=>this.deleteCourseCB(a.ck)},{default:s(()=>[t(d,null,{default:s(()=>[r("Delete Course")]),_:1})]),_:2},1032,["onClick"]),t(h,{icon:"post_add",onClick:l=>this.newAssignmentCB(a.ck)},{default:s(()=>[t(d,null,{default:s(()=>[r("New Assignment")]),_:1})]),_:2},1032,["onClick"]),t(h,{icon:"content_copy",onClick:l=>this.copyCK(c)},{default:s(()=>[t(d,null,{default:s(()=>[r("Copy this course-key to clipboard. Enroll "),G,r("in this course using this course-key from "),J,r("the Student Page.")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1024),n("div",M,[(u(!0),m(T,null,x(this.reStore.courses[c].assignments,(l,A)=>(u(),m("div",{key:l},[t(g,{bordered:"",flat:"",class:"ccard q-mx-sm q-my-md"},{default:s(()=>[t(E,{fit:o.cover,src:l.coverUrl,height:"100%",onClick:f=>this.selectAssignment(c,l.id)},{default:s(()=>[n("div",O,[n("div",W,p(l.title.slice(0,18)),1),n("div",X,[l.pages?(u(),m("span",Y,"Pages: "+p(l.pages.length),1)):(u(),m("span",Z,"Pages: None"))])]),n("div",ee,[t(C,{onClick:f=>this.takeAssignmentCB(c,l.id),name:"play_circle",class:"ptr"},{default:s(()=>[t(d,null,{default:s(()=>[r("Take Assignment")]),_:1})]),_:2},1032,["onClick"]),t(C,{onClick:f=>this.editAssignmentCB(c,l.id),name:"edit",class:"ptr on-right"},{default:s(()=>[t(d,null,{default:s(()=>[r("Edit Assignment"),te,r(p(l.id),1)]),_:2},1024)]),_:2},1032,["onClick"]),t(C,{onClick:f=>this.deleteAssignmentCB(c,l.id),name:"delete",class:"ptr on-right"},{default:s(()=>[t(d,null,{default:s(()=>[r("Delete Assignment")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["fit","src","onClick"])]),_:2},1024),n("span",se,p(A),1)]))),128))])]),_:2},1024))),128)),this.reStore.userSnapshot.teaching?(u(),m("div",oe)):B("",!0)]),_:1})}var ke=Q(j,[["render",le]]);export{ke as default};
