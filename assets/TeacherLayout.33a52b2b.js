import{g as H,h,i as u,z as E,aI as $e,B as se,r as i,D as q,l as Ie,p as N,ag as Ve,j as oe,x as k,q as qe,d as M,_ as O,o as v,au as $,a,w as l,Q as C,e as s,ac as D,ad as p,aH as Qe,c as w,av as P,aJ as le,aG as U,aF as Le,f as V}from"./index.6aaa5d48.js";import{Q as ne,a as Re,b as Be,c as B,d as ze,e as z,f as Z,g as De,h as Pe}from"./QLayout.5b7784dc.js";import{Q as ie}from"./QTooltip.27f85518.js";import{u as W}from"./re-store.a80ca20a.js";import{a as I,Q,i as Ue,C as j,h as Fe}from"./ClosePopup.3cd40fb7.js";import{a as Ae,b as Ne,c as ee,d as F,e as He,P as Ee}from"./QSlideTransition.1afa71e9.js";import{Q as Me}from"./QInput.3e0486e3.js";import{d as G,f as K,c as Oe,e as We,u as te,g as Ge}from"./use-dark.bdeded94.js";import{Q as Ke}from"./QImg.491fb9dd.js";import"./selection.f2cbefe1.js";import"./position-engine.d6256345.js";import"./use-portal.3ed96418.js";import"./firebase.8ff914f0.js";import"./use-key-composition.20ab45ba.js";const Je={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},A={xs:2,sm:4,md:8,lg:16,xl:24};var ae=H({name:"QSeparator",props:{...G,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const t=E(),f=K(e,t.proxy.$q),m=h(()=>e.vertical===!0?"vertical":"horizontal"),_=h(()=>` q-separator--${m.value}`),g=h(()=>e.inset!==!1?`${_.value}-${Je[e.inset]}`:""),n=h(()=>`q-separator${_.value}${g.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(f.value===!0?" q-separator--dark":"")),c=h(()=>{const d={};if(e.size!==void 0&&(d[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const x=e.spaced===!0?`${A.md}px`:e.spaced in A?`${A[e.spaced]}px`:e.spaced,b=e.vertical===!0?["Left","Right"]:["Top","Bottom"];d[`margin${b[0]}`]=d[`margin${b[1]}`]=x}return d});return()=>u("hr",{class:n.value,style:c.value,"aria-orientation":m.value})}});const y=$e({}),Xe=Object.keys(se);var re=H({name:"QExpansionItem",props:{...se,...Oe,...G,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...We,"click","afterShow","afterHide"],setup(e,{slots:t,emit:f}){const{proxy:{$q:m}}=E(),_=K(e,m),g=i(e.modelValue!==null?e.modelValue:e.defaultOpened),n=i(null),c=te(),{show:d,hide:x,toggle:b}=Ge({showing:g});let r,T;const ue=h(()=>`q-expansion-item q-item-type q-expansion-item--${g.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),ce=h(()=>{if(e.contentInsetLevel===void 0)return null;const o=m.lang.rtl===!0?"Right":"Left";return{["padding"+o]:e.contentInsetLevel*56+"px"}}),L=h(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),ge=h(()=>{const o={};return Xe.forEach(S=>{o[S]=e[S]}),o}),he=h(()=>L.value===!0||e.expandIconToggle!==!0),me=h(()=>e.expandedIcon!==void 0&&g.value===!0?e.expandedIcon:e.expandIcon||m.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),pe=h(()=>e.disable!==!0&&(L.value===!0||e.expandIconToggle===!0)),fe=h(()=>({expanded:g.value===!0,detailsId:e.targetUid,toggle:b,show:d,hide:x})),J=h(()=>{const o=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:m.lang.label[g.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":g.value===!0?"true":"false","aria-controls":c,"aria-label":o}});q(()=>e.group,o=>{T!==void 0&&T(),o!==void 0&&Y()});function ve(o){L.value!==!0&&b(o),f("click",o)}function _e(o){o.keyCode===13&&X(o,!0)}function X(o,S){S!==!0&&n.value!==null&&n.value.focus(),b(o),qe(o)}function Se(){f("afterShow")}function be(){f("afterHide")}function Y(){r===void 0&&(r=te()),g.value===!0&&(y[e.group]=r);const o=q(g,R=>{R===!0?y[e.group]=r:y[e.group]===r&&delete y[e.group]}),S=q(()=>y[e.group],(R,Te)=>{Te===r&&R!==void 0&&R!==r&&x()});T=()=>{o(),S(),y[e.group]===r&&delete y[e.group],T=void 0}}function Ce(){const o={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},S=[u(k,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&g.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:me.value})];return pe.value===!0&&(Object.assign(o,{tabindex:0,...J.value,onClick:X,onKeyup:_e}),S.unshift(u("div",{ref:n,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),u(F,o,()=>S)}function ye(){let o;return t.header!==void 0?o=[].concat(t.header(fe.value)):(o=[u(F,()=>[u(ee,{lines:e.labelLines},()=>e.label||""),e.caption?u(ee,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&o[e.switchToggleSide===!0?"push":"unshift"](u(F,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>u(k,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&o[e.switchToggleSide===!0?"unshift":"push"](Ce()),o}function ke(){const o={ref:"item",style:e.headerStyle,class:e.headerClass,dark:_.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return he.value===!0&&(o.clickable=!0,o.onClick=ve,Object.assign(o,L.value===!0?ge.value:J.value)),u(Ne,o,ye)}function we(){return N(u("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:ce.value,id:c},oe(t.default)),[[Ve,g.value]])}function xe(){const o=[ke(),u(Ae,{duration:e.duration,onShow:Se,onHide:be},we)];return e.expandSeparator===!0&&o.push(u(ae,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:_.value}),u(ae,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:_.value})),o}return e.group!==void 0&&Y(),Ie(()=>{T!==void 0&&T()}),()=>u("div",{class:ue.value},[u("div",{class:"q-expansion-item__container relative-position"},xe())])}}),de=H({name:"QList",props:{...G,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:t}){const f=E(),m=K(e,f.proxy.$q),_=h(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(m.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>u(e.tag,{class:_.value},oe(t.default))}});const Ye=M({name:"SearchComponent",setup(){const e=W(),t=i("");return{reStore:e,searchTerms:t,searchSize:i(e.preferences.resLimit),searchResults:i([]),promptSearchSize:i(!1)}},mounted(){q(this.reStore.preferences,async(e,t)=>{console.log("watcher ",e,t),this.searchSize=e.resLimit})},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchTerms.splice(e,1)},load(e){console.log(e),console.log(this.searchResults[e]);const t=this.reStore.langVoices[this.reStore.preferences.langVoice];this.reStore.loadPageId(this.searchResults[e].pageid,t)},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoice];this.reStore.wiki.setLang(e.langName);const t=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",t.results.length),this.searchResults=t.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),Ze=s("div",{class:"text-h6"},"Search Results Size",-1),je={class:"q-gutter-y-sm column"},et={key:0},tt={class:"row cardheader ptr justify-between"},at=["onClick"],st={class:"history-remove"};function ot(e,t,f,m,_,g){return v(),$(P,null,[a(Fe,{modelValue:e.promptSearchSize,"onUpdate:modelValue":t[2]||(t[2]=n=>e.promptSearchSize=n),persistent:""},{default:l(()=>[a(I,{style:{"min-width":"350px"}},{default:l(()=>[a(Q,{align:"center"},{default:l(()=>[Ze]),_:1}),a(Q,{class:"q-pt-none",align:"center"},{default:l(()=>[a(He,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":t[0]||(t[0]=n=>e.searchSize=n)},null,8,["modelValue"])]),_:1}),a(Ue,{align:"center",class:"text-primary"},{default:l(()=>[N(a(C,{flat:"",label:"Cancel"},null,512),[[j]]),N(a(C,{flat:"",label:"Update results size",onClick:t[1]||(t[1]=n=>this.updateSearchSize())},null,512),[[j]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(I,{flat:""},{default:l(()=>[a(Q,null,{default:l(()=>[a(de,{padding:"",bordered:"",class:"rounded-borders"},{default:l(()=>[a(re,{"header-style":{border:"0px solid gray"},label:"Search & Results"},{default:l(()=>[s("div",je,[a(ne,{class:"bg-primary text-white rounded-borders q-my-md"},{default:l(()=>[a(C,{dark:"",standout:"",onClick:t[3]||(t[3]=n=>e.promptSearchSize=!0)},{default:l(()=>[D(p(this.searchResults.length)+" ",1),a(ie,null,{default:l(()=>[D("Change results limit ("+p(this.searchSize)+")",1)]),_:1})]),_:1}),a(Me,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":t[6]||(t[6]=n=>e.searchTerms=n),"input-class":"text-right",class:"q-ml-md",onKeyup:[t[7]||(t[7]=n=>this.update()),t[8]||(t[8]=Qe(n=>this.doSearch(),["enter"]))]},{append:l(()=>[e.searchTerms===""?(v(),w(k,{key:0,name:"search",onClick:t[4]||(t[4]=n=>this.doSearch())})):(v(),w(k,{key:1,name:"clear",class:"cursor-pointer",onClick:t[5]||(t[5]=n=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(v(),$("div",et,[(v(!0),$(P,null,le(this.searchResults,(n,c)=>(v(),w(I,{class:"cardcontainer",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":t[9]||(t[9]=d=>this.searchResults=d),key:c},{default:l(()=>[s("div",tt,[s("span",{class:"history-title col-grow",onClick:d=>this.load(c)},p(c)+". "+p(n.title.slice(0,25)),9,at),s("span",st,[a(k,{class:"primary",size:e.xl,color:e.primary,name:"close",onClick:d=>this.remove(c)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):U("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var lt=O(Ye,[["render",ot]]);const nt=M({name:"CurrentPage",props:{},setup(e){const t=W();return{reStore:t,courseid:i("---"),assignmentTitle:i("---"),pageTitle:i(t.page.pageTitle),lang:i(t.page.langVoice.longName),imgIdx:i(t.page.imgIdx),imgs:i(t.page.imgs),imgTot:i(t.page.imgs.length),imgFit:i(t.page.imgFit),guideWords:i(t.page.guideWords),mapCoords:i(t.page.mapCoords),pageid:i(t.page.pageid),pctReplace:i(t.page.pctReplace),canonicalUrl:i(t.page.canonicalUrl),props:e}},mounted(){console.log(this.props),q(this.reStore.page,async(e,t)=>{console.log("watcher ",e,t),this.pageTitle=e.pageTitle,this.imgIdx=e.imgIdx,this.imgs=e.imgs,this.imgTot=e.imgs.length,this.imgFit=e.imgFit,this.guideWords=e.guideWords,this.mapCoords=e.mapCoords,this.pageid=e.pageid,this.lang=e.langVoice.longName,this.pctReplace=e.pctReplace,this.canonicalUrl=e.canonicalUrl})},methods:{speak(){console.log("CurrentPage.speak",this.reStore),this.reStore.speak()},cycleFitMode(){const e=["scale-down","cover"];let t=e.indexOf(this.imgFit);t+=1,t>e.length-1&&(t=0),this.imgFit=e[t],this.reStore.page.imgFit=this.imgFit,console.log("fit: ",this.imgFit)},imgCB(e,t){console.log(e,t),this.reStore.page.imgIdx=e},loadUrl(e){window.open(e,"_blank")},mapCB(){const e="https://maps.google.com/?ll="+this.mapCoords.lat+","+this.mapCoords.lon;window.open(e,"_blank")}}}),it={class:"text-weight-bolder text-center q-pa-md"},rt={style:{border:"1px solid gray","border-radius":"5px"}},dt={width:"100%"},ut=s("td",{style:{width:"50%"}},null,-1),ct=s("tr",null,[s("td"),s("td",null,"Speak Text")],-1),gt={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},ht={width:"100%"},mt=s("td",null,"WP Page Id",-1),pt={style:{width:"50%"}},ft=s("td",null,"Language",-1),vt={style:{width:"50%"}},_t=s("td",null,"Current Image",-1),St={style:{width:"50%"}},bt=s("td",null,"Image Fit",-1),Ct=s("td",null,"Guide Words",-1),yt={style:{width:"50%"}},kt=s("td",null,"Percent Replace",-1),wt=s("td",null,"Map Coords",-1),xt={key:0},Tt={class:"row cardheader ptr justify-between"},$t={class:"history-remove"},It={class:"history-remove"};function Vt(e,t,f,m,_,g){return v(),$(P,null,[a(I,{flat:""},{default:l(()=>[a(Q,null,{default:l(()=>[s("div",it,p(this.pageTitle),1),s("div",rt,[s("table",dt,[s("tr",null,[ut,s("td",null,[a(C,{round:"",class:"q-pa-md",icon:"volume_up",color:"secondary",onClick:t[0]||(t[0]=n=>this.speak())})])]),ct])]),s("div",gt,[s("table",ht,[s("tr",null,[mt,s("td",pt,[s("a",{class:"bold_ptr",onClick:t[1]||(t[1]=n=>this.loadURL(this.canonicalUrl))},p(this.pageid),1)])]),s("tr",null,[ft,s("td",vt,p(this.lang),1)]),s("tr",null,[_t,s("td",St,p(this.imgIdx+1)+" / "+p(this.imgTot),1)]),s("tr",{class:"ptr",onClick:t[2]||(t[2]=(...n)=>this.cycleFitMode&&this.cycleFitMode(...n))},[bt,s("td",null,p(this.imgFit),1)]),s("tr",null,[Ct,s("td",yt,p(this.guideWords.replaceAll(",",", ")),1)]),s("tr",null,[kt,s("td",null,p(this.pctReplace)+" %",1)]),s("tr",null,[wt,s("td",{onClick:t[3]||(t[3]=(...n)=>this.mapCB&&this.mapCB(...n))},p(this.mapCoords),1)])])])]),_:1})]),_:1}),a(I,{flat:""},{default:l(()=>[a(Q,null,{default:l(()=>[a(de,{padding:"",bordered:"",class:"rounded-borders"},{default:l(()=>[a(re,{"header-style":{border:"0px solid gray"},label:"Page Images"},{default:l(()=>[this.imgs.length?(v(),$("div",xt,[(v(!0),$(P,null,le(this.imgs,(n,c)=>(v(),w(I,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.searchResults,"onUpdate:modelValue":t[4]||(t[4]=d=>this.searchResults=d),key:c},{default:l(()=>[s("div",Tt,[s("span",$t,[a(k,{name:"edit",onClick:d=>this.edit(c,n)},null,8,["onClick"])]),D(" "+p(n.cap.slice(0,25))+" ",1),s("span",It,[a(k,{name:"close",onClick:d=>this.remove(c,n)},null,8,["onClick"])])]),a(Ke,{class:"cardimage",onClick:d=>this.imgCB(c,n),src:n.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])):U("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var qt=O(nt,[["render",Vt]]);const Qt=M({name:"TeacherLayout",components:{SearchComponent:lt,PreferencesComponent:Ee,CurrentPage:qt},setup(){const e=i(!1),t=i(!1),f=W(),m=f.preferences;return{step:i(1),reStore:f,initialValues:i(m),leftDrawerOpen:e,rightDrawerOpen:t,toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){t.value=!t.value}}}}),Lt=s("img",{src:"https://readingedgeca.s3.us-west-1.amazonaws.com/static/pub/img/reading_edge_200x200.png"},null,-1),Rt={class:"dashboard-wrapper"};function Bt(e,t,f,m,_,g){const n=V("router-link"),c=V("SearchComponent"),d=V("PreferencesComponent"),x=V("CurrentPage"),b=V("router-view");return v(),w(Pe,{view:"hHh lpR fFf"},{default:l(()=>[a(ze,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:l(()=>[a(ne,null,{default:l(()=>[a(C,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),a(Re,null,{default:l(()=>[a(n,{to:"/"},{default:l(()=>[a(Le,{size:"25px"},{default:l(()=>[Lt]),_:1})]),_:1})]),_:1}),this.reStore.authenticated?(v(),w(C,{key:0,onClick:t[0]||(t[0]=r=>this.reStore.router.push("/student")),icon:"switch_account"},{default:l(()=>[a(ie,null,{default:l(()=>[D(" Switch between Teacher or Student role ")]),_:1})]),_:1})):U("",!0),this.reStore.authenticated?(v(),w(C,{key:1,icon:"logout",onClick:t[1]||(t[1]=r=>this.reStore.logout())})):U("",!0),a(C,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1}),a(Be,{align:"left",class:"hidden"},{default:l(()=>[a(B,{to:"/logo",label:"Logo"}),a(B,{to:"/teaching",label:"Teaching"}),a(B,{to:"/taking",label:"Taking"}),a(B,{to:"/gradebook",label:"Gradebook"})]),_:1})]),_:1}),a(z,{"show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":t[2]||(t[2]=r=>e.leftDrawerOpen=r),side:"left",bordered:""},null,8,["modelValue"]),a(z,{"show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":t[3]||(t[3]=r=>e.rightDrawerOpen=r),side:"right",bordered:""},null,8,["modelValue"]),a(De,{class:"container-fluid"},{default:l(()=>[a(z,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":t[4]||(t[4]=r=>e.leftDrawerOpen=r),side:"left"},{default:l(()=>[a(Z,{visible:e.visible,style:{height:"95vh","max-width":"350px"}},{default:l(()=>[a(c)]),_:1},8,["visible"])]),_:1},8,["modelValue"]),a(z,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":t[5]||(t[5]=r=>e.rightDrawerOpen=r),side:"right"},{default:l(()=>[a(Z,{visible:e.visible,style:{height:"95vh","max-width":"350px"}},{default:l(()=>[a(d,{initialValues:this.initialValues},null,8,["initialValues"]),a(x)]),_:1},8,["visible"])]),_:1},8,["modelValue"]),s("div",Rt,[a(b)])]),_:1})]),_:1})}var Jt=O(Qt,[["render",Bt]]);export{Jt as default};
