import{i as h,g as Je,h as _,j as Ct,z as kt,d as G,r as m,D as P,_ as X,o as b,au as O,a as n,w as r,p as qe,Q as S,e as s,af as F,ag as y,aK as Et,c as H,x,av as J,aL as _e,aJ as Te,al as Nt,am as fe,G as mt,P as ht,s as Ee,f as A}from"./index.397ca9ad.js";import{Q as le}from"./QTooltip.5e689202.js";import{Q as ge,a as Wt,b as jt,c as xe,d as Jt,e as vt,f as ft,g as Gt,h as Xt}from"./QLayout.f3cebcf5.js";import{Q as ye,a as Ve}from"./QExpansionItem.478ade2d.js";import{u as Z,s as Zt,a as gt,p as ne,t as ea,c as _t,f as ta,g as aa,j as Ne,_ as oa,d as yt}from"./re-store.25c9546d.js";import{a as q,Q as L,i as St,C as Me,h as bt,u as la,b as na,c as sa}from"./ClosePopup.0b034046.js";import{a as ra,u as ia,b as ua,D as da,P as ca}from"./DocumentationComponent.e9d22f8a.js";import{Q as ma}from"./QInput.89b30091.js";import{d as wt,f as $t}from"./use-dark.8b7abc5a.js";import{Q as Ge}from"./QImg.caebe787.js";import"./position-engine.81c73d86.js";import"./selection.d52e4756.js";import"./use-portal.35c839d0.js";import"./QSlideTransition.64c99f18.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";import"./use-key-composition.ed61037c.js";import"./QCheckbox.8f7bdb56.js";const ha=h("div",{class:"q-space"});var je=Je({name:"QSpace",setup(){return()=>ha}}),pe=Je({name:"QList",props:{...wt,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:o}){const p=kt(),V=$t(e,p.proxy.$q),$=_(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(V.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>h(e.tag,{class:$.value},Ct(o.default))}});const va=G({name:"SearchComponent",setup(){const e=Z(),o=m("");return{reStore:e,searchTerms:o,searchSize:m(e.preferences.resLimit),searchResults:m([]),promptSearchSize:m(!1)}},mounted(){P(this.reStore.preferences,async(e,o)=>{console.log("watcher ",e,o),this.searchSize=e.resLimit})},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchResults.splice(e,1)},load(e){console.log(e),console.log(this.searchResults[e]);const o=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("calling loadPageId ",this.searchResults[e].pageid,o),this.reStore.loadPageId(this.searchResults[e].pageid,o)},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("doSearch ",e),this.reStore.wiki.setLang(e.langName);const o=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",o.results.length),this.searchResults=o.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),fa=s("div",{class:"text-h6"},"Search Results Size",-1),ga={class:"q-gutter-y-sm column"},_a={key:0},ya={class:"row cardheader ptr justify-between"},pa=["onClick"],Ca={class:"history-remove"};function ka(e,o,p,V,$,R){return b(),O(J,null,[n(bt,{modelValue:e.promptSearchSize,"onUpdate:modelValue":o[2]||(o[2]=u=>e.promptSearchSize=u),persistent:""},{default:r(()=>[n(q,{style:{"min-width":"350px"}},{default:r(()=>[n(L,{align:"center"},{default:r(()=>[fa]),_:1}),n(L,{class:"q-pt-none",align:"center"},{default:r(()=>[n(ra,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":o[0]||(o[0]=u=>e.searchSize=u)},null,8,["modelValue"])]),_:1}),n(St,{align:"center",class:"text-primary"},{default:r(()=>[qe(n(S,{flat:"",label:"Cancel"},null,512),[[Me]]),qe(n(S,{flat:"",label:"Update results size",onClick:o[1]||(o[1]=u=>this.updateSearchSize())},null,512),[[Me]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(q,{flat:""},{default:r(()=>[n(L,null,{default:r(()=>[n(pe,{padding:"",class:"rounded-borders"},{default:r(()=>[n(ye,{"header-style":{border:"1px solid gray"},label:"Search & Results"},{default:r(()=>[s("div",ga,[n(ge,{class:"bg-primary text-white rounded-borders q-my-md"},{default:r(()=>[n(S,{dark:"",standout:"",onClick:o[3]||(o[3]=u=>e.promptSearchSize=!0)},{default:r(()=>[F(y(this.searchResults.length)+" ",1),n(le,null,{default:r(()=>[F("Change results limit ("+y(this.searchSize)+")",1)]),_:1})]),_:1}),n(ma,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":o[6]||(o[6]=u=>e.searchTerms=u),"input-class":"text-right",class:"q-ml-md",onKeyup:[o[7]||(o[7]=u=>this.update()),o[8]||(o[8]=Et(u=>this.doSearch(),["enter"]))]},{append:r(()=>[e.searchTerms===""?(b(),H(x,{key:0,name:"search",onClick:o[4]||(o[4]=u=>this.doSearch())})):(b(),H(x,{key:1,name:"clear",class:"cursor-pointer",onClick:o[5]||(o[5]=u=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(b(),O("div",_a,[(b(!0),O(J,null,_e(this.searchResults,(u,f)=>(b(),H(q,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":o[9]||(o[9]=k=>this.searchResults=k),key:f},{default:r(()=>[s("div",ya,[s("span",{class:"history-title col-grow",onClick:k=>this.load(f)},y(f)+". "+y(u.title.slice(0,25)),9,pa),s("span",Ca,[n(x,{class:"primary",size:e.xl,color:e.primary,name:"close",onClick:k=>this.remove(f)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):Te("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Sa=X(va,[["render",ka]]);const ba=G({name:"CurrentPage",props:{},setup(e){const o=Z();return{reStore:o,courseid:m("-"),pageTitle:m(o.page.pageTitle),langVoiceKey:m(o.page.langVoiceKey),imgIdx:m(0),imgs:m([]),imgTot:m(0),imgFit:m("-"),guideWords:m("-"),mapCoords:m("-"),pageid:m("-"),pctReplace:m(o.page.pctReplace),canonicalUrl:m(o.page.canonicalUrl),props:e}},mounted(){console.log(this.props),P(this.reStore.page,async(e,o)=>{try{console.log("CurrentPage watcher ",e,o),this.pageTitle=e.pageTitle,this.imgIdx=e.imgIdx,this.imgs=e.imgs,this.imgTot=e.imgs.length,this.imgFit=e.imgFit,this.guideWords=e.guideWords,this.mapCoords=e.mapCoords,this.pageid=e.pageid,this.langVoiceKey=e.langVoiceKey,this.pctReplace=e.pctReplace,this.canonicalUrl=e.canonicalUrl}catch(p){console.log(p)}})},methods:{speak(){console.log("CurrentPage.speak",this.reStore),this.reStore.speak()},cycleFitMode(){const e=["scale-down","cover"];let o=e.indexOf(this.imgFit);o+=1,o>e.length-1&&(o=0),this.imgFit=e[o],this.reStore.page.imgFit=this.imgFit,console.log("fit: ",this.imgFit)},nextImg(){this.imgIdx=this.imgIdx+1>this.imgs.length-1?0:this.imgIdx+1,this.reStore.page.imgIdx=this.imgIdx},imgCB(e,o){console.log(e,o),this.reStore.page.imgIdx=e},loadURL(e){console.log("loadURL ",e),window.open(e,"_blank")},mapCB(){const e="https://maps.google.com/?ll="+this.mapCoords.split(",")[0]+","+this.mapCoords.split(",")[1];window.open(e,"_blank")},saveImage(e,o){console.log("saveImage: ",e,o),this.reStore.saveImage(o)},saveCurrentImage(){const e=this.imgs[this.imgIdx];console.log("saveCurrentImage: ",e),this.reStore.saveImage(e)},remove(e,o){console.log("remove: ",e,o),this.imgs.splice(e,1),this.reStore.page.imgs.splice(e,1)},toggleText(){Zt("#slideTextDiv").classed("hidden")?gt("#slideTextDiv").classed("hidden",!1):gt("#slideTextDiv").classed("hidden",!0)},addBookmark(){console.log("addBookmark"),this.reStore.saveBookmark()}}}),wa={class:"text-weight-bolder text-center q-pa-md"},$a={style:{border:"1px solid gray","border-radius":"5px"}},Da={width:"100%"},xa=s("td",{style:{width:"50%","text-align":"center"}},null,-1),Va={style:{"text-align":"center"}},qa=s("tr",null,[s("td"),s("td",{style:{"text-align":"center"}},"Speak Text")],-1),Ta={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Ma={width:"100%"},Ia=s("td",null,"Assgmnt Id",-1),Ha={style:{width:"50%"}},Ra={class:"ptr float-left"},Ba=s("td",null,"WP Page Id",-1),Fa={style:{width:"50%"}},Qa=s("td",null,"Language",-1),Pa={style:{width:"50%"}},Ya={class:"float-left"},Aa=s("td",null,"Current Image",-1),La={class:"float-left"},Oa={class:"float-right"},Ua=s("td",null,"Image Fit",-1),za={class:"align-left"},Ka=s("td",null,"Guide Words",-1),Ea={style:{width:"50%"}},Na=s("td",null,"Percent Replace",-1),Wa={class:"float-left"},ja=s("td",null,"Map Coords",-1),Ja={class:"float-left"},Ga=s("td",null,"Toggle Text",-1),Xa={key:0},Za={class:"row cardheader justify-between"},eo={class:"history-remove"},to={class:"history-remove ptr"};function ao(e,o,p,V,$,R){return b(),O(J,null,[n(q,{flat:""},{default:r(()=>[n(L,null,{default:r(()=>[s("div",wa,y(this.pageTitle),1),s("div",$a,[s("table",Da,[s("tr",null,[xa,s("td",Va,[n(S,{round:"",class:"q-pa-md",icon:"volume_up",color:"secondary",onClick:o[0]||(o[0]=u=>this.speak())})])]),qa])]),s("div",Ta,[s("table",Ma,[s("tr",null,[Ia,s("td",Ha,[s("a",Ra,y(this.assignmentId),1)])]),s("tr",null,[Ba,s("td",Fa,[s("a",{class:"ptr float-left",onClick:o[1]||(o[1]=u=>this.loadURL(this.canonicalUrl))},y(this.pageid),1),n(x,{name:"bookmark",onClick:this.addBookmark,class:"float-right"},null,8,["onClick"])])]),s("tr",null,[Qa,s("td",Pa,[s("span",Ya,y(this.langVoiceKey),1),n(x,{class:"float-right",name:"translate"})])]),s("tr",null,[Aa,s("td",{style:{width:"50%"},onClick:o[2]||(o[2]=(...u)=>this.nextImg&&this.nextImg(...u)),class:"ptr"},[s("span",La,y(this.imgIdx+1)+" / "+y(this.imgTot),1),s("span",Oa,[n(x,{name:"bookmark",onClick:this.saveCurrentImage},null,8,["onClick"])])])]),s("tr",{class:"ptr",onClick:o[3]||(o[3]=(...u)=>this.cycleFitMode&&this.cycleFitMode(...u))},[Ua,s("td",null,[s("span",za,y(this.imgFit),1),n(x,{class:"float-right",name:"fit_screen"})])]),s("tr",null,[Ka,s("td",Ea,[F(y(this.guideWords.replaceAll(",",", "))+" ",1),n(x,{class:"float-right",name:"tune"})])]),s("tr",null,[Na,s("td",null,[s("span",Wa,y(this.pctReplace)+" %",1),n(x,{class:"float-right",name:"tune"})])]),s("tr",null,[ja,s("td",{onClick:o[4]||(o[4]=(...u)=>this.mapCB&&this.mapCB(...u)),class:"ptr"},[s("span",Ja,y(this.mapCoords),1),n(x,{class:"float-right",name:"place"})])]),s("tr",null,[Ga,s("td",{onClick:o[5]||(o[5]=(...u)=>this.toggleText&&this.toggleText(...u)),class:"ptr"},[n(x,{class:"float-right",name:"article"})])])])])]),_:1})]),_:1}),n(q,{flat:""},{default:r(()=>[n(L,null,{default:r(()=>[n(pe,{padding:"",class:"rounded-borders"},{default:r(()=>[n(ye,{"header-style":{border:"1px solid gray"},label:"Page Images"},{default:r(()=>[this.imgs.length?(b(),O("div",Xa,[(b(!0),O(J,null,_e(this.imgs,(u,f)=>(b(),H(q,{bordered:"",class:"q-ma-sm",flat:"",modelValue:this.imgs,"onUpdate:modelValue":o[6]||(o[6]=k=>this.imgs=k),key:f},{default:r(()=>[s("div",Za,[s("span",eo,[n(x,{name:"bookmark",onClick:k=>this.saveImage(f,u)},null,8,["onClick"]),n(x,{name:"article",onClick:this.toggleText},{default:r(()=>[n(le,null,{default:r(()=>[F("Convenience button to toggle current text ")]),_:1})]),_:1},8,["onClick"]),n(x,{name:"fit_screen",onClick:this.cycleFitMode},{default:r(()=>[n(le,null,{default:r(()=>[F("Convenience button to toggle current image-fit mode ")]),_:1})]),_:1},8,["onClick"])]),s("span",null,y(u.cap.slice(0,25)),1),s("span",to,[n(x,{name:"close",onClick:k=>this.remove(f,u)},null,8,["onClick"])])]),n(Ge,{class:"cardimage",onClick:k=>this.imgCB(f,u),src:u.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])):Te("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var oo=X(ba,[["render",ao]]);const lo=G({name:"ImagesComponent",setup(){return{reStore:Z()}},mounted(){P(this.reStore.userSnapshot.images,async(e,o)=>{console.log("watcher ",e,o)})},methods:{imgCB(e,o){this.reStore.router.push("/teacher/editor"),console.log(e,o);const p={url:o.url,cap:o.desc};this.reStore.page.imgs.push(p),this.reStore.page.imgIdx=this.reStore.page.imgs.length-1},remove(e,o){console.log(e,o),this.reStore.removeImage(e)}}}),no={class:"row cardheader justify-between"},so={class:"history-remove hidden"},ro={class:"history-remove ptr"};function io(e,o,p,V,$,R){return b(),H(q,{flat:""},{default:r(()=>[n(L,null,{default:r(()=>[n(pe,{padding:"",class:"rounded-borders"},{default:r(()=>[n(ye,{"header-style":{border:"1px solid gray"},label:"My Images"},{default:r(()=>[s("div",null,[(b(!0),O(J,null,_e(this.reStore.userSnapshot.images,(u,f)=>(b(),H(q,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":o[0]||(o[0]=k=>this.reStore.userSnapshot.images=k),key:f},{default:r(()=>[s("div",no,[s("span",so,[n(x)]),F(" "+y(u.desc.slice(0,25))+" ",1),s("span",ro,[n(x,{name:"close",onClick:k=>this.remove(f,u)},null,8,["onClick"])])]),n(Ge,{class:"cardimage",onClick:k=>this.imgCB(f,u),src:u.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var uo=X(lo,[["render",io]]);const co=G({name:"BookmarksComponent",setup(){return{reStore:Z()}},mounted(){P(this.reStore.userSnapshot.bookmarks,async(e,o)=>{console.log("watcher ",e,o)})},methods:{imgCB(e,o){this.reStore.page.imgs=JSON.parse(JSON.stringify(o.imgs)),this.reStore.router.push("/teacher/editor")},remove(e,o){console.log(e,o),this.reStore.removeBookmark(e)}}}),mo={class:"row cardheader justify-between"},ho={class:"history-remove hidden"},vo={class:"history-remove ptr"};function fo(e,o,p,V,$,R){return b(),H(q,{flat:""},{default:r(()=>[n(L,null,{default:r(()=>[n(pe,{padding:"",class:"rounded-borders"},{default:r(()=>[n(ye,{"header-style":{border:"1px solid gray"},label:"My bookmarks"},{default:r(()=>[s("div",null,[(b(!0),O(J,null,_e(this.reStore.userSnapshot.bookmarks,(u,f)=>(b(),H(q,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":o[0]||(o[0]=k=>this.reStore.userSnapshot.bookmarks=k),key:f},{default:r(()=>[s("div",mo,[s("span",ho,[n(x)]),F(" "+y(u.pageTitle.slice(0,25))+" ",1),s("span",vo,[n(x,{name:"close",onClick:k=>this.remove(f,u)},null,8,["onClick"])])]),n(Ge,{class:"cardimage",onClick:k=>this.imgCB(f,u),src:u.imgs[0].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var go=X(co,[["render",fo]]);const _o=["gregorian","persian"],yo={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>_o.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},po=["update:modelValue"];function W(e){return e.year+"/"+ne(e.month)+"/"+ne(e.day)}function Co(e,o){const p=_(()=>e.disable!==!0&&e.readonly!==!0),V=_(()=>e.editable===!0?0:-1),$=_(()=>{const f=[];return e.color!==void 0&&f.push(`bg-${e.color}`),e.textColor!==void 0&&f.push(`text-${e.textColor}`),f.join(" ")});function R(){return e.locale!==void 0?{...o.lang.date,...e.locale}:o.lang.date}function u(f){const k=new Date,U=f===!0?null:0;if(e.calendar==="persian"){const E=ea(k);return{year:E.jy,month:E.jm,day:E.jd}}return{year:k.getFullYear(),month:k.getMonth()+1,day:k.getDate(),hour:U,minute:U,second:U,millisecond:U}}return{editable:p,tabindex:V,headerClass:$,getLocale:R,getCurrentDate:u}}const oe=20,ko=["Calendar","Years","Months"],pt=e=>ko.includes(e),We=e=>/^-?[\d]+\/[0-1]\d$/.test(e),ce=" \u2014 ";function j(e){return e.year+"/"+ne(e.month)}var So=Je({name:"QDate",props:{...yo,...la,...wt,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:We},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:We},navigationMaxYearMonth:{type:String,validator:We},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:pt}},emits:[...po,"rangeStart","rangeEnd","navigation"],setup(e,{slots:o,emit:p}){const{proxy:V}=kt(),{$q:$}=V,R=$t(e,$),{getCache:u}=ia(),{tabindex:f,headerClass:k,getLocale:U,getCurrentDate:E}=Co(e,$);let se;const Ie=na(e),He=sa(Ie),me=m(null),z=m(nt()),D=m(U()),ee=_(()=>nt()),Dt=_(()=>U()),K=_(()=>E()),v=m(st(z.value,D.value)),B=m(e.defaultView),Xe=$.lang.rtl===!0?"right":"left",Ce=m(Xe.value),Re=m(Xe.value),Be=v.value.year,ke=m(Be-Be%oe-(Be<0?oe:0)),T=m(null),xt=_(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(R.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),te=_(()=>e.color||"primary"),re=_(()=>e.textColor||"white"),Se=_(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Fe=_(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),Y=_(()=>Fe.value.filter(t=>typeof t=="string").map(t=>Ae(t,z.value,D.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),ie=_(()=>{const t=a=>Ae(a,z.value,D.value);return Fe.value.filter(a=>Nt(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),be=_(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=_t(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),Qe=_(()=>e.calendar==="persian"?W:(t,a,l)=>ta(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?z.value:a,l===void 0?D.value:l,t.year,t.timezoneOffset)),he=_(()=>Y.value.length+ie.value.reduce((t,a)=>t+1+aa(be.value(a.to),be.value(a.from)),0)),Ze=_(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(T.value!==null){const l=T.value.init,d=be.value(l);return D.value.daysShort[d.getDay()]+", "+D.value.monthsShort[l.month-1]+" "+l.day+ce+"?"}if(he.value===0)return ce;if(he.value>1)return`${he.value} ${D.value.pluralDay}`;const t=Y.value[0],a=be.value(t);return isNaN(a.valueOf())===!0?ce:D.value.headerTitle!==void 0?D.value.headerTitle(a,t):D.value.daysShort[a.getDay()]+", "+D.value.monthsShort[t.month-1]+" "+t.day}),Vt=_(()=>Y.value.concat(ie.value.map(a=>a.from)).sort((a,l)=>a.year-l.year||a.month-l.month)[0]),qt=_(()=>Y.value.concat(ie.value.map(a=>a.to)).sort((a,l)=>l.year-a.year||l.month-a.month)[0]),et=_(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(he.value===0)return ce;if(he.value>1){const t=Vt.value,a=qt.value,l=D.value.monthsShort;return l[t.month-1]+(t.year!==a.year?" "+t.year+ce+l[a.month-1]+" ":t.month!==a.month?ce+l[a.month-1]:"")+" "+a.year}return Y.value[0].year}),we=_(()=>{const t=[$.iconSet.datetime.arrowLeft,$.iconSet.datetime.arrowRight];return $.lang.rtl===!0?t.reverse():t}),tt=_(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):D.value.firstDayOfWeek),Tt=_(()=>{const t=D.value.daysShort,a=tt.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),N=_(()=>{const t=v.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():Ne(t.year,t.month)}),Mt=_(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),M=_(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),I=_(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Pe=_(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return M.value!==null&&M.value.year>=v.value.year&&(t.year.prev=!1,M.value.year===v.value.year&&M.value.month>=v.value.month&&(t.month.prev=!1)),I.value!==null&&I.value.year<=v.value.year&&(t.year.next=!1,I.value.year===v.value.year&&I.value.month<=v.value.month&&(t.month.next=!1)),t}),$e=_(()=>{const t={};return Y.value.forEach(a=>{const l=j(a);t[l]===void 0&&(t[l]=[]),t[l].push(a.day)}),t}),at=_(()=>{const t={};return ie.value.forEach(a=>{const l=j(a.from),d=j(a.to);if(t[l]===void 0&&(t[l]=[]),t[l].push({from:a.from.day,to:l===d?a.to.day:void 0,range:a}),l<d){let i;const{year:C,month:c}=a.from,g=c<12?{year:C,month:c+1}:{year:C+1,month:1};for(;(i=j(g))<=d;)t[i]===void 0&&(t[i]=[]),t[i].push({from:void 0,to:i===d?a.to.day:void 0,range:a}),g.month++,g.month>12&&(g.year++,g.month=1)}}),t}),ve=_(()=>{if(T.value===null)return;const{init:t,initHash:a,final:l,finalHash:d}=T.value,[i,C]=a<=d?[t,l]:[l,t],c=j(i),g=j(C);if(c!==Q.value&&g!==Q.value)return;const w={};return c===Q.value?(w.from=i.day,w.includeFrom=!0):w.from=1,g===Q.value?(w.to=C.day,w.includeTo=!0):w.to=N.value,w}),Q=_(()=>j(v.value)),It=_(()=>{const t={};if(e.options===void 0){for(let l=1;l<=N.value;l++)t[l]=!0;return t}const a=typeof e.options=="function"?e.options:l=>e.options.includes(l);for(let l=1;l<=N.value;l++){const d=Q.value+"/"+ne(l);t[l]=a(d)}return t}),Ht=_(()=>{const t={};if(e.events===void 0)for(let a=1;a<=N.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:l=>e.events.includes(l);for(let l=1;l<=N.value;l++){const d=Q.value+"/"+ne(l);t[l]=a(d)===!0&&Mt.value(d)}}return t}),Rt=_(()=>{let t,a;const{year:l,month:d}=v.value;if(e.calendar!=="persian")t=new Date(l,d-1,1),a=new Date(l,d-1,0).getDate();else{const i=_t(l,d,1);t=new Date(i.gy,i.gm-1,i.gd);let C=d-1,c=l;C===0&&(C=12,c--),a=Ne(c,C)}return{days:t.getDay()-tt.value-1,endDay:a}}),ot=_(()=>{const t=[],{days:a,endDay:l}=Rt.value,d=a<0?a+7:a;if(d<6)for(let c=l-d;c<=l;c++)t.push({i:c,fill:!0});const i=t.length;for(let c=1;c<=N.value;c++){const g={i:c,event:Ht.value[c],classes:[]};It.value[c]===!0&&(g.in=!0,g.flat=!0),t.push(g)}if($e.value[Q.value]!==void 0&&$e.value[Q.value].forEach(c=>{const g=i+c-1;Object.assign(t[g],{selected:!0,unelevated:!0,flat:!1,color:te.value,textColor:re.value})}),at.value[Q.value]!==void 0&&at.value[Q.value].forEach(c=>{if(c.from!==void 0){const g=i+c.from-1,w=i+(c.to||N.value)-1;for(let Ke=g;Ke<=w;Ke++)Object.assign(t[Ke],{range:c.range,unelevated:!0,color:te.value,textColor:re.value});Object.assign(t[g],{rangeFrom:!0,flat:!1}),c.to!==void 0&&Object.assign(t[w],{rangeTo:!0,flat:!1})}else if(c.to!==void 0){const g=i+c.to-1;for(let w=i;w<=g;w++)Object.assign(t[w],{range:c.range,unelevated:!0,color:te.value,textColor:re.value});Object.assign(t[g],{flat:!1,rangeTo:!0})}else{const g=i+N.value-1;for(let w=i;w<=g;w++)Object.assign(t[w],{range:c.range,unelevated:!0,color:te.value,textColor:re.value})}}),ve.value!==void 0){const c=i+ve.value.from-1,g=i+ve.value.to-1;for(let w=c;w<=g;w++)t[w].color=te.value,t[w].editRange=!0;ve.value.includeFrom===!0&&(t[c].editRangeFrom=!0),ve.value.includeTo===!0&&(t[g].editRangeTo=!0)}v.value.year===K.value.year&&v.value.month===K.value.month&&(t[i+K.value.day-1].today=!0);const C=t.length%7;if(C>0){const c=7-C;for(let g=1;g<=c;g++)t.push({i:g,fill:!0})}return t.forEach(c=>{let g="q-date__calendar-item ";c.fill===!0?g+="q-date__calendar-item--fill":(g+=`q-date__calendar-item--${c.in===!0?"in":"out"}`,c.range!==void 0&&(g+=` q-date__range${c.rangeTo===!0?"-to":c.rangeFrom===!0?"-from":""}`),c.editRange===!0&&(g+=` q-date__edit-range${c.editRangeFrom===!0?"-from":""}${c.editRangeTo===!0?"-to":""}`),(c.range!==void 0||c.editRange===!0)&&(g+=` text-${c.color}`)),c.classes=g}),t}),Bt=_(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});P(()=>e.modelValue,t=>{if(se===t)se=0;else{const{year:a,month:l}=st(z.value,D.value);ue(a,l)}}),P(B,()=>{me.value!==null&&V.$el.contains(document.activeElement)===!0&&me.value.focus()}),P(()=>v.value.year,t=>{p("navigation",{year:t,month:v.value.month})}),P(()=>v.value.month,t=>{p("navigation",{year:v.value.year,month:t})}),P(ee,t=>{ct(t,D.value,"mask"),z.value=t}),P(Dt,t=>{ct(z.value,t,"locale"),D.value=t});function lt(){const t=K.value,a=$e.value[j(t)];(a===void 0||a.includes(t.day)===!1)&&Oe(t),Ye(t.year,t.month)}function Ft(t){pt(t)===!0&&(B.value=t)}function Qt(t,a){["month","year"].includes(t)&&(t==="month"?it:Le)(a===!0?-1:1)}function Ye(t,a){B.value="Calendar",ue(t,a)}function Pt(t,a){if(e.range===!1||!t){T.value=null;return}const l=Object.assign({...v.value},t),d=a!==void 0?Object.assign({...v.value},a):l;T.value={init:l,initHash:W(l),final:d,finalHash:W(d)},Ye(l.year,l.month)}function nt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ae(t,a,l){return oa(t,a,l,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function st(t,a){const l=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(l.length===0)return rt();const d=l[l.length-1],i=Ae(d.from!==void 0?d.from:d,t,a);return i.dateHash===null?rt():i}function rt(){let t,a;if(e.defaultYearMonth!==void 0){const l=e.defaultYearMonth.split("/");t=parseInt(l[0],10),a=parseInt(l[1],10)}else{const l=K.value!==void 0?K.value:E();t=l.year,a=l.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+ne(a)+"/01"}}function it(t){let a=v.value.year,l=Number(v.value.month)+t;l===13?(l=1,a++):l===0&&(l=12,a--),ue(a,l),Se.value===!0&&De("month")}function Le(t){const a=Number(v.value.year)+t;ue(a,v.value.month),Se.value===!0&&De("year")}function Yt(t){ue(t,v.value.month),B.value=e.defaultView==="Years"?"Months":"Calendar",Se.value===!0&&De("year")}function At(t){ue(v.value.year,t),B.value="Calendar",Se.value===!0&&De("month")}function Lt(t,a){const l=$e.value[a];(l!==void 0&&l.includes(t.day)===!0?Ue:Oe)(t)}function ae(t){return{year:t.year,month:t.month,day:t.day}}function ue(t,a){M.value!==null&&t<=M.value.year&&(t=M.value.year,a<M.value.month&&(a=M.value.month)),I.value!==null&&t>=I.value.year&&(t=I.value.year,a>I.value.month&&(a=I.value.month));const l=t+"/"+ne(a)+"/01";l!==v.value.dateHash&&(Ce.value=v.value.dateHash<l==($.lang.rtl!==!0)?"left":"right",t!==v.value.year&&(Re.value=Ce.value),mt(()=>{ke.value=t-t%oe-(t<0?oe:0),Object.assign(v.value,{year:t,month:a,day:1,dateHash:l})}))}function ut(t,a,l){const d=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;se=d;const{reason:i,details:C}=dt(a,l);p("update:modelValue",d,i,C)}function De(t){const a=Y.value[0]!==void 0&&Y.value[0].dateHash!==null?{...Y.value[0]}:{...v.value};mt(()=>{a.year=v.value.year,a.month=v.value.month;const l=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Ne(a.year,a.month);a.day=Math.min(Math.max(1,a.day),l);const d=de(a);se=d;const{details:i}=dt("",a);p("update:modelValue",d,t,i)})}function dt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...ae(a.target),from:ae(a.from),to:ae(a.to)}}:{reason:`${t}-day`,details:ae(a)}}function de(t,a,l){return t.from!==void 0?{from:Qe.value(t.from,a,l),to:Qe.value(t.to,a,l)}:Qe.value(t,a,l)}function Oe(t){let a;if(e.multiple===!0)if(t.from!==void 0){const l=W(t.from),d=W(t.to),i=Y.value.filter(c=>c.dateHash<l||c.dateHash>d),C=ie.value.filter(({from:c,to:g})=>g.dateHash<l||c.dateHash>d);a=i.concat(C).concat(t).map(c=>de(c))}else{const l=Fe.value.slice();l.push(de(t)),a=l}else a=de(t);ut(a,"add",t)}function Ue(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const l=de(t);t.from!==void 0?a=e.modelValue.filter(d=>d.from!==void 0?d.from!==l.from&&d.to!==l.to:!0):a=e.modelValue.filter(d=>d!==l),a.length===0&&(a=null)}ut(a,"remove",t)}function ct(t,a,l){const d=Y.value.concat(ie.value).map(i=>de(i,t,a)).filter(i=>i.from!==void 0?i.from.dateHash!==null&&i.to.dateHash!==null:i.dateHash!==null);p("update:modelValue",(e.multiple===!0?d:d[0])||null,l)}function Ot(){if(e.minimal!==!0)return h("div",{class:"q-date__header "+k.value},[h("div",{class:"relative-position"},[h(fe,{name:"q-transition--fade"},()=>h("div",{key:"h-yr-"+et.value,class:"q-date__header-subtitle q-date__header-link "+(B.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:f.value,...u("vY",{onClick(){B.value="Years"},onKeyup(t){t.keyCode===13&&(B.value="Years")}})},[et.value]))]),h("div",{class:"q-date__header-title relative-position flex no-wrap"},[h("div",{class:"relative-position col"},[h(fe,{name:"q-transition--fade"},()=>h("div",{key:"h-sub"+Ze.value,class:"q-date__header-title-label q-date__header-link "+(B.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:f.value,...u("vC",{onClick(){B.value="Calendar"},onKeyup(t){t.keyCode===13&&(B.value="Calendar")}})},[Ze.value]))]),e.todayBtn===!0?h(S,{class:"q-date__header-today self-start",icon:$.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:f.value,onClick:lt}):null])])}function ze({label:t,type:a,key:l,dir:d,goTo:i,boundaries:C,cls:c}){return[h("div",{class:"row items-center q-date__arrow"},[h(S,{round:!0,dense:!0,size:"sm",flat:!0,icon:we.value[0],tabindex:f.value,disable:C.prev===!1,...u("go-#"+a,{onClick(){i(-1)}})})]),h("div",{class:"relative-position overflow-hidden flex flex-center"+c},[h(fe,{name:"q-transition--jump-"+d},()=>h("div",{key:l},[h(S,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:f.value,...u("view#"+a,{onClick:()=>{B.value=a}})})]))]),h("div",{class:"row items-center q-date__arrow"},[h(S,{round:!0,dense:!0,size:"sm",flat:!0,icon:we.value[1],tabindex:f.value,disable:C.next===!1,...u("go+#"+a,{onClick(){i(1)}})})])]}const Ut={Calendar:()=>[h("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[h("div",{class:"q-date__navigation row items-center no-wrap"},ze({label:D.value.months[v.value.month-1],type:"Months",key:v.value.month,dir:Ce.value,goTo:it,boundaries:Pe.value.month,cls:" col"}).concat(ze({label:v.value.year,type:"Years",key:v.value.year,dir:Re.value,goTo:Le,boundaries:Pe.value.year,cls:""}))),h("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Tt.value.map(t=>h("div",{class:"q-date__calendar-item"},[h("div",t)]))),h("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[h(fe,{name:"q-transition--slide-"+Ce.value},()=>h("div",{key:Q.value,class:"q-date__calendar-days fit"},ot.value.map(t=>h("div",{class:t.classes},[t.in===!0?h(S,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:f.value,...u("day#"+t.i,{onClick:()=>{zt(t.i)},onMouseover:()=>{Kt(t.i)}})},t.event!==!1?()=>h("div",{class:"q-date__event bg-"+t.event}):null):h("div",""+t.i)]))))])])],Months(){const t=v.value.year===K.value.year,a=d=>M.value!==null&&v.value.year===M.value.year&&M.value.month>d||I.value!==null&&v.value.year===I.value.year&&I.value.month<d,l=D.value.monthsShort.map((d,i)=>{const C=v.value.month===i+1;return h("div",{class:"q-date__months-item flex flex-center"},[h(S,{class:t===!0&&K.value.month===i+1?"q-date__today":null,flat:C!==!0,label:d,unelevated:C,color:C===!0?te.value:null,textColor:C===!0?re.value:null,tabindex:f.value,disable:a(i+1),...u("month#"+i,{onClick:()=>{At(i+1)}})})])});return e.yearsInMonthView===!0&&l.unshift(h("div",{class:"row no-wrap full-width"},[ze({label:v.value.year,type:"Years",key:v.value.year,dir:Re.value,goTo:Le,boundaries:Pe.value.year,cls:" col"})])),h("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},l)},Years(){const t=ke.value,a=t+oe,l=[],d=i=>M.value!==null&&M.value.year>i||I.value!==null&&I.value.year<i;for(let i=t;i<=a;i++){const C=v.value.year===i;l.push(h("div",{class:"q-date__years-item flex flex-center"},[h(S,{key:"yr"+i,class:K.value.year===i?"q-date__today":null,flat:!C,label:i,dense:!0,unelevated:C,color:C===!0?te.value:null,textColor:C===!0?re.value:null,tabindex:f.value,disable:d(i),...u("yr#"+i,{onClick:()=>{Yt(i)}})})]))}return h("div",{class:"q-date__view q-date__years flex flex-center"},[h("div",{class:"col-auto"},[h(S,{round:!0,dense:!0,flat:!0,icon:we.value[0],tabindex:f.value,disable:d(t),...u("y-",{onClick:()=>{ke.value-=oe}})})]),h("div",{class:"q-date__years-content col self-stretch row items-center"},l),h("div",{class:"col-auto"},[h(S,{round:!0,dense:!0,flat:!0,icon:we.value[1],tabindex:f.value,disable:d(a),...u("y+",{onClick:()=>{ke.value+=oe}})})])])}};function zt(t){const a={...v.value,day:t};if(e.range===!1){Lt(a,Q.value);return}if(T.value===null){const l=ot.value.find(i=>i.fill!==!0&&i.i===t);if(e.noUnset!==!0&&l.range!==void 0){Ue({target:a,from:l.range.from,to:l.range.to});return}if(l.selected===!0){Ue(a);return}const d=W(a);T.value={init:a,initHash:d,final:a,finalHash:d},p("rangeStart",ae(a))}else{const l=T.value.initHash,d=W(a),i=l<=d?{from:T.value.init,to:a}:{from:a,to:T.value.init};T.value=null,Oe(l===d?a:{target:a,...i}),p("rangeEnd",{from:ae(i.from),to:ae(i.to)})}}function Kt(t){if(T.value!==null){const a={...v.value,day:t};Object.assign(T.value,{final:a,finalHash:W(a)})}}return Object.assign(V,{setToday:lt,setView:Ft,offsetCalendar:Qt,setCalendarTo:Ye,setEditingRange:Pt}),()=>{const t=[h("div",{class:"q-date__content col relative-position"},[h(fe,{name:"q-transition--fade"},Ut[B.value])])],a=Ct(o.default);return a!==void 0&&t.push(h("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&He(t,"push"),h("div",{class:xt.value,...Bt.value},[Ot(),h("div",{ref:me,class:"q-date__main col column",tabindex:-1},t)])}}});const bo=G({name:"OTDComponent",setup(){const e=Z(),o=Date.now(),p=yt.formatDate(o,"MM/DD");return{reStore:e,otditems:m([]),promptOTDDate:m(!1),otddate:m(Date.now()),otdlabel:m(p),otdtype:m("selected")}},mounted(){this.init()},methods:{async init(){const e=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=e[this.otdtype],console.log(this.otditems)},async load(e){console.log("load",this.otditems[e].text),console.log("load",this.otditems[e]);const o=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("OTD load ",o),this.reStore.loadPageId(this.otditems[e].pages[0].pageid,o),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const e=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=e.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=yt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(e){console.log("otdOptionsCB",this.otdtype);const o=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=o[this.otdtype]}}}),wo=s("div",{class:"text-h6"},"Select Date",-1),$o={class:"q-gutter-y-sm column"},Do={class:""};function xo(e,o,p,V,$,R){return b(),O(J,null,[n(bt,{modelValue:e.promptOTDDate,"onUpdate:modelValue":o[2]||(o[2]=u=>e.promptOTDDate=u),persistent:""},{default:r(()=>[n(q,{style:{"min-width":"350px"}},{default:r(()=>[n(L,{align:"center"},{default:r(()=>[wo]),_:1}),n(So,{modelValue:e.otddate,"onUpdate:modelValue":o[0]||(o[0]=u=>e.otddate=u),minimal:""},null,8,["modelValue"]),n(St,{align:"center",class:"text-white"},{default:r(()=>[qe(n(S,{flat:"",label:"Cancel"},null,512),[[Me]]),qe(n(S,{flat:"",label:"Update OTD date",onClick:o[1]||(o[1]=u=>this.updateOTDDate())},null,512),[[Me]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(q,{flat:""},{default:r(()=>[n(L,null,{default:r(()=>[n(pe,{padding:"",class:"rounded-borders"},{default:r(()=>[n(ye,{"header-style":{border:"1px solid gray"},label:"On This Day"},{default:r(()=>[s("div",$o,[n(ge,{class:"bg-primary text-white rounded-borders q-my-md"},{default:r(()=>[n(S,{dark:"",standout:"",onClick:o[3]||(o[3]=u=>e.promptOTDDate=!0)},{default:r(()=>[F(y(e.otdlabel),1)]),_:1}),n(je),n(ua,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":o[4]||(o[4]=u=>this.otdtype=u),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:o[5]||(o[5]=u=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),s("div",Do,[(b(!0),O(J,null,_e(e.otditems,(u,f)=>(b(),H(q,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:e.otditems,"onUpdate:modelValue":o[6]||(o[6]=k=>e.otditems=k),key:f,onClick:k=>this.load(f)},{default:r(()=>[F(y(f)+". "+y(u.year)+" "+y(u.text),1)]),_:2},1032,["modelValue","onClick"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Vo=X(bo,[["render",xo]]);const qo=G({name:"CurrentAssignment",setup(){const e=Z();return{reStore:e,assignmentid:m("-"),courseid:m("-"),goal:m("-"),created:m("-"),id:m("-"),points:m("-"),pages:m([]),pgIdx:m(0),title:m(e.assignment.title)}},mounted(){console.log("mounted"),P(this.reStore.assignment,async(e,o)=>{try{console.log("watcher ",e,o),this.courseid=e.courseid,this.goal=e.goal,this.created=e.created,this.id=e.id,this.points=e.points,this.pages=e.pages,this.pgIdx=e.pgIdx,this.title=e.title}catch(p){console.log(p)}})},methods:{dummy(){console.log("dummy")}}}),To={class:"text-weight-bolder text-center q-pa-md"},Mo={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Io={width:"100%"},Ho=s("td",null,"Course Id",-1),Ro={style:{width:"50%"}},Bo=s("td",null,"Assgmnt Id",-1),Fo={style:{width:"50%"}},Qo=s("td",null,"Created",-1),Po={style:{width:"50%"}},Yo=s("td",null,"Goal",-1),Ao={style:{width:"50%"}},Lo=s("td",null,"Pages",-1),Oo={style:{width:"50%"}};function Uo(e,o,p,V,$,R){return b(),H(q,{flat:""},{default:r(()=>[n(L,null,{default:r(()=>[s("div",To,y(this.title),1),s("div",Mo,[s("table",Io,[s("tr",null,[Ho,s("td",Ro,y(this.courseid),1)]),s("tr",null,[Bo,s("td",Fo,y(this.id),1)]),s("tr",null,[Qo,s("td",Po,y(this.created),1)]),s("tr",null,[Yo,s("td",Ao,y(this.goal),1)]),s("tr",null,[Lo,s("td",Oo,y(this.pgIdx)+" / "+y(this.pages.length),1)])])])]),_:1})]),_:1})}var zo=X(qo,[["render",Uo]]);const Ko=G({name:"CurrentCourse",setup(){const e=Z();return{reStore:e,title:m(e.course.title),assignmentCount:m(0),courseKey:m(e.course.courseKey),created:m(e.course.created),enrollmentCount:m(0),owner:m(e.course.owner)}},mounted(){console.log("CurrentCourse mounted"),P(this.reStore.course,async(e,o)=>{try{console.log("CurrentCourse watcher ",e,o),this.assignmentCount=Object.keys(e.assignments).length,this.title=e.title,this.courseKey=e.courseKey,this.created=e.created,this.enrollmentCount=Object.keys(e.enrollment).length,this.owner=e.owner}catch(p){console.log(p)}})},methods:{dummy(){console.log("dummy")}}}),Eo={class:"text-weight-bolder text-center q-pa-md"},No={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Wo={width:"100%"},jo=s("td",null,"Owner",-1),Jo={style:{width:"50%"}},Go=s("td",null,"Assignments",-1),Xo={style:{width:"50%"}},Zo=s("td",null,"Course-Key",-1),el={style:{width:"50%"}},tl=s("td",null,"Created",-1),al={style:{width:"50%"}},ol=s("td",null,"Enrollment",-1),ll={style:{width:"50%"}};function nl(e,o,p,V,$,R){return b(),H(q,{flat:""},{default:r(()=>[n(L,null,{default:r(()=>[s("div",Eo,y(this.title),1),s("div",No,[s("table",Wo,[s("tr",null,[jo,s("td",Jo,y(this.owner.slice(0,10)),1)]),s("tr",null,[Go,s("td",Xo,y(this.assignmentCount),1)]),s("tr",null,[Zo,s("td",el,y(this.courseKey),1)]),s("tr",null,[tl,s("td",al,y(this.created),1)]),s("tr",null,[ol,s("td",ll,y(this.enrollmentCount),1)])])])]),_:1})]),_:1})}var sl=X(Ko,[["render",nl]]);const rl=G({name:"TeacherLayout",components:{CurrentCourse:sl,DocumentationComponent:da,SearchComponent:Sa,ImagesComponent:uo,BookmarksComponent:go,OTDComponent:Vo,CurrentAssignment:zo,PreferencesComponent:ca,CurrentPage:oo},setup(){const e=m(!1),o=m(!1),p=Z(),V=p.userSnapshot.preferences,$=m(null),R=m(null);return{step:m(1),reStore:p,initialValues:m(V),scrollAreaRHS:$,scrollAreaLHS:R,leftDrawerOpen:e,rightDrawerOpen:o,toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){o.value=!o.value}}},mounted(){ht.isActive||(ht.toggle(),Ee("primary","#333"),Ee("secondary",this.initialValues.secondaryColor),Ee("accent",this.initialValues.accentColor))},methods:{scrollTopRHS(){this.scrollAreaRHS.setScrollPosition("vertical",0)},scrollTopLHS(){this.scrollAreaLHS.setScrollPosition("vertical",0)}}}),il={class:"dashboard-wrapper"},ul=s("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),dl=s("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1);function cl(e,o,p,V,$,R){const u=A("router-link"),f=A("router-view"),k=A("DocumentationComponent"),U=A("SearchComponent"),E=A("ImagesComponent"),se=A("BookmarksComponent"),Ie=A("OTDComponent"),He=A("CurrentCourse"),me=A("CurrentAssignment"),z=A("CurrentPage"),D=A("PreferencesComponent");return b(),H(Xt,{view:"hHh LpR fFf"},{default:r(()=>[n(Jt,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:r(()=>[n(ge,null,{default:r(()=>[n(S,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),n(Wt,null,{default:r(()=>[n(u,{to:"/teacher"},{default:r(()=>[n(x,{name:"home",color:"white"},{default:r(()=>[n(le,null,{default:r(()=>[F("Return to My Teacher Page")]),_:1})]),_:1})]),_:1})]),_:1}),this.reStore.authenticated?(b(),H(S,{key:0,onClick:o[0]||(o[0]=ee=>this.reStore.router.push("/student")),icon:"switch_account"},{default:r(()=>[n(le,null,{default:r(()=>[F(" Switch between Teacher or Student role ")]),_:1})]),_:1})):Te("",!0),this.reStore.authenticated?(b(),H(S,{key:1,icon:"logout",onClick:o[1]||(o[1]=ee=>this.reStore.logout())})):Te("",!0),n(S,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1}),n(jt,{align:"left",class:"hidden"},{default:r(()=>[n(xe,{to:"/logo",label:"Logo"}),n(xe,{to:"/teaching",label:"Teaching"}),n(xe,{to:"/taking",label:"Taking"}),n(xe,{to:"/gradebook",label:"Gradebook"})]),_:1})]),_:1}),n(Gt,{class:"container-fluid"},{default:r(()=>[s("div",il,[n(f)]),n(vt,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":o[2]||(o[2]=ee=>e.leftDrawerOpen=ee),side:"left"},{default:r(()=>[n(ge,{flat:"",class:"bg-primary text-white"},{default:r(()=>[n(S,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),n(Ve,{dark:"",vertical:"",inset:""}),n(S,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),n(Ve,{dark:"",vertical:"",inset:""}),n(je),n(S,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopLHS},{default:r(()=>[n(le,null,{default:r(()=>[F("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),ul,n(ft,{visible:e.visible,style:{height:"95vh","max-width":"350px"},ref:"scrollAreaLHS"},{default:r(()=>[n(k),n(U),n(E),n(se),n(Ie)]),_:1},8,["visible"])]),_:1},8,["modelValue"]),n(vt,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":o[3]||(o[3]=ee=>e.rightDrawerOpen=ee),side:"right"},{default:r(()=>[n(ge,{flat:"",class:"bg-primary text-white"},{default:r(()=>[n(S,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),n(Ve,{dark:"",vertical:"",inset:""}),n(S,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),n(Ve,{dark:"",vertical:"",inset:""}),n(je),n(S,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopRHS},{default:r(()=>[n(le,null,{default:r(()=>[F("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),dl,n(ft,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaRHS"},{default:r(()=>[n(He),n(me),n(z),n(D,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var Tl=X(rl,[["render",cl]]);export{Tl as default};
