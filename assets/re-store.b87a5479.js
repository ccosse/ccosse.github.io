import{a6 as Plugin,a7 as isDate,a8 as defaultLang,H as inject,a9 as quasarKey,r as ref,aa as defineStore,ab as useRouter}from"./index.1d356e18.js";import{u as update,r as ref$1,d as dbRT,s as set$1,a as auth,g as getDatabase,b as get,c as child,e as remove}from"./firebase.79bf92f9.js";import{s as select,c as creator,S as Selection,r as root$1,a as array$5,d as dispatch,R as Rgb,b as rgbConvert,e as define,f as extend,C as Color,g as brighter,h as darker,i as constant$a,j as interpolateNumber,k as color,l as interpolateRgb,m as interpolateString,n as hue$1,o as hsl$2,p as nogamma,T as Timer,q as now,t as SCHEDULED,u as Transition,v as interrupt,w as timer,x as rgbBasis,y as rgb,z as identity$8,A as Transform,B as cubicInOut,D as cubicIn,E as cubicOut,F as basis$1,G as basisClosed$1,H as interpolateTransformCss,I as interpolateTransformSvg,J as rgbBasisClosed,K as matcher,L as namespace,M as namespaces,N as selection,O as selector,P as selectorAll,Q as styleValue,U as defaultView,V as timerFlush,W as timeout,X as transition,Y as transform$1}from"./transform.aea72fbe.js";import{a as axios}from"./index.2cf0d985.js";function _mergeNamespaces(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}function between(e,t,n){return n<=t?t:Math.min(n,Math.max(t,e))}function normalizeToInterval(e,t,n){if(n<=t)return t;const r=n-t+1;let i=t+(e-t)%r;return i<t&&(i=r+i),i===0?0:i}function pad$2(e,t=2,n="0"){if(e==null)return e;const r=""+e;return r.length>=t?r:new Array(t-r.length+1).join(n)+r}var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dist$1={exports:{}},request={},browser={exports:{}};(function(e,t){var n=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof r!="undefined")return r;throw new Error("unable to locate global object")},r=n();e.exports=t=r.fetch,r.fetch&&(t.default=r.fetch.bind(r)),t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response})(browser,browser.exports);var errors={};Object.defineProperty(errors,"__esModule",{value:!0});errors.citationError=errors.pdfError=errors.fcError=errors.eventsError=errors.mediaError=errors.relatedError=errors.introError=errors.preloadError=errors.infoboxError=errors.coordinatesError=errors.geoSearchError=errors.linksError=errors.categoriesError=errors.contentError=errors.htmlError=errors.imageError=errors.summaryError=errors.pageError=errors.autocompletionsError=errors.searchError=errors.wikiError=void 0;class wikiError extends Error{constructor(t,n){super(t),this.name="wikiError",this.code=n}}errors.wikiError=wikiError;class searchError extends wikiError{constructor(t){super(t),this.name="searchError"}}errors.searchError=searchError;class autocompletionsError extends wikiError{constructor(t){super(t),this.name="autocompletionsError"}}errors.autocompletionsError=autocompletionsError;class pageError extends wikiError{constructor(t){super(t),this.name="pageError"}}errors.pageError=pageError;class summaryError extends wikiError{constructor(t){super(t),this.name="summaryError"}}errors.summaryError=summaryError;class imageError extends wikiError{constructor(t){super(t),this.name="imageError"}}errors.imageError=imageError;class htmlError extends wikiError{constructor(t){super(t),this.name="htmlError"}}errors.htmlError=htmlError;class contentError extends wikiError{constructor(t){super(t),this.name="contentError"}}errors.contentError=contentError;class categoriesError extends wikiError{constructor(t){super(t),this.name="categoriesError"}}errors.categoriesError=categoriesError;class linksError extends wikiError{constructor(t){super(t),this.name="linksError"}}errors.linksError=linksError;class geoSearchError extends wikiError{constructor(t){super(t),this.name="geoSearchError"}}errors.geoSearchError=geoSearchError;class coordinatesError extends wikiError{constructor(t){super(t),this.name="coordinatesError"}}errors.coordinatesError=coordinatesError;class infoboxError extends wikiError{constructor(t){super(t),this.name="infoboxError"}}errors.infoboxError=infoboxError;class preloadError extends wikiError{constructor(t){super(t),this.name="preloadError"}}errors.preloadError=preloadError;class introError extends wikiError{constructor(t){super(t),this.name="introError"}}errors.introError=introError;class relatedError extends wikiError{constructor(t){super(t),this.name="relatedError"}}errors.relatedError=relatedError;class mediaError extends wikiError{constructor(t){super(t),this.name="mediaError"}}errors.mediaError=mediaError;class eventsError extends wikiError{constructor(t){super(t),this.name="eventsError"}}errors.eventsError=eventsError;class fcError extends wikiError{constructor(t){super(t),this.name="featuredContentError"}}errors.fcError=fcError;class pdfError extends wikiError{constructor(t){super(t),this.name="pdfError"}}errors.pdfError=pdfError;class citationError extends wikiError{constructor(t){super(t),this.name="citationError"}}errors.citationError=citationError;Object.defineProperty(request,"__esModule",{value:!0});request.setAPIUrl=request.returnRestUrl=request.makeRestRequest=void 0;const node_fetch_1=browser.exports,errors_1$1=errors;let API_URL="https://en.wikipedia.org/w/api.php?",REST_API_URL="https://en.wikipedia.org/api/rest_v1/";const USER_AGENT="wikipedia (https://github.com/dopecodez/Wikipedia/)";async function makeRequest(e,t=!0){try{const n={...e};n.format="json",t&&(n.redirects=""),e.action||(n.action="query"),n.origin="*";const r={headers:{"Api-User-Agent":USER_AGENT}};let i="";return Object.keys(n).forEach(f=>{i+=`${f}=${n[f]}&`}),await(await(0,node_fetch_1.default)(encodeURI(API_URL+i),r)).json()}catch(n){throw new errors_1$1.wikiError(n)}}async function makeRestRequest(e,t=!0){try{t||(e+="?redirect=false");const n={headers:{"Api-User-Agent":USER_AGENT}};let i=await(await(0,node_fetch_1.default)(encodeURI(REST_API_URL+e),n)).text();try{i=JSON.parse(i)}finally{return i}}catch(n){throw new errors_1$1.wikiError(n)}}request.makeRestRequest=makeRestRequest;function returnRestUrl(e){return encodeURI(REST_API_URL+e)}request.returnRestUrl=returnRestUrl;function setAPIUrl(e){return API_URL="https://"+e.toLowerCase()+".wikipedia.org/w/api.php?",REST_API_URL="https://"+e.toLowerCase()+".wikipedia.org/api/rest_v1/",API_URL}request.setAPIUrl=setAPIUrl;request.default=makeRequest;var page={},utils$1={},messages={};Object.defineProperty(messages,"__esModule",{value:!0});messages.MSGS=void 0;messages.MSGS={PAGE_NOT_SUGGEST:"No page with given title suggested : ",PAGE_NOT_EXIST:"No page with given title exists : ",INFOBOX_NOT_EXIST:"Info cannot be parsed for given page"};Object.defineProperty(utils$1,"__esModule",{value:!0});utils$1.getCurrentDay=utils$1.getCurrentMonth=utils$1.getCurrentYear=utils$1.setPageId=utils$1.setPageIdOrTitleParam=utils$1.setTitleForPage=utils$1.isString=void 0;const _1=dist$1.exports,errors_1=errors,messages_1=messages;function isString$1(e){return isNaN(e)}utils$1.isString=isString$1;async function setTitleForPage(e){{const t=await _1.default.search(e,{limit:1,suggestion:!0});if(!t.suggestion&&t.results.length==0)throw new errors_1.pageError(`${messages_1.MSGS.PAGE_NOT_SUGGEST}${e}`);return e=t.suggestion||e,e}}utils$1.setTitleForPage=setTitleForPage;function setPageIdOrTitleParam(e,t){return isString$1(t)?e.titles=t:e.pageids=t,e}utils$1.setPageIdOrTitleParam=setPageIdOrTitleParam;function setPageId(e,t){let n;return e.pageIds?n=e.pageIds:n=Object.keys(t.query.pages)[0],n}utils$1.setPageId=setPageId;function getCurrentYear(){return new Date().getFullYear()}utils$1.getCurrentYear=getCurrentYear;function getCurrentMonth(){return new Date().getMonth()+1}utils$1.getCurrentMonth=getCurrentMonth;function getCurrentDay(){return new Date().getDate()}utils$1.getCurrentDay=getCurrentDay;function preserveCamelCase(e){let t=!1,n=!1,r=!1;for(let i=0;i<e.length;i++){const o=e[i];t&&/[a-zA-Z]/.test(o)&&o.toUpperCase()===o?(e=e.substr(0,i)+"-"+e.substr(i),t=!1,r=n,n=!0,i++):n&&r&&/[a-zA-Z]/.test(o)&&o.toLowerCase()===o?(e=e.substr(0,i-1)+"-"+e.substr(i-1),r=n,n=!1,t=!0):(t=o.toLowerCase()===o,r=n,n=o.toUpperCase()===o)}return e}var camelcase=function(e){return arguments.length>1?e=Array.from(arguments).map(n=>n.trim()).filter(n=>n.length).join("-"):e=e.trim(),e.length===0?"":e.length===1?e.toLowerCase():/^[a-z0-9]+$/.test(e)?e:(e!==e.toLowerCase()&&(e=preserveCamelCase(e)),e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(n,r)=>r.toUpperCase()))};function _interopDefault(e){return e&&typeof e=="object"&&"default"in e?e.default:e}function trimWrappers(e){return e.replace(/\[\[/g,"").replace(/\]\]/g,"").replace(/\{\{/g,"").replace(/\}\}/g,"").trim()}function trimOr(e){var t=e.indexOf("|");return t!==-1?e.substring(0,t):e}function getValue(e,t){if(!e)return null;var n=e.trim().replace(/File:/,"").replace(/\{\{\d+\}\}/g,"").replace(extraPropertyPattern,"").replace(endingPattern,"");if(n==="y"||n==="yes")return!0;if(t=="birthPlace")return e.trim();var r=n.match(linksPattern);return r?r[0].split(linkSeparatorPattern).filter(function(i){return i}):trimOr(trimWrappers(n))}function dataType(e){var t=e.globalPattern,n=e.parsePattern,r=e.parse,i=e.variable,o=e.name;return function(l){var f=l.match(t);if(!f){var d;return d={},defineProperty(d,o,[]),defineProperty(d,"sourceAfter",l),d}var h=f.map(function(p){return r(p.match(n))}),g=f.reduce(function(p,b,v){return h[v]===DO_NOT_REPLACE?p:p.replace(b,"$"+i+"_"+v)},l);return{data:defineProperty({},o,h),sourceAfter:g}}}function byDataHandler(e,t){var n=e.source,r=e.context,i=t(n),o=i.data,l=i.sourceAfter;return{context:Object.assign({},r,o),source:l}}function extractData(e){return dataTypes$1.map(function(t){return t.handler}).reduce(byDataHandler,{context:{},source:e})}function findPropertyList(e){var t=e.match(keyValueGlobalPattern);return t?t.map(function(n){var r=keyValuePattern.exec(n);if(!r)return null;var i=slicedToArray(r,3),o=i[1],l=i[2],f=camelCase(o.trim());return{key:f,value:getValue(l,f)}}).filter(function(n){return n}):[]}function fillVariable(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.simplifyDataValues;if(typeof e!="string")return console.log("Warning: Something went wrong. Could not fill variables in: ("+(e===void 0?"undefined":_typeof(e))+") "+JSON.stringify(e)),{};var i=dataTypes$1.find(function(g){return e.match(g.pattern)});if(i){var o=i.pattern.exec(e),l=slicedToArray(o,2),f=l[0],d=l[1],h=t[i.name][parseInt(d,10)];return r||typeof h!="string"?h:e.replace(f,h)}return e}function fillVariables(e,t,n){if(e===void 0||e instanceof Date||typeof e=="number")return e;if(Array.isArray(e))return e.map(function(i){return fillVariables(i,t,n)});if((e===void 0?"undefined":_typeof(e))==="object")return Object.keys(e).reduce(function(i,o){return Object.assign(i,defineProperty({},o,fillVariables(e[o],t,n)))},{});var r=fillVariable(e,t,n);return r===e?e:fillVariables(r,t,n)}function handleSmallData(e,t,n){var r=n.simplifyDataValues;if(typeof e=="string"&&e.match(smallDataType.pattern)){var i=e.replace(smallDataType.pattern,"").replace(/,/,"").trim(),o=smallDataType.pattern.exec(e),l=slicedToArray(o,2),f=l[1],d=t[smallDataType.name][parseInt(f,10)],h={primary:getVariableValue(i,t,{simplifyDataValues:r}),secondary:getVariableValue(d,t,{simplifyDataValues:r})};return r?h.primary:h}return null}function getVariableValue(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.simplifyDataValues,i=handleSmallData(e,t,{simplifyDataValues:r});return i||fillVariables(e,t,{simplifyDataValues:r})}function reduceVariable(e,t,n,r){if(t===null)return null;if(typeof t=="boolean")return t;if(Array.isArray(t))return t.map(function(f){return getVariableValue(f,n,r)});if(e.match(/areaTotal/)||e.match(/population/)){var i=numberParse(t);if(i===!1&&(i=parseFloat(t,10)),!isNaN(i))return i}if(e.match(/date/i)){var o=+new Date(t);if(!isNaN(o))return new Date(t)}var l=getVariableValue(t,n,r);return Array.isArray(l)?l.map(function(f){return getVariableValue(f,n,r)}):l}function byVariableReduction(e,t){return function(n,r){var i=r.key,o=r.value,l=reduceVariable(i,o,e,t);return l===""||l===null?n:Object.assign({},n,defineProperty({},i,l))}}function extractProperties(e){var t=e.source,n=e.context,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.simplifyDataValues,o=i===void 0||i;return findPropertyList(t).reduce(byVariableReduction(n,{simplifyDataValues:o}),{})}function transformProperties(e){return Object.keys(e).reduce(function(t,n){var r=e[n],i=n.match(blankNamePattern);if(i){var o=i[1]||"",l=e["blank"+o+"NameSec2"],f=e["blank"+o+"InfoSec2"];return typeof l!="string"?t:Object.assign(t,defineProperty({},camelCase(l),f))}return n.match(blankInfoPattern)?t:Object.assign(t,defineProperty({},n,r))},{})}function findOuterIndex(e){for(var t=[],n=0;n<e.length-1;n++){var r=e.substr(n,2);if(r!=="{{"){if(r==="}}"){if(t.pop(),t.length===0)return n+2;n++}}else t.push(n),n++}}function parse(e){var t=e.match(infoBoxStartPattern);if(!t)return{data:e,sourceLeft:null};var n=t.index,r=e.substring(n),i=findOuterIndex(r);if(!i)return{data:e,sourceLeft:null};var o=r.substring(0,i),l=e.substring(i);return{data:o,sourceLeft:l.match(infoBoxStartPattern)?l:null}}function extractInfoboxes(e){for(var t=parse(e),n=[t.data];t.sourceLeft;)t=parse(t.sourceLeft),n.push(t.data);return n}function cleanSource(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.removeSmall,r=n!==void 0&&n,i=t.removeReferences;return(i===void 0||i)&&(e=e.replace(/<ref(\s\w+=[^>]+)?>.*<\/ref>/g,"").replace(/<ref(\s\w+=[^>]+)?\s?\/>/g,"")),r&&(e=e.replace(/<small>.*<\/small>/g,"")),e.replace(/'''?/g,"").replace(/\|display=inline/g,"").replace(/<br\s?\/?>/g,",").replace(/&minus;/g,"-").replace(/<sup>/g,"^").replace(/\{\{sfn\|([^\}\}]+)\}\}/g,"").replace(/\{\{efn\|([^\}\}]+)\}\}/g,"").replace(/−/g,"-").replace(/<\/sup>/g,"").replace(/\{\{\s*nowrap\s*\|([^\n\}]+)\}\}/gi,"$1").replace(/<!--([\s\S]*?)-->/g,"").replace(/&nbsp;/g," ").replace("|''See list''","")}function transformRowSpan(e){return e.map(transformCells).reduce(function(t,n,r){for(var i=r===0?0:1,o=0;o<n.length;o++)t[o+i]||(t[o+i]={}),n[o]&&(t[o+i][n[o]]=1);return t},[]).map(function(t){return Object.keys(t).join(",")}).join(" || ")}function clean(e){return e.substring(2,e.length-2).replace(linkPattern$1,function(t,n){return n.split("|")[0]}).replace(/'''?/g,"")}function parseRow(e){var t=e[0].match(/BS(\d)/),n=e[0].substring(2),r=1,i=[],o=1;for(t&&(r=t[1],n=e[0].substring(3));o<=r;o++)i.push(e[o]);return{type:n,margin:e[o++],text1:e[o++],text2:e[o++],comment:e[o++],icons:i}}function getMatches(e,t){for(var n=void 0,r=[];(n=t.exec(e))!==null;)r.push({value:n[1]&&n[1].trim(),start:n.index,end:n.index+n[0].length});return r}function parseTableData(e){var t=e.match(rowPattern$1);return t?t.map(function(n){var r=n.match(rowPatternSingle);return slicedToArray(r,2)[1].trim().split("|").slice(1)}):[]}function getTables(e){var t=getMatches(e,tableStartPattern$1),n=getMatches(e,tableEndPattern$1);return t.map(function(r,i){var o=n[i];if(!o)throw new Error("[Table Parsing] Failed to pair table");return{rows:parseTableData(e.substring(r.end,o.start).trim().replace(/'''/g,"")),start:r.start,end:o.end}})}function last(e){return e.length?e[e.length-1]:void 0}function parseInfobox(e,t){var n=extractInfoboxes(e).map(function(i){return transformProperties(extractProperties(extractData(cleanSource(i,t)),t))});if(!n.length)return{};var r={general:n.shift()};return n.forEach(function(i){var o=i.type;o?r[camelCase(o)]=i:Object.assign(r,{general:Object.assign({},r.general,i)})}),r.tables=parseTables(e),r.bsTables=parseBsTables(e),r.lists=parseLists(e),r}var camelCase=_interopDefault(camelcase),_typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},defineProperty=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},slicedToArray=function(){function e(t,n){var r=[],i=!0,o=!1,l=void 0;try{for(var f,d=t[Symbol.iterator]();!(i=(f=d.next()).done)&&(r.push(f.value),!n||r.length!==n);i=!0);}catch(h){o=!0,l=h}finally{try{!i&&d.return&&d.return()}finally{if(o)throw l}}return r}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},smallGlobalPattern=/\{\{small\|([^\}\}]+)\}\}/g,smallPattern=/small\|([^\}\}]+)\}\}/,small={globalPattern:smallGlobalPattern,parsePattern:smallPattern,parse:function(e){return slicedToArray(e,2)[1]},variable:"SMALL",name:"smalls"},flagGlobalPattern=/\{\{flag\|([^\}\}]+)\}\}/g,flagPattern=/flag\|([^\}\}]+)\}\}/,flag={globalPattern:flagGlobalPattern,parsePattern:flagPattern,parse:function(e){return slicedToArray(e,2)[1]},variable:"FLAG",name:"flags"},coordsGlobalPattern=/\{\{coord\|([^\}\}]+)\}\}/g,coordsPattern=/coord\|([^\}\}]+)\}\}/,coords={globalPattern:coordsGlobalPattern,parsePattern:coordsPattern,parse:function(e){return slicedToArray(e,2)[1]},variable:"COORD",name:"coords"},globalPattern=/\[\[([^\]\|]+)\|?([^\]]+)?\]\]/g,pattern=/\[\[([^\]\|]+)\|?([^\]]+)?\]\]/,instances={globalPattern,parsePattern:pattern,parse:function(e){var t=slicedToArray(e,3),n=t[1],r=t[2];return n||r},variable:"INSTANCE",name:"instances"},extraPropertyPattern=/\n?\s?\|\s?\w+$/,endingPattern=/\n\}\}$/,linksPattern=/((\$\w+_\d+)\s*,?\s*){2,}/g,linkSeparatorPattern=/[,\s?]/g,listItemPrefixPattern=/^\|\s?/,unbulletedListGlobalPattern=/\{\{(?:unbulleted list|ubl|ubt|ublist|unbullet)\s?\|([^\}\}]+)\}\}/gi,unbulletedListItemPattern=/\|\s*([^|}]+)/g,unbulletedLists={globalPattern:unbulletedListGlobalPattern,parsePattern:unbulletedListItemPattern,parse:function(e){return e?e.map(function(t){return t.replace(listItemPrefixPattern,"").trim()}).filter(function(t){return t&&t.length}):[]},variable:"UNBULLETED_LIST",name:"unbulletedLists"},listItemPrefixPattern$1=/^\*\s*/,plainListGlobalPattern=/\n(\*\s*[^*|]+)+/g,plainListItemPattern=/\*\s*([^*|]+)/g,unmarkedLists={globalPattern:plainListGlobalPattern,parsePattern:plainListItemPattern,parse:function(e){return e?e.map(function(t){return t.replace(listItemPrefixPattern$1,"").trim()}).filter(function(t){return t&&t.length}):[]},variable:"UNMARKED_LIST",name:"unmarkedLists"},listItemPrefixPattern$2=/^\*\s?/,plainListGlobalPattern$1=/\{\{f?p?P?l?a?i?n?t?\s?list\s?\|([^\}\}]+)\}\}/g,plainListItemPattern$1=/\*\s*([^*}]+)/g,plainLists={globalPattern:plainListGlobalPattern$1,parsePattern:plainListItemPattern$1,parse:function(e){return e?e.map(function(t){return t.replace(listItemPrefixPattern$2,"").trim()}).filter(function(t){return t&&t.length}):[]},variable:"PLAIN_LIST",name:"plainLists"},marriageGlobalPattern=/\{\{Marriage\|([^\}\}]+)\}\}/gi,marriagePattern=/Marriage\|([^|]+)\|(.*)\}\}/i,marriages={globalPattern:marriageGlobalPattern,parsePattern:marriagePattern,parse:function(e){var t=slicedToArray(e,3);return{who:t[1],married:t[2]}},variable:"MARRIAGE",name:"marriages"},nbayGlobalPattern=/\{\{nbay\|([^\}\}]+)\}\}/gi,nbayPattern=/nbay\|([^|]+)\|(.*)\}\}/i,nbay={globalPattern:nbayGlobalPattern,parsePattern:nbayPattern,parse:function(e){var t=slicedToArray(e,3),n=t[1];return t[2],n},variable:"nbay",name:"nbay"},otherGlobalPattern=/\{\{([^|\n]+)\|([^|\n]+)\|?([^\}\n]+)?\}\}/g,otherPattern=/\{\{([^|\n]+)\|([^|\n]+)\|?([^\}\n]+)?\}\}/,other={globalPattern:otherGlobalPattern,parsePattern:otherPattern,parse:function(e){var t=slicedToArray(e,4),n=t[1];return t[2],t[3],n},variable:"OTHER",name:"others"},hlistGlobalPattern=/\{\{hlist\|([^\}\}]+)\}\}/gi,hlistPattern=/hlist\|(.*)\n?\}\}/i,hlist={globalPattern:hlistGlobalPattern,parsePattern:hlistPattern,parse:function(e){return slicedToArray(e,2)[1].split("|")},variable:"HLIST",name:"hlists"},birthDateGlobalPattern=/\{\{birth\sdate([^\}\}]+)\}\}/gi,birthDatePattern=/(\d+)\|(\d+)\|(\d+)/,millisInYear=31536e6,birthDates={globalPattern:birthDateGlobalPattern,parsePattern:birthDatePattern,parse:function(e){var t=slicedToArray(e,4),n=t[1],r=t[2],i=t[3],o=new Date(n,r-1,i);return{date:o,age:Math.floor((Date.now()-+o)/millisInYear)}},variable:"BIRTH_DATE",name:"birthDates"},DO_NOT_REPLACE=Symbol("DO NOT REPLACE"),labeledDateGlobalPattern=/\{\{([^\n\}\}]+)\}\}/g,labeledDatePattern=/(.*)/,labeledDates={globalPattern:labeledDateGlobalPattern,parsePattern:labeledDatePattern,parse:function(e){var t=e[0].indexOf("|");if(t>-1){var n=e[0].substring(t+1).slice(0,-2),r=new Date(n+" GMT");if(!isNaN(r.getTime()))return{date:r};if(r=new Date(n.split("|").join("-")+" GMT"),!isNaN(r.getTime()))return{date:r}}return DO_NOT_REPLACE},variable:"LABELED_DATE",name:"labeledDates"},deathDateGlobalPattern=/\{\{death\sdate\sand\sage([^\}\}]+)\}\}/gi,deathDatePattern=/(\d+)\|(\d+)\|(\d+)\|(\d+)\|?(\d+)?\|?(\d+)?/,millisInYear$1=31536e6,deathDates={globalPattern:deathDateGlobalPattern,parsePattern:deathDatePattern,parse:function(e){var t=slicedToArray(e,7),n=t[1],r=t[2],i=t[3],o=t[4],l=t[5],f=l===void 0?0:l,d=t[6],h=d===void 0?0:d,g=new Date(n,r-1,i),p=new Date(o,f-1,h);return{date:g,age:Math.floor((Number(g)-Number(p))/millisInYear$1)}},variable:"DEATH_DATE",name:"deathDates"},URLGlobalPattern=/\{\{URL\|([^\}\}]+)\}\}/g,URLPattern=/URL\|([^\}\}]+)\}\}/,url={globalPattern:URLGlobalPattern,parsePattern:URLPattern,parse:function(e){return slicedToArray(e,2)[1]},variable:"URL",name:"urls"},websiteGlobalPattern=/\[(https?):\/\/((?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6})\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)\s+([\w\s]+)\]/g,websitePattern=/\[(https?):\/\/((?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6})\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)\s+([\w\s]+)\]/,website={globalPattern:websiteGlobalPattern,parsePattern:websitePattern,parse:function(e){var t=slicedToArray(e,5),n=t[1],r=t[2],i=t[3];return{protocol:n,hostname:r,path:i,title:t[4],url:n+"://"+r+i}},variable:"WEBSITE",name:"websites"},globalPattern$1=/\{\{Extra[^}}]+\}\}/gi,parsePattern=/\|\s?(\w+)\s+=\s+(.+)/g,propPattern=/\|\s?(\w+)\s+=\s+(.+)/,extra={globalPattern:globalPattern$1,parsePattern,parse:function(e){return e.reduce(function(t,n){var r=n.match(propPattern),i=slicedToArray(r,3),o=i[1],l=i[2];return t[o]=l,t},{})},variable:"EXTRA",name:"extra"},convertGlobalPattern=/\{\{convert\|([\d\.]+)\|(\w+)/g,convertPattern=/\{\{convert\|([\d\.]+)\|(\w+)/,convert={globalPattern:convertGlobalPattern,parsePattern:convertPattern,parse:function(e){var t=slicedToArray(e,3);return t[1]+" "+t[2]},variable:"CONVERT",name:"converts"},filmDatesPattern=/\{\{film\sdate([^\}\}]+)\}\}/gi,filmDatePatternGlobal=/(\d+)\|?(\d+)\|?(\d+)\|?([^\|\}]*)\|?(ref\d+=([^\|\}]*))?/g,filmDatePattern=/(\d+)\|?(\d+)\|?(\d+)\|?([^\|\}]*)\|?(ref\d+=([^\|\}]*))?/,filmDates={globalPattern:filmDatesPattern,parsePattern:filmDatePatternGlobal,parse:function(e){return e.map(function(t){var n=t.match(filmDatePattern),r=slicedToArray(n,7),i=(r[0],r[1]),o=r[2],l=r[3],f=r[4],d=(r[5],r[6]);return{date:new Date(i,o&&o-1,l),location:f,ref:d}})},variable:"FILM_DATES",name:"filmDates"},otherGlobalPattern$1=/<ref(\s\w+=[^>]+)?>(.*)<\/ref>/g,otherPattern$1=/<ref(\s\w+=[^>]+)?>(.*)<\/ref>/,attributeGlobalPattern=/(\w+)=(["\w]+)/g,attributePattern=/(\w+)=(["\w]+)/,ref1={globalPattern:otherGlobalPattern$1,parsePattern:otherPattern$1,parse:function(e){var t=slicedToArray(e,3),n=(t[0],t[1]),r=t[2];return{attributes:((n||"").match(attributeGlobalPattern)||[]).reduce(function(i,o){if(o){var l=o.match(attributePattern),f=slicedToArray(l,3),d=(f[0],f[1]),h=f[2];i[d]=h.replace(/"/g,"")}return i},{}),contents:r}},variable:"REF",name:"refs"},otherGlobalPattern$2=/<ref(\s\w+=[^>]+)?\/>/g,otherPattern$2=/<ref(\s\w+=[^>]+)?\/>/,attributeGlobalPattern$1=/(\w+)=(["\w]+)/g,attributePattern$1=/(\w+)=(["\w]+)/,ref2={globalPattern:otherGlobalPattern$2,parsePattern:otherPattern$2,parse:function(e){return{attributes:e[1].match(attributeGlobalPattern$1).reduce(function(t,n){var r=n.match(attributePattern$1),i=slicedToArray(r,3),o=(i[0],i[1]),l=i[2];return t[o]=l.replace(/"/g,""),t},{})}},variable:"REF",name:"refs"},globalPattern$2=/\{\{formatnum:\d+\}\}/gi,parsePattern$1=/\{\{formatnum:(\d+)\}\}/,formatNum={globalPattern:globalPattern$2,parsePattern:parsePattern$1,parse:function(e){var t=slicedToArray(e,2),n=t[1];return parseFloat(n)},variable:"FORMAT_NUM",name:"formatNum"},dataTypes=[instances,ref1,ref2,small,formatNum,flag,coords,marriages,birthDates,labeledDates,deathDates,unbulletedLists,website,hlist,url,convert,nbay,filmDates,other,extra,plainLists,unmarkedLists],dataTypes$1=dataTypes.map(function(e){return{handler:dataType(e),name:e.name,pattern:new RegExp("\\$"+e.variable+"_(\\d+)")}}),keyValueGlobalPattern=/\|\s*([-'\u0400-\u04FF\w\s]+)\s*=\s*([^|]+)?/g,keyValuePattern=/\|\s*([-'\u0400-\u04FF\w\s]+)\s*=\s*([^|]+)?/,numberParse=function(e){return typeof e=="string"&&(e=e.trim().replace(/ /g,""),e.match(/,/)&&e.match(/\./)?e.indexOf(",")<e.indexOf(".")?parseEnglish(e):parseSpanish(e):e.match(/,/)&&!e.match(/\./)?e.match(/,/g).length>1||e.match(/,[0-9]{3}($|^[0-9])/)?parseEnglish(e):parseSpanish(e):!e.match(/,/)&&e.match(/\./)?e.match(/\./g).length>1||e.match(/\.[0-9]{3}($|^[0-9])/)?parseSpanish(e):parseEnglish(e):(+e).toString()===e&&+e)},parseEnglish=function(e){return+e.replace(/,/g,"")},parseSpanish=function(e){return+e.replace(/\./g,"").replace(/,/g,".")},smallDataType=dataTypes$1.find(function(e){return e.name==="smalls"}),blankNamePattern=/blank(\d+)?NameSec2/,blankInfoPattern=/blank(\d+)?InfoSec2/,infoBoxStartPattern=/{{\w*box/,tableStartPattern=/{\|(.*)\n?/,tableEndPattern=/\n\|}/,headersPattern=/!\s?(.*)/g,rowPattern=/\|-/,cellSeparatorPattern=/(?:\n\|)|(?:\|\|)/,linkPattern=/\[\[([^\]]+)\]\]/g,linkNamePattern=/^.*\|/,inlineHeaderPattern="!!",actionPattern=/{{anchor\|(.*)}}/g,rowSpanCountPattern=/rowspan="(\d+)"/,stripLinks=function(e){return e.replace(linkPattern,function(t,n){return n.replace(linkNamePattern,"").trim()||n})},removeActions=function(e){return e.replace(actionPattern,"")},transformCell=function(e){return stripLinks(removeActions(e||"")).replace(rowSpanCountPattern,"").replace(linkNamePattern,"").trim()},transformCells=function(e){return e.split(cellSeparatorPattern).map(transformCell)},findIndex=function(e,t){var n=e.match(t);return n?n.index:-1},findTableStart=function(e){var t=e.match(tableStartPattern);return t?t.index+t[0].length:-1},findTableEnd=function(e){return findIndex(e,tableEndPattern)},getHeaders=function(e){for(var t=[],n=void 0;n=headersPattern.exec(e);)t.push.apply(t,toConsumableArray(n[1].split(inlineHeaderPattern).map(transformCell)));return t},getRows=function(e){var t=e.split(rowPattern).map(function(v){return v.replace(/^.*\n+?\|/,"").trim()}).filter(function(v){return v}),n=[],r=0,i=0,o=[],l=!0,f=!1,d=void 0;try{for(var h,g=t[Symbol.iterator]();!(l=(h=g.next()).done);l=!0){var p=h.value,b=p.match(rowSpanCountPattern);b&&(r=0,i=parseInt(b[1]),o=[]),r<i?(o.push(p),++r===i&&n.push(transformRowSpan(o))):n.push(p)}}catch(v){f=!0,d=v}finally{try{!l&&g.return&&g.return()}finally{if(f)throw d}}return n},getNextTable=function(e,t,n){var r=e,i=findTableStart(r);if(i===-1)return null;r=r.substring(i);var o=findTableEnd(r);if(o===-1)return null;r=r.substring(0,o);var l=getRows(r);if(!l.length)return null;var f=getHeaders(l[0]);return f.length?{data:l.slice(1).map(transformCells).map(function(d){return f.reduce(function(h,g,p){return h[camelCase(fillVariable(g,t,n))]=fillVariables(d[p],t,n),h},{})}),end:i+o}:null},parseTables=function(e,t){for(var n=cleanSource(e,t),r=extractData(n),i=[],o=r.source,l=null;l=getNextTable(o,r.context,t);){if(!l)return i;i.push(l.data),o=o.substring(l.end)}return i},linkPattern$1=/\[\[([^\]]+)\]\]/g,kmPattern=/{{BSkm\|([\dx]+,[\dx]+)\|([\dx]+,[\dx]+)}}/g,parseBsTables=function(e){var t=e.replace(kmPattern,"$1/$2").match(/{{BS([^}}]+)}}/g);return t?t.map(function(n){return clean(n).split("|")}).map(parseRow).filter(function(n){return n.type[0]!=="-"}):null},headingPattern=/[^=]==\s?([\w\s]+)\s?==/g,subheadingPattern=/===([\w\s]+)===/g,tableStartPattern$1=/{{list.+start.*}}/gi,tableEndPattern$1=/{{list.+end.*}}/gi,rowPattern$1=/{{(.*)}}/g,rowPatternSingle=/{{(.*)}}/,parseLists=function(e){var t=getMatches(e,headingPattern),n=getMatches(e,subheadingPattern),r=getTables(e);return r.forEach(function(i){var o=t.filter(function(f){return f.end<i.start}).map(function(f){return f.value});i.heading=last(o);var l=n.filter(function(f){return f.end<i.start}).map(function(f){return f.value});i.subheading=last(l),delete i.start,delete i.end}),r},bundle_min=parseInfobox;(function(exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.citation=exports.pdf=exports.mobileHtml=exports.media=exports.related=exports.summary=exports.rawInfo=exports.tables=exports.infobox=exports.langLinks=exports.coordinates=exports.references=exports.links=exports.categories=exports.content=exports.html=exports.intro=exports.images=exports.Page=void 0;const errors_1=errors,request_1=request,utils_1=utils$1,messages_1=messages,infoboxParser=bundle_min;class Page{constructor(e){this.intro=async t=>{try{if(!this._intro){const n=await(0,exports.intro)(this.pageid.toString(),t==null?void 0:t.redirect);this._intro=n}return this._intro}catch(n){throw new errors_1.introError(n)}},this.images=async t=>{try{if(!this._images){const n=await(0,exports.images)(this.pageid.toString(),t);this._images=n}return this._images}catch(n){throw new errors_1.imageError(n)}},this.summary=async t=>{try{if(!this._summary){const n=await(0,exports.summary)(this.title,t==null?void 0:t.redirect);this._summary=n}return this._summary}catch(n){throw new errors_1.summaryError(n)}},this.html=async t=>{try{if(!this._html){const n=await(0,exports.html)(this.pageid.toString(),t==null?void 0:t.redirect);this._html=n}return this._html}catch(n){throw new errors_1.htmlError(n)}},this.content=async t=>{try{if(!this._content){const n=await(0,exports.content)(this.pageid.toString(),t==null?void 0:t.redirect);this.parentid=n.ids.parentId,this.revid=n.ids.revId,this._content=n.result}return this._content}catch(n){throw new errors_1.contentError(n)}},this.categories=async t=>{try{if(!this._categories){const n=await(0,exports.categories)(this.pageid.toString(),t);this._categories=n}return this._categories}catch(n){throw new errors_1.categoriesError(n)}},this.links=async t=>{try{if(!this._links){const n=await(0,exports.links)(this.pageid.toString(),t);this._links=n}return this._links}catch(n){throw new errors_1.linksError(n)}},this.references=async t=>{try{if(!this._references){const n=await(0,exports.references)(this.pageid.toString(),t);this._references=n}return this._references}catch(n){throw new errors_1.linksError(n)}},this.coordinates=async t=>{try{if(!this._coordinates){const n=await(0,exports.coordinates)(this.pageid.toString(),t==null?void 0:t.redirect);this._coordinates=n}return this._coordinates}catch(n){throw new errors_1.coordinatesError(n)}},this.langLinks=async t=>{try{if(!this._langLinks){const n=await(0,exports.langLinks)(this.pageid.toString(),t);this._langLinks=n}return this._langLinks}catch(n){throw new errors_1.linksError(n)}},this.infobox=async t=>{try{if(!this._infobox){const n=await(0,exports.infobox)(this.pageid.toString(),t==null?void 0:t.redirect);this._infobox=n}return this._infobox}catch(n){throw new errors_1.infoboxError(n)}},this.tables=async t=>{try{if(!this._tables){const n=await(0,exports.tables)(this.pageid.toString(),t==null?void 0:t.redirect);this._tables=n}return this._tables}catch(n){throw new errors_1.infoboxError(n)}},this.related=async t=>{try{if(!this._related){const n=await(0,exports.related)(this.title,t==null?void 0:t.redirect);this._related=n}return this._related}catch(n){throw new errors_1.relatedError(n)}},this.media=async t=>{try{if(!this._media){const n=await(0,exports.media)(this.title,t==null?void 0:t.redirect);this._media=n}return this._media}catch(n){throw new errors_1.mediaError(n)}},this.mobileHtml=async t=>{try{if(!this._mobileHtml){const n=await(0,exports.mobileHtml)(this.title,t==null?void 0:t.redirect);this._mobileHtml=n}return this._mobileHtml}catch(n){throw new errors_1.htmlError(n)}},this.pdf=async t=>{try{return await(0,exports.pdf)(this.title,t)}catch(n){throw new errors_1.pdfError(n)}},this.pageid=e.pageid,this.ns=e.ns,this.title=e.title,this.contentmodel=e.contentmodel,this.pagelanguage=e.pagelanguage,this.pagelanguagedir=e.pagelanguagedir,this.touched=e.touched,this.lastrevid=e.lastrevid,this.length=e.length,this.fullurl=e.fullurl,this.editurl=e.editurl,this.canonicalurl=e.canonicalurl}async runMethod(functionName){try{const result=await eval(`this.${functionName}()`);return result}catch(e){throw new errors_1.preloadError(e)}}}exports.Page=Page;const images=async(e,t)=>{try{let n={generator:"images",gimlimit:(t==null?void 0:t.limit)||5,prop:"imageinfo",iiprop:"url"};n=(0,utils_1.setPageIdOrTitleParam)(n,e);const r=await(0,request_1.default)(n,t==null?void 0:t.redirect),i=[],o=Object.keys(r.query.pages);for(const l of o){const f=r.query.pages[l];f.url=f.imageinfo[0].url,i.push(f)}return i}catch(n){throw new errors_1.imageError(n)}};exports.images=images;const intro=async(e,t=!0)=>{var n;try{let r={prop:"extracts",explaintext:"",exintro:""};r=(0,utils_1.setPageIdOrTitleParam)(r,e);const i=await(0,request_1.default)(r,t),o=(0,utils_1.setPageId)(r,i);return(n=i==null?void 0:i.query)===null||n===void 0?void 0:n.pages[o].extract}catch(r){throw new errors_1.introError(r)}};exports.intro=intro;const html=async(e,t=!0)=>{try{let n={prop:"revisions",rvprop:"content",rvlimit:1,rvparse:""};n=(0,utils_1.setPageIdOrTitleParam)(n,e);const r=await(0,request_1.default)(n,t),i=(0,utils_1.setPageId)(n,r);return r.query.pages[i].revisions[0]["*"]}catch(n){throw new errors_1.htmlError(n)}};exports.html=html;const content=async(e,t=!0)=>{try{let n={prop:"extracts|revisions",explaintext:"",rvprop:"ids"};n=(0,utils_1.setPageIdOrTitleParam)(n,e);const r=await(0,request_1.default)(n,t),i=(0,utils_1.setPageId)(n,r),o=r.query.pages[i].extract,l={revisionId:r.query.pages[i].revisions[0].revid,parentId:r.query.pages[i].revisions[0].parentid};return{result:o,ids:l}}catch(n){throw new errors_1.contentError(n)}};exports.content=content;const categories=async(e,t)=>{try{let n={prop:"categories",pllimit:t==null?void 0:t.limit};n=(0,utils_1.setPageIdOrTitleParam)(n,e);const r=await(0,request_1.default)(n,t==null?void 0:t.redirect),i=(0,utils_1.setPageId)(n,r);return r.query.pages[i].categories.map(o=>o.title)}catch(n){throw new errors_1.categoriesError(n)}};exports.categories=categories;const links=async(e,t)=>{try{let n={prop:"links",plnamespace:0,pllimit:(t==null?void 0:t.limit)||"max"};n=(0,utils_1.setPageIdOrTitleParam)(n,e);const r=await(0,request_1.default)(n,t==null?void 0:t.redirect),i=(0,utils_1.setPageId)(n,r);return r.query.pages[i].links.map(l=>l.title)}catch(n){throw new errors_1.linksError(n)}};exports.links=links;const references=async(e,t)=>{try{let n={prop:"extlinks",ellimit:(t==null?void 0:t.limit)||"max"};n=(0,utils_1.setPageIdOrTitleParam)(n,e);const r=await(0,request_1.default)(n,t==null?void 0:t.redirect),i=(0,utils_1.setPageId)(n,r);return r.query.pages[i].extlinks.map(l=>l["*"])}catch(n){throw new errors_1.linksError(n)}};exports.references=references;const coordinates=async(e,t=!0)=>{try{let n={prop:"coordinates"};n=(0,utils_1.setPageIdOrTitleParam)(n,e);const r=await(0,request_1.default)(n,t),i=(0,utils_1.setPageId)(n,r),o=r.query.pages[i].coordinates;return o?o[0]:null}catch(n){throw new errors_1.coordinatesError(n)}};exports.coordinates=coordinates;const langLinks=async(e,t)=>{try{let n={prop:"langlinks",lllimit:(t==null?void 0:t.limit)||"max",llprop:"url"};n=(0,utils_1.setPageIdOrTitleParam)(n,e);const r=await(0,request_1.default)(n,t==null?void 0:t.redirect),i=(0,utils_1.setPageId)(n,r);return r.query.pages[i].langlinks.map(l=>({lang:l.lang,title:l["*"],url:l.url}))}catch(n){throw new errors_1.linksError(n)}};exports.langLinks=langLinks;const infobox=async(e,t=!0)=>{try{const n={prop:"revisions",rvprop:"content",rvsection:0},r=await(0,exports.rawInfo)(e,n,t);return infoboxParser(r).general}catch(n){throw new errors_1.infoboxError(n)}};exports.infobox=infobox;const tables=async(e,t=!0)=>{try{const n={prop:"revisions",rvprop:"content"},r=await(0,exports.rawInfo)(e,n,t);return infoboxParser(r).tables}catch(n){throw new errors_1.infoboxError(n)}};exports.tables=tables;const rawInfo=async(e,t,n=!0)=>{var r;try{t=(0,utils_1.setPageIdOrTitleParam)(t,e);const i=await(0,request_1.default)(t,n);if(!(!((r=i.query)===null||r===void 0)&&r.pages))throw new errors_1.wikiError(messages_1.MSGS.INFOBOX_NOT_EXIST);const o=(0,utils_1.setPageId)(t,i),l=i.query.pages[o].revisions[0];return l?l["*"]:""}catch(i){throw new errors_1.infoboxError(i)}};exports.rawInfo=rawInfo;const summary=async(e,t=!0)=>{try{const n="page/summary/"+e.replace(" ","_");return await(0,request_1.makeRestRequest)(n,t)}catch(n){throw new errors_1.summaryError(n)}};exports.summary=summary;const related=async(e,t=!0)=>{try{const n="page/related/"+e.replace(" ","_");return await(0,request_1.makeRestRequest)(n,t)}catch(n){throw new errors_1.relatedError(n)}};exports.related=related;const media=async(e,t=!0)=>{try{const n="page/media-list/"+e.replace(" ","_");return await(0,request_1.makeRestRequest)(n,t)}catch(n){throw new errors_1.mediaError(n)}};exports.media=media;const mobileHtml=async(e,t=!0)=>{try{const n=`page/mobile-html/${e}`;return await(0,request_1.makeRestRequest)(n,t)}catch(n){throw new errors_1.htmlError(n)}};exports.mobileHtml=mobileHtml;const pdf=async(e,t)=>{try{let n=`page/pdf/${e}`;return t!=null&&t.format&&(n+=`/${t.format}`),t!=null&&t.type&&(n+=`/${t.type}`),(0,request_1.returnRestUrl)(n)}catch(n){throw new errors_1.pdfError(n)}};exports.pdf=pdf;const citation=async(e,t,n)=>{try{let r="data/citation";return r+=t?`/${t}`:"/mediawiki",r+=`/${e}`,n&&(r+=`/${n}`),await(0,request_1.makeRestRequest)(r)}catch(r){throw new errors_1.citationError(r)}};exports.citation=citation,exports.default=Page})(page);var resultTypes={};Object.defineProperty(resultTypes,"__esModule",{value:!0});var optionTypes={};Object.defineProperty(optionTypes,"__esModule",{value:!0});(function(e,t){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(g,p,b,v){v===void 0&&(v=b);var $=Object.getOwnPropertyDescriptor(p,b);(!$||("get"in $?!p.__esModule:$.writable||$.configurable))&&($={enumerable:!0,get:function(){return p[b]}}),Object.defineProperty(g,v,$)}:function(g,p,b,v){v===void 0&&(v=b),g[v]=p[b]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(g,p){for(var b in g)b!=="default"&&!Object.prototype.hasOwnProperty.call(p,b)&&n(p,g,b)};Object.defineProperty(t,"__esModule",{value:!0});const i=request,o=page,l=errors,f=messages,d=utils$1,h=async(g,p)=>h.page(g,p);h.search=async(g,p)=>{try{const b={list:"search",srprop:"",srlimit:(p==null?void 0:p.limit)||10,srsearch:g};p!=null&&p.suggestion&&(b.srinfo="suggestion");const v=await(0,i.default)(b);return{results:v.query.search,suggestion:v.query.searchinfo?v.query.searchinfo.suggestion:null}}catch(b){throw new l.searchError(b)}},h.page=async(g,p)=>{try{p!=null&&p.autoSuggest&&(g=await(0,d.setTitleForPage)(g));let b={prop:"info|pageprops",inprop:"url",ppprop:"disambiguation"};b=(0,d.setPageIdOrTitleParam)(b,g);const v=await(0,i.default)(b);let $=v.query.pages;const S=(0,d.setPageId)(b,v);if($=$[S],$.missing=="")throw new l.pageError(`${f.MSGS.PAGE_NOT_EXIST}${g}`);const w=new o.default($);if(p!=null&&p.preload){p!=null&&p.fields||(p.fields=["summary","images"]);for(const _ of p.fields)await w.runMethod(_)}return w}catch(b){throw new l.pageError(b)}},h.intro=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,d.setTitleForPage)(g)),await(0,o.intro)(g,p==null?void 0:p.redirect)}catch(b){throw new l.introError(b)}},h.images=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,d.setTitleForPage)(g)),await(0,o.images)(g,p)}catch(b){throw new l.imageError(b)}},h.summary=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,d.setTitleForPage)(g)),await(0,o.summary)(g,p==null?void 0:p.redirect)}catch(b){throw new l.summaryError(b)}},h.html=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,d.setTitleForPage)(g)),await(0,o.html)(g,p==null?void 0:p.redirect)}catch(b){throw new l.htmlError(b)}},h.content=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,d.setTitleForPage)(g)),(await(0,o.content)(g,p==null?void 0:p.redirect)).result}catch(b){throw new l.contentError(b)}},h.categories=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,d.setTitleForPage)(g)),await(0,o.categories)(g,p)}catch(b){throw new l.categoriesError(b)}},h.related=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,d.setTitleForPage)(g)),await(0,o.related)(g,p==null?void 0:p.redirect)}catch(b){throw new l.relatedError(b)}},h.media=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,d.setTitleForPage)(g)),await(0,o.media)(g,p==null?void 0:p.redirect)}catch(b){throw new l.mediaError(b)}},h.links=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,d.setTitleForPage)(g)),await(0,o.links)(g,p)}catch(b){throw new l.linksError(b)}},h.references=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,d.setTitleForPage)(g)),await(0,o.references)(g,p)}catch(b){throw new l.linksError(b)}},h.coordinates=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,d.setTitleForPage)(g)),await(0,o.coordinates)(g,p==null?void 0:p.redirect)}catch(b){throw new l.coordinatesError(b)}},h.langLinks=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,d.setTitleForPage)(g)),await(0,o.langLinks)(g,p)}catch(b){throw new l.linksError(b)}},h.infobox=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,d.setTitleForPage)(g)),await(0,o.infobox)(g,p==null?void 0:p.redirect)}catch(b){throw new l.infoboxError(b)}},h.tables=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,d.setTitleForPage)(g)),await(0,o.tables)(g,p==null?void 0:p.redirect)}catch(b){throw new l.infoboxError(b)}},h.languages=async()=>{try{const g={meta:"siteinfo",siprop:"languages"},p=await(0,i.default)(g),b=[];for(const v of p.query.languages)b.push({[v.code]:v["*"]});return b}catch(g){throw new l.wikiError(g)}},h.setLang=g=>(0,i.setAPIUrl)(g),h.geoSearch=async(g,p,b)=>{try{const v={list:"geosearch",gsradius:(b==null?void 0:b.radius)||1e3,gscoord:`${g}|${p}`,gslimit:(b==null?void 0:b.limit)||10,gsprop:"type"};return(await(0,i.default)(v)).query.geosearch}catch(v){throw new l.geoSearchError(v)}},h.suggest=async g=>{var p,b,v,$;try{const S={list:"search",srinfo:"suggestion",srprop:"",srsearch:g},w=await(0,i.default)(S);return!((b=(p=w.query)===null||p===void 0?void 0:p.searchinfo)===null||b===void 0)&&b.suggestion?($=(v=w.query)===null||v===void 0?void 0:v.searchinfo)===null||$===void 0?void 0:$.suggestion:null}catch(S){throw new l.searchError(S)}},h.onThisDay=async(g={})=>{try{const p=g.type||"all",b=(g.month||(0,d.getCurrentMonth)()).toString().padStart(2,"0"),v=(g.day||(0,d.getCurrentDay)()).toString().padStart(2,"0"),$=`feed/onthisday/${p}/${b}/${v}`;return await(0,i.makeRestRequest)($,!0)}catch(p){throw new l.eventsError(p)}},h.featuredContent=async(g={})=>{try{const p=(g.year||(0,d.getCurrentYear)()).toString(),b=(g.month||(0,d.getCurrentMonth)()).toString().padStart(2,"0"),v=(g.day||(0,d.getCurrentDay)()).toString().padStart(2,"0"),$=`feed/featured/${p}/${b}/${v}`;return await(0,i.makeRestRequest)($,!0)}catch(p){throw new l.fcError(p)}},h.random=async g=>{try{g||(g="summary");const p=`page/random/${g}`;return await(0,i.makeRestRequest)(p)}catch(p){throw new l.wikiError(p)}},h.mobileHtml=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,d.setTitleForPage)(g)),await(0,o.mobileHtml)(g,p==null?void 0:p.redirect)}catch(b){throw new l.htmlError(b)}},h.pdf=async(g,p)=>{try{return p!=null&&p.autoSuggest&&(g=await(0,d.setTitleForPage)(g)),await(0,o.pdf)(g,p)}catch(b){throw new l.pdfError(b)}},h.citation=async(g,p,b)=>{try{return await(0,o.citation)(g,p,b)}catch(v){throw new l.citationError(v)}},h.autocompletions=async(g,p)=>{try{const b={list:"search",limit:(p==null?void 0:p.limit)||10,search:g,action:"opensearch",redirect:"return"},[,v]=await(0,i.default)(b,!1);return v}catch(b){throw new l.autocompletionsError(b)}},t.default=h,e.exports=h,e.exports.default=h,r(errors,t),r(resultTypes,t),r(optionTypes,t),r(page,t)})(dist$1,dist$1.exports);var index$5=getDefaultExportFromCjs(dist$1.exports),wiki=_mergeNamespaces({__proto__:null,default:index$5},[dist$1.exports]),speakTts={},utils={};Object.defineProperty(utils,"__esModule",{value:!0});utils.trim=utils.isObject=utils.isNil=utils.isNan=utils.size=utils.isString=utils.validateLocale=utils.splitSentences=void 0;var splitSentences=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t.replace(/\.+/g,".|").replace(/\?/g,"?|").replace(/\!/g,"!|").split("|").map(function(n){return trim(n)}).filter(Boolean)};utils.splitSentences=splitSentences;var bcp47LocalePattern=/^(?:(en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang))$|^((?:[a-z]{2,3}(?:(?:-[a-z]{3}){1,3})?)|[a-z]{4}|[a-z]{5,8})(?:-([a-z]{4}))?(?:-([a-z]{2}|\d{3}))?((?:-(?:[\da-z]{5,8}|\d[\da-z]{3}))*)?((?:-[\da-wy-z](?:-[\da-z]{2,8})+)*)?(-x(?:-[\da-z]{1,8})+)?$|^(x(?:-[\da-z]{1,8})+)$/i,validateLocale=function e(t){return typeof t!="string"?!1:bcp47LocalePattern.test(t)};utils.validateLocale=validateLocale;var isString=function e(t){return typeof t=="string"||t instanceof String};utils.isString=isString;var size=function e(t){return t&&Array.isArray(t)&&t.length?t.length:0};utils.size=size;var isNan=function e(t){return typeof t=="number"&&isNaN(t)};utils.isNan=isNan;var isNil=function e(t){return t==null};utils.isNil=isNil;var isObject=function e(t){return Object.prototype.toString.call(t)==="[object Object]"};utils.isObject=isObject;var trim=function e(t){return isString(t)?t.trim():""};utils.trim=trim;Object.defineProperty(speakTts,"__esModule",{value:!0});var default_1=speakTts.default=void 0,_utils=utils;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var SpeakTTS=function(){function e(){_classCallCheck(this,e),this.browserSupport="speechSynthesis"in window&&"SpeechSynthesisUtterance"in window,this.synthesisVoice=null}return _createClass(e,[{key:"init",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(i,o){n.browserSupport||o("Your browser does not support Speech Synthesis");var l=(0,_utils.isNil)(r.listeners)?{}:r.listeners,f=(0,_utils.isNil)(r.splitSentences)?!0:r.splitSentences,d=(0,_utils.isNil)(r.lang)?void 0:r.lang,h=(0,_utils.isNil)(r.volume)?1:r.volume,g=(0,_utils.isNil)(r.rate)?1:r.rate,p=(0,_utils.isNil)(r.pitch)?1:r.pitch,b=(0,_utils.isNil)(r.voice)?void 0:r.voice;Object.keys(l).forEach(function(v){var $=l[v],S=function(_){$&&$(_)};v!=="onvoiceschanged"&&(speechSynthesis[v]=S)}),n._loadVoices().then(function(v){l.onvoiceschanged&&l.onvoiceschanged(v),!(0,_utils.isNil)(d)&&n.setLanguage(d),!(0,_utils.isNil)(b)&&n.setVoice(b),!(0,_utils.isNil)(h)&&n.setVolume(h),!(0,_utils.isNil)(g)&&n.setRate(g),!(0,_utils.isNil)(p)&&n.setPitch(p),!(0,_utils.isNil)(f)&&n.setSplitSentences(f),i({voices:v,lang:n.lang,voice:n.voice,volume:n.volume,rate:n.rate,pitch:n.pitch,splitSentences:n.splitSentences,browserSupport:n.browserSupport})}).catch(function(v){o(v)})})}},{key:"_fetchVoices",value:function(){return new Promise(function(n,r){setTimeout(function(){var i=speechSynthesis.getVoices();return(0,_utils.size)(i)>0?n(i):r("Could not fetch voices")},100)})}},{key:"_loadVoices",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;return this._fetchVoices().catch(function(i){if(r===0)throw i;return n._loadVoices(r-1)})}},{key:"hasBrowserSupport",value:function(){return this.browserSupport}},{key:"setVoice",value:function(n){var r,i=speechSynthesis.getVoices();if((0,_utils.isString)(n)&&(r=i.find(function(o){return o.name===n})),(0,_utils.isObject)(n)&&(r=n),r)this.synthesisVoice=r;else throw"Error setting voice. The voice you passed is not valid or the voices have not been loaded yet."}},{key:"setLanguage",value:function(n){if(n=n.replace("_","-"),(0,_utils.validateLocale)(n))this.lang=n;else throw"Error setting language. Please verify your locale is BCP47 format (http://schneegans.de/lv/?tags=es-FR&format=text)"}},{key:"setVolume",value:function(n){if(n=parseFloat(n),!(0,_utils.isNan)(n)&&n>=0&&n<=1)this.volume=n;else throw"Error setting volume. Please verify your volume value is a number between 0 and 1."}},{key:"setRate",value:function(n){if(n=parseFloat(n),!(0,_utils.isNan)(n)&&n>=0&&n<=10)this.rate=n;else throw"Error setting rate. Please verify your volume value is a number between 0 and 10."}},{key:"setPitch",value:function(n){if(n=parseFloat(n),!(0,_utils.isNan)(n)&&n>=0&&n<=2)this.pitch=n;else throw"Error setting pitch. Please verify your pitch value is a number between 0 and 2."}},{key:"setSplitSentences",value:function(n){this.splitSentences=n}},{key:"speak",value:function(n){var r=this;return new Promise(function(i,o){var l=n.text,f=n.listeners,d=f===void 0?{}:f,h=n.queue,g=h===void 0?!0:h,p=(0,_utils.trim)(l);(0,_utils.isNil)(p)&&i(),!g&&r.cancel();var b=[],v=r.splitSentences?(0,_utils.splitSentences)(p):[p];v.forEach(function($,S){var w=S===(0,_utils.size)(v)-1,_=new SpeechSynthesisUtterance;r.synthesisVoice&&(_.voice=r.synthesisVoice),r.lang&&(_.lang=r.lang),r.volume&&(_.volume=r.volume),r.rate&&(_.rate=r.rate),r.pitch&&(_.pitch=r.pitch),_.text=$,Object.keys(d).forEach(function(I){var T=d[I],P=function(N){T&&T(N),I==="onerror"&&o({utterances:b,lastUtterance:_,error:N}),I==="onend"&&w&&i({utterances:b,lastUtterance:_})};_[I]=P}),b.push(_),speechSynthesis.speak(_)})})}},{key:"pending",value:function(){return speechSynthesis.pending}},{key:"paused",value:function(){return speechSynthesis.paused}},{key:"speaking",value:function(){return speechSynthesis.speaking}},{key:"pause",value:function(){speechSynthesis.pause()}},{key:"resume",value:function(){speechSynthesis.resume()}},{key:"cancel",value:function(){speechSynthesis.cancel()}}]),e}(),_default=SpeakTTS;default_1=speakTts.default=_default;function ascending$2(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function descending$2(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bisector(e){let t,n,r;e.length!==2?(t=ascending$2,n=(f,d)=>ascending$2(e(f),d),r=(f,d)=>e(f)-d):(t=e===ascending$2||e===descending$2?e:zero,n=e,r=e);function i(f,d,h=0,g=f.length){if(h<g){if(t(d,d)!==0)return g;do{const p=h+g>>>1;n(f[p],d)<0?h=p+1:g=p}while(h<g)}return h}function o(f,d,h=0,g=f.length){if(h<g){if(t(d,d)!==0)return g;do{const p=h+g>>>1;n(f[p],d)<=0?h=p+1:g=p}while(h<g)}return h}function l(f,d,h=0,g=f.length){const p=i(f,d,h,g-1);return p>h&&r(f[p-1],d)>-r(f[p],d)?p-1:p}return{left:i,center:l,right:o}}function zero(){return 0}function number$3(e){return e===null?NaN:+e}function*numbers(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const ascendingBisect=bisector(ascending$2),bisectRight=ascendingBisect.right,bisectLeft=ascendingBisect.left,bisectCenter=bisector(number$3).center;var bisect=bisectRight;function blur(e,t){if(!((t=+t)>=0))throw new RangeError("invalid r");let n=e.length;if(!((n=Math.floor(n))>=0))throw new RangeError("invalid length");if(!n||!t)return e;const r=blurf(t),i=e.slice();return r(e,i,0,n,1),r(i,e,0,n,1),r(e,i,0,n,1),e}const blur2=Blur2(blurf),blurImage=Blur2(blurfImage);function Blur2(e){return function(t,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:o,height:l}=t;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid width");if(!((l=Math.floor(l!==void 0?l:i.length/o))>=0))throw new RangeError("invalid height");if(!o||!l||!n&&!r)return t;const f=n&&e(n),d=r&&e(r),h=i.slice();return f&&d?(blurh(f,h,i,o,l),blurh(f,i,h,o,l),blurh(f,h,i,o,l),blurv(d,i,h,o,l),blurv(d,h,i,o,l),blurv(d,i,h,o,l)):f?(blurh(f,i,h,o,l),blurh(f,h,i,o,l),blurh(f,i,h,o,l)):d&&(blurv(d,i,h,o,l),blurv(d,h,i,o,l),blurv(d,i,h,o,l)),t}}function blurh(e,t,n,r,i){for(let o=0,l=r*i;o<l;)e(t,n,o,o+=r,1)}function blurv(e,t,n,r,i){for(let o=0,l=r*i;o<r;++o)e(t,n,o,o+l,r)}function blurfImage(e){const t=blurf(e);return(n,r,i,o,l)=>{i<<=2,o<<=2,l<<=2,t(n,r,i+0,o+0,l),t(n,r,i+1,o+1,l),t(n,r,i+2,o+2,l),t(n,r,i+3,o+3,l)}}function blurf(e){const t=Math.floor(e);if(t===e)return bluri(e);const n=e-t,r=2*e+1;return(i,o,l,f,d)=>{if(!((f-=d)>=l))return;let h=t*o[l];const g=d*t,p=g+d;for(let b=l,v=l+g;b<v;b+=d)h+=o[Math.min(f,b)];for(let b=l,v=f;b<=v;b+=d)h+=o[Math.min(f,b+g)],i[b]=(h+n*(o[Math.max(l,b-p)]+o[Math.min(f,b+p)]))/r,h-=o[Math.max(l,b-g)]}}function bluri(e){const t=2*e+1;return(n,r,i,o,l)=>{if(!((o-=l)>=i))return;let f=e*r[i];const d=l*e;for(let h=i,g=i+d;h<g;h+=l)f+=r[Math.min(o,h)];for(let h=i,g=o;h<=g;h+=l)f+=r[Math.min(o,h+d)],n[h]=f/t,f-=r[Math.max(i,h-d)]}}function count$1(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function length$3(e){return e.length|0}function empty$1(e){return!(e>0)}function arrayify(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function reducer(e){return t=>e(...t)}function cross$2(...e){const t=typeof e[e.length-1]=="function"&&reducer(e.pop());e=e.map(arrayify);const n=e.map(length$3),r=e.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(empty$1))return o;for(;;){o.push(i.map((f,d)=>e[d][f]));let l=r;for(;++i[l]===n[l];){if(l===0)return t?o.map(t):o;i[l--]=0}}}function cumsum(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function variance(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let l of e)l!=null&&(l=+l)>=l&&(r=l-i,i+=r/++n,o+=r*(l-i));else{let l=-1;for(let f of e)(f=t(f,++l,e))!=null&&(f=+f)>=f&&(r=f-i,i+=r/++n,o+=r*(f-i))}if(n>1)return o/(n-1)}function deviation(e,t){const n=variance(e,t);return n&&Math.sqrt(n)}function extent$1(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class Adder{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],l=t+o,f=Math.abs(t)<Math.abs(o)?t-(l-o):o-(l-t);f&&(n[r++]=f),t=l}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,l=0;if(n>0){for(l=t[--n];n>0&&(r=l,i=t[--n],l=r+i,o=i-(l-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=l+i,i==r-l&&(l=r))}return l}}function fsum(e,t){const n=new Adder;if(t===void 0)for(let r of e)(r=+r)&&n.add(r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&n.add(i)}return+n}function fcumsum(e,t){const n=new Adder;let r=-1;return Float64Array.from(e,t===void 0?i=>n.add(+i||0):i=>n.add(+t(i,++r,e)||0))}class InternMap extends Map{constructor(t,n=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(intern_get(this,t))}has(t){return super.has(intern_get(this,t))}set(t,n){return super.set(intern_set(this,t),n)}delete(t){return super.delete(intern_delete(this,t))}}class InternSet extends Set{constructor(t,n=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(intern_get(this,t))}add(t){return super.add(intern_set(this,t))}delete(t){return super.delete(intern_delete(this,t))}}function intern_get({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function intern_set({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function intern_delete({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function keyof(e){return e!==null&&typeof e=="object"?e.valueOf():e}function identity$7(e){return e}function group(e,...t){return nest(e,identity$7,identity$7,t)}function groups(e,...t){return nest(e,Array.from,identity$7,t)}function flatten$1(e,t){for(let n=1,r=t.length;n<r;++n)e=e.flatMap(i=>i.pop().map(([o,l])=>[...i,o,l]));return e}function flatGroup(e,...t){return flatten$1(groups(e,...t),t)}function flatRollup(e,t,...n){return flatten$1(rollups(e,t,...n),n)}function rollup(e,t,...n){return nest(e,identity$7,t,n)}function rollups(e,t,...n){return nest(e,Array.from,t,n)}function index$4(e,...t){return nest(e,identity$7,unique,t)}function indexes(e,...t){return nest(e,Array.from,unique,t)}function unique(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function nest(e,t,n,r){return function i(o,l){if(l>=r.length)return n(o);const f=new InternMap,d=r[l++];let h=-1;for(const g of o){const p=d(g,++h,o),b=f.get(p);b?b.push(g):f.set(p,[g])}for(const[g,p]of f)f.set(g,i(p,l));return t(f)}(e,0)}function permute(e,t){return Array.from(t,n=>e[n])}function sort(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,o)=>o);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,o)=>{for(const l of t){const f=ascendingDefined(l[i],l[o]);if(f)return f}})):(n=e.map(n),r.sort((i,o)=>ascendingDefined(n[i],n[o]))),permute(e,r)}return e.sort(compareDefined(n))}function compareDefined(e=ascending$2){if(e===ascending$2)return ascendingDefined;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function ascendingDefined(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function groupSort(e,t,n){return(t.length!==2?sort(rollup(e,t,n),([r,i],[o,l])=>ascending$2(i,l)||ascending$2(r,o)):sort(group(e,n),([r,i],[o,l])=>t(i,l)||ascending$2(r,o))).map(([r])=>r)}var array$4=Array.prototype,slice$3=array$4.slice;function constant$9(e){return()=>e}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),l=o>=e10?10:o>=e5?5:o>=e2?2:1;let f,d,h;return i<0?(h=Math.pow(10,-i)/l,f=Math.round(e*h),d=Math.round(t*h),f/h<e&&++f,d/h>t&&--d,h=-h):(h=Math.pow(10,i)*l,f=Math.round(e/h),d=Math.round(t/h),f*h<e&&++f,d*h>t&&--d),d<f&&.5<=n&&n<2?tickSpec(e,t,n*2):[f,d,h]}function ticks(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,l]=r?tickSpec(t,e,n):tickSpec(e,t,n);if(!(o>=i))return[];const f=o-i+1,d=new Array(f);if(r)if(l<0)for(let h=0;h<f;++h)d[h]=(o-h)/-l;else for(let h=0;h<f;++h)d[h]=(o-h)*l;else if(l<0)for(let h=0;h<f;++h)d[h]=(i+h)/-l;else for(let h=0;h<f;++h)d[h]=(i+h)*l;return d}function tickIncrement(e,t,n){return t=+t,e=+e,n=+n,tickSpec(e,t,n)[2]}function tickStep(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?tickIncrement(t,e,n):tickIncrement(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function nice$1(e,t,n){let r;for(;;){const i=tickIncrement(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function thresholdSturges(e){return Math.ceil(Math.log(count$1(e))/Math.LN2)+1}function bin(){var e=identity$7,t=extent$1,n=thresholdSturges;function r(i){Array.isArray(i)||(i=Array.from(i));var o,l=i.length,f,d,h=new Array(l);for(o=0;o<l;++o)h[o]=e(i[o],o,i);var g=t(h),p=g[0],b=g[1],v=n(h,p,b);if(!Array.isArray(v)){const T=b,P=+v;if(t===extent$1&&([p,b]=nice$1(p,b,P)),v=ticks(p,b,P),v[0]<=p&&(d=tickIncrement(p,b,P)),v[v.length-1]>=b)if(T>=b&&t===extent$1){const R=tickIncrement(p,b,P);isFinite(R)&&(R>0?b=(Math.floor(b/R)+1)*R:R<0&&(b=(Math.ceil(b*-R)+1)/-R))}else v.pop()}for(var $=v.length,S=0,w=$;v[S]<=p;)++S;for(;v[w-1]>b;)--w;(S||w<$)&&(v=v.slice(S,w),$=w-S);var _=new Array($+1),I;for(o=0;o<=$;++o)I=_[o]=[],I.x0=o>0?v[o-1]:p,I.x1=o<$?v[o]:b;if(isFinite(d)){if(d>0)for(o=0;o<l;++o)(f=h[o])!=null&&p<=f&&f<=b&&_[Math.min($,Math.floor((f-p)/d))].push(i[o]);else if(d<0){for(o=0;o<l;++o)if((f=h[o])!=null&&p<=f&&f<=b){const T=Math.floor((p-f)*d);_[Math.min($,T+(v[T]<=f))].push(i[o])}}}else for(o=0;o<l;++o)(f=h[o])!=null&&p<=f&&f<=b&&_[bisect(v,f,0,$)].push(i[o]);return _}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:constant$9(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:constant$9([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:constant$9(Array.isArray(i)?slice$3.call(i):i),r):n},r}function max$3(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function maxIndex(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);return r}function min$2(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function minIndex(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);return r}function quickselect(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?ascendingDefined:compareDefined(i);r>n;){if(r-n>600){const d=r-n+1,h=t-n+1,g=Math.log(d),p=.5*Math.exp(2*g/3),b=.5*Math.sqrt(g*p*(d-p)/d)*(h-d/2<0?-1:1),v=Math.max(n,Math.floor(t-h*p/d+b)),$=Math.min(r,Math.floor(t+(d-h)*p/d+b));quickselect(e,t,v,$,i)}const o=e[t];let l=n,f=r;for(swap$1(e,n,t),i(e[r],o)>0&&swap$1(e,n,r);l<f;){for(swap$1(e,l,f),++l,--f;i(e[l],o)<0;)++l;for(;i(e[f],o)>0;)--f}i(e[n],o)===0?swap$1(e,n,f):(++f,swap$1(e,f,r)),f<=t&&(n=f+1),t<=f&&(r=f-1)}return e}function swap$1(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function greatest(e,t=ascending$2){let n,r=!1;if(t.length===1){let i;for(const o of e){const l=t(o);(r?ascending$2(l,i)>0:ascending$2(l,l)===0)&&(n=o,i=l,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function quantile$1(e,t,n){if(e=Float64Array.from(numbers(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return min$2(e);if(t>=1)return max$3(e);var r,i=(r-1)*t,o=Math.floor(i),l=max$3(quickselect(e,o).subarray(0,o+1)),f=min$2(e.subarray(o+1));return l+(f-l)*(i-o)}}function quantileSorted(e,t,n=number$3){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),l=+n(e[o],o,e),f=+n(e[o+1],o+1,e);return l+(f-l)*(i-o)}}function quantileIndex(e,t,n){if(e=Float64Array.from(numbers(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return minIndex(e);if(t>=1)return maxIndex(e);var r,i=Math.floor((r-1)*t),o=(f,d)=>ascendingDefined(e[f],e[d]),l=quickselect(Uint32Array.from(e,(f,d)=>d),i,0,r-1,o);return greatest(l.subarray(0,i+1),f=>e[f])}}function thresholdFreedmanDiaconis(e,t,n){return Math.ceil((n-t)/(2*(quantile$1(e,.75)-quantile$1(e,.25))*Math.pow(count$1(e),-1/3)))}function thresholdScott(e,t,n){return Math.ceil((n-t)*Math.cbrt(count$1(e))/(3.49*deviation(e)))}function mean(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function median(e,t){return quantile$1(e,.5,t)}function medianIndex(e,t){return quantileIndex(e,.5,t)}function*flatten(e){for(const t of e)yield*t}function merge(e){return Array.from(flatten(e))}function mode(e,t){const n=new InternMap;if(t===void 0)for(let o of e)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let l of e)(l=t(l,++o,e))!=null&&l>=l&&n.set(l,(n.get(l)||0)+1)}let r,i=0;for(const[o,l]of n)l>i&&(i=l,r=o);return r}function pairs(e,t=pair){const n=[];let r,i=!1;for(const o of e)i&&n.push(t(r,o)),r=o,i=!0;return n}function pair(e,t){return[e,t]}function range$2(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function rank(e,t=ascending$2){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(e);const r=new Float64Array(n.length);t.length!==2&&(n=n.map(t),t=ascending$2);const i=(f,d)=>t(n[f],n[d]);let o,l;return Uint32Array.from(n,(f,d)=>d).sort(t===ascending$2?(f,d)=>ascendingDefined(n[f],n[d]):compareDefined(i)).forEach((f,d)=>{const h=i(f,o===void 0?f:o);h>=0?((o===void 0||h>0)&&(o=f,l=d),r[f]=l):r[f]=NaN}),r}function least(e,t=ascending$2){let n,r=!1;if(t.length===1){let i;for(const o of e){const l=t(o);(r?ascending$2(l,i)<0:ascending$2(l,l)===0)&&(n=o,i=l,r=!0)}}else for(const i of e)(r?t(i,n)<0:t(i,i)===0)&&(n=i,r=!0);return n}function leastIndex(e,t=ascending$2){if(t.length===1)return minIndex(e,t);let n,r=-1,i=-1;for(const o of e)++i,(r<0?t(o,o)===0:t(o,n)<0)&&(n=o,r=i);return r}function greatestIndex(e,t=ascending$2){if(t.length===1)return maxIndex(e,t);let n,r=-1,i=-1;for(const o of e)++i,(r<0?t(o,o)===0:t(o,n)>0)&&(n=o,r=i);return r}function scan(e,t){const n=leastIndex(e,t);return n<0?void 0:n}var shuffle$1=shuffler(Math.random);function shuffler(e){return function(n,r=0,i=n.length){let o=i-(r=+r);for(;o;){const l=e()*o--|0,f=n[o+r];n[o+r]=n[l+r],n[l+r]=f}return n}}function sum$2(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function transpose(e){if(!(o=e.length))return[];for(var t=-1,n=min$2(e,length$2),r=new Array(n);++t<n;)for(var i=-1,o,l=r[t]=new Array(o);++i<o;)l[i]=e[i][t];return r}function length$2(e){return e.length}function zip(){return transpose(arguments)}function every(e,t){if(typeof t!="function")throw new TypeError("test is not a function");let n=-1;for(const r of e)if(!t(r,++n,e))return!1;return!0}function some(e,t){if(typeof t!="function")throw new TypeError("test is not a function");let n=-1;for(const r of e)if(t(r,++n,e))return!0;return!1}function filter(e,t){if(typeof t!="function")throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of e)t(i,++r,e)&&n.push(i);return n}function map$1(e,t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof t!="function")throw new TypeError("mapper is not a function");return Array.from(e,(n,r)=>t(n,r,e))}function reduce(e,t,n){if(typeof t!="function")throw new TypeError("reducer is not a function");const r=e[Symbol.iterator]();let i,o,l=-1;if(arguments.length<3){if({done:i,value:n}=r.next(),i)return;++l}for(;{done:i,value:o}=r.next(),!i;)n=t(n,o,++l,e);return n}function reverse$1(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function difference(e,...t){e=new InternSet(e);for(const n of t)for(const r of n)e.delete(r);return e}function disjoint(e,t){const n=t[Symbol.iterator](),r=new InternSet;for(const i of e){if(r.has(i))return!1;let o,l;for(;({value:o,done:l}=n.next())&&!l;){if(Object.is(i,o))return!1;r.add(o)}}return!0}function intersection(e,...t){e=new InternSet(e),t=t.map(set);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function set(e){return e instanceof InternSet?e:new InternSet(e)}function superset(e,t){const n=e[Symbol.iterator](),r=new Set;for(const i of t){const o=intern(i);if(r.has(o))continue;let l,f;for(;{value:l,done:f}=n.next();){if(f)return!1;const d=intern(l);if(r.add(d),Object.is(o,d))break}}return!0}function intern(e){return e!==null&&typeof e=="object"?e.valueOf():e}function subset(e,t){return superset(t,e)}function union(...e){const t=new InternSet;for(const n of e)for(const r of n)t.add(r);return t}function identity$6(e){return e}var top=1,right=2,bottom=3,left=4,epsilon$6=1e-6;function translateX(e){return"translate("+e+",0)"}function translateY(e){return"translate(0,"+e+")"}function number$2(e){return t=>+e(t)}function center$1(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function entering(){return!this.__axis}function axis(e,t){var n=[],r=null,i=null,o=6,l=6,f=3,d=typeof window!="undefined"&&window.devicePixelRatio>1?0:.5,h=e===top||e===left?-1:1,g=e===left||e===right?"x":"y",p=e===top||e===bottom?translateX:translateY;function b(v){var $=r==null?t.ticks?t.ticks.apply(t,n):t.domain():r,S=i==null?t.tickFormat?t.tickFormat.apply(t,n):identity$6:i,w=Math.max(o,0)+f,_=t.range(),I=+_[0]+d,T=+_[_.length-1]+d,P=(t.bandwidth?center$1:number$2)(t.copy(),d),R=v.selection?v.selection():v,N=R.selectAll(".domain").data([null]),U=R.selectAll(".tick").data($,t).order(),G=U.exit(),V=U.enter().append("g").attr("class","tick"),q=U.select("line"),O=U.select("text");N=N.merge(N.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),U=U.merge(V),q=q.merge(V.append("line").attr("stroke","currentColor").attr(g+"2",h*o)),O=O.merge(V.append("text").attr("fill","currentColor").attr(g,h*w).attr("dy",e===top?"0em":e===bottom?"0.71em":"0.32em")),v!==R&&(N=N.transition(v),U=U.transition(v),q=q.transition(v),O=O.transition(v),G=G.transition(v).attr("opacity",epsilon$6).attr("transform",function(W){return isFinite(W=P(W))?p(W+d):this.getAttribute("transform")}),V.attr("opacity",epsilon$6).attr("transform",function(W){var H=this.parentNode.__axis;return p((H&&isFinite(H=H(W))?H:P(W))+d)})),G.remove(),N.attr("d",e===left||e===right?l?"M"+h*l+","+I+"H"+d+"V"+T+"H"+h*l:"M"+d+","+I+"V"+T:l?"M"+I+","+h*l+"V"+d+"H"+T+"V"+h*l:"M"+I+","+d+"H"+T),U.attr("opacity",1).attr("transform",function(W){return p(P(W)+d)}),q.attr(g+"2",h*o),O.attr(g,h*w).text(S),R.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===right?"start":e===left?"end":"middle"),R.each(function(){this.__axis=P})}return b.scale=function(v){return arguments.length?(t=v,b):t},b.ticks=function(){return n=Array.from(arguments),b},b.tickArguments=function(v){return arguments.length?(n=v==null?[]:Array.from(v),b):n.slice()},b.tickValues=function(v){return arguments.length?(r=v==null?null:Array.from(v),b):r&&r.slice()},b.tickFormat=function(v){return arguments.length?(i=v,b):i},b.tickSize=function(v){return arguments.length?(o=l=+v,b):o},b.tickSizeInner=function(v){return arguments.length?(o=+v,b):o},b.tickSizeOuter=function(v){return arguments.length?(l=+v,b):l},b.tickPadding=function(v){return arguments.length?(f=+v,b):f},b.offset=function(v){return arguments.length?(d=+v,b):d},b}function axisTop(e){return axis(top,e)}function axisRight(e){return axis(right,e)}function axisBottom(e){return axis(bottom,e)}function axisLeft(e){return axis(left,e)}function create(e){return select(creator(e).call(document.documentElement))}var nextId=0;function local$1(){return new Local}function Local(){this._="@"+(++nextId).toString(36)}Local.prototype=local$1.prototype={constructor:Local,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};function sourceEvent(e){let t;for(;t=e.sourceEvent;)e=t;return e}function pointer(e,t){if(e=sourceEvent(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function pointers(e,t){return e.target&&(e=sourceEvent(e),t===void 0&&(t=e.currentTarget),e=e.touches||[e]),Array.from(e,n=>pointer(n,t))}function selectAll(e){return typeof e=="string"?new Selection([document.querySelectorAll(e)],[document.documentElement]):new Selection([array$5(e)],root$1)}const nonpassive={passive:!1},nonpassivecapture={capture:!0,passive:!1};function nopropagation$2(e){e.stopImmediatePropagation()}function noevent$2(e){e.preventDefault(),e.stopImmediatePropagation()}function dragDisable(e){var t=e.document.documentElement,n=select(e).on("dragstart.drag",noevent$2,nonpassivecapture);"onselectstart"in t?n.on("selectstart.drag",noevent$2,nonpassivecapture):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function yesdrag(e,t){var n=e.document.documentElement,r=select(e).on("dragstart.drag",null);t&&(r.on("click.drag",noevent$2,nonpassivecapture),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var constant$8=e=>()=>e;function DragEvent(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:l,y:f,dx:d,dy:h,dispatch:g}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:g}})}DragEvent.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function defaultFilter$2(e){return!e.ctrlKey&&!e.button}function defaultContainer(){return this.parentNode}function defaultSubject(e,t){return t==null?{x:e.x,y:e.y}:t}function defaultTouchable$2(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var e=defaultFilter$2,t=defaultContainer,n=defaultSubject,r=defaultTouchable$2,i={},o=dispatch("start","drag","end"),l=0,f,d,h,g,p=0;function b(P){P.on("mousedown.drag",v).filter(r).on("touchstart.drag",w).on("touchmove.drag",_,nonpassive).on("touchend.drag touchcancel.drag",I).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(P,R){if(!(g||!e.call(this,P,R))){var N=T(this,t.call(this,P,R),P,R,"mouse");!N||(select(P.view).on("mousemove.drag",$,nonpassivecapture).on("mouseup.drag",S,nonpassivecapture),dragDisable(P.view),nopropagation$2(P),h=!1,f=P.clientX,d=P.clientY,N("start",P))}}function $(P){if(noevent$2(P),!h){var R=P.clientX-f,N=P.clientY-d;h=R*R+N*N>p}i.mouse("drag",P)}function S(P){select(P.view).on("mousemove.drag mouseup.drag",null),yesdrag(P.view,h),noevent$2(P),i.mouse("end",P)}function w(P,R){if(!!e.call(this,P,R)){var N=P.changedTouches,U=t.call(this,P,R),G=N.length,V,q;for(V=0;V<G;++V)(q=T(this,U,P,R,N[V].identifier,N[V]))&&(nopropagation$2(P),q("start",P,N[V]))}}function _(P){var R=P.changedTouches,N=R.length,U,G;for(U=0;U<N;++U)(G=i[R[U].identifier])&&(noevent$2(P),G("drag",P,R[U]))}function I(P){var R=P.changedTouches,N=R.length,U,G;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),U=0;U<N;++U)(G=i[R[U].identifier])&&(nopropagation$2(P),G("end",P,R[U]))}function T(P,R,N,U,G,V){var q=o.copy(),O=pointer(V||N,R),W,H,L;if((L=n.call(P,new DragEvent("beforestart",{sourceEvent:N,target:b,identifier:G,active:l,x:O[0],y:O[1],dx:0,dy:0,dispatch:q}),U))!=null)return W=L.x-O[0]||0,H=L.y-O[1]||0,function z(F,j,Z){var J=O,ee;switch(F){case"start":i[G]=z,ee=l++;break;case"end":delete i[G],--l;case"drag":O=pointer(Z||j,R),ee=l;break}q.call(F,P,new DragEvent(F,{sourceEvent:j,subject:L,target:b,identifier:G,active:ee,x:O[0]+W,y:O[1]+H,dx:O[0]-J[0],dy:O[1]-J[1],dispatch:q}),U)}}return b.filter=function(P){return arguments.length?(e=typeof P=="function"?P:constant$8(!!P),b):e},b.container=function(P){return arguments.length?(t=typeof P=="function"?P:constant$8(P),b):t},b.subject=function(P){return arguments.length?(n=typeof P=="function"?P:constant$8(P),b):n},b.touchable=function(P){return arguments.length?(r=typeof P=="function"?P:constant$8(!!P),b):r},b.on=function(){var P=o.on.apply(o,arguments);return P===o?b:P},b.clickDistance=function(P){return arguments.length?(p=(P=+P)*P,b):Math.sqrt(p)},b}const radians$1=Math.PI/180,degrees$1=180/Math.PI,K=18,Xn=.96422,Yn=1,Zn=.82521,t0$1=4/29,t1$1=6/29,t2=3*t1$1*t1$1,t3=t1$1*t1$1*t1$1;function labConvert(e){if(e instanceof Lab)return new Lab(e.l,e.a,e.b,e.opacity);if(e instanceof Hcl)return hcl2lab(e);e instanceof Rgb||(e=rgbConvert(e));var t=rgb2lrgb(e.r),n=rgb2lrgb(e.g),r=rgb2lrgb(e.b),i=xyz2lab((.2225045*t+.7168786*n+.0606169*r)/Yn),o,l;return t===n&&n===r?o=l=i:(o=xyz2lab((.4360747*t+.3850649*n+.1430804*r)/Xn),l=xyz2lab((.0139322*t+.0971045*n+.7141733*r)/Zn)),new Lab(116*i-16,500*(o-i),200*(i-l),e.opacity)}function gray(e,t){return new Lab(e,0,0,t==null?1:t)}function lab$1(e,t,n,r){return arguments.length===1?labConvert(e):new Lab(e,t,n,r==null?1:r)}function Lab(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}define(Lab,lab$1,extend(Color,{brighter(e){return new Lab(this.l+K*(e==null?1:e),this.a,this.b,this.opacity)},darker(e){return new Lab(this.l-K*(e==null?1:e),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Xn*lab2xyz(t),e=Yn*lab2xyz(e),n=Zn*lab2xyz(n),new Rgb(lrgb2rgb(3.1338561*t-1.6168667*e-.4906146*n),lrgb2rgb(-.9787684*t+1.9161415*e+.033454*n),lrgb2rgb(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function xyz2lab(e){return e>t3?Math.pow(e,1/3):e/t2+t0$1}function lab2xyz(e){return e>t1$1?e*e*e:t2*(e-t0$1)}function lrgb2rgb(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function rgb2lrgb(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function hclConvert(e){if(e instanceof Hcl)return new Hcl(e.h,e.c,e.l,e.opacity);if(e instanceof Lab||(e=labConvert(e)),e.a===0&&e.b===0)return new Hcl(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*degrees$1;return new Hcl(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function lch(e,t,n,r){return arguments.length===1?hclConvert(e):new Hcl(n,t,e,r==null?1:r)}function hcl$2(e,t,n,r){return arguments.length===1?hclConvert(e):new Hcl(e,t,n,r==null?1:r)}function Hcl(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function hcl2lab(e){if(isNaN(e.h))return new Lab(e.l,0,0,e.opacity);var t=e.h*radians$1;return new Lab(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}define(Hcl,hcl$2,extend(Color,{brighter(e){return new Hcl(this.h,this.c,this.l+K*(e==null?1:e),this.opacity)},darker(e){return new Hcl(this.h,this.c,this.l-K*(e==null?1:e),this.opacity)},rgb(){return hcl2lab(this).rgb()}}));var A=-.14861,B$1=1.78277,C=-.29227,D$1=-.90649,E=1.97294,ED=E*D$1,EB=E*B$1,BC_DA=B$1*C-D$1*A;function cubehelixConvert(e){if(e instanceof Cubehelix)return new Cubehelix(e.h,e.s,e.l,e.opacity);e instanceof Rgb||(e=rgbConvert(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(BC_DA*r+ED*t-EB*n)/(BC_DA+ED-EB),o=r-i,l=(E*(n-i)-C*o)/D$1,f=Math.sqrt(l*l+o*o)/(E*i*(1-i)),d=f?Math.atan2(l,o)*degrees$1-120:NaN;return new Cubehelix(d<0?d+360:d,f,i,e.opacity)}function cubehelix$3(e,t,n,r){return arguments.length===1?cubehelixConvert(e):new Cubehelix(e,t,n,r==null?1:r)}function Cubehelix(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}define(Cubehelix,cubehelix$3,extend(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Cubehelix(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Cubehelix(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*radians$1,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Rgb(255*(t+n*(A*r+B$1*i)),255*(t+n*(C*r+D$1*i)),255*(t+n*(E*r)),this.opacity)}}));function numberArray(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function isNumberArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function array$3(e,t){return(isNumberArray(t)?numberArray:genericArray)(e,t)}function genericArray(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),l;for(l=0;l<r;++l)i[l]=interpolate$1(e[l],t[l]);for(;l<n;++l)o[l]=t[l];return function(f){for(l=0;l<r;++l)o[l]=i[l](f);return o}}function date$2(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function object$1(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=interpolate$1(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}function interpolate$1(e,t){var n=typeof t,r;return t==null||n==="boolean"?constant$a(t):(n==="number"?interpolateNumber:n==="string"?(r=color(t))?(t=r,interpolateRgb):interpolateString:t instanceof color?interpolateRgb:t instanceof Date?date$2:isNumberArray(t)?numberArray:Array.isArray(t)?genericArray:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?object$1:interpolateNumber)(e,t)}function discrete(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function hue(e,t){var n=hue$1(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function interpolateRound(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var epsilon2$1=1e-12;function cosh(e){return((e=Math.exp(e))+1/e)/2}function sinh(e){return((e=Math.exp(e))-1/e)/2}function tanh(e){return((e=Math.exp(2*e))-1)/(e+1)}var interpolateZoom=function e(t,n,r){function i(o,l){var f=o[0],d=o[1],h=o[2],g=l[0],p=l[1],b=l[2],v=g-f,$=p-d,S=v*v+$*$,w,_;if(S<epsilon2$1)_=Math.log(b/h)/t,w=function(U){return[f+U*v,d+U*$,h*Math.exp(t*U*_)]};else{var I=Math.sqrt(S),T=(b*b-h*h+r*S)/(2*h*n*I),P=(b*b-h*h-r*S)/(2*b*n*I),R=Math.log(Math.sqrt(T*T+1)-T),N=Math.log(Math.sqrt(P*P+1)-P);_=(N-R)/t,w=function(U){var G=U*_,V=cosh(R),q=h/(n*I)*(V*tanh(t*G+R)-sinh(R));return[f+q*v,d+q*$,h*V/cosh(t*G+R)]}}return w.duration=_*1e3*t/Math.SQRT2,w}return i.rho=function(o){var l=Math.max(.001,+o),f=l*l,d=f*f;return e(l,f,d)},i}(Math.SQRT2,2,4);function hsl(e){return function(t,n){var r=e((t=hsl$2(t)).h,(n=hsl$2(n)).h),i=nogamma(t.s,n.s),o=nogamma(t.l,n.l),l=nogamma(t.opacity,n.opacity);return function(f){return t.h=r(f),t.s=i(f),t.l=o(f),t.opacity=l(f),t+""}}}var hsl$1=hsl(hue$1),hslLong=hsl(nogamma);function lab(e,t){var n=nogamma((e=lab$1(e)).l,(t=lab$1(t)).l),r=nogamma(e.a,t.a),i=nogamma(e.b,t.b),o=nogamma(e.opacity,t.opacity);return function(l){return e.l=n(l),e.a=r(l),e.b=i(l),e.opacity=o(l),e+""}}function hcl(e){return function(t,n){var r=e((t=hcl$2(t)).h,(n=hcl$2(n)).h),i=nogamma(t.c,n.c),o=nogamma(t.l,n.l),l=nogamma(t.opacity,n.opacity);return function(f){return t.h=r(f),t.c=i(f),t.l=o(f),t.opacity=l(f),t+""}}}var hcl$1=hcl(hue$1),hclLong=hcl(nogamma);function cubehelix$1(e){return function t(n){n=+n;function r(i,o){var l=e((i=cubehelix$3(i)).h,(o=cubehelix$3(o)).h),f=nogamma(i.s,o.s),d=nogamma(i.l,o.l),h=nogamma(i.opacity,o.opacity);return function(g){return i.h=l(g),i.s=f(g),i.l=d(Math.pow(g,n)),i.opacity=h(g),i+""}}return r.gamma=t,r}(1)}var cubehelix$2=cubehelix$1(hue$1),cubehelixLong=cubehelix$1(nogamma);function piecewise(e,t){t===void 0&&(t=e,e=interpolate$1);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(l){var f=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return o[f](l-f)}}function quantize$1(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}function interval(e,t,n){var r=new Timer,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,l,f){l=+l,f=f==null?now():+f,r._restart(function d(h){h+=i,r._restart(d,i+=l,f),o(h)},l,f)},r.restart(e,t,n),r)}const linear$1=e=>+e;function quadIn(e){return e*e}function quadOut(e){return e*(2-e)}function quadInOut(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}var exponent$1=3,polyIn=function e(t){t=+t;function n(r){return Math.pow(r,t)}return n.exponent=e,n}(exponent$1),polyOut=function e(t){t=+t;function n(r){return 1-Math.pow(1-r,t)}return n.exponent=e,n}(exponent$1),polyInOut=function e(t){t=+t;function n(r){return((r*=2)<=1?Math.pow(r,t):2-Math.pow(2-r,t))/2}return n.exponent=e,n}(exponent$1),pi$4=Math.PI,halfPi$3=pi$4/2;function sinIn(e){return+e==1?1:1-Math.cos(e*halfPi$3)}function sinOut(e){return Math.sin(e*halfPi$3)}function sinInOut(e){return(1-Math.cos(pi$4*e))/2}function tpmt(e){return(Math.pow(2,-10*e)-.0009765625)*1.0009775171065494}function expIn(e){return tpmt(1-+e)}function expOut(e){return 1-tpmt(e)}function expInOut(e){return((e*=2)<=1?tpmt(1-e):2-tpmt(e-1))/2}function circleIn(e){return 1-Math.sqrt(1-e*e)}function circleOut(e){return Math.sqrt(1- --e*e)}function circleInOut(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var b1=4/11,b2=6/11,b3=8/11,b4=3/4,b5=9/11,b6=10/11,b7=15/16,b8=21/22,b9=63/64,b0=1/b1/b1;function bounceIn(e){return 1-bounceOut(1-e)}function bounceOut(e){return(e=+e)<b1?b0*e*e:e<b3?b0*(e-=b2)*e+b4:e<b6?b0*(e-=b5)*e+b7:b0*(e-=b8)*e+b9}function bounceInOut(e){return((e*=2)<=1?1-bounceOut(1-e):bounceOut(e-1)+1)/2}var overshoot=1.70158,backIn=function e(t){t=+t;function n(r){return(r=+r)*r*(t*(r-1)+r)}return n.overshoot=e,n}(overshoot),backOut=function e(t){t=+t;function n(r){return--r*r*((r+1)*t+r)+1}return n.overshoot=e,n}(overshoot),backInOut=function e(t){t=+t;function n(r){return((r*=2)<1?r*r*((t+1)*r-t):(r-=2)*r*((t+1)*r+t)+2)/2}return n.overshoot=e,n}(overshoot),tau$5=2*Math.PI,amplitude=1,period=.3,elasticIn=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=tau$5);function i(o){return t*tpmt(- --o)*Math.sin((r-o)/n)}return i.amplitude=function(o){return e(o,n*tau$5)},i.period=function(o){return e(t,o)},i}(amplitude,period),elasticOut=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=tau$5);function i(o){return 1-t*tpmt(o=+o)*Math.sin((o+r)/n)}return i.amplitude=function(o){return e(o,n*tau$5)},i.period=function(o){return e(t,o)},i}(amplitude,period),elasticInOut=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=tau$5);function i(o){return((o=o*2-1)<0?t*tpmt(-o)*Math.sin((r-o)/n):2-t*tpmt(o)*Math.sin((r+o)/n))/2}return i.amplitude=function(o){return e(o,n*tau$5)},i.period=function(o){return e(t,o)},i}(amplitude,period),root=[null];function active(e,t){var n=e.__transition,r,i;if(n){t=t==null?null:t+"";for(i in n)if((r=n[i]).state>SCHEDULED&&r.name===t)return new Transition([[e]],root,t,+i)}return null}var constant$7=e=>()=>e;function BrushEvent(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function nopropagation$1(e){e.stopImmediatePropagation()}function noevent$1(e){e.preventDefault(),e.stopImmediatePropagation()}var MODE_DRAG={name:"drag"},MODE_SPACE={name:"space"},MODE_HANDLE={name:"handle"},MODE_CENTER={name:"center"};const{abs:abs$3,max:max$2,min:min$1}=Math;function number1(e){return[+e[0],+e[1]]}function number2(e){return[number1(e[0]),number1(e[1])]}var X={name:"x",handles:["w","e"].map(type),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Y={name:"y",handles:["n","s"].map(type),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},XY={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(type),input:function(e){return e==null?null:number2(e)},output:function(e){return e}},cursors={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},flipX={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},flipY={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},signsX={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},signsY={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function type(e){return{type:e}}function defaultFilter$1(e){return!e.ctrlKey&&!e.button}function defaultExtent$1(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function defaultTouchable$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function local(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function empty(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function brushSelection(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function brushX(){return brush$1(X)}function brushY(){return brush$1(Y)}function brush(){return brush$1(XY)}function brush$1(e){var t=defaultExtent$1,n=defaultFilter$1,r=defaultTouchable$1,i=!0,o=dispatch("start","brush","end"),l=6,f;function d(w){var _=w.property("__brush",S).selectAll(".overlay").data([type("overlay")]);_.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",cursors.overlay).merge(_).each(function(){var T=local(this).extent;select(this).attr("x",T[0][0]).attr("y",T[0][1]).attr("width",T[1][0]-T[0][0]).attr("height",T[1][1]-T[0][1])}),w.selectAll(".selection").data([type("selection")]).enter().append("rect").attr("class","selection").attr("cursor",cursors.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var I=w.selectAll(".handle").data(e.handles,function(T){return T.type});I.exit().remove(),I.enter().append("rect").attr("class",function(T){return"handle handle--"+T.type}).attr("cursor",function(T){return cursors[T.type]}),w.each(h).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",b).filter(r).on("touchstart.brush",b).on("touchmove.brush",v).on("touchend.brush touchcancel.brush",$).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}d.move=function(w,_,I){w.tween?w.on("start.brush",function(T){g(this,arguments).beforestart().start(T)}).on("interrupt.brush end.brush",function(T){g(this,arguments).end(T)}).tween("brush",function(){var T=this,P=T.__brush,R=g(T,arguments),N=P.selection,U=e.input(typeof _=="function"?_.apply(this,arguments):_,P.extent),G=interpolate$1(N,U);function V(q){P.selection=q===1&&U===null?null:G(q),h.call(T),R.brush()}return N!==null&&U!==null?V:V(1)}):w.each(function(){var T=this,P=arguments,R=T.__brush,N=e.input(typeof _=="function"?_.apply(T,P):_,R.extent),U=g(T,P).beforestart();interrupt(T),R.selection=N===null?null:N,h.call(T),U.start(I).brush(I).end(I)})},d.clear=function(w,_){d.move(w,null,_)};function h(){var w=select(this),_=local(this).selection;_?(w.selectAll(".selection").style("display",null).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1]),w.selectAll(".handle").style("display",null).attr("x",function(I){return I.type[I.type.length-1]==="e"?_[1][0]-l/2:_[0][0]-l/2}).attr("y",function(I){return I.type[0]==="s"?_[1][1]-l/2:_[0][1]-l/2}).attr("width",function(I){return I.type==="n"||I.type==="s"?_[1][0]-_[0][0]+l:l}).attr("height",function(I){return I.type==="e"||I.type==="w"?_[1][1]-_[0][1]+l:l})):w.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function g(w,_,I){var T=w.__brush.emitter;return T&&(!I||!T.clean)?T:new p(w,_,I)}function p(w,_,I){this.that=w,this.args=_,this.state=w.__brush,this.active=0,this.clean=I}p.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(w,_){return this.starting?(this.starting=!1,this.emit("start",w,_)):this.emit("brush",w),this},brush:function(w,_){return this.emit("brush",w,_),this},end:function(w,_){return--this.active===0&&(delete this.state.emitter,this.emit("end",w,_)),this},emit:function(w,_,I){var T=select(this.that).datum();o.call(w,this.that,new BrushEvent(w,{sourceEvent:_,target:d,selection:e.output(this.state.selection),mode:I,dispatch:o}),T)}};function b(w){if(f&&!w.touches||!n.apply(this,arguments))return;var _=this,I=w.target.__data__.type,T=(i&&w.metaKey?I="overlay":I)==="selection"?MODE_DRAG:i&&w.altKey?MODE_CENTER:MODE_HANDLE,P=e===Y?null:signsX[I],R=e===X?null:signsY[I],N=local(_),U=N.extent,G=N.selection,V=U[0][0],q,O,W=U[0][1],H,L,z=U[1][0],F,j,Z=U[1][1],J,ee,ne=0,ie=0,fe,ce=P&&R&&i&&w.shiftKey,ue,me,le=Array.from(w.touches||[w],ae=>{const ge=ae.identifier;return ae=pointer(ae,_),ae.point0=ae.slice(),ae.identifier=ge,ae});interrupt(_);var pe=g(_,arguments,!0).beforestart();if(I==="overlay"){G&&(fe=!0);const ae=[le[0],le[1]||le[0]];N.selection=G=[[q=e===Y?V:min$1(ae[0][0],ae[1][0]),H=e===X?W:min$1(ae[0][1],ae[1][1])],[F=e===Y?z:max$2(ae[0][0],ae[1][0]),J=e===X?Z:max$2(ae[0][1],ae[1][1])]],le.length>1&&de(w)}else q=G[0][0],H=G[0][1],F=G[1][0],J=G[1][1];O=q,L=H,j=F,ee=J;var te=select(_).attr("pointer-events","none"),oe=te.selectAll(".overlay").attr("cursor",cursors[I]);if(w.touches)pe.moved=Q,pe.ended=he;else{var se=select(w.view).on("mousemove.brush",Q,!0).on("mouseup.brush",he,!0);i&&se.on("keydown.brush",ye,!0).on("keyup.brush",be,!0),dragDisable(w.view)}h.call(_),pe.start(w,T.name);function Q(ae){for(const ge of ae.changedTouches||[ae])for(const $e of le)$e.identifier===ge.identifier&&($e.cur=pointer(ge,_));if(ce&&!ue&&!me&&le.length===1){const ge=le[0];abs$3(ge.cur[0]-ge[0])>abs$3(ge.cur[1]-ge[1])?me=!0:ue=!0}for(const ge of le)ge.cur&&(ge[0]=ge.cur[0],ge[1]=ge.cur[1]);fe=!0,noevent$1(ae),de(ae)}function de(ae){const ge=le[0],$e=ge.point0;var ve;switch(ne=ge[0]-$e[0],ie=ge[1]-$e[1],T){case MODE_SPACE:case MODE_DRAG:{P&&(ne=max$2(V-q,min$1(z-F,ne)),O=q+ne,j=F+ne),R&&(ie=max$2(W-H,min$1(Z-J,ie)),L=H+ie,ee=J+ie);break}case MODE_HANDLE:{le[1]?(P&&(O=max$2(V,min$1(z,le[0][0])),j=max$2(V,min$1(z,le[1][0])),P=1),R&&(L=max$2(W,min$1(Z,le[0][1])),ee=max$2(W,min$1(Z,le[1][1])),R=1)):(P<0?(ne=max$2(V-q,min$1(z-q,ne)),O=q+ne,j=F):P>0&&(ne=max$2(V-F,min$1(z-F,ne)),O=q,j=F+ne),R<0?(ie=max$2(W-H,min$1(Z-H,ie)),L=H+ie,ee=J):R>0&&(ie=max$2(W-J,min$1(Z-J,ie)),L=H,ee=J+ie));break}case MODE_CENTER:{P&&(O=max$2(V,min$1(z,q-ne*P)),j=max$2(V,min$1(z,F+ne*P))),R&&(L=max$2(W,min$1(Z,H-ie*R)),ee=max$2(W,min$1(Z,J+ie*R)));break}}j<O&&(P*=-1,ve=q,q=F,F=ve,ve=O,O=j,j=ve,I in flipX&&oe.attr("cursor",cursors[I=flipX[I]])),ee<L&&(R*=-1,ve=H,H=J,J=ve,ve=L,L=ee,ee=ve,I in flipY&&oe.attr("cursor",cursors[I=flipY[I]])),N.selection&&(G=N.selection),ue&&(O=G[0][0],j=G[1][0]),me&&(L=G[0][1],ee=G[1][1]),(G[0][0]!==O||G[0][1]!==L||G[1][0]!==j||G[1][1]!==ee)&&(N.selection=[[O,L],[j,ee]],h.call(_),pe.brush(ae,T.name))}function he(ae){if(nopropagation$1(ae),ae.touches){if(ae.touches.length)return;f&&clearTimeout(f),f=setTimeout(function(){f=null},500)}else yesdrag(ae.view,fe),se.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);te.attr("pointer-events","all"),oe.attr("cursor",cursors.overlay),N.selection&&(G=N.selection),empty(G)&&(N.selection=null,h.call(_)),pe.end(ae,T.name)}function ye(ae){switch(ae.keyCode){case 16:{ce=P&&R;break}case 18:{T===MODE_HANDLE&&(P&&(F=j-ne*P,q=O+ne*P),R&&(J=ee-ie*R,H=L+ie*R),T=MODE_CENTER,de(ae));break}case 32:{(T===MODE_HANDLE||T===MODE_CENTER)&&(P<0?F=j-ne:P>0&&(q=O-ne),R<0?J=ee-ie:R>0&&(H=L-ie),T=MODE_SPACE,oe.attr("cursor",cursors.selection),de(ae));break}default:return}noevent$1(ae)}function be(ae){switch(ae.keyCode){case 16:{ce&&(ue=me=ce=!1,de(ae));break}case 18:{T===MODE_CENTER&&(P<0?F=j:P>0&&(q=O),R<0?J=ee:R>0&&(H=L),T=MODE_HANDLE,de(ae));break}case 32:{T===MODE_SPACE&&(ae.altKey?(P&&(F=j-ne*P,q=O+ne*P),R&&(J=ee-ie*R,H=L+ie*R),T=MODE_CENTER):(P<0?F=j:P>0&&(q=O),R<0?J=ee:R>0&&(H=L),T=MODE_HANDLE),oe.attr("cursor",cursors[I]),de(ae));break}default:return}noevent$1(ae)}}function v(w){g(this,arguments).moved(w)}function $(w){g(this,arguments).ended(w)}function S(){var w=this.__brush||{selection:null};return w.extent=number2(t.apply(this,arguments)),w.dim=e,w}return d.extent=function(w){return arguments.length?(t=typeof w=="function"?w:constant$7(number2(w)),d):t},d.filter=function(w){return arguments.length?(n=typeof w=="function"?w:constant$7(!!w),d):n},d.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:constant$7(!!w),d):r},d.handleSize=function(w){return arguments.length?(l=+w,d):l},d.keyModifiers=function(w){return arguments.length?(i=!!w,d):i},d.on=function(){var w=o.on.apply(o,arguments);return w===o?d:w},d}var abs$2=Math.abs,cos$2=Math.cos,sin$2=Math.sin,pi$3=Math.PI,halfPi$2=pi$3/2,tau$4=pi$3*2,max$1=Math.max,epsilon$5=1e-12;function range$1(e,t){return Array.from({length:t-e},(n,r)=>e+r)}function compareValue(e){return function(t,n){return e(t.source.value+t.target.value,n.source.value+n.target.value)}}function chord(){return chord$1(!1,!1)}function chordTranspose(){return chord$1(!1,!0)}function chordDirected(){return chord$1(!0,!1)}function chord$1(e,t){var n=0,r=null,i=null,o=null;function l(f){var d=f.length,h=new Array(d),g=range$1(0,d),p=new Array(d*d),b=new Array(d),v=0,$;f=Float64Array.from({length:d*d},t?(S,w)=>f[w%d][w/d|0]:(S,w)=>f[w/d|0][w%d]);for(let S=0;S<d;++S){let w=0;for(let _=0;_<d;++_)w+=f[S*d+_]+e*f[_*d+S];v+=h[S]=w}v=max$1(0,tau$4-n*d)/v,$=v?n:tau$4/d;{let S=0;r&&g.sort((w,_)=>r(h[w],h[_]));for(const w of g){const _=S;if(e){const I=range$1(~d+1,d).filter(T=>T<0?f[~T*d+w]:f[w*d+T]);i&&I.sort((T,P)=>i(T<0?-f[~T*d+w]:f[w*d+T],P<0?-f[~P*d+w]:f[w*d+P]));for(const T of I)if(T<0){const P=p[~T*d+w]||(p[~T*d+w]={source:null,target:null});P.target={index:w,startAngle:S,endAngle:S+=f[~T*d+w]*v,value:f[~T*d+w]}}else{const P=p[w*d+T]||(p[w*d+T]={source:null,target:null});P.source={index:w,startAngle:S,endAngle:S+=f[w*d+T]*v,value:f[w*d+T]}}b[w]={index:w,startAngle:_,endAngle:S,value:h[w]}}else{const I=range$1(0,d).filter(T=>f[w*d+T]||f[T*d+w]);i&&I.sort((T,P)=>i(f[w*d+T],f[w*d+P]));for(const T of I){let P;if(w<T?(P=p[w*d+T]||(p[w*d+T]={source:null,target:null}),P.source={index:w,startAngle:S,endAngle:S+=f[w*d+T]*v,value:f[w*d+T]}):(P=p[T*d+w]||(p[T*d+w]={source:null,target:null}),P.target={index:w,startAngle:S,endAngle:S+=f[w*d+T]*v,value:f[w*d+T]},w===T&&(P.source=P.target)),P.source&&P.target&&P.source.value<P.target.value){const R=P.source;P.source=P.target,P.target=R}}b[w]={index:w,startAngle:_,endAngle:S,value:h[w]}}S+=$}}return p=Object.values(p),p.groups=b,o?p.sort(o):p}return l.padAngle=function(f){return arguments.length?(n=max$1(0,f),l):n},l.sortGroups=function(f){return arguments.length?(r=f,l):r},l.sortSubgroups=function(f){return arguments.length?(i=f,l):i},l.sortChords=function(f){return arguments.length?(f==null?o=null:(o=compareValue(f))._=f,l):o&&o._},l}const pi$2=Math.PI,tau$3=2*pi$2,epsilon$4=1e-6,tauEpsilon=tau$3-epsilon$4;function append$1(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function appendRound$1(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return append$1;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Path$1{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?append$1:appendRound$1(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+l}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let l=this._x1,f=this._y1,d=r-t,h=i-n,g=l-t,p=f-n,b=g*g+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(b>epsilon$4)if(!(Math.abs(p*d-h*g)>epsilon$4)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let v=r-l,$=i-f,S=d*d+h*h,w=v*v+$*$,_=Math.sqrt(S),I=Math.sqrt(b),T=o*Math.tan((pi$2-Math.acos((S+b-w)/(2*_*I)))/2),P=T/I,R=T/_;Math.abs(P-1)>epsilon$4&&this._append`L${t+P*g},${n+P*p}`,this._append`A${o},${o},0,0,${+(p*v>g*$)},${this._x1=t+R*d},${this._y1=n+R*h}`}}arc(t,n,r,i,o,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let f=r*Math.cos(i),d=r*Math.sin(i),h=t+f,g=n+d,p=1^l,b=l?i-o:o-i;this._x1===null?this._append`M${h},${g}`:(Math.abs(this._x1-h)>epsilon$4||Math.abs(this._y1-g)>epsilon$4)&&this._append`L${h},${g}`,r&&(b<0&&(b=b%tau$3+tau$3),b>tauEpsilon?this._append`A${r},${r},0,1,${p},${t-f},${n-d}A${r},${r},0,1,${p},${this._x1=h},${this._y1=g}`:b>epsilon$4&&this._append`A${r},${r},0,${+(b>=pi$2)},${p},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function path(){return new Path$1}path.prototype=Path$1.prototype;function pathRound(e=3){return new Path$1(+e)}var slice$2=Array.prototype.slice;function constant$6(e){return function(){return e}}function defaultSource$1(e){return e.source}function defaultTarget(e){return e.target}function defaultRadius$1(e){return e.radius}function defaultStartAngle(e){return e.startAngle}function defaultEndAngle(e){return e.endAngle}function defaultPadAngle(){return 0}function defaultArrowheadRadius(){return 10}function ribbon(e){var t=defaultSource$1,n=defaultTarget,r=defaultRadius$1,i=defaultRadius$1,o=defaultStartAngle,l=defaultEndAngle,f=defaultPadAngle,d=null;function h(){var g,p=t.apply(this,arguments),b=n.apply(this,arguments),v=f.apply(this,arguments)/2,$=slice$2.call(arguments),S=+r.apply(this,($[0]=p,$)),w=o.apply(this,$)-halfPi$2,_=l.apply(this,$)-halfPi$2,I=+i.apply(this,($[0]=b,$)),T=o.apply(this,$)-halfPi$2,P=l.apply(this,$)-halfPi$2;if(d||(d=g=path()),v>epsilon$5&&(abs$2(_-w)>v*2+epsilon$5?_>w?(w+=v,_-=v):(w-=v,_+=v):w=_=(w+_)/2,abs$2(P-T)>v*2+epsilon$5?P>T?(T+=v,P-=v):(T-=v,P+=v):T=P=(T+P)/2),d.moveTo(S*cos$2(w),S*sin$2(w)),d.arc(0,0,S,w,_),w!==T||_!==P)if(e){var R=+e.apply(this,arguments),N=I-R,U=(T+P)/2;d.quadraticCurveTo(0,0,N*cos$2(T),N*sin$2(T)),d.lineTo(I*cos$2(U),I*sin$2(U)),d.lineTo(N*cos$2(P),N*sin$2(P))}else d.quadraticCurveTo(0,0,I*cos$2(T),I*sin$2(T)),d.arc(0,0,I,T,P);if(d.quadraticCurveTo(0,0,S*cos$2(w),S*sin$2(w)),d.closePath(),g)return d=null,g+""||null}return e&&(h.headRadius=function(g){return arguments.length?(e=typeof g=="function"?g:constant$6(+g),h):e}),h.radius=function(g){return arguments.length?(r=i=typeof g=="function"?g:constant$6(+g),h):r},h.sourceRadius=function(g){return arguments.length?(r=typeof g=="function"?g:constant$6(+g),h):r},h.targetRadius=function(g){return arguments.length?(i=typeof g=="function"?g:constant$6(+g),h):i},h.startAngle=function(g){return arguments.length?(o=typeof g=="function"?g:constant$6(+g),h):o},h.endAngle=function(g){return arguments.length?(l=typeof g=="function"?g:constant$6(+g),h):l},h.padAngle=function(g){return arguments.length?(f=typeof g=="function"?g:constant$6(+g),h):f},h.source=function(g){return arguments.length?(t=g,h):t},h.target=function(g){return arguments.length?(n=g,h):n},h.context=function(g){return arguments.length?(d=g==null?null:g,h):d},h}function ribbon$1(){return ribbon()}function ribbonArrow(){return ribbon(defaultArrowheadRadius)}var array$2=Array.prototype,slice$1=array$2.slice;function ascending$1(e,t){return e-t}function area$3(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}var constant$5=e=>()=>e;function contains$2(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=ringContains(e,t[n]))return i;return 0}function ringContains(e,t){for(var n=t[0],r=t[1],i=-1,o=0,l=e.length,f=l-1;o<l;f=o++){var d=e[o],h=d[0],g=d[1],p=e[f],b=p[0],v=p[1];if(segmentContains(d,p,t))return 0;g>r!=v>r&&n<(b-h)*(r-g)/(v-g)+h&&(i=-i)}return i}function segmentContains(e,t,n){var r;return collinear$1(e,t,n)&&within(e[r=+(e[0]===t[0])],n[r],t[r])}function collinear$1(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function within(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function noop$2(){}var cases=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Contours(){var e=1,t=1,n=thresholdSturges,r=d;function i(h){var g=n(h);if(Array.isArray(g))g=g.slice().sort(ascending$1);else{const p=extent$1(h,finite);for(g=ticks(...nice$1(p[0],p[1],g),g);g[g.length-1]>=p[1];)g.pop();for(;g[1]<p[0];)g.shift()}return g.map(p=>o(h,p))}function o(h,g){const p=g==null?NaN:+g;if(isNaN(p))throw new Error(`invalid value: ${g}`);var b=[],v=[];return l(h,p,function($){r($,h,p),area$3($)>0?b.push([$]):v.push($)}),v.forEach(function($){for(var S=0,w=b.length,_;S<w;++S)if(contains$2((_=b[S])[0],$)!==-1){_.push($);return}}),{type:"MultiPolygon",value:g,coordinates:b}}function l(h,g,p){var b=new Array,v=new Array,$,S,w,_,I,T;for($=S=-1,_=above(h[0],g),cases[_<<1].forEach(P);++$<e-1;)w=_,_=above(h[$+1],g),cases[w|_<<1].forEach(P);for(cases[_<<0].forEach(P);++S<t-1;){for($=-1,_=above(h[S*e+e],g),I=above(h[S*e],g),cases[_<<1|I<<2].forEach(P);++$<e-1;)w=_,_=above(h[S*e+e+$+1],g),T=I,I=above(h[S*e+$+1],g),cases[w|_<<1|I<<2|T<<3].forEach(P);cases[_|I<<3].forEach(P)}for($=-1,I=h[S*e]>=g,cases[I<<2].forEach(P);++$<e-1;)T=I,I=above(h[S*e+$+1],g),cases[I<<2|T<<3].forEach(P);cases[I<<3].forEach(P);function P(R){var N=[R[0][0]+$,R[0][1]+S],U=[R[1][0]+$,R[1][1]+S],G=f(N),V=f(U),q,O;(q=v[G])?(O=b[V])?(delete v[q.end],delete b[O.start],q===O?(q.ring.push(U),p(q.ring)):b[q.start]=v[O.end]={start:q.start,end:O.end,ring:q.ring.concat(O.ring)}):(delete v[q.end],q.ring.push(U),v[q.end=V]=q):(q=b[V])?(O=v[G])?(delete b[q.start],delete v[O.end],q===O?(q.ring.push(U),p(q.ring)):b[O.start]=v[q.end]={start:O.start,end:q.end,ring:O.ring.concat(q.ring)}):(delete b[q.start],q.ring.unshift(N),b[q.start=G]=q):b[G]=v[V]={start:G,end:V,ring:[N,U]}}}function f(h){return h[0]*2+h[1]*(e+1)*4}function d(h,g,p){h.forEach(function(b){var v=b[0],$=b[1],S=v|0,w=$|0,_=valid(g[w*e+S]);v>0&&v<e&&S===v&&(b[0]=smooth1(v,valid(g[w*e+S-1]),_,p)),$>0&&$<t&&w===$&&(b[1]=smooth1($,valid(g[(w-1)*e+S]),_,p))})}return i.contour=o,i.size=function(h){if(!arguments.length)return[e,t];var g=Math.floor(h[0]),p=Math.floor(h[1]);if(!(g>=0&&p>=0))throw new Error("invalid size");return e=g,t=p,i},i.thresholds=function(h){return arguments.length?(n=typeof h=="function"?h:Array.isArray(h)?constant$5(slice$1.call(h)):constant$5(h),i):n},i.smooth=function(h){return arguments.length?(r=h?d:noop$2,i):r===d},i}function finite(e){return isFinite(e)?e:NaN}function above(e,t){return e==null?!1:+e>=t}function valid(e){return e==null||isNaN(e=+e)?-1/0:e}function smooth1(e,t,n,r){const i=r-t,o=n-t,l=isFinite(i)||isFinite(o)?i/o:Math.sign(i)/Math.sign(o);return isNaN(l)?e:e+l-.5}function defaultX$1(e){return e[0]}function defaultY$1(e){return e[1]}function defaultWeight(){return 1}function density(){var e=defaultX$1,t=defaultY$1,n=defaultWeight,r=960,i=500,o=20,l=2,f=o*3,d=r+f*2>>l,h=i+f*2>>l,g=constant$5(20);function p(I){var T=new Float32Array(d*h),P=Math.pow(2,-l),R=-1;for(const H of I){var N=(e(H,++R,I)+f)*P,U=(t(H,R,I)+f)*P,G=+n(H,R,I);if(G&&N>=0&&N<d&&U>=0&&U<h){var V=Math.floor(N),q=Math.floor(U),O=N-V-.5,W=U-q-.5;T[V+q*d]+=(1-O)*(1-W)*G,T[V+1+q*d]+=O*(1-W)*G,T[V+1+(q+1)*d]+=O*W*G,T[V+(q+1)*d]+=(1-O)*W*G}}return blur2({data:T,width:d,height:h},o*P),T}function b(I){var T=p(I),P=g(T),R=Math.pow(2,2*l);return Array.isArray(P)||(P=ticks(Number.MIN_VALUE,max$3(T)/R,P)),Contours().size([d,h]).thresholds(P.map(N=>N*R))(T).map((N,U)=>(N.value=+P[U],v(N)))}b.contours=function(I){var T=p(I),P=Contours().size([d,h]),R=Math.pow(2,2*l),N=U=>{U=+U;var G=v(P.contour(T,U*R));return G.value=U,G};return Object.defineProperty(N,"max",{get:()=>max$3(T)/R}),N};function v(I){return I.coordinates.forEach($),I}function $(I){I.forEach(S)}function S(I){I.forEach(w)}function w(I){I[0]=I[0]*Math.pow(2,l)-f,I[1]=I[1]*Math.pow(2,l)-f}function _(){return f=o*3,d=r+f*2>>l,h=i+f*2>>l,b}return b.x=function(I){return arguments.length?(e=typeof I=="function"?I:constant$5(+I),b):e},b.y=function(I){return arguments.length?(t=typeof I=="function"?I:constant$5(+I),b):t},b.weight=function(I){return arguments.length?(n=typeof I=="function"?I:constant$5(+I),b):n},b.size=function(I){if(!arguments.length)return[r,i];var T=+I[0],P=+I[1];if(!(T>=0&&P>=0))throw new Error("invalid size");return r=T,i=P,_()},b.cellSize=function(I){if(!arguments.length)return 1<<l;if(!((I=+I)>=1))throw new Error("invalid cell size");return l=Math.floor(Math.log(I)/Math.LN2),_()},b.thresholds=function(I){return arguments.length?(g=typeof I=="function"?I:Array.isArray(I)?constant$5(slice$1.call(I)):constant$5(I),b):g},b.bandwidth=function(I){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((I=+I)>=0))throw new Error("invalid bandwidth");return o=(Math.sqrt(4*I*I+1)-1)/2,_()},b}const epsilon$3=11102230246251565e-32,splitter=134217729,resulterrbound=(3+8*epsilon$3)*epsilon$3;function sum$1(e,t,n,r,i){let o,l,f,d,h=t[0],g=r[0],p=0,b=0;g>h==g>-h?(o=h,h=t[++p]):(o=g,g=r[++b]);let v=0;if(p<e&&b<n)for(g>h==g>-h?(l=h+o,f=o-(l-h),h=t[++p]):(l=g+o,f=o-(l-g),g=r[++b]),o=l,f!==0&&(i[v++]=f);p<e&&b<n;)g>h==g>-h?(l=o+h,d=l-o,f=o-(l-d)+(h-d),h=t[++p]):(l=o+g,d=l-o,f=o-(l-d)+(g-d),g=r[++b]),o=l,f!==0&&(i[v++]=f);for(;p<e;)l=o+h,d=l-o,f=o-(l-d)+(h-d),h=t[++p],o=l,f!==0&&(i[v++]=f);for(;b<n;)l=o+g,d=l-o,f=o-(l-d)+(g-d),g=r[++b],o=l,f!==0&&(i[v++]=f);return(o!==0||v===0)&&(i[v++]=o),v}function estimate(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function vec(e){return new Float64Array(e)}const ccwerrboundA=(3+16*epsilon$3)*epsilon$3,ccwerrboundB=(2+12*epsilon$3)*epsilon$3,ccwerrboundC=(9+64*epsilon$3)*epsilon$3*epsilon$3,B=vec(4),C1=vec(8),C2=vec(12),D=vec(16),u=vec(4);function orient2dadapt(e,t,n,r,i,o,l){let f,d,h,g,p,b,v,$,S,w,_,I,T,P,R,N,U,G;const V=e-i,q=n-i,O=t-o,W=r-o;P=V*W,b=splitter*V,v=b-(b-V),$=V-v,b=splitter*W,S=b-(b-W),w=W-S,R=$*w-(P-v*S-$*S-v*w),N=O*q,b=splitter*O,v=b-(b-O),$=O-v,b=splitter*q,S=b-(b-q),w=q-S,U=$*w-(N-v*S-$*S-v*w),_=R-U,p=R-_,B[0]=R-(_+p)+(p-U),I=P+_,p=I-P,T=P-(I-p)+(_-p),_=T-N,p=T-_,B[1]=T-(_+p)+(p-N),G=I+_,p=G-I,B[2]=I-(G-p)+(_-p),B[3]=G;let H=estimate(4,B),L=ccwerrboundB*l;if(H>=L||-H>=L||(p=e-V,f=e-(V+p)+(p-i),p=n-q,h=n-(q+p)+(p-i),p=t-O,d=t-(O+p)+(p-o),p=r-W,g=r-(W+p)+(p-o),f===0&&d===0&&h===0&&g===0)||(L=ccwerrboundC*l+resulterrbound*Math.abs(H),H+=V*g+W*f-(O*h+q*d),H>=L||-H>=L))return H;P=f*W,b=splitter*f,v=b-(b-f),$=f-v,b=splitter*W,S=b-(b-W),w=W-S,R=$*w-(P-v*S-$*S-v*w),N=d*q,b=splitter*d,v=b-(b-d),$=d-v,b=splitter*q,S=b-(b-q),w=q-S,U=$*w-(N-v*S-$*S-v*w),_=R-U,p=R-_,u[0]=R-(_+p)+(p-U),I=P+_,p=I-P,T=P-(I-p)+(_-p),_=T-N,p=T-_,u[1]=T-(_+p)+(p-N),G=I+_,p=G-I,u[2]=I-(G-p)+(_-p),u[3]=G;const z=sum$1(4,B,4,u,C1);P=V*g,b=splitter*V,v=b-(b-V),$=V-v,b=splitter*g,S=b-(b-g),w=g-S,R=$*w-(P-v*S-$*S-v*w),N=O*h,b=splitter*O,v=b-(b-O),$=O-v,b=splitter*h,S=b-(b-h),w=h-S,U=$*w-(N-v*S-$*S-v*w),_=R-U,p=R-_,u[0]=R-(_+p)+(p-U),I=P+_,p=I-P,T=P-(I-p)+(_-p),_=T-N,p=T-_,u[1]=T-(_+p)+(p-N),G=I+_,p=G-I,u[2]=I-(G-p)+(_-p),u[3]=G;const F=sum$1(z,C1,4,u,C2);P=f*g,b=splitter*f,v=b-(b-f),$=f-v,b=splitter*g,S=b-(b-g),w=g-S,R=$*w-(P-v*S-$*S-v*w),N=d*h,b=splitter*d,v=b-(b-d),$=d-v,b=splitter*h,S=b-(b-h),w=h-S,U=$*w-(N-v*S-$*S-v*w),_=R-U,p=R-_,u[0]=R-(_+p)+(p-U),I=P+_,p=I-P,T=P-(I-p)+(_-p),_=T-N,p=T-_,u[1]=T-(_+p)+(p-N),G=I+_,p=G-I,u[2]=I-(G-p)+(_-p),u[3]=G;const j=sum$1(F,C2,4,u,D);return D[j-1]}function orient2d(e,t,n,r,i,o){const l=(t-o)*(n-i),f=(e-i)*(r-o),d=l-f;if(l===0||f===0||l>0!=f>0)return d;const h=Math.abs(l+f);return Math.abs(d)>=ccwerrboundA*h?d:-orient2dadapt(e,t,n,r,i,o,h)}const EPSILON=Math.pow(2,-52),EDGE_STACK=new Uint32Array(512);class Delaunator{static from(t,n=defaultGetX,r=defaultGetY){const i=t.length,o=new Float64Array(i*2);for(let l=0;l<i;l++){const f=t[l];o[2*l]=n(f),o[2*l+1]=r(f)}return new Delaunator(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,l=t.length>>1;let f=1/0,d=1/0,h=-1/0,g=-1/0;for(let q=0;q<l;q++){const O=t[2*q],W=t[2*q+1];O<f&&(f=O),W<d&&(d=W),O>h&&(h=O),W>g&&(g=W),this._ids[q]=q}const p=(f+h)/2,b=(d+g)/2;let v=1/0,$,S,w;for(let q=0;q<l;q++){const O=dist(p,b,t[2*q],t[2*q+1]);O<v&&($=q,v=O)}const _=t[2*$],I=t[2*$+1];v=1/0;for(let q=0;q<l;q++){if(q===$)continue;const O=dist(_,I,t[2*q],t[2*q+1]);O<v&&O>0&&(S=q,v=O)}let T=t[2*S],P=t[2*S+1],R=1/0;for(let q=0;q<l;q++){if(q===$||q===S)continue;const O=circumradius(_,I,T,P,t[2*q],t[2*q+1]);O<R&&(w=q,R=O)}let N=t[2*w],U=t[2*w+1];if(R===1/0){for(let W=0;W<l;W++)this._dists[W]=t[2*W]-t[0]||t[2*W+1]-t[1];quicksort(this._ids,this._dists,0,l-1);const q=new Uint32Array(l);let O=0;for(let W=0,H=-1/0;W<l;W++){const L=this._ids[W];this._dists[L]>H&&(q[O++]=L,H=this._dists[L])}this.hull=q.subarray(0,O),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(orient2d(_,I,T,P,N,U)<0){const q=S,O=T,W=P;S=w,T=N,P=U,w=q,N=O,U=W}const G=circumcenter(_,I,T,P,N,U);this._cx=G.x,this._cy=G.y;for(let q=0;q<l;q++)this._dists[q]=dist(t[2*q],t[2*q+1],G.x,G.y);quicksort(this._ids,this._dists,0,l-1),this._hullStart=$;let V=3;r[$]=n[w]=S,r[S]=n[$]=w,r[w]=n[S]=$,i[$]=0,i[S]=1,i[w]=2,o.fill(-1),o[this._hashKey(_,I)]=$,o[this._hashKey(T,P)]=S,o[this._hashKey(N,U)]=w,this.trianglesLen=0,this._addTriangle($,S,w,-1,-1,-1);for(let q=0,O,W;q<this._ids.length;q++){const H=this._ids[q],L=t[2*H],z=t[2*H+1];if(q>0&&Math.abs(L-O)<=EPSILON&&Math.abs(z-W)<=EPSILON||(O=L,W=z,H===$||H===S||H===w))continue;let F=0;for(let ne=0,ie=this._hashKey(L,z);ne<this._hashSize&&(F=o[(ie+ne)%this._hashSize],!(F!==-1&&F!==r[F]));ne++);F=n[F];let j=F,Z;for(;Z=r[j],orient2d(L,z,t[2*j],t[2*j+1],t[2*Z],t[2*Z+1])>=0;)if(j=Z,j===F){j=-1;break}if(j===-1)continue;let J=this._addTriangle(j,H,r[j],-1,-1,i[j]);i[H]=this._legalize(J+2),i[j]=J,V++;let ee=r[j];for(;Z=r[ee],orient2d(L,z,t[2*ee],t[2*ee+1],t[2*Z],t[2*Z+1])<0;)J=this._addTriangle(ee,H,Z,i[H],-1,i[ee]),i[H]=this._legalize(J+2),r[ee]=ee,V--,ee=Z;if(j===F)for(;Z=n[j],orient2d(L,z,t[2*Z],t[2*Z+1],t[2*j],t[2*j+1])<0;)J=this._addTriangle(Z,H,j,-1,i[j],i[Z]),this._legalize(J+2),i[Z]=J,r[j]=j,V--,j=Z;this._hullStart=n[H]=j,r[j]=n[ee]=H,r[H]=ee,o[this._hashKey(L,z)]=H,o[this._hashKey(t[2*j],t[2*j+1])]=j}this.hull=new Uint32Array(V);for(let q=0,O=this._hullStart;q<V;q++)this.hull[q]=O,O=r[O];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(pseudoAngle(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,l=0;for(;;){const f=r[t],d=t-t%3;if(l=d+(t+2)%3,f===-1){if(o===0)break;t=EDGE_STACK[--o];continue}const h=f-f%3,g=d+(t+1)%3,p=h+(f+2)%3,b=n[l],v=n[t],$=n[g],S=n[p];if(inCircle(i[2*b],i[2*b+1],i[2*v],i[2*v+1],i[2*$],i[2*$+1],i[2*S],i[2*S+1])){n[t]=S,n[f]=b;const _=r[p];if(_===-1){let T=this._hullStart;do{if(this._hullTri[T]===p){this._hullTri[T]=t;break}T=this._hullPrev[T]}while(T!==this._hullStart)}this._link(t,_),this._link(f,r[l]),this._link(l,p);const I=h+(f+1)%3;o<EDGE_STACK.length&&(EDGE_STACK[o++]=I)}else{if(o===0)break;t=EDGE_STACK[--o]}}return l}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,l){const f=this.trianglesLen;return this._triangles[f]=t,this._triangles[f+1]=n,this._triangles[f+2]=r,this._link(f,i),this._link(f+1,o),this._link(f+2,l),this.trianglesLen+=3,f}}function pseudoAngle(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function dist(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function inCircle(e,t,n,r,i,o,l,f){const d=e-l,h=t-f,g=n-l,p=r-f,b=i-l,v=o-f,$=d*d+h*h,S=g*g+p*p,w=b*b+v*v;return d*(p*w-S*v)-h*(g*w-S*b)+$*(g*v-p*b)<0}function circumradius(e,t,n,r,i,o){const l=n-e,f=r-t,d=i-e,h=o-t,g=l*l+f*f,p=d*d+h*h,b=.5/(l*h-f*d),v=(h*g-f*p)*b,$=(l*p-d*g)*b;return v*v+$*$}function circumcenter(e,t,n,r,i,o){const l=n-e,f=r-t,d=i-e,h=o-t,g=l*l+f*f,p=d*d+h*h,b=.5/(l*h-f*d),v=e+(h*g-f*p)*b,$=t+(l*p-d*g)*b;return{x:v,y:$}}function quicksort(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],l=t[o];let f=i-1;for(;f>=n&&t[e[f]]>l;)e[f+1]=e[f--];e[f+1]=o}else{const i=n+r>>1;let o=n+1,l=r;swap(e,i,o),t[e[n]]>t[e[r]]&&swap(e,n,r),t[e[o]]>t[e[r]]&&swap(e,o,r),t[e[n]]>t[e[o]]&&swap(e,n,o);const f=e[o],d=t[f];for(;;){do o++;while(t[e[o]]<d);do l--;while(t[e[l]]>d);if(l<o)break;swap(e,o,l)}e[n+1]=e[l],e[l]=f,r-o+1>=l-n?(quicksort(e,t,o,r),quicksort(e,t,n,l-1)):(quicksort(e,t,n,l-1),quicksort(e,t,o,r))}}function swap(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function defaultGetX(e){return e[0]}function defaultGetY(e){return e[1]}const epsilon$2=1e-6;class Path{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>epsilon$2||Math.abs(this._y1-o)>epsilon$2)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Polygon{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class Voronoi{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this,o=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let v=0,$=0,S=r.length,w,_;v<S;v+=3,$+=2){const I=r[v]*2,T=r[v+1]*2,P=r[v+2]*2,R=t[I],N=t[I+1],U=t[T],G=t[T+1],V=t[P],q=t[P+1],O=U-R,W=G-N,H=V-R,L=q-N,z=(O*L-W*H)*2;if(Math.abs(z)<1e-9){let F=1e9;const j=r[0]*2;F*=Math.sign((t[j]-R)*L-(t[j+1]-N)*H),w=(R+V)/2-F*L,_=(N+q)/2+F*H}else{const F=1/z,j=O*O+W*W,Z=H*H+L*L;w=R+(L*j-W*Z)*F,_=N+(O*Z-H*j)*F}o[$]=w,o[$+1]=_}let l=n[n.length-1],f,d=l*4,h,g=t[2*l],p,b=t[2*l+1];i.fill(0);for(let v=0;v<n.length;++v)l=n[v],f=d,h=g,p=b,d=l*4,g=t[2*l],b=t[2*l+1],i[f+2]=i[d]=p-b,i[f+3]=i[d+1]=g-h}render(t){const n=t==null?t=new Path:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:l,vectors:f}=this;if(o.length<=1)return null;for(let g=0,p=r.length;g<p;++g){const b=r[g];if(b<g)continue;const v=Math.floor(g/3)*2,$=Math.floor(b/3)*2,S=l[v],w=l[v+1],_=l[$],I=l[$+1];this._renderSegment(S,w,_,I,t)}let d,h=o[o.length-1];for(let g=0;g<o.length;++g){d=h,h=o[g];const p=Math.floor(i[h]/3)*2,b=l[p],v=l[p+1],$=d*4,S=this._project(b,v,f[$+2],f[$+3]);S&&this._renderSegment(b,v,S[0],S[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Path:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Path:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let l=2;l<o;l+=2)(i[l]!==i[l-2]||i[l+1]!==i[l-1])&&n.lineTo(i[l],i[l+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new Polygon;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let l;const f=this._regioncode(t,n),d=this._regioncode(r,i);f===0&&d===0?(o.moveTo(t,n),o.lineTo(r,i)):(l=this._clipSegment(t,n,r,i,f,d))&&(o.moveTo(l[0],l[1]),o.lineTo(l[2],l[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,l=n.length;o<l;o+=2)for(let f=0,d=i.length;f<d;f+=2)if(n[o]==i[f]&&n[o+1]==i[f+1]&&n[(o+2)%l]==i[(f+d-2)%d]&&n[(o+3)%l]==i[(f+d-1)%d]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,l=r[t];if(l===-1)return null;const f=[];let d=l;do{const h=Math.floor(d/3);if(f.push(n[h*2],n[h*2+1]),d=d%3===2?d-2:d+1,o[d]!==t)break;d=i[d]}while(d!==l&&d!==-1);return f}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n)}_clipFinite(t,n){const r=n.length;let i=null,o,l,f=n[r-2],d=n[r-1],h,g=this._regioncode(f,d),p,b=0;for(let v=0;v<r;v+=2)if(o=f,l=d,f=n[v],d=n[v+1],h=g,g=this._regioncode(f,d),h===0&&g===0)p=b,b=0,i?i.push(f,d):i=[f,d];else{let $,S,w,_,I;if(h===0){if(($=this._clipSegment(o,l,f,d,h,g))===null)continue;[S,w,_,I]=$}else{if(($=this._clipSegment(f,d,o,l,g,h))===null)continue;[_,I,S,w]=$,p=b,b=this._edgecode(S,w),p&&b&&this._edge(t,p,b,i,i.length),i?i.push(S,w):i=[S,w]}p=b,b=this._edgecode(_,I),p&&b&&this._edge(t,p,b,i,i.length),i?i.push(_,I):i=[_,I]}if(i)p=b,b=this._edgecode(i[0],i[1]),p&&b&&this._edge(t,p,b,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,l){for(;;){if(o===0&&l===0)return[t,n,r,i];if(o&l)return null;let f,d,h=o||l;h&8?(f=t+(r-t)*(this.ymax-n)/(i-n),d=this.ymax):h&4?(f=t+(r-t)*(this.ymin-n)/(i-n),d=this.ymin):h&2?(d=n+(i-n)*(this.xmax-t)/(r-t),f=this.xmax):(d=n+(i-n)*(this.xmin-t)/(r-t),f=this.xmin),o?(t=f,n=d,o=this._regioncode(t,n)):(r=f,i=d,l=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,l){let f=Array.from(n),d;if((d=this._project(f[0],f[1],r,i))&&f.unshift(d[0],d[1]),(d=this._project(f[f.length-2],f[f.length-1],o,l))&&f.push(d[0],d[1]),f=this._clipFinite(t,f))for(let h=0,g=f.length,p,b=this._edgecode(f[g-2],f[g-1]);h<g;h+=2)p=b,b=this._edgecode(f[h],f[h+1]),p&&b&&(h=this._edge(t,p,b,f,h),g=f.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(f=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return f}_edge(t,n,r,i,o){for(;n!==r;){let l,f;switch(n){case 5:n=4;continue;case 4:n=6,l=this.xmax,f=this.ymin;break;case 6:n=2;continue;case 2:n=10,l=this.xmax,f=this.ymax;break;case 10:n=8;continue;case 8:n=9,l=this.xmin,f=this.ymax;break;case 9:n=1;continue;case 1:n=5,l=this.xmin,f=this.ymin;break}(i[o]!==l||i[o+1]!==f)&&this.contains(t,l,f)&&(i.splice(o,0,l,f),o+=2)}if(i.length>4)for(let l=0;l<i.length;l+=2){const f=(l+2)%i.length,d=(l+4)%i.length;(i[l]===i[f]&&i[f]===i[d]||i[l+1]===i[f+1]&&i[f+1]===i[d+1])&&(i.splice(f,2),l-=2)}return o}_project(t,n,r,i){let o=1/0,l,f,d;if(i<0){if(n<=this.ymin)return null;(l=(this.ymin-n)/i)<o&&(d=this.ymin,f=t+(o=l)*r)}else if(i>0){if(n>=this.ymax)return null;(l=(this.ymax-n)/i)<o&&(d=this.ymax,f=t+(o=l)*r)}if(r>0){if(t>=this.xmax)return null;(l=(this.xmax-t)/r)<o&&(f=this.xmax,d=n+(o=l)*i)}else if(r<0){if(t<=this.xmin)return null;(l=(this.xmin-t)/r)<o&&(f=this.xmin,d=n+(o=l)*i)}return[f,d]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const tau$2=2*Math.PI,pow$2=Math.pow;function pointX(e){return e[0]}function pointY(e){return e[1]}function collinear(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],l=2*t[r+2];if((n[l]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[l+1]-n[i+1])>1e-10)return!1}return!0}function jitter(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Delaunay{static from(t,n=pointX,r=pointY,i){return new Delaunay("length"in t?flatArray(t,n,r,i):Float64Array.from(flatIterable(t,n,r,i)))}constructor(t){this._delaunator=new Delaunator(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&collinear(t)){this.collinear=Int32Array.from({length:n.length/2},(b,v)=>v).sort((b,v)=>n[2*b]-n[2*v]||n[2*b+1]-n[2*v+1]);const d=this.collinear[0],h=this.collinear[this.collinear.length-1],g=[n[2*d],n[2*d+1],n[2*h],n[2*h+1]],p=1e-8*Math.hypot(g[3]-g[1],g[2]-g[0]);for(let b=0,v=n.length/2;b<v;++b){const $=jitter(n[2*b],n[2*b+1],p);n[2*b]=$[0],n[2*b+1]=$[1]}this._delaunator=new Delaunator(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,l=this.inedges.fill(-1),f=this._hullIndex.fill(-1);for(let d=0,h=r.length;d<h;++d){const g=o[d%3===2?d-2:d+1];(r[d]===-1||l[g]===-1)&&(l[g]=d)}for(let d=0,h=i.length;d<h;++d)f[i[d]]=d;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],l[i[0]]=1,i.length===2&&(l[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Voronoi(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:l,collinear:f}=this;if(f){const p=f.indexOf(t);p>0&&(yield f[p-1]),p<f.length-1&&(yield f[p+1]);return}const d=n[t];if(d===-1)return;let h=d,g=-1;do{if(yield g=l[h],h=h%3===2?h-2:h+1,l[h]!==t)return;if(h=o[h],h===-1){const p=r[(i[t]+1)%r.length];p!==g&&(yield p);return}}while(h!==d)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:l,halfedges:f,triangles:d,points:h}=this;if(i[t]===-1||!h.length)return(t+1)%(h.length>>1);let g=t,p=pow$2(n-h[t*2],2)+pow$2(r-h[t*2+1],2);const b=i[t];let v=b;do{let $=d[v];const S=pow$2(n-h[$*2],2)+pow$2(r-h[$*2+1],2);if(S<p&&(p=S,g=$),v=v%3===2?v-2:v+1,d[v]!==t)break;if(v=f[v],v===-1){if(v=o[(l[t]+1)%o.length],v!==$&&pow$2(n-h[v*2],2)+pow$2(r-h[v*2+1],2)<p)return v;break}}while(v!==b);return g}render(t){const n=t==null?t=new Path:void 0,{points:r,halfedges:i,triangles:o}=this;for(let l=0,f=i.length;l<f;++l){const d=i[l];if(d<l)continue;const h=o[l]*2,g=o[d]*2;t.moveTo(r[h],r[h+1]),t.lineTo(r[g],r[g+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Path:void 0,{points:i}=this;for(let o=0,l=i.length;o<l;o+=2){const f=i[o],d=i[o+1];t.moveTo(f+n,d),t.arc(f,d,n,0,tau$2)}return r&&r.value()}renderHull(t){const n=t==null?t=new Path:void 0,{hull:r,points:i}=this,o=r[0]*2,l=r.length;t.moveTo(i[o],i[o+1]);for(let f=1;f<l;++f){const d=2*r[f];t.lineTo(i[d],i[d+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Polygon;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Path:void 0,{points:i,triangles:o}=this,l=o[t*=3]*2,f=o[t+1]*2,d=o[t+2]*2;return n.moveTo(i[l],i[l+1]),n.lineTo(i[f],i[f+1]),n.lineTo(i[d],i[d+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Polygon;return this.renderTriangle(t,n),n.value()}}function flatArray(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let l=0;l<i;++l){const f=e[l];o[l*2]=t.call(r,f,l,e),o[l*2+1]=n.call(r,f,l,e)}return o}function*flatIterable(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}var EOL={},EOF={},QUOTE=34,NEWLINE=10,RETURN=13;function objectConverter(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function customConverter(e,t){var n=objectConverter(e);return function(r,i){return t(n(r),i,e)}}function inferColumns(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function pad$1(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function formatYear$1(e){return e<0?"-"+pad$1(-e,6):e>9999?"+"+pad$1(e,6):pad$1(e,4)}function formatDate$1(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":formatYear$1(e.getUTCFullYear())+"-"+pad$1(e.getUTCMonth()+1,2)+"-"+pad$1(e.getUTCDate(),2)+(i?"T"+pad$1(t,2)+":"+pad$1(n,2)+":"+pad$1(r,2)+"."+pad$1(i,3)+"Z":r?"T"+pad$1(t,2)+":"+pad$1(n,2)+":"+pad$1(r,2)+"Z":n||t?"T"+pad$1(t,2)+":"+pad$1(n,2)+"Z":"")}function dsvFormat(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(p,b){var v,$,S=i(p,function(w,_){if(v)return v(w,_-1);$=w,v=b?customConverter(w,b):objectConverter(w)});return S.columns=$||[],S}function i(p,b){var v=[],$=p.length,S=0,w=0,_,I=$<=0,T=!1;p.charCodeAt($-1)===NEWLINE&&--$,p.charCodeAt($-1)===RETURN&&--$;function P(){if(I)return EOF;if(T)return T=!1,EOL;var N,U=S,G;if(p.charCodeAt(U)===QUOTE){for(;S++<$&&p.charCodeAt(S)!==QUOTE||p.charCodeAt(++S)===QUOTE;);return(N=S)>=$?I=!0:(G=p.charCodeAt(S++))===NEWLINE?T=!0:G===RETURN&&(T=!0,p.charCodeAt(S)===NEWLINE&&++S),p.slice(U+1,N-1).replace(/""/g,'"')}for(;S<$;){if((G=p.charCodeAt(N=S++))===NEWLINE)T=!0;else if(G===RETURN)T=!0,p.charCodeAt(S)===NEWLINE&&++S;else if(G!==n)continue;return p.slice(U,N)}return I=!0,p.slice(U,$)}for(;(_=P())!==EOF;){for(var R=[];_!==EOL&&_!==EOF;)R.push(_),_=P();b&&(R=b(R,w++))==null||v.push(R)}return v}function o(p,b){return p.map(function(v){return b.map(function($){return g(v[$])}).join(e)})}function l(p,b){return b==null&&(b=inferColumns(p)),[b.map(g).join(e)].concat(o(p,b)).join(`
`)}function f(p,b){return b==null&&(b=inferColumns(p)),o(p,b).join(`
`)}function d(p){return p.map(h).join(`
`)}function h(p){return p.map(g).join(e)}function g(p){return p==null?"":p instanceof Date?formatDate$1(p):t.test(p+="")?'"'+p.replace(/"/g,'""')+'"':p}return{parse:r,parseRows:i,format:l,formatBody:f,formatRows:d,formatRow:h,formatValue:g}}var csv$1=dsvFormat(","),csvParse=csv$1.parse,csvParseRows=csv$1.parseRows,csvFormat=csv$1.format,csvFormatBody=csv$1.formatBody,csvFormatRows=csv$1.formatRows,csvFormatRow=csv$1.formatRow,csvFormatValue=csv$1.formatValue,tsv$1=dsvFormat("	"),tsvParse=tsv$1.parse,tsvParseRows=tsv$1.parseRows,tsvFormat=tsv$1.format,tsvFormatBody=tsv$1.formatBody,tsvFormatRows=tsv$1.formatRows,tsvFormatRow=tsv$1.formatRow,tsvFormatValue=tsv$1.formatValue;function autoType(e){for(var t in e){var n=e[t].trim(),r,i;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(i=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))fixtz&&!!i[4]&&!i[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const fixtz=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function responseBlob(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.blob()}function blob(e,t){return fetch(e,t).then(responseBlob)}function responseArrayBuffer(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.arrayBuffer()}function buffer(e,t){return fetch(e,t).then(responseArrayBuffer)}function responseText(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function text(e,t){return fetch(e,t).then(responseText)}function dsvParse(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),text(t,n).then(function(i){return e(i,r)})}}function dsv(e,t,n,r){arguments.length===3&&typeof n=="function"&&(r=n,n=void 0);var i=dsvFormat(e);return text(t,n).then(function(o){return i.parse(o,r)})}var csv=dsvParse(csvParse),tsv=dsvParse(tsvParse);function image(e,t){return new Promise(function(n,r){var i=new Image;for(var o in t)i[o]=t[o];i.onerror=r,i.onload=function(){n(i)},i.src=e})}function responseJson(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(!(e.status===204||e.status===205))return e.json()}function json(e,t){return fetch(e,t).then(responseJson)}function parser(e){return(t,n)=>text(t,n).then(r=>new DOMParser().parseFromString(r,e))}var xml=parser("application/xml"),html=parser("text/html"),svg=parser("image/svg+xml");function center(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,l=n.length,f,d=0,h=0;for(o=0;o<l;++o)f=n[o],d+=f.x,h+=f.y;for(d=(d/l-e)*r,h=(h/l-t)*r,o=0;o<l;++o)f=n[o],f.x-=d,f.y-=h}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function tree_add(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return add(this.cover(t,n),t,n,e)}function add(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,l={data:r},f=e._x0,d=e._y0,h=e._x1,g=e._y1,p,b,v,$,S,w,_,I;if(!o)return e._root=l,e;for(;o.length;)if((S=t>=(p=(f+h)/2))?f=p:h=p,(w=n>=(b=(d+g)/2))?d=b:g=b,i=o,!(o=o[_=w<<1|S]))return i[_]=l,e;if(v=+e._x.call(null,o.data),$=+e._y.call(null,o.data),t===v&&n===$)return l.next=o,i?i[_]=l:e._root=l,e;do i=i?i[_]=new Array(4):e._root=new Array(4),(S=t>=(p=(f+h)/2))?f=p:h=p,(w=n>=(b=(d+g)/2))?d=b:g=b;while((_=w<<1|S)===(I=($>=b)<<1|v>=p));return i[I]=o,i[_]=l,e}function addAll(e){var t,n,r=e.length,i,o,l=new Array(r),f=new Array(r),d=1/0,h=1/0,g=-1/0,p=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(l[n]=i,f[n]=o,i<d&&(d=i),i>g&&(g=i),o<h&&(h=o),o>p&&(p=o));if(d>g||h>p)return this;for(this.cover(d,h).cover(g,p),n=0;n<r;++n)add(this,l[n],f[n],e[n]);return this}function tree_cover(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var l=i-n||1,f=this._root,d,h;n>e||e>=i||r>t||t>=o;)switch(h=(t<r)<<1|e<n,d=new Array(4),d[h]=f,f=d,l*=2,h){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l;break}this._root&&this._root.length&&(this._root=f)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function tree_data(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function tree_extent(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Quad(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function tree_find(e,t,n){var r,i=this._x0,o=this._y0,l,f,d,h,g=this._x1,p=this._y1,b=[],v=this._root,$,S;for(v&&b.push(new Quad(v,i,o,g,p)),n==null?n=1/0:(i=e-n,o=t-n,g=e+n,p=t+n,n*=n);$=b.pop();)if(!(!(v=$.node)||(l=$.x0)>g||(f=$.y0)>p||(d=$.x1)<i||(h=$.y1)<o))if(v.length){var w=(l+d)/2,_=(f+h)/2;b.push(new Quad(v[3],w,_,d,h),new Quad(v[2],l,_,w,h),new Quad(v[1],w,f,d,_),new Quad(v[0],l,f,w,_)),(S=(t>=_)<<1|e>=w)&&($=b[b.length-1],b[b.length-1]=b[b.length-1-S],b[b.length-1-S]=$)}else{var I=e-+this._x.call(null,v.data),T=t-+this._y.call(null,v.data),P=I*I+T*T;if(P<n){var R=Math.sqrt(n=P);i=e-R,o=t-R,g=e+R,p=t+R,r=v.data}}return r}function tree_remove(e){if(isNaN(g=+this._x.call(null,e))||isNaN(p=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,l=this._x0,f=this._y0,d=this._x1,h=this._y1,g,p,b,v,$,S,w,_;if(!n)return this;if(n.length)for(;;){if(($=g>=(b=(l+d)/2))?l=b:d=b,(S=p>=(v=(f+h)/2))?f=v:h=v,t=n,!(n=n[w=S<<1|$]))return this;if(!n.length)break;(t[w+1&3]||t[w+2&3]||t[w+3&3])&&(r=t,_=w)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[w]=o:delete t[w],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[_]=n:this._root=n),this):(this._root=o,this)}function removeAll(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function tree_root(){return this._root}function tree_size(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function tree_visit(e){var t=[],n,r=this._root,i,o,l,f,d;for(r&&t.push(new Quad(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,l=n.y0,f=n.x1,d=n.y1)&&r.length){var h=(o+f)/2,g=(l+d)/2;(i=r[3])&&t.push(new Quad(i,h,g,f,d)),(i=r[2])&&t.push(new Quad(i,o,g,h,d)),(i=r[1])&&t.push(new Quad(i,h,l,f,g)),(i=r[0])&&t.push(new Quad(i,o,l,h,g))}return this}function tree_visitAfter(e){var t=[],n=[],r;for(this._root&&t.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,l=r.x0,f=r.y0,d=r.x1,h=r.y1,g=(l+d)/2,p=(f+h)/2;(o=i[0])&&t.push(new Quad(o,l,f,g,p)),(o=i[1])&&t.push(new Quad(o,g,f,d,p)),(o=i[2])&&t.push(new Quad(o,l,p,g,h)),(o=i[3])&&t.push(new Quad(o,g,p,d,h))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function defaultX(e){return e[0]}function tree_x(e){return arguments.length?(this._x=e,this):this._x}function defaultY(e){return e[1]}function tree_y(e){return arguments.length?(this._y=e,this):this._y}function quadtree(e,t,n){var r=new Quadtree(t==null?defaultX:t,n==null?defaultY:n,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Quadtree(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function leaf_copy(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var e=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=leaf_copy(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=leaf_copy(r));return e};treeProto.add=tree_add;treeProto.addAll=addAll;treeProto.cover=tree_cover;treeProto.data=tree_data;treeProto.extent=tree_extent;treeProto.find=tree_find;treeProto.remove=tree_remove;treeProto.removeAll=removeAll;treeProto.root=tree_root;treeProto.size=tree_size;treeProto.visit=tree_visit;treeProto.visitAfter=tree_visitAfter;treeProto.x=tree_x;treeProto.y=tree_y;function constant$4(e){return function(){return e}}function jiggle(e){return(e()-.5)*1e-6}function x$3(e){return e.x+e.vx}function y$3(e){return e.y+e.vy}function collide(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=constant$4(e==null?1:+e));function l(){for(var h,g=t.length,p,b,v,$,S,w,_=0;_<o;++_)for(p=quadtree(t,x$3,y$3).visitAfter(f),h=0;h<g;++h)b=t[h],S=n[b.index],w=S*S,v=b.x+b.vx,$=b.y+b.vy,p.visit(I);function I(T,P,R,N,U){var G=T.data,V=T.r,q=S+V;if(G){if(G.index>b.index){var O=v-G.x-G.vx,W=$-G.y-G.vy,H=O*O+W*W;H<q*q&&(O===0&&(O=jiggle(r),H+=O*O),W===0&&(W=jiggle(r),H+=W*W),H=(q-(H=Math.sqrt(H)))/H*i,b.vx+=(O*=H)*(q=(V*=V)/(w+V)),b.vy+=(W*=H)*q,G.vx-=O*(q=1-q),G.vy-=W*q)}return}return P>v+q||N<v-q||R>$+q||U<$-q}}function f(h){if(h.data)return h.r=n[h.data.index];for(var g=h.r=0;g<4;++g)h[g]&&h[g].r>h.r&&(h.r=h[g].r)}function d(){if(!!t){var h,g=t.length,p;for(n=new Array(g),h=0;h<g;++h)p=t[h],n[p.index]=+e(p,h,t)}}return l.initialize=function(h,g){t=h,r=g,d()},l.iterations=function(h){return arguments.length?(o=+h,l):o},l.strength=function(h){return arguments.length?(i=+h,l):i},l.radius=function(h){return arguments.length?(e=typeof h=="function"?h:constant$4(+h),d(),l):e},l}function index$3(e){return e.index}function find(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function link$2(e){var t=index$3,n=p,r,i=constant$4(30),o,l,f,d,h,g=1;e==null&&(e=[]);function p(w){return 1/Math.min(f[w.source.index],f[w.target.index])}function b(w){for(var _=0,I=e.length;_<g;++_)for(var T=0,P,R,N,U,G,V,q;T<I;++T)P=e[T],R=P.source,N=P.target,U=N.x+N.vx-R.x-R.vx||jiggle(h),G=N.y+N.vy-R.y-R.vy||jiggle(h),V=Math.sqrt(U*U+G*G),V=(V-o[T])/V*w*r[T],U*=V,G*=V,N.vx-=U*(q=d[T]),N.vy-=G*q,R.vx+=U*(q=1-q),R.vy+=G*q}function v(){if(!!l){var w,_=l.length,I=e.length,T=new Map(l.map((R,N)=>[t(R,N,l),R])),P;for(w=0,f=new Array(_);w<I;++w)P=e[w],P.index=w,typeof P.source!="object"&&(P.source=find(T,P.source)),typeof P.target!="object"&&(P.target=find(T,P.target)),f[P.source.index]=(f[P.source.index]||0)+1,f[P.target.index]=(f[P.target.index]||0)+1;for(w=0,d=new Array(I);w<I;++w)P=e[w],d[w]=f[P.source.index]/(f[P.source.index]+f[P.target.index]);r=new Array(I),$(),o=new Array(I),S()}}function $(){if(!!l)for(var w=0,_=e.length;w<_;++w)r[w]=+n(e[w],w,e)}function S(){if(!!l)for(var w=0,_=e.length;w<_;++w)o[w]=+i(e[w],w,e)}return b.initialize=function(w,_){l=w,h=_,v()},b.links=function(w){return arguments.length?(e=w,v(),b):e},b.id=function(w){return arguments.length?(t=w,b):t},b.iterations=function(w){return arguments.length?(g=+w,b):g},b.strength=function(w){return arguments.length?(n=typeof w=="function"?w:constant$4(+w),$(),b):n},b.distance=function(w){return arguments.length?(i=typeof w=="function"?w:constant$4(+w),S(),b):i},b}const a$2=1664525,c$4=1013904223,m$1=4294967296;function lcg$2(){let e=1;return()=>(e=(a$2*e+c$4)%m$1)/m$1}function x$2(e){return e.x}function y$2(e){return e.y}var initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5));function simulation(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,l=.6,f=new Map,d=timer(p),h=dispatch("tick","end"),g=lcg$2();e==null&&(e=[]);function p(){b(),h.call("tick",t),n<r&&(d.stop(),h.call("end",t))}function b(S){var w,_=e.length,I;S===void 0&&(S=1);for(var T=0;T<S;++T)for(n+=(o-n)*i,f.forEach(function(P){P(n)}),w=0;w<_;++w)I=e[w],I.fx==null?I.x+=I.vx*=l:(I.x=I.fx,I.vx=0),I.fy==null?I.y+=I.vy*=l:(I.y=I.fy,I.vy=0);return t}function v(){for(var S=0,w=e.length,_;S<w;++S){if(_=e[S],_.index=S,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var I=initialRadius*Math.sqrt(.5+S),T=S*initialAngle;_.x=I*Math.cos(T),_.y=I*Math.sin(T)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function $(S){return S.initialize&&S.initialize(e,g),S}return v(),t={tick:b,restart:function(){return d.restart(p),t},stop:function(){return d.stop(),t},nodes:function(S){return arguments.length?(e=S,v(),f.forEach($),t):e},alpha:function(S){return arguments.length?(n=+S,t):n},alphaMin:function(S){return arguments.length?(r=+S,t):r},alphaDecay:function(S){return arguments.length?(i=+S,t):+i},alphaTarget:function(S){return arguments.length?(o=+S,t):o},velocityDecay:function(S){return arguments.length?(l=1-S,t):1-l},randomSource:function(S){return arguments.length?(g=S,f.forEach($),t):g},force:function(S,w){return arguments.length>1?(w==null?f.delete(S):f.set(S,$(w)),t):f.get(S)},find:function(S,w,_){var I=0,T=e.length,P,R,N,U,G;for(_==null?_=1/0:_*=_,I=0;I<T;++I)U=e[I],P=S-U.x,R=w-U.y,N=P*P+R*R,N<_&&(G=U,_=N);return G},on:function(S,w){return arguments.length>1?(h.on(S,w),t):h.on(S)}}}function manyBody(){var e,t,n,r,i=constant$4(-30),o,l=1,f=1/0,d=.81;function h(v){var $,S=e.length,w=quadtree(e,x$2,y$2).visitAfter(p);for(r=v,$=0;$<S;++$)t=e[$],w.visit(b)}function g(){if(!!e){var v,$=e.length,S;for(o=new Array($),v=0;v<$;++v)S=e[v],o[S.index]=+i(S,v,e)}}function p(v){var $=0,S,w,_=0,I,T,P;if(v.length){for(I=T=P=0;P<4;++P)(S=v[P])&&(w=Math.abs(S.value))&&($+=S.value,_+=w,I+=w*S.x,T+=w*S.y);v.x=I/_,v.y=T/_}else{S=v,S.x=S.data.x,S.y=S.data.y;do $+=o[S.data.index];while(S=S.next)}v.value=$}function b(v,$,S,w){if(!v.value)return!0;var _=v.x-t.x,I=v.y-t.y,T=w-$,P=_*_+I*I;if(T*T/d<P)return P<f&&(_===0&&(_=jiggle(n),P+=_*_),I===0&&(I=jiggle(n),P+=I*I),P<l&&(P=Math.sqrt(l*P)),t.vx+=_*v.value*r/P,t.vy+=I*v.value*r/P),!0;if(v.length||P>=f)return;(v.data!==t||v.next)&&(_===0&&(_=jiggle(n),P+=_*_),I===0&&(I=jiggle(n),P+=I*I),P<l&&(P=Math.sqrt(l*P)));do v.data!==t&&(T=o[v.data.index]*r/P,t.vx+=_*T,t.vy+=I*T);while(v=v.next)}return h.initialize=function(v,$){e=v,n=$,g()},h.strength=function(v){return arguments.length?(i=typeof v=="function"?v:constant$4(+v),g(),h):i},h.distanceMin=function(v){return arguments.length?(l=v*v,h):Math.sqrt(l)},h.distanceMax=function(v){return arguments.length?(f=v*v,h):Math.sqrt(f)},h.theta=function(v){return arguments.length?(d=v*v,h):Math.sqrt(d)},h}function radial$1(e,t,n){var r,i=constant$4(.1),o,l;typeof e!="function"&&(e=constant$4(+e)),t==null&&(t=0),n==null&&(n=0);function f(h){for(var g=0,p=r.length;g<p;++g){var b=r[g],v=b.x-t||1e-6,$=b.y-n||1e-6,S=Math.sqrt(v*v+$*$),w=(l[g]-S)*o[g]*h/S;b.vx+=v*w,b.vy+=$*w}}function d(){if(!!r){var h,g=r.length;for(o=new Array(g),l=new Array(g),h=0;h<g;++h)l[h]=+e(r[h],h,r),o[h]=isNaN(l[h])?0:+i(r[h],h,r)}}return f.initialize=function(h){r=h,d()},f.strength=function(h){return arguments.length?(i=typeof h=="function"?h:constant$4(+h),d(),f):i},f.radius=function(h){return arguments.length?(e=typeof h=="function"?h:constant$4(+h),d(),f):e},f.x=function(h){return arguments.length?(t=+h,f):t},f.y=function(h){return arguments.length?(n=+h,f):n},f}function x$1(e){var t=constant$4(.1),n,r,i;typeof e!="function"&&(e=constant$4(e==null?0:+e));function o(f){for(var d=0,h=n.length,g;d<h;++d)g=n[d],g.vx+=(i[d]-g.x)*r[d]*f}function l(){if(!!n){var f,d=n.length;for(r=new Array(d),i=new Array(d),f=0;f<d;++f)r[f]=isNaN(i[f]=+e(n[f],f,n))?0:+t(n[f],f,n)}}return o.initialize=function(f){n=f,l()},o.strength=function(f){return arguments.length?(t=typeof f=="function"?f:constant$4(+f),l(),o):t},o.x=function(f){return arguments.length?(e=typeof f=="function"?f:constant$4(+f),l(),o):e},o}function y$1(e){var t=constant$4(.1),n,r,i;typeof e!="function"&&(e=constant$4(e==null?0:+e));function o(f){for(var d=0,h=n.length,g;d<h;++d)g=n[d],g.vy+=(i[d]-g.y)*r[d]*f}function l(){if(!!n){var f,d=n.length;for(r=new Array(d),i=new Array(d),f=0;f<d;++f)r[f]=isNaN(i[f]=+e(n[f],f,n))?0:+t(n[f],f,n)}}return o.initialize=function(f){n=f,l()},o.strength=function(f){return arguments.length?(t=typeof f=="function"?f:constant$4(+f),l(),o):t},o.y=function(f){return arguments.length?(e=typeof f=="function"?f:constant$4(+f),l(),o):e},o}function formatDecimal(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function formatDecimalParts(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function exponent(e){return e=formatDecimalParts(Math.abs(e)),e?e[1]:NaN}function formatGroup(e,t){return function(n,r){for(var i=n.length,o=[],l=0,f=e[0],d=0;i>0&&f>0&&(d+f+1>r&&(f=Math.max(1,r-d)),o.push(n.substring(i-=f,i+f)),!((d+=f+1)>r));)f=e[l=(l+1)%e.length];return o.reverse().join(t)}}function formatNumerals(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(e){if(!(t=re.exec(e)))throw new Error("invalid format: "+e);var t;return new FormatSpecifier({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var prefixExponent;function formatPrefixAuto(e,t){var n=formatDecimalParts(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return o===l?r:o>l?r+new Array(o-l+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+formatDecimalParts(e,Math.max(0,t+o-1))[0]}function formatRounded(e,t){var n=formatDecimalParts(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var formatTypes={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:formatDecimal,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>formatRounded(e*100,t),r:formatRounded,s:formatPrefixAuto,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function identity$5(e){return e}var map=Array.prototype.map,prefixes=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(e){var t=e.grouping===void 0||e.thousands===void 0?identity$5:formatGroup(map.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?identity$5:formatNumerals(map.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",f=e.minus===void 0?"\u2212":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function h(p){p=formatSpecifier(p);var b=p.fill,v=p.align,$=p.sign,S=p.symbol,w=p.zero,_=p.width,I=p.comma,T=p.precision,P=p.trim,R=p.type;R==="n"?(I=!0,R="g"):formatTypes[R]||(T===void 0&&(T=12),P=!0,R="g"),(w||b==="0"&&v==="=")&&(w=!0,b="0",v="=");var N=S==="$"?n:S==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",U=S==="$"?r:/[%p]/.test(R)?l:"",G=formatTypes[R],V=/[defgprs%]/.test(R);T=T===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function q(O){var W=N,H=U,L,z,F;if(R==="c")H=G(O)+H,O="";else{O=+O;var j=O<0||1/O<0;if(O=isNaN(O)?d:G(Math.abs(O),T),P&&(O=formatTrim(O)),j&&+O==0&&$!=="+"&&(j=!1),W=(j?$==="("?$:f:$==="-"||$==="("?"":$)+W,H=(R==="s"?prefixes[8+prefixExponent/3]:"")+H+(j&&$==="("?")":""),V){for(L=-1,z=O.length;++L<z;)if(F=O.charCodeAt(L),48>F||F>57){H=(F===46?i+O.slice(L+1):O.slice(L))+H,O=O.slice(0,L);break}}}I&&!w&&(O=t(O,1/0));var Z=W.length+O.length+H.length,J=Z<_?new Array(_-Z+1).join(b):"";switch(I&&w&&(O=t(J+O,J.length?_-H.length:1/0),J=""),v){case"<":O=W+O+H+J;break;case"=":O=W+J+O+H;break;case"^":O=J.slice(0,Z=J.length>>1)+W+O+H+J.slice(Z);break;default:O=J+W+O+H;break}return o(O)}return q.toString=function(){return p+""},q}function g(p,b){var v=h((p=formatSpecifier(p),p.type="f",p)),$=Math.max(-8,Math.min(8,Math.floor(exponent(b)/3)))*3,S=Math.pow(10,-$),w=prefixes[8+$/3];return function(_){return v(S*_)+w}}return{format:h,formatPrefix:g}}var locale$1,format,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(e){return locale$1=formatLocale$1(e),format=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(e){return Math.max(0,-exponent(Math.abs(e)))}function precisionPrefix(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(t)/3)))*3-exponent(Math.abs(e)))}function precisionRound(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,exponent(t)-exponent(e))+1}var epsilon$1=1e-6,epsilon2=1e-12,pi$1=Math.PI,halfPi$1=pi$1/2,quarterPi=pi$1/4,tau$1=pi$1*2,degrees=180/pi$1,radians=pi$1/180,abs$1=Math.abs,atan=Math.atan,atan2$1=Math.atan2,cos$1=Math.cos,ceil=Math.ceil,exp=Math.exp,hypot=Math.hypot,log$1=Math.log,pow$1=Math.pow,sin$1=Math.sin,sign$1=Math.sign||function(e){return e>0?1:e<0?-1:0},sqrt$2=Math.sqrt,tan=Math.tan;function acos$1(e){return e>1?0:e<-1?pi$1:Math.acos(e)}function asin$1(e){return e>1?halfPi$1:e<-1?-halfPi$1:Math.asin(e)}function haversin(e){return(e=sin$1(e/2))*e}function noop$1(){}function streamGeometry(e,t){e&&streamGeometryType.hasOwnProperty(e.type)&&streamGeometryType[e.type](e,t)}var streamObjectType={Feature:function(e,t){streamGeometry(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)streamGeometry(n[r].geometry,t)}},streamGeometryType={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){streamLine(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)streamLine(n[r],t,0)},Polygon:function(e,t){streamPolygon(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)streamPolygon(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)streamGeometry(n[r],t)}};function streamLine(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function streamPolygon(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)streamLine(e[n],t,1);t.polygonEnd()}function geoStream(e,t){e&&streamObjectType.hasOwnProperty(e.type)?streamObjectType[e.type](e,t):streamGeometry(e,t)}var areaRingSum$1=new Adder,areaSum$1=new Adder,lambda00$2,phi00$2,lambda0$2,cosPhi0$1,sinPhi0$1,areaStream$1={point:noop$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:function(){areaRingSum$1=new Adder,areaStream$1.lineStart=areaRingStart$1,areaStream$1.lineEnd=areaRingEnd$1},polygonEnd:function(){var e=+areaRingSum$1;areaSum$1.add(e<0?tau$1+e:e),this.lineStart=this.lineEnd=this.point=noop$1},sphere:function(){areaSum$1.add(tau$1)}};function areaRingStart$1(){areaStream$1.point=areaPointFirst$1}function areaRingEnd$1(){areaPoint$1(lambda00$2,phi00$2)}function areaPointFirst$1(e,t){areaStream$1.point=areaPoint$1,lambda00$2=e,phi00$2=t,e*=radians,t*=radians,lambda0$2=e,cosPhi0$1=cos$1(t=t/2+quarterPi),sinPhi0$1=sin$1(t)}function areaPoint$1(e,t){e*=radians,t*=radians,t=t/2+quarterPi;var n=e-lambda0$2,r=n>=0?1:-1,i=r*n,o=cos$1(t),l=sin$1(t),f=sinPhi0$1*l,d=cosPhi0$1*o+f*cos$1(i),h=f*r*sin$1(i);areaRingSum$1.add(atan2$1(h,d)),lambda0$2=e,cosPhi0$1=o,sinPhi0$1=l}function area$2(e){return areaSum$1=new Adder,geoStream(e,areaStream$1),areaSum$1*2}function spherical(e){return[atan2$1(e[1],e[0]),asin$1(e[2])]}function cartesian(e){var t=e[0],n=e[1],r=cos$1(n);return[r*cos$1(t),r*sin$1(t),sin$1(n)]}function cartesianDot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function cartesianCross(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function cartesianAddInPlace(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function cartesianScale(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function cartesianNormalizeInPlace(e){var t=sqrt$2(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var lambda0$1,phi0,lambda1,phi1,lambda2,lambda00$1,phi00$1,p0,deltaSum,ranges,range,boundsStream$2={point:boundsPoint$1,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){boundsStream$2.point=boundsRingPoint,boundsStream$2.lineStart=boundsRingStart,boundsStream$2.lineEnd=boundsRingEnd,deltaSum=new Adder,areaStream$1.polygonStart()},polygonEnd:function(){areaStream$1.polygonEnd(),boundsStream$2.point=boundsPoint$1,boundsStream$2.lineStart=boundsLineStart,boundsStream$2.lineEnd=boundsLineEnd,areaRingSum$1<0?(lambda0$1=-(lambda1=180),phi0=-(phi1=90)):deltaSum>epsilon$1?phi1=90:deltaSum<-epsilon$1&&(phi0=-90),range[0]=lambda0$1,range[1]=lambda1},sphere:function(){lambda0$1=-(lambda1=180),phi0=-(phi1=90)}};function boundsPoint$1(e,t){ranges.push(range=[lambda0$1=e,lambda1=e]),t<phi0&&(phi0=t),t>phi1&&(phi1=t)}function linePoint(e,t){var n=cartesian([e*radians,t*radians]);if(p0){var r=cartesianCross(p0,n),i=[r[1],-r[0],0],o=cartesianCross(i,r);cartesianNormalizeInPlace(o),o=spherical(o);var l=e-lambda2,f=l>0?1:-1,d=o[0]*degrees*f,h,g=abs$1(l)>180;g^(f*lambda2<d&&d<f*e)?(h=o[1]*degrees,h>phi1&&(phi1=h)):(d=(d+360)%360-180,g^(f*lambda2<d&&d<f*e)?(h=-o[1]*degrees,h<phi0&&(phi0=h)):(t<phi0&&(phi0=t),t>phi1&&(phi1=t))),g?e<lambda2?angle(lambda0$1,e)>angle(lambda0$1,lambda1)&&(lambda1=e):angle(e,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=e):lambda1>=lambda0$1?(e<lambda0$1&&(lambda0$1=e),e>lambda1&&(lambda1=e)):e>lambda2?angle(lambda0$1,e)>angle(lambda0$1,lambda1)&&(lambda1=e):angle(e,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=e)}else ranges.push(range=[lambda0$1=e,lambda1=e]);t<phi0&&(phi0=t),t>phi1&&(phi1=t),p0=n,lambda2=e}function boundsLineStart(){boundsStream$2.point=linePoint}function boundsLineEnd(){range[0]=lambda0$1,range[1]=lambda1,boundsStream$2.point=boundsPoint$1,p0=null}function boundsRingPoint(e,t){if(p0){var n=e-lambda2;deltaSum.add(abs$1(n)>180?n+(n>0?360:-360):n)}else lambda00$1=e,phi00$1=t;areaStream$1.point(e,t),linePoint(e,t)}function boundsRingStart(){areaStream$1.lineStart()}function boundsRingEnd(){boundsRingPoint(lambda00$1,phi00$1),areaStream$1.lineEnd(),abs$1(deltaSum)>epsilon$1&&(lambda0$1=-(lambda1=180)),range[0]=lambda0$1,range[1]=lambda1,p0=null}function angle(e,t){return(t-=e)<0?t+360:t}function rangeCompare(e,t){return e[0]-t[0]}function rangeContains(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function bounds(e){var t,n,r,i,o,l,f;if(phi1=lambda1=-(lambda0$1=phi0=1/0),ranges=[],geoStream(e,boundsStream$2),n=ranges.length){for(ranges.sort(rangeCompare),t=1,r=ranges[0],o=[r];t<n;++t)i=ranges[t],rangeContains(r,i[0])||rangeContains(r,i[1])?(angle(r[0],i[1])>angle(r[0],r[1])&&(r[1]=i[1]),angle(i[0],r[1])>angle(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(l=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(f=angle(r[1],i[0]))>l&&(l=f,lambda0$1=i[0],lambda1=r[1])}return ranges=range=null,lambda0$1===1/0||phi0===1/0?[[NaN,NaN],[NaN,NaN]]:[[lambda0$1,phi0],[lambda1,phi1]]}var W0,W1,X0$1,Y0$1,Z0$1,X1$1,Y1$1,Z1$1,X2$1,Y2$1,Z2$1,lambda00,phi00,x0$4,y0$4,z0,centroidStream$1={sphere:noop$1,point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,polygonStart:function(){centroidStream$1.lineStart=centroidRingStart$1,centroidStream$1.lineEnd=centroidRingEnd$1},polygonEnd:function(){centroidStream$1.lineStart=centroidLineStart$1,centroidStream$1.lineEnd=centroidLineEnd$1}};function centroidPoint$1(e,t){e*=radians,t*=radians;var n=cos$1(t);centroidPointCartesian(n*cos$1(e),n*sin$1(e),sin$1(t))}function centroidPointCartesian(e,t,n){++W0,X0$1+=(e-X0$1)/W0,Y0$1+=(t-Y0$1)/W0,Z0$1+=(n-Z0$1)/W0}function centroidLineStart$1(){centroidStream$1.point=centroidLinePointFirst}function centroidLinePointFirst(e,t){e*=radians,t*=radians;var n=cos$1(t);x0$4=n*cos$1(e),y0$4=n*sin$1(e),z0=sin$1(t),centroidStream$1.point=centroidLinePoint,centroidPointCartesian(x0$4,y0$4,z0)}function centroidLinePoint(e,t){e*=radians,t*=radians;var n=cos$1(t),r=n*cos$1(e),i=n*sin$1(e),o=sin$1(t),l=atan2$1(sqrt$2((l=y0$4*o-z0*i)*l+(l=z0*r-x0$4*o)*l+(l=x0$4*i-y0$4*r)*l),x0$4*r+y0$4*i+z0*o);W1+=l,X1$1+=l*(x0$4+(x0$4=r)),Y1$1+=l*(y0$4+(y0$4=i)),Z1$1+=l*(z0+(z0=o)),centroidPointCartesian(x0$4,y0$4,z0)}function centroidLineEnd$1(){centroidStream$1.point=centroidPoint$1}function centroidRingStart$1(){centroidStream$1.point=centroidRingPointFirst}function centroidRingEnd$1(){centroidRingPoint(lambda00,phi00),centroidStream$1.point=centroidPoint$1}function centroidRingPointFirst(e,t){lambda00=e,phi00=t,e*=radians,t*=radians,centroidStream$1.point=centroidRingPoint;var n=cos$1(t);x0$4=n*cos$1(e),y0$4=n*sin$1(e),z0=sin$1(t),centroidPointCartesian(x0$4,y0$4,z0)}function centroidRingPoint(e,t){e*=radians,t*=radians;var n=cos$1(t),r=n*cos$1(e),i=n*sin$1(e),o=sin$1(t),l=y0$4*o-z0*i,f=z0*r-x0$4*o,d=x0$4*i-y0$4*r,h=hypot(l,f,d),g=asin$1(h),p=h&&-g/h;X2$1.add(p*l),Y2$1.add(p*f),Z2$1.add(p*d),W1+=g,X1$1+=g*(x0$4+(x0$4=r)),Y1$1+=g*(y0$4+(y0$4=i)),Z1$1+=g*(z0+(z0=o)),centroidPointCartesian(x0$4,y0$4,z0)}function centroid$1(e){W0=W1=X0$1=Y0$1=Z0$1=X1$1=Y1$1=Z1$1=0,X2$1=new Adder,Y2$1=new Adder,Z2$1=new Adder,geoStream(e,centroidStream$1);var t=+X2$1,n=+Y2$1,r=+Z2$1,i=hypot(t,n,r);return i<epsilon2&&(t=X1$1,n=Y1$1,r=Z1$1,W1<epsilon$1&&(t=X0$1,n=Y0$1,r=Z0$1),i=hypot(t,n,r),i<epsilon2)?[NaN,NaN]:[atan2$1(n,t)*degrees,asin$1(r/i)*degrees]}function constant$3(e){return function(){return e}}function compose(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function rotationIdentity(e,t){return abs$1(e)>pi$1&&(e-=Math.round(e/tau$1)*tau$1),[e,t]}rotationIdentity.invert=rotationIdentity;function rotateRadians(e,t,n){return(e%=tau$1)?t||n?compose(rotationLambda(e),rotationPhiGamma(t,n)):rotationLambda(e):t||n?rotationPhiGamma(t,n):rotationIdentity}function forwardRotationLambda(e){return function(t,n){return t+=e,abs$1(t)>pi$1&&(t-=Math.round(t/tau$1)*tau$1),[t,n]}}function rotationLambda(e){var t=forwardRotationLambda(e);return t.invert=forwardRotationLambda(-e),t}function rotationPhiGamma(e,t){var n=cos$1(e),r=sin$1(e),i=cos$1(t),o=sin$1(t);function l(f,d){var h=cos$1(d),g=cos$1(f)*h,p=sin$1(f)*h,b=sin$1(d),v=b*n+g*r;return[atan2$1(p*i-v*o,g*n-b*r),asin$1(v*i+p*o)]}return l.invert=function(f,d){var h=cos$1(d),g=cos$1(f)*h,p=sin$1(f)*h,b=sin$1(d),v=b*i-p*o;return[atan2$1(p*i+b*o,g*n+v*r),asin$1(v*n-g*r)]},l}function rotation(e){e=rotateRadians(e[0]*radians,e[1]*radians,e.length>2?e[2]*radians:0);function t(n){return n=e(n[0]*radians,n[1]*radians),n[0]*=degrees,n[1]*=degrees,n}return t.invert=function(n){return n=e.invert(n[0]*radians,n[1]*radians),n[0]*=degrees,n[1]*=degrees,n},t}function circleStream(e,t,n,r,i,o){if(!!n){var l=cos$1(t),f=sin$1(t),d=r*n;i==null?(i=t+r*tau$1,o=t-d/2):(i=circleRadius(l,i),o=circleRadius(l,o),(r>0?i<o:i>o)&&(i+=r*tau$1));for(var h,g=i;r>0?g>o:g<o;g-=d)h=spherical([l,-f*cos$1(g),-f*sin$1(g)]),e.point(h[0],h[1])}}function circleRadius(e,t){t=cartesian(t),t[0]-=e,cartesianNormalizeInPlace(t);var n=acos$1(-t[1]);return((-t[2]<0?-n:n)+tau$1-epsilon$1)%tau$1}function circle$1(){var e=constant$3([0,0]),t=constant$3(90),n=constant$3(6),r,i,o={point:l};function l(d,h){r.push(d=i(d,h)),d[0]*=degrees,d[1]*=degrees}function f(){var d=e.apply(this,arguments),h=t.apply(this,arguments)*radians,g=n.apply(this,arguments)*radians;return r=[],i=rotateRadians(-d[0]*radians,-d[1]*radians,0).invert,circleStream(o,h,g,1),d={type:"Polygon",coordinates:[r]},r=i=null,d}return f.center=function(d){return arguments.length?(e=typeof d=="function"?d:constant$3([+d[0],+d[1]]),f):e},f.radius=function(d){return arguments.length?(t=typeof d=="function"?d:constant$3(+d),f):t},f.precision=function(d){return arguments.length?(n=typeof d=="function"?d:constant$3(+d),f):n},f}function clipBuffer(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:noop$1,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function pointEqual(e,t){return abs$1(e[0]-t[0])<epsilon$1&&abs$1(e[1]-t[1])<epsilon$1}function Intersection(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function clipRejoin(e,t,n,r,i){var o=[],l=[],f,d;if(e.forEach(function($){if(!((S=$.length-1)<=0)){var S,w=$[0],_=$[S],I;if(pointEqual(w,_)){if(!w[2]&&!_[2]){for(i.lineStart(),f=0;f<S;++f)i.point((w=$[f])[0],w[1]);i.lineEnd();return}_[0]+=2*epsilon$1}o.push(I=new Intersection(w,$,null,!0)),l.push(I.o=new Intersection(w,null,I,!1)),o.push(I=new Intersection(_,$,null,!1)),l.push(I.o=new Intersection(_,null,I,!0))}}),!!o.length){for(l.sort(t),link$1(o),link$1(l),f=0,d=l.length;f<d;++f)l[f].e=n=!n;for(var h=o[0],g,p;;){for(var b=h,v=!0;b.v;)if((b=b.n)===h)return;g=b.z,i.lineStart();do{if(b.v=b.o.v=!0,b.e){if(v)for(f=0,d=g.length;f<d;++f)i.point((p=g[f])[0],p[1]);else r(b.x,b.n.x,1,i);b=b.n}else{if(v)for(g=b.p.z,f=g.length-1;f>=0;--f)i.point((p=g[f])[0],p[1]);else r(b.x,b.p.x,-1,i);b=b.p}b=b.o,g=b.z,v=!v}while(!b.v);i.lineEnd()}}}function link$1(e){if(!!(t=e.length)){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function longitude(e){return abs$1(e[0])<=pi$1?e[0]:sign$1(e[0])*((abs$1(e[0])+pi$1)%tau$1-pi$1)}function polygonContains(e,t){var n=longitude(t),r=t[1],i=sin$1(r),o=[sin$1(n),-cos$1(n),0],l=0,f=0,d=new Adder;i===1?r=halfPi$1+epsilon$1:i===-1&&(r=-halfPi$1-epsilon$1);for(var h=0,g=e.length;h<g;++h)if(!!(b=(p=e[h]).length))for(var p,b,v=p[b-1],$=longitude(v),S=v[1]/2+quarterPi,w=sin$1(S),_=cos$1(S),I=0;I<b;++I,$=P,w=N,_=U,v=T){var T=p[I],P=longitude(T),R=T[1]/2+quarterPi,N=sin$1(R),U=cos$1(R),G=P-$,V=G>=0?1:-1,q=V*G,O=q>pi$1,W=w*N;if(d.add(atan2$1(W*V*sin$1(q),_*U+W*cos$1(q))),l+=O?G+V*tau$1:G,O^$>=n^P>=n){var H=cartesianCross(cartesian(v),cartesian(T));cartesianNormalizeInPlace(H);var L=cartesianCross(o,H);cartesianNormalizeInPlace(L);var z=(O^G>=0?-1:1)*asin$1(L[2]);(r>z||r===z&&(H[0]||H[1]))&&(f+=O^G>=0?1:-1)}}return(l<-epsilon$1||l<epsilon$1&&d<-epsilon2)^f&1}function clip(e,t,n,r){return function(i){var o=t(i),l=clipBuffer(),f=t(l),d=!1,h,g,p,b={point:v,lineStart:S,lineEnd:w,polygonStart:function(){b.point=_,b.lineStart=I,b.lineEnd=T,g=[],h=[]},polygonEnd:function(){b.point=v,b.lineStart=S,b.lineEnd=w,g=merge(g);var P=polygonContains(h,r);g.length?(d||(i.polygonStart(),d=!0),clipRejoin(g,compareIntersection,P,n,i)):P&&(d||(i.polygonStart(),d=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),d&&(i.polygonEnd(),d=!1),g=h=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function v(P,R){e(P,R)&&i.point(P,R)}function $(P,R){o.point(P,R)}function S(){b.point=$,o.lineStart()}function w(){b.point=v,o.lineEnd()}function _(P,R){p.push([P,R]),f.point(P,R)}function I(){f.lineStart(),p=[]}function T(){_(p[0][0],p[0][1]),f.lineEnd();var P=f.clean(),R=l.result(),N,U=R.length,G,V,q;if(p.pop(),h.push(p),p=null,!!U){if(P&1){if(V=R[0],(G=V.length-1)>0){for(d||(i.polygonStart(),d=!0),i.lineStart(),N=0;N<G;++N)i.point((q=V[N])[0],q[1]);i.lineEnd()}return}U>1&&P&2&&R.push(R.pop().concat(R.shift())),g.push(R.filter(validSegment))}}return b}}function validSegment(e){return e.length>1}function compareIntersection(e,t){return((e=e.x)[0]<0?e[1]-halfPi$1-epsilon$1:halfPi$1-e[1])-((t=t.x)[0]<0?t[1]-halfPi$1-epsilon$1:halfPi$1-t[1])}var clipAntimeridian=clip(function(){return!0},clipAntimeridianLine,clipAntimeridianInterpolate,[-pi$1,-halfPi$1]);function clipAntimeridianLine(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,l){var f=o>0?pi$1:-pi$1,d=abs$1(o-t);abs$1(d-pi$1)<epsilon$1?(e.point(t,n=(n+l)/2>0?halfPi$1:-halfPi$1),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(f,n),e.point(o,n),i=0):r!==f&&d>=pi$1&&(abs$1(t-r)<epsilon$1&&(t-=r*epsilon$1),abs$1(o-f)<epsilon$1&&(o-=f*epsilon$1),n=clipAntimeridianIntersect(t,n,o,l),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(f,n),i=0),e.point(t=o,n=l),r=f},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function clipAntimeridianIntersect(e,t,n,r){var i,o,l=sin$1(e-n);return abs$1(l)>epsilon$1?atan((sin$1(t)*(o=cos$1(r))*sin$1(n)-sin$1(r)*(i=cos$1(t))*sin$1(e))/(i*o*l)):(t+r)/2}function clipAntimeridianInterpolate(e,t,n,r){var i;if(e==null)i=n*halfPi$1,r.point(-pi$1,i),r.point(0,i),r.point(pi$1,i),r.point(pi$1,0),r.point(pi$1,-i),r.point(0,-i),r.point(-pi$1,-i),r.point(-pi$1,0),r.point(-pi$1,i);else if(abs$1(e[0]-t[0])>epsilon$1){var o=e[0]<t[0]?pi$1:-pi$1;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function clipCircle(e){var t=cos$1(e),n=6*radians,r=t>0,i=abs$1(t)>epsilon$1;function o(g,p,b,v){circleStream(v,e,n,b,g,p)}function l(g,p){return cos$1(g)*cos$1(p)>t}function f(g){var p,b,v,$,S;return{lineStart:function(){$=v=!1,S=1},point:function(w,_){var I=[w,_],T,P=l(w,_),R=r?P?0:h(w,_):P?h(w+(w<0?pi$1:-pi$1),_):0;if(!p&&($=v=P)&&g.lineStart(),P!==v&&(T=d(p,I),(!T||pointEqual(p,T)||pointEqual(I,T))&&(I[2]=1)),P!==v)S=0,P?(g.lineStart(),T=d(I,p),g.point(T[0],T[1])):(T=d(p,I),g.point(T[0],T[1],2),g.lineEnd()),p=T;else if(i&&p&&r^P){var N;!(R&b)&&(N=d(I,p,!0))&&(S=0,r?(g.lineStart(),g.point(N[0][0],N[0][1]),g.point(N[1][0],N[1][1]),g.lineEnd()):(g.point(N[1][0],N[1][1]),g.lineEnd(),g.lineStart(),g.point(N[0][0],N[0][1],3)))}P&&(!p||!pointEqual(p,I))&&g.point(I[0],I[1]),p=I,v=P,b=R},lineEnd:function(){v&&g.lineEnd(),p=null},clean:function(){return S|($&&v)<<1}}}function d(g,p,b){var v=cartesian(g),$=cartesian(p),S=[1,0,0],w=cartesianCross(v,$),_=cartesianDot(w,w),I=w[0],T=_-I*I;if(!T)return!b&&g;var P=t*_/T,R=-t*I/T,N=cartesianCross(S,w),U=cartesianScale(S,P),G=cartesianScale(w,R);cartesianAddInPlace(U,G);var V=N,q=cartesianDot(U,V),O=cartesianDot(V,V),W=q*q-O*(cartesianDot(U,U)-1);if(!(W<0)){var H=sqrt$2(W),L=cartesianScale(V,(-q-H)/O);if(cartesianAddInPlace(L,U),L=spherical(L),!b)return L;var z=g[0],F=p[0],j=g[1],Z=p[1],J;F<z&&(J=z,z=F,F=J);var ee=F-z,ne=abs$1(ee-pi$1)<epsilon$1,ie=ne||ee<epsilon$1;if(!ne&&Z<j&&(J=j,j=Z,Z=J),ie?ne?j+Z>0^L[1]<(abs$1(L[0]-z)<epsilon$1?j:Z):j<=L[1]&&L[1]<=Z:ee>pi$1^(z<=L[0]&&L[0]<=F)){var fe=cartesianScale(V,(-q+H)/O);return cartesianAddInPlace(fe,U),[L,spherical(fe)]}}}function h(g,p){var b=r?e:pi$1-e,v=0;return g<-b?v|=1:g>b&&(v|=2),p<-b?v|=4:p>b&&(v|=8),v}return clip(l,f,o,r?[0,-e]:[-pi$1,e-pi$1])}function clipLine(e,t,n,r,i,o){var l=e[0],f=e[1],d=t[0],h=t[1],g=0,p=1,b=d-l,v=h-f,$;if($=n-l,!(!b&&$>0)){if($/=b,b<0){if($<g)return;$<p&&(p=$)}else if(b>0){if($>p)return;$>g&&(g=$)}if($=i-l,!(!b&&$<0)){if($/=b,b<0){if($>p)return;$>g&&(g=$)}else if(b>0){if($<g)return;$<p&&(p=$)}if($=r-f,!(!v&&$>0)){if($/=v,v<0){if($<g)return;$<p&&(p=$)}else if(v>0){if($>p)return;$>g&&(g=$)}if($=o-f,!(!v&&$<0)){if($/=v,v<0){if($>p)return;$>g&&(g=$)}else if(v>0){if($<g)return;$<p&&(p=$)}return g>0&&(e[0]=l+g*b,e[1]=f+g*v),p<1&&(t[0]=l+p*b,t[1]=f+p*v),!0}}}}}var clipMax=1e9,clipMin=-clipMax;function clipRectangle(e,t,n,r){function i(h,g){return e<=h&&h<=n&&t<=g&&g<=r}function o(h,g,p,b){var v=0,$=0;if(h==null||(v=l(h,p))!==($=l(g,p))||d(h,g)<0^p>0)do b.point(v===0||v===3?e:n,v>1?r:t);while((v=(v+p+4)%4)!==$);else b.point(g[0],g[1])}function l(h,g){return abs$1(h[0]-e)<epsilon$1?g>0?0:3:abs$1(h[0]-n)<epsilon$1?g>0?2:1:abs$1(h[1]-t)<epsilon$1?g>0?1:0:g>0?3:2}function f(h,g){return d(h.x,g.x)}function d(h,g){var p=l(h,1),b=l(g,1);return p!==b?p-b:p===0?g[1]-h[1]:p===1?h[0]-g[0]:p===2?h[1]-g[1]:g[0]-h[0]}return function(h){var g=h,p=clipBuffer(),b,v,$,S,w,_,I,T,P,R,N,U={point:G,lineStart:W,lineEnd:H,polygonStart:q,polygonEnd:O};function G(z,F){i(z,F)&&g.point(z,F)}function V(){for(var z=0,F=0,j=v.length;F<j;++F)for(var Z=v[F],J=1,ee=Z.length,ne=Z[0],ie,fe,ce=ne[0],ue=ne[1];J<ee;++J)ie=ce,fe=ue,ne=Z[J],ce=ne[0],ue=ne[1],fe<=r?ue>r&&(ce-ie)*(r-fe)>(ue-fe)*(e-ie)&&++z:ue<=r&&(ce-ie)*(r-fe)<(ue-fe)*(e-ie)&&--z;return z}function q(){g=p,b=[],v=[],N=!0}function O(){var z=V(),F=N&&z,j=(b=merge(b)).length;(F||j)&&(h.polygonStart(),F&&(h.lineStart(),o(null,null,1,h),h.lineEnd()),j&&clipRejoin(b,f,z,o,h),h.polygonEnd()),g=h,b=v=$=null}function W(){U.point=L,v&&v.push($=[]),R=!0,P=!1,I=T=NaN}function H(){b&&(L(S,w),_&&P&&p.rejoin(),b.push(p.result())),U.point=G,P&&g.lineEnd()}function L(z,F){var j=i(z,F);if(v&&$.push([z,F]),R)S=z,w=F,_=j,R=!1,j&&(g.lineStart(),g.point(z,F));else if(j&&P)g.point(z,F);else{var Z=[I=Math.max(clipMin,Math.min(clipMax,I)),T=Math.max(clipMin,Math.min(clipMax,T))],J=[z=Math.max(clipMin,Math.min(clipMax,z)),F=Math.max(clipMin,Math.min(clipMax,F))];clipLine(Z,J,e,t,n,r)?(P||(g.lineStart(),g.point(Z[0],Z[1])),g.point(J[0],J[1]),j||g.lineEnd(),N=!1):j&&(g.lineStart(),g.point(z,F),N=!1)}I=z,T=F,P=j}return U}}function extent(){var e=0,t=0,n=960,r=500,i,o,l;return l={stream:function(f){return i&&o===f?i:i=clipRectangle(e,t,n,r)(o=f)},extent:function(f){return arguments.length?(e=+f[0][0],t=+f[0][1],n=+f[1][0],r=+f[1][1],i=o=null,l):[[e,t],[n,r]]}}}var lengthSum$1,lambda0,sinPhi0,cosPhi0,lengthStream$1={sphere:noop$1,point:noop$1,lineStart:lengthLineStart,lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1};function lengthLineStart(){lengthStream$1.point=lengthPointFirst$1,lengthStream$1.lineEnd=lengthLineEnd}function lengthLineEnd(){lengthStream$1.point=lengthStream$1.lineEnd=noop$1}function lengthPointFirst$1(e,t){e*=radians,t*=radians,lambda0=e,sinPhi0=sin$1(t),cosPhi0=cos$1(t),lengthStream$1.point=lengthPoint$1}function lengthPoint$1(e,t){e*=radians,t*=radians;var n=sin$1(t),r=cos$1(t),i=abs$1(e-lambda0),o=cos$1(i),l=sin$1(i),f=r*l,d=cosPhi0*n-sinPhi0*r*o,h=sinPhi0*n+cosPhi0*r*o;lengthSum$1.add(atan2$1(sqrt$2(f*f+d*d),h)),lambda0=e,sinPhi0=n,cosPhi0=r}function length$1(e){return lengthSum$1=new Adder,geoStream(e,lengthStream$1),+lengthSum$1}var coordinates=[null,null],object={type:"LineString",coordinates};function distance(e,t){return coordinates[0]=e,coordinates[1]=t,length$1(object)}var containsObjectType={Feature:function(e,t){return containsGeometry(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)if(containsGeometry(n[r].geometry,t))return!0;return!1}},containsGeometryType={Sphere:function(){return!0},Point:function(e,t){return containsPoint(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(containsPoint(n[r],t))return!0;return!1},LineString:function(e,t){return containsLine(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(containsLine(n[r],t))return!0;return!1},Polygon:function(e,t){return containsPolygon(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(containsPolygon(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)if(containsGeometry(n[r],t))return!0;return!1}};function containsGeometry(e,t){return e&&containsGeometryType.hasOwnProperty(e.type)?containsGeometryType[e.type](e,t):!1}function containsPoint(e,t){return distance(e,t)===0}function containsLine(e,t){for(var n,r,i,o=0,l=e.length;o<l;o++){if(r=distance(e[o],t),r===0||o>0&&(i=distance(e[o],e[o-1]),i>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<epsilon2*i))return!0;n=r}return!1}function containsPolygon(e,t){return!!polygonContains(e.map(ringRadians),pointRadians(t))}function ringRadians(e){return e=e.map(pointRadians),e.pop(),e}function pointRadians(e){return[e[0]*radians,e[1]*radians]}function contains$1(e,t){return(e&&containsObjectType.hasOwnProperty(e.type)?containsObjectType[e.type]:containsGeometry)(e,t)}function graticuleX(e,t,n){var r=range$2(e,t-epsilon$1,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function graticuleY(e,t,n){var r=range$2(e,t-epsilon$1,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function graticule(){var e,t,n,r,i,o,l,f,d=10,h=d,g=90,p=360,b,v,$,S,w=2.5;function _(){return{type:"MultiLineString",coordinates:I()}}function I(){return range$2(ceil(r/g)*g,n,g).map($).concat(range$2(ceil(f/p)*p,l,p).map(S)).concat(range$2(ceil(t/d)*d,e,d).filter(function(T){return abs$1(T%g)>epsilon$1}).map(b)).concat(range$2(ceil(o/h)*h,i,h).filter(function(T){return abs$1(T%p)>epsilon$1}).map(v))}return _.lines=function(){return I().map(function(T){return{type:"LineString",coordinates:T}})},_.outline=function(){return{type:"Polygon",coordinates:[$(r).concat(S(l).slice(1),$(n).reverse().slice(1),S(f).reverse().slice(1))]}},_.extent=function(T){return arguments.length?_.extentMajor(T).extentMinor(T):_.extentMinor()},_.extentMajor=function(T){return arguments.length?(r=+T[0][0],n=+T[1][0],f=+T[0][1],l=+T[1][1],r>n&&(T=r,r=n,n=T),f>l&&(T=f,f=l,l=T),_.precision(w)):[[r,f],[n,l]]},_.extentMinor=function(T){return arguments.length?(t=+T[0][0],e=+T[1][0],o=+T[0][1],i=+T[1][1],t>e&&(T=t,t=e,e=T),o>i&&(T=o,o=i,i=T),_.precision(w)):[[t,o],[e,i]]},_.step=function(T){return arguments.length?_.stepMajor(T).stepMinor(T):_.stepMinor()},_.stepMajor=function(T){return arguments.length?(g=+T[0],p=+T[1],_):[g,p]},_.stepMinor=function(T){return arguments.length?(d=+T[0],h=+T[1],_):[d,h]},_.precision=function(T){return arguments.length?(w=+T,b=graticuleX(o,i,90),v=graticuleY(t,e,w),$=graticuleX(f,l,90),S=graticuleY(r,n,w),_):w},_.extentMajor([[-180,-90+epsilon$1],[180,90-epsilon$1]]).extentMinor([[-180,-80-epsilon$1],[180,80+epsilon$1]])}function graticule10(){return graticule()()}function interpolate(e,t){var n=e[0]*radians,r=e[1]*radians,i=t[0]*radians,o=t[1]*radians,l=cos$1(r),f=sin$1(r),d=cos$1(o),h=sin$1(o),g=l*cos$1(n),p=l*sin$1(n),b=d*cos$1(i),v=d*sin$1(i),$=2*asin$1(sqrt$2(haversin(o-r)+l*d*haversin(i-n))),S=sin$1($),w=$?function(_){var I=sin$1(_*=$)/S,T=sin$1($-_)/S,P=T*g+I*b,R=T*p+I*v,N=T*f+I*h;return[atan2$1(R,P)*degrees,atan2$1(N,sqrt$2(P*P+R*R))*degrees]}:function(){return[n*degrees,r*degrees]};return w.distance=$,w}var identity$4=e=>e,areaSum=new Adder,areaRingSum=new Adder,x00$2,y00$2,x0$3,y0$3,areaStream={point:noop$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:function(){areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){areaStream.lineStart=areaStream.lineEnd=areaStream.point=noop$1,areaSum.add(abs$1(areaRingSum)),areaRingSum=new Adder},result:function(){var e=areaSum/2;return areaSum=new Adder,e}};function areaRingStart(){areaStream.point=areaPointFirst}function areaPointFirst(e,t){areaStream.point=areaPoint,x00$2=x0$3=e,y00$2=y0$3=t}function areaPoint(e,t){areaRingSum.add(y0$3*e-x0$3*t),x0$3=e,y0$3=t}function areaRingEnd(){areaPoint(x00$2,y00$2)}var pathArea=areaStream,x0$2=1/0,y0$2=x0$2,x1=-x0$2,y1=x1,boundsStream={point:boundsPoint,lineStart:noop$1,lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1,result:function(){var e=[[x0$2,y0$2],[x1,y1]];return x1=y1=-(y0$2=x0$2=1/0),e}};function boundsPoint(e,t){e<x0$2&&(x0$2=e),e>x1&&(x1=e),t<y0$2&&(y0$2=t),t>y1&&(y1=t)}var boundsStream$1=boundsStream,X0=0,Y0=0,Z0=0,X1=0,Y1=0,Z1=0,X2=0,Y2=0,Z2=0,x00$1,y00$1,x0$1,y0$1,centroidStream={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.point=centroidPoint,centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd},result:function(){var e=Z2?[X2/Z2,Y2/Z2]:Z1?[X1/Z1,Y1/Z1]:Z0?[X0/Z0,Y0/Z0]:[NaN,NaN];return X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0,e}};function centroidPoint(e,t){X0+=e,Y0+=t,++Z0}function centroidLineStart(){centroidStream.point=centroidPointFirstLine}function centroidPointFirstLine(e,t){centroidStream.point=centroidPointLine,centroidPoint(x0$1=e,y0$1=t)}function centroidPointLine(e,t){var n=e-x0$1,r=t-y0$1,i=sqrt$2(n*n+r*r);X1+=i*(x0$1+e)/2,Y1+=i*(y0$1+t)/2,Z1+=i,centroidPoint(x0$1=e,y0$1=t)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(e,t){centroidStream.point=centroidPointRing,centroidPoint(x00$1=x0$1=e,y00$1=y0$1=t)}function centroidPointRing(e,t){var n=e-x0$1,r=t-y0$1,i=sqrt$2(n*n+r*r);X1+=i*(x0$1+e)/2,Y1+=i*(y0$1+t)/2,Z1+=i,i=y0$1*e-x0$1*t,X2+=i*(x0$1+e),Y2+=i*(y0$1+t),Z2+=i*3,centroidPoint(x0$1=e,y0$1=t)}var pathCentroid=centroidStream;function PathContext(e){this._context=e}PathContext.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,tau$1);break}}},result:noop$1};var lengthSum=new Adder,lengthRing,x00,y00,x0,y0,lengthStream={point:noop$1,lineStart:function(){lengthStream.point=lengthPointFirst},lineEnd:function(){lengthRing&&lengthPoint(x00,y00),lengthStream.point=noop$1},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var e=+lengthSum;return lengthSum=new Adder,e}};function lengthPointFirst(e,t){lengthStream.point=lengthPoint,x00=x0=e,y00=y0=t}function lengthPoint(e,t){x0-=e,y0-=t,lengthSum.add(sqrt$2(x0*x0+y0*y0)),x0=e,y0=t}var pathMeasure=lengthStream;let cacheDigits,cacheAppend,cacheRadius,cacheCircle;class PathString{constructor(t){this._append=t==null?append:appendRound(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==cacheRadius||this._append!==cacheAppend){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,cacheRadius=r,cacheAppend=this._append,cacheCircle=this._,this._=i}this._+=cacheCircle;break}}}result(){const t=this._;return this._="",t.length?t:null}}function append(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function appendRound(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return append;if(t!==cacheDigits){const n=10**t;cacheDigits=t,cacheAppend=function(i){let o=1;this._+=i[0];for(const l=i.length;o<l;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return cacheAppend}function index$2(e,t){let n=3,r=4.5,i,o;function l(f){return f&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),geoStream(f,i(o))),o.result()}return l.area=function(f){return geoStream(f,i(pathArea)),pathArea.result()},l.measure=function(f){return geoStream(f,i(pathMeasure)),pathMeasure.result()},l.bounds=function(f){return geoStream(f,i(boundsStream$1)),boundsStream$1.result()},l.centroid=function(f){return geoStream(f,i(pathCentroid)),pathCentroid.result()},l.projection=function(f){return arguments.length?(i=f==null?(e=null,identity$4):(e=f).stream,l):e},l.context=function(f){return arguments.length?(o=f==null?(t=null,new PathString(n)):new PathContext(t=f),typeof r!="function"&&o.pointRadius(r),l):t},l.pointRadius=function(f){return arguments.length?(r=typeof f=="function"?f:(o.pointRadius(+f),+f),l):r},l.digits=function(f){if(!arguments.length)return n;if(f==null)n=null;else{const d=Math.floor(f);if(!(d>=0))throw new RangeError(`invalid digits: ${f}`);n=d}return t===null&&(o=new PathString(n)),l},l.projection(e).digits(n).context(t)}function transform(e){return{stream:transformer$3(e)}}function transformer$3(e){return function(t){var n=new TransformStream;for(var r in e)n[r]=e[r];return n.stream=t,n}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fit(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),geoStream(n,e.stream(boundsStream$1)),t(boundsStream$1.result()),r!=null&&e.clipExtent(r),e}function fitExtent(e,t,n){return fit(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],l=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),f=+t[0][0]+(i-l*(r[1][0]+r[0][0]))/2,d=+t[0][1]+(o-l*(r[1][1]+r[0][1]))/2;e.scale(150*l).translate([f,d])},n)}function fitSize(e,t,n){return fitExtent(e,[[0,0],t],n)}function fitWidth(e,t,n){return fit(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),l=(i-o*(r[1][0]+r[0][0]))/2,f=-o*r[0][1];e.scale(150*o).translate([l,f])},n)}function fitHeight(e,t,n){return fit(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),l=-o*r[0][0],f=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([l,f])},n)}var maxDepth=16,cosMinDistance=cos$1(30*radians);function resample(e,t){return+t?resample$1(e,t):resampleNone(e)}function resampleNone(e){return transformer$3({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function resample$1(e,t){function n(r,i,o,l,f,d,h,g,p,b,v,$,S,w){var _=h-r,I=g-i,T=_*_+I*I;if(T>4*t&&S--){var P=l+b,R=f+v,N=d+$,U=sqrt$2(P*P+R*R+N*N),G=asin$1(N/=U),V=abs$1(abs$1(N)-1)<epsilon$1||abs$1(o-p)<epsilon$1?(o+p)/2:atan2$1(R,P),q=e(V,G),O=q[0],W=q[1],H=O-r,L=W-i,z=I*H-_*L;(z*z/T>t||abs$1((_*H+I*L)/T-.5)>.3||l*b+f*v+d*$<cosMinDistance)&&(n(r,i,o,l,f,d,O,W,V,P/=U,R/=U,N,S,w),w.point(O,W),n(O,W,V,P,R,N,h,g,p,b,v,$,S,w))}}return function(r){var i,o,l,f,d,h,g,p,b,v,$,S,w={point:_,lineStart:I,lineEnd:P,polygonStart:function(){r.polygonStart(),w.lineStart=R},polygonEnd:function(){r.polygonEnd(),w.lineStart=I}};function _(G,V){G=e(G,V),r.point(G[0],G[1])}function I(){p=NaN,w.point=T,r.lineStart()}function T(G,V){var q=cartesian([G,V]),O=e(G,V);n(p,b,g,v,$,S,p=O[0],b=O[1],g=G,v=q[0],$=q[1],S=q[2],maxDepth,r),r.point(p,b)}function P(){w.point=_,r.lineEnd()}function R(){I(),w.point=N,w.lineEnd=U}function N(G,V){T(i=G,V),o=p,l=b,f=v,d=$,h=S,w.point=T}function U(){n(p,b,g,v,$,S,o,l,i,f,d,h,maxDepth,r),w.lineEnd=P,P()}return w}}var transformRadians=transformer$3({point:function(e,t){this.stream.point(e*radians,t*radians)}});function transformRotate(e){return transformer$3({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function scaleTranslate(e,t,n,r,i){function o(l,f){return l*=r,f*=i,[t+e*l,n-e*f]}return o.invert=function(l,f){return[(l-t)/e*r,(n-f)/e*i]},o}function scaleTranslateRotate(e,t,n,r,i,o){if(!o)return scaleTranslate(e,t,n,r,i);var l=cos$1(o),f=sin$1(o),d=l*e,h=f*e,g=l/e,p=f/e,b=(f*n-l*t)/e,v=(f*t+l*n)/e;function $(S,w){return S*=r,w*=i,[d*S-h*w+t,n-h*S-d*w]}return $.invert=function(S,w){return[r*(g*S-p*w+b),i*(v-p*S-g*w)]},$}function projection(e){return projectionMutator(function(){return e})()}function projectionMutator(e){var t,n=150,r=480,i=250,o=0,l=0,f=0,d=0,h=0,g,p=0,b=1,v=1,$=null,S=clipAntimeridian,w=null,_,I,T,P=identity$4,R=.5,N,U,G,V,q;function O(z){return G(z[0]*radians,z[1]*radians)}function W(z){return z=G.invert(z[0],z[1]),z&&[z[0]*degrees,z[1]*degrees]}O.stream=function(z){return V&&q===z?V:V=transformRadians(transformRotate(g)(S(N(P(q=z)))))},O.preclip=function(z){return arguments.length?(S=z,$=void 0,L()):S},O.postclip=function(z){return arguments.length?(P=z,w=_=I=T=null,L()):P},O.clipAngle=function(z){return arguments.length?(S=+z?clipCircle($=z*radians):($=null,clipAntimeridian),L()):$*degrees},O.clipExtent=function(z){return arguments.length?(P=z==null?(w=_=I=T=null,identity$4):clipRectangle(w=+z[0][0],_=+z[0][1],I=+z[1][0],T=+z[1][1]),L()):w==null?null:[[w,_],[I,T]]},O.scale=function(z){return arguments.length?(n=+z,H()):n},O.translate=function(z){return arguments.length?(r=+z[0],i=+z[1],H()):[r,i]},O.center=function(z){return arguments.length?(o=z[0]%360*radians,l=z[1]%360*radians,H()):[o*degrees,l*degrees]},O.rotate=function(z){return arguments.length?(f=z[0]%360*radians,d=z[1]%360*radians,h=z.length>2?z[2]%360*radians:0,H()):[f*degrees,d*degrees,h*degrees]},O.angle=function(z){return arguments.length?(p=z%360*radians,H()):p*degrees},O.reflectX=function(z){return arguments.length?(b=z?-1:1,H()):b<0},O.reflectY=function(z){return arguments.length?(v=z?-1:1,H()):v<0},O.precision=function(z){return arguments.length?(N=resample(U,R=z*z),L()):sqrt$2(R)},O.fitExtent=function(z,F){return fitExtent(O,z,F)},O.fitSize=function(z,F){return fitSize(O,z,F)},O.fitWidth=function(z,F){return fitWidth(O,z,F)},O.fitHeight=function(z,F){return fitHeight(O,z,F)};function H(){var z=scaleTranslateRotate(n,0,0,b,v,p).apply(null,t(o,l)),F=scaleTranslateRotate(n,r-z[0],i-z[1],b,v,p);return g=rotateRadians(f,d,h),U=compose(t,F),G=compose(g,U),N=resample(U,R),L()}function L(){return V=q=null,O}return function(){return t=e.apply(this,arguments),O.invert=t.invert&&W,H()}}function conicProjection(e){var t=0,n=pi$1/3,r=projectionMutator(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*radians,n=o[1]*radians):[t*degrees,n*degrees]},i}function cylindricalEqualAreaRaw(e){var t=cos$1(e);function n(r,i){return[r*t,sin$1(i)/t]}return n.invert=function(r,i){return[r/t,asin$1(i*t)]},n}function conicEqualAreaRaw(e,t){var n=sin$1(e),r=(n+sin$1(t))/2;if(abs$1(r)<epsilon$1)return cylindricalEqualAreaRaw(e);var i=1+n*(2*r-n),o=sqrt$2(i)/r;function l(f,d){var h=sqrt$2(i-2*r*sin$1(d))/r;return[h*sin$1(f*=r),o-h*cos$1(f)]}return l.invert=function(f,d){var h=o-d,g=atan2$1(f,abs$1(h))*sign$1(h);return h*r<0&&(g-=pi$1*sign$1(f)*sign$1(h)),[g/r,asin$1((i-(f*f+h*h)*r*r)/(2*r))]},l}function conicEqualArea(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function albers(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function multiplex(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function albersUsa(){var e,t,n=albers(),r,i=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,l=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f,d,h={point:function(b,v){d=[b,v]}};function g(b){var v=b[0],$=b[1];return d=null,r.point(v,$),d||(o.point(v,$),d)||(f.point(v,$),d)}g.invert=function(b){var v=n.scale(),$=n.translate(),S=(b[0]-$[0])/v,w=(b[1]-$[1])/v;return(w>=.12&&w<.234&&S>=-.425&&S<-.214?i:w>=.166&&w<.234&&S>=-.214&&S<-.115?l:n).invert(b)},g.stream=function(b){return e&&t===b?e:e=multiplex([n.stream(t=b),i.stream(b),l.stream(b)])},g.precision=function(b){return arguments.length?(n.precision(b),i.precision(b),l.precision(b),p()):n.precision()},g.scale=function(b){return arguments.length?(n.scale(b),i.scale(b*.35),l.scale(b),g.translate(n.translate())):n.scale()},g.translate=function(b){if(!arguments.length)return n.translate();var v=n.scale(),$=+b[0],S=+b[1];return r=n.translate(b).clipExtent([[$-.455*v,S-.238*v],[$+.455*v,S+.238*v]]).stream(h),o=i.translate([$-.307*v,S+.201*v]).clipExtent([[$-.425*v+epsilon$1,S+.12*v+epsilon$1],[$-.214*v-epsilon$1,S+.234*v-epsilon$1]]).stream(h),f=l.translate([$-.205*v,S+.212*v]).clipExtent([[$-.214*v+epsilon$1,S+.166*v+epsilon$1],[$-.115*v-epsilon$1,S+.234*v-epsilon$1]]).stream(h),p()},g.fitExtent=function(b,v){return fitExtent(g,b,v)},g.fitSize=function(b,v){return fitSize(g,b,v)},g.fitWidth=function(b,v){return fitWidth(g,b,v)},g.fitHeight=function(b,v){return fitHeight(g,b,v)};function p(){return e=t=null,g}return g.scale(1070)}function azimuthalRaw(e){return function(t,n){var r=cos$1(t),i=cos$1(n),o=e(r*i);return o===1/0?[2,0]:[o*i*sin$1(t),o*sin$1(n)]}}function azimuthalInvert(e){return function(t,n){var r=sqrt$2(t*t+n*n),i=e(r),o=sin$1(i),l=cos$1(i);return[atan2$1(t*o,r*l),asin$1(r&&n*o/r)]}}var azimuthalEqualAreaRaw=azimuthalRaw(function(e){return sqrt$2(2/(1+e))});azimuthalEqualAreaRaw.invert=azimuthalInvert(function(e){return 2*asin$1(e/2)});function azimuthalEqualArea(){return projection(azimuthalEqualAreaRaw).scale(124.75).clipAngle(180-.001)}var azimuthalEquidistantRaw=azimuthalRaw(function(e){return(e=acos$1(e))&&e/sin$1(e)});azimuthalEquidistantRaw.invert=azimuthalInvert(function(e){return e});function azimuthalEquidistant(){return projection(azimuthalEquidistantRaw).scale(79.4188).clipAngle(180-.001)}function mercatorRaw(e,t){return[e,log$1(tan((halfPi$1+t)/2))]}mercatorRaw.invert=function(e,t){return[e,2*atan(exp(t))-halfPi$1]};function mercator(){return mercatorProjection(mercatorRaw).scale(961/tau$1)}function mercatorProjection(e){var t=projection(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,l=null,f,d,h;t.scale=function(p){return arguments.length?(r(p),g()):r()},t.translate=function(p){return arguments.length?(i(p),g()):i()},t.center=function(p){return arguments.length?(n(p),g()):n()},t.clipExtent=function(p){return arguments.length?(p==null?l=f=d=h=null:(l=+p[0][0],f=+p[0][1],d=+p[1][0],h=+p[1][1]),g()):l==null?null:[[l,f],[d,h]]};function g(){var p=pi$1*r(),b=t(rotation(t.rotate()).invert([0,0]));return o(l==null?[[b[0]-p,b[1]-p],[b[0]+p,b[1]+p]]:e===mercatorRaw?[[Math.max(b[0]-p,l),f],[Math.min(b[0]+p,d),h]]:[[l,Math.max(b[1]-p,f)],[d,Math.min(b[1]+p,h)]])}return g()}function tany(e){return tan((halfPi$1+e)/2)}function conicConformalRaw(e,t){var n=cos$1(e),r=e===t?sin$1(e):log$1(n/cos$1(t))/log$1(tany(t)/tany(e)),i=n*pow$1(tany(e),r)/r;if(!r)return mercatorRaw;function o(l,f){i>0?f<-halfPi$1+epsilon$1&&(f=-halfPi$1+epsilon$1):f>halfPi$1-epsilon$1&&(f=halfPi$1-epsilon$1);var d=i/pow$1(tany(f),r);return[d*sin$1(r*l),i-d*cos$1(r*l)]}return o.invert=function(l,f){var d=i-f,h=sign$1(r)*sqrt$2(l*l+d*d),g=atan2$1(l,abs$1(d))*sign$1(d);return d*r<0&&(g-=pi$1*sign$1(l)*sign$1(d)),[g/r,2*atan(pow$1(i/h,1/r))-halfPi$1]},o}function conicConformal(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])}function equirectangularRaw(e,t){return[e,t]}equirectangularRaw.invert=equirectangularRaw;function equirectangular(){return projection(equirectangularRaw).scale(152.63)}function conicEquidistantRaw(e,t){var n=cos$1(e),r=e===t?sin$1(e):(n-cos$1(t))/(t-e),i=n/r+e;if(abs$1(r)<epsilon$1)return equirectangularRaw;function o(l,f){var d=i-f,h=r*l;return[d*sin$1(h),i-d*cos$1(h)]}return o.invert=function(l,f){var d=i-f,h=atan2$1(l,abs$1(d))*sign$1(d);return d*r<0&&(h-=pi$1*sign$1(l)*sign$1(d)),[h/r,i-sign$1(r)*sqrt$2(l*l+d*d)]},o}function conicEquidistant(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])}var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=sqrt$2(3)/2,iterations=12;function equalEarthRaw(e,t){var n=asin$1(M*sin$1(t)),r=n*n,i=r*r*r;return[e*cos$1(n)/(M*(A1+3*A2*r+i*(7*A3+9*A4*r))),n*(A1+A2*r+i*(A3+A4*r))]}equalEarthRaw.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,l,f,d;o<iterations&&(f=n*(A1+A2*r+i*(A3+A4*r))-t,d=A1+3*A2*r+i*(7*A3+9*A4*r),n-=l=f/d,r=n*n,i=r*r*r,!(abs$1(l)<epsilon2));++o);return[M*e*(A1+3*A2*r+i*(7*A3+9*A4*r))/cos$1(n),asin$1(sin$1(n)/M)]};function equalEarth(){return projection(equalEarthRaw).scale(177.158)}function gnomonicRaw(e,t){var n=cos$1(t),r=cos$1(e)*n;return[n*sin$1(e)/r,sin$1(t)/r]}gnomonicRaw.invert=azimuthalInvert(atan);function gnomonic(){return projection(gnomonicRaw).scale(144.049).clipAngle(60)}function identity$3(){var e=1,t=0,n=0,r=1,i=1,o=0,l,f,d=null,h,g,p,b=1,v=1,$=transformer$3({point:function(P,R){var N=T([P,R]);this.stream.point(N[0],N[1])}}),S=identity$4,w,_;function I(){return b=e*r,v=e*i,w=_=null,T}function T(P){var R=P[0]*b,N=P[1]*v;if(o){var U=N*l-R*f;R=R*l+N*f,N=U}return[R+t,N+n]}return T.invert=function(P){var R=P[0]-t,N=P[1]-n;if(o){var U=N*l+R*f;R=R*l-N*f,N=U}return[R/b,N/v]},T.stream=function(P){return w&&_===P?w:w=$(S(_=P))},T.postclip=function(P){return arguments.length?(S=P,d=h=g=p=null,I()):S},T.clipExtent=function(P){return arguments.length?(S=P==null?(d=h=g=p=null,identity$4):clipRectangle(d=+P[0][0],h=+P[0][1],g=+P[1][0],p=+P[1][1]),I()):d==null?null:[[d,h],[g,p]]},T.scale=function(P){return arguments.length?(e=+P,I()):e},T.translate=function(P){return arguments.length?(t=+P[0],n=+P[1],I()):[t,n]},T.angle=function(P){return arguments.length?(o=P%360*radians,f=sin$1(o),l=cos$1(o),I()):o*degrees},T.reflectX=function(P){return arguments.length?(r=P?-1:1,I()):r<0},T.reflectY=function(P){return arguments.length?(i=P?-1:1,I()):i<0},T.fitExtent=function(P,R){return fitExtent(T,P,R)},T.fitSize=function(P,R){return fitSize(T,P,R)},T.fitWidth=function(P,R){return fitWidth(T,P,R)},T.fitHeight=function(P,R){return fitHeight(T,P,R)},T}function naturalEarth1Raw(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}naturalEarth1Raw.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,l=o*o;n-=i=(n*(1.007226+o*(.015085+l*(-.044475+.028874*o-.005916*l)))-t)/(1.007226+o*(.015085*3+l*(-.044475*7+.028874*9*o-.005916*11*l)))}while(abs$1(i)>epsilon$1&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function naturalEarth1(){return projection(naturalEarth1Raw).scale(175.295)}function orthographicRaw(e,t){return[cos$1(t)*sin$1(e),sin$1(t)]}orthographicRaw.invert=azimuthalInvert(asin$1);function orthographic(){return projection(orthographicRaw).scale(249.5).clipAngle(90+epsilon$1)}function stereographicRaw(e,t){var n=cos$1(t),r=1+cos$1(e)*n;return[n*sin$1(e)/r,sin$1(t)/r]}stereographicRaw.invert=azimuthalInvert(function(e){return 2*atan(e)});function stereographic(){return projection(stereographicRaw).scale(250).clipAngle(142)}function transverseMercatorRaw(e,t){return[log$1(tan((halfPi$1+t)/2)),-e]}transverseMercatorRaw.invert=function(e,t){return[-t,2*atan(exp(e))-halfPi$1]};function transverseMercator(){var e=mercatorProjection(transverseMercatorRaw),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function defaultSeparation$1(e,t){return e.parent===t.parent?1:2}function meanX(e){return e.reduce(meanXReduce,0)/e.length}function meanXReduce(e,t){return e+t.x}function maxY(e){return 1+e.reduce(maxYReduce,0)}function maxYReduce(e,t){return Math.max(e,t.y)}function leafLeft(e){for(var t;t=e.children;)e=t[0];return e}function leafRight(e){for(var t;t=e.children;)e=t[t.length-1];return e}function cluster(){var e=defaultSeparation$1,t=1,n=1,r=!1;function i(o){var l,f=0;o.eachAfter(function(b){var v=b.children;v?(b.x=meanX(v),b.y=maxY(v)):(b.x=l?f+=e(b,l):0,b.y=0,l=b)});var d=leafLeft(o),h=leafRight(o),g=d.x-e(d,h)/2,p=h.x+e(h,d)/2;return o.eachAfter(r?function(b){b.x=(b.x-o.x)*t,b.y=(o.y-b.y)*n}:function(b){b.x=(b.x-g)/(p-g)*t,b.y=(1-(o.y?b.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function count(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function node_count(){return this.eachAfter(count)}function node_each(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function node_eachBefore(e,t){for(var n=this,r=[n],i,o,l=-1;n=r.pop();)if(e.call(t,n,++l,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function node_eachAfter(e,t){for(var n=this,r=[n],i=[],o,l,f,d=-1;n=r.pop();)if(i.push(n),o=n.children)for(l=0,f=o.length;l<f;++l)r.push(o[l]);for(;n=i.pop();)e.call(t,n,++d,this);return this}function node_find(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function node_sum(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function node_sort(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function node_path(e){for(var t=this,n=leastCommonAncestor(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function leastCommonAncestor(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function node_ancestors(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function node_descendants(){return Array.from(this)}function node_leaves(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function node_links(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*node_iterator(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function hierarchy(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=mapChildren)):t===void 0&&(t=objectChildren);for(var n=new Node$1(e),r,i=[n],o,l,f,d;r=i.pop();)if((l=t(r.data))&&(d=(l=Array.from(l)).length))for(r.children=l,f=d-1;f>=0;--f)i.push(o=l[f]=new Node$1(l[f])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(computeHeight)}function node_copy(){return hierarchy(this).eachBefore(copyData)}function objectChildren(e){return e.children}function mapChildren(e){return Array.isArray(e)?e[1]:null}function copyData(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function computeHeight(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Node$1(e){this.data=e,this.depth=this.height=0,this.parent=null}Node$1.prototype=hierarchy.prototype={constructor:Node$1,count:node_count,each:node_each,eachAfter:node_eachAfter,eachBefore:node_eachBefore,find:node_find,sum:node_sum,sort:node_sort,path:node_path,ancestors:node_ancestors,descendants:node_descendants,leaves:node_leaves,links:node_links,copy:node_copy,[Symbol.iterator]:node_iterator};function optional(e){return e==null?null:required(e)}function required(e){if(typeof e!="function")throw new Error;return e}function constantZero(){return 0}function constant$2(e){return function(){return e}}const a$1=1664525,c$3=1013904223,m=4294967296;function lcg$1(){let e=1;return()=>(e=(a$1*e+c$3)%m)/m}function array$1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function shuffle(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function enclose(e){return packEncloseRandom(e,lcg$1())}function packEncloseRandom(e,t){for(var n=0,r=(e=shuffle(Array.from(e),t)).length,i=[],o,l;n<r;)o=e[n],l&&enclosesWeak(l,o)?++n:(l=encloseBasis(i=extendBasis(i,o)),n=0);return l}function extendBasis(e,t){var n,r;if(enclosesWeakAll(t,e))return[t];for(n=0;n<e.length;++n)if(enclosesNot(t,e[n])&&enclosesWeakAll(encloseBasis2(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(enclosesNot(encloseBasis2(e[n],e[r]),t)&&enclosesNot(encloseBasis2(e[n],t),e[r])&&enclosesNot(encloseBasis2(e[r],t),e[n])&&enclosesWeakAll(encloseBasis3(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function enclosesNot(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function enclosesWeak(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function enclosesWeakAll(e,t){for(var n=0;n<t.length;++n)if(!enclosesWeak(e,t[n]))return!1;return!0}function encloseBasis(e){switch(e.length){case 1:return encloseBasis1(e[0]);case 2:return encloseBasis2(e[0],e[1]);case 3:return encloseBasis3(e[0],e[1],e[2])}}function encloseBasis1(e){return{x:e.x,y:e.y,r:e.r}}function encloseBasis2(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,l=t.y,f=t.r,d=o-n,h=l-r,g=f-i,p=Math.sqrt(d*d+h*h);return{x:(n+o+d/p*g)/2,y:(r+l+h/p*g)/2,r:(p+i+f)/2}}function encloseBasis3(e,t,n){var r=e.x,i=e.y,o=e.r,l=t.x,f=t.y,d=t.r,h=n.x,g=n.y,p=n.r,b=r-l,v=r-h,$=i-f,S=i-g,w=d-o,_=p-o,I=r*r+i*i-o*o,T=I-l*l-f*f+d*d,P=I-h*h-g*g+p*p,R=v*$-b*S,N=($*P-S*T)/(R*2)-r,U=(S*w-$*_)/R,G=(v*T-b*P)/(R*2)-i,V=(b*_-v*w)/R,q=U*U+V*V-1,O=2*(o+N*U+G*V),W=N*N+G*G-o*o,H=-(Math.abs(q)>1e-6?(O+Math.sqrt(O*O-4*q*W))/(2*q):W/O);return{x:r+N+U*H,y:i+G+V*H,r:H}}function place(e,t,n){var r=e.x-t.x,i,o,l=e.y-t.y,f,d,h=r*r+l*l;h?(o=t.r+n.r,o*=o,d=e.r+n.r,d*=d,o>d?(i=(h+d-o)/(2*h),f=Math.sqrt(Math.max(0,d/h-i*i)),n.x=e.x-i*r-f*l,n.y=e.y-i*l+f*r):(i=(h+o-d)/(2*h),f=Math.sqrt(Math.max(0,o/h-i*i)),n.x=t.x+i*r-f*l,n.y=t.y+i*l+f*r)):(n.x=t.x+n.r,n.y=t.y)}function intersects(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function score(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function Node(e){this._=e,this.next=null,this.previous=null}function packSiblingsRandom(e,t){if(!(o=(e=array$1(e)).length))return 0;var n,r,i,o,l,f,d,h,g,p,b;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;place(r,n,i=e[2]),n=new Node(n),r=new Node(r),i=new Node(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(d=3;d<o;++d){place(n._,r._,i=e[d]),i=new Node(i),h=r.next,g=n.previous,p=r._.r,b=n._.r;do if(p<=b){if(intersects(h._,i._)){r=h,n.next=r,r.previous=n,--d;continue e}p+=h._.r,h=h.next}else{if(intersects(g._,i._)){n=g,n.next=r,r.previous=n,--d;continue e}b+=g._.r,g=g.previous}while(h!==g.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,l=score(n);(i=i.next)!==r;)(f=score(i))<l&&(n=i,l=f);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=packEncloseRandom(n,t),d=0;d<o;++d)n=e[d],n.x-=i.x,n.y-=i.y;return i.r}function siblings(e){return packSiblingsRandom(e,lcg$1()),e}function defaultRadius(e){return Math.sqrt(e.value)}function index$1(){var e=null,t=1,n=1,r=constantZero;function i(o){const l=lcg$1();return o.x=t/2,o.y=n/2,e?o.eachBefore(radiusLeaf(e)).eachAfter(packChildrenRandom(r,.5,l)).eachBefore(translateChild(1)):o.eachBefore(radiusLeaf(defaultRadius)).eachAfter(packChildrenRandom(constantZero,1,l)).eachAfter(packChildrenRandom(r,o.r/Math.min(t,n),l)).eachBefore(translateChild(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=optional(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:constant$2(+o),i):r},i}function radiusLeaf(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function packChildrenRandom(e,t,n){return function(r){if(i=r.children){var i,o,l=i.length,f=e(r)*t||0,d;if(f)for(o=0;o<l;++o)i[o].r+=f;if(d=packSiblingsRandom(i,n),f)for(o=0;o<l;++o)i[o].r-=f;r.r=d+f}}}function translateChild(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function roundNode(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function treemapDice(e,t,n,r,i){for(var o=e.children,l,f=-1,d=o.length,h=e.value&&(r-t)/e.value;++f<d;)l=o[f],l.y0=n,l.y1=i,l.x0=t,l.x1=t+=l.value*h}function partition(){var e=1,t=1,n=0,r=!1;function i(l){var f=l.height+1;return l.x0=l.y0=n,l.x1=e,l.y1=t/f,l.eachBefore(o(t,f)),r&&l.eachBefore(roundNode),l}function o(l,f){return function(d){d.children&&treemapDice(d,d.x0,l*(d.depth+1)/f,d.x1,l*(d.depth+2)/f);var h=d.x0,g=d.y0,p=d.x1-n,b=d.y1-n;p<h&&(h=p=(h+p)/2),b<g&&(g=b=(g+b)/2),d.x0=h,d.y0=g,d.x1=p,d.y1=b}}return i.round=function(l){return arguments.length?(r=!!l,i):r},i.size=function(l){return arguments.length?(e=+l[0],t=+l[1],i):[e,t]},i.padding=function(l){return arguments.length?(n=+l,i):n},i}var preroot={depth:-1},ambiguous={},imputed={};function defaultId(e){return e.id}function defaultParentId(e){return e.parentId}function stratify(){var e=defaultId,t=defaultParentId,n;function r(i){var o=Array.from(i),l=e,f=t,d,h,g,p,b,v,$,S,w=new Map;if(n!=null){const _=o.map((P,R)=>normalize$1(n(P,R,i))),I=_.map(parentof),T=new Set(_).add("");for(const P of I)T.has(P)||(T.add(P),_.push(P),I.push(parentof(P)),o.push(imputed));l=(P,R)=>_[R],f=(P,R)=>I[R]}for(g=0,d=o.length;g<d;++g)h=o[g],v=o[g]=new Node$1(h),($=l(h,g,i))!=null&&($+="")&&(S=v.id=$,w.set(S,w.has(S)?ambiguous:v)),($=f(h,g,i))!=null&&($+="")&&(v.parent=$);for(g=0;g<d;++g)if(v=o[g],$=v.parent){if(b=w.get($),!b)throw new Error("missing: "+$);if(b===ambiguous)throw new Error("ambiguous: "+$);b.children?b.children.push(v):b.children=[v],v.parent=b}else{if(p)throw new Error("multiple roots");p=v}if(!p)throw new Error("no root");if(n!=null){for(;p.data===imputed&&p.children.length===1;)p=p.children[0],--d;for(let _=o.length-1;_>=0&&(v=o[_],v.data===imputed);--_)v.data=null}if(p.parent=preroot,p.eachBefore(function(_){_.depth=_.parent.depth+1,--d}).eachBefore(computeHeight),p.parent=null,d>0)throw new Error("cycle");return p}return r.id=function(i){return arguments.length?(e=optional(i),r):e},r.parentId=function(i){return arguments.length?(t=optional(i),r):t},r.path=function(i){return arguments.length?(n=optional(i),r):n},r}function normalize$1(e){e=`${e}`;let t=e.length;return slash(e,t-1)&&!slash(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function parentof(e){let t=e.length;if(t<2)return"";for(;--t>1&&!slash(e,t););return e.slice(0,t)}function slash(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function defaultSeparation(e,t){return e.parent===t.parent?1:2}function nextLeft(e){var t=e.children;return t?t[0]:e.t}function nextRight(e){var t=e.children;return t?t[t.length-1]:e.t}function moveSubtree(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function executeShifts(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function nextAncestor(e,t,n){return e.a.parent===t.parent?e.a:n}function TreeNode(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}TreeNode.prototype=Object.create(Node$1.prototype);function treeRoot(e){for(var t=new TreeNode(e,0),n,r=[t],i,o,l,f;n=r.pop();)if(o=n._.children)for(n.children=new Array(f=o.length),l=f-1;l>=0;--l)r.push(i=n.children[l]=new TreeNode(o[l],l)),i.parent=n;return(t.parent=new TreeNode(null,0)).children=[t],t}function tree(){var e=defaultSeparation,t=1,n=1,r=null;function i(h){var g=treeRoot(h);if(g.eachAfter(o),g.parent.m=-g.z,g.eachBefore(l),r)h.eachBefore(d);else{var p=h,b=h,v=h;h.eachBefore(function(I){I.x<p.x&&(p=I),I.x>b.x&&(b=I),I.depth>v.depth&&(v=I)});var $=p===b?1:e(p,b)/2,S=$-p.x,w=t/(b.x+$+S),_=n/(v.depth||1);h.eachBefore(function(I){I.x=(I.x+S)*w,I.y=I.depth*_})}return h}function o(h){var g=h.children,p=h.parent.children,b=h.i?p[h.i-1]:null;if(g){executeShifts(h);var v=(g[0].z+g[g.length-1].z)/2;b?(h.z=b.z+e(h._,b._),h.m=h.z-v):h.z=v}else b&&(h.z=b.z+e(h._,b._));h.parent.A=f(h,b,h.parent.A||p[0])}function l(h){h._.x=h.z+h.parent.m,h.m+=h.parent.m}function f(h,g,p){if(g){for(var b=h,v=h,$=g,S=b.parent.children[0],w=b.m,_=v.m,I=$.m,T=S.m,P;$=nextRight($),b=nextLeft(b),$&&b;)S=nextLeft(S),v=nextRight(v),v.a=h,P=$.z+I-b.z-w+e($._,b._),P>0&&(moveSubtree(nextAncestor($,h,p),h,P),w+=P,_+=P),I+=$.m,w+=b.m,T+=S.m,_+=v.m;$&&!nextRight(v)&&(v.t=$,v.m+=I-_),b&&!nextLeft(S)&&(S.t=b,S.m+=w-T,p=h)}return p}function d(h){h.x*=t,h.y=h.depth*n}return i.separation=function(h){return arguments.length?(e=h,i):e},i.size=function(h){return arguments.length?(r=!1,t=+h[0],n=+h[1],i):r?null:[t,n]},i.nodeSize=function(h){return arguments.length?(r=!0,t=+h[0],n=+h[1],i):r?[t,n]:null},i}function treemapSlice(e,t,n,r,i){for(var o=e.children,l,f=-1,d=o.length,h=e.value&&(i-n)/e.value;++f<d;)l=o[f],l.x0=t,l.x1=r,l.y0=n,l.y1=n+=l.value*h}var phi=(1+Math.sqrt(5))/2;function squarifyRatio(e,t,n,r,i,o){for(var l=[],f=t.children,d,h,g=0,p=0,b=f.length,v,$,S=t.value,w,_,I,T,P,R,N;g<b;){v=i-n,$=o-r;do w=f[p++].value;while(!w&&p<b);for(_=I=w,R=Math.max($/v,v/$)/(S*e),N=w*w*R,P=Math.max(I/N,N/_);p<b;++p){if(w+=h=f[p].value,h<_&&(_=h),h>I&&(I=h),N=w*w*R,T=Math.max(I/N,N/_),T>P){w-=h;break}P=T}l.push(d={value:w,dice:v<$,children:f.slice(g,p)}),d.dice?treemapDice(d,n,r,i,S?r+=$*w/S:o):treemapSlice(d,n,r,S?n+=v*w/S:i,o),S-=w,g=p}return l}var squarify=function e(t){function n(r,i,o,l,f){squarifyRatio(t,r,i,o,l,f)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(phi);function index(){var e=squarify,t=!1,n=1,r=1,i=[0],o=constantZero,l=constantZero,f=constantZero,d=constantZero,h=constantZero;function g(b){return b.x0=b.y0=0,b.x1=n,b.y1=r,b.eachBefore(p),i=[0],t&&b.eachBefore(roundNode),b}function p(b){var v=i[b.depth],$=b.x0+v,S=b.y0+v,w=b.x1-v,_=b.y1-v;w<$&&($=w=($+w)/2),_<S&&(S=_=(S+_)/2),b.x0=$,b.y0=S,b.x1=w,b.y1=_,b.children&&(v=i[b.depth+1]=o(b)/2,$+=h(b)-v,S+=l(b)-v,w-=f(b)-v,_-=d(b)-v,w<$&&($=w=($+w)/2),_<S&&(S=_=(S+_)/2),e(b,$,S,w,_))}return g.round=function(b){return arguments.length?(t=!!b,g):t},g.size=function(b){return arguments.length?(n=+b[0],r=+b[1],g):[n,r]},g.tile=function(b){return arguments.length?(e=required(b),g):e},g.padding=function(b){return arguments.length?g.paddingInner(b).paddingOuter(b):g.paddingInner()},g.paddingInner=function(b){return arguments.length?(o=typeof b=="function"?b:constant$2(+b),g):o},g.paddingOuter=function(b){return arguments.length?g.paddingTop(b).paddingRight(b).paddingBottom(b).paddingLeft(b):g.paddingTop()},g.paddingTop=function(b){return arguments.length?(l=typeof b=="function"?b:constant$2(+b),g):l},g.paddingRight=function(b){return arguments.length?(f=typeof b=="function"?b:constant$2(+b),g):f},g.paddingBottom=function(b){return arguments.length?(d=typeof b=="function"?b:constant$2(+b),g):d},g.paddingLeft=function(b){return arguments.length?(h=typeof b=="function"?b:constant$2(+b),g):h},g}function binary(e,t,n,r,i){var o=e.children,l,f=o.length,d,h=new Array(f+1);for(h[0]=d=l=0;l<f;++l)h[l+1]=d+=o[l].value;g(0,f,e.value,t,n,r,i);function g(p,b,v,$,S,w,_){if(p>=b-1){var I=o[p];I.x0=$,I.y0=S,I.x1=w,I.y1=_;return}for(var T=h[p],P=v/2+T,R=p+1,N=b-1;R<N;){var U=R+N>>>1;h[U]<P?R=U+1:N=U}P-h[R-1]<h[R]-P&&p+1<R&&--R;var G=h[R]-T,V=v-G;if(w-$>_-S){var q=v?($*V+w*G)/v:w;g(p,R,G,$,S,q,_),g(R,b,V,q,S,w,_)}else{var O=v?(S*V+_*G)/v:_;g(p,R,G,$,S,w,O),g(R,b,V,$,O,w,_)}}}function sliceDice(e,t,n,r,i){(e.depth&1?treemapSlice:treemapDice)(e,t,n,r,i)}var resquarify=function e(t){function n(r,i,o,l,f){if((d=r._squarify)&&d.ratio===t)for(var d,h,g,p,b=-1,v,$=d.length,S=r.value;++b<$;){for(h=d[b],g=h.children,p=h.value=0,v=g.length;p<v;++p)h.value+=g[p].value;h.dice?treemapDice(h,i,o,l,S?o+=(f-o)*h.value/S:f):treemapSlice(h,i,o,S?i+=(l-i)*h.value/S:l,f),S-=h.value}else r._squarify=d=squarifyRatio(t,r,i,o,l,f),d.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(phi);function area$1(e){for(var t=-1,n=e.length,r,i=e[n-1],o=0;++t<n;)r=i,i=e[t],o+=r[1]*i[0]-r[0]*i[1];return o/2}function centroid(e){for(var t=-1,n=e.length,r=0,i=0,o,l=e[n-1],f,d=0;++t<n;)o=l,l=e[t],d+=f=o[0]*l[1]-l[0]*o[1],r+=(o[0]+l[0])*f,i+=(o[1]+l[1])*f;return d*=3,[r/d,i/d]}function cross$1(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function lexicographicOrder(e,t){return e[0]-t[0]||e[1]-t[1]}function computeUpperHullIndexes(e){const t=e.length,n=[0,1];let r=2,i;for(i=2;i<t;++i){for(;r>1&&cross$1(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function hull(e){if((n=e.length)<3)return null;var t,n,r=new Array(n),i=new Array(n);for(t=0;t<n;++t)r[t]=[+e[t][0],+e[t][1],t];for(r.sort(lexicographicOrder),t=0;t<n;++t)i[t]=[r[t][0],-r[t][1]];var o=computeUpperHullIndexes(r),l=computeUpperHullIndexes(i),f=l[0]===o[0],d=l[l.length-1]===o[o.length-1],h=[];for(t=o.length-1;t>=0;--t)h.push(e[r[o[t]][2]]);for(t=+f;t<l.length-d;++t)h.push(e[r[l[t]][2]]);return h}function contains(e,t){for(var n=e.length,r=e[n-1],i=t[0],o=t[1],l=r[0],f=r[1],d,h,g=!1,p=0;p<n;++p)r=e[p],d=r[0],h=r[1],h>o!=f>o&&i<(l-d)*(o-h)/(f-h)+d&&(g=!g),l=d,f=h;return g}function length(e){for(var t=-1,n=e.length,r=e[n-1],i,o,l=r[0],f=r[1],d=0;++t<n;)i=l,o=f,r=e[t],l=r[0],f=r[1],i-=l,o-=f,d+=Math.hypot(i,o);return d}var defaultSource=Math.random,uniform=function e(t){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,arguments.length===1?(i=r,r=0):i-=r,function(){return t()*i+r}}return n.source=e,n}(defaultSource),int=function e(t){function n(r,i){return arguments.length<2&&(i=r,r=0),r=Math.floor(r),i=Math.floor(i)-r,function(){return Math.floor(t()*i+r)}}return n.source=e,n}(defaultSource),normal=function e(t){function n(r,i){var o,l;return r=r==null?0:+r,i=i==null?1:+i,function(){var f;if(o!=null)f=o,o=null;else do o=t()*2-1,f=t()*2-1,l=o*o+f*f;while(!l||l>1);return r+i*f*Math.sqrt(-2*Math.log(l)/l)}}return n.source=e,n}(defaultSource),logNormal=function e(t){var n=normal.source(t);function r(){var i=n.apply(this,arguments);return function(){return Math.exp(i())}}return r.source=e,r}(defaultSource),irwinHall=function e(t){function n(r){return(r=+r)<=0?()=>0:function(){for(var i=0,o=r;o>1;--o)i+=t();return i+o*t()}}return n.source=e,n}(defaultSource),bates=function e(t){var n=irwinHall.source(t);function r(i){if((i=+i)==0)return t;var o=n(i);return function(){return o()/i}}return r.source=e,r}(defaultSource),exponential=function e(t){function n(r){return function(){return-Math.log1p(-t())/r}}return n.source=e,n}(defaultSource),pareto=function e(t){function n(r){if((r=+r)<0)throw new RangeError("invalid alpha");return r=1/-r,function(){return Math.pow(1-t(),r)}}return n.source=e,n}(defaultSource),bernoulli=function e(t){function n(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return function(){return Math.floor(t()+r)}}return n.source=e,n}(defaultSource),geometric=function e(t){function n(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return r===0?()=>1/0:r===1?()=>1:(r=Math.log1p(-r),function(){return 1+Math.floor(Math.log1p(-t())/r)})}return n.source=e,n}(defaultSource),gamma=function e(t){var n=normal.source(t)();function r(i,o){if((i=+i)<0)throw new RangeError("invalid k");if(i===0)return()=>0;if(o=o==null?1:+o,i===1)return()=>-Math.log1p(-t())*o;var l=(i<1?i+1:i)-1/3,f=1/(3*Math.sqrt(l)),d=i<1?()=>Math.pow(t(),1/i):()=>1;return function(){do{do var h=n(),g=1+f*h;while(g<=0);g*=g*g;var p=1-t()}while(p>=1-.0331*h*h*h*h&&Math.log(p)>=.5*h*h+l*(1-g+Math.log(g)));return l*g*d()*o}}return r.source=e,r}(defaultSource),beta=function e(t){var n=gamma.source(t);function r(i,o){var l=n(i),f=n(o);return function(){var d=l();return d===0?0:d/(d+f())}}return r.source=e,r}(defaultSource),binomial=function e(t){var n=geometric.source(t),r=beta.source(t);function i(o,l){return o=+o,(l=+l)>=1?()=>o:l<=0?()=>0:function(){for(var f=0,d=o,h=l;d*h>16&&d*(1-h)>16;){var g=Math.floor((d+1)*h),p=r(g,d-g+1)();p<=h?(f+=g,d-=g,h=(h-p)/(1-p)):(d=g-1,h/=p)}for(var b=h<.5,v=b?h:1-h,$=n(v),S=$(),w=0;S<=d;++w)S+=$();return f+(b?w:d-w)}}return i.source=e,i}(defaultSource),weibull=function e(t){function n(r,i,o){var l;return(r=+r)==0?l=f=>-Math.log(f):(r=1/r,l=f=>Math.pow(f,r)),i=i==null?0:+i,o=o==null?1:+o,function(){return i+o*l(-Math.log1p(-t()))}}return n.source=e,n}(defaultSource),cauchy=function e(t){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){return r+i*Math.tan(Math.PI*t())}}return n.source=e,n}(defaultSource),logistic=function e(t){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){var o=t();return r+i*Math.log(o/(1-o))}}return n.source=e,n}(defaultSource),poisson=function e(t){var n=gamma.source(t),r=binomial.source(t);function i(o){return function(){for(var l=0,f=o;f>16;){var d=Math.floor(.875*f),h=n(d)();if(h>f)return l+r(d-1,f/h)();l+=d,f-=h}for(var g=-Math.log1p(-t()),p=0;g<=f;++p)g-=Math.log1p(-t());return l+p}}return i.source=e,i}(defaultSource);const mul=1664525,inc=1013904223,eps=1/4294967296;function lcg(e=Math.random()){let t=(0<=e&&e<1?e/eps:Math.abs(e))|0;return()=>(t=mul*t+inc|0,eps*(t>>>0))}function initRange(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function initInterpolator(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const implicit=Symbol("implicit");function ordinal(){var e=new InternMap,t=[],n=[],r=implicit;function i(o){let l=e.get(o);if(l===void 0){if(r!==implicit)return r;e.set(o,l=t.push(o)-1)}return n[l%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new InternMap;for(const l of o)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return ordinal(t,n).unknown(r)},initRange.apply(i,arguments),i}function band(){var e=ordinal().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,l,f=!1,d=0,h=0,g=.5;delete e.unknown;function p(){var b=t().length,v=i<r,$=v?i:r,S=v?r:i;o=(S-$)/Math.max(1,b-d+h*2),f&&(o=Math.floor(o)),$+=(S-$-o*(b-d))*g,l=o*(1-d),f&&($=Math.round($),l=Math.round(l));var w=range$2(b).map(function(_){return $+o*_});return n(v?w.reverse():w)}return e.domain=function(b){return arguments.length?(t(b),p()):t()},e.range=function(b){return arguments.length?([r,i]=b,r=+r,i=+i,p()):[r,i]},e.rangeRound=function(b){return[r,i]=b,r=+r,i=+i,f=!0,p()},e.bandwidth=function(){return l},e.step=function(){return o},e.round=function(b){return arguments.length?(f=!!b,p()):f},e.padding=function(b){return arguments.length?(d=Math.min(1,h=+b),p()):d},e.paddingInner=function(b){return arguments.length?(d=Math.min(1,b),p()):d},e.paddingOuter=function(b){return arguments.length?(h=+b,p()):h},e.align=function(b){return arguments.length?(g=Math.max(0,Math.min(1,b)),p()):g},e.copy=function(){return band(t(),[r,i]).round(f).paddingInner(d).paddingOuter(h).align(g)},initRange.apply(p(),arguments)}function pointish(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return pointish(t())},e}function point$4(){return pointish(band.apply(null,arguments).paddingInner(1))}function constants(e){return function(){return e}}function number$1(e){return+e}var unit=[0,1];function identity$2(e){return e}function normalize(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:constants(isNaN(t)?NaN:.5)}function clamper(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function bimap(e,t,n){var r=e[0],i=e[1],o=t[0],l=t[1];return i<r?(r=normalize(i,r),o=n(l,o)):(r=normalize(r,i),o=n(o,l)),function(f){return o(r(f))}}function polymap(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=normalize(e[l],e[l+1]),o[l]=n(t[l],t[l+1]);return function(f){var d=bisect(e,f,1,r)-1;return o[d](i[d](f))}}function copy$1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function transformer$2(){var e=unit,t=unit,n=interpolate$1,r,i,o,l=identity$2,f,d,h;function g(){var b=Math.min(e.length,t.length);return l!==identity$2&&(l=clamper(e[0],e[b-1])),f=b>2?polymap:bimap,d=h=null,p}function p(b){return b==null||isNaN(b=+b)?o:(d||(d=f(e.map(r),t,n)))(r(l(b)))}return p.invert=function(b){return l(i((h||(h=f(t,e.map(r),interpolateNumber)))(b)))},p.domain=function(b){return arguments.length?(e=Array.from(b,number$1),g()):e.slice()},p.range=function(b){return arguments.length?(t=Array.from(b),g()):t.slice()},p.rangeRound=function(b){return t=Array.from(b),n=interpolateRound,g()},p.clamp=function(b){return arguments.length?(l=b?!0:identity$2,g()):l!==identity$2},p.interpolate=function(b){return arguments.length?(n=b,g()):n},p.unknown=function(b){return arguments.length?(o=b,p):o},function(b,v){return r=b,i=v,g()}}function continuous(){return transformer$2()(identity$2,identity$2)}function tickFormat(e,t,n,r){var i=tickStep(e,t,n),o;switch(r=formatSpecifier(r==null?",f":r),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=precisionPrefix(i,l))&&(r.precision=o),formatPrefix(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=precisionRound(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=precisionFixed(i))&&(r.precision=o-(r.type==="%")*2);break}}return format(r)}function linearish(e){var t=e.domain;return e.ticks=function(n){var r=t();return ticks(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return tickFormat(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,l=r[i],f=r[o],d,h,g=10;for(f<l&&(h=l,l=f,f=h,h=i,i=o,o=h);g-- >0;){if(h=tickIncrement(l,f,n),h===d)return r[i]=l,r[o]=f,t(r);if(h>0)l=Math.floor(l/h)*h,f=Math.ceil(f/h)*h;else if(h<0)l=Math.ceil(l*h)/h,f=Math.floor(f*h)/h;else break;d=h}return e},e}function linear(){var e=continuous();return e.copy=function(){return copy$1(e,linear())},initRange.apply(e,arguments),linearish(e)}function identity$1(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,number$1),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return identity$1(e).unknown(t)},e=arguments.length?Array.from(e,number$1):[0,1],linearish(n)}function nice(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],l;return o<i&&(l=n,n=r,r=l,l=i,i=o,o=l),e[n]=t.floor(i),e[r]=t.ceil(o),e}function transformLog(e){return Math.log(e)}function transformExp(e){return Math.exp(e)}function transformLogn(e){return-Math.log(-e)}function transformExpn(e){return-Math.exp(-e)}function pow10(e){return isFinite(e)?+("1e"+e):e<0?0:e}function powp(e){return e===10?pow10:e===Math.E?Math.exp:t=>Math.pow(e,t)}function logp(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function reflect(e){return(t,n)=>-e(-t,n)}function loggish(e){const t=e(transformLog,transformExp),n=t.domain;let r=10,i,o;function l(){return i=logp(r),o=powp(r),n()[0]<0?(i=reflect(i),o=reflect(o),e(transformLogn,transformExpn)):e(transformLog,transformExp),t}return t.base=function(f){return arguments.length?(r=+f,l()):r},t.domain=function(f){return arguments.length?(n(f),l()):n()},t.ticks=f=>{const d=n();let h=d[0],g=d[d.length-1];const p=g<h;p&&([h,g]=[g,h]);let b=i(h),v=i(g),$,S;const w=f==null?10:+f;let _=[];if(!(r%1)&&v-b<w){if(b=Math.floor(b),v=Math.ceil(v),h>0){for(;b<=v;++b)for($=1;$<r;++$)if(S=b<0?$/o(-b):$*o(b),!(S<h)){if(S>g)break;_.push(S)}}else for(;b<=v;++b)for($=r-1;$>=1;--$)if(S=b>0?$/o(-b):$*o(b),!(S<h)){if(S>g)break;_.push(S)}_.length*2<w&&(_=ticks(h,g,w))}else _=ticks(b,v,Math.min(v-b,w)).map(o);return p?_.reverse():_},t.tickFormat=(f,d)=>{if(f==null&&(f=10),d==null&&(d=r===10?"s":","),typeof d!="function"&&(!(r%1)&&(d=formatSpecifier(d)).precision==null&&(d.trim=!0),d=format(d)),f===1/0)return d;const h=Math.max(1,r*f/t.ticks().length);return g=>{let p=g/o(Math.round(i(g)));return p*r<r-.5&&(p*=r),p<=h?d(g):""}},t.nice=()=>n(nice(n(),{floor:f=>o(Math.floor(i(f))),ceil:f=>o(Math.ceil(i(f)))})),t}function log(){const e=loggish(transformer$2()).domain([1,10]);return e.copy=()=>copy$1(e,log()).base(e.base()),initRange.apply(e,arguments),e}function transformSymlog(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function transformSymexp(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function symlogish(e){var t=1,n=e(transformSymlog(t),transformSymexp(t));return n.constant=function(r){return arguments.length?e(transformSymlog(t=+r),transformSymexp(t)):t},linearish(n)}function symlog(){var e=symlogish(transformer$2());return e.copy=function(){return copy$1(e,symlog()).constant(e.constant())},initRange.apply(e,arguments)}function transformPow(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function transformSqrt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function transformSquare(e){return e<0?-e*e:e*e}function powish(e){var t=e(identity$2,identity$2),n=1;function r(){return n===1?e(identity$2,identity$2):n===.5?e(transformSqrt,transformSquare):e(transformPow(n),transformPow(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},linearish(t)}function pow(){var e=powish(transformer$2());return e.copy=function(){return copy$1(e,pow()).exponent(e.exponent())},initRange.apply(e,arguments),e}function sqrt$1(){return pow.apply(null,arguments).exponent(.5)}function square$1(e){return Math.sign(e)*e*e}function unsquare(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function radial(){var e=continuous(),t=[0,1],n=!1,r;function i(o){var l=unsquare(e(o));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(o){return e.invert(square$1(o))},i.domain=function(o){return arguments.length?(e.domain(o),i):e.domain()},i.range=function(o){return arguments.length?(e.range((t=Array.from(o,number$1)).map(square$1)),i):t.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(e.clamp(o),i):e.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return radial(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},initRange.apply(i,arguments),linearish(i)}function quantile(){var e=[],t=[],n=[],r;function i(){var l=0,f=Math.max(1,t.length);for(n=new Array(f-1);++l<f;)n[l-1]=quantileSorted(e,l/f);return o}function o(l){return l==null||isNaN(l=+l)?r:t[bisect(n,l)]}return o.invertExtent=function(l){var f=t.indexOf(l);return f<0?[NaN,NaN]:[f>0?n[f-1]:e[0],f<n.length?n[f]:e[e.length-1]]},o.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let f of l)f!=null&&!isNaN(f=+f)&&e.push(f);return e.sort(ascending$2),i()},o.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},o.unknown=function(l){return arguments.length?(r=l,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return quantile().domain(e).range(t).unknown(r)},initRange.apply(o,arguments)}function quantize(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function l(d){return d!=null&&d<=d?i[bisect(r,d,0,n)]:o}function f(){var d=-1;for(r=new Array(n);++d<n;)r[d]=((d+1)*t-(d-n)*e)/(n+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,f()):[e,t]},l.range=function(d){return arguments.length?(n=(i=Array.from(d)).length-1,f()):i.slice()},l.invertExtent=function(d){var h=i.indexOf(d);return h<0?[NaN,NaN]:h<1?[e,r[0]]:h>=n?[r[n-1],t]:[r[h-1],r[h]]},l.unknown=function(d){return arguments.length&&(o=d),l},l.thresholds=function(){return r.slice()},l.copy=function(){return quantize().domain([e,t]).range(i).unknown(o)},initRange.apply(linearish(l),arguments)}function threshold(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[bisect(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var l=t.indexOf(o);return[e[l-1],e[l]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return threshold().domain(e).range(t).unknown(n)},initRange.apply(i,arguments)}const t0=new Date,t1=new Date;function timeInterval(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const l=i(o),f=i.ceil(o);return o-l<f-o?l:f},i.offset=(o,l)=>(t(o=new Date(+o),l==null?1:Math.floor(l)),o),i.range=(o,l,f)=>{const d=[];if(o=i.ceil(o),f=f==null?1:Math.floor(f),!(o<l)||!(f>0))return d;let h;do d.push(h=new Date(+o)),t(o,f),e(o);while(h<o&&o<l);return d},i.filter=o=>timeInterval(l=>{if(l>=l)for(;e(l),!o(l);)l.setTime(l-1)},(l,f)=>{if(l>=l)if(f<0)for(;++f<=0;)for(;t(l,-1),!o(l););else for(;--f>=0;)for(;t(l,1),!o(l););}),n&&(i.count=(o,l)=>(t0.setTime(+o),t1.setTime(+l),e(t0),e(t1),Math.floor(n(t0,t1))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?l=>r(l)%o===0:l=>i.count(0,l)%o===0):i)),i}const millisecond=timeInterval(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);millisecond.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?timeInterval(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):millisecond);const milliseconds=millisecond.range,durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,second=timeInterval(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*durationSecond)},(e,t)=>(t-e)/durationSecond,e=>e.getUTCSeconds()),seconds=second.range,timeMinute=timeInterval(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond)},(e,t)=>{e.setTime(+e+t*durationMinute)},(e,t)=>(t-e)/durationMinute,e=>e.getMinutes()),timeMinutes=timeMinute.range,utcMinute=timeInterval(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*durationMinute)},(e,t)=>(t-e)/durationMinute,e=>e.getUTCMinutes()),utcMinutes=utcMinute.range,timeHour=timeInterval(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond-e.getMinutes()*durationMinute)},(e,t)=>{e.setTime(+e+t*durationHour)},(e,t)=>(t-e)/durationHour,e=>e.getHours()),timeHours=timeHour.range,utcHour=timeInterval(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*durationHour)},(e,t)=>(t-e)/durationHour,e=>e.getUTCHours()),utcHours=utcHour.range,timeDay=timeInterval(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute)/durationDay,e=>e.getDate()-1),timeDays=timeDay.range,utcDay=timeInterval(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/durationDay,e=>e.getUTCDate()-1),utcDays=utcDay.range,unixDay=timeInterval(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/durationDay,e=>Math.floor(e/durationDay)),unixDays=unixDay.range;function timeWeekday(e){return timeInterval(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6),timeSundays=timeSunday.range,timeMondays=timeMonday.range,timeTuesdays=timeTuesday.range,timeWednesdays=timeWednesday.range,timeThursdays=timeThursday.range,timeFridays=timeFriday.range,timeSaturdays=timeSaturday.range;function utcWeekday(e){return timeInterval(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6),utcSundays=utcSunday.range,utcMondays=utcMonday.range,utcTuesdays=utcTuesday.range,utcWednesdays=utcWednesday.range,utcThursdays=utcThursday.range,utcFridays=utcFriday.range,utcSaturdays=utcSaturday.range,timeMonth=timeInterval(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),timeMonths=timeMonth.range,utcMonth=timeInterval(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),utcMonths=utcMonth.range,timeYear=timeInterval(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());timeYear.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:timeInterval(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});const timeYears=timeYear.range,utcYear=timeInterval(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());utcYear.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:timeInterval(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});const utcYears=utcYear.range;function ticker(e,t,n,r,i,o){const l=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[o,1,durationMinute],[o,5,5*durationMinute],[o,15,15*durationMinute],[o,30,30*durationMinute],[i,1,durationHour],[i,3,3*durationHour],[i,6,6*durationHour],[i,12,12*durationHour],[r,1,durationDay],[r,2,2*durationDay],[n,1,durationWeek],[t,1,durationMonth],[t,3,3*durationMonth],[e,1,durationYear]];function f(h,g,p){const b=g<h;b&&([h,g]=[g,h]);const v=p&&typeof p.range=="function"?p:d(h,g,p),$=v?v.range(h,+g+1):[];return b?$.reverse():$}function d(h,g,p){const b=Math.abs(g-h)/p,v=bisector(([,,w])=>w).right(l,b);if(v===l.length)return e.every(tickStep(h/durationYear,g/durationYear,p));if(v===0)return millisecond.every(Math.max(tickStep(h,g,p),1));const[$,S]=l[b/l[v-1][2]<l[v][2]/b?v-1:v];return $.every(S)}return[f,d]}const[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function utcDate(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function newDate(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function formatLocale(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,l=e.shortDays,f=e.months,d=e.shortMonths,h=formatRe(i),g=formatLookup(i),p=formatRe(o),b=formatLookup(o),v=formatRe(l),$=formatLookup(l),S=formatRe(f),w=formatLookup(f),_=formatRe(d),I=formatLookup(d),T={a:j,A:Z,b:J,B:ee,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:ne,q:ie,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},P={a:fe,A:ce,b:ue,B:me,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:le,q:pe,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},R={a:q,A:O,b:W,B:H,c:L,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:V,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:z,X:F,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};T.x=N(n,T),T.X=N(r,T),T.c=N(t,T),P.x=N(n,P),P.X=N(r,P),P.c=N(t,P);function N(te,oe){return function(se){var Q=[],de=-1,he=0,ye=te.length,be,ae,ge;for(se instanceof Date||(se=new Date(+se));++de<ye;)te.charCodeAt(de)===37&&(Q.push(te.slice(he,de)),(ae=pads[be=te.charAt(++de)])!=null?be=te.charAt(++de):ae=be==="e"?" ":"0",(ge=oe[be])&&(be=ge(se,ae)),Q.push(be),he=de+1);return Q.push(te.slice(he,de)),Q.join("")}}function U(te,oe){return function(se){var Q=newDate(1900,void 0,1),de=G(Q,te,se+="",0),he,ye;if(de!=se.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(oe&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(he=utcDate(newDate(Q.y,0,1)),ye=he.getUTCDay(),he=ye>4||ye===0?utcMonday.ceil(he):utcMonday(he),he=utcDay.offset(he,(Q.V-1)*7),Q.y=he.getUTCFullYear(),Q.m=he.getUTCMonth(),Q.d=he.getUTCDate()+(Q.w+6)%7):(he=localDate(newDate(Q.y,0,1)),ye=he.getDay(),he=ye>4||ye===0?timeMonday.ceil(he):timeMonday(he),he=timeDay.offset(he,(Q.V-1)*7),Q.y=he.getFullYear(),Q.m=he.getMonth(),Q.d=he.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),ye="Z"in Q?utcDate(newDate(Q.y,0,1)).getUTCDay():localDate(newDate(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(ye+5)%7:Q.w+Q.U*7-(ye+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,utcDate(Q)):localDate(Q)}}function G(te,oe,se,Q){for(var de=0,he=oe.length,ye=se.length,be,ae;de<he;){if(Q>=ye)return-1;if(be=oe.charCodeAt(de++),be===37){if(be=oe.charAt(de++),ae=R[be in pads?oe.charAt(de++):be],!ae||(Q=ae(te,se,Q))<0)return-1}else if(be!=se.charCodeAt(Q++))return-1}return Q}function V(te,oe,se){var Q=h.exec(oe.slice(se));return Q?(te.p=g.get(Q[0].toLowerCase()),se+Q[0].length):-1}function q(te,oe,se){var Q=v.exec(oe.slice(se));return Q?(te.w=$.get(Q[0].toLowerCase()),se+Q[0].length):-1}function O(te,oe,se){var Q=p.exec(oe.slice(se));return Q?(te.w=b.get(Q[0].toLowerCase()),se+Q[0].length):-1}function W(te,oe,se){var Q=_.exec(oe.slice(se));return Q?(te.m=I.get(Q[0].toLowerCase()),se+Q[0].length):-1}function H(te,oe,se){var Q=S.exec(oe.slice(se));return Q?(te.m=w.get(Q[0].toLowerCase()),se+Q[0].length):-1}function L(te,oe,se){return G(te,t,oe,se)}function z(te,oe,se){return G(te,n,oe,se)}function F(te,oe,se){return G(te,r,oe,se)}function j(te){return l[te.getDay()]}function Z(te){return o[te.getDay()]}function J(te){return d[te.getMonth()]}function ee(te){return f[te.getMonth()]}function ne(te){return i[+(te.getHours()>=12)]}function ie(te){return 1+~~(te.getMonth()/3)}function fe(te){return l[te.getUTCDay()]}function ce(te){return o[te.getUTCDay()]}function ue(te){return d[te.getUTCMonth()]}function me(te){return f[te.getUTCMonth()]}function le(te){return i[+(te.getUTCHours()>=12)]}function pe(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var oe=N(te+="",T);return oe.toString=function(){return te},oe},parse:function(te){var oe=U(te+="",!1);return oe.toString=function(){return te},oe},utcFormat:function(te){var oe=N(te+="",P);return oe.toString=function(){return te},oe},utcParse:function(te){var oe=U(te+="",!0);return oe.toString=function(){return te},oe}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function requote(e){return e.replace(requoteRe,"\\$&")}function formatRe(e){return new RegExp("^(?:"+e.map(requote).join("|")+")","i")}function formatLookup(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function parseWeekdayNumberSunday(e,t,n){var r=numberRe.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function parseWeekdayNumberMonday(e,t,n){var r=numberRe.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function parseWeekNumberSunday(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function parseWeekNumberISO(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function parseWeekNumberMonday(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function parseFullYear(e,t,n){var r=numberRe.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function parseYear(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function parseZone(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function parseQuarter(e,t,n){var r=numberRe.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function parseMonthNumber(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function parseDayOfMonth(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function parseDayOfYear(e,t,n){var r=numberRe.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function parseHour24(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function parseMinutes(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function parseSeconds(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function parseMilliseconds(e,t,n){var r=numberRe.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function parseMicroseconds(e,t,n){var r=numberRe.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function parseLiteralPercent(e,t,n){var r=percentRe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function parseUnixTimestamp(e,t,n){var r=numberRe.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function parseUnixTimestampSeconds(e,t,n){var r=numberRe.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function formatDayOfMonth(e,t){return pad(e.getDate(),t,2)}function formatHour24(e,t){return pad(e.getHours(),t,2)}function formatHour12(e,t){return pad(e.getHours()%12||12,t,2)}function formatDayOfYear(e,t){return pad(1+timeDay.count(timeYear(e),e),t,3)}function formatMilliseconds(e,t){return pad(e.getMilliseconds(),t,3)}function formatMicroseconds(e,t){return formatMilliseconds(e,t)+"000"}function formatMonthNumber(e,t){return pad(e.getMonth()+1,t,2)}function formatMinutes(e,t){return pad(e.getMinutes(),t,2)}function formatSeconds(e,t){return pad(e.getSeconds(),t,2)}function formatWeekdayNumberMonday(e){var t=e.getDay();return t===0?7:t}function formatWeekNumberSunday(e,t){return pad(timeSunday.count(timeYear(e)-1,e),t,2)}function dISO(e){var t=e.getDay();return t>=4||t===0?timeThursday(e):timeThursday.ceil(e)}function formatWeekNumberISO(e,t){return e=dISO(e),pad(timeThursday.count(timeYear(e),e)+(timeYear(e).getDay()===4),t,2)}function formatWeekdayNumberSunday(e){return e.getDay()}function formatWeekNumberMonday(e,t){return pad(timeMonday.count(timeYear(e)-1,e),t,2)}function formatYear(e,t){return pad(e.getFullYear()%100,t,2)}function formatYearISO(e,t){return e=dISO(e),pad(e.getFullYear()%100,t,2)}function formatFullYear(e,t){return pad(e.getFullYear()%1e4,t,4)}function formatFullYearISO(e,t){var n=e.getDay();return e=n>=4||n===0?timeThursday(e):timeThursday.ceil(e),pad(e.getFullYear()%1e4,t,4)}function formatZone(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pad(t/60|0,"0",2)+pad(t%60,"0",2)}function formatUTCDayOfMonth(e,t){return pad(e.getUTCDate(),t,2)}function formatUTCHour24(e,t){return pad(e.getUTCHours(),t,2)}function formatUTCHour12(e,t){return pad(e.getUTCHours()%12||12,t,2)}function formatUTCDayOfYear(e,t){return pad(1+utcDay.count(utcYear(e),e),t,3)}function formatUTCMilliseconds(e,t){return pad(e.getUTCMilliseconds(),t,3)}function formatUTCMicroseconds(e,t){return formatUTCMilliseconds(e,t)+"000"}function formatUTCMonthNumber(e,t){return pad(e.getUTCMonth()+1,t,2)}function formatUTCMinutes(e,t){return pad(e.getUTCMinutes(),t,2)}function formatUTCSeconds(e,t){return pad(e.getUTCSeconds(),t,2)}function formatUTCWeekdayNumberMonday(e){var t=e.getUTCDay();return t===0?7:t}function formatUTCWeekNumberSunday(e,t){return pad(utcSunday.count(utcYear(e)-1,e),t,2)}function UTCdISO(e){var t=e.getUTCDay();return t>=4||t===0?utcThursday(e):utcThursday.ceil(e)}function formatUTCWeekNumberISO(e,t){return e=UTCdISO(e),pad(utcThursday.count(utcYear(e),e)+(utcYear(e).getUTCDay()===4),t,2)}function formatUTCWeekdayNumberSunday(e){return e.getUTCDay()}function formatUTCWeekNumberMonday(e,t){return pad(utcMonday.count(utcYear(e)-1,e),t,2)}function formatUTCYear(e,t){return pad(e.getUTCFullYear()%100,t,2)}function formatUTCYearISO(e,t){return e=UTCdISO(e),pad(e.getUTCFullYear()%100,t,2)}function formatUTCFullYear(e,t){return pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCFullYearISO(e,t){var n=e.getUTCDay();return e=n>=4||n===0?utcThursday(e):utcThursday.ceil(e),pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(e){return+e}function formatUnixTimestampSeconds(e){return Math.floor(+e/1e3)}var locale,timeFormat,timeParse,utcFormat,utcParse;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(e){return locale=formatLocale(e),timeFormat=locale.format,timeParse=locale.parse,utcFormat=locale.utcFormat,utcParse=locale.utcParse,locale}var isoSpecifier="%Y-%m-%dT%H:%M:%S.%LZ";function formatIsoNative(e){return e.toISOString()}var formatIso=Date.prototype.toISOString?formatIsoNative:utcFormat(isoSpecifier),formatIso$1=formatIso;function parseIsoNative(e){var t=new Date(e);return isNaN(t)?null:t}var parseIso=+new Date("2000-01-01T00:00:00.000Z")?parseIsoNative:utcParse(isoSpecifier),parseIso$1=parseIso;function date$1(e){return new Date(e)}function number(e){return e instanceof Date?+e:+new Date(+e)}function calendar(e,t,n,r,i,o,l,f,d,h){var g=continuous(),p=g.invert,b=g.domain,v=h(".%L"),$=h(":%S"),S=h("%I:%M"),w=h("%I %p"),_=h("%a %d"),I=h("%b %d"),T=h("%B"),P=h("%Y");function R(N){return(d(N)<N?v:f(N)<N?$:l(N)<N?S:o(N)<N?w:r(N)<N?i(N)<N?_:I:n(N)<N?T:P)(N)}return g.invert=function(N){return new Date(p(N))},g.domain=function(N){return arguments.length?b(Array.from(N,number)):b().map(date$1)},g.ticks=function(N){var U=b();return e(U[0],U[U.length-1],N==null?10:N)},g.tickFormat=function(N,U){return U==null?R:h(U)},g.nice=function(N){var U=b();return(!N||typeof N.range!="function")&&(N=t(U[0],U[U.length-1],N==null?10:N)),N?b(nice(U,N)):g},g.copy=function(){return copy$1(g,calendar(e,t,n,r,i,o,l,f,d,h))},g}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function transformer$1(){var e=0,t=1,n,r,i,o,l=identity$2,f=!1,d;function h(p){return p==null||isNaN(p=+p)?d:l(i===0?.5:(p=(o(p)-n)*i,f?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t]=p,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),h):[e,t]},h.clamp=function(p){return arguments.length?(f=!!p,h):f},h.interpolator=function(p){return arguments.length?(l=p,h):l};function g(p){return function(b){var v,$;return arguments.length?([v,$]=b,l=p(v,$),h):[l(0),l(1)]}}return h.range=g(interpolate$1),h.rangeRound=g(interpolateRound),h.unknown=function(p){return arguments.length?(d=p,h):d},function(p){return o=p,n=p(e),r=p(t),i=n===r?0:1/(r-n),h}}function copy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function sequential(){var e=linearish(transformer$1()(identity$2));return e.copy=function(){return copy(e,sequential())},initInterpolator.apply(e,arguments)}function sequentialLog(){var e=loggish(transformer$1()).domain([1,10]);return e.copy=function(){return copy(e,sequentialLog()).base(e.base())},initInterpolator.apply(e,arguments)}function sequentialSymlog(){var e=symlogish(transformer$1());return e.copy=function(){return copy(e,sequentialSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)}function sequentialPow(){var e=powish(transformer$1());return e.copy=function(){return copy(e,sequentialPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function sequentialQuantile(){var e=[],t=identity$2;function n(r){if(r!=null&&!isNaN(r=+r))return t((bisect(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(ascending$2),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>quantile$1(e,o/r))},n.copy=function(){return sequentialQuantile(t).domain(e)},initInterpolator.apply(n,arguments)}function transformer(){var e=0,t=.5,n=1,r=1,i,o,l,f,d,h=identity$2,g,p=!1,b;function v(S){return isNaN(S=+S)?b:(S=.5+((S=+g(S))-o)*(r*S<r*o?f:d),h(p?Math.max(0,Math.min(1,S)):S))}v.domain=function(S){return arguments.length?([e,t,n]=S,i=g(e=+e),o=g(t=+t),l=g(n=+n),f=i===o?0:.5/(o-i),d=o===l?0:.5/(l-o),r=o<i?-1:1,v):[e,t,n]},v.clamp=function(S){return arguments.length?(p=!!S,v):p},v.interpolator=function(S){return arguments.length?(h=S,v):h};function $(S){return function(w){var _,I,T;return arguments.length?([_,I,T]=w,h=piecewise(S,[_,I,T]),v):[h(0),h(.5),h(1)]}}return v.range=$(interpolate$1),v.rangeRound=$(interpolateRound),v.unknown=function(S){return arguments.length?(b=S,v):b},function(S){return g=S,i=S(e),o=S(t),l=S(n),f=i===o?0:.5/(o-i),d=o===l?0:.5/(l-o),r=o<i?-1:1,v}}function diverging$1(){var e=linearish(transformer()(identity$2));return e.copy=function(){return copy(e,diverging$1())},initInterpolator.apply(e,arguments)}function divergingLog(){var e=loggish(transformer()).domain([.1,1,10]);return e.copy=function(){return copy(e,divergingLog()).base(e.base())},initInterpolator.apply(e,arguments)}function divergingSymlog(){var e=symlogish(transformer());return e.copy=function(){return copy(e,divergingSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)}function divergingPow(){var e=powish(transformer());return e.copy=function(){return copy(e,divergingPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}function colors(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}var category10=colors("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Accent=colors("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Dark2=colors("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Paired=colors("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Pastel1=colors("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Pastel2=colors("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Set1=colors("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Set2=colors("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Set3=colors("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Tableau10=colors("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ramp$1=e=>rgbBasis(e[e.length-1]),scheme$q=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(colors),BrBG=ramp$1(scheme$q),scheme$p=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(colors),PRGn=ramp$1(scheme$p),scheme$o=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(colors),PiYG=ramp$1(scheme$o),scheme$n=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(colors),PuOr=ramp$1(scheme$n),scheme$m=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(colors),RdBu=ramp$1(scheme$m),scheme$l=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(colors),RdGy=ramp$1(scheme$l),scheme$k=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(colors),RdYlBu=ramp$1(scheme$k),scheme$j=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(colors),RdYlGn=ramp$1(scheme$j),scheme$i=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(colors),Spectral=ramp$1(scheme$i),scheme$h=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(colors),BuGn=ramp$1(scheme$h),scheme$g=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(colors),BuPu=ramp$1(scheme$g),scheme$f=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(colors),GnBu=ramp$1(scheme$f),scheme$e=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(colors),OrRd=ramp$1(scheme$e),scheme$d=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(colors),PuBuGn=ramp$1(scheme$d),scheme$c=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(colors),PuBu=ramp$1(scheme$c),scheme$b=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(colors),PuRd=ramp$1(scheme$b),scheme$a=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(colors),RdPu=ramp$1(scheme$a),scheme$9=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(colors),YlGnBu=ramp$1(scheme$9),scheme$8=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(colors),YlGn=ramp$1(scheme$8),scheme$7=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(colors),YlOrBr=ramp$1(scheme$7),scheme$6=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(colors),YlOrRd=ramp$1(scheme$6),scheme$5=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(colors),Blues=ramp$1(scheme$5),scheme$4=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(colors),Greens=ramp$1(scheme$4),scheme$3=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(colors),Greys=ramp$1(scheme$3),scheme$2=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(colors),Purples=ramp$1(scheme$2),scheme$1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(colors),Reds=ramp$1(scheme$1),scheme=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(colors),Oranges=ramp$1(scheme);function cividis(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}var cubehelix=cubehelixLong(cubehelix$3(300,.5,0),cubehelix$3(-240,.5,1)),warm=cubehelixLong(cubehelix$3(-100,.75,.35),cubehelix$3(80,1.5,.8)),cool=cubehelixLong(cubehelix$3(260,.75,.35),cubehelix$3(80,1.5,.8)),c$2=cubehelix$3();function rainbow(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return c$2.h=360*e-100,c$2.s=1.5-1.5*t,c$2.l=.8-.9*t,c$2+""}var c$1=rgb(),pi_1_3=Math.PI/3,pi_2_3=Math.PI*2/3;function sinebow(e){var t;return e=(.5-e)*Math.PI,c$1.r=255*(t=Math.sin(e))*t,c$1.g=255*(t=Math.sin(e+pi_1_3))*t,c$1.b=255*(t=Math.sin(e+pi_2_3))*t,c$1+""}function turbo(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function ramp(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var viridis=ramp(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),magma=ramp(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),inferno=ramp(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),plasma=ramp(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function constant$1(e){return function(){return e}}const abs=Math.abs,atan2=Math.atan2,cos=Math.cos,max=Math.max,min=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon=1e-12,pi=Math.PI,halfPi=pi/2,tau=2*pi;function acos(e){return e>1?0:e<-1?pi:Math.acos(e)}function asin(e){return e>=1?halfPi:e<=-1?-halfPi:Math.asin(e)}function withPath(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Path$1(t)}function arcInnerRadius(e){return e.innerRadius}function arcOuterRadius(e){return e.outerRadius}function arcStartAngle(e){return e.startAngle}function arcEndAngle(e){return e.endAngle}function arcPadAngle(e){return e&&e.padAngle}function intersect(e,t,n,r,i,o,l,f){var d=n-e,h=r-t,g=l-i,p=f-o,b=p*d-g*h;if(!(b*b<epsilon))return b=(g*(t-o)-p*(e-i))/b,[e+b*d,t+b*h]}function cornerTangents(e,t,n,r,i,o,l){var f=e-n,d=t-r,h=(l?o:-o)/sqrt(f*f+d*d),g=h*d,p=-h*f,b=e+g,v=t+p,$=n+g,S=r+p,w=(b+$)/2,_=(v+S)/2,I=$-b,T=S-v,P=I*I+T*T,R=i-o,N=b*S-$*v,U=(T<0?-1:1)*sqrt(max(0,R*R*P-N*N)),G=(N*T-I*U)/P,V=(-N*I-T*U)/P,q=(N*T+I*U)/P,O=(-N*I+T*U)/P,W=G-w,H=V-_,L=q-w,z=O-_;return W*W+H*H>L*L+z*z&&(G=q,V=O),{cx:G,cy:V,x01:-g,y01:-p,x11:G*(i/R-1),y11:V*(i/R-1)}}function arc(){var e=arcInnerRadius,t=arcOuterRadius,n=constant$1(0),r=null,i=arcStartAngle,o=arcEndAngle,l=arcPadAngle,f=null,d=withPath(h);function h(){var g,p,b=+e.apply(this,arguments),v=+t.apply(this,arguments),$=i.apply(this,arguments)-halfPi,S=o.apply(this,arguments)-halfPi,w=abs(S-$),_=S>$;if(f||(f=g=d()),v<b&&(p=v,v=b,b=p),!(v>epsilon))f.moveTo(0,0);else if(w>tau-epsilon)f.moveTo(v*cos($),v*sin($)),f.arc(0,0,v,$,S,!_),b>epsilon&&(f.moveTo(b*cos(S),b*sin(S)),f.arc(0,0,b,S,$,_));else{var I=$,T=S,P=$,R=S,N=w,U=w,G=l.apply(this,arguments)/2,V=G>epsilon&&(r?+r.apply(this,arguments):sqrt(b*b+v*v)),q=min(abs(v-b)/2,+n.apply(this,arguments)),O=q,W=q,H,L;if(V>epsilon){var z=asin(V/b*sin(G)),F=asin(V/v*sin(G));(N-=z*2)>epsilon?(z*=_?1:-1,P+=z,R-=z):(N=0,P=R=($+S)/2),(U-=F*2)>epsilon?(F*=_?1:-1,I+=F,T-=F):(U=0,I=T=($+S)/2)}var j=v*cos(I),Z=v*sin(I),J=b*cos(R),ee=b*sin(R);if(q>epsilon){var ne=v*cos(T),ie=v*sin(T),fe=b*cos(P),ce=b*sin(P),ue;if(w<pi)if(ue=intersect(j,Z,fe,ce,ne,ie,J,ee)){var me=j-ue[0],le=Z-ue[1],pe=ne-ue[0],te=ie-ue[1],oe=1/sin(acos((me*pe+le*te)/(sqrt(me*me+le*le)*sqrt(pe*pe+te*te)))/2),se=sqrt(ue[0]*ue[0]+ue[1]*ue[1]);O=min(q,(b-se)/(oe-1)),W=min(q,(v-se)/(oe+1))}else O=W=0}U>epsilon?W>epsilon?(H=cornerTangents(fe,ce,j,Z,v,W,_),L=cornerTangents(ne,ie,J,ee,v,W,_),f.moveTo(H.cx+H.x01,H.cy+H.y01),W<q?f.arc(H.cx,H.cy,W,atan2(H.y01,H.x01),atan2(L.y01,L.x01),!_):(f.arc(H.cx,H.cy,W,atan2(H.y01,H.x01),atan2(H.y11,H.x11),!_),f.arc(0,0,v,atan2(H.cy+H.y11,H.cx+H.x11),atan2(L.cy+L.y11,L.cx+L.x11),!_),f.arc(L.cx,L.cy,W,atan2(L.y11,L.x11),atan2(L.y01,L.x01),!_))):(f.moveTo(j,Z),f.arc(0,0,v,I,T,!_)):f.moveTo(j,Z),!(b>epsilon)||!(N>epsilon)?f.lineTo(J,ee):O>epsilon?(H=cornerTangents(J,ee,ne,ie,b,-O,_),L=cornerTangents(j,Z,fe,ce,b,-O,_),f.lineTo(H.cx+H.x01,H.cy+H.y01),O<q?f.arc(H.cx,H.cy,O,atan2(H.y01,H.x01),atan2(L.y01,L.x01),!_):(f.arc(H.cx,H.cy,O,atan2(H.y01,H.x01),atan2(H.y11,H.x11),!_),f.arc(0,0,b,atan2(H.cy+H.y11,H.cx+H.x11),atan2(L.cy+L.y11,L.cx+L.x11),_),f.arc(L.cx,L.cy,O,atan2(L.y11,L.x11),atan2(L.y01,L.x01),!_))):f.arc(0,0,b,R,P,_)}if(f.closePath(),g)return f=null,g+""||null}return h.centroid=function(){var g=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,p=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-pi/2;return[cos(p)*g,sin(p)*g]},h.innerRadius=function(g){return arguments.length?(e=typeof g=="function"?g:constant$1(+g),h):e},h.outerRadius=function(g){return arguments.length?(t=typeof g=="function"?g:constant$1(+g),h):t},h.cornerRadius=function(g){return arguments.length?(n=typeof g=="function"?g:constant$1(+g),h):n},h.padRadius=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:constant$1(+g),h):r},h.startAngle=function(g){return arguments.length?(i=typeof g=="function"?g:constant$1(+g),h):i},h.endAngle=function(g){return arguments.length?(o=typeof g=="function"?g:constant$1(+g),h):o},h.padAngle=function(g){return arguments.length?(l=typeof g=="function"?g:constant$1(+g),h):l},h.context=function(g){return arguments.length?(f=g==null?null:g,h):f},h}var slice=Array.prototype.slice;function array(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Linear(e){this._context=e}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function curveLinear(e){return new Linear(e)}function x(e){return e[0]}function y(e){return e[1]}function line(e,t){var n=constant$1(!0),r=null,i=curveLinear,o=null,l=withPath(f);e=typeof e=="function"?e:e===void 0?x:constant$1(e),t=typeof t=="function"?t:t===void 0?y:constant$1(t);function f(d){var h,g=(d=array(d)).length,p,b=!1,v;for(r==null&&(o=i(v=l())),h=0;h<=g;++h)!(h<g&&n(p=d[h],h,d))===b&&((b=!b)?o.lineStart():o.lineEnd()),b&&o.point(+e(p,h,d),+t(p,h,d));if(v)return o=null,v+""||null}return f.x=function(d){return arguments.length?(e=typeof d=="function"?d:constant$1(+d),f):e},f.y=function(d){return arguments.length?(t=typeof d=="function"?d:constant$1(+d),f):t},f.defined=function(d){return arguments.length?(n=typeof d=="function"?d:constant$1(!!d),f):n},f.curve=function(d){return arguments.length?(i=d,r!=null&&(o=i(r)),f):i},f.context=function(d){return arguments.length?(d==null?r=o=null:o=i(r=d),f):r},f}function area(e,t,n){var r=null,i=constant$1(!0),o=null,l=curveLinear,f=null,d=withPath(h);e=typeof e=="function"?e:e===void 0?x:constant$1(+e),t=typeof t=="function"?t:constant$1(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?y:constant$1(+n);function h(p){var b,v,$,S=(p=array(p)).length,w,_=!1,I,T=new Array(S),P=new Array(S);for(o==null&&(f=l(I=d())),b=0;b<=S;++b){if(!(b<S&&i(w=p[b],b,p))===_)if(_=!_)v=b,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),$=b-1;$>=v;--$)f.point(T[$],P[$]);f.lineEnd(),f.areaEnd()}_&&(T[b]=+e(w,b,p),P[b]=+t(w,b,p),f.point(r?+r(w,b,p):T[b],n?+n(w,b,p):P[b]))}if(I)return f=null,I+""||null}function g(){return line().defined(i).curve(l).context(o)}return h.x=function(p){return arguments.length?(e=typeof p=="function"?p:constant$1(+p),r=null,h):e},h.x0=function(p){return arguments.length?(e=typeof p=="function"?p:constant$1(+p),h):e},h.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:constant$1(+p),h):r},h.y=function(p){return arguments.length?(t=typeof p=="function"?p:constant$1(+p),n=null,h):t},h.y0=function(p){return arguments.length?(t=typeof p=="function"?p:constant$1(+p),h):t},h.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:constant$1(+p),h):n},h.lineX0=h.lineY0=function(){return g().x(e).y(t)},h.lineY1=function(){return g().x(e).y(n)},h.lineX1=function(){return g().x(r).y(t)},h.defined=function(p){return arguments.length?(i=typeof p=="function"?p:constant$1(!!p),h):i},h.curve=function(p){return arguments.length?(l=p,o!=null&&(f=l(o)),h):l},h.context=function(p){return arguments.length?(p==null?o=f=null:f=l(o=p),h):o},h}function descending$1(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function identity(e){return e}function pie(){var e=identity,t=descending$1,n=null,r=constant$1(0),i=constant$1(tau),o=constant$1(0);function l(f){var d,h=(f=array(f)).length,g,p,b=0,v=new Array(h),$=new Array(h),S=+r.apply(this,arguments),w=Math.min(tau,Math.max(-tau,i.apply(this,arguments)-S)),_,I=Math.min(Math.abs(w)/h,o.apply(this,arguments)),T=I*(w<0?-1:1),P;for(d=0;d<h;++d)(P=$[v[d]=d]=+e(f[d],d,f))>0&&(b+=P);for(t!=null?v.sort(function(R,N){return t($[R],$[N])}):n!=null&&v.sort(function(R,N){return n(f[R],f[N])}),d=0,p=b?(w-h*T)/b:0;d<h;++d,S=_)g=v[d],P=$[g],_=S+(P>0?P*p:0)+T,$[g]={data:f[g],index:d,value:P,startAngle:S,endAngle:_,padAngle:I};return $}return l.value=function(f){return arguments.length?(e=typeof f=="function"?f:constant$1(+f),l):e},l.sortValues=function(f){return arguments.length?(t=f,n=null,l):t},l.sort=function(f){return arguments.length?(n=f,t=null,l):n},l.startAngle=function(f){return arguments.length?(r=typeof f=="function"?f:constant$1(+f),l):r},l.endAngle=function(f){return arguments.length?(i=typeof f=="function"?f:constant$1(+f),l):i},l.padAngle=function(f){return arguments.length?(o=typeof f=="function"?f:constant$1(+f),l):o},l}var curveRadialLinear=curveRadial(curveLinear);function Radial(e){this._curve=e}Radial.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};function curveRadial(e){function t(n){return new Radial(e(n))}return t._curve=e,t}function lineRadial(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(n){return arguments.length?t(curveRadial(n)):t()._curve},e}function lineRadial$1(){return lineRadial(line().curve(curveRadialLinear))}function areaRadial(){var e=area().curve(curveRadialLinear),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,o=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return lineRadial(n())},delete e.lineX0,e.lineEndAngle=function(){return lineRadial(r())},delete e.lineX1,e.lineInnerRadius=function(){return lineRadial(i())},delete e.lineY0,e.lineOuterRadius=function(){return lineRadial(o())},delete e.lineY1,e.curve=function(l){return arguments.length?t(curveRadial(l)):t()._curve},e}function pointRadial(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}class Bump{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}class BumpRadial{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,n){if(t=+t,n=+n,this._point===0)this._point=1;else{const r=pointRadial(this._x0,this._y0),i=pointRadial(this._x0,this._y0=(this._y0+n)/2),o=pointRadial(t,this._y0),l=pointRadial(t,n);this._context.moveTo(...r),this._context.bezierCurveTo(...i,...o,...l)}this._x0=t,this._y0=n}}function bumpX(e){return new Bump(e,!0)}function bumpY(e){return new Bump(e,!1)}function bumpRadial(e){return new BumpRadial(e)}function linkSource(e){return e.source}function linkTarget(e){return e.target}function link(e){let t=linkSource,n=linkTarget,r=x,i=y,o=null,l=null,f=withPath(d);function d(){let h;const g=slice.call(arguments),p=t.apply(this,g),b=n.apply(this,g);if(o==null&&(l=e(h=f())),l.lineStart(),g[0]=p,l.point(+r.apply(this,g),+i.apply(this,g)),g[0]=b,l.point(+r.apply(this,g),+i.apply(this,g)),l.lineEnd(),h)return l=null,h+""||null}return d.source=function(h){return arguments.length?(t=h,d):t},d.target=function(h){return arguments.length?(n=h,d):n},d.x=function(h){return arguments.length?(r=typeof h=="function"?h:constant$1(+h),d):r},d.y=function(h){return arguments.length?(i=typeof h=="function"?h:constant$1(+h),d):i},d.context=function(h){return arguments.length?(h==null?o=l=null:l=e(o=h),d):o},d}function linkHorizontal(){return link(bumpX)}function linkVertical(){return link(bumpY)}function linkRadial(){const e=link(bumpRadial);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}const sqrt3$2=sqrt(3);var asterisk={draw(e,t){const n=sqrt(t+min(t/28,.75))*.59436,r=n/2,i=r*sqrt3$2;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},circle={draw(e,t){const n=sqrt(t/pi);e.moveTo(n,0),e.arc(0,0,n,0,tau)}},cross={draw(e,t){const n=sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}};const tan30=sqrt(1/3),tan30_2=tan30*2;var diamond={draw(e,t){const n=sqrt(t/tan30_2),r=n*tan30;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},diamond2={draw(e,t){const n=sqrt(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},plus={draw(e,t){const n=sqrt(t-min(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},square={draw(e,t){const n=sqrt(t),r=-n/2;e.rect(r,r,n,n)}},square2={draw(e,t){const n=sqrt(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}};const ka=.8908130915292852,kr=sin(pi/10)/sin(7*pi/10),kx=sin(tau/10)*kr,ky=-cos(tau/10)*kr;var star={draw(e,t){const n=sqrt(t*ka),r=kx*n,i=ky*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const l=tau*o/5,f=cos(l),d=sin(l);e.lineTo(d*n,-f*n),e.lineTo(f*r-d*i,d*r+f*i)}e.closePath()}};const sqrt3$1=sqrt(3);var triangle={draw(e,t){const n=-sqrt(t/(sqrt3$1*3));e.moveTo(0,n*2),e.lineTo(-sqrt3$1*n,-n),e.lineTo(sqrt3$1*n,-n),e.closePath()}};const sqrt3=sqrt(3);var triangle2={draw(e,t){const n=sqrt(t)*.6824,r=n/2,i=n*sqrt3/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}};const c=-.5,s=sqrt(3)/2,k=1/sqrt(12),a=(k/2+1)*3;var wye={draw(e,t){const n=sqrt(t/a),r=n/2,i=n*k,o=r,l=n*k+n,f=-o,d=l;e.moveTo(r,i),e.lineTo(o,l),e.lineTo(f,d),e.lineTo(c*r-s*i,s*r+c*i),e.lineTo(c*o-s*l,s*o+c*l),e.lineTo(c*f-s*d,s*f+c*d),e.lineTo(c*r+s*i,c*i-s*r),e.lineTo(c*o+s*l,c*l-s*o),e.lineTo(c*f+s*d,c*d-s*f),e.closePath()}},times={draw(e,t){const n=sqrt(t-min(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}};const symbolsFill=[circle,cross,diamond,square,star,triangle,wye],symbolsStroke=[circle,plus,times,triangle2,asterisk,square2,diamond2];function Symbol$1(e,t){let n=null,r=withPath(i);e=typeof e=="function"?e:constant$1(e||circle),t=typeof t=="function"?t:constant$1(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:constant$1(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:constant$1(+o),i):t},i.context=function(o){return arguments.length?(n=o==null?null:o,i):n},i}function noop(){}function point$3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Basis(e){this._context=e}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function basis(e){return new Basis(e)}function BasisClosed(e){this._context=e}BasisClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:point$3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function basisClosed(e){return new BasisClosed(e)}function BasisOpen(e){this._context=e}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:point$3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function basisOpen(e){return new BasisOpen(e)}function Bundle(e,t){this._basis=new Basis(e),this._beta=t}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,l=t[n]-i,f=-1,d;++f<=n;)d=f/n,this._basis.point(this._beta*e[f]+(1-this._beta)*(r+d*o),this._beta*t[f]+(1-this._beta)*(i+d*l));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var bundle=function e(t){function n(r){return t===1?new Basis(r):new Bundle(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function point$2(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Cardinal(e,t){this._context=e,this._k=(1-t)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$2(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:point$2(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var cardinal=function e(t){function n(r){return new Cardinal(r,t)}return n.tension=function(r){return e(+r)},n}(0);function CardinalClosed(e,t){this._context=e,this._k=(1-t)/6}CardinalClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:point$2(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var cardinalClosed=function e(t){function n(r){return new CardinalClosed(r,t)}return n.tension=function(r){return e(+r)},n}(0);function CardinalOpen(e,t){this._context=e,this._k=(1-t)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$2(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var cardinalOpen=function e(t){function n(r){return new CardinalOpen(r,t)}return n.tension=function(r){return e(+r)},n}(0);function point$1(e,t,n){var r=e._x1,i=e._y1,o=e._x2,l=e._y2;if(e._l01_a>epsilon){var f=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,d=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*f-e._x0*e._l12_2a+e._x2*e._l01_2a)/d,i=(i*f-e._y0*e._l12_2a+e._y2*e._l01_2a)/d}if(e._l23_a>epsilon){var h=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,g=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*h+e._x1*e._l23_2a-t*e._l12_2a)/g,l=(l*h+e._y1*e._l23_2a-n*e._l12_2a)/g}e._context.bezierCurveTo(r,i,o,l,e._x2,e._y2)}function CatmullRom(e,t){this._context=e,this._alpha=t}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:point$1(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var catmullRom=function e(t){function n(r){return t?new CatmullRom(r,t):new Cardinal(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function CatmullRomClosed(e,t){this._context=e,this._alpha=t}CatmullRomClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:point$1(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var catmullRomClosed=function e(t){function n(r){return t?new CatmullRomClosed(r,t):new CardinalClosed(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function CatmullRomOpen(e,t){this._context=e,this._alpha=t}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$1(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var catmullRomOpen=function e(t){function n(r){return t?new CatmullRomOpen(r,t):new CardinalOpen(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function LinearClosed(e){this._context=e}LinearClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function linearClosed(e){return new LinearClosed(e)}function sign(e){return e<0?-1:1}function slope3(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),f=(o*i+l*r)/(r+i);return(sign(o)+sign(l))*Math.min(Math.abs(o),Math.abs(l),.5*Math.abs(f))||0}function slope2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function point(e,t,n){var r=e._x0,i=e._y0,o=e._x1,l=e._y1,f=(o-r)/3;e._context.bezierCurveTo(r+f,i+f*t,o-f,l-f*n,o,l)}function MonotoneX(e){this._context=e}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,point(this,slope2(this,n=slope3(this,e,t)),n);break;default:point(this,this._t0,n=slope3(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function MonotoneY(e){this._context=new ReflectContext(e)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(e,t){MonotoneX.prototype.point.call(this,t,e)};function ReflectContext(e){this._context=e}ReflectContext.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function monotoneX(e){return new MonotoneX(e)}function monotoneY(e){return new MonotoneY(e)}function Natural(e){this._context=e}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=controlPoints(e),i=controlPoints(t),o=0,l=1;l<n;++o,++l)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function controlPoints(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),l=new Array(n);for(i[0]=0,o[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function natural(e){return new Natural(e)}function Step(e,t){this._context=e,this._t=t}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function step(e){return new Step(e,.5)}function stepBefore(e){return new Step(e,0)}function stepAfter(e){return new Step(e,1)}function none$1(e,t){if((l=e.length)>1)for(var n=1,r,i,o=e[t[0]],l,f=o.length;n<l;++n)for(i=o,o=e[t[n]],r=0;r<f;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function none(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function stackValue(e,t){return e[t]}function stackSeries(e){const t=[];return t.key=e,t}function stack(){var e=constant$1([]),t=none,n=none$1,r=stackValue;function i(o){var l=Array.from(e.apply(this,arguments),stackSeries),f,d=l.length,h=-1,g;for(const p of o)for(f=0,++h;f<d;++f)(l[f][h]=[0,+r(p,l[f].key,h,o)]).data=p;for(f=0,g=array(t(l));f<d;++f)l[g[f]].index=f;return n(l,g),l}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:constant$1(Array.from(o)),i):e},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:constant$1(+o),i):r},i.order=function(o){return arguments.length?(t=o==null?none:typeof o=="function"?o:constant$1(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(n=o==null?none$1:o,i):n},i}function expand(e,t){if((r=e.length)>0){for(var n,r,i=0,o=e[0].length,l;i<o;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}none$1(e,t)}}function diverging(e,t){if((d=e.length)>0)for(var n,r=0,i,o,l,f,d,h=e[t[0]].length;r<h;++r)for(l=f=0,n=0;n<d;++n)(o=(i=e[t[n]][r])[1]-i[0])>0?(i[0]=l,i[1]=l+=o):o<0?(i[1]=f,i[0]=f+=o):(i[0]=0,i[1]=o)}function silhouette(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,o=r.length;n<o;++n){for(var l=0,f=0;l<i;++l)f+=e[l][n][1]||0;r[n][1]+=r[n][0]=-f/2}none$1(e,t)}}function wiggle(e,t){if(!(!((l=e.length)>0)||!((o=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,o,l;r<o;++r){for(var f=0,d=0,h=0;f<l;++f){for(var g=e[t[f]],p=g[r][1]||0,b=g[r-1][1]||0,v=(p-b)/2,$=0;$<f;++$){var S=e[t[$]],w=S[r][1]||0,_=S[r-1][1]||0;v+=w-_}d+=p,h+=v*p}i[r-1][1]+=i[r-1][0]=n,d&&(n-=h/d)}i[r-1][1]+=i[r-1][0]=n,none$1(e,t)}}function appearance(e){var t=e.map(peak);return none(e).sort(function(n,r){return t[n]-t[r]})}function peak(e){for(var t=-1,n=0,r=e.length,i,o=-1/0;++t<r;)(i=+e[t][1])>o&&(o=i,n=t);return n}function ascending(e){var t=e.map(sum);return none(e).sort(function(n,r){return t[n]-t[r]})}function sum(e){for(var t=0,n=-1,r=e.length,i;++n<r;)(i=+e[n][1])&&(t+=i);return t}function descending(e){return ascending(e).reverse()}function insideOut(e){var t=e.length,n,r,i=e.map(sum),o=appearance(e),l=0,f=0,d=[],h=[];for(n=0;n<t;++n)r=o[n],l<f?(l+=i[r],d.push(r)):(f+=i[r],h.push(r));return h.reverse().concat(d)}function reverse(e){return none(e).reverse()}var constant=e=>()=>e;function ZoomEvent(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function nopropagation(e){e.stopImmediatePropagation()}function noevent(e){e.preventDefault(),e.stopImmediatePropagation()}function defaultFilter(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function defaultExtent(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function defaultTransform(){return this.__zoom||identity$8}function defaultWheelDelta(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),l>o?(o+l)/2:Math.min(0,o)||Math.max(0,l))}function zoom(){var e=defaultFilter,t=defaultExtent,n=defaultConstrain,r=defaultWheelDelta,i=defaultTouchable,o=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],f=250,d=interpolateZoom,h=dispatch("start","zoom","end"),g,p,b,v=500,$=150,S=0,w=10;function _(L){L.property("__zoom",defaultTransform).on("wheel.zoom",G,{passive:!1}).on("mousedown.zoom",V).on("dblclick.zoom",q).filter(i).on("touchstart.zoom",O).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",H).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(L,z,F,j){var Z=L.selection?L.selection():L;Z.property("__zoom",defaultTransform),L!==Z?R(L,z,F,j):Z.interrupt().each(function(){N(this,arguments).event(j).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},_.scaleBy=function(L,z,F,j){_.scaleTo(L,function(){var Z=this.__zoom.k,J=typeof z=="function"?z.apply(this,arguments):z;return Z*J},F,j)},_.scaleTo=function(L,z,F,j){_.transform(L,function(){var Z=t.apply(this,arguments),J=this.__zoom,ee=F==null?P(Z):typeof F=="function"?F.apply(this,arguments):F,ne=J.invert(ee),ie=typeof z=="function"?z.apply(this,arguments):z;return n(T(I(J,ie),ee,ne),Z,l)},F,j)},_.translateBy=function(L,z,F,j){_.transform(L,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof F=="function"?F.apply(this,arguments):F),t.apply(this,arguments),l)},null,j)},_.translateTo=function(L,z,F,j,Z){_.transform(L,function(){var J=t.apply(this,arguments),ee=this.__zoom,ne=j==null?P(J):typeof j=="function"?j.apply(this,arguments):j;return n(identity$8.translate(ne[0],ne[1]).scale(ee.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof F=="function"?-F.apply(this,arguments):-F),J,l)},j,Z)};function I(L,z){return z=Math.max(o[0],Math.min(o[1],z)),z===L.k?L:new Transform(z,L.x,L.y)}function T(L,z,F){var j=z[0]-F[0]*L.k,Z=z[1]-F[1]*L.k;return j===L.x&&Z===L.y?L:new Transform(L.k,j,Z)}function P(L){return[(+L[0][0]+ +L[1][0])/2,(+L[0][1]+ +L[1][1])/2]}function R(L,z,F,j){L.on("start.zoom",function(){N(this,arguments).event(j).start()}).on("interrupt.zoom end.zoom",function(){N(this,arguments).event(j).end()}).tween("zoom",function(){var Z=this,J=arguments,ee=N(Z,J).event(j),ne=t.apply(Z,J),ie=F==null?P(ne):typeof F=="function"?F.apply(Z,J):F,fe=Math.max(ne[1][0]-ne[0][0],ne[1][1]-ne[0][1]),ce=Z.__zoom,ue=typeof z=="function"?z.apply(Z,J):z,me=d(ce.invert(ie).concat(fe/ce.k),ue.invert(ie).concat(fe/ue.k));return function(le){if(le===1)le=ue;else{var pe=me(le),te=fe/pe[2];le=new Transform(te,ie[0]-pe[0]*te,ie[1]-pe[1]*te)}ee.zoom(null,le)}})}function N(L,z,F){return!F&&L.__zooming||new U(L,z)}function U(L,z){this.that=L,this.args=z,this.active=0,this.sourceEvent=null,this.extent=t.apply(L,z),this.taps=0}U.prototype={event:function(L){return L&&(this.sourceEvent=L),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(L,z){return this.mouse&&L!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&L!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&L!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(L){var z=select(this.that).datum();h.call(L,this.that,new ZoomEvent(L,{sourceEvent:this.sourceEvent,target:_,type:L,transform:this.that.__zoom,dispatch:h}),z)}};function G(L,...z){if(!e.apply(this,arguments))return;var F=N(this,z).event(L),j=this.__zoom,Z=Math.max(o[0],Math.min(o[1],j.k*Math.pow(2,r.apply(this,arguments)))),J=pointer(L);if(F.wheel)(F.mouse[0][0]!==J[0]||F.mouse[0][1]!==J[1])&&(F.mouse[1]=j.invert(F.mouse[0]=J)),clearTimeout(F.wheel);else{if(j.k===Z)return;F.mouse=[J,j.invert(J)],interrupt(this),F.start()}noevent(L),F.wheel=setTimeout(ee,$),F.zoom("mouse",n(T(I(j,Z),F.mouse[0],F.mouse[1]),F.extent,l));function ee(){F.wheel=null,F.end()}}function V(L,...z){if(b||!e.apply(this,arguments))return;var F=L.currentTarget,j=N(this,z,!0).event(L),Z=select(L.view).on("mousemove.zoom",ie,!0).on("mouseup.zoom",fe,!0),J=pointer(L,F),ee=L.clientX,ne=L.clientY;dragDisable(L.view),nopropagation(L),j.mouse=[J,this.__zoom.invert(J)],interrupt(this),j.start();function ie(ce){if(noevent(ce),!j.moved){var ue=ce.clientX-ee,me=ce.clientY-ne;j.moved=ue*ue+me*me>S}j.event(ce).zoom("mouse",n(T(j.that.__zoom,j.mouse[0]=pointer(ce,F),j.mouse[1]),j.extent,l))}function fe(ce){Z.on("mousemove.zoom mouseup.zoom",null),yesdrag(ce.view,j.moved),noevent(ce),j.event(ce).end()}}function q(L,...z){if(!!e.apply(this,arguments)){var F=this.__zoom,j=pointer(L.changedTouches?L.changedTouches[0]:L,this),Z=F.invert(j),J=F.k*(L.shiftKey?.5:2),ee=n(T(I(F,J),j,Z),t.apply(this,z),l);noevent(L),f>0?select(this).transition().duration(f).call(R,ee,j,L):select(this).call(_.transform,ee,j,L)}}function O(L,...z){if(!!e.apply(this,arguments)){var F=L.touches,j=F.length,Z=N(this,z,L.changedTouches.length===j).event(L),J,ee,ne,ie;for(nopropagation(L),ee=0;ee<j;++ee)ne=F[ee],ie=pointer(ne,this),ie=[ie,this.__zoom.invert(ie),ne.identifier],Z.touch0?!Z.touch1&&Z.touch0[2]!==ie[2]&&(Z.touch1=ie,Z.taps=0):(Z.touch0=ie,J=!0,Z.taps=1+!!g);g&&(g=clearTimeout(g)),J&&(Z.taps<2&&(p=ie[0],g=setTimeout(function(){g=null},v)),interrupt(this),Z.start())}}function W(L,...z){if(!!this.__zooming){var F=N(this,z).event(L),j=L.changedTouches,Z=j.length,J,ee,ne,ie;for(noevent(L),J=0;J<Z;++J)ee=j[J],ne=pointer(ee,this),F.touch0&&F.touch0[2]===ee.identifier?F.touch0[0]=ne:F.touch1&&F.touch1[2]===ee.identifier&&(F.touch1[0]=ne);if(ee=F.that.__zoom,F.touch1){var fe=F.touch0[0],ce=F.touch0[1],ue=F.touch1[0],me=F.touch1[1],le=(le=ue[0]-fe[0])*le+(le=ue[1]-fe[1])*le,pe=(pe=me[0]-ce[0])*pe+(pe=me[1]-ce[1])*pe;ee=I(ee,Math.sqrt(le/pe)),ne=[(fe[0]+ue[0])/2,(fe[1]+ue[1])/2],ie=[(ce[0]+me[0])/2,(ce[1]+me[1])/2]}else if(F.touch0)ne=F.touch0[0],ie=F.touch0[1];else return;F.zoom("touch",n(T(ee,ne,ie),F.extent,l))}}function H(L,...z){if(!!this.__zooming){var F=N(this,z).event(L),j=L.changedTouches,Z=j.length,J,ee;for(nopropagation(L),b&&clearTimeout(b),b=setTimeout(function(){b=null},v),J=0;J<Z;++J)ee=j[J],F.touch0&&F.touch0[2]===ee.identifier?delete F.touch0:F.touch1&&F.touch1[2]===ee.identifier&&delete F.touch1;if(F.touch1&&!F.touch0&&(F.touch0=F.touch1,delete F.touch1),F.touch0)F.touch0[1]=this.__zoom.invert(F.touch0[0]);else if(F.end(),F.taps===2&&(ee=pointer(ee,this),Math.hypot(p[0]-ee[0],p[1]-ee[1])<w)){var ne=select(this).on("dblclick.zoom");ne&&ne.apply(this,arguments)}}}return _.wheelDelta=function(L){return arguments.length?(r=typeof L=="function"?L:constant(+L),_):r},_.filter=function(L){return arguments.length?(e=typeof L=="function"?L:constant(!!L),_):e},_.touchable=function(L){return arguments.length?(i=typeof L=="function"?L:constant(!!L),_):i},_.extent=function(L){return arguments.length?(t=typeof L=="function"?L:constant([[+L[0][0],+L[0][1]],[+L[1][0],+L[1][1]]]),_):t},_.scaleExtent=function(L){return arguments.length?(o[0]=+L[0],o[1]=+L[1],_):[o[0],o[1]]},_.translateExtent=function(L){return arguments.length?(l[0][0]=+L[0][0],l[1][0]=+L[1][0],l[0][1]=+L[0][1],l[1][1]=+L[1][1],_):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},_.constrain=function(L){return arguments.length?(n=L,_):n},_.duration=function(L){return arguments.length?(f=+L,_):f},_.interpolate=function(L){return arguments.length?(d=L,_):d},_.on=function(){var L=h.on.apply(h,arguments);return L===h?_:L},_.clickDistance=function(L){return arguments.length?(S=(L=+L)*L,_):Math.sqrt(S)},_.tapDistance=function(L){return arguments.length?(w=+L,_):w},_}var d3=Object.freeze(Object.defineProperty({__proto__:null,bisect,bisectRight,bisectLeft,bisectCenter,ascending:ascending$2,bisector,blur,blur2,blurImage,count:count$1,cross:cross$2,cumsum,descending:descending$2,deviation,extent:extent$1,Adder,fsum,fcumsum,group,flatGroup,flatRollup,groups,index:index$4,indexes,rollup,rollups,groupSort,bin,histogram:bin,thresholdFreedmanDiaconis,thresholdScott,thresholdSturges,max:max$3,maxIndex,mean,median,medianIndex,merge,min:min$2,minIndex,mode,nice:nice$1,pairs,permute,quantile:quantile$1,quantileIndex,quantileSorted,quickselect,range:range$2,rank,least,leastIndex,greatest,greatestIndex,scan,shuffle:shuffle$1,shuffler,sum:sum$2,ticks,tickIncrement,tickStep,transpose,variance,zip,every,some,filter,map:map$1,reduce,reverse:reverse$1,sort,difference,disjoint,intersection,subset,superset,union,InternMap,InternSet,axisTop,axisRight,axisBottom,axisLeft,brush,brushX,brushY,brushSelection,chord,chordTranspose,chordDirected,ribbon:ribbon$1,ribbonArrow,color,rgb,hsl:hsl$2,lab:lab$1,hcl:hcl$2,lch,gray,cubehelix:cubehelix$3,contours:Contours,contourDensity:density,Delaunay,Voronoi,dispatch,drag,dragDisable,dragEnable:yesdrag,dsvFormat,csvParse,csvParseRows,csvFormat,csvFormatBody,csvFormatRows,csvFormatRow,csvFormatValue,tsvParse,tsvParseRows,tsvFormat,tsvFormatBody,tsvFormatRows,tsvFormatRow,tsvFormatValue,autoType,easeLinear:linear$1,easeQuad:quadInOut,easeQuadIn:quadIn,easeQuadOut:quadOut,easeQuadInOut:quadInOut,easeCubic:cubicInOut,easeCubicIn:cubicIn,easeCubicOut:cubicOut,easeCubicInOut:cubicInOut,easePoly:polyInOut,easePolyIn:polyIn,easePolyOut:polyOut,easePolyInOut:polyInOut,easeSin:sinInOut,easeSinIn:sinIn,easeSinOut:sinOut,easeSinInOut:sinInOut,easeExp:expInOut,easeExpIn:expIn,easeExpOut:expOut,easeExpInOut:expInOut,easeCircle:circleInOut,easeCircleIn:circleIn,easeCircleOut:circleOut,easeCircleInOut:circleInOut,easeBounce:bounceOut,easeBounceIn:bounceIn,easeBounceOut:bounceOut,easeBounceInOut:bounceInOut,easeBack:backInOut,easeBackIn:backIn,easeBackOut:backOut,easeBackInOut:backInOut,easeElastic:elasticOut,easeElasticIn:elasticIn,easeElasticOut:elasticOut,easeElasticInOut:elasticInOut,blob,buffer,dsv,csv,tsv,image,json,text,xml,html,svg,forceCenter:center,forceCollide:collide,forceLink:link$2,forceManyBody:manyBody,forceRadial:radial$1,forceSimulation:simulation,forceX:x$1,forceY:y$1,formatDefaultLocale:defaultLocale$1,get format(){return format},get formatPrefix(){return formatPrefix},formatLocale:formatLocale$1,formatSpecifier,FormatSpecifier,precisionFixed,precisionPrefix,precisionRound,geoArea:area$2,geoBounds:bounds,geoCentroid:centroid$1,geoCircle:circle$1,geoClipAntimeridian:clipAntimeridian,geoClipCircle:clipCircle,geoClipExtent:extent,geoClipRectangle:clipRectangle,geoContains:contains$1,geoDistance:distance,geoGraticule:graticule,geoGraticule10:graticule10,geoInterpolate:interpolate,geoLength:length$1,geoPath:index$2,geoAlbers:albers,geoAlbersUsa:albersUsa,geoAzimuthalEqualArea:azimuthalEqualArea,geoAzimuthalEqualAreaRaw:azimuthalEqualAreaRaw,geoAzimuthalEquidistant:azimuthalEquidistant,geoAzimuthalEquidistantRaw:azimuthalEquidistantRaw,geoConicConformal:conicConformal,geoConicConformalRaw:conicConformalRaw,geoConicEqualArea:conicEqualArea,geoConicEqualAreaRaw:conicEqualAreaRaw,geoConicEquidistant:conicEquidistant,geoConicEquidistantRaw:conicEquidistantRaw,geoEqualEarth:equalEarth,geoEqualEarthRaw:equalEarthRaw,geoEquirectangular:equirectangular,geoEquirectangularRaw:equirectangularRaw,geoGnomonic:gnomonic,geoGnomonicRaw:gnomonicRaw,geoIdentity:identity$3,geoProjection:projection,geoProjectionMutator:projectionMutator,geoMercator:mercator,geoMercatorRaw:mercatorRaw,geoNaturalEarth1:naturalEarth1,geoNaturalEarth1Raw:naturalEarth1Raw,geoOrthographic:orthographic,geoOrthographicRaw:orthographicRaw,geoStereographic:stereographic,geoStereographicRaw:stereographicRaw,geoTransverseMercator:transverseMercator,geoTransverseMercatorRaw:transverseMercatorRaw,geoRotation:rotation,geoStream,geoTransform:transform,cluster,hierarchy,Node:Node$1,pack:index$1,packSiblings:siblings,packEnclose:enclose,partition,stratify,tree,treemap:index,treemapBinary:binary,treemapDice,treemapSlice,treemapSliceDice:sliceDice,treemapSquarify:squarify,treemapResquarify:resquarify,interpolate:interpolate$1,interpolateArray:array$3,interpolateBasis:basis$1,interpolateBasisClosed:basisClosed$1,interpolateDate:date$2,interpolateDiscrete:discrete,interpolateHue:hue,interpolateNumber,interpolateNumberArray:numberArray,interpolateObject:object$1,interpolateRound,interpolateString,interpolateTransformCss,interpolateTransformSvg,interpolateZoom,interpolateRgb,interpolateRgbBasis:rgbBasis,interpolateRgbBasisClosed:rgbBasisClosed,interpolateHsl:hsl$1,interpolateHslLong:hslLong,interpolateLab:lab,interpolateHcl:hcl$1,interpolateHclLong:hclLong,interpolateCubehelix:cubehelix$2,interpolateCubehelixLong:cubehelixLong,piecewise,quantize:quantize$1,Path:Path$1,path,pathRound,polygonArea:area$1,polygonCentroid:centroid,polygonHull:hull,polygonContains:contains,polygonLength:length,quadtree,randomUniform:uniform,randomInt:int,randomNormal:normal,randomLogNormal:logNormal,randomBates:bates,randomIrwinHall:irwinHall,randomExponential:exponential,randomPareto:pareto,randomBernoulli:bernoulli,randomGeometric:geometric,randomBinomial:binomial,randomGamma:gamma,randomBeta:beta,randomWeibull:weibull,randomCauchy:cauchy,randomLogistic:logistic,randomPoisson:poisson,randomLcg:lcg,scaleBand:band,scalePoint:point$4,scaleIdentity:identity$1,scaleLinear:linear,scaleLog:log,scaleSymlog:symlog,scaleOrdinal:ordinal,scaleImplicit:implicit,scalePow:pow,scaleSqrt:sqrt$1,scaleRadial:radial,scaleQuantile:quantile,scaleQuantize:quantize,scaleThreshold:threshold,scaleTime:time,scaleUtc:utcTime,scaleSequential:sequential,scaleSequentialLog:sequentialLog,scaleSequentialPow:sequentialPow,scaleSequentialSqrt:sequentialSqrt,scaleSequentialSymlog:sequentialSymlog,scaleSequentialQuantile:sequentialQuantile,scaleDiverging:diverging$1,scaleDivergingLog:divergingLog,scaleDivergingPow:divergingPow,scaleDivergingSqrt:divergingSqrt,scaleDivergingSymlog:divergingSymlog,tickFormat,schemeCategory10:category10,schemeAccent:Accent,schemeDark2:Dark2,schemePaired:Paired,schemePastel1:Pastel1,schemePastel2:Pastel2,schemeSet1:Set1,schemeSet2:Set2,schemeSet3:Set3,schemeTableau10:Tableau10,interpolateBrBG:BrBG,schemeBrBG:scheme$q,interpolatePRGn:PRGn,schemePRGn:scheme$p,interpolatePiYG:PiYG,schemePiYG:scheme$o,interpolatePuOr:PuOr,schemePuOr:scheme$n,interpolateRdBu:RdBu,schemeRdBu:scheme$m,interpolateRdGy:RdGy,schemeRdGy:scheme$l,interpolateRdYlBu:RdYlBu,schemeRdYlBu:scheme$k,interpolateRdYlGn:RdYlGn,schemeRdYlGn:scheme$j,interpolateSpectral:Spectral,schemeSpectral:scheme$i,interpolateBuGn:BuGn,schemeBuGn:scheme$h,interpolateBuPu:BuPu,schemeBuPu:scheme$g,interpolateGnBu:GnBu,schemeGnBu:scheme$f,interpolateOrRd:OrRd,schemeOrRd:scheme$e,interpolatePuBuGn:PuBuGn,schemePuBuGn:scheme$d,interpolatePuBu:PuBu,schemePuBu:scheme$c,interpolatePuRd:PuRd,schemePuRd:scheme$b,interpolateRdPu:RdPu,schemeRdPu:scheme$a,interpolateYlGnBu:YlGnBu,schemeYlGnBu:scheme$9,interpolateYlGn:YlGn,schemeYlGn:scheme$8,interpolateYlOrBr:YlOrBr,schemeYlOrBr:scheme$7,interpolateYlOrRd:YlOrRd,schemeYlOrRd:scheme$6,interpolateBlues:Blues,schemeBlues:scheme$5,interpolateGreens:Greens,schemeGreens:scheme$4,interpolateGreys:Greys,schemeGreys:scheme$3,interpolatePurples:Purples,schemePurples:scheme$2,interpolateReds:Reds,schemeReds:scheme$1,interpolateOranges:Oranges,schemeOranges:scheme,interpolateCividis:cividis,interpolateCubehelixDefault:cubehelix,interpolateRainbow:rainbow,interpolateWarm:warm,interpolateCool:cool,interpolateSinebow:sinebow,interpolateTurbo:turbo,interpolateViridis:viridis,interpolateMagma:magma,interpolateInferno:inferno,interpolatePlasma:plasma,create,creator,local:local$1,matcher,namespace,namespaces,pointer,pointers,select,selectAll,selection,selector,selectorAll,style:styleValue,window:defaultView,arc,area,line,pie,areaRadial,radialArea:areaRadial,lineRadial:lineRadial$1,radialLine:lineRadial$1,pointRadial,link,linkHorizontal,linkVertical,linkRadial,symbol:Symbol$1,symbolsStroke,symbolsFill,symbols:symbolsFill,symbolAsterisk:asterisk,symbolCircle:circle,symbolCross:cross,symbolDiamond:diamond,symbolDiamond2:diamond2,symbolPlus:plus,symbolSquare:square,symbolSquare2:square2,symbolStar:star,symbolTriangle:triangle,symbolTriangle2:triangle2,symbolWye:wye,symbolTimes:times,symbolX:times,curveBasisClosed:basisClosed,curveBasisOpen:basisOpen,curveBasis:basis,curveBumpX:bumpX,curveBumpY:bumpY,curveBundle:bundle,curveCardinalClosed:cardinalClosed,curveCardinalOpen:cardinalOpen,curveCardinal:cardinal,curveCatmullRomClosed:catmullRomClosed,curveCatmullRomOpen:catmullRomOpen,curveCatmullRom:catmullRom,curveLinearClosed:linearClosed,curveLinear,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural:natural,curveStep:step,curveStepAfter:stepAfter,curveStepBefore:stepBefore,stack,stackOffsetExpand:expand,stackOffsetDiverging:diverging,stackOffsetNone:none$1,stackOffsetSilhouette:silhouette,stackOffsetWiggle:wiggle,stackOrderAppearance:appearance,stackOrderAscending:ascending,stackOrderDescending:descending,stackOrderInsideOut:insideOut,stackOrderNone:none,stackOrderReverse:reverse,timeInterval,utcMillisecond:millisecond,utcMilliseconds:milliseconds,timeMillisecond:millisecond,timeMilliseconds:milliseconds,utcSecond:second,utcSeconds:seconds,timeSecond:second,timeSeconds:seconds,timeMinute,timeMinutes,utcMinute,utcMinutes,timeHour,timeHours,utcHour,utcHours,timeDay,timeDays,utcDay,utcDays,unixDay,unixDays,timeWeek:timeSunday,timeWeeks:timeSundays,timeSunday,timeSundays,timeMonday,timeMondays,timeTuesday,timeTuesdays,timeWednesday,timeWednesdays,timeThursday,timeThursdays,timeFriday,timeFridays,timeSaturday,timeSaturdays,utcWeek:utcSunday,utcWeeks:utcSundays,utcSunday,utcSundays,utcMonday,utcMondays,utcTuesday,utcTuesdays,utcWednesday,utcWednesdays,utcThursday,utcThursdays,utcFriday,utcFridays,utcSaturday,utcSaturdays,timeMonth,timeMonths,utcMonth,utcMonths,timeYear,timeYears,utcYear,utcYears,utcTicks,utcTickInterval,timeTicks,timeTickInterval,timeFormatDefaultLocale:defaultLocale,get timeFormat(){return timeFormat},get timeParse(){return timeParse},get utcFormat(){return utcFormat},get utcParse(){return utcParse},timeFormatLocale:formatLocale,isoFormat:formatIso$1,isoParse:parseIso$1,now,timer,timerFlush,timeout,interval,transition,active,interrupt,zoom,zoomTransform:transform$1,zoomIdentity:identity$8,ZoomTransform:Transform},Symbol.toStringTag,{value:"Module"}));const breaks=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function toJalaali(e,t,n){return Object.prototype.toString.call(e)==="[object Date]"&&(n=e.getDate(),t=e.getMonth()+1,e=e.getFullYear()),d2j(g2d(e,t,n))}function toGregorian(e,t,n){return d2g(j2d(e,t,n))}function isLeapJalaaliYear(e){return jalCalLeap(e)===0}function jalaaliMonthLength(e,t){return t<=6?31:t<=11||isLeapJalaaliYear(e)?30:29}function jalCalLeap(e){const t=breaks.length;let n=breaks[0],r,i,o,l,f;if(e<n||e>=breaks[t-1])throw new Error("Invalid Jalaali year "+e);for(f=1;f<t&&(r=breaks[f],i=r-n,!(e<r));f+=1)n=r;return l=e-n,i-l<6&&(l=l-i+div(i+4,33)*33),o=mod(mod(l+1,33)-1,4),o===-1&&(o=4),o}function jalCal(e,t){const n=breaks.length,r=e+621;let i=-14,o=breaks[0],l,f,d,h,g;if(e<o||e>=breaks[n-1])throw new Error("Invalid Jalaali year "+e);for(g=1;g<n&&(l=breaks[g],f=l-o,!(e<l));g+=1)i=i+div(f,33)*8+div(mod(f,33),4),o=l;h=e-o,i=i+div(h,33)*8+div(mod(h,33)+3,4),mod(f,33)===4&&f-h===4&&(i+=1);const p=div(r,4)-div((div(r,100)+1)*3,4)-150,b=20+i-p;return t||(f-h<6&&(h=h-f+div(f+4,33)*33),d=mod(mod(h+1,33)-1,4),d===-1&&(d=4)),{leap:d,gy:r,march:b}}function j2d(e,t,n){const r=jalCal(e,!0);return g2d(r.gy,3,r.march)+(t-1)*31-div(t,7)*(t-7)+n-1}function d2j(e){const t=d2g(e).gy;let n=t-621,r,i,o;const l=jalCal(n,!1),f=g2d(t,3,l.march);if(o=e-f,o>=0){if(o<=185)return i=1+div(o,31),r=mod(o,31)+1,{jy:n,jm:i,jd:r};o-=186}else n-=1,o+=179,l.leap===1&&(o+=1);return i=7+div(o,30),r=mod(o,30)+1,{jy:n,jm:i,jd:r}}function g2d(e,t,n){let r=div((e+div(t-8,6)+100100)*1461,4)+div(153*mod(t+9,12)+2,5)+n-34840408;return r=r-div(div(e+100100+div(t-8,6),100)*3,4)+752,r}function d2g(e){let t=4*e+139361631;t=t+div(div(4*e+183187720,146097)*3,4)*4-3908;const n=div(mod(t,1461),4)*5+308,r=div(mod(n,153),5)+1,i=mod(div(n,153),12)+1;return{gy:div(t,1461)-100100+div(8-i,6),gm:i,gd:r}}function div(e,t){return~~(e/t)}function mod(e,t){return e-~~(e/t)*t}const MILLISECONDS_IN_DAY=864e5,MILLISECONDS_IN_HOUR=36e5,MILLISECONDS_IN_MINUTE=6e4,defaultMask="YYYY-MM-DDTHH:mm:ss.SSSZ",token=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,reverseToken=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,regexStore={};function getRegexData(e,t){const n="("+t.days.join("|")+")",r=e+n;if(regexStore[r]!==void 0)return regexStore[r];const i="("+t.daysShort.join("|")+")",o="("+t.months.join("|")+")",l="("+t.monthsShort.join("|")+")",f={};let d=0;const h=e.replace(reverseToken,p=>{switch(d++,p){case"YY":return f.YY=d,"(-?\\d{1,2})";case"YYYY":return f.YYYY=d,"(-?\\d{1,4})";case"M":return f.M=d,"(\\d{1,2})";case"MM":return f.M=d,"(\\d{2})";case"MMM":return f.MMM=d,l;case"MMMM":return f.MMMM=d,o;case"D":return f.D=d,"(\\d{1,2})";case"Do":return f.D=d++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return f.D=d,"(\\d{2})";case"H":return f.H=d,"(\\d{1,2})";case"HH":return f.H=d,"(\\d{2})";case"h":return f.h=d,"(\\d{1,2})";case"hh":return f.h=d,"(\\d{2})";case"m":return f.m=d,"(\\d{1,2})";case"mm":return f.m=d,"(\\d{2})";case"s":return f.s=d,"(\\d{1,2})";case"ss":return f.s=d,"(\\d{2})";case"S":return f.S=d,"(\\d{1})";case"SS":return f.S=d,"(\\d{2})";case"SSS":return f.S=d,"(\\d{3})";case"A":return f.A=d,"(AM|PM)";case"a":return f.a=d,"(am|pm)";case"aa":return f.aa=d,"(a\\.m\\.|p\\.m\\.)";case"ddd":return i;case"dddd":return n;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return f.Z=d,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return f.ZZ=d,"(Z|[+-]\\d{2}\\d{2})";case"X":return f.X=d,"(-?\\d+)";case"x":return f.x=d,"(-?\\d{4,})";default:return d--,p[0]==="["&&(p=p.substring(1,p.length-1)),p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),g={map:f,regex:new RegExp("^"+h)};return regexStore[r]=g,g}function getDateLocale(e,t){return e!==void 0?e:t!==void 0?t.date:defaultLang.date}function formatTimezone(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;return n+pad$2(i)+t+pad$2(o)}function applyYearMonthDayChange(e,t,n){let r=e.getFullYear(),i=e.getMonth();const o=e.getDate();return t.year!==void 0&&(r+=n*t.year,delete t.year),t.month!==void 0&&(i+=n*t.month,delete t.month),e.setDate(1),e.setMonth(2),e.setFullYear(r),e.setMonth(i),e.setDate(Math.min(o,daysInMonth(e))),t.date!==void 0&&(e.setDate(e.getDate()+n*t.date),delete t.date),e}function applyYearMonthDay(e,t,n){const r=t.year!==void 0?t.year:e[`get${n}FullYear`](),i=t.month!==void 0?t.month-1:e[`get${n}Month`](),o=new Date(r,i+1,0).getDate(),l=Math.min(o,t.date!==void 0?t.date:e[`get${n}Date`]());return e[`set${n}Date`](1),e[`set${n}Month`](2),e[`set${n}FullYear`](r),e[`set${n}Month`](i),e[`set${n}Date`](l),delete t.year,delete t.month,delete t.date,e}function getChange(e,t,n){const r=normalizeMod(t),i=new Date(e),o=r.year!==void 0||r.month!==void 0||r.date!==void 0?applyYearMonthDayChange(i,r,n):i;for(const l in r){const f=capitalize(l);o[`set${f}`](o[`get${f}`]()+n*r[l])}return o}function normalizeMod(e){const t={...e};return e.years!==void 0&&(t.year=e.years,delete t.years),e.months!==void 0&&(t.month=e.months,delete t.months),e.days!==void 0&&(t.date=e.days,delete t.days),e.day!==void 0&&(t.date=e.day,delete t.day),e.hour!==void 0&&(t.hours=e.hour,delete t.hour),e.minute!==void 0&&(t.minutes=e.minute,delete t.minute),e.second!==void 0&&(t.seconds=e.second,delete t.second),e.millisecond!==void 0&&(t.milliseconds=e.millisecond,delete t.millisecond),t}function adjustDate(e,t,n){const r=normalizeMod(t),i=n===!0?"UTC":"",o=new Date(e),l=r.year!==void 0||r.month!==void 0||r.date!==void 0?applyYearMonthDay(o,r,i):o;for(const f in r){const d=f.charAt(0).toUpperCase()+f.slice(1);l[`set${i}${d}`](r[f])}return l}function extractDate(e,t,n){const r=__splitDate(e,t,n),i=new Date(r.year,r.month===null?null:r.month-1,r.day===null?1:r.day,r.hour,r.minute,r.second,r.millisecond),o=i.getTimezoneOffset();return r.timezoneOffset===null||r.timezoneOffset===o?i:getChange(i,{minutes:r.timezoneOffset-o},1)}function __splitDate(e,t,n,r,i){const o={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(i!==void 0&&Object.assign(o,i),e==null||e===""||typeof e!="string")return o;t===void 0&&(t=defaultMask);const l=getDateLocale(n,Plugin.props),f=l.months,d=l.monthsShort,{regex:h,map:g}=getRegexData(t,l),p=e.match(h);if(p===null)return o;let b="";if(g.X!==void 0||g.x!==void 0){const v=parseInt(p[g.X!==void 0?g.X:g.x],10);if(isNaN(v)===!0||v<0)return o;const $=new Date(v*(g.X!==void 0?1e3:1));o.year=$.getFullYear(),o.month=$.getMonth()+1,o.day=$.getDate(),o.hour=$.getHours(),o.minute=$.getMinutes(),o.second=$.getSeconds(),o.millisecond=$.getMilliseconds()}else{if(g.YYYY!==void 0)o.year=parseInt(p[g.YYYY],10);else if(g.YY!==void 0){const v=parseInt(p[g.YY],10);o.year=v<0?v:2e3+v}if(g.M!==void 0){if(o.month=parseInt(p[g.M],10),o.month<1||o.month>12)return o}else g.MMM!==void 0?o.month=d.indexOf(p[g.MMM])+1:g.MMMM!==void 0&&(o.month=f.indexOf(p[g.MMMM])+1);if(g.D!==void 0){if(o.day=parseInt(p[g.D],10),o.year===null||o.month===null||o.day<1)return o;const v=r!=="persian"?new Date(o.year,o.month,0).getDate():jalaaliMonthLength(o.year,o.month);if(o.day>v)return o}g.H!==void 0?o.hour=parseInt(p[g.H],10)%24:g.h!==void 0&&(o.hour=parseInt(p[g.h],10)%12,(g.A&&p[g.A]==="PM"||g.a&&p[g.a]==="pm"||g.aa&&p[g.aa]==="p.m.")&&(o.hour+=12),o.hour=o.hour%24),g.m!==void 0&&(o.minute=parseInt(p[g.m],10)%60),g.s!==void 0&&(o.second=parseInt(p[g.s],10)%60),g.S!==void 0&&(o.millisecond=parseInt(p[g.S],10)*10**(3-p[g.S].length)),(g.Z!==void 0||g.ZZ!==void 0)&&(b=g.Z!==void 0?p[g.Z].replace(":",""):p[g.ZZ],o.timezoneOffset=(b[0]==="+"?-1:1)*(60*b.slice(1,3)+1*b.slice(3,5)))}return o.dateHash=pad$2(o.year,6)+"/"+pad$2(o.month)+"/"+pad$2(o.day),o.timeHash=pad$2(o.hour)+":"+pad$2(o.minute)+":"+pad$2(o.second)+b,o}function isValid(e){return typeof e=="number"?!0:isNaN(Date.parse(e))===!1}function buildDate(e,t){return adjustDate(new Date,e,t)}function getDayOfWeek(e){const t=new Date(e).getDay();return t===0?7:t}function getWeekOfYear(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);const r=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-r);const i=(t-n)/(MILLISECONDS_IN_DAY*7);return 1+Math.floor(i)}function getDayIdentifier(e){return e.getFullYear()*1e4+e.getMonth()*100+e.getDate()}function getDateIdentifier(e,t){const n=new Date(e);return t===!0?getDayIdentifier(n):n.getTime()}function isBetweenDates(e,t,n,r={}){const i=getDateIdentifier(t,r.onlyDate),o=getDateIdentifier(n,r.onlyDate),l=getDateIdentifier(e,r.onlyDate);return(l>i||r.inclusiveFrom===!0&&l===i)&&(l<o||r.inclusiveTo===!0&&l===o)}function addToDate(e,t){return getChange(e,t,1)}function subtractFromDate(e,t){return getChange(e,t,-1)}function startOfDate(e,t,n){const r=new Date(e),i=`set${n===!0?"UTC":""}`;switch(t){case"year":case"years":r[`${i}Month`](0);case"month":case"months":r[`${i}Date`](1);case"day":case"days":case"date":r[`${i}Hours`](0);case"hour":case"hours":r[`${i}Minutes`](0);case"minute":case"minutes":r[`${i}Seconds`](0);case"second":case"seconds":r[`${i}Milliseconds`](0)}return r}function endOfDate(e,t,n){const r=new Date(e),i=`set${n===!0?"UTC":""}`;switch(t){case"year":case"years":r[`${i}Month`](11);case"month":case"months":r[`${i}Date`](daysInMonth(r));case"day":case"days":case"date":r[`${i}Hours`](23);case"hour":case"hours":r[`${i}Minutes`](59);case"minute":case"minutes":r[`${i}Seconds`](59);case"second":case"seconds":r[`${i}Milliseconds`](999)}return r}function getMaxDate(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(n=>{t=Math.max(t,new Date(n))}),t}function getMinDate(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(n=>{t=Math.min(t,new Date(n))}),t}function getDiff(e,t,n){return(e.getTime()-e.getTimezoneOffset()*MILLISECONDS_IN_MINUTE-(t.getTime()-t.getTimezoneOffset()*MILLISECONDS_IN_MINUTE))/n}function getDateDiff(e,t,n="days"){const r=new Date(e),i=new Date(t);switch(n){case"years":case"year":return r.getFullYear()-i.getFullYear();case"months":case"month":return(r.getFullYear()-i.getFullYear())*12+r.getMonth()-i.getMonth();case"days":case"day":case"date":return getDiff(startOfDate(r,"day"),startOfDate(i,"day"),MILLISECONDS_IN_DAY);case"hours":case"hour":return getDiff(startOfDate(r,"hour"),startOfDate(i,"hour"),MILLISECONDS_IN_HOUR);case"minutes":case"minute":return getDiff(startOfDate(r,"minute"),startOfDate(i,"minute"),MILLISECONDS_IN_MINUTE);case"seconds":case"second":return getDiff(startOfDate(r,"second"),startOfDate(i,"second"),1e3)}}function getDayOfYear(e){return getDateDiff(e,startOfDate(e,"year"),"days")+1}function inferDateFormat(e){return isDate(e)===!0?"date":typeof e=="number"?"number":"string"}function getDateBetween(e,t,n){const r=new Date(e);if(t){const i=new Date(t);if(r<i)return i}if(n){const i=new Date(n);if(r>i)return i}return r}function isSameDate(e,t,n){const r=new Date(e),i=new Date(t);if(n===void 0)return r.getTime()===i.getTime();switch(n){case"second":case"seconds":if(r.getSeconds()!==i.getSeconds())return!1;case"minute":case"minutes":if(r.getMinutes()!==i.getMinutes())return!1;case"hour":case"hours":if(r.getHours()!==i.getHours())return!1;case"day":case"days":case"date":if(r.getDate()!==i.getDate())return!1;case"month":case"months":if(r.getMonth()!==i.getMonth())return!1;case"year":case"years":if(r.getFullYear()!==i.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${n}`)}return!0}function daysInMonth(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function getOrdinal(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const formatter={YY(e,t,n){const r=this.YYYY(e,t,n)%100;return r>=0?pad$2(r):"-"+pad$2(Math.abs(r))},YYYY(e,t,n){return n!=null?n:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return pad$2(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return getOrdinal(this.Q(e))},D(e){return e.getDate()},Do(e){return getOrdinal(e.getDate())},DD(e){return pad$2(e.getDate())},DDD(e){return getDayOfYear(e)},DDDD(e){return pad$2(getDayOfYear(e),3)},d(e){return e.getDay()},dd(e,t){return this.dddd(e,t).slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return getWeekOfYear(e)},ww(e){return pad$2(getWeekOfYear(e))},H(e){return e.getHours()},HH(e){return pad$2(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return pad$2(this.h(e))},m(e){return e.getMinutes()},mm(e){return pad$2(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return pad$2(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return pad$2(Math.floor(e.getMilliseconds()/10))},SSS(e){return pad$2(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,t,n,r){const i=r==null?e.getTimezoneOffset():r;return formatTimezone(i,":")},ZZ(e,t,n,r){const i=r==null?e.getTimezoneOffset():r;return formatTimezone(i)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function formatDate(e,t,n,r,i){if(e!==0&&!e||e===1/0||e===-1/0)return;const o=new Date(e);if(isNaN(o))return;t===void 0&&(t=defaultMask);const l=getDateLocale(n,Plugin.props);return t.replace(token,(f,d)=>f in formatter?formatter[f](o,l,r,i):d===void 0?f:d.split("\\]").join("]"))}function clone(e){return isDate(e)===!0?new Date(e.getTime()):e}var date={isValid,extractDate,buildDate,getDayOfWeek,getWeekOfYear,isBetweenDates,addToDate,subtractFromDate,adjustDate,startOfDate,endOfDate,getMaxDate,getMinDate,getDateDiff,getDayOfYear,inferDateFormat,getDateBetween,isSameDate,daysInMonth,formatDate,clone};function useQuasar(){return inject(quasarKey)}function removeTags(e){return e===null||e===""?!1:(e=e.toString(),e=e.replaceAll("&nbsp;",""),e.replace(/(<([^>]+)>)/ig,""))}const mkTStamp=()=>{const e=Date.now();return date.formatDate(e,"MMDDYY-HH:mm:ss")},langVoices={"Eng-US":{flagName:"fi fi-us",langName:"en",speechLang:"en-US",longName:"English",voice:"Google English US"},"Eng-UK-Fem":{flagName:"fi fi-gb",langName:"en",speechLang:"en-GB",longName:"English",voice:"Google UK English Female"},espa\u00F1ol:{flagName:"fi fi-mx",langName:"es",speechLang:"es-MX",longName:"espa\xF1ol",voice:"Google espa\xF1ol"},fran\u00E7ais:{flagName:"fi fi-fr",langName:"fr",speechLang:"fr-FR",longName:"fran\xE7ais",voice:"Google fran\xE7ais"},Deutsch:{flagName:"fi fi-de",langName:"de",speechLang:"de-DE",longName:"Deutsch",voice:"Google Deutsch"},italiano:{flagName:"fi fi-it",langName:"it",speechLang:"it-IT",longName:"italiano",voice:"Google italiano"},"portugu\xEAs do Brasil":{flagName:"fi fi-br",langName:"pt",speechLang:"pt-BR",longName:"portugu\xEAs",voice:"Google portugu\xEAs do Brasil"},Kiswahili:{flagName:"fi fi-ke",langName:"sw",speechLang:"en-GB",longName:"Kiswahili",voice:"Google UK English Female"},\u0440\u0443\u0441\u0441\u043A\u0438\u0439:{flagName:"fi fi-ru",langName:"ru",speechLang:"ru-RU",longName:"\u0440\u0443\u0441\u0441\u043A\u0438\u0439",voice:"Google \u0440\u0443\u0441\u0441\u043A\u0438\u0439"},\u0E44\u0E17\u0E22:{flagName:"fi fi-th",langName:"th",speechLang:"th-TH",longName:"\u0E44\u0E17\u0E22:",voice:"Google Bahasa Indonesia"},"\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09":{flagName:"fi fi-cn",langName:"zh",speechLang:"zh-CN",longName:"\u4E2D\u6587",voice:"Google \u666E\u901A\u8BDD\uFF08\u4E2D\u56FD\u5927\u9646\uFF09"},"\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09":{flagName:"fi fi-hk",langName:"zh",speechLang:"zh-HK",longName:"\u4E2D\u6587",voice:"Google \u7CA4\u8A9E\uFF08\u9999\u6E2F\uFF09"},"\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09":{flagName:"fi fi-tw",langName:"zh",speechLang:"zh-TW",longName:"\u4E2D\u6587",voice:"Google \u570B\u8A9E\uFF08\u81FA\u7063\uFF09"},\uD55C\uAD6D\uC758:{flagName:"fi fi-kr",langName:"ko",speechLang:"ko-KR",longName:"\uD55C\uAD6D\uC758",voice:"Google \uD55C\uAD6D\uC758"},\u65E5\u672C\u8A9E:{flagName:"fi fi-jp",langName:"ja",longName:"\u65E5\u672C\u8A9E",voice:"Google \u65E5\u672C\u8A9E"},"Bahasa Indonesia":{flagName:"fi fi-id",langName:"id",longName:"Bahasa Indonesia",voice:"Google Bahasa Indonesia"}},LOGO_URL="https://readingedgeca.s3.us-west-1.amazonaws.com/static/pub/img/readingedge_nowords.png",DEMO_CK="865023375971532",DEMO_AID="5847202549970032",assignmentTemplate={ck:null,id:null,title:"New Assignment",goal:150,points:0,pgIdx:null,pages:[],created:null,updated:null,coverUrl:LOGO_URL,scores:{}},pageTemplate={ck:null,aid:null,langVoiceKey:"Eng-UK-Fem",currentLangLinks:ref([]),isCustom:!1,pageid:null,pageTitle:"Template",guideWords:"",imgIdx:0,imgs:[{url:LOGO_URL,cap:"Welcome to Reading Edge!"}],imgFit:"scale-down",pctReplace:15,pageText:"This is the paragraph text to be reconstructed.  To use your own text just edit this section directly, then toggle the Random/Custom switch for this page and save.  Otherwise this text will be overwritten with whatever Wikipedia returns, whether it be a specific page that you have configured, or a random page guided by guide-words.",pageFontSize:14,canonicalUrl:LOGO_URL,mapCoords:"36.11,-115.17"},preferencesTemplate={resLimit:50,imgLimit:20,pageFontSize:14,textColor:"#CCE6FF",secondaryColor:"#666666",accentColor:"#7f7f7f",positiveColor:"#2E8A57",langVoiceKey:"Eng-UK-Fem",langVoices:Object.keys(langVoices)},assignmentStatusTemplate={course:"Course Title",assignmentTitle:"Assignment Title",pageTitle:"Page Title",points:0,goal:27,pgIdx:0,pgTot:0,imgIdx:0,imgTot:0,imgFit:"",guideWords:"---",mapCoords:"36.11,-115.17",pageid:"WP",aid:"-",ck:"-",lang:"English",pctReplace:5},useREStore=defineStore("reStore",{state:()=>({role:ref(null),mode:ref(null),qqq:useQuasar(),courses:ref({ck:null,aid:null,pgIdx:0,imgIdx:0,pageid:null,trigger:0,selectedRHSTab:"coursesTab"}),page:JSON.parse(JSON.stringify(pageTemplate)),langVoices:JSON.parse(JSON.stringify(langVoices)),preferences:JSON.parse(JSON.stringify(preferencesTemplate)),assignmentStatus:JSON.parse(JSON.stringify(assignmentStatusTemplate)),wiki:ref(wiki),router:useRouter(),speech:ref(null),authenticated:ref(!1),userSnapshot:ref(null),speechInitialized:ref(!1),myhistory:ref([])}),getters:{getPoints(e){return e.assignmentStatus.points},ck(e){return e.courses.ck},aid(e){return e.courses.aid},demoCK(e){return DEMO_CK},demoAID(e){return DEMO_AID},pageTemplate(e){return pageTemplate},assignmentTemplate(e){return assignmentTemplate},logoURL(e){return LOGO_URL},courseTitle(e){if(e.courses.ck)e.courses[e.courses.ck].title;else return"No Course Loaded"}},actions:{clearHistory(){for(;this.myhistory.length;)this.myhistory.pop()},loadHistory(e){const t=this.myhistory[e];console.log(t.langVoiceKey),this.loadPageId(t.pageid,t.langVoiceKey),this.router.replace("/teacher/editor")},shareToDemo(e,t){console.log("shareToDemo ",e,t);try{console.log("shareToDemo2 ",e,t);const n=this.courses[DEMO_CK].assignments[t].pages;console.log(n),this.notify("Assignment already belongs to Demo Course",n)}catch(n){console.log("shareToDemo3 ",e,t),console.log(n),console.log("shareToDemo4 ",e,t),console.log("ck, aid",e,t);const r=JSON.parse(JSON.stringify(this.courses[e].assignments[t]));this.courses[DEMO_CK].assignments[t]=r,this.notify("Assignment copied to Demo course"),this.courses[DEMO_CK].assignments[t].updated=mkTStamp();const i=`courses/${DEMO_CK}`;update(ref$1(dbRT,i),this.courses[DEMO_CK]),this.notify("Demo copy saved to database")}},mkId(){return Math.random().toString().slice(2,20)},setPref(e,t){console.log("setPref ",e,t),this.preferences[e]=t},setPageStatus(e,t){console.log("setPageStatus ",e,t);const n=this.courses[this.courses.ck].pgIdx;this.courses[this.courses.ck].assignments[this.courses.aid].pages[n][e]=t},setAssignmentStatus(e,t){console.log("setAssignmentStatus ",e,t),this.courses[this.courses.ck].assignments[this.courses.aid][e]=t},setCourseStatus(e,t){console.log("setCourseStatus ",e,t),this.courses[this.courses.ck][e]=t},setStatus(e,t){this.assignmentStatus[e]=t},createUser(e,t){console.log("createUser",t.currentUser.uid);const n=t.currentUser.email.replace("@","_at_").replace(".","_dot_"),r={uid:t.currentUser.uid,email:t.currentUser.email,emailKey:n,name:t.currentUser.displayName?t.currentUser.displayName:t.currentUser.email,picture:t.currentUser.photoURL,points:0},i={uid:t.currentUser.uid,type:"free",renewalDate:null,verified:t.currentUser.emailVerified,network:e,ip:"0.0.0.0"},o=JSON.parse(JSON.stringify(preferencesTemplate));this.userSnapshot={account:i,profile:r,teaching:{},taking:{},preferences:o},this.loadPreferencesFromSnapshot(),axios("https://jsonip.com/").then(l=>{console.log(l.data.ip),i.ip=l.data.ip,set$1(ref$1(dbRT,`users/${n}`),this.userSnapshot),console.log("okay done"),this.role="teacher",this.mode="editor",this.router.push("/teacher")})},loadPreferencesFromSnapshot(){this.setPref("resLimit",this.userSnapshot.preferences.resLimit),this.setPref("imgLimit",this.userSnapshot.preferences.imgLimit),this.setPref("pageFontSize",this.userSnapshot.preferences.pageFontSize),this.setPref("textColor",this.userSnapshot.preferences.textColor),this.setPref("secondaryColor",this.userSnapshot.preferences.secondaryColor),this.setPref("accentColor",this.userSnapshot.preferences.accentColor),this.setPref("langVoice",this.userSnapshot.preferences.langVoiceKey),this.setPref("langVoices",this.userSnapshot.preferences.langVoices)},async checkUser(e){console.log(e,dbRT,auth,d3);const t=auth.currentUser.email.replace("@","_at_").replace(".","_dot_");console.log("emailKey: ",t);const n=ref$1(getDatabase()),r=`users/${t}`;await get(child(n,r)).then(i=>{i.exists()?(console.log("Found user",i.key),this.userSnapshot=i.val(),this.userSnapshot.teaching||(this.userSnapshot.teaching={}),this.userSnapshot.taking||(this.userSnapshot.taking={}),this.role="teacher",this.mode="editor",this.loadCourses(t),this.loadPreferencesFromSnapshot()):(console.log("User not found"),this.createUser(e,auth))}).catch(i=>{console.log("Error at checkUser: ",i)})},logout(){this.authenticated=!1,this.router.push("/"),this.courses=ref({ck:null,aid:null,pgIdx:null,imgIdx:0,pageid:null}),this.page=JSON.parse(JSON.stringify(pageTemplate)),this.preferences=JSON.parse(JSON.stringify(preferencesTemplate)),this.assignmentStatus=JSON.parse(JSON.stringify(assignmentStatusTemplate)),this.userSnapshot={},this.role=null},async initSpeech(){this.speech||(this.speech=new default_1,await this.speech.init({voice:"Google UK English Female"}).then(e=>{console.log(e.voices)}),this.speechInitialized=!0)},async speak(){console.log("speak"),this.speechInitialized||this.initSpeech(),this.speech.setLanguage(langVoices[this.preferences.langVoiceKey].langName),console.log("speak setVoice ",langVoices[this.page.langVoiceKey].voice),this.speech.setVoice(langVoices[this.page.langVoiceKey].voice),await this.speech.speak({text:removeTags(select("#slideTextDiv").html()),queue:!1}).then(()=>{console.log("Success!")}).catch(e=>{console.error("Error in speech",e)})},updatePage(){const e=this.courses.ck,t=this.courses.aid,n=this.courses.pgIdx;this.page.pageText=removeTags(select("#slideTextDiv").html()),this.page.imgs[this.page.imgIdx].cap=removeTags(select("#slideCaptionDiv").html()),this.courses[e].assignments[t].pages[n]=JSON.parse(JSON.stringify(this.page)),this.courses.trigger+=1,this.notify(`Page ${n} updated locally, not database`)},appendPage(){try{this.page.pageText=removeTags(select("#slideTextDiv").html()),this.page.imgs[this.page.imgIdx].cap=removeTags(select("#slideCaptionDiv").html())}catch(n){console.log(n)}this.page.ck=this.courses.ck,this.page.aid=this.courses.aid;const e=JSON.parse(JSON.stringify(this.page));this.courses[this.courses.ck].assignments[this.courses.aid].pages.push(e),this.courses.pgIdx+=1,this.courses.trigger+=1;const t=this.courses[this.courses.ck].assignments[this.courses.aid].pages.length;this.notify(`Page appended, new length = ${t}`)},async getPage2(e,t,n){const r=JSON.parse(JSON.stringify(pageTemplate));return r.pageid=t,r.langVoiceKey=n,r.pageTitle=`${t}`,r},async getPage(e,t,n){for(selectAll(".assignment").classed("hidden",!1),selectAll(".coverslide").classed("hidden",!0);this.page.imgs.length>0;)this.page.imgs.pop();console.log("getPage ",n,langVoices[n]);const r=await this.wiki.setLang(langVoices[n].langName);console.log("res (promise)",r);let i,o,l;if(t!==null&&t!=="undefined")o=await this.wiki.page(t),l=t,i=await o.summary(),console.log("FULLPAGE",o),console.log("SUMMARY",i);else if(e&&e.length>0){const h=e.split(",");for(var f in parseInt(Math.random()*Math.random()))console.log("dummy ",f);const g=parseInt(Math.random()*h.length);console.log("searchTerm: ",h[g]);const p=await this.wiki.search(h[g],{suggestion:!1,limit:this.preferences.resLimit}),b=parseInt(Math.random()*p.results.length);l=p.results[b].pageid,o=await this.wiki.page(l),i=await o.summary()}else i=await this.wiki.random(),l=i.pageid,o=await this.wiki.page(l);await o.media().then(h=>{for(const g in h.items)g.type==="image"&&g.showInGallery===!0&&this.page.imgs.push({url:g.srcset[0].src,cap:g.caption.text});this.courses.trigger+=1});try{this.page.currentLangLinks=await o.langLinks()}catch{console.log("Failed to get langLinks")}await o.coordinates().then(h=>{console.log("resolved coords ",h),h!==null?(this.setStatus("mapCoords",`[${h.lat}, ${h.lon}]`),this.page.mapCoords=`${h.lat}, ${h.lon}`):(this.setStatus("mapCoords","-999, -999"),this.page.mapCoords="-999, -999"),this.courses.trigger+=1});try{await o.images({limit:this.preferences.imgLimit}).then(h=>{for(const g in h)h[0].title.indexOf(".svg")>1?console.log("SVG ",h[0].title):h[0].title.indexOf("airytale")>0?console.log("Fairytale warning ",h[0].title):h[0].title.indexOf("kguitar")>1?console.log("kguitar ",h[0].title):h[0].title.indexOf("Blank.png")>-1?console.log("Blank.png ",h[0].title):h[0].title.indexOf(".oga")>1?console.log("OGA ",h[0].title):h[0].title.indexOf(".webm")>1?console.log("WEBM ",h[0].title):h[0].title.indexOf(".ogg")>1?console.log("OGG ",h[0].title):h[0].title.indexOf(".tif")>1?console.log("TIF ",h[0].title):h[0].title.indexOf(".mid")>1?console.log("MID ",h[0].title):h[0].title.indexOf(".ogv")>1?console.log("OGV ",h[0].title):h[0].title.indexOf("Icon")>1?console.log("ICON ",h[0].title):h[0].title.indexOf("icon")>1?console.log("icon ",h[0].title):h[0].title.indexOf("podagraria1")>0?console.log("podagraria1 ",h[0].title):h[0].title.indexOf("Bluetank")>1||h[0].title.indexOf("rab Nebula.jpg")>0?console.log("BLUETANK ",h[0].title):h[0].title.indexOf("viacionavion")>1||h[0].title.indexOf("input-microphone")>1?console.log("viacionavion",h[0].title):h[0].title.indexOf("clouds in fair weather")>0||h[0].title.indexOf("in pacifica 1")>0?console.log("clouds in fair weather",h[0].title):this.page.imgs.push({url:h[0].url,cap:h[0].title}),h.push(h.shift())})}catch{console.log("error retrieving fp.images ",o)}this.page.imgs.length===0&&this.page.imgs.push({url:LOGO_URL,cap:"No images available"}),this.page.langVoiceKey=n,this.page.isCustom=!1,this.page.pageid=l,this.page.pageTitle=i.title,this.page.guideWords=e;try{console.log("getPage setting imgIdx ..."),this.page.imgIdx=this.courses[this.courses.ck].assignments[this.courses.aid].pages[this.courses.pgIdx].imgIdx,this.courses.imgIdx=this.page.imgIdx,console.log("getPage imgIdx: ",this.page.imgIdx)}catch{console.log("."),this.page.imgIdx=0,this.courses.imgIdx=0}this.page.imgFit="scale-down",this.page.pctReplace=15,this.page.pageText=i.extract,this.page.canonicalUrl=o.canonicalurl;let d=!1;return this.myhistory.forEach(h=>{h.canonicalUrl===this.page.canonicalUrl&&(d=!0)}),d||this.myhistory.unshift(JSON.parse(JSON.stringify(this.page))),JSON.parse(JSON.stringify(this.page))},async loadPageId(e,t){console.log("re-store loadPageId: ",e,t),await this.getPage("",e,t).then(n=>(console.log("getPage returned rval ",n),this.courses.trigger+=1,this.router.push("/teacher/editor"),e))},async reloadPage(){if(this.page.isCustom)console.log("restore reloadPage calling nextPage b/c isCustom"),this.nextPage();else{let e=null;this.page.pageid&&(e=this.page.pageid),await this.getPage(this.page.guideWords,e,this.page.langVoiceKey)}},loadImgId(e){this.page.imgs.unshift({url:this.userSnapshot.images[e].url,cap:this.userSnapshot.images[e].cap}),this.page.imgIdx=0,this.courses.imgIdx=0},removeBookmark(e){const t=`users/${this.userSnapshot.profile.emailKey}/bookmarks/${e}`;remove(ref$1(dbRT,t),this.userSnapshot.bookmarks[e]),delete this.userSnapshot.bookmarks[e],this.notify("Bookmark deleted")},removeImage(e){console.log("removeImage: ",e);const t=`users/${this.userSnapshot.profile.emailKey}/images/${e}`;remove(ref$1(dbRT,t),this.userSnapshot.images[e]),delete this.userSnapshot.images[e],this.notify("Image deleted")},saveImage(e,t){console.log("saveImage ",t),this.userSnapshot.images||(this.userSnapshot.images={});const n=this.mkId();t.source=t.url,t.name=t.url.substring(this.page.imgs[this.courses.imgIdx].url.lastIndexOf("/")+1),t.desc=t.name,this.userSnapshot.images[n]=t;const r=`users/${this.userSnapshot.profile.emailKey}/images`;update(ref$1(dbRT,r),this.userSnapshot.images),this.notify("Image saved")},saveBookmark(){this.userSnapshot.bookmarks||(this.userSnapshot.bookmarks={}),this.page.imgIdx||(this.pageimgIdx=0),this.userSnapshot.bookmarks[this.page.pageTitle]=JSON.parse(JSON.stringify(this.page));const e=`users/${this.userSnapshot.profile.emailKey}/bookmarks`;update(ref$1(dbRT,e),this.userSnapshot.bookmarks),this.notify("Bookmark saved")},newCourse(){const e={},t=mkTStamp();e.title=`C-${t}`,e.created=t,e.updated=t,e.courseKey=Math.random().toString().slice(2,20),e.enrollment={},e.assignments={},e.owner=this.userSnapshot.profile.emailKey,this.courses||(this.courses={}),this.userSnapshot.teaching||(this.userSnapshot.teaching={}),this.userSnapshot.teaching[e.courseKey]={ck:e.courseKey};const n=`users/${this.userSnapshot.profile.emailKey}/teaching/${e.courseKey}`;update(ref$1(dbRT,n),this.userSnapshot.teaching[e.courseKey]),this.courses[e.courseKey]=e;const r=`courses/${e.courseKey}`;return update(ref$1(dbRT,r),this.courses[e.courseKey]),{courseKey:e.courseKey}},newAssignment(e){console.log("newAssignment: ",e);const t=mkTStamp(),n=Math.random().toString().slice(2,20),r=JSON.parse(JSON.stringify(assignmentTemplate));r.id=n,r.ck=e,r.pages.push(JSON.parse(JSON.stringify(pageTemplate))),r.created=t,r.updated=t,console.log("newAssignment ",r),this.courses[e].assignments||(this.courses[e].assignments={}),this.courses[e].assignments[r.id]=r;const i=`courses/${e}/assignments/${r.id}`;update(ref$1(dbRT,i),r)},newPage(){const e=JSON.parse(JSON.stringify(pageTemplate));e.aid=this.courses.aid,e.ck=this.courses.ck,e.langVoiceKey=this.preferences.langVoiceKey,console.log("newPage ",e.langVoiceKey),this.courses[e.ck].assignments[e.aid].pages.push(e),this.courses.imgIdx=0,this.courses.trigger+=1},startAssignment(){this.mode="editor";const e=this.courses.ck,t=this.courses.aid;this.courses[e].assignments[t].pages.length>0?this.page=JSON.parse(JSON.stringify(this.courses[e].assignments[t].pages[0])):this.notify("Please add a Page first (buttons @top-right sidebar)"),!this.page.isCustom&&!this.page.guideWords.length&&console.log("NEED load random page"),this.courses.pgIdx=0,this.courses.imgIdx=this.page.imgIdx,selectAll(".assignment").classed("hidden",!1),selectAll(".coverslide").classed("hidden",!0),this.courses.trigger+=1},loadCover(){console.log("loadCover"),this.page=JSON.parse(JSON.stringify(pageTemplate));const e=this.courses.ck,t=this.courses.aid,n=this.courses[e].assignments[t];this.page.imgs[0].url=n.coverUrl,this.page.imgs[0].cap=n.title,this.page.pageTitle=n.title,selectAll(".assignment").classed("hidden",!0),selectAll(".coverslide").classed("hidden",!1),this.courses.imgIdx=0,this.courses.trigger+=1},processSnapshotAsStudentCourse(e){const t=e;return t.children[0].children||(t.children[0].children=[]),console.log("processSnapshotAsStudentCourse ",t),t},async loadCourses(e){console.log("loadCourses ",e);const t=ref$1(getDatabase());if(this.role==="teacher"){this.userSnapshot.teaching||(this.userSnapshot.teaching={});for(const[n,r]of Object.entries(this.userSnapshot.teaching)){console.log("k, v ",n,r);const i=`courses/${n}`;await get(child(t,i)).then(o=>{if(o.exists()){const l=o.val();l.enrollment||(l.enrollment={}),this.courses[n]=l}else console.log("failed to load course",n,r)})}}else if(this.role==="student"){this.userSnapshot.taking||(this.userSnapshot.taking={});for(const[n,r]of Object.entries(this.userSnapshot.taking)){console.log("k, v ",n,r);const i=`courses/${n}`;await get(child(t,i)).then(o=>{if(o.exists()){const l=this.processSnapshotAsStudentCourse(o.val());this.role||(this.courses[n]=l)}else console.log("failed to load course",n,r)})}}else console.log("No courses loaded b/c no role");console.log("loadCourses pushing /teacher"),this.router.push("/teacher")},async loadDemo(){console.log("reStore loadDemo");const e=ref$1(getDatabase()),t=`courses/${DEMO_CK}`;await get(child(e,t)).then(n=>{if(n.exists()){const r=n.val();return r.enrollment||(r.enrollment={}),this.courses[DEMO_CK]=r,this.courses.ck=DEMO_CK,this.courses.aid=DEMO_AID,1}else console.log("failed to load course",DEMO_CK)})},async enroll(e){console.log("reStore.getOrCreateEnrollment: ",e);const t=this.userSnapshot.profile.emailKey,n={name:this.userSnapshot.profile.name,emailKey:t};this.courses||(this.courses={});const r=ref$1(getDatabase()),i=`courses/${e}`;await get(child(r,i)).then(o=>{if(o.exists()){console.log("Got course:",o.key),this.courses[e]=o.val(),this.courses[e].enrollment||(this.courses[e].enrollment={}),this.courses[e].enrollment[t]=n;const l=`courses/${e}/enrollment/${t}`;update(ref$1(dbRT,l),n);const f={ck:e};this.userSnapshot.taking||(this.userSnapshot.taking={}),this.userSnapshot.taking[e]=f;const d=`users/${t}/taking/${e}`;update(ref$1(dbRT,d),f)}else console.log("Course not found: ",e)}).catch(o=>{console.log(o)})},deleteCourse(e){if(e===DEMO_CK){this.notify("Cannot delete DEMO (safety)");return}if(this.userSnapshot.teaching[e]){const n=`users/${this.userSnapshot.profile.emailKey}/teaching/${e}`;remove(ref$1(dbRT,n),this.userSnapshot.teaching[e]),delete this.userSnapshot.teaching[e]}if(this.userSnapshot.taking[e]){const n=`users/${this.userSnapshot.profile.emailKey}/taking/${e}`;remove(ref$1(dbRT,n),this.userSnapshot.taking[e]),delete this.userSnapshot.taking[e]}const t=`courses/${e}`;remove(ref$1(dbRT,t),this.courses[e]),delete this.courses[e],console.log("course deleted"),this.notify("course deleted")},deleteAssignment(e,t){e===DEMO_CK&&this.notify("Cannot delete Assignments from DEMO course (safety)"),console.log("re-store deleteAssignment ",e,t);const n=`courses/${e}/assignments/${t}`;remove(ref$1(dbRT,n)),delete this.courses[e].assignments[t],console.log("assignment deleted"),this.notify("assignment deleted")},loadAssignment(e,t){this.courses.ck=e,this.courses.aid=t,console.log("re-store loadAssignment ",e,t),this.courses[e].assignments[t].pages||(this.courses[e].assignments[t].pages=[]),this.courses[e].assignments[t].pages.length>0?(this.page=JSON.parse(JSON.stringify(this.courses[e].assignments[t].pages[0])),this.page.isCustom||console.log("Stepper should have called step1 in these 3 cases"),this.courses.pgIdx=0,this.courses.imgIdx=this.page.imgIdx):(this.page=JSON.parse(JSON.stringify(pageTemplate)),this.courses.pgIdx=null,this.courses.imgIdx=null),this.setStatus("goal",this.courses[e].assignments[t].goal),this.setStatus("points",0),console.log("imgIdx ",this.courses.imgIdx,this.page.imgIdx),this.mode==="assignment"&&this.loadCover(),this.courses.trigger+=1},setCourseTitle(e,t){console.log("ck, title: ",e,t),this.courses[e].title=t,this.courses[e].updated=mkTStamp();const n=`courses/${e}`;update(ref$1(dbRT,n),this.courses[e])},setAssignmentTitle(e,t,n){console.log("ck, aid, title: ",e,t,n),this.courses[e].assignments[t].title=n,this.courses[e].assignments[t].updated=mkTStamp(),this.notify("Title set locally, save Assignment to commit change to database.")},setCover(e){const t=this.courses.ck,n=this.courses.aid;this.courses[t].assignments[n].coverUrl=e.url,this.courses[t].assignments[n].updated=mkTStamp(),this.courses.trigger+=1,this.notify("Cover image set locally, save Assignment to commit change to database.")},saveCurrentAssignment(){const e=this.courses.ck,t=this.courses.aid;this.courses[e].assignments[t].updated=mkTStamp(),console.log(this.courses[e].assignments[t]);const n=`courses/${e}`;update(ref$1(dbRT,n),this.courses[e]),this.notify("Current assignment saved to database")},nextPage(){console.log("re-store nextPage ",this.courses.pgIdx),selectAll(".assignment").classed("hidden",!1),selectAll(".coverslide").classed("hidden",!0);const e=this.courses.ck,t=this.courses.aid;if(this.courses.pgIdx+=1,this.courses.pgIdx>this.courses[e].assignments[t].pages.length-1?(console.log("setting pgIdx to 0 ",this.courses.pgIdx,this.courses[e].assignments[t].pages.length),this.courses.pgIdx=0):console.log(this.courses.pgIdx,this.courses[e].assignments[t].pages.length,this.courses.pgIdx>this.courses[e].assignments[t].pages.length),this.setAssignmentStatus("pgIdx",this.courses.pgIdx),console.log("pgIdx ",this.courses.pgIdx),this.courses[e].assignments[t].pages[this.courses.pgIdx].isCustom===!0)console.log("nextPage isCustom ",!0),this.page=this.courses[e].assignments[t].pages[this.courses.pgIdx],this.courses.imgIdx=this.page.imgIdx,this.courses.trigger+=1;else{console.log("nextPage isCustom ",!1),console.log("re-store.nextPage calling loadPageId ");try{const n=this.courses[e].assignments[t].pages[this.courses.pgIdx].pageid,r=this.courses[e].assignments[t].pages[this.courses.pgIdx].langVoiceKey;console.log("pageid ",n),console.log("langVoiceKey ",r);const i=this.loadPageId(n,r);console.log("rval ",i)}catch(n){console.log(n)}}},unloadCurrent(){console.log("re-store unloadCurrent"),this.page=JSON.parse(JSON.stringify(pageTemplate)),this.courses.ck=null,this.courses.aid=null,this.courses.pageid=null,this.courses.pgIdx=0,this.courses.imgIdx=0,this.courses.trigger+=1,console.log("re-store unloadCurrent FINISHED")},notify(e){this.qqq.notify({message:e,color:"info",textColor:"gold",icon:"star",position:"bottom",html:!0})},loadCourse(e){this.unloadCurrent(),this.page=JSON.parse(JSON.stringify(pageTemplate)),this.courses.pgIdx=null,this.courses.imgIdx=null,this.courses.ck=e,this.courses.aid=null,this.setStatus("ck",e),this.courses.trigger+=1,console.log("Course Loaded: ",this.courses.ck)},autoAwesomeCB(e,t){console.log("autoAwesomeCB ",t);const n=t.split(","),r=200,i=r/n.length;let o=parseInt(i/6);o<1&&(o=1);const l=JSON.parse(JSON.stringify(this.assignmentTemplate));l.ck=e,l.id=this.mkId(),l.pgIdx=0,l.coverUrl=null,l.title=n[0],l.goal=r,n.forEach(async f=>{const d=this.langVoices[this.preferences.langVoiceKey];this.wiki.setLang(d.langName);const h=await this.wiki.search(f,{suggestion:!1,limit:o});console.log("res.results.length: ",h.results.length),console.log(h.results),h.results.forEach(async g=>{console.log(g.pageid),await this.getPage2(null,g.pageid,this.preferences.langVoiceKey).then(async p=>{console.log("getPage returned rval ",p),p.pageTitle=g.title;const b=await this.wiki.page(g.pageid);p.canonicalUrl=b.canonicalurl;const v=await b.summary();if(v.type!=="disambiguation"){if(await b.coordinates().then($=>{console.log("resolved coords ",$),$!==null?p.mapCoords=`${$.lat}, ${$.lon}`:p.mapCoords="-999, -999"}),await b.images({limit:this.preferences.imgLimit}).then($=>{for(const S in $)console.log(S),$[0].title.indexOf(".svg")>1?console.log("SVG ",$[0].title):$[0].title.indexOf("airytale")>0?console.log("Fairytale warning ",$[0].title):$[0].title.indexOf("kguitar")>1?console.log("kguitar ",$[0].title):$[0].title.indexOf("Blank.png")>-1?console.log("Blank.png ",$[0].title):$[0].title.indexOf(".oga")>1?console.log("OGA ",$[0].title):$[0].title.indexOf(".webm")>1?console.log("WEBM ",$[0].title):$[0].title.indexOf(".ogg")>1?console.log("OGG ",$[0].title):$[0].title.indexOf(".tif")>1?console.log("TIF ",$[0].title):$[0].title.indexOf(".mid")>1?console.log("MID ",$[0].title):$[0].title.indexOf(".ogv")>1?console.log("OGV ",$[0].title):$[0].title.indexOf("Icon")>1?console.log("ICON ",$[0].title):$[0].title.indexOf("icon")>1?console.log("icon ",$[0].title):$[0].title.indexOf("podagraria1")>0?console.log("podagraria1 ",$[0].title):$[0].title.indexOf("Bluetank")>1||$[0].title.indexOf("rab Nebula.jpg")>0?console.log("BLUETANK ",$[0].title):$[0].title.indexOf("viacionavion")>1||$[0].title.indexOf("input-microphone")>1?console.log("viacionavion",$[0].title):$[0].title.indexOf("clouds in fair weather")>0||$[0].title.indexOf("in pacifica 1")>0?console.log("clouds in fair weather",$[0].title):p.imgs.push({url:$[0].url,cap:$[0].title}),$.push($.shift());p.imgs.length>1&&p.imgs.shift()}),p.pageText=v.extract,p.currentLangLinks=[],p.imgIdx=0,!l.coverUrl)try{l.coverUrl=l.pages[0].imgs[0].url}catch($){console.log("ERROR setting coverUrl ",$)}l.pages.push(p),console.log("a.pages.length ",l.pages.length)}else console.log("SKIPPED ",v.type)})})}),this.courses[this.courses.ck].assignments||(this.courses[this.courses.ck].assignments={}),this.courses[this.courses.ck].assignments[l.id]=l,this.courses.trigger+=1}}});export{__splitDate as _,toGregorian as a,between as b,date as d,formatDate as f,getDateDiff as g,jalaaliMonthLength as j,normalizeToInterval as n,pad$2 as p,selectAll as s,toJalaali as t,useREStore as u};
