import{Q as f,a as g}from"./use-portal.3323630c.js";import{Q as A}from"./QInput.8773c9ce.js";import{_ as Q,r as v,o as u,c as y,w as o,a as t,aL as P,K as S,Q as h,e as l,af as i,ak as x,ag as m,ai as B,ah as T,aj as p,a1 as C}from"./index.79af6c58.js";import{a as K,r as V,d as $,Q as q,C as b}from"./ClosePopup.edf55b4d.js";import{Q as d}from"./QTooltip.6bbc5421.js";import{Q as E}from"./QImg.083416c6.js";import{Q as N}from"./QPage.13ea1f3b.js";import{u as D}from"./re-store.7a033c6e.js";import"./use-dark.69021e55.js";import"./use-key-composition.a5e9fff9.js";import"./selection.dafaa16d.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";function F(s){const e=document.createElement("textarea");e.value=s,e.contentEditable="true",e.style.position="fixed";const _=()=>{};K(_),document.body.appendChild(e),e.focus(),e.select();const r=document.execCommand("copy");return e.remove(),V(_),r}function I(s){return navigator.clipboard!==void 0?navigator.clipboard.writeText(s):new Promise((e,_)=>{const r=F(s);r?e(!0):_(r)})}const U=D(),j={components:{},setup(){return{reStore:U,courseKey:v(null),courseTitle:v(null),prompt:v(!1)}},mounted(){console.log("TeacherPage mounted ",this.reStore.courses),this.reStore.unloadCurrent()},methods:{copyCK(s){I(s).then(()=>{console.log("ck copied to clipboard",s)}).catch(e=>{console.log(e)})},newCourseCB(){console.log("courseCB"),this.reStore.newCourse()},newAssignmentCB(s){console.log("assignmentCB: ",s),this.reStore.newAssignment(s)},editAssignmentCB(s,e){console.log("editAssignmentCB: ",s,e),this.reStore.loadAssignment(s,e),this.reStore.router.push("/teacher/editor")},changeTitleCB(){console.log("TeacherPage.titleCB",this.courseKey,this.courseTitle),this.reStore.setCourseTitle(this.courseKey,this.courseTitle)},deleteCourseCB(s){this.reStore.deleteCourse(s)},deleteAssignmentCB(s,e){this.reStore.deleteAssignment(s,e)},takeAssignmentCB(s,e){console.log("TeacherPage.takeAssignment ",s,e),this.reStore.loadAssignment(s,e),this.reStore.router.push("/teacher/assignment")}}},H=l("div",{class:"text-h6"},"Change course title",-1),L={class:"flex-center q-mt-xl q-mb-xl row q-gutter-md"},z=l("div",{class:"text-h6"},"My Teacher Page",-1),M=l("br",null,null,-1),R=l("br",null,null,-1),G=l("br",null,null,-1),J={class:"flex flex-row justify-center"},O={class:"absolute-top text-center"},W={class:"text-h6"},X={class:"text-subtitle2"},Y={key:0},Z={key:1},ee={style:{"font-size":"22pt",width:"100%"},class:"text-center absolute-bottom"},te=l("br",null,null,-1),oe={class:"hidden"},se={key:0,class:"flex-center"};function le(s,e,_,r,ne,ie){return u(),y(N,{class:"q-gutter-md"},{default:o(()=>[t(q,{modelValue:r.prompt,"onUpdate:modelValue":e[3]||(e[3]=a=>r.prompt=a),persistent:""},{default:o(()=>[t(f,{style:{"min-width":"350px"}},{default:o(()=>[t(g,null,{default:o(()=>[H]),_:1}),t(g,{class:"q-pt-none"},{default:o(()=>[t(A,{dense:"",modelValue:r.courseTitle,"onUpdate:modelValue":e[0]||(e[0]=a=>r.courseTitle=a),autofocus:"",onKeyup:e[1]||(e[1]=P(a=>{r.prompt=!1,this.changeTitleCB()},["enter"])),onHide:this.dck},null,8,["modelValue","onHide"])]),_:1}),t($,{align:"right",class:"text-white"},{default:o(()=>[S(t(h,{outline:"",label:"Cancel"},null,512),[[b]]),S(t(h,{outline:"",label:"Save",onClick:e[2]||(e[2]=a=>this.changeTitleCB())},null,512),[[b]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l("div",L,[z,l("div",null,[t(h,{icon:"list_alt",onClick:e[4]||(e[4]=a=>this.newCourseCB())},{default:o(()=>[t(d,null,{default:o(()=>[i("Add a course")]),_:1})]),_:1}),this.reStore.authenticated?(u(),y(h,{key:0,onClick:e[5]||(e[5]=a=>this.reStore.router.push("/student")),icon:"switch_account"},{default:o(()=>[t(d,null,{default:o(()=>[i(" Switch to Student role ")]),_:1})]),_:1})):x("",!0)])]),(u(!0),m(T,null,B(this.reStore.userSnapshot.teaching,(a,c)=>(u(),y(f,{flat:"",key:a.ck,style:{opacity:"1.0"}},{default:o(()=>[t(g,{class:"text-center"},{default:o(()=>[i(" Title: "+p(this.reStore.courses[c].title)+" \xA0",1),t(C,{class:"ptr",name:"edit",onClick:n=>{r.prompt=!0,this.courseTitle=this.reStore.courses[c].title,this.courseKey=c}},null,8,["onClick"]),M,i(" Key: "+p(c)+" ",1),t(C,{class:"ptr",name:"content_copy",onClick:n=>this.copyCK(c)},null,8,["onClick"]),l("div",null,[t(h,{icon:"delete",onClick:n=>this.deleteCourseCB(a.ck)},{default:o(()=>[t(d,null,{default:o(()=>[i("Delete Course")]),_:1})]),_:2},1032,["onClick"]),t(h,{icon:"post_add",onClick:n=>this.newAssignmentCB(a.ck)},{default:o(()=>[t(d,null,{default:o(()=>[i("New Assignment")]),_:1})]),_:2},1032,["onClick"]),t(h,{icon:"content_copy",onClick:n=>this.copyCK(c)},{default:o(()=>[t(d,null,{default:o(()=>[i("Copy this course-key to clipboard. Enroll "),R,i("in this course using this course-key from "),G,i("the Student Page.")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1024),l("div",J,[(u(!0),m(T,null,B(this.reStore.courses[c].assignments,(n,w)=>(u(),m("div",{key:n},[t(f,{bordered:"",flat:"",class:"ccard q-mx-sm q-my-md"},{default:o(()=>[t(E,{fit:s.cover,src:n.coverUrl,height:"100%"},{default:o(()=>[l("div",O,[l("div",W,p(n.title.slice(0,18)),1),l("div",X,[n.pages?(u(),m("span",Y,"Pages: "+p(n.pages.length),1)):(u(),m("span",Z,"Pages: None"))])]),l("div",ee,[t(C,{onClick:k=>this.takeAssignmentCB(c,n.id),name:"play_circle",class:"ptr"},{default:o(()=>[t(d,null,{default:o(()=>[i("Take Assignment")]),_:1})]),_:2},1032,["onClick"]),t(C,{onClick:k=>this.editAssignmentCB(c,n.id),name:"edit",class:"ptr on-right"},{default:o(()=>[t(d,null,{default:o(()=>[i("Edit Assignment"),te,i(p(n.id),1)]),_:2},1024)]),_:2},1032,["onClick"]),t(C,{onClick:k=>this.deleteAssignmentCB(c,n.id),name:"delete",class:"ptr on-right"},{default:o(()=>[t(d,null,{default:o(()=>[i("Delete Assignment")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["fit","src"])]),_:2},1024),l("span",oe,p(w),1)]))),128))])]),_:2},1024))),128)),this.reStore.userSnapshot.teaching?(u(),m("div",se)):x("",!0)]),_:1})}var ye=Q(j,[["render",le]]);export{ye as default};
