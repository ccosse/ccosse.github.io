import{g as $e,h as v,i as u,z as Le,aM as Jt,B as Vt,r as p,D as Y,l as Xt,p as De,ax as Zt,j as ot,x as $,q as ea,d as fe,_ as ye,o as k,au as j,a as l,w as m,Q as V,e as d,af as E,ag as q,aK as ta,c as P,av as ae,aL as Te,aJ as ge,al as aa,am as xe,G as _t,P as bt,s as Je,f as G}from"./index.9d2a2dd8.js";import{Q as at}from"./QTooltip.5a1fd5ca.js";import{Q as nt,a as oa,b as na,c as Re,d as la,e as St,f as Ct,g as sa,h as ra}from"./QLayout.2073dc4e.js";import{u as pe,s as ia,a as kt,p as re,t as ua,c as wt,f as da,g as ca,j as Xe,_ as ma,d as xt}from"./re-store.0b15dca1.js";import{a as U,Q as J,i as It,C as Oe,h as Mt,u as va,b as ha,c as ga}from"./ClosePopup.53f7fe83.js";import{a as fa,b as ya,c as Dt,d as Ze,e as pa,u as _a,f as ba,D as Sa,P as Ca}from"./DocumentationComponent.f399fe6c.js";import{Q as ka}from"./QInput.7a04bdf6.js";import{d as Qe,f as Fe,c as wa,e as xa,u as $t,g as Da}from"./use-dark.eef7a185.js";import{Q as lt}from"./QImg.869295b0.js";import"./position-engine.199ba733.js";import"./selection.a7a72443.js";import"./use-portal.ee5620dd.js";import"./firebase.ea708b63.js";import"./use-key-composition.e6b2ab69.js";import"./QCheckbox.4c11d6d8.js";const $a={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},et={xs:2,sm:4,md:8,lg:16,xl:24};var Tt=$e({name:"QSeparator",props:{...Qe,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const o=Le(),b=Fe(e,o.proxy.$q),w=v(()=>e.vertical===!0?"vertical":"horizontal"),C=v(()=>` q-separator--${w.value}`),D=v(()=>e.inset!==!1?`${C.value}-${$a[e.inset]}`:""),s=v(()=>`q-separator${C.value}${D.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(b.value===!0?" q-separator--dark":"")),g=v(()=>{const _={};if(e.size!==void 0&&(_[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const L=e.spaced===!0?`${et.md}px`:e.spaced in et?`${et[e.spaced]}px`:e.spaced,R=e.vertical===!0?["Left","Right"]:["Top","Bottom"];_[`margin${R[0]}`]=_[`margin${R[1]}`]=L}return _});return()=>u("hr",{class:s.value,style:g.value,"aria-orientation":w.value})}});const le=Jt({}),Ta=Object.keys(Vt);var qe=$e({name:"QExpansionItem",props:{...Vt,...wa,...Qe,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...xa,"click","afterShow","afterHide"],setup(e,{slots:o,emit:b}){const{proxy:{$q:w}}=Le(),C=Fe(e,w),D=p(e.modelValue!==null?e.modelValue:e.defaultOpened),s=p(null),g=$t(),{show:_,hide:L,toggle:R}=Da({showing:D});let O,N;const _e=v(()=>`q-expansion-item q-item-type q-expansion-item--${D.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),oe=v(()=>{if(e.contentInsetLevel===void 0)return null;const h=w.lang.rtl===!0?"Right":"Left";return{["padding"+h]:e.contentInsetLevel*56+"px"}}),I=v(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),T=v(()=>{const h={};return Ta.forEach(H=>{h[H]=e[H]}),h}),Pe=v(()=>I.value===!0||e.expandIconToggle!==!0),Ye=v(()=>e.expandedIcon!==void 0&&D.value===!0?e.expandedIcon:e.expandIcon||w.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),A=v(()=>e.disable!==!0&&(I.value===!0||e.expandIconToggle===!0)),f=v(()=>({expanded:D.value===!0,detailsId:e.targetUid,toggle:R,show:_,hide:L})),B=v(()=>{const h=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:w.lang.label[D.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":D.value===!0?"true":"false","aria-controls":g,"aria-label":h}});Y(()=>e.group,h=>{N!==void 0&&N(),h!==void 0&&M()});function Ie(h){I.value!==!0&&R(h),b("click",h)}function ie(h){h.keyCode===13&&ue(h,!0)}function ue(h,H){H!==!0&&s.value!==null&&s.value.focus(),R(h),ea(h)}function be(){b("afterShow")}function de(){b("afterHide")}function M(){O===void 0&&(O=$t()),D.value===!0&&(le[e.group]=O);const h=Y(D,K=>{K===!0?le[e.group]=O:le[e.group]===O&&delete le[e.group]}),H=Y(()=>le[e.group],(K,Ce)=>{Ce===O&&K!==void 0&&K!==O&&L()});N=()=>{h(),H(),le[e.group]===O&&delete le[e.group],N=void 0}}function Ue(){const h={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},H=[u($,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&D.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:Ye.value})];return A.value===!0&&(Object.assign(h,{tabindex:0,...B.value,onClick:ue,onKeyup:ie}),H.unshift(u("div",{ref:s,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),u(Ze,h,()=>H)}function W(){let h;return o.header!==void 0?h=[].concat(o.header(f.value)):(h=[u(Ze,()=>[u(Dt,{lines:e.labelLines},()=>e.label||""),e.caption?u(Dt,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&h[e.switchToggleSide===!0?"push":"unshift"](u(Ze,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>u($,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&h[e.switchToggleSide===!0?"unshift":"push"](Ue()),h}function X(){const h={ref:"item",style:e.headerStyle,class:e.headerClass,dark:C.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return Pe.value===!0&&(h.clickable=!0,h.onClick=Ie,Object.assign(h,I.value===!0?T.value:B.value)),u(ya,h,W)}function ce(){return De(u("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:oe.value,id:g},ot(o.default)),[[Zt,D.value]])}function Se(){const h=[X(),u(fa,{duration:e.duration,onShow:be,onHide:de},ce)];return e.expandSeparator===!0&&h.push(u(Tt,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:C.value}),u(Tt,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:C.value})),h}return e.group!==void 0&&M(),Xt(()=>{N!==void 0&&N()}),()=>u("div",{class:_e.value},[u("div",{class:"q-expansion-item__container relative-position"},Se())])}}),Ve=$e({name:"QList",props:{...Qe,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:o}){const b=Le(),w=Fe(e,b.proxy.$q),C=v(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(w.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>u(e.tag,{class:C.value},ot(o.default))}});const qa=fe({name:"SearchComponent",setup(){const e=pe(),o=p("");return{reStore:e,searchTerms:o,searchSize:p(e.preferences.resLimit),searchResults:p([]),promptSearchSize:p(!1)}},mounted(){Y(this.reStore.preferences,async(e,o)=>{console.log("watcher ",e,o),this.searchSize=e.resLimit})},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchResults.splice(e,1)},load(e){console.log(e),console.log(this.searchResults[e]);const o=this.reStore.langVoices[this.reStore.preferences.langVoice];this.reStore.loadPageId(this.searchResults[e].pageid,o)},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoice];this.reStore.wiki.setLang(e.langName);const o=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",o.results.length),this.searchResults=o.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),Va=d("div",{class:"text-h6"},"Search Results Size",-1),Ia={class:"q-gutter-y-sm column"},Ma={key:0},Ba={class:"row cardheader ptr justify-between"},Ha=["onClick"],Ra={class:"history-remove"};function Oa(e,o,b,w,C,D){return k(),j(ae,null,[l(Mt,{modelValue:e.promptSearchSize,"onUpdate:modelValue":o[2]||(o[2]=s=>e.promptSearchSize=s),persistent:""},{default:m(()=>[l(U,{style:{"min-width":"350px"}},{default:m(()=>[l(J,{align:"center"},{default:m(()=>[Va]),_:1}),l(J,{class:"q-pt-none",align:"center"},{default:m(()=>[l(pa,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":o[0]||(o[0]=s=>e.searchSize=s)},null,8,["modelValue"])]),_:1}),l(It,{align:"center",class:"text-primary"},{default:m(()=>[De(l(V,{flat:"",label:"Cancel"},null,512),[[Oe]]),De(l(V,{flat:"",label:"Update results size",onClick:o[1]||(o[1]=s=>this.updateSearchSize())},null,512),[[Oe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(U,{flat:""},{default:m(()=>[l(J,null,{default:m(()=>[l(Ve,{padding:"",class:"rounded-borders"},{default:m(()=>[l(qe,{"header-style":{border:"1px solid gray"},label:"Search & Results"},{default:m(()=>[d("div",Ia,[l(nt,{class:"bg-primary text-white rounded-borders q-my-md"},{default:m(()=>[l(V,{dark:"",standout:"",onClick:o[3]||(o[3]=s=>e.promptSearchSize=!0)},{default:m(()=>[E(q(this.searchResults.length)+" ",1),l(at,null,{default:m(()=>[E("Change results limit ("+q(this.searchSize)+")",1)]),_:1})]),_:1}),l(ka,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":o[6]||(o[6]=s=>e.searchTerms=s),"input-class":"text-right",class:"q-ml-md",onKeyup:[o[7]||(o[7]=s=>this.update()),o[8]||(o[8]=ta(s=>this.doSearch(),["enter"]))]},{append:m(()=>[e.searchTerms===""?(k(),P($,{key:0,name:"search",onClick:o[4]||(o[4]=s=>this.doSearch())})):(k(),P($,{key:1,name:"clear",class:"cursor-pointer",onClick:o[5]||(o[5]=s=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(k(),j("div",Ma,[(k(!0),j(ae,null,Te(this.searchResults,(s,g)=>(k(),P(U,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":o[9]||(o[9]=_=>this.searchResults=_),key:g},{default:m(()=>[d("div",Ba,[d("span",{class:"history-title col-grow",onClick:_=>this.load(g)},q(g)+". "+q(s.title.slice(0,25)),9,Ha),d("span",Ra,[l($,{class:"primary",size:e.xl,color:e.primary,name:"close",onClick:_=>this.remove(g)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var La=ye(qa,[["render",Oa]]);const Qa=fe({name:"CurrentPage",props:{},setup(e){const o=pe();return{reStore:o,courseid:p("---"),assignmentTitle:p("---"),pageTitle:p(o.page.pageTitle),lang:p(o.page.langVoice.longName),imgIdx:p(o.page.imgIdx),imgs:p(o.page.imgs),imgTot:p(o.page.imgs.length),imgFit:p(o.page.imgFit),guideWords:p(o.page.guideWords),mapCoords:p(o.page.mapCoords),pageid:p(o.page.pageid),pctReplace:p(o.page.pctReplace),canonicalUrl:p(o.page.canonicalUrl),props:e}},mounted(){console.log(this.props),Y(this.reStore.page,async(e,o)=>{console.log("watcher ",e,o),this.pageTitle=e.pageTitle,this.imgIdx=e.imgIdx,this.imgs=e.imgs,this.imgTot=e.imgs.length,this.imgFit=e.imgFit,this.guideWords=e.guideWords,this.mapCoords=e.mapCoords,this.pageid=e.pageid,this.lang=e.langVoice.longName,this.pctReplace=e.pctReplace,this.canonicalUrl=e.canonicalUrl})},methods:{speak(){console.log("CurrentPage.speak",this.reStore),this.reStore.speak()},cycleFitMode(){const e=["scale-down","cover"];let o=e.indexOf(this.imgFit);o+=1,o>e.length-1&&(o=0),this.imgFit=e[o],this.reStore.page.imgFit=this.imgFit,console.log("fit: ",this.imgFit)},nextImg(){this.imgIdx=this.imgIdx+1>this.imgs.length-1?0:this.imgIdx+1,this.reStore.page.imgIdx=this.imgIdx},imgCB(e,o){console.log(e,o),this.reStore.page.imgIdx=e},loadURL(e){console.log("loadURL ",e),window.open(e,"_blank")},mapCB(){const e="https://maps.google.com/?ll="+this.mapCoords.split(",")[0]+","+this.mapCoords.split(",")[1];window.open(e,"_blank")},saveImage(e,o){console.log("saveImage: ",e,o),this.reStore.saveImage(o)},saveCurrentImage(){const e=this.imgs[this.imgIdx];console.log("saveCurrentImage: ",e),this.reStore.saveImage(e)},remove(e,o){console.log("remove: ",e,o),this.imgs.splice(e,1),this.reStore.page.imgs.splice(e,1)},toggleText(){ia("#slideTextDiv").classed("hidden")?kt("#slideTextDiv").classed("hidden",!1):kt("#slideTextDiv").classed("hidden",!0)},addBookmark(){console.log("addBookmark"),this.reStore.saveBookmark()}}}),Fa={class:"text-weight-bolder text-center q-pa-md"},Pa={style:{border:"1px solid gray","border-radius":"5px"}},Ya={width:"100%"},Ua=d("td",{style:{width:"50%"}},null,-1),za=d("tr",null,[d("td"),d("td",null,"Speak Text")],-1),Aa={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Na={width:"100%"},ja=d("td",null,"WP Page Id",-1),Ea={style:{width:"50%"}},Wa=d("td",null,"Language",-1),Ka={style:{width:"50%"}},Ga={class:"float-left"},Ja=d("td",null,"Current Image",-1),Xa={class:"float-left"},Za={class:"float-right"},eo=d("td",null,"Image Fit",-1),to={class:"align-left"},ao=d("td",null,"Guide Words",-1),oo={style:{width:"50%"}},no=d("td",null,"Percent Replace",-1),lo={class:"float-left"},so=d("td",null,"Map Coords",-1),ro={class:"float-left"},io=d("td",null,"Toggle Text",-1),uo={key:0},co={class:"row cardheader justify-between"},mo={class:"history-remove"},vo={class:"history-remove ptr"};function ho(e,o,b,w,C,D){return k(),j(ae,null,[l(U,{flat:""},{default:m(()=>[l(J,null,{default:m(()=>[d("div",Fa,q(this.pageTitle),1),d("div",Pa,[d("table",Ya,[d("tr",null,[Ua,d("td",null,[l(V,{round:"",class:"q-pa-md",icon:"volume_up",color:"secondary",onClick:o[0]||(o[0]=s=>this.speak())})])]),za])]),d("div",Aa,[d("table",Na,[d("tr",null,[ja,d("td",Ea,[d("a",{class:"bold_ptr float-left",onClick:o[1]||(o[1]=s=>this.loadURL(this.canonicalUrl))},q(this.pageid),1),l($,{name:"bookmark",onClick:this.addBookmark,class:"float-right"},null,8,["onClick"])])]),d("tr",null,[Wa,d("td",Ka,[d("span",Ga,q(this.lang),1),l($,{class:"float-right",name:"translate"})])]),d("tr",null,[Ja,d("td",{style:{width:"50%",cursor:"pointer"},onClick:o[2]||(o[2]=(...s)=>this.nextImg&&this.nextImg(...s))},[d("span",Xa,q(this.imgIdx+1)+" / "+q(this.imgTot),1),d("span",Za,[l($,{name:"bookmark",onClick:this.saveCurrentImage},null,8,["onClick"])])])]),d("tr",{class:"ptr",onClick:o[3]||(o[3]=(...s)=>this.cycleFitMode&&this.cycleFitMode(...s))},[eo,d("td",null,[d("span",to,q(this.imgFit),1),l($,{class:"float-right",name:"fit_screen"})])]),d("tr",null,[ao,d("td",oo,[E(q(this.guideWords.replaceAll(",",", "))+" ",1),l($,{class:"float-right",name:"tune"})])]),d("tr",null,[no,d("td",null,[d("span",lo,q(this.pctReplace)+" %",1),l($,{class:"float-right",name:"tune"})])]),d("tr",null,[so,d("td",{onClick:o[4]||(o[4]=(...s)=>this.mapCB&&this.mapCB(...s)),class:"ptr"},[d("span",ro,q(this.mapCoords),1),l($,{class:"float-right",name:"place"})])]),d("tr",null,[io,d("td",{onClick:o[5]||(o[5]=(...s)=>this.toggleText&&this.toggleText(...s)),class:"ptr"},[l($,{class:"float-right",name:"article"})])])])])]),_:1})]),_:1}),l(U,{flat:""},{default:m(()=>[l(J,null,{default:m(()=>[l(Ve,{padding:"",class:"rounded-borders"},{default:m(()=>[l(qe,{"header-style":{border:"1px solid gray"},label:"Page Images"},{default:m(()=>[this.imgs.length?(k(),j("div",uo,[(k(!0),j(ae,null,Te(this.imgs,(s,g)=>(k(),P(U,{bordered:"",class:"q-ma-sm",flat:"",modelValue:this.imgs,"onUpdate:modelValue":o[6]||(o[6]=_=>this.imgs=_),key:g},{default:m(()=>[d("div",co,[d("span",mo,[l($,{name:"bookmark",onClick:_=>this.saveImage(g,s)},null,8,["onClick"]),l($,{name:"article",onClick:this.toggleText},null,8,["onClick"]),l($,{name:"fit_screen",onClick:this.cycleFitMode},null,8,["onClick"])]),E(" "+q(s.cap.slice(0,25))+" ",1),d("span",vo,[l($,{name:"close",onClick:_=>this.remove(g,s)},null,8,["onClick"])])]),l(lt,{class:"cardimage",onClick:_=>this.imgCB(g,s),src:s.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])):ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var go=ye(Qa,[["render",ho]]);const fo=fe({name:"ImagesComponent",setup(){return{reStore:pe()}},mounted(){Y(this.reStore.userSnapshot.images,async(e,o)=>{console.log("watcher ",e,o)})},methods:{imgCB(e,o){this.reStore.router.push("/teacher/editor"),console.log(e,o);const b={url:o.url,cap:o.desc};this.reStore.page.imgs.push(b),this.reStore.page.imgIdx=this.reStore.page.imgs.length-1},remove(e,o){console.log(e,o),this.reStore.removeImage(e)}}}),yo={class:"row cardheader justify-between"},po={class:"history-remove hidden"},_o={class:"history-remove ptr"};function bo(e,o,b,w,C,D){return k(),P(U,{flat:""},{default:m(()=>[l(J,null,{default:m(()=>[l(Ve,{padding:"",class:"rounded-borders"},{default:m(()=>[this.reStore.userSnapshot.images?(k(),P(qe,{key:0,"header-style":{border:"1px solid gray"},label:"My Images"},{default:m(()=>[d("div",null,[(k(!0),j(ae,null,Te(this.reStore.userSnapshot.images,(s,g)=>(k(),P(U,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":o[0]||(o[0]=_=>this.reStore.userSnapshot.images=_),key:g},{default:m(()=>[d("div",yo,[d("span",po,[l($)]),E(" "+q(s.desc.slice(0,25))+" ",1),d("span",_o,[l($,{name:"close",onClick:_=>this.remove(g,s)},null,8,["onClick"])])]),l(lt,{class:"cardimage",onClick:_=>this.imgCB(g,s),src:s.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1})}var So=ye(fo,[["render",bo]]);const Co=fe({name:"BookmarksComponent",setup(){return{reStore:pe()}},mounted(){Y(this.reStore.userSnapshot.bookmarks,async(e,o)=>{console.log("watcher ",e,o)})},methods:{imgCB(e,o){this.reStore.page.imgs=JSON.parse(JSON.stringify(o.imgs)),this.reStore.router.push("/teacher/editor")},remove(e,o){console.log(e,o),this.reStore.removeBookmark(e)}}}),ko={class:"row cardheader justify-between"},wo={class:"history-remove hidden"},xo={class:"history-remove ptr"};function Do(e,o,b,w,C,D){return k(),P(U,{flat:""},{default:m(()=>[l(J,null,{default:m(()=>[l(Ve,{padding:"",class:"rounded-borders"},{default:m(()=>[this.reStore.userSnapshot.bookmarks?(k(),P(qe,{key:0,"header-style":{border:"1px solid gray"},label:"My bookmarks"},{default:m(()=>[d("div",null,[(k(!0),j(ae,null,Te(this.reStore.userSnapshot.bookmarks,(s,g)=>(k(),P(U,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":o[0]||(o[0]=_=>this.reStore.userSnapshot.bookmarks=_),key:g},{default:m(()=>[d("div",ko,[d("span",wo,[l($)]),E(" "+q(s.pageTitle.slice(0,25))+" ",1),d("span",xo,[l($,{name:"close",onClick:_=>this.remove(g,s)},null,8,["onClick"])])]),l(lt,{class:"cardimage",onClick:_=>this.imgCB(g,s),src:s.imgs[0].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1})}var $o=ye(Co,[["render",Do]]);const To=["gregorian","persian"],qo={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>To.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Vo=["update:modelValue"];function ee(e){return e.year+"/"+re(e.month)+"/"+re(e.day)}function Io(e,o){const b=v(()=>e.disable!==!0&&e.readonly!==!0),w=v(()=>e.editable===!0?0:-1),C=v(()=>{const g=[];return e.color!==void 0&&g.push(`bg-${e.color}`),e.textColor!==void 0&&g.push(`text-${e.textColor}`),g.join(" ")});function D(){return e.locale!==void 0?{...o.lang.date,...e.locale}:o.lang.date}function s(g){const _=new Date,L=g===!0?null:0;if(e.calendar==="persian"){const R=ua(_);return{year:R.jy,month:R.jm,day:R.jd}}return{year:_.getFullYear(),month:_.getMonth()+1,day:_.getDate(),hour:L,minute:L,second:L,millisecond:L}}return{editable:b,tabindex:w,headerClass:C,getLocale:D,getCurrentDate:s}}const se=20,Mo=["Calendar","Years","Months"],qt=e=>Mo.includes(e),tt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),he=" \u2014 ";function te(e){return e.year+"/"+re(e.month)}var Bo=$e({name:"QDate",props:{...qo,...va,...Qe,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:tt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:tt},navigationMaxYearMonth:{type:String,validator:tt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:qt}},emits:[...Vo,"rangeStart","rangeEnd","navigation"],setup(e,{slots:o,emit:b}){const{proxy:w}=Le(),{$q:C}=w,D=Fe(e,C),{getCache:s}=_a(),{tabindex:g,headerClass:_,getLocale:L,getCurrentDate:R}=Io(e,C);let O;const N=ha(e),_e=ga(N),oe=p(null),I=p(mt()),T=p(L()),Pe=v(()=>mt()),Ye=v(()=>L()),A=v(()=>R()),f=p(vt(I.value,T.value)),B=p(e.defaultView),Ie=C.lang.rtl===!0?"right":"left",ie=p(Ie.value),ue=p(Ie.value),be=f.value.year,de=p(be-be%se-(be<0?se:0)),M=p(null),Ue=v(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(D.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),W=v(()=>e.color||"primary"),X=v(()=>e.textColor||"white"),ce=v(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Se=v(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),h=v(()=>Se.value.filter(t=>typeof t=="string").map(t=>Ne(t,I.value,T.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),H=v(()=>{const t=a=>Ne(a,I.value,T.value);return Se.value.filter(a=>aa(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),K=v(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=wt(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),Ce=v(()=>e.calendar==="persian"?ee:(t,a,n)=>da(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?I.value:a,n===void 0?T.value:n,t.year,t.timezoneOffset)),ke=v(()=>h.value.length+H.value.reduce((t,a)=>t+1+ca(K.value(a.to),K.value(a.from)),0)),st=v(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(M.value!==null){const n=M.value.init,i=K.value(n);return T.value.daysShort[i.getDay()]+", "+T.value.monthsShort[n.month-1]+" "+n.day+he+"?"}if(ke.value===0)return he;if(ke.value>1)return`${ke.value} ${T.value.pluralDay}`;const t=h.value[0],a=K.value(t);return isNaN(a.valueOf())===!0?he:T.value.headerTitle!==void 0?T.value.headerTitle(a,t):T.value.daysShort[a.getDay()]+", "+T.value.monthsShort[t.month-1]+" "+t.day}),Bt=v(()=>h.value.concat(H.value.map(a=>a.from)).sort((a,n)=>a.year-n.year||a.month-n.month)[0]),Ht=v(()=>h.value.concat(H.value.map(a=>a.to)).sort((a,n)=>n.year-a.year||n.month-a.month)[0]),rt=v(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(ke.value===0)return he;if(ke.value>1){const t=Bt.value,a=Ht.value,n=T.value.monthsShort;return n[t.month-1]+(t.year!==a.year?" "+t.year+he+n[a.month-1]+" ":t.month!==a.month?he+n[a.month-1]:"")+" "+a.year}return h.value[0].year}),Me=v(()=>{const t=[C.iconSet.datetime.arrowLeft,C.iconSet.datetime.arrowRight];return C.lang.rtl===!0?t.reverse():t}),it=v(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):T.value.firstDayOfWeek),Rt=v(()=>{const t=T.value.daysShort,a=it.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),Z=v(()=>{const t=f.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():Xe(t.year,t.month)}),Ot=v(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),Q=v(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),F=v(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),ze=v(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return Q.value!==null&&Q.value.year>=f.value.year&&(t.year.prev=!1,Q.value.year===f.value.year&&Q.value.month>=f.value.month&&(t.month.prev=!1)),F.value!==null&&F.value.year<=f.value.year&&(t.year.next=!1,F.value.year===f.value.year&&F.value.month<=f.value.month&&(t.month.next=!1)),t}),Be=v(()=>{const t={};return h.value.forEach(a=>{const n=te(a);t[n]===void 0&&(t[n]=[]),t[n].push(a.day)}),t}),ut=v(()=>{const t={};return H.value.forEach(a=>{const n=te(a.from),i=te(a.to);if(t[n]===void 0&&(t[n]=[]),t[n].push({from:a.from.day,to:n===i?a.to.day:void 0,range:a}),n<i){let r;const{year:S,month:c}=a.from,y=c<12?{year:S,month:c+1}:{year:S+1,month:1};for(;(r=te(y))<=i;)t[r]===void 0&&(t[r]=[]),t[r].push({from:void 0,to:r===i?a.to.day:void 0,range:a}),y.month++,y.month>12&&(y.year++,y.month=1)}}),t}),we=v(()=>{if(M.value===null)return;const{init:t,initHash:a,final:n,finalHash:i}=M.value,[r,S]=a<=i?[t,n]:[n,t],c=te(r),y=te(S);if(c!==z.value&&y!==z.value)return;const x={};return c===z.value?(x.from=r.day,x.includeFrom=!0):x.from=1,y===z.value?(x.to=S.day,x.includeTo=!0):x.to=Z.value,x}),z=v(()=>te(f.value)),Lt=v(()=>{const t={};if(e.options===void 0){for(let n=1;n<=Z.value;n++)t[n]=!0;return t}const a=typeof e.options=="function"?e.options:n=>e.options.includes(n);for(let n=1;n<=Z.value;n++){const i=z.value+"/"+re(n);t[n]=a(i)}return t}),Qt=v(()=>{const t={};if(e.events===void 0)for(let a=1;a<=Z.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:n=>e.events.includes(n);for(let n=1;n<=Z.value;n++){const i=z.value+"/"+re(n);t[n]=a(i)===!0&&Ot.value(i)}}return t}),Ft=v(()=>{let t,a;const{year:n,month:i}=f.value;if(e.calendar!=="persian")t=new Date(n,i-1,1),a=new Date(n,i-1,0).getDate();else{const r=wt(n,i,1);t=new Date(r.gy,r.gm-1,r.gd);let S=i-1,c=n;S===0&&(S=12,c--),a=Xe(c,S)}return{days:t.getDay()-it.value-1,endDay:a}}),dt=v(()=>{const t=[],{days:a,endDay:n}=Ft.value,i=a<0?a+7:a;if(i<6)for(let c=n-i;c<=n;c++)t.push({i:c,fill:!0});const r=t.length;for(let c=1;c<=Z.value;c++){const y={i:c,event:Qt.value[c],classes:[]};Lt.value[c]===!0&&(y.in=!0,y.flat=!0),t.push(y)}if(Be.value[z.value]!==void 0&&Be.value[z.value].forEach(c=>{const y=r+c-1;Object.assign(t[y],{selected:!0,unelevated:!0,flat:!1,color:W.value,textColor:X.value})}),ut.value[z.value]!==void 0&&ut.value[z.value].forEach(c=>{if(c.from!==void 0){const y=r+c.from-1,x=r+(c.to||Z.value)-1;for(let Ge=y;Ge<=x;Ge++)Object.assign(t[Ge],{range:c.range,unelevated:!0,color:W.value,textColor:X.value});Object.assign(t[y],{rangeFrom:!0,flat:!1}),c.to!==void 0&&Object.assign(t[x],{rangeTo:!0,flat:!1})}else if(c.to!==void 0){const y=r+c.to-1;for(let x=r;x<=y;x++)Object.assign(t[x],{range:c.range,unelevated:!0,color:W.value,textColor:X.value});Object.assign(t[y],{flat:!1,rangeTo:!0})}else{const y=r+Z.value-1;for(let x=r;x<=y;x++)Object.assign(t[x],{range:c.range,unelevated:!0,color:W.value,textColor:X.value})}}),we.value!==void 0){const c=r+we.value.from-1,y=r+we.value.to-1;for(let x=c;x<=y;x++)t[x].color=W.value,t[x].editRange=!0;we.value.includeFrom===!0&&(t[c].editRangeFrom=!0),we.value.includeTo===!0&&(t[y].editRangeTo=!0)}f.value.year===A.value.year&&f.value.month===A.value.month&&(t[r+A.value.day-1].today=!0);const S=t.length%7;if(S>0){const c=7-S;for(let y=1;y<=c;y++)t.push({i:y,fill:!0})}return t.forEach(c=>{let y="q-date__calendar-item ";c.fill===!0?y+="q-date__calendar-item--fill":(y+=`q-date__calendar-item--${c.in===!0?"in":"out"}`,c.range!==void 0&&(y+=` q-date__range${c.rangeTo===!0?"-to":c.rangeFrom===!0?"-from":""}`),c.editRange===!0&&(y+=` q-date__edit-range${c.editRangeFrom===!0?"-from":""}${c.editRangeTo===!0?"-to":""}`),(c.range!==void 0||c.editRange===!0)&&(y+=` text-${c.color}`)),c.classes=y}),t}),Pt=v(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});Y(()=>e.modelValue,t=>{if(O===t)O=0;else{const{year:a,month:n}=vt(I.value,T.value);me(a,n)}}),Y(B,()=>{oe.value!==null&&w.$el.contains(document.activeElement)===!0&&oe.value.focus()}),Y(()=>f.value.year,t=>{b("navigation",{year:t,month:f.value.month})}),Y(()=>f.value.month,t=>{b("navigation",{year:f.value.year,month:t})}),Y(Pe,t=>{pt(t,T.value,"mask"),I.value=t}),Y(Ye,t=>{pt(I.value,t,"locale"),T.value=t});function ct(){const t=A.value,a=Be.value[te(t)];(a===void 0||a.includes(t.day)===!1)&&Ee(t),Ae(t.year,t.month)}function Yt(t){qt(t)===!0&&(B.value=t)}function Ut(t,a){["month","year"].includes(t)&&(t==="month"?gt:je)(a===!0?-1:1)}function Ae(t,a){B.value="Calendar",me(t,a)}function zt(t,a){if(e.range===!1||!t){M.value=null;return}const n=Object.assign({...f.value},t),i=a!==void 0?Object.assign({...f.value},a):n;M.value={init:n,initHash:ee(n),final:i,finalHash:ee(i)},Ae(n.year,n.month)}function mt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ne(t,a,n){return ma(t,a,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function vt(t,a){const n=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(n.length===0)return ht();const i=n[n.length-1],r=Ne(i.from!==void 0?i.from:i,t,a);return r.dateHash===null?ht():r}function ht(){let t,a;if(e.defaultYearMonth!==void 0){const n=e.defaultYearMonth.split("/");t=parseInt(n[0],10),a=parseInt(n[1],10)}else{const n=A.value!==void 0?A.value:R();t=n.year,a=n.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+re(a)+"/01"}}function gt(t){let a=f.value.year,n=Number(f.value.month)+t;n===13?(n=1,a++):n===0&&(n=12,a--),me(a,n),ce.value===!0&&He("month")}function je(t){const a=Number(f.value.year)+t;me(a,f.value.month),ce.value===!0&&He("year")}function At(t){me(t,f.value.month),B.value=e.defaultView==="Years"?"Months":"Calendar",ce.value===!0&&He("year")}function Nt(t){me(f.value.year,t),B.value="Calendar",ce.value===!0&&He("month")}function jt(t,a){const n=Be.value[a];(n!==void 0&&n.includes(t.day)===!0?We:Ee)(t)}function ne(t){return{year:t.year,month:t.month,day:t.day}}function me(t,a){Q.value!==null&&t<=Q.value.year&&(t=Q.value.year,a<Q.value.month&&(a=Q.value.month)),F.value!==null&&t>=F.value.year&&(t=F.value.year,a>F.value.month&&(a=F.value.month));const n=t+"/"+re(a)+"/01";n!==f.value.dateHash&&(ie.value=f.value.dateHash<n==(C.lang.rtl!==!0)?"left":"right",t!==f.value.year&&(ue.value=ie.value),_t(()=>{de.value=t-t%se-(t<0?se:0),Object.assign(f.value,{year:t,month:a,day:1,dateHash:n})}))}function ft(t,a,n){const i=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;O=i;const{reason:r,details:S}=yt(a,n);b("update:modelValue",i,r,S)}function He(t){const a=h.value[0]!==void 0&&h.value[0].dateHash!==null?{...h.value[0]}:{...f.value};_t(()=>{a.year=f.value.year,a.month=f.value.month;const n=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Xe(a.year,a.month);a.day=Math.min(Math.max(1,a.day),n);const i=ve(a);O=i;const{details:r}=yt("",a);b("update:modelValue",i,t,r)})}function yt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...ne(a.target),from:ne(a.from),to:ne(a.to)}}:{reason:`${t}-day`,details:ne(a)}}function ve(t,a,n){return t.from!==void 0?{from:Ce.value(t.from,a,n),to:Ce.value(t.to,a,n)}:Ce.value(t,a,n)}function Ee(t){let a;if(e.multiple===!0)if(t.from!==void 0){const n=ee(t.from),i=ee(t.to),r=h.value.filter(c=>c.dateHash<n||c.dateHash>i),S=H.value.filter(({from:c,to:y})=>y.dateHash<n||c.dateHash>i);a=r.concat(S).concat(t).map(c=>ve(c))}else{const n=Se.value.slice();n.push(ve(t)),a=n}else a=ve(t);ft(a,"add",t)}function We(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const n=ve(t);t.from!==void 0?a=e.modelValue.filter(i=>i.from!==void 0?i.from!==n.from&&i.to!==n.to:!0):a=e.modelValue.filter(i=>i!==n),a.length===0&&(a=null)}ft(a,"remove",t)}function pt(t,a,n){const i=h.value.concat(H.value).map(r=>ve(r,t,a)).filter(r=>r.from!==void 0?r.from.dateHash!==null&&r.to.dateHash!==null:r.dateHash!==null);b("update:modelValue",(e.multiple===!0?i:i[0])||null,n)}function Et(){if(e.minimal!==!0)return u("div",{class:"q-date__header "+_.value},[u("div",{class:"relative-position"},[u(xe,{name:"q-transition--fade"},()=>u("div",{key:"h-yr-"+rt.value,class:"q-date__header-subtitle q-date__header-link "+(B.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:g.value,...s("vY",{onClick(){B.value="Years"},onKeyup(t){t.keyCode===13&&(B.value="Years")}})},[rt.value]))]),u("div",{class:"q-date__header-title relative-position flex no-wrap"},[u("div",{class:"relative-position col"},[u(xe,{name:"q-transition--fade"},()=>u("div",{key:"h-sub"+st.value,class:"q-date__header-title-label q-date__header-link "+(B.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:g.value,...s("vC",{onClick(){B.value="Calendar"},onKeyup(t){t.keyCode===13&&(B.value="Calendar")}})},[st.value]))]),e.todayBtn===!0?u(V,{class:"q-date__header-today self-start",icon:C.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:g.value,onClick:ct}):null])])}function Ke({label:t,type:a,key:n,dir:i,goTo:r,boundaries:S,cls:c}){return[u("div",{class:"row items-center q-date__arrow"},[u(V,{round:!0,dense:!0,size:"sm",flat:!0,icon:Me.value[0],tabindex:g.value,disable:S.prev===!1,...s("go-#"+a,{onClick(){r(-1)}})})]),u("div",{class:"relative-position overflow-hidden flex flex-center"+c},[u(xe,{name:"q-transition--jump-"+i},()=>u("div",{key:n},[u(V,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:g.value,...s("view#"+a,{onClick:()=>{B.value=a}})})]))]),u("div",{class:"row items-center q-date__arrow"},[u(V,{round:!0,dense:!0,size:"sm",flat:!0,icon:Me.value[1],tabindex:g.value,disable:S.next===!1,...s("go+#"+a,{onClick(){r(1)}})})])]}const Wt={Calendar:()=>[u("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[u("div",{class:"q-date__navigation row items-center no-wrap"},Ke({label:T.value.months[f.value.month-1],type:"Months",key:f.value.month,dir:ie.value,goTo:gt,boundaries:ze.value.month,cls:" col"}).concat(Ke({label:f.value.year,type:"Years",key:f.value.year,dir:ue.value,goTo:je,boundaries:ze.value.year,cls:""}))),u("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Rt.value.map(t=>u("div",{class:"q-date__calendar-item"},[u("div",t)]))),u("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[u(xe,{name:"q-transition--slide-"+ie.value},()=>u("div",{key:z.value,class:"q-date__calendar-days fit"},dt.value.map(t=>u("div",{class:t.classes},[t.in===!0?u(V,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:g.value,...s("day#"+t.i,{onClick:()=>{Kt(t.i)},onMouseover:()=>{Gt(t.i)}})},t.event!==!1?()=>u("div",{class:"q-date__event bg-"+t.event}):null):u("div",""+t.i)]))))])])],Months(){const t=f.value.year===A.value.year,a=i=>Q.value!==null&&f.value.year===Q.value.year&&Q.value.month>i||F.value!==null&&f.value.year===F.value.year&&F.value.month<i,n=T.value.monthsShort.map((i,r)=>{const S=f.value.month===r+1;return u("div",{class:"q-date__months-item flex flex-center"},[u(V,{class:t===!0&&A.value.month===r+1?"q-date__today":null,flat:S!==!0,label:i,unelevated:S,color:S===!0?W.value:null,textColor:S===!0?X.value:null,tabindex:g.value,disable:a(r+1),...s("month#"+r,{onClick:()=>{Nt(r+1)}})})])});return e.yearsInMonthView===!0&&n.unshift(u("div",{class:"row no-wrap full-width"},[Ke({label:f.value.year,type:"Years",key:f.value.year,dir:ue.value,goTo:je,boundaries:ze.value.year,cls:" col"})])),u("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const t=de.value,a=t+se,n=[],i=r=>Q.value!==null&&Q.value.year>r||F.value!==null&&F.value.year<r;for(let r=t;r<=a;r++){const S=f.value.year===r;n.push(u("div",{class:"q-date__years-item flex flex-center"},[u(V,{key:"yr"+r,class:A.value.year===r?"q-date__today":null,flat:!S,label:r,dense:!0,unelevated:S,color:S===!0?W.value:null,textColor:S===!0?X.value:null,tabindex:g.value,disable:i(r),...s("yr#"+r,{onClick:()=>{At(r)}})})]))}return u("div",{class:"q-date__view q-date__years flex flex-center"},[u("div",{class:"col-auto"},[u(V,{round:!0,dense:!0,flat:!0,icon:Me.value[0],tabindex:g.value,disable:i(t),...s("y-",{onClick:()=>{de.value-=se}})})]),u("div",{class:"q-date__years-content col self-stretch row items-center"},n),u("div",{class:"col-auto"},[u(V,{round:!0,dense:!0,flat:!0,icon:Me.value[1],tabindex:g.value,disable:i(a),...s("y+",{onClick:()=>{de.value+=se}})})])])}};function Kt(t){const a={...f.value,day:t};if(e.range===!1){jt(a,z.value);return}if(M.value===null){const n=dt.value.find(r=>r.fill!==!0&&r.i===t);if(e.noUnset!==!0&&n.range!==void 0){We({target:a,from:n.range.from,to:n.range.to});return}if(n.selected===!0){We(a);return}const i=ee(a);M.value={init:a,initHash:i,final:a,finalHash:i},b("rangeStart",ne(a))}else{const n=M.value.initHash,i=ee(a),r=n<=i?{from:M.value.init,to:a}:{from:a,to:M.value.init};M.value=null,Ee(n===i?a:{target:a,...r}),b("rangeEnd",{from:ne(r.from),to:ne(r.to)})}}function Gt(t){if(M.value!==null){const a={...f.value,day:t};Object.assign(M.value,{final:a,finalHash:ee(a)})}}return Object.assign(w,{setToday:ct,setView:Yt,offsetCalendar:Ut,setCalendarTo:Ae,setEditingRange:zt}),()=>{const t=[u("div",{class:"q-date__content col relative-position"},[u(xe,{name:"q-transition--fade"},Wt[B.value])])],a=ot(o.default);return a!==void 0&&t.push(u("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&_e(t,"push"),u("div",{class:Ue.value,...Pt.value},[Et(),u("div",{ref:oe,class:"q-date__main col column",tabindex:-1},t)])}}});const Ho=u("div",{class:"q-space"});var Ro=$e({name:"QSpace",setup(){return()=>Ho}});const Oo=fe({name:"OTDComponent",setup(){const e=pe(),o=Date.now(),b=xt.formatDate(o,"MM/DD");return{reStore:e,otditems:p([]),promptOTDDate:p(!1),otddate:p(Date.now()),otdlabel:p(b),otdtype:p("selected")}},mounted(){this.init()},methods:{async init(){const e=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=e[this.otdtype],console.log(this.otditems)},async load(e){console.log("load",this.otditems[e].text),console.log("load",this.otditems[e]);const o=this.reStore.langVoices[this.reStore.preferences.langVoice];this.reStore.loadPageId(this.otditems[e].pages[0].pageid,o),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const e=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=e.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=xt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(e){console.log("otdOptionsCB",this.otdtype);const o=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=o[this.otdtype]}}}),Lo=d("div",{class:"text-h6"},"Select Date",-1),Qo={class:"q-gutter-y-sm column"},Fo={class:""};function Po(e,o,b,w,C,D){return k(),j(ae,null,[l(Mt,{modelValue:e.promptOTDDate,"onUpdate:modelValue":o[2]||(o[2]=s=>e.promptOTDDate=s),persistent:""},{default:m(()=>[l(U,{style:{"min-width":"350px"}},{default:m(()=>[l(J,{align:"center"},{default:m(()=>[Lo]),_:1}),l(Bo,{modelValue:e.otddate,"onUpdate:modelValue":o[0]||(o[0]=s=>e.otddate=s),minimal:""},null,8,["modelValue"]),l(It,{align:"center",class:"text-white"},{default:m(()=>[De(l(V,{flat:"",label:"Cancel"},null,512),[[Oe]]),De(l(V,{flat:"",label:"Update OTD date",onClick:o[1]||(o[1]=s=>this.updateOTDDate())},null,512),[[Oe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(U,{flat:""},{default:m(()=>[l(J,null,{default:m(()=>[l(Ve,{padding:"",class:"rounded-borders"},{default:m(()=>[l(qe,{"header-style":{border:"1px solid gray"},label:"On This Day"},{default:m(()=>[d("div",Qo,[l(nt,{class:"bg-primary text-white rounded-borders q-my-md"},{default:m(()=>[l(V,{dark:"",standout:"",onClick:o[3]||(o[3]=s=>e.promptOTDDate=!0)},{default:m(()=>[E(q(e.otdlabel),1)]),_:1}),l(Ro),l(ba,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":o[4]||(o[4]=s=>this.otdtype=s),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:o[5]||(o[5]=s=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),d("div",Fo,[(k(!0),j(ae,null,Te(e.otditems,(s,g)=>(k(),P(U,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:e.otditems,"onUpdate:modelValue":o[6]||(o[6]=_=>e.otditems=_),key:g,onClick:_=>this.load(g)},{default:m(()=>[E(q(g)+". "+q(s.year)+" "+q(s.text),1)]),_:2},1032,["modelValue","onClick"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Yo=ye(Oo,[["render",Po]]);const Uo=fe({name:"TeacherLayout",components:{DocumentationComponent:Sa,SearchComponent:La,PreferencesComponent:Ca,CurrentPage:go,ImagesComponent:So,BookmarksComponent:$o,OTDComponent:Yo},setup(){const e=p(!1),o=p(!1),b=pe(),w=b.preferences;return{step:p(1),reStore:b,initialValues:p(w),leftDrawerOpen:e,rightDrawerOpen:o,toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){o.value=!o.value}}},mounted(){bt.isActive||(bt.toggle(),Je("primary","#333"),Je("secondary",this.reStore.preferences.secondaryColor),Je("accent",this.reStore.preferences.accentColor))}}),zo={class:"dashboard-wrapper"};function Ao(e,o,b,w,C,D){const s=G("router-link"),g=G("router-view"),_=G("DocumentationComponent"),L=G("SearchComponent"),R=G("ImagesComponent"),O=G("BookmarksComponent"),N=G("OTDComponent"),_e=G("PreferencesComponent"),oe=G("CurrentPage");return k(),P(ra,{view:"hHh LpR fFf"},{default:m(()=>[l(la,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:m(()=>[l(nt,null,{default:m(()=>[l(V,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),l(oa,null,{default:m(()=>[l(s,{to:"/teacher"},{default:m(()=>[l($,{name:"home",color:"white"},{default:m(()=>[l(at,null,{default:m(()=>[E("Return to My Teacher Page")]),_:1})]),_:1})]),_:1})]),_:1}),this.reStore.authenticated?(k(),P(V,{key:0,onClick:o[0]||(o[0]=I=>this.reStore.router.push("/student")),icon:"switch_account"},{default:m(()=>[l(at,null,{default:m(()=>[E(" Switch between Teacher or Student role ")]),_:1})]),_:1})):ge("",!0),this.reStore.authenticated?(k(),P(V,{key:1,icon:"logout",onClick:o[1]||(o[1]=I=>this.reStore.logout())})):ge("",!0),l(V,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1}),l(na,{align:"left",class:"hidden"},{default:m(()=>[l(Re,{to:"/logo",label:"Logo"}),l(Re,{to:"/teaching",label:"Teaching"}),l(Re,{to:"/taking",label:"Taking"}),l(Re,{to:"/gradebook",label:"Gradebook"})]),_:1})]),_:1}),l(sa,{class:"container-fluid"},{default:m(()=>[d("div",zo,[l(g)]),l(St,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":o[2]||(o[2]=I=>e.leftDrawerOpen=I),side:"left"},{default:m(()=>[l(Ct,{visible:e.visible,style:{height:"95vh","max-width":"350px"}},{default:m(()=>[l(_),l(L),l(R),l(O),l(N)]),_:1},8,["visible"])]),_:1},8,["modelValue"]),l(St,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":o[3]||(o[3]=I=>e.rightDrawerOpen=I),side:"right"},{default:m(()=>[l(Ct,{visible:e.visible,style:{height:"95vh","max-width":"350px"}},{default:m(()=>[l(_e,{initialValues:this.initialValues},null,8,["initialValues"]),l(oe)]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var sn=ye(Uo,[["render",Ao]]);export{sn as default};
