import{Q as U,u as Xt,a as Zt,b as es}from"./use-form.a415f879.js";import{Q as Kt,u as ts,a as lt,P as ss,b as tt}from"./PreferencesComponent.13f42003.js";import{i as y,g as nt,d as ie,r as g,v as Y,_ as re,o as c,ah as f,a as s,w as l,K as M,Q as C,e as i,ag as v,ak as _,aM as De,c as E,a1 as q,ai as G,aj as Ce,al as ae,h as V,au as as,av as be,j as os,q as ls,p as Ct,R as ns,f as Q,aN as kt,P as Vt,s as st}from"./index.52f1596d.js";import{d as j,C as R,Q as X}from"./ClosePopup.d0255080.js";import{Q as T}from"./QCard.89a66f75.js";import{Q as P}from"./QTooltip.f4858e91.js";import{Q as Se,a as is,b as rs,c as $t,d as wt,e as us,f as ds}from"./QLayout.a4282360.js";import{Q as ke,b as F,e as bt}from"./QExpansionItem.0bce6089.js";import{Q as cs}from"./QTabs.7971427f.js";import{u as ue,p as he,t as ms,a as Dt,f as hs,g as gs,j as at,_ as fs,d as xt,s as xe}from"./re-store.3791cc3a.js";import{a as Ne,D as ps,A as vs}from"./DocumentationComponent.08fc2a36.js";import{Q as Z}from"./QInput.5eaf580f.js";import{Q as Ie}from"./QList.6bc694db.js";import{s as I}from"./transform.aea72fbe.js";import{Q as Re}from"./QImg.8758a6eb.js";import{u as ys,a as _s}from"./use-dark.3fc69605.js";import{Q as qt}from"./QToggle.ea0f36db.js";import"./selection.7c9da154.js";import"./use-key-composition.21d7268e.js";import"./use-prevent-scroll.0096cbcb.js";import"./scroll.2ac7d699.js";import"./use-portal.95611ac6.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";import"./QCheckbox.bb1c09b8.js";const Ss=y("div",{class:"q-space"});var Ae=nt({name:"QSpace",setup(){return()=>Ss}});const Cs=ie({name:"SearchComponent",setup(){const e=ue(),a=g("");return{reStore:e,searchTerms:a,searchSize:g(e.preferences.resLimit),searchResults:g([]),promptSearchSize:g(!1)}},mounted(){Y(this.reStore.preferences,async(d,w)=>{console.log("watcher ",d,w),this.searchSize=d.resLimit;for(const[N,u]of Object.entries(this.reStore.langVoices))I("#sfi").classed(u.flagName,!1);const b=this.reStore.preferences.langVoiceKey;I("#sfi").classed(this.reStore.langVoices[b].flagName,!0)});const e=this.reStore.preferences.langVoiceKey,a=this.reStore.langVoices[e].flagName;I("#sfi").classed(a,!0)},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchResults.splice(e,1)},load(e){console.log(e),console.log(this.searchResults[e]);const a=this.reStore.preferences.langVoiceKey;console.log("calling loadPageId ",this.searchResults[e].pageid,a),this.reStore.loadPageId(this.searchResults[e].pageid,a),this.reStore.courses.trigger+=1},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("doSearch ",e),this.reStore.wiki.setLang(e.langName);const a=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",a.results.length),this.searchResults=a.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),ks=i("div",{class:"text-h6"},"Search Results Size",-1),Vs={class:"q-pa-md",style:{"max-width":"350px"}},$s={class:"q-gutter-y-sm column"},ws=i("span",{class:"on-right text-h2",id:"sfi"},null,-1),bs={key:0},Ds={class:"row cardheader ptr justify-between"},xs=["onClick"],qs={class:"history-remove"};function Ts(e,a,d,w,b,N){return c(),f(G,null,[s(X,{modelValue:e.promptSearchSize,"onUpdate:modelValue":a[2]||(a[2]=u=>e.promptSearchSize=u),persistent:""},{default:l(()=>[s(T,{style:{"min-width":"350px"}},{default:l(()=>[s(U,{align:"center"},{default:l(()=>[ks]),_:1}),s(U,{class:"q-pt-none",align:"center"},{default:l(()=>[s(Kt,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":a[0]||(a[0]=u=>e.searchSize=u)},null,8,["modelValue"])]),_:1}),s(j,{align:"center",class:"text-white"},{default:l(()=>[M(s(C,{flat:"",label:"Cancel"},null,512),[[R]]),M(s(C,{flat:"",label:"Update results size",onClick:a[1]||(a[1]=u=>this.updateSearchSize())},null,512),[[R]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i("div",Vs,[s(Ie,{bordered:"",class:"rounded-borders"},{default:l(()=>[s(ke,null,{header:l(()=>[s(F,{avatar:""},{default:l(()=>[s(Ne,{icon:"search",color:"primary","text-color":"white"})]),_:1}),s(F,null,{default:l(()=>[v(" Search ")]),_:1})]),default:l(()=>[s(T,null,{default:l(()=>[i("div",$s,[s(Se,{class:"bg-primary text-white rounded-borders q-my-md"},{default:l(()=>[s(C,{dark:"",standout:"",onClick:a[3]||(a[3]=u=>e.promptSearchSize=!0)},{default:l(()=>[v(_(this.searchResults.length)+" ",1),s(P,null,{default:l(()=>[v("Change results limit ("+_(this.searchSize)+")",1)]),_:1})]),_:1}),ws,s(Z,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":a[6]||(a[6]=u=>e.searchTerms=u),"input-class":"text-right",class:"q-ml-md",onKeyup:[a[7]||(a[7]=u=>this.update()),a[8]||(a[8]=De(u=>this.doSearch(),["enter"]))]},{append:l(()=>[e.searchTerms===""?(c(),E(q,{key:0,name:"search",onClick:a[4]||(a[4]=u=>this.doSearch())})):(c(),E(q,{key:1,name:"clear",class:"cursor-pointer",onClick:a[5]||(a[5]=u=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(c(),f("div",bs,[(c(!0),f(G,null,Ce(this.searchResults,(u,r)=>(c(),E(T,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":a[9]||(a[9]=k=>this.searchResults=k),key:r},{default:l(()=>[i("div",Ds,[i("span",{class:"history-title col-grow",onClick:k=>this.load(r)},_(r)+". "+_(u.title.slice(0,25)),9,xs),i("span",qs,[s(q,{class:"primary",size:e.xl,color:e.primary,name:"close",onClick:k=>this.remove(r)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):ae("",!0)]),_:1})]),_:1})]),_:1})])],64)}var Ps=re(Cs,[["render",Ts]]);const Ks=ie({name:"ImagesComponent",setup(){return{reStore:ue(),newCap:g(""),newDesc:g(""),newName:g(""),newSource:g(""),newUrl:g(""),promptAddImage:g(!1)}},mounted(){Y(this.reStore.userSnapshot.images,async(e,a)=>{console.log("watcher ",e,a)})},methods:{addImageCB(){console.log("addImageCB",this.newUrl);const e={name:this.newName,desc:this.newDesc,cap:this.newCap,source:this.newSource,url:this.newUrl};this.reStore.saveImage(null,e)},imgCB(e,a){this.reStore.router.push("/teacher/editor"),console.log(e,a),this.reStore.loadImgId(e)},remove(e,a){console.log(e,a),this.reStore.removeImage(e)}}}),Bs={class:"q-pa-md",style:{"max-width":"350px"}},Us={class:"row cardheader justify-between"},Ms={class:""},Rs={key:0},As={class:"history-remove ptr"};function Ns(e,a,d,w,b,N){return c(),f(G,null,[s(X,{modelValue:e.promptAddImage,"onUpdate:modelValue":a[5]||(a[5]=u=>e.promptAddImage=u)},{default:l(()=>[s(T,null,{default:l(()=>[s(U,null,{default:l(()=>[s(Z,{modelValue:e.newCap,"onUpdate:modelValue":a[0]||(a[0]=u=>e.newCap=u),label:"caption"},null,8,["modelValue"]),s(Z,{modelValue:e.newDesc,"onUpdate:modelValue":a[1]||(a[1]=u=>e.newDesc=u),label:"description"},null,8,["modelValue"]),s(Z,{modelValue:e.newName,"onUpdate:modelValue":a[2]||(a[2]=u=>e.newName=u),label:"name"},null,8,["modelValue"]),s(Z,{modelValue:e.newSource,"onUpdate:modelValue":a[3]||(a[3]=u=>e.newSource=u),label:"source"},null,8,["modelValue"]),s(Z,{modelValue:e.newUrl,"onUpdate:modelValue":a[4]||(a[4]=u=>e.newUrl=u),label:"url"},null,8,["modelValue"])]),_:1}),s(j,{align:"center",class:"text-white"},{default:l(()=>[M(s(C,{flat:"",label:"Cancel"},null,512),[[R]]),M(s(C,{flat:"",label:"Add",onClick:this.addImageCB},null,8,["onClick"]),[[R]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i("div",Bs,[s(Ie,{bordered:"",class:"rounded-borders"},{default:l(()=>[s(ke,{label:"Saved Images"},{header:l(()=>[s(F,{avatar:""},{default:l(()=>[s(Ne,{icon:"image"})]),_:1}),s(F,null,{default:l(()=>[v(" Images ")]),_:1})]),default:l(()=>[s(T,null,{default:l(()=>[s(Se,{class:"bg-primary text-white rounded-borders q-my-md"},{default:l(()=>[s(C,{bordered:"","no-caps":"",standout:"",onClick:a[6]||(a[6]=u=>e.promptAddImage=!0)},{default:l(()=>[v(" Add Image "),s(P,null,{default:l(()=>[v("Add a custom image (only saves url, not image data)")]),_:1})]),_:1})]),_:1}),i("div",null,[(c(!0),f(G,null,Ce(this.reStore.userSnapshot.images,(u,r)=>(c(),E(T,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":a[7]||(a[7]=k=>this.reStore.userSnapshot.images=k),key:r},{default:l(()=>[i("div",Us,[i("span",Ms,[s(q,{name:"title",onClick:k=>this.reStore.setCover(u)},null,8,["onClick"])]),u.cap?(c(),f("span",Rs,_(u.cap.slice(0,25)),1)):ae("",!0),i("span",As,[s(q,{name:"delete",onClick:k=>this.remove(r,u)},null,8,["onClick"])])]),s(Re,{class:"cardimage",onClick:k=>this.imgCB(r,u),src:u.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])],64)}var Is=re(Ks,[["render",Ns]]);const Hs=ie({name:"BookmarksComponent",setup(){return{reStore:ue()}},mounted(){Y(this.reStore.userSnapshot.bookmarks,async(e,a)=>{console.log("watcher ",e,a)})},methods:{imgCB(e,a){this.reStore.router.push("/teacher/editor"),console.log(e,a),this.reStore.page=a,this.reStore.courses.trigger+=1},remove(e,a){console.log(e,a),this.reStore.removeBookmark(e)}}}),Os={class:"q-pa-md",style:{"max-width":"350px"}},Ls={class:"row cardheader justify-between"},Qs={class:"history-remove hidden"},zs={key:0,class:"fi fi-gb"},Ys={key:1,class:"fi fi-us"},Es={key:2,class:"fi fi-mx"},Ws={key:3,class:"fi fi-fr"},Fs={key:4,class:"fi fi-de"},Js={key:5,class:"fi fi-it"},Gs={key:6,class:"fi fi-br"},js={key:7,class:"fi fi-ke"},Xs={key:8,class:"fi fi-ru"},Zs={key:9,class:"fi fi-th"},ea={key:10,class:"fi fi-cn"},ta={key:11,class:"fi fi-hk"},sa={key:12,class:"fi fi-tw"},aa={key:13,class:"fi fi-kr"},oa={key:14,class:"fi fi-jp"},la={key:15,class:"fi fi-id"},na={key:16,class:"fi fi-xx"},ia={class:"history-remove ptr"};function ra(e,a,d,w,b,N){return c(),f("div",Os,[s(Ie,{bordered:"",class:"rounded-borders"},{default:l(()=>[s(ke,{label:"Wikipedia Bookmarks"},{header:l(()=>[s(F,{avatar:""},{default:l(()=>[s(Ne,{icon:"bookmark"})]),_:1}),s(F,null,{default:l(()=>[v(" Bookmarks ")]),_:1})]),default:l(()=>[s(T,null,{default:l(()=>[i("div",null,[(c(!0),f(G,null,Ce(this.reStore.userSnapshot.bookmarks,(u,r)=>(c(),E(T,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":a[0]||(a[0]=k=>this.reStore.userSnapshot.bookmarks=k),key:r},{default:l(()=>[i("div",Ls,[i("span",Qs,[s(q)]),u.langVoiceKey==="Eng-UK-Fem"?(c(),f("span",zs)):u.langVoiceKey==="Eng-US"?(c(),f("span",Ys)):u.langVoiceKey==="espa\xF1ol"?(c(),f("span",Es)):u.langVoiceKey==="fran\xE7ais"?(c(),f("span",Ws)):u.langVoiceKey==="Deutsch"?(c(),f("span",Fs)):u.langVoiceKey==="italiano"?(c(),f("span",Js)):u.langVoiceKey==="portugu\xEAs do Brasil"?(c(),f("span",Gs)):u.langVoiceKey==="Kiswahili"?(c(),f("span",js)):u.langVoiceKey==="\u0440\u0443\u0441\u0441\u043A\u0438\u0439"?(c(),f("span",Xs)):u.langVoiceKey==="\u0E44\u0E17\u0E22"?(c(),f("span",Zs)):u.langVoiceKey==="\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09"?(c(),f("span",ea)):u.langVoiceKey==="\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09"?(c(),f("span",ta)):u.langVoiceKey==="\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09"?(c(),f("span",sa)):u.langVoiceKey==="\uD55C\uAD6D\uC758"?(c(),f("span",aa)):u.langVoiceKey==="\u65E5\u672C\u8A9E"?(c(),f("span",oa)):u.langVoiceKey==="Bahasa Indonesia"?(c(),f("span",la)):(c(),f("span",na)),v(" "+_(u.pageTitle.slice(0,25))+" ",1),i("span",ia,[s(q,{name:"close",onClick:k=>this.remove(r,u)},null,8,["onClick"])])]),s(Re,{class:"cardimage",onClick:k=>this.imgCB(r,u),src:u.imgs[u.imgIdx].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])}var ua=re(Hs,[["render",ra]]);const da=["gregorian","persian"],ca={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>da.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},ma=["update:modelValue"];function le(e){return e.year+"/"+he(e.month)+"/"+he(e.day)}function ha(e,a){const d=V(()=>e.disable!==!0&&e.readonly!==!0),w=V(()=>e.editable===!0?0:-1),b=V(()=>{const r=[];return e.color!==void 0&&r.push(`bg-${e.color}`),e.textColor!==void 0&&r.push(`text-${e.textColor}`),r.join(" ")});function N(){return e.locale!==void 0?{...a.lang.date,...e.locale}:a.lang.date}function u(r){const k=new Date,x=r===!0?null:0;if(e.calendar==="persian"){const ee=ms(k);return{year:ee.jy,month:ee.jm,day:ee.jd}}return{year:k.getFullYear(),month:k.getMonth()+1,day:k.getDate(),hour:x,minute:x,second:x,millisecond:x}}return{editable:d,tabindex:w,headerClass:b,getLocale:N,getCurrentDate:u}}const me=20,ga=["Calendar","Years","Months"],Tt=e=>ga.includes(e),ot=e=>/^-?[\d]+\/[0-1]\d$/.test(e),_e=" \u2014 ";function ne(e){return e.year+"/"+he(e.month)}var fa=nt({name:"QDate",props:{...ca,...Xt,...ys,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:ot},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:ot},navigationMaxYearMonth:{type:String,validator:ot},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Tt}},emits:[...ma,"rangeStart","rangeEnd","navigation"],setup(e,{slots:a,emit:d}){const{proxy:w}=ls(),{$q:b}=w,N=_s(e,b),{getCache:u}=ts(),{tabindex:r,headerClass:k,getLocale:x,getCurrentDate:ee}=ha(e,b);let ge;const He=Zt(e),Oe=es(He),Ve=g(null),te=g(gt()),B=g(x()),Le=V(()=>gt()),A=V(()=>x()),se=V(()=>ee()),S=g(ft(te.value,B.value)),z=g(e.defaultView),it=b.lang.rtl===!0?"right":"left",qe=g(it.value),Qe=g(it.value),ze=S.value.year,Te=g(ze-ze%me-(ze<0?me:0)),H=g(null),Bt=V(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(N.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),de=V(()=>e.color||"primary"),fe=V(()=>e.textColor||"white"),Pe=V(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Ye=V(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),J=V(()=>Ye.value.filter(t=>typeof t=="string").map(t=>Je(t,te.value,B.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),pe=V(()=>{const t=o=>Je(o,te.value,B.value);return Ye.value.filter(o=>as(o)===!0&&o.from!==void 0&&o.to!==void 0).map(o=>({from:t(o.from),to:t(o.to)})).filter(o=>o.from.dateHash!==null&&o.to.dateHash!==null&&o.from.dateHash<o.to.dateHash)}),Ke=V(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const o=Dt(t.year,t.month,t.day);return new Date(o.gy,o.gm-1,o.gd)}),Ee=V(()=>e.calendar==="persian"?le:(t,o,n)=>hs(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),o===void 0?te.value:o,n===void 0?B.value:n,t.year,t.timezoneOffset)),$e=V(()=>J.value.length+pe.value.reduce((t,o)=>t+1+gs(Ke.value(o.to),Ke.value(o.from)),0)),rt=V(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(H.value!==null){const n=H.value.init,h=Ke.value(n);return B.value.daysShort[h.getDay()]+", "+B.value.monthsShort[n.month-1]+" "+n.day+_e+"?"}if($e.value===0)return _e;if($e.value>1)return`${$e.value} ${B.value.pluralDay}`;const t=J.value[0],o=Ke.value(t);return isNaN(o.valueOf())===!0?_e:B.value.headerTitle!==void 0?B.value.headerTitle(o,t):B.value.daysShort[o.getDay()]+", "+B.value.monthsShort[t.month-1]+" "+t.day}),Ut=V(()=>J.value.concat(pe.value.map(o=>o.from)).sort((o,n)=>o.year-n.year||o.month-n.month)[0]),Mt=V(()=>J.value.concat(pe.value.map(o=>o.to)).sort((o,n)=>n.year-o.year||n.month-o.month)[0]),ut=V(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if($e.value===0)return _e;if($e.value>1){const t=Ut.value,o=Mt.value,n=B.value.monthsShort;return n[t.month-1]+(t.year!==o.year?" "+t.year+_e+n[o.month-1]+" ":t.month!==o.month?_e+n[o.month-1]:"")+" "+o.year}return J.value[0].year}),Be=V(()=>{const t=[b.iconSet.datetime.arrowLeft,b.iconSet.datetime.arrowRight];return b.lang.rtl===!0?t.reverse():t}),dt=V(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):B.value.firstDayOfWeek),Rt=V(()=>{const t=B.value.daysShort,o=dt.value;return o>0?t.slice(o,7).concat(t.slice(0,o)):t}),oe=V(()=>{const t=S.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():at(t.year,t.month)}),At=V(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),O=V(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),L=V(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),We=V(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return O.value!==null&&O.value.year>=S.value.year&&(t.year.prev=!1,O.value.year===S.value.year&&O.value.month>=S.value.month&&(t.month.prev=!1)),L.value!==null&&L.value.year<=S.value.year&&(t.year.next=!1,L.value.year===S.value.year&&L.value.month<=S.value.month&&(t.month.next=!1)),t}),Ue=V(()=>{const t={};return J.value.forEach(o=>{const n=ne(o);t[n]===void 0&&(t[n]=[]),t[n].push(o.day)}),t}),ct=V(()=>{const t={};return pe.value.forEach(o=>{const n=ne(o.from),h=ne(o.to);if(t[n]===void 0&&(t[n]=[]),t[n].push({from:o.from.day,to:n===h?o.to.day:void 0,range:o}),n<h){let m;const{year:D,month:p}=o.from,$=p<12?{year:D,month:p+1}:{year:D+1,month:1};for(;(m=ne($))<=h;)t[m]===void 0&&(t[m]=[]),t[m].push({from:void 0,to:m===h?o.to.day:void 0,range:o}),$.month++,$.month>12&&($.year++,$.month=1)}}),t}),we=V(()=>{if(H.value===null)return;const{init:t,initHash:o,final:n,finalHash:h}=H.value,[m,D]=o<=h?[t,n]:[n,t],p=ne(m),$=ne(D);if(p!==W.value&&$!==W.value)return;const K={};return p===W.value?(K.from=m.day,K.includeFrom=!0):K.from=1,$===W.value?(K.to=D.day,K.includeTo=!0):K.to=oe.value,K}),W=V(()=>ne(S.value)),Nt=V(()=>{const t={};if(e.options===void 0){for(let n=1;n<=oe.value;n++)t[n]=!0;return t}const o=typeof e.options=="function"?e.options:n=>e.options.includes(n);for(let n=1;n<=oe.value;n++){const h=W.value+"/"+he(n);t[n]=o(h)}return t}),It=V(()=>{const t={};if(e.events===void 0)for(let o=1;o<=oe.value;o++)t[o]=!1;else{const o=typeof e.events=="function"?e.events:n=>e.events.includes(n);for(let n=1;n<=oe.value;n++){const h=W.value+"/"+he(n);t[n]=o(h)===!0&&At.value(h)}}return t}),Ht=V(()=>{let t,o;const{year:n,month:h}=S.value;if(e.calendar!=="persian")t=new Date(n,h-1,1),o=new Date(n,h-1,0).getDate();else{const m=Dt(n,h,1);t=new Date(m.gy,m.gm-1,m.gd);let D=h-1,p=n;D===0&&(D=12,p--),o=at(p,D)}return{days:t.getDay()-dt.value-1,endDay:o}}),mt=V(()=>{const t=[],{days:o,endDay:n}=Ht.value,h=o<0?o+7:o;if(h<6)for(let p=n-h;p<=n;p++)t.push({i:p,fill:!0});const m=t.length;for(let p=1;p<=oe.value;p++){const $={i:p,event:It.value[p],classes:[]};Nt.value[p]===!0&&($.in=!0,$.flat=!0),t.push($)}if(Ue.value[W.value]!==void 0&&Ue.value[W.value].forEach(p=>{const $=m+p-1;Object.assign(t[$],{selected:!0,unelevated:!0,flat:!1,color:de.value,textColor:fe.value})}),ct.value[W.value]!==void 0&&ct.value[W.value].forEach(p=>{if(p.from!==void 0){const $=m+p.from-1,K=m+(p.to||oe.value)-1;for(let et=$;et<=K;et++)Object.assign(t[et],{range:p.range,unelevated:!0,color:de.value,textColor:fe.value});Object.assign(t[$],{rangeFrom:!0,flat:!1}),p.to!==void 0&&Object.assign(t[K],{rangeTo:!0,flat:!1})}else if(p.to!==void 0){const $=m+p.to-1;for(let K=m;K<=$;K++)Object.assign(t[K],{range:p.range,unelevated:!0,color:de.value,textColor:fe.value});Object.assign(t[$],{flat:!1,rangeTo:!0})}else{const $=m+oe.value-1;for(let K=m;K<=$;K++)Object.assign(t[K],{range:p.range,unelevated:!0,color:de.value,textColor:fe.value})}}),we.value!==void 0){const p=m+we.value.from-1,$=m+we.value.to-1;for(let K=p;K<=$;K++)t[K].color=de.value,t[K].editRange=!0;we.value.includeFrom===!0&&(t[p].editRangeFrom=!0),we.value.includeTo===!0&&(t[$].editRangeTo=!0)}S.value.year===se.value.year&&S.value.month===se.value.month&&(t[m+se.value.day-1].today=!0);const D=t.length%7;if(D>0){const p=7-D;for(let $=1;$<=p;$++)t.push({i:$,fill:!0})}return t.forEach(p=>{let $="q-date__calendar-item ";p.fill===!0?$+="q-date__calendar-item--fill":($+=`q-date__calendar-item--${p.in===!0?"in":"out"}`,p.range!==void 0&&($+=` q-date__range${p.rangeTo===!0?"-to":p.rangeFrom===!0?"-from":""}`),p.editRange===!0&&($+=` q-date__edit-range${p.editRangeFrom===!0?"-from":""}${p.editRangeTo===!0?"-to":""}`),(p.range!==void 0||p.editRange===!0)&&($+=` text-${p.color}`)),p.classes=$}),t}),Ot=V(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});Y(()=>e.modelValue,t=>{if(ge===t)ge=0;else{const{year:o,month:n}=ft(te.value,B.value);ve(o,n)}}),Y(z,()=>{Ve.value!==null&&w.$el.contains(document.activeElement)===!0&&Ve.value.focus()}),Y(()=>S.value.year,t=>{d("navigation",{year:t,month:S.value.month})}),Y(()=>S.value.month,t=>{d("navigation",{year:S.value.year,month:t})}),Y(Le,t=>{St(t,B.value,"mask"),te.value=t}),Y(A,t=>{St(te.value,t,"locale"),B.value=t});function ht(){const t=se.value,o=Ue.value[ne(t)];(o===void 0||o.includes(t.day)===!1)&&je(t),Fe(t.year,t.month)}function Lt(t){Tt(t)===!0&&(z.value=t)}function Qt(t,o){["month","year"].includes(t)&&(t==="month"?vt:Ge)(o===!0?-1:1)}function Fe(t,o){z.value="Calendar",ve(t,o)}function zt(t,o){if(e.range===!1||!t){H.value=null;return}const n=Object.assign({...S.value},t),h=o!==void 0?Object.assign({...S.value},o):n;H.value={init:n,initHash:le(n),final:h,finalHash:le(h)},Fe(n.year,n.month)}function gt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Je(t,o,n){return fs(t,o,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function ft(t,o){const n=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(n.length===0)return pt();const h=n[n.length-1],m=Je(h.from!==void 0?h.from:h,t,o);return m.dateHash===null?pt():m}function pt(){let t,o;if(e.defaultYearMonth!==void 0){const n=e.defaultYearMonth.split("/");t=parseInt(n[0],10),o=parseInt(n[1],10)}else{const n=se.value!==void 0?se.value:ee();t=n.year,o=n.month}return{year:t,month:o,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+he(o)+"/01"}}function vt(t){let o=S.value.year,n=Number(S.value.month)+t;n===13?(n=1,o++):n===0&&(n=12,o--),ve(o,n),Pe.value===!0&&Me("month")}function Ge(t){const o=Number(S.value.year)+t;ve(o,S.value.month),Pe.value===!0&&Me("year")}function Yt(t){ve(t,S.value.month),z.value=e.defaultView==="Years"?"Months":"Calendar",Pe.value===!0&&Me("year")}function Et(t){ve(S.value.year,t),z.value="Calendar",Pe.value===!0&&Me("month")}function Wt(t,o){const n=Ue.value[o];(n!==void 0&&n.includes(t.day)===!0?Xe:je)(t)}function ce(t){return{year:t.year,month:t.month,day:t.day}}function ve(t,o){O.value!==null&&t<=O.value.year&&(t=O.value.year,o<O.value.month&&(o=O.value.month)),L.value!==null&&t>=L.value.year&&(t=L.value.year,o>L.value.month&&(o=L.value.month));const n=t+"/"+he(o)+"/01";n!==S.value.dateHash&&(qe.value=S.value.dateHash<n==(b.lang.rtl!==!0)?"left":"right",t!==S.value.year&&(Qe.value=qe.value),Ct(()=>{Te.value=t-t%me-(t<0?me:0),Object.assign(S.value,{year:t,month:o,day:1,dateHash:n})}))}function yt(t,o,n){const h=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;ge=h;const{reason:m,details:D}=_t(o,n);d("update:modelValue",h,m,D)}function Me(t){const o=J.value[0]!==void 0&&J.value[0].dateHash!==null?{...J.value[0]}:{...S.value};Ct(()=>{o.year=S.value.year,o.month=S.value.month;const n=e.calendar!=="persian"?new Date(o.year,o.month,0).getDate():at(o.year,o.month);o.day=Math.min(Math.max(1,o.day),n);const h=ye(o);ge=h;const{details:m}=_t("",o);d("update:modelValue",h,t,m)})}function _t(t,o){return o.from!==void 0?{reason:`${t}-range`,details:{...ce(o.target),from:ce(o.from),to:ce(o.to)}}:{reason:`${t}-day`,details:ce(o)}}function ye(t,o,n){return t.from!==void 0?{from:Ee.value(t.from,o,n),to:Ee.value(t.to,o,n)}:Ee.value(t,o,n)}function je(t){let o;if(e.multiple===!0)if(t.from!==void 0){const n=le(t.from),h=le(t.to),m=J.value.filter(p=>p.dateHash<n||p.dateHash>h),D=pe.value.filter(({from:p,to:$})=>$.dateHash<n||p.dateHash>h);o=m.concat(D).concat(t).map(p=>ye(p))}else{const n=Ye.value.slice();n.push(ye(t)),o=n}else o=ye(t);yt(o,"add",t)}function Xe(t){if(e.noUnset===!0)return;let o=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const n=ye(t);t.from!==void 0?o=e.modelValue.filter(h=>h.from!==void 0?h.from!==n.from&&h.to!==n.to:!0):o=e.modelValue.filter(h=>h!==n),o.length===0&&(o=null)}yt(o,"remove",t)}function St(t,o,n){const h=J.value.concat(pe.value).map(m=>ye(m,t,o)).filter(m=>m.from!==void 0?m.from.dateHash!==null&&m.to.dateHash!==null:m.dateHash!==null);d("update:modelValue",(e.multiple===!0?h:h[0])||null,n)}function Ft(){if(e.minimal!==!0)return y("div",{class:"q-date__header "+k.value},[y("div",{class:"relative-position"},[y(be,{name:"q-transition--fade"},()=>y("div",{key:"h-yr-"+ut.value,class:"q-date__header-subtitle q-date__header-link "+(z.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:r.value,...u("vY",{onClick(){z.value="Years"},onKeyup(t){t.keyCode===13&&(z.value="Years")}})},[ut.value]))]),y("div",{class:"q-date__header-title relative-position flex no-wrap"},[y("div",{class:"relative-position col"},[y(be,{name:"q-transition--fade"},()=>y("div",{key:"h-sub"+rt.value,class:"q-date__header-title-label q-date__header-link "+(z.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:r.value,...u("vC",{onClick(){z.value="Calendar"},onKeyup(t){t.keyCode===13&&(z.value="Calendar")}})},[rt.value]))]),e.todayBtn===!0?y(C,{class:"q-date__header-today self-start",icon:b.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:r.value,onClick:ht}):null])])}function Ze({label:t,type:o,key:n,dir:h,goTo:m,boundaries:D,cls:p}){return[y("div",{class:"row items-center q-date__arrow"},[y(C,{round:!0,dense:!0,size:"sm",flat:!0,icon:Be.value[0],tabindex:r.value,disable:D.prev===!1,...u("go-#"+o,{onClick(){m(-1)}})})]),y("div",{class:"relative-position overflow-hidden flex flex-center"+p},[y(be,{name:"q-transition--jump-"+h},()=>y("div",{key:n},[y(C,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:r.value,...u("view#"+o,{onClick:()=>{z.value=o}})})]))]),y("div",{class:"row items-center q-date__arrow"},[y(C,{round:!0,dense:!0,size:"sm",flat:!0,icon:Be.value[1],tabindex:r.value,disable:D.next===!1,...u("go+#"+o,{onClick(){m(1)}})})])]}const Jt={Calendar:()=>[y("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[y("div",{class:"q-date__navigation row items-center no-wrap"},Ze({label:B.value.months[S.value.month-1],type:"Months",key:S.value.month,dir:qe.value,goTo:vt,boundaries:We.value.month,cls:" col"}).concat(Ze({label:S.value.year,type:"Years",key:S.value.year,dir:Qe.value,goTo:Ge,boundaries:We.value.year,cls:""}))),y("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Rt.value.map(t=>y("div",{class:"q-date__calendar-item"},[y("div",t)]))),y("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[y(be,{name:"q-transition--slide-"+qe.value},()=>y("div",{key:W.value,class:"q-date__calendar-days fit"},mt.value.map(t=>y("div",{class:t.classes},[t.in===!0?y(C,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:r.value,...u("day#"+t.i,{onClick:()=>{Gt(t.i)},onMouseover:()=>{jt(t.i)}})},t.event!==!1?()=>y("div",{class:"q-date__event bg-"+t.event}):null):y("div",""+t.i)]))))])])],Months(){const t=S.value.year===se.value.year,o=h=>O.value!==null&&S.value.year===O.value.year&&O.value.month>h||L.value!==null&&S.value.year===L.value.year&&L.value.month<h,n=B.value.monthsShort.map((h,m)=>{const D=S.value.month===m+1;return y("div",{class:"q-date__months-item flex flex-center"},[y(C,{class:t===!0&&se.value.month===m+1?"q-date__today":null,flat:D!==!0,label:h,unelevated:D,color:D===!0?de.value:null,textColor:D===!0?fe.value:null,tabindex:r.value,disable:o(m+1),...u("month#"+m,{onClick:()=>{Et(m+1)}})})])});return e.yearsInMonthView===!0&&n.unshift(y("div",{class:"row no-wrap full-width"},[Ze({label:S.value.year,type:"Years",key:S.value.year,dir:Qe.value,goTo:Ge,boundaries:We.value.year,cls:" col"})])),y("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const t=Te.value,o=t+me,n=[],h=m=>O.value!==null&&O.value.year>m||L.value!==null&&L.value.year<m;for(let m=t;m<=o;m++){const D=S.value.year===m;n.push(y("div",{class:"q-date__years-item flex flex-center"},[y(C,{key:"yr"+m,class:se.value.year===m?"q-date__today":null,flat:!D,label:m,dense:!0,unelevated:D,color:D===!0?de.value:null,textColor:D===!0?fe.value:null,tabindex:r.value,disable:h(m),...u("yr#"+m,{onClick:()=>{Yt(m)}})})]))}return y("div",{class:"q-date__view q-date__years flex flex-center"},[y("div",{class:"col-auto"},[y(C,{round:!0,dense:!0,flat:!0,icon:Be.value[0],tabindex:r.value,disable:h(t),...u("y-",{onClick:()=>{Te.value-=me}})})]),y("div",{class:"q-date__years-content col self-stretch row items-center"},n),y("div",{class:"col-auto"},[y(C,{round:!0,dense:!0,flat:!0,icon:Be.value[1],tabindex:r.value,disable:h(o),...u("y+",{onClick:()=>{Te.value+=me}})})])])}};function Gt(t){const o={...S.value,day:t};if(e.range===!1){Wt(o,W.value);return}if(H.value===null){const n=mt.value.find(m=>m.fill!==!0&&m.i===t);if(e.noUnset!==!0&&n.range!==void 0){Xe({target:o,from:n.range.from,to:n.range.to});return}if(n.selected===!0){Xe(o);return}const h=le(o);H.value={init:o,initHash:h,final:o,finalHash:h},d("rangeStart",ce(o))}else{const n=H.value.initHash,h=le(o),m=n<=h?{from:H.value.init,to:o}:{from:o,to:H.value.init};H.value=null,je(n===h?o:{target:o,...m}),d("rangeEnd",{from:ce(m.from),to:ce(m.to)})}}function jt(t){if(H.value!==null){const o={...S.value,day:t};Object.assign(H.value,{final:o,finalHash:le(o)})}}return Object.assign(w,{setToday:ht,setView:Lt,offsetCalendar:Qt,setCalendarTo:Fe,setEditingRange:zt}),()=>{const t=[y("div",{class:"q-date__content col relative-position"},[y(be,{name:"q-transition--fade"},Jt[z.value])])],o=os(a.default);return o!==void 0&&t.push(y("div",{class:"q-date__actions"},o)),e.name!==void 0&&e.disable!==!0&&Oe(t,"push"),y("div",{class:Bt.value,...Ot.value},[Ft(),y("div",{ref:Ve,class:"q-date__main col column",tabindex:-1},t)])}}});const pa=["top","middle","bottom"];var va=nt({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>pa.includes(e)}},setup(e,{slots:a}){const d=V(()=>e.align!==void 0?{verticalAlign:e.align}:null),w=V(()=>{const b=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(b!==void 0?` text-${b}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>y("div",{class:w.value,style:d.value,role:"status","aria-label":e.label},ns(a.default,e.label!==void 0?[e.label]:[]))}});const ya=ie({name:"OTDComponent",setup(){const e=ue(),a=Date.now(),d=xt.formatDate(a,"MM/DD");return{reStore:e,otditems:g([]),promptOTDDate:g(!1),otddate:g(Date.now()),otdlabel:g(d),otdtype:g("selected")}},mounted(){this.init(),Y(this.reStore.preferences,async(e,a)=>{console.log("OTD watcher"),e.langVoiceKey!==a.langVoiceKey?this.init():(console.log("OTD watcher ",e),this.init())})},methods:{async init(){console.log("OTD init");const e=this.reStore.preferences.langVoiceKey;await this.reStore.wiki.setLang(this.reStore.langVoices[e].langName);const a=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=a[this.otdtype],console.log(this.otditems);for(const[w,b]of Object.entries(this.reStore.langVoices)){const N=b.flagName;I("#otdfi").classed(N,!1)}const d=this.reStore.langVoices[e].flagName;I("#otdfi").classed(d,!0)},async loadPageId(e){console.log("loadPageId ",e);const a=this.reStore.preferences.langVoiceKey;console.log("OTD load ",a),this.reStore.loadPageId(e,a),this.reStore.router.push("/teacher/editor")},async load(e){console.log("load",this.otditems[e].text),console.log("load",this.otditems[e]);const a=this.reStore.preferences.langVoiceKey;console.log("OTD load ",a),this.reStore.loadPageId(this.otditems[e].pages[0].pageid,a),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const e=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=e.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=xt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(e){console.log("otdOptionsCB",this.otdtype);const a=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=a[this.otdtype]}}}),_a=i("div",{class:"text-h6"},"Select Date",-1),Sa={class:"q-pa-md",style:{"max-width":"350px"}},Ca={class:"q-gutter-y-sm column"},ka=i("span",{id:"otdfi",class:"pfi text-h4"},null,-1),Va={class:""},$a=["onClick"],wa=i("br",null,null,-1);function ba(e,a,d,w,b,N){return c(),f(G,null,[s(X,{modelValue:e.promptOTDDate,"onUpdate:modelValue":a[2]||(a[2]=u=>e.promptOTDDate=u),persistent:""},{default:l(()=>[s(T,{style:{"min-width":"350px"}},{default:l(()=>[s(U,{align:"center"},{default:l(()=>[_a]),_:1}),s(fa,{modelValue:e.otddate,"onUpdate:modelValue":a[0]||(a[0]=u=>e.otddate=u),minimal:""},null,8,["modelValue"]),s(j,{align:"center",class:"text-white"},{default:l(()=>[M(s(C,{flat:"",label:"Cancel"},null,512),[[R]]),M(s(C,{flat:"",label:"Update OTD date",onClick:a[1]||(a[1]=u=>this.updateOTDDate())},null,512),[[R]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i("div",Sa,[s(Ie,{bordered:"",class:"rounded-borders"},{default:l(()=>[s(ke,null,{header:l(()=>[s(F,{avatar:""},{default:l(()=>[s(Ne,{icon:"stars"})]),_:1}),s(F,null,{default:l(()=>[v(" On This Day ")]),_:1})]),default:l(()=>[s(T,null,{default:l(()=>[i("div",Ca,[s(Se,{class:"bg-primary text-white rounded-borders q-my-md"},{default:l(()=>[s(C,{dark:"",standout:"",onClick:a[3]||(a[3]=u=>e.promptOTDDate=!0)},{default:l(()=>[v(_(e.otdlabel),1)]),_:1}),s(Ae),ka,s(Ae),s(lt,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":a[4]||(a[4]=u=>this.otdtype=u),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:a[5]||(a[5]=u=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),i("div",Va,[(c(!0),f(G,null,Ce(e.otditems,(u,r)=>(c(),E(T,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:e.otditems,"onUpdate:modelValue":a[6]||(a[6]=k=>e.otditems=k),key:r},{default:l(()=>[i("span",{style:{cursor:"pointer"},onClick:k=>this.load(r)},_(r),9,$a),v(". "+_(u.year)+" "+_(u.text),1),wa,(c(!0),f(G,null,Ce(u.pages,(k,x)=>(c(),f("span",{key:x},[s(va,{class:"on-left",color:"accent",style:{cursor:"pointer"},onClick:ee=>this.loadPageId(k.pageid)},{default:l(()=>[s(P,null,{default:l(()=>[v(_(k.title),1)]),_:2},1024),s(q,{size:"xs",name:"link"})]),_:2},1032,["onClick"])]))),128))]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])],64)}var Da=re(ya,[["render",ba]]);const xa=ie({name:"CurrentAssignment",setup(){const e=ue();return{reStore:e,ck:g("-"),goal:g("-"),created:g("-"),updated:g("-"),id:g("-"),points:g("-"),pages:g([]),pgIdx:g(e.courses.pgIdx),title:g(""),promptEditTitle:g(!1)}},mounted(){console.log("CurrentAssignment mounted"),Y(this.reStore.courses,async(e,a)=>{try{console.log("CurrentAssignment.watcher");const d=e.ck,w=e.aid;this.id=w,this.ck=d,this.goal=this.reStore.courses[d].assignments[w].goal,this.created=this.reStore.courses[d].assignments[w].created,this.updated=this.reStore.courses[d].assignments[w].updated,this.points=this.reStore.courses[d].assignments[w].points;try{const b=this.reStore.courses[d].assignments[w].pages.length;console.log("pages.length ",b)}catch{this.reStore.courses[d].assignments[w].pages=[]}this.pages=this.reStore.courses[d].assignments[w].pages,this.title=this.reStore.courses[d].assignments[w].title,this.pgIdx=this.reStore.courses.pgIdx}catch(d){console.log(d)}},{immediate:!0,deep:!0})},methods:{save(){console.log("save"),this.reStore.saveCurrentAssignment()},nextPage(){this.reStore.nextPage()},changeTitleCB(){console.log("CurrentAssignment.changeTitleCB",this.title),this.reStore.setAssignmentTitle(this.reStore.courses.ck,this.reStore.courses.aid,this.title)}}}),qa=i("div",{class:"text-h6"},"Change assignment title",-1),Ta={class:"text-weight-bolder text-center q-pa-md text-white"},Pa=i("br",null,null,-1),Ka={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Ba={width:"100%"},Ua=i("td",null,"Title",-1),Ma={style:{width:"50%"}},Ra=i("td",null,"Course-Key",-1),Aa={style:{width:"50%"}},Na=i("td",null,"Assgmnt Id",-1),Ia={style:{width:"50%"}},Ha=i("td",null,"Created",-1),Oa={style:{width:"50%"}},La=i("td",null,"Updated",-1),Qa={style:{width:"50%"}},za=i("td",null,"Goal",-1),Ya={style:{width:"50%"}},Ea=i("td",null,"Pages",-1);function Wa(e,a,d,w,b,N){const u=Q("router-link");return c(),f(G,null,[s(X,{modelValue:e.promptEditTitle,"onUpdate:modelValue":a[3]||(a[3]=r=>e.promptEditTitle=r),persistent:""},{default:l(()=>[s(T,{style:{"min-width":"350px"}},{default:l(()=>[s(U,null,{default:l(()=>[qa]),_:1}),s(U,{class:"q-pt-none"},{default:l(()=>[s(Z,{dense:"",modelValue:e.title,"onUpdate:modelValue":a[0]||(a[0]=r=>e.title=r),autofocus:"",onKeyup:a[1]||(a[1]=De(r=>{e.prompt=!1,this.changeTitleCB()},["enter"]))},null,8,["modelValue"])]),_:1}),s(j,{align:"right",class:"text-white"},{default:l(()=>[M(s(C,{outline:"",label:"Cancel"},null,512),[[R]]),M(s(C,{outline:"",label:"Save",onClick:a[2]||(a[2]=r=>this.changeTitleCB())},null,512),[[R]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(T,{flat:""},{default:l(()=>[s(U,null,{default:l(()=>[i("div",Ta,[s(u,{to:"/teacher/editor",class:"text-white"},{default:l(()=>[v(_(this.title.slice(0,20)),1)]),_:1}),Pa,s(q,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:a[4]||(a[4]=r=>this.promptEditTitle=!0),size:"sm"}),s(q,{style:{cursor:"pointer"},class:"on-right",name:"save",onClick:this.save,size:"sm"},null,8,["onClick"])]),i("div",Ka,[i("table",Ba,[i("tr",null,[Ua,i("td",Ma,_(this.title),1)]),i("tr",null,[Ra,i("td",Aa,_(this.ck),1)]),i("tr",null,[Na,i("td",Ia,_(this.id),1)]),i("tr",null,[Ha,i("td",Oa,_(this.created),1)]),i("tr",null,[La,i("td",Qa,_(this.updated),1)]),i("tr",null,[za,i("td",Ya,_(this.goal),1)]),i("tr",null,[Ea,i("td",{style:{width:"50%",cursor:"pointer"},onClick:a[5]||(a[5]=r=>this.nextPage())},_(this.pgIdx+1)+" / "+_(this.pages.length),1)])])])]),_:1})]),_:1})],64)}var Fa=re(xa,[["render",Wa]]);const Ja=ie({name:"CurrentCourse",setup(){return{reStore:ue(),title:g(""),assignmentCount:g(0),courseKey:g(""),created:g(""),updated:g(""),enrollmentCount:g(0),owner:g("")}},mounted(){console.log("CurrentCourse mounted"),Y(this.reStore.courses,async(e,a)=>{try{if(this.reStore.courses.ck!=="undefined"){const d=this.reStore.courses.ck;console.log("CurrentCourse ",d),this.title=this.reStore.courses[d].title,this.courseKey=this.reStore.courses[d].courseKey,this.created=this.reStore.courses[d].created,this.updated=this.reStore.courses[d].updated,this.assignmentCount=Object.keys(this.reStore.courses[d].assignments).length,this.enrollmentCount=Object.keys(this.reStore.courses[d].enrollment).length,this.owner=this.reStore.courses[d].owner}}catch(d){console.log(d)}},{immediate:!0,deep:!0})},methods:{dummy(){console.log("dummy")}}}),Ga={class:"text-weight-bolder text-center q-pa-md"},ja={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Xa={width:"100%"},Za=i("td",null,"Title",-1),eo={style:{width:"50%"}},to=i("td",null,"Course-Key",-1),so={style:{width:"50%"}},ao=i("td",null,"Created",-1),oo={style:{width:"50%"}},lo=i("td",null,"Updated",-1),no={style:{width:"50%"}},io=i("td",null,"Owner",-1),ro={style:{width:"50%"}},uo=i("td",null,"Assignments",-1),co={style:{width:"50%"}},mo=i("td",null,"Enrollment",-1),ho={style:{width:"50%"}};function go(e,a,d,w,b,N){return c(),E(T,{flat:""},{default:l(()=>[s(U,null,{default:l(()=>[i("div",Ga,_(this.title),1),i("div",ja,[i("table",Xa,[i("tr",null,[Za,i("td",eo,_(this.title),1)]),i("tr",null,[to,i("td",so,_(this.courseKey),1)]),i("tr",null,[ao,i("td",oo,_(this.created),1)]),i("tr",null,[lo,i("td",no,_(this.updated),1)]),i("tr",null,[io,i("td",ro,_(this.owner.slice(0,10)),1)]),i("tr",null,[uo,i("td",co,_(this.assignmentCount),1)]),i("tr",null,[mo,i("td",ho,_(this.enrollmentCount),1)])])])]),_:1})]),_:1})}var fo=re(Ja,[["render",go]]);function Pt(e){return e===null||e===""?!1:(e=e.toString(),e=e.replaceAll("&nbsp;",""),e.replace(/(<([^>]+)>)/ig,""))}const po=ie({name:"PagerComponent",setup(){const e=ue();return{reStore:e,assignment:g(null),promptAssignmentTitle:g(!1),promptPageTitle:g(!1),promptPctReplace:g(!1),promptLanguage:g(!1),promptGuideWords:g(!1),langVoices:g(e.preferences.langVoices),targetLangVoiceKey:g(null),targetPctReplace:g(null),targetGuideWords:g(null)}},mounted(){console.log("mounted"),this.reStore.courses.ck&&this.reStore.courses.aid&&(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[this.reStore.courses.ck].assignments[this.reStore.courses.aid]))),Y(this.reStore.courses,async(e,a)=>{this.reStore.courses.ck||(this.assignment=null),this.reStore.courses.aid||(this.assignment=null),this.assignment&&e.aid&&e.ck&&this.assignment.pages.length!=e[e.ck].assignments[e.aid].pages.length&&(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid])),console.log("Pager reloading assignment b/c pages.length changed")),!this.assignment&&e.ck&&e.aid?(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid])),console.log("Pager loaded fresh copy of assignment")):e.aid&&e.ck&&this.assignment.coverUrl!=e[e.ck].assignments.coverUrl?(this.assignment.coverUrl=e[e.ck].assignments[e.aid].coverUrl,console.log("Pager coverUrl")):this.assignment.ck!==e.ck||this.assignment.id!==e.aid?(console.log("PagerComponent assignment changed"),this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid]))):console.log("Pager nothing seems to have changed")})},methods:{pctCB(e){this.targetPgIdx=e,this.targetPctReplace=this.assignment.pages[e].pctReplace,this.promptPctReplace=!0},updatePctReplaceCB(){console.log("updatePctReplaceCB "),this.assignment.pages[this.targetPgIdx].pctReplace=this.targetPctReplace,this.targetPgIdx==this.reStore.courses.pgIdx?(console.log("updating restore.page.pctReplace",this.targetPctReplace,this.assignment.pages[this.targetPgIdx].pctReplace),this.reStore.page.pctReplace=parseInt(this.targetPctReplace)):console.log("Not updating pctReplace",this.targetPgIdx,this.reStore.courses.pgIdx),this.targetPctReplace=null,this.targetPgIdx=null},wpCB(e){console.log("wpCB",e),this.assignment.pages[e].pageid;const a=this.assignment.pages[e].canonicalUrl;window.open(a,"_blank")},gwCB(e){console.log("updateGuideWords",e),this.targetPgIdx=e,this.targetGuideWords=this.assignment.pages[e].guideWords,this.promptGuideWords=!0},updateGuideWordsCB(){console.log(),this.assignment.pages[this.targetPgIdx].guideWords=this.targetGuideWords,this.reStore.courses.pgIdx==this.targetPgIdx?(console.log("updating page guidewords"),this.reStore.page.guideWords=this.targetGuideWords,this.reStore.notify("page guide-words updated ")):console.log("NOT updating page guidewords",this.reStore.courses.pgIdx,this.targetPgIdx),this.targetPgIdx=null,this.targetGuideWords=null},setPageLang(e){this.targetPgIdx=e,this.targetLangVoiceKey=this.assignment.pages[e].langVoiceKey,this.promptLanguage=!0},setLangVoiceCB(e){const a=this.targetPgIdx;this.targetPgIdx=null;const d=this.targetLangVoiceKey;console.log(a,d),this.assignment.pages[a].langVoiceKey=d,this.reStore.courses.pgIdx==this.targetPgIdx&&(this.reStore.page.langVoiceKey=d)},restorePage(e){console.log("Pager restorePage ",e);const a=this.reStore.courses.ck,d=this.reStore.courses.aid;console.log("Pager ",e,a,d),console.log(this.reStore.courses[a]),console.log(this.reStore.courses[a].assignments),console.log(this.reStore.courses[a].assignments[d]),this.assignment.pages[e]=JSON.parse(JSON.stringify(this.reStore.courses[a].assignments[d].pages[e])),this.reStore.courses.pgIdx==e&&(this.reStore.page=JSON.parse(JSON.stringify(this.reStore.courses[a].assignments[d].pages[e])))},resetPage(){this.reStore.newPage()},newPage(){console.log("PagerComponent newPageCB "),this.reStore.newPage()},updateAssignmentTitle(){console.log("Pager updateAssignmentTitle",this.assignment.title);const e=this.reStore.courses.ck,a=this.reStore.courses.aid;this.reStore.courses[e].assignments[a].title=this.assignment.title},updatePageTitle(){console.log("updatePageTitle",this.reStore.page.pageTitle)},updatePage(e){this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages[e]=this.assignment.pages[e],e===this.reStore.courses.pgIdx&&(this.assignment.pages[e].pageText=Pt(I("#slideTextDiv").html()),this.assignment.pages[e].imgs[this.assignment.pages[e].imgIdx].cap=Pt(I("#slideCaptionDiv").html()),this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e]))),this.reStore.courses.trigger+=1},updateAllPages(){for(var e=0;e<this.assignment.pages.length;e++)this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages[e]=JSON.parse(JSON.stringify(this.assignment.pages[e])),e===this.reStore.courses.pgIdx&&(this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e])));this.reStore.courses.trigger+=1},nextImg(e){const a=this.assignment.pages[e].imgIdx,d=this.assignment.pages[e].imgs.length;a+1<d?this.assignment.pages[e].imgIdx+=1:this.assignment.pages[e].imgIdx=0},prevImg(e){const a=this.assignment.pages[e].imgIdx,d=this.assignment.pages[e].imgs.length;a-1>-1?this.assignment.pages[e].imgIdx-=1:this.assignment.pages[e].imgIdx=d-1},loadCoverCB(){console.log("Pager loadCoverCB "),this.reStore.loadCover()},loadPageCB(e){console.log("Pager loadPageCB ",e),this.reStore.page=this.assignment.pages[e],this.reStore.courses.pgIdx=e,this.reStore.page.imgIdx=this.assignment.pages[e].imgIdx,this.reStore.courses.imgIdx=this.assignment.pages[e].imgIdx,xe(".assignment").classed("hidden",!1),xe(".coverslide").classed("hidden",!0),this.reStore.courses.trigger+=1},remove(e){console.log("remove ",e);const a=this.reStore.ck,d=this.reStore.aid;this.assignment.pages.splice(e,1),this.reStore.courses[a].assignments[d].pages.splice(e,1),this.reStore.courses.trigger+=1},mapCB(e){const a="https://maps.google.com/?ll="+this.assignment.pages[e].mapCoords.split(",")[0]+","+this.assignment.pages[e].mapCoords.split(",")[1];window.open(a,"_blank")},dummy(){console.log("dummy")}}}),vo=i("div",{class:"text-h6"},"Percent Replace",-1),yo=i("div",{class:"text-h6"},"Guide Words",-1),_o=i("div",{class:"text-h6"},"Assignment Title",-1),So=i("div",{class:"text-h6"},"Page Title",-1),Co=i("div",{class:"text-h6"},"Set Current Language",-1),ko={width:"100%"},Vo={class:"flex flex-center"},$o={class:"text-weight-bolder text-center q-pa-xs"},wo={key:0},bo={class:"text-weight-bolder text-center q-pa-xs"},Do={key:0},xo={class:"text-weight-bolder text-center q-pa-xs"},qo={key:0},To={class:"flex flex-row justify-between"},Po={class:""},Ko=["onClick"],Bo={key:0,class:"fi fi-gb"},Uo={key:1,class:"fi fi-us"},Mo={key:2,class:"fi fi-mx"},Ro={key:3,class:"fi fi-fr"},Ao={key:4,class:"fi fi-de"},No={key:5,class:"fi fi-it"},Io={key:6,class:"fi fi-br"},Ho={key:7,class:"fi fi-ke"},Oo={key:8,class:"fi fi-ru"},Lo={key:9,class:"fi fi-th"},Qo={key:10,class:"fi fi-cn"},zo={key:11,class:"fi fi-hk"},Yo={key:12,class:"fi fi-tw"},Eo={key:13,class:"fi fi-kr"},Wo={key:14,class:"fi fi-jp"},Fo={key:15,class:"fi fi-id"},Jo={key:16,class:"fi fi-xx"},Go=i("br",null,null,-1),jo={class:""},Xo={class:""},Zo={class:""},el={class:""},tl={class:""},sl=i("br",null,null,-1),al={key:0};function ol(e,a,d,w,b,N){const u=Q("router-link");return c(),f(G,null,[s(X,{modelValue:e.promptPctReplace,"onUpdate:modelValue":a[2]||(a[2]=r=>e.promptPctReplace=r),persistent:""},{default:l(()=>[s(T,{style:{"min-width":"350px"}},{default:l(()=>[s(U,null,{default:l(()=>[vo]),_:1}),s(U,{class:"q-pt-none"},{default:l(()=>[i("table",null,[i("tr",null,[i("td",null,[s(Kt,{"show-value":"",class:"text-white q-ma-md",modelValue:e.targetPctReplace,"onUpdate:modelValue":a[0]||(a[0]=r=>e.targetPctReplace=r),size:"90px",thickness:.2,color:"grey-5","track-color":"secondary","center-color":"positive",min:"0",max:"100"},null,8,["modelValue","thickness"])])])])]),_:1}),s(j,{align:"right"},{default:l(()=>[M(s(C,{outline:"",label:"Cancel"},null,512),[[R]]),M(s(C,{outline:"",label:"Update percent replace",onClick:a[1]||(a[1]=r=>this.updatePctReplaceCB())},null,512),[[R]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(X,{modelValue:e.promptGuideWords,"onUpdate:modelValue":a[6]||(a[6]=r=>e.promptGuideWords=r),persistent:""},{default:l(()=>[s(T,{style:{"min-width":"350px"}},{default:l(()=>[s(U,null,{default:l(()=>[yo]),_:1}),s(U,{class:"q-pt-none"},{default:l(()=>[s(Z,{dense:"",modelValue:this.targetGuideWords,"onUpdate:modelValue":a[3]||(a[3]=r=>this.targetGuideWords=r),autofocus:"",onKeyup:a[4]||(a[4]=De(r=>e.promptGuideWords=!1,["enter"]))},null,8,["modelValue"])]),_:1}),s(j,{align:"right"},{default:l(()=>[M(s(C,{outline:"",label:"Cancel"},null,512),[[R]]),M(s(C,{outline:"",label:"Update guide words",onClick:a[5]||(a[5]=r=>this.updateGuideWordsCB())},null,512),[[R]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(X,{modelValue:e.promptAssignmentTitle,"onUpdate:modelValue":a[10]||(a[10]=r=>e.promptAssignmentTitle=r),persistent:""},{default:l(()=>[s(T,{style:{"min-width":"350px"}},{default:l(()=>[s(U,null,{default:l(()=>[_o]),_:1}),s(U,{class:"q-pt-none"},{default:l(()=>[s(Z,{dense:"",modelValue:this.assignment.title,"onUpdate:modelValue":a[7]||(a[7]=r=>this.assignment.title=r),autofocus:"",onKeyup:a[8]||(a[8]=De(r=>e.promptAssignmentTitle=!1,["enter"]))},null,8,["modelValue"])]),_:1}),s(j,{align:"right"},{default:l(()=>[M(s(C,{outline:"",label:"Cancel"},null,512),[[R]]),M(s(C,{outline:"",label:"Update assignment title",onClick:a[9]||(a[9]=r=>this.updateAssignmentTitle())},null,512),[[R]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(X,{modelValue:e.promptPageTitle,"onUpdate:modelValue":a[14]||(a[14]=r=>e.promptPageTitle=r),persistent:""},{default:l(()=>[s(T,{style:{"min-width":"350px"}},{default:l(()=>[s(U,null,{default:l(()=>[So]),_:1}),s(U,{class:"q-pt-none"},{default:l(()=>[s(Z,{dense:"",modelValue:this.reStore.page.pageTitle,"onUpdate:modelValue":a[11]||(a[11]=r=>this.reStore.page.pageTitle=r),autofocus:"",onKeyup:a[12]||(a[12]=De(r=>e.promptAssignmentTitle=!1,["enter"]))},null,8,["modelValue"])]),_:1}),s(j,{align:"right"},{default:l(()=>[M(s(C,{outline:"",label:"Cancel"},null,512),[[R]]),M(s(C,{outline:"",label:"Update page title",onClick:a[13]||(a[13]=r=>this.updatePageTitle())},null,512),[[R]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(X,{modelValue:e.promptLanguage,"onUpdate:modelValue":a[16]||(a[16]=r=>e.promptLanguage=r),persistent:""},{default:l(()=>[s(T,{style:{"min-width":"350px"}},{default:l(()=>[s(U,null,{default:l(()=>[Co]),_:1}),s(U,{class:"q-pt-none"},{default:l(()=>[i("table",ko,[i("tr",null,[i("td",null,[s(lt,{modelValue:this.targetLangVoiceKey,"onUpdate:modelValue":[a[15]||(a[15]=r=>this.targetLangVoiceKey=r),this.setLangVoiceCB],options:e.langVoices},null,8,["modelValue","options","onUpdate:modelValue"])])])])]),_:1}),s(j,{align:"right",class:"text-white"},{default:l(()=>[M(s(C,{outline:"",flat:"",label:"Close"},null,512),[[R]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(T,{flat:"",style:{"max-width":"300px"},class:"q-pa-xs"},{default:l(()=>[s(U,null,{default:l(()=>[i("div",Vo,_(this.reStore.courses.ck.slice(0,3))+" | "+_(this.reStore.courses.aid.slice(0,3))+" | "+_(this.reStore.courses.pageid)+" | "+_(this.reStore.courses.imgIdx)+" | "+_(this.reStore.courses.pgIdx)+" | "+_(this.reStore.courses.trigger)+" | "+_(this.reStore.mode),1),i("div",$o,[v("Course: "),this.reStore.courses.ck?(c(),f("span",wo,_(this.reStore.courses[this.reStore.courses.ck].title),1)):ae("",!0)]),i("div",bo,[v(" Title: "),this.assignment?(c(),f("span",Do,[s(u,{to:"/teacher/editor",class:"text-white"},{default:l(()=>[v(_(this.assignment.title)+" ",1),s(P,null,{default:l(()=>[v("Go to Editor")]),_:1})]),_:1}),s(q,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:a[17]||(a[17]=r=>e.promptAssignmentTitle=!0),size:"sm"}),s(q,{style:{cursor:"pointer"},class:"on-right",name:"save",onClick:a[18]||(a[18]=r=>this.reStore.saveCurrentAssignment()),size:"sm"}),s(q,{class:"on-right",name:"publish",onClick:a[19]||(a[19]=r=>this.updateAllPages()),size:"sm"},{default:l(()=>[s(P,null,{default:l(()=>[v("Update local copies of all pages from currently loaded in this Pager")]),_:1})]),_:1})])):ae("",!0)]),i("div",xo,[v(" Page "+_(this.reStore.courses.pgIdx)+": "+_(this.reStore.page.pageTitle.slice(0,5))+" ",1),s(q,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:a[20]||(a[20]=r=>this.promptPageTitle=!0),size:"sm"}),s(q,{class:"on-right",name:"replay",onClick:this.resetPage,size:"sm"},null,8,["onClick"]),s(q,{class:"on-right",name:"add_circle",onClick:this.newPage,size:"sm"},null,8,["onClick"]),s(q,{class:"on-right",name:"volume_up",onClick:a[21]||(a[21]=r=>this.reStore.speak()),size:"sm"})]),this.assignment?(c(),f("span",qo,[s(T,{class:"bg-primary q-pa-xs q-my-md",flat:"",bordered:""},{default:l(()=>[s(ke,null,{header:l(()=>[s(F,null,{default:l(()=>[s(qt,{class:"hidden"})]),_:1}),s(F,null,{default:l(()=>[v(" Cover ")]),_:1})]),default:l(()=>[s(Re,{src:this.assignment.coverUrl,onClick:e.loadCoverCB},null,8,["src","onClick"])]),_:1})]),_:1}),(c(!0),f(G,null,Ce(this.assignment.pages,(r,k)=>(c(),E(T,{class:"bg-primary q-pa-xs q-my-md",flat:"",bordered:"",modelValue:this.assignment.pages,"onUpdate:modelValue":a[24]||(a[24]=x=>this.assignment.pages=x),key:k},{default:l(()=>[s(ke,null,{header:l(()=>[s(F,null,{default:l(()=>[s(qt,{modelValue:r.isCustom,"onUpdate:modelValue":x=>r.isCustom=x,color:"positive",icon:"shuffle","checked-icon":"check"},{default:l(()=>[s(P,null,{default:l(()=>[v(_(r.isCustom?"Custom":"Random"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(F,null,{default:l(()=>[v(_(r.pageTitle.slice(0,10)),1)]),_:2},1024)]),default:l(()=>[i("span",To,[s(q,{class:"",name:"publish",onClick:x=>this.updatePage(k),size:"sm"},{default:l(()=>[s(P,null,{default:l(()=>[v("Update current page")]),_:1})]),_:2},1032,["onClick"]),s(q,{class:"",name:"publish",onClick:this.reStore.appendPage,size:"sm"},{default:l(()=>[s(P,null,{default:l(()=>[v("Push as new page")]),_:1})]),_:1},8,["onClick"]),i("span",Po,[s(q,{size:"sm",name:"delete",onClick:x=>e.remove(k)},null,8,["onClick"])]),i("span",{class:"",onClick:x=>this.setPageLang(k)},[r.langVoiceKey==="Eng-UK-Fem"?(c(),f("span",Bo)):r.langVoiceKey==="Eng-US"?(c(),f("span",Uo)):r.langVoiceKey==="espa\xF1ol"?(c(),f("span",Mo)):r.langVoiceKey==="fran\xE7ais"?(c(),f("span",Ro)):r.langVoiceKey==="Deutsch"?(c(),f("span",Ao)):r.langVoiceKey==="italiano"?(c(),f("span",No)):r.langVoiceKey==="portugu\xEAs do Brasil"?(c(),f("span",Io)):r.langVoiceKey==="Kiswahili"?(c(),f("span",Ho)):r.langVoiceKey==="\u0440\u0443\u0441\u0441\u043A\u0438\u0439"?(c(),f("span",Oo)):r.langVoiceKey==="\u0E44\u0E17\u0E22"?(c(),f("span",Lo)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09"?(c(),f("span",Qo)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09"?(c(),f("span",zo)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09"?(c(),f("span",Yo)):r.langVoiceKey==="\uD55C\uAD6D\uC758"?(c(),f("span",Eo)):r.langVoiceKey==="\u65E5\u672C\u8A9E"?(c(),f("span",Wo)):r.langVoiceKey==="Bahasa Indonesia"?(c(),f("span",Fo)):(c(),f("span",Jo)),s(P,null,{default:l(()=>[v(_(r.langVoiceKey)+" ",1),Go,v(" Click to set language for this page ")]),_:2},1024)],8,Ko),i("span",jo,[s(q,{name:"location_on",size:"sm",onClick:x=>e.mapCB(k)},{default:l(()=>[s(P,null,{default:l(()=>[v(" Launch Google Maps: "+_(r.mapCoords),1)]),_:2},1024)]),_:2},1032,["onClick"])]),i("span",Xo,[s(q,{name:"restore_page",size:"sm",onClick:x=>e.restorePage(k)},{default:l(()=>[s(P,null,{default:l(()=>[v("Restore page to saved values")]),_:1})]),_:2},1032,["onClick"])]),i("span",Zo,[s(q,{name:"percent",size:"sm",onClick:x=>e.pctCB(k)},{default:l(()=>[s(P,null,{default:l(()=>[v("Set percentage of words to replace from paragraph on this page.")]),_:1})]),_:2},1032,["onClick"])]),i("span",el,[s(q,{name:"language",size:"sm",onClick:x=>e.wpCB(k)},{default:l(()=>[s(P,null,{default:l(()=>[v("Wikipedia page "+_(r.pageid)+" "+_(r.canonical_url),1)]),_:2},1024)]),_:2},1032,["onClick"])]),i("span",tl,[s(q,{name:"signpost",size:"sm",onClick:x=>e.gwCB(k)},{default:l(()=>[s(P,null,{default:l(()=>[v("Update the guide-words for this page:"),sl,v(_(r.guideWords),1)]),_:2},1024)]),_:2},1032,["onClick"])])]),r.imgs.length>r.imgIdx?(c(),f("span",al,[s(C,{fab:"","label-position":"left",color:"primary",icon:"arrow_left",onClick:[x=>this.prevImg(k),a[22]||(a[22]=kt(()=>{},["stop","prevent"]))],padding:"xs",class:"float-left text-h5 z-max",style:{top:"100px"}},null,8,["onClick"]),s(C,{fab:"","label-position":"right",color:"primary",icon:"arrow_right",onClick:[x=>this.nextImg(k),a[23]||(a[23]=kt(()=>{},["stop","prevent"]))],padding:"xs",class:"float-right text-h5 z-max",style:{top:"100px"}},null,8,["onClick"]),s(Re,{height:"200px",src:r.imgs[r.imgIdx].url,onClick:x=>e.loadPageCB(k)},null,8,["src","onClick"])])):ae("",!0)]),_:2},1024)]),_:2},1032,["modelValue"]))),128))])):ae("",!0)]),_:1})]),_:1})],64)}var ll=re(po,[["render",ol]]);const nl=ie({name:"TeacherLayout",components:{PagerComponent:ll,CurrentCourse:fo,DocumentationComponent:ps,SearchComponent:Ps,ImagesComponent:Is,BookmarksComponent:ua,OTDComponent:Da,CurrentAssignment:Fa,PreferencesComponent:ss,AssignmentStatus:vs},setup(){const e=g(!1),a=g(!1),d=ue(),w=d.preferences,b=g(null),N=g(null);return{step:g(1),reStore:d,initialValues:g(w),scrollAreaRHS:b,scrollAreaLHS:N,leftDrawerOpen:e,rightDrawerOpen:a,flagName:g(d.langVoices[d.preferences.langVoiceKey].flagName),promptLanguage:g(!1),langVoices:g(d.preferences.langVoices),toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){a.value=!a.value}}},mounted(){Vt.isActive||(Vt.toggle(),st("primary","#333"),st("secondary",this.initialValues.secondaryColor),st("accent",this.initialValues.accentColor),this.flagName=this.reStore.langVoices[this.reStore.prefereneces.langVoiceKey].flagName,xe(".pfi").classed(this.flagName,!0))},methods:{goEditor(){this.reStore.mode="editor",this.reStore.router.push("/teacher/editor")},goAssignment(){this.reStore.mode="assignment",this.reStore.router.push("/teacher/assignment")},setRHS(e){e==="pager"?(I("#advancedDiv").classed("hidden",!0),I("#pagerDiv").classed("hidden",!1),I("#statusDiv").classed("hidden",!0)):e==="status"?(I("#advancedDiv").classed("hidden",!0),I("#pagerDiv").classed("hidden",!0),I("#statusDiv").classed("hidden",!1)):(I("#advancedDiv").classed("hidden",!1),I("#pagerDiv").classed("hidden",!0),I("#statusDiv").classed("hidden",!0))},scrollTopRHS(){this.scrollAreaRHS.setScrollPosition("vertical",0)},scrollTopLHS(){this.scrollAreaLHS.setScrollPosition("vertical",0)},setLangVoiceCB(e){this.flagName=this.reStore.langVoices[e].flagName;for(const[a,d]of Object.entries(this.reStore.langVoices)){const w=d.flagName;xe(".pfi").classed(w,!1)}xe(".pfi").classed(this.flagName,!0),console.log("langVoiceKey set to ",e,this.flagName),this.reStore.courses.trigger+=1}}}),il=i("div",{class:"text-h6"},"Set Current Language",-1),rl={width:"100%"},ul=i("span",{class:"pfi fi fi-xx"},null,-1),dl=i("br",null,null,-1),cl=i("br",null,null,-1),ml={class:"dashboard-wrapper"},hl=i("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),gl={class:"hidden"},fl=i("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),pl={id:"pagerDiv"},vl={key:0},yl={key:1},_l={class:"q-gutter-y-sm"},Sl={id:"advancedDiv",class:"hidden"},Cl={class:"hidden"},kl={key:0},Vl={key:1},$l={class:"q-gutter-y-sm"},wl={id:"statusDiv",class:"hidden"},bl={key:0},Dl={key:1},xl={class:"q-gutter-y-sm"};function ql(e,a,d,w,b,N){const u=Q("router-link"),r=Q("router-view"),k=Q("DocumentationComponent"),x=Q("SearchComponent"),ee=Q("BookmarksComponent"),ge=Q("OTDComponent"),He=Q("ImagesComponent"),Oe=Q("PreferencesComponent"),Ve=Q("PagerComponent"),te=Q("CurrentCourse"),B=Q("CurrentAssignment"),Le=Q("AssignmentStatus");return c(),E(ds,{view:"hHh LpR fFf"},{default:l(()=>[s(rs,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:l(()=>[s(X,{modelValue:e.promptLanguage,"onUpdate:modelValue":a[1]||(a[1]=A=>e.promptLanguage=A),persistent:""},{default:l(()=>[s(T,{style:{"min-width":"350px"}},{default:l(()=>[s(U,null,{default:l(()=>[il]),_:1}),s(U,{class:"q-pt-none"},{default:l(()=>[i("table",rl,[i("tr",null,[i("td",null,[s(lt,{modelValue:this.reStore.preferences.langVoiceKey,"onUpdate:modelValue":[a[0]||(a[0]=A=>this.reStore.preferences.langVoiceKey=A),this.setLangVoiceCB],options:e.langVoices},null,8,["modelValue","options","onUpdate:modelValue"])])])])]),_:1}),s(j,{align:"right",class:"text-white"},{default:l(()=>[M(s(C,{outline:"",flat:"",label:"Close"},null,512),[[R]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(Se,null,{default:l(()=>[s(C,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),s(is,null,{default:l(()=>[s(u,{to:"/teacher"},{default:l(()=>[s(q,{name:"home",color:"white"},{default:l(()=>[s(P,null,{default:l(()=>[v("Return to My Teacher Page")]),_:1})]),_:1})]),_:1})]),_:1}),s(C,{onClick:a[2]||(a[2]=A=>e.promptLanguage=!0)},{default:l(()=>[ul,s(P,null,{default:l(()=>[v("Set current language "),dl,v("Applied to new pages/searches."),cl,v("Sync current page using sync-lang button.")]),_:1})]),_:1}),this.reStore.mode=="assignment"?(c(),E(C,{key:0,onClick:a[3]||(a[3]=A=>this.goEditor()),icon:"switch_account"},{default:l(()=>[s(P,null,{default:l(()=>[v(" Editor Mode ")]),_:1})]),_:1})):this.reStore.mode=="editor"?(c(),E(C,{key:1,onClick:a[4]||(a[4]=A=>this.goAssignment()),icon:"switch_account"},{default:l(()=>[s(P,null,{default:l(()=>[v(" Assignment Mode ")]),_:1})]),_:1})):ae("",!0),this.reStore.authenticated?(c(),E(C,{key:2,onClick:a[5]||(a[5]=A=>this.reStore.router.push("/student")),icon:"switch_account"},{default:l(()=>[s(P,null,{default:l(()=>[v(" Switch between Teacher or Student role ")]),_:1})]),_:1})):ae("",!0),this.reStore.authenticated?(c(),E(C,{key:3,icon:"logout",onClick:a[6]||(a[6]=A=>this.reStore.logout())})):ae("",!0),s(C,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1})]),_:1}),s(us,{class:"container-fluid"},{default:l(()=>[i("div",ml,[s(r)]),s($t,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":a[7]||(a[7]=A=>e.leftDrawerOpen=A),side:"left"},{default:l(()=>[s(Se,{flat:"",class:"bg-primary text-white"},{default:l(()=>[s(Ae),s(C,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopLHS},{default:l(()=>[s(P,null,{default:l(()=>[v("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),hl,s(wt,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaLHS"},{default:l(()=>[s(k),s(x),s(ee),s(ge),s(He),s(Oe,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"]),s($t,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":a[11]||(a[11]=A=>e.rightDrawerOpen=A),side:"right"},{default:l(()=>[s(Se,{flat:"",class:"bg-primary text-white"},{default:l(()=>[i("span",gl,[s(C,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),s(bt,{dark:"",vertical:"",inset:""}),s(C,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),s(bt,{dark:"",vertical:"",inset:""})]),s(cs,{dense:"",align:"left"},{default:l(()=>[s(tt,{icon:"theaters",onClick:a[8]||(a[8]=A=>this.setRHS("pager"))},{default:l(()=>[s(P,null,{default:l(()=>[v("Visual Assignment Builder")]),_:1})]),_:1}),s(tt,{icon:"handyman",onClick:a[9]||(a[9]=A=>this.setRHS("advanced"))},{default:l(()=>[s(P,null,{default:l(()=>[v("Detailed assignment configuration")]),_:1})]),_:1}),s(tt,{icon:"summarize",onClick:a[10]||(a[10]=A=>this.setRHS("status"))},{default:l(()=>[s(P,null,{default:l(()=>[v("Status while taking assignment")]),_:1})]),_:1})]),_:1}),s(Ae),s(C,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopRHS},{default:l(()=>[s(P,null,{default:l(()=>[v("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),fl,s(wt,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaRHS"},{default:l(()=>[i("div",pl,[this.reStore.courses.aid?(c(),f("span",vl,[s(Ve)])):(c(),f("span",yl,[i("div",_l,[s(T,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:l(()=>[v(" No current assignment. You can load an assignment at the "),i("u",null,[s(u,{to:"/teacher",class:"text-white ptr"},{default:l(()=>[v("Teacher Dashboard")]),_:1})]),v(". ")]),_:1})])]))]),i("div",Sl,[i("span",Cl,[s(te)]),this.reStore.courses.aid?(c(),f("span",kl,[s(B)])):(c(),f("span",Vl,[i("div",$l,[s(T,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:l(()=>[v(" No current assignment. You can load an assignment at the "),i("u",null,[s(u,{to:"/teacher",class:"text-white ptr"},{default:l(()=>[v("Teacher Dashboard")]),_:1})]),v(". ")]),_:1})])]))]),i("div",wl,[this.reStore.courses.aid?(c(),f("span",bl,[s(Le)])):(c(),f("span",Dl,[i("div",xl,[s(T,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:l(()=>[v(" No current assignment. You can load an assignment at the "),i("u",null,[s(u,{to:"/teacher",class:"text-white ptr"},{default:l(()=>[v("Teacher Dashboard")]),_:1})]),v(". ")]),_:1})])]))])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var tn=re(nl,[["render",ql]]);export{tn as default};
