import{Q as A,u as Jt,a as Gt,b as Xt}from"./use-form.30a6179d.js";import{Q as Zt,u as es,a as Tt,P as ts,b as tt}from"./PreferencesComponent.79b04776.js";import{i as C,g as lt,d as se,r as c,v as z,_ as ae,o as u,ah as g,a as s,w as n,K as O,Q as $,e as l,ag as _,ak as p,aM as De,c as F,a1 as V,ai as Y,aj as re,al as J,f as U,h as b,au as ss,av as Ve,j as as,q as os,p as Ct,R as ls,P as St,s as st}from"./index.8acc1f94.js";import{d as de,C as H,Q as ue}from"./ClosePopup.aa626cd0.js";import{Q as T}from"./QCard.0487b603.js";import{Q as I}from"./QTooltip.f25d7c81.js";import{Q as Se,a as ns,b as is,c as kt,d as $t,e as rs,f as ds}from"./QLayout.26192d97.js";import{Q as ke,b as X,e as bt}from"./QExpansionItem.6abc0c89.js";import{Q as us}from"./QTabs.43662ae6.js";import{u as oe,s as te,p as ge,t as cs,a as wt,f as ms,g as hs,j as at,_ as gs,d as Vt}from"./re-store.01657044.js";import{a as Ue,D as fs,A as ps}from"./DocumentationComponent.1eea84a9.js";import{Q as G}from"./QInput.c429320e.js";import{Q as Te}from"./QList.d78494aa.js";import{s as N}from"./transform.aea72fbe.js";import{Q as qt}from"./QToggle.30f48d8a.js";import{Q as xe}from"./QImg.c5580537.js";import{u as vs,a as _s}from"./use-dark.d64486ff.js";import"./selection.2619952a.js";import"./use-key-composition.6e772bda.js";import"./use-prevent-scroll.b67e557f.js";import"./scroll.db1356ae.js";import"./use-portal.20071395.js";import"./firebase.0eb8f378.js";import"./index.2cf0d985.js";import"./QCheckbox.f54a2775.js";const ys=C("div",{class:"q-space"});var Ne=lt({name:"QSpace",setup(){return()=>ys}});const Cs=se({name:"SearchComponent",setup(){const e=oe(),a=c("");return{reStore:e,searchTerms:a,searchSize:c(e.preferences.resLimit),searchResults:c([]),promptSearchSize:c(!1)}},mounted(){z(this.reStore.preferences,async(h,y)=>{console.log("watcher ",h,y),this.searchSize=h.resLimit;for(const[M,d]of Object.entries(this.reStore.langVoices))N("#sfi").classed(d.flagName,!1);const D=this.reStore.preferences.langVoiceKey;N("#sfi").classed(this.reStore.langVoices[D].flagName,!0)});const e=this.reStore.preferences.langVoiceKey,a=this.reStore.langVoices[e].flagName;N("#sfi").classed(a,!0)},methods:{updateSearchSize(){},update(){this.searchTerms=this.searchTerms},remove(e){this.searchResults.splice(e,1)},load(e){console.log(e),console.log(this.searchResults[e]);const a=this.reStore.preferences.langVoiceKey;console.log("calling loadPageId ",this.searchResults[e].pageid,a),this.reStore.loadPageId(this.searchResults[e].pageid,a),this.reStore.courses.trigger+=1},async doSearch(){const e=this.reStore.langVoices[this.reStore.preferences.langVoiceKey];console.log("doSearch ",e),this.reStore.wiki.setLang(e.langName);const a=await this.reStore.wiki.search(this.searchTerms,{suggestion:!1,limit:this.searchSize});console.log("res.results.length: ",a.results.length),this.searchResults=a.results},clearSearchResults(){for(;this.searchResults.length;)this.searchResults.pop()}}}),Ss=l("div",{class:"text-h6"},"Search Results Size",-1),ks={class:"q-pa-md",style:{"max-width":"350px"}},$s={class:"q-gutter-y-sm column"},bs=l("span",{class:"on-right text-h2",id:"sfi"},null,-1),ws={key:0},Vs={class:"row cardheader ptr justify-between"},Ds=["onClick"],xs={class:"history-remove"};function Ts(e,a,h,y,D,M){return u(),g(Y,null,[s(ue,{modelValue:e.promptSearchSize,"onUpdate:modelValue":a[2]||(a[2]=d=>e.promptSearchSize=d),persistent:""},{default:n(()=>[s(T,{style:{"min-width":"350px"}},{default:n(()=>[s(A,{align:"center"},{default:n(()=>[Ss]),_:1}),s(A,{class:"q-pt-none",align:"center"},{default:n(()=>[s(Zt,{"show-value":"",size:"140px",thickness:.5,color:"green","track-color":"green-3","center-color":"grey-8",class:"text-white col q-ma-md",modelValue:e.searchSize,"onUpdate:modelValue":a[0]||(a[0]=d=>e.searchSize=d)},null,8,["modelValue"])]),_:1}),s(de,{align:"center",class:"text-white"},{default:n(()=>[O(s($,{flat:"",label:"Cancel"},null,512),[[H]]),O(s($,{flat:"",label:"Update results size",onClick:a[1]||(a[1]=d=>this.updateSearchSize())},null,512),[[H]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l("div",ks,[s(Te,{bordered:"",class:"rounded-borders"},{default:n(()=>[s(ke,null,{header:n(()=>[s(X,{avatar:""},{default:n(()=>[s(Ue,{icon:"search",color:"primary","text-color":"white"})]),_:1}),s(X,null,{default:n(()=>[_(" Search ")]),_:1})]),default:n(()=>[s(T,null,{default:n(()=>[l("div",$s,[s(Se,{class:"bg-primary text-white rounded-borders q-my-md"},{default:n(()=>[s($,{dark:"",standout:"",onClick:a[3]||(a[3]=d=>e.promptSearchSize=!0)},{default:n(()=>[_(p(this.searchResults.length)+" ",1),s(I,null,{default:n(()=>[_("Change results limit ("+p(this.searchSize)+")",1)]),_:1})]),_:1}),bs,s(G,{dark:"",dense:"",standout:"",modelValue:e.searchTerms,"onUpdate:modelValue":a[6]||(a[6]=d=>e.searchTerms=d),"input-class":"text-right",class:"q-ml-md",onKeyup:[a[7]||(a[7]=d=>this.update()),a[8]||(a[8]=De(d=>this.doSearch(),["enter"]))]},{append:n(()=>[e.searchTerms===""?(u(),F(V,{key:0,name:"search",onClick:a[4]||(a[4]=d=>this.doSearch())})):(u(),F(V,{key:1,name:"clear",class:"cursor-pointer",onClick:a[5]||(a[5]=d=>{this.searchTerms="",this.clearSearchResults()})}))]),_:1},8,["modelValue"])]),_:1})]),this.searchResults.length?(u(),g("div",ws,[(u(!0),g(Y,null,re(this.searchResults,(d,r)=>(u(),F(T,{class:"q-ma-sm",flat:"",bordered:"",modelValue:this.searchResults,"onUpdate:modelValue":a[9]||(a[9]=k=>this.searchResults=k),key:r},{default:n(()=>[l("div",Vs,[l("span",{class:"history-title col-grow",onClick:k=>this.load(r)},p(r)+". "+p(d.title.slice(0,25)),9,Ds),l("span",xs,[s(V,{class:"primary",size:e.xl,color:e.primary,name:"close",onClick:k=>this.remove(r)},null,8,["size","color","onClick"])])])]),_:2},1032,["modelValue"]))),128))])):J("",!0)]),_:1})]),_:1})]),_:1})])],64)}var qs=ae(Cs,[["render",Ts]]);const Ps=se({name:"CurrentPage",props:{},setup(e){return{reStore:oe(),ck:c("-"),aid:c("-"),pageTitle:c("-"),langVoiceKey:c(),flagName:c("fi fi-gb"),imgIdx:c(0),imgs:c([]),imgTot:c(0),imgFit:c("-"),guideWords:c("-"),mapCoords:c("-"),pageid:c("-"),pctReplace:c(),canonicalUrl:c(),props:e,isCustom:c(!1),langNames:c(["en","th","es","fr","it","de","zh","ja","sw","pt","ru","id","ke"]),promptGuideWords:c(!1)}},mounted(){console.log(this.props),z(this.reStore.courses,async(e,a)=>{try{console.log("CurrentPage watcher",this.reStore.courses);const h=this.reStore.courses.pgIdx,y=this.reStore.page;if(this.ck=this.reStore.courses.ck,this.aid=this.reStore.courses.aid,y){console.log("CurrentPage ",y),this.pageTitle=y.pageTitle,this.imgIdx=y.imgIdx,this.imgs=y.imgs,this.imgTot=y.imgs.length,this.imgFit=y.imgFit,this.guideWords=y.guideWords,this.mapCoords=y.mapCoords,this.pageid=y.pageid,this.langVoiceKey=y.langVoiceKey,this.flagName=this.reStore.langVoices[y.langVoiceKey].flagName;for(const[D,M]of Object.entries(this.reStore.langVoices)){const d=M.flagName;te(".flagicon").classed(d,!1)}te(".flagicon").classed(this.flagName,!0),this.pctReplace=y.pctReplace,this.canonicalUrl=y.canonicalUrl,this.isCustom=y.isCustom}}catch(h){console.log(h)}},{immediate:!0,deep:!0})},methods:{updateGuideWords(){console.log("updateGuideWords",this.guideWords),this.reStore.page.guideWords=this.guideWords},langLinkCB(e){console.log(e.url),window.open(e.url,"_blank")},speak(){console.log("CurrentPage.speak",this.reStore),this.reStore.speak()},cycleFitMode(){const e=["scale-down","cover","contain"];let a=e.indexOf(this.imgFit);a+=1,a>e.length-1&&(a=0),this.imgFit=e[a],this.reStore.page.imgFit=this.imgFit,console.log("fit: ",this.imgFit),this.reStore.courses.trigger+=1},nextImg(){this.imgIdx=this.imgIdx+1>this.imgs.length-1?0:this.imgIdx+1,this.reStore.page.imgIdx=this.imgIdx,this.reStore.courses.imgIdx=this.imgIdx,this.reStore.courses.trigger+=1},imgCB(e,a){console.log(e,a),this.reStore.page.imgIdx=e,this.reStore.courses.imgIdx=e,this.reStore.courses.trigger+=1},loadURL(e){console.log("loadURL ",e),window.open(e,"_blank")},mapCB(){const e="https://maps.google.com/?ll="+this.mapCoords.split(",")[0]+","+this.mapCoords.split(",")[1];window.open(e,"_blank")},saveImage(e,a){console.log("saveImage: ",e,a),this.reStore.saveImage(e,a)},saveCurrentImage(){const e=this.imgs[this.imgIdx];console.log("saveCurrentImage: ",e),this.reStore.saveImage(this.imgIdx,e)},remove(e,a){console.log("remove: ",e,a),this.reStore.page.imgs.splice(e,1)},toggleText(){N("#slideTextDiv").classed("hidden")?te("#slideTextDiv").classed("hidden",!1):te("#slideTextDiv").classed("hidden",!0)},addBookmark(){console.log("addBookmark"),this.reStore.saveBookmark()},resetPage(){this.reStore.newPage()},newPage(){console.log("CurrentPage newPageCB "),this.reStore.newPage()},appendPage(){console.log("CurrentPage appendPage"),this.reStore.appendPage()},updatePage(){console.log("CurrentPage updatePage"),this.reStore.updatePage()},updateType(e,a){console.log("CurrentPage updateType"),this.reStore.page.isCustom=this.isCustom}}}),Is=l("div",{class:"text-h6"},"Guide Words",-1),Ks={class:"text-weight-bolder text-center q-pa-md text-white"},Bs=l("br",null,null,-1),Ms={style:{border:"1px solid gray","border-radius":"5px"}},As={width:"100%"},Ns={style:{width:"50%","text-align":"center"}},Us={style:{"text-align":"center"}},Os={style:{"text-align":"center"}},Hs=l("td",{style:{"text-align":"center"}},"Speak Text",-1),Rs={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Qs={width:"100%"},Ls=l("td",null,"Course-Key",-1),zs={style:{width:"50%"}},Fs={class:"ptr float-left"},Ys=l("td",null,"Assgmnt Id",-1),js={style:{width:"50%"}},Es={class:"ptr float-left"},Ws=l("td",null,"WP Page Id",-1),Js={style:{width:"50%"}},Gs=l("td",null,"Language",-1),Xs={style:{width:"50%"}},Zs={class:"q-mt-xs float-right flagicon text-h6"},ea=l("td",null,"Images",-1),ta={style:{width:"50%"}},sa=l("td",null,"Image Fit",-1),aa={class:"align-left"},oa=l("td",null,"Guide Words",-1),la={style:{width:"50%"}},na=l("td",null,"Percent Replace",-1),ia={class:"float-left"},ra=l("td",null,"Map Coords",-1),da={class:"float-left"},ua=l("td",null,"Toggle Text",-1),ca=l("td",null,"Alt Langs",-1),ma=["onClick"],ha={key:0,style:{cursor:"pointer"}},ga={key:0},fa={class:"row cardheader justify-between"},pa={class:"history-remove"},va={key:0},_a={class:"history-remove ptr"};function ya(e,a,h,y,D,M){const d=U("router-link");return u(),g(Y,null,[s(ue,{modelValue:e.promptGuideWords,"onUpdate:modelValue":a[3]||(a[3]=r=>e.promptGuideWords=r),persistent:""},{default:n(()=>[s(T,{style:{"min-width":"350px"}},{default:n(()=>[s(A,null,{default:n(()=>[Is]),_:1}),s(A,{class:"q-pt-none"},{default:n(()=>[s(G,{dense:"",modelValue:e.guideWords,"onUpdate:modelValue":a[0]||(a[0]=r=>e.guideWords=r),autofocus:"",onKeyup:a[1]||(a[1]=De(r=>e.promptGuideWords=!1,["enter"]))},null,8,["modelValue"])]),_:1}),s(de,{align:"right"},{default:n(()=>[O(s($,{outline:"",label:"Cancel"},null,512),[[H]]),O(s($,{outline:"",label:"Update guide words",onClick:a[2]||(a[2]=r=>this.updateGuideWords())},null,512),[[H]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(T,{flat:""},{default:n(()=>[s(A,null,{default:n(()=>[l("div",Ks,[s(d,{to:"/teacher/editor",class:"text-white"},{default:n(()=>[_(p(this.pageTitle.slice(0,30)),1)]),_:1}),Bs,s(V,{class:"on-right",name:"replay",onClick:this.resetPage,size:"sm"},null,8,["onClick"]),s(V,{class:"on-right",name:"add_circle",onClick:this.newPage,size:"sm"},null,8,["onClick"]),s(V,{class:"on-right",name:"publish",onClick:this.updatePage,size:"sm"},{default:n(()=>[s(I,null,{default:n(()=>[_("Update current page")]),_:1})]),_:1},8,["onClick"]),s(V,{class:"on-right",name:"publish",onClick:this.appendPage,size:"sm"},{default:n(()=>[s(I,null,{default:n(()=>[_("Push as new page")]),_:1})]),_:1},8,["onClick"])]),l("div",Ms,[l("table",As,[l("tr",null,[l("td",Ns,[s(qt,{modelValue:e.isCustom,"onUpdate:modelValue":a[4]||(a[4]=r=>e.isCustom=r),color:"accent"},null,8,["modelValue"])]),l("td",Us,[s($,{round:"",class:"q-pa-md",icon:"volume_up",color:"secondary",onClick:a[5]||(a[5]=r=>this.speak())})])]),l("tr",null,[l("td",Os,p(e.isCustom===!0?"Custom":"Random"),1),Hs])])]),l("div",Rs,[l("table",Qs,[l("tr",null,[Ls,l("td",zs,[l("a",Fs,p(this.ck),1)])]),l("tr",null,[Ys,l("td",js,[l("a",Es,p(this.aid),1)])]),l("tr",null,[Ws,l("td",Js,[l("a",{class:"ptr float-left",onClick:a[6]||(a[6]=r=>this.loadURL(this.canonicalUrl))},p(this.pageid),1),s(V,{name:"bookmark",onClick:this.addBookmark,class:"float-right"},null,8,["onClick"])])]),l("tr",null,[Gs,l("td",Xs,[l("span",Zs,[s(I,{class:"float-left"},{default:n(()=>[_(p(this.langVoiceKey),1)]),_:1})])])]),l("tr",null,[ea,l("td",ta,[l("span",{onClick:a[7]||(a[7]=(...r)=>this.nextImg&&this.nextImg(...r)),class:"ptr float-left"},p(this.imgIdx+1)+" / "+p(this.imgTot),1),l("span",{class:"float-right ptr",onClick:a[8]||(a[8]=(...r)=>this.saveCurrentImage&&this.saveCurrentImage(...r))},[s(V,{name:"bookmark"})])])]),l("tr",{class:"ptr",onClick:a[9]||(a[9]=(...r)=>this.cycleFitMode&&this.cycleFitMode(...r))},[sa,l("td",null,[l("span",aa,p(this.imgFit),1),s(V,{class:"float-right",name:"fit_screen"})])]),l("tr",null,[oa,l("td",la,[_(p(this.guideWords.replaceAll(",",", "))+" ",1),s(V,{class:"float-right",name:"tune",onClick:a[10]||(a[10]=r=>this.promptGuideWords=!0)})])]),l("tr",null,[na,l("td",null,[l("span",ia,p(this.pctReplace)+" %",1),s(V,{class:"float-right",name:"tune"})])]),l("tr",null,[ra,l("td",{onClick:a[11]||(a[11]=(...r)=>this.mapCB&&this.mapCB(...r)),class:"ptr"},[l("span",da,p(this.mapCoords),1),s(V,{class:"float-right",name:"place"})])]),l("tr",null,[ua,l("td",{onClick:a[12]||(a[12]=(...r)=>this.toggleText&&this.toggleText(...r)),class:"ptr"},[s(V,{class:"float-right",name:"article"})])]),l("tr",null,[ca,l("td",null,[(u(!0),g(Y,null,re(this.reStore.page.currentLangLinks,(r,k)=>(u(),g("span",{key:k,onClick:q=>this.langLinkCB(r)},[this.langNames.indexOf(r.lang)>-1?(u(),g("span",ha,[l("u",null,p(r.lang),1),_(",\xA0 ")])):J("",!0)],8,ma))),128))])])])])]),_:1})]),_:1}),s(T,{flat:""},{default:n(()=>[s(A,null,{default:n(()=>[s(Te,{padding:"",class:"rounded-borders"},{default:n(()=>[s(ke,{"header-style":{border:"1px solid gray"},label:"Page Images"},{default:n(()=>[this.imgs.length?(u(),g("div",ga,[(u(!0),g(Y,null,re(this.imgs,(r,k)=>(u(),F(T,{bordered:"",class:"q-ma-sm",flat:"",modelValue:this.imgs,"onUpdate:modelValue":a[13]||(a[13]=q=>this.imgs=q),key:k},{default:n(()=>[l("div",fa,[l("span",pa,[s(V,{name:"bookmark",onClick:q=>this.saveImage(k,r)},null,8,["onClick"]),s(V,{name:"article",onClick:this.toggleText},{default:n(()=>[s(I,null,{default:n(()=>[_("Convenience button to toggle current text ")]),_:1})]),_:1},8,["onClick"]),s(V,{name:"fit_screen",onClick:this.cycleFitMode},{default:n(()=>[s(I,null,{default:n(()=>[_("Convenience button to toggle current image-fit mode ")]),_:1})]),_:1},8,["onClick"])]),r.cap?(u(),g("span",va,p(r.cap.slice(0,25)),1)):J("",!0),l("span",_a,[s(V,{name:"close",onClick:q=>this.remove(k,r)},null,8,["onClick"])])]),s(xe,{class:"cardimage",onClick:q=>this.imgCB(k,r),src:r.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])):J("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Ca=ae(Ps,[["render",ya]]);const Sa=se({name:"ImagesComponent",setup(){return{reStore:oe(),newCap:c(""),newDesc:c(""),newName:c(""),newSource:c(""),newUrl:c(""),promptAddImage:c(!1)}},mounted(){z(this.reStore.userSnapshot.images,async(e,a)=>{console.log("watcher ",e,a)})},methods:{addImageCB(){console.log("addImageCB",this.newUrl);const e={name:this.newName,desc:this.newDesc,cap:this.newCap,source:this.newSource,url:this.newUrl};this.reStore.saveImage(null,e)},imgCB(e,a){this.reStore.router.push("/teacher/editor"),console.log(e,a),this.reStore.loadImgId(e)},remove(e,a){console.log(e,a),this.reStore.removeImage(e)}}}),ka={class:"q-pa-md",style:{"max-width":"350px"}},$a={class:"row cardheader justify-between"},ba={class:""},wa={key:0},Va={class:"history-remove ptr"};function Da(e,a,h,y,D,M){return u(),g(Y,null,[s(ue,{modelValue:e.promptAddImage,"onUpdate:modelValue":a[5]||(a[5]=d=>e.promptAddImage=d)},{default:n(()=>[s(T,null,{default:n(()=>[s(A,null,{default:n(()=>[s(G,{modelValue:e.newCap,"onUpdate:modelValue":a[0]||(a[0]=d=>e.newCap=d),label:"caption"},null,8,["modelValue"]),s(G,{modelValue:e.newDesc,"onUpdate:modelValue":a[1]||(a[1]=d=>e.newDesc=d),label:"description"},null,8,["modelValue"]),s(G,{modelValue:e.newName,"onUpdate:modelValue":a[2]||(a[2]=d=>e.newName=d),label:"name"},null,8,["modelValue"]),s(G,{modelValue:e.newSource,"onUpdate:modelValue":a[3]||(a[3]=d=>e.newSource=d),label:"source"},null,8,["modelValue"]),s(G,{modelValue:e.newUrl,"onUpdate:modelValue":a[4]||(a[4]=d=>e.newUrl=d),label:"url"},null,8,["modelValue"])]),_:1}),s(de,{align:"center",class:"text-white"},{default:n(()=>[O(s($,{flat:"",label:"Cancel"},null,512),[[H]]),O(s($,{flat:"",label:"Add",onClick:this.addImageCB},null,8,["onClick"]),[[H]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l("div",ka,[s(Te,{bordered:"",class:"rounded-borders"},{default:n(()=>[s(ke,{label:"Saved Images"},{header:n(()=>[s(X,{avatar:""},{default:n(()=>[s(Ue,{icon:"image"})]),_:1}),s(X,null,{default:n(()=>[_(" Images ")]),_:1})]),default:n(()=>[s(T,null,{default:n(()=>[s(Se,{class:"bg-primary text-white rounded-borders q-my-md"},{default:n(()=>[s($,{bordered:"","no-caps":"",standout:"",onClick:a[6]||(a[6]=d=>e.promptAddImage=!0)},{default:n(()=>[_(" Add Image "),s(I,null,{default:n(()=>[_("Add a custom image (only saves url, not image data)")]),_:1})]),_:1})]),_:1}),l("div",null,[(u(!0),g(Y,null,re(this.reStore.userSnapshot.images,(d,r)=>(u(),F(T,{bordered:"",class:"q-ma-md",flat:"",modelValue:this.reStore.userSnapshot.images,"onUpdate:modelValue":a[7]||(a[7]=k=>this.reStore.userSnapshot.images=k),key:r},{default:n(()=>[l("div",$a,[l("span",ba,[s(V,{name:"title",onClick:k=>this.reStore.setCover(d)},null,8,["onClick"])]),d.cap?(u(),g("span",wa,p(d.cap.slice(0,25)),1)):J("",!0),l("span",Va,[s(V,{name:"close",onClick:k=>this.remove(r,d)},null,8,["onClick"])])]),s(xe,{class:"cardimage",onClick:k=>this.imgCB(r,d),src:d.url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])],64)}var xa=ae(Sa,[["render",Da]]);const Ta=se({name:"BookmarksComponent",setup(){return{reStore:oe()}},mounted(){z(this.reStore.userSnapshot.bookmarks,async(e,a)=>{console.log("watcher ",e,a)})},methods:{imgCB(e,a){this.reStore.router.push("/teacher/editor"),console.log(e,a),this.reStore.page=a,this.reStore.courses.trigger+=1},remove(e,a){console.log(e,a),this.reStore.removeBookmark(e)}}}),qa={class:"q-pa-md",style:{"max-width":"350px"}},Pa={class:"row cardheader justify-between"},Ia={class:"history-remove hidden"},Ka={key:0,class:"fi fi-gb"},Ba={key:1,class:"fi fi-us"},Ma={key:2,class:"fi fi-mx"},Aa={key:3,class:"fi fi-fr"},Na={key:4,class:"fi fi-de"},Ua={key:5,class:"fi fi-it"},Oa={key:6,class:"fi fi-br"},Ha={key:7,class:"fi fi-ke"},Ra={key:8,class:"fi fi-ru"},Qa={key:9,class:"fi fi-th"},La={key:10,class:"fi fi-cn"},za={key:11,class:"fi fi-hk"},Fa={key:12,class:"fi fi-tw"},Ya={key:13,class:"fi fi-kr"},ja={key:14,class:"fi fi-jp"},Ea={key:15,class:"fi fi-id"},Wa={key:16,class:"fi fi-xx"},Ja={class:"history-remove ptr"};function Ga(e,a,h,y,D,M){return u(),g("div",qa,[s(Te,{bordered:"",class:"rounded-borders"},{default:n(()=>[s(ke,{label:"Wikipedia Bookmarks"},{header:n(()=>[s(X,{avatar:""},{default:n(()=>[s(Ue,{icon:"bookmark"})]),_:1}),s(X,null,{default:n(()=>[_(" Bookmarks ")]),_:1})]),default:n(()=>[s(T,null,{default:n(()=>[l("div",null,[(u(!0),g(Y,null,re(this.reStore.userSnapshot.bookmarks,(d,r)=>(u(),F(T,{class:"q-ma-md",flat:"",bordered:"",modelValue:this.reStore.userSnapshot.bookmarks,"onUpdate:modelValue":a[0]||(a[0]=k=>this.reStore.userSnapshot.bookmarks=k),key:r},{default:n(()=>[l("div",Pa,[l("span",Ia,[s(V)]),d.langVoiceKey==="Eng-UK-Fem"?(u(),g("span",Ka)):d.langVoiceKey==="Eng-US"?(u(),g("span",Ba)):d.langVoiceKey==="espa\xF1ol"?(u(),g("span",Ma)):d.langVoiceKey==="fran\xE7ais"?(u(),g("span",Aa)):d.langVoiceKey==="Deutsch"?(u(),g("span",Na)):d.langVoiceKey==="italiano"?(u(),g("span",Ua)):d.langVoiceKey==="portugu\xEAs do Brasil"?(u(),g("span",Oa)):d.langVoiceKey==="Kiswahili"?(u(),g("span",Ha)):d.langVoiceKey==="\u0440\u0443\u0441\u0441\u043A\u0438\u0439"?(u(),g("span",Ra)):d.langVoiceKey==="\u0E44\u0E17\u0E22"?(u(),g("span",Qa)):d.langVoiceKey==="\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09"?(u(),g("span",La)):d.langVoiceKey==="\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09"?(u(),g("span",za)):d.langVoiceKey==="\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09"?(u(),g("span",Fa)):d.langVoiceKey==="\uD55C\uAD6D\uC758"?(u(),g("span",Ya)):d.langVoiceKey==="\u65E5\u672C\u8A9E"?(u(),g("span",ja)):d.langVoiceKey==="Bahasa Indonesia"?(u(),g("span",Ea)):(u(),g("span",Wa)),_(" "+p(d.pageTitle.slice(0,25))+" ",1),l("span",Ja,[s(V,{name:"close",onClick:k=>this.remove(r,d)},null,8,["onClick"])])]),s(xe,{class:"cardimage",onClick:k=>this.imgCB(r,d),src:d.imgs[d.imgIdx].url},null,8,["onClick","src"])]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])}var Xa=ae(Ta,[["render",Ga]]);const Za=["gregorian","persian"],eo={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Za.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},to=["update:modelValue"];function ne(e){return e.year+"/"+ge(e.month)+"/"+ge(e.day)}function so(e,a){const h=b(()=>e.disable!==!0&&e.readonly!==!0),y=b(()=>e.editable===!0?0:-1),D=b(()=>{const r=[];return e.color!==void 0&&r.push(`bg-${e.color}`),e.textColor!==void 0&&r.push(`text-${e.textColor}`),r.join(" ")});function M(){return e.locale!==void 0?{...a.lang.date,...e.locale}:a.lang.date}function d(r){const k=new Date,q=r===!0?null:0;if(e.calendar==="persian"){const Z=cs(k);return{year:Z.jy,month:Z.jm,day:Z.jd}}return{year:k.getFullYear(),month:k.getMonth()+1,day:k.getDate(),hour:q,minute:q,second:q,millisecond:q}}return{editable:h,tabindex:y,headerClass:D,getLocale:M,getCurrentDate:d}}const he=20,ao=["Calendar","Years","Months"],Dt=e=>ao.includes(e),ot=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Ce=" \u2014 ";function ie(e){return e.year+"/"+ge(e.month)}var oo=lt({name:"QDate",props:{...eo,...Jt,...vs,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:ot},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:ot},navigationMaxYearMonth:{type:String,validator:ot},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Dt}},emits:[...to,"rangeStart","rangeEnd","navigation"],setup(e,{slots:a,emit:h}){const{proxy:y}=os(),{$q:D}=y,M=_s(e,D),{getCache:d}=es(),{tabindex:r,headerClass:k,getLocale:q,getCurrentDate:Z}=so(e,D);let fe;const Oe=Gt(e),He=Xt(Oe),$e=c(null),ee=c(ht()),B=c(q()),Re=b(()=>ht()),Qe=b(()=>q()),P=b(()=>Z()),S=c(gt(ee.value,B.value)),j=c(e.defaultView),nt=D.lang.rtl===!0?"right":"left",qe=c(nt.value),Le=c(nt.value),ze=S.value.year,Pe=c(ze-ze%he-(ze<0?he:0)),R=c(null),Pt=b(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(M.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),ce=b(()=>e.color||"primary"),pe=b(()=>e.textColor||"white"),Ie=b(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Fe=b(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),W=b(()=>Fe.value.filter(t=>typeof t=="string").map(t=>We(t,ee.value,B.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),ve=b(()=>{const t=o=>We(o,ee.value,B.value);return Fe.value.filter(o=>ss(o)===!0&&o.from!==void 0&&o.to!==void 0).map(o=>({from:t(o.from),to:t(o.to)})).filter(o=>o.from.dateHash!==null&&o.to.dateHash!==null&&o.from.dateHash<o.to.dateHash)}),Ke=b(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const o=wt(t.year,t.month,t.day);return new Date(o.gy,o.gm-1,o.gd)}),Ye=b(()=>e.calendar==="persian"?ne:(t,o,i)=>ms(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),o===void 0?ee.value:o,i===void 0?B.value:i,t.year,t.timezoneOffset)),be=b(()=>W.value.length+ve.value.reduce((t,o)=>t+1+hs(Ke.value(o.to),Ke.value(o.from)),0)),it=b(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(R.value!==null){const i=R.value.init,f=Ke.value(i);return B.value.daysShort[f.getDay()]+", "+B.value.monthsShort[i.month-1]+" "+i.day+Ce+"?"}if(be.value===0)return Ce;if(be.value>1)return`${be.value} ${B.value.pluralDay}`;const t=W.value[0],o=Ke.value(t);return isNaN(o.valueOf())===!0?Ce:B.value.headerTitle!==void 0?B.value.headerTitle(o,t):B.value.daysShort[o.getDay()]+", "+B.value.monthsShort[t.month-1]+" "+t.day}),It=b(()=>W.value.concat(ve.value.map(o=>o.from)).sort((o,i)=>o.year-i.year||o.month-i.month)[0]),Kt=b(()=>W.value.concat(ve.value.map(o=>o.to)).sort((o,i)=>i.year-o.year||i.month-o.month)[0]),rt=b(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(be.value===0)return Ce;if(be.value>1){const t=It.value,o=Kt.value,i=B.value.monthsShort;return i[t.month-1]+(t.year!==o.year?" "+t.year+Ce+i[o.month-1]+" ":t.month!==o.month?Ce+i[o.month-1]:"")+" "+o.year}return W.value[0].year}),Be=b(()=>{const t=[D.iconSet.datetime.arrowLeft,D.iconSet.datetime.arrowRight];return D.lang.rtl===!0?t.reverse():t}),dt=b(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):B.value.firstDayOfWeek),Bt=b(()=>{const t=B.value.daysShort,o=dt.value;return o>0?t.slice(o,7).concat(t.slice(0,o)):t}),le=b(()=>{const t=S.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():at(t.year,t.month)}),Mt=b(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),Q=b(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),L=b(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),je=b(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return Q.value!==null&&Q.value.year>=S.value.year&&(t.year.prev=!1,Q.value.year===S.value.year&&Q.value.month>=S.value.month&&(t.month.prev=!1)),L.value!==null&&L.value.year<=S.value.year&&(t.year.next=!1,L.value.year===S.value.year&&L.value.month<=S.value.month&&(t.month.next=!1)),t}),Me=b(()=>{const t={};return W.value.forEach(o=>{const i=ie(o);t[i]===void 0&&(t[i]=[]),t[i].push(o.day)}),t}),ut=b(()=>{const t={};return ve.value.forEach(o=>{const i=ie(o.from),f=ie(o.to);if(t[i]===void 0&&(t[i]=[]),t[i].push({from:o.from.day,to:i===f?o.to.day:void 0,range:o}),i<f){let m;const{year:x,month:v}=o.from,w=v<12?{year:x,month:v+1}:{year:x+1,month:1};for(;(m=ie(w))<=f;)t[m]===void 0&&(t[m]=[]),t[m].push({from:void 0,to:m===f?o.to.day:void 0,range:o}),w.month++,w.month>12&&(w.year++,w.month=1)}}),t}),we=b(()=>{if(R.value===null)return;const{init:t,initHash:o,final:i,finalHash:f}=R.value,[m,x]=o<=f?[t,i]:[i,t],v=ie(m),w=ie(x);if(v!==E.value&&w!==E.value)return;const K={};return v===E.value?(K.from=m.day,K.includeFrom=!0):K.from=1,w===E.value?(K.to=x.day,K.includeTo=!0):K.to=le.value,K}),E=b(()=>ie(S.value)),At=b(()=>{const t={};if(e.options===void 0){for(let i=1;i<=le.value;i++)t[i]=!0;return t}const o=typeof e.options=="function"?e.options:i=>e.options.includes(i);for(let i=1;i<=le.value;i++){const f=E.value+"/"+ge(i);t[i]=o(f)}return t}),Nt=b(()=>{const t={};if(e.events===void 0)for(let o=1;o<=le.value;o++)t[o]=!1;else{const o=typeof e.events=="function"?e.events:i=>e.events.includes(i);for(let i=1;i<=le.value;i++){const f=E.value+"/"+ge(i);t[i]=o(f)===!0&&Mt.value(f)}}return t}),Ut=b(()=>{let t,o;const{year:i,month:f}=S.value;if(e.calendar!=="persian")t=new Date(i,f-1,1),o=new Date(i,f-1,0).getDate();else{const m=wt(i,f,1);t=new Date(m.gy,m.gm-1,m.gd);let x=f-1,v=i;x===0&&(x=12,v--),o=at(v,x)}return{days:t.getDay()-dt.value-1,endDay:o}}),ct=b(()=>{const t=[],{days:o,endDay:i}=Ut.value,f=o<0?o+7:o;if(f<6)for(let v=i-f;v<=i;v++)t.push({i:v,fill:!0});const m=t.length;for(let v=1;v<=le.value;v++){const w={i:v,event:Nt.value[v],classes:[]};At.value[v]===!0&&(w.in=!0,w.flat=!0),t.push(w)}if(Me.value[E.value]!==void 0&&Me.value[E.value].forEach(v=>{const w=m+v-1;Object.assign(t[w],{selected:!0,unelevated:!0,flat:!1,color:ce.value,textColor:pe.value})}),ut.value[E.value]!==void 0&&ut.value[E.value].forEach(v=>{if(v.from!==void 0){const w=m+v.from-1,K=m+(v.to||le.value)-1;for(let et=w;et<=K;et++)Object.assign(t[et],{range:v.range,unelevated:!0,color:ce.value,textColor:pe.value});Object.assign(t[w],{rangeFrom:!0,flat:!1}),v.to!==void 0&&Object.assign(t[K],{rangeTo:!0,flat:!1})}else if(v.to!==void 0){const w=m+v.to-1;for(let K=m;K<=w;K++)Object.assign(t[K],{range:v.range,unelevated:!0,color:ce.value,textColor:pe.value});Object.assign(t[w],{flat:!1,rangeTo:!0})}else{const w=m+le.value-1;for(let K=m;K<=w;K++)Object.assign(t[K],{range:v.range,unelevated:!0,color:ce.value,textColor:pe.value})}}),we.value!==void 0){const v=m+we.value.from-1,w=m+we.value.to-1;for(let K=v;K<=w;K++)t[K].color=ce.value,t[K].editRange=!0;we.value.includeFrom===!0&&(t[v].editRangeFrom=!0),we.value.includeTo===!0&&(t[w].editRangeTo=!0)}S.value.year===P.value.year&&S.value.month===P.value.month&&(t[m+P.value.day-1].today=!0);const x=t.length%7;if(x>0){const v=7-x;for(let w=1;w<=v;w++)t.push({i:w,fill:!0})}return t.forEach(v=>{let w="q-date__calendar-item ";v.fill===!0?w+="q-date__calendar-item--fill":(w+=`q-date__calendar-item--${v.in===!0?"in":"out"}`,v.range!==void 0&&(w+=` q-date__range${v.rangeTo===!0?"-to":v.rangeFrom===!0?"-from":""}`),v.editRange===!0&&(w+=` q-date__edit-range${v.editRangeFrom===!0?"-from":""}${v.editRangeTo===!0?"-to":""}`),(v.range!==void 0||v.editRange===!0)&&(w+=` text-${v.color}`)),v.classes=w}),t}),Ot=b(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});z(()=>e.modelValue,t=>{if(fe===t)fe=0;else{const{year:o,month:i}=gt(ee.value,B.value);_e(o,i)}}),z(j,()=>{$e.value!==null&&y.$el.contains(document.activeElement)===!0&&$e.value.focus()}),z(()=>S.value.year,t=>{h("navigation",{year:t,month:S.value.month})}),z(()=>S.value.month,t=>{h("navigation",{year:S.value.year,month:t})}),z(Re,t=>{yt(t,B.value,"mask"),ee.value=t}),z(Qe,t=>{yt(ee.value,t,"locale"),B.value=t});function mt(){const t=P.value,o=Me.value[ie(t)];(o===void 0||o.includes(t.day)===!1)&&Ge(t),Ee(t.year,t.month)}function Ht(t){Dt(t)===!0&&(j.value=t)}function Rt(t,o){["month","year"].includes(t)&&(t==="month"?pt:Je)(o===!0?-1:1)}function Ee(t,o){j.value="Calendar",_e(t,o)}function Qt(t,o){if(e.range===!1||!t){R.value=null;return}const i=Object.assign({...S.value},t),f=o!==void 0?Object.assign({...S.value},o):i;R.value={init:i,initHash:ne(i),final:f,finalHash:ne(f)},Ee(i.year,i.month)}function ht(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function We(t,o,i){return gs(t,o,i,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function gt(t,o){const i=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(i.length===0)return ft();const f=i[i.length-1],m=We(f.from!==void 0?f.from:f,t,o);return m.dateHash===null?ft():m}function ft(){let t,o;if(e.defaultYearMonth!==void 0){const i=e.defaultYearMonth.split("/");t=parseInt(i[0],10),o=parseInt(i[1],10)}else{const i=P.value!==void 0?P.value:Z();t=i.year,o=i.month}return{year:t,month:o,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+ge(o)+"/01"}}function pt(t){let o=S.value.year,i=Number(S.value.month)+t;i===13?(i=1,o++):i===0&&(i=12,o--),_e(o,i),Ie.value===!0&&Ae("month")}function Je(t){const o=Number(S.value.year)+t;_e(o,S.value.month),Ie.value===!0&&Ae("year")}function Lt(t){_e(t,S.value.month),j.value=e.defaultView==="Years"?"Months":"Calendar",Ie.value===!0&&Ae("year")}function zt(t){_e(S.value.year,t),j.value="Calendar",Ie.value===!0&&Ae("month")}function Ft(t,o){const i=Me.value[o];(i!==void 0&&i.includes(t.day)===!0?Xe:Ge)(t)}function me(t){return{year:t.year,month:t.month,day:t.day}}function _e(t,o){Q.value!==null&&t<=Q.value.year&&(t=Q.value.year,o<Q.value.month&&(o=Q.value.month)),L.value!==null&&t>=L.value.year&&(t=L.value.year,o>L.value.month&&(o=L.value.month));const i=t+"/"+ge(o)+"/01";i!==S.value.dateHash&&(qe.value=S.value.dateHash<i==(D.lang.rtl!==!0)?"left":"right",t!==S.value.year&&(Le.value=qe.value),Ct(()=>{Pe.value=t-t%he-(t<0?he:0),Object.assign(S.value,{year:t,month:o,day:1,dateHash:i})}))}function vt(t,o,i){const f=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;fe=f;const{reason:m,details:x}=_t(o,i);h("update:modelValue",f,m,x)}function Ae(t){const o=W.value[0]!==void 0&&W.value[0].dateHash!==null?{...W.value[0]}:{...S.value};Ct(()=>{o.year=S.value.year,o.month=S.value.month;const i=e.calendar!=="persian"?new Date(o.year,o.month,0).getDate():at(o.year,o.month);o.day=Math.min(Math.max(1,o.day),i);const f=ye(o);fe=f;const{details:m}=_t("",o);h("update:modelValue",f,t,m)})}function _t(t,o){return o.from!==void 0?{reason:`${t}-range`,details:{...me(o.target),from:me(o.from),to:me(o.to)}}:{reason:`${t}-day`,details:me(o)}}function ye(t,o,i){return t.from!==void 0?{from:Ye.value(t.from,o,i),to:Ye.value(t.to,o,i)}:Ye.value(t,o,i)}function Ge(t){let o;if(e.multiple===!0)if(t.from!==void 0){const i=ne(t.from),f=ne(t.to),m=W.value.filter(v=>v.dateHash<i||v.dateHash>f),x=ve.value.filter(({from:v,to:w})=>w.dateHash<i||v.dateHash>f);o=m.concat(x).concat(t).map(v=>ye(v))}else{const i=Fe.value.slice();i.push(ye(t)),o=i}else o=ye(t);vt(o,"add",t)}function Xe(t){if(e.noUnset===!0)return;let o=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const i=ye(t);t.from!==void 0?o=e.modelValue.filter(f=>f.from!==void 0?f.from!==i.from&&f.to!==i.to:!0):o=e.modelValue.filter(f=>f!==i),o.length===0&&(o=null)}vt(o,"remove",t)}function yt(t,o,i){const f=W.value.concat(ve.value).map(m=>ye(m,t,o)).filter(m=>m.from!==void 0?m.from.dateHash!==null&&m.to.dateHash!==null:m.dateHash!==null);h("update:modelValue",(e.multiple===!0?f:f[0])||null,i)}function Yt(){if(e.minimal!==!0)return C("div",{class:"q-date__header "+k.value},[C("div",{class:"relative-position"},[C(Ve,{name:"q-transition--fade"},()=>C("div",{key:"h-yr-"+rt.value,class:"q-date__header-subtitle q-date__header-link "+(j.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:r.value,...d("vY",{onClick(){j.value="Years"},onKeyup(t){t.keyCode===13&&(j.value="Years")}})},[rt.value]))]),C("div",{class:"q-date__header-title relative-position flex no-wrap"},[C("div",{class:"relative-position col"},[C(Ve,{name:"q-transition--fade"},()=>C("div",{key:"h-sub"+it.value,class:"q-date__header-title-label q-date__header-link "+(j.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:r.value,...d("vC",{onClick(){j.value="Calendar"},onKeyup(t){t.keyCode===13&&(j.value="Calendar")}})},[it.value]))]),e.todayBtn===!0?C($,{class:"q-date__header-today self-start",icon:D.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:r.value,onClick:mt}):null])])}function Ze({label:t,type:o,key:i,dir:f,goTo:m,boundaries:x,cls:v}){return[C("div",{class:"row items-center q-date__arrow"},[C($,{round:!0,dense:!0,size:"sm",flat:!0,icon:Be.value[0],tabindex:r.value,disable:x.prev===!1,...d("go-#"+o,{onClick(){m(-1)}})})]),C("div",{class:"relative-position overflow-hidden flex flex-center"+v},[C(Ve,{name:"q-transition--jump-"+f},()=>C("div",{key:i},[C($,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:r.value,...d("view#"+o,{onClick:()=>{j.value=o}})})]))]),C("div",{class:"row items-center q-date__arrow"},[C($,{round:!0,dense:!0,size:"sm",flat:!0,icon:Be.value[1],tabindex:r.value,disable:x.next===!1,...d("go+#"+o,{onClick(){m(1)}})})])]}const jt={Calendar:()=>[C("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[C("div",{class:"q-date__navigation row items-center no-wrap"},Ze({label:B.value.months[S.value.month-1],type:"Months",key:S.value.month,dir:qe.value,goTo:pt,boundaries:je.value.month,cls:" col"}).concat(Ze({label:S.value.year,type:"Years",key:S.value.year,dir:Le.value,goTo:Je,boundaries:je.value.year,cls:""}))),C("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Bt.value.map(t=>C("div",{class:"q-date__calendar-item"},[C("div",t)]))),C("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[C(Ve,{name:"q-transition--slide-"+qe.value},()=>C("div",{key:E.value,class:"q-date__calendar-days fit"},ct.value.map(t=>C("div",{class:t.classes},[t.in===!0?C($,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:r.value,...d("day#"+t.i,{onClick:()=>{Et(t.i)},onMouseover:()=>{Wt(t.i)}})},t.event!==!1?()=>C("div",{class:"q-date__event bg-"+t.event}):null):C("div",""+t.i)]))))])])],Months(){const t=S.value.year===P.value.year,o=f=>Q.value!==null&&S.value.year===Q.value.year&&Q.value.month>f||L.value!==null&&S.value.year===L.value.year&&L.value.month<f,i=B.value.monthsShort.map((f,m)=>{const x=S.value.month===m+1;return C("div",{class:"q-date__months-item flex flex-center"},[C($,{class:t===!0&&P.value.month===m+1?"q-date__today":null,flat:x!==!0,label:f,unelevated:x,color:x===!0?ce.value:null,textColor:x===!0?pe.value:null,tabindex:r.value,disable:o(m+1),...d("month#"+m,{onClick:()=>{zt(m+1)}})})])});return e.yearsInMonthView===!0&&i.unshift(C("div",{class:"row no-wrap full-width"},[Ze({label:S.value.year,type:"Years",key:S.value.year,dir:Le.value,goTo:Je,boundaries:je.value.year,cls:" col"})])),C("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},i)},Years(){const t=Pe.value,o=t+he,i=[],f=m=>Q.value!==null&&Q.value.year>m||L.value!==null&&L.value.year<m;for(let m=t;m<=o;m++){const x=S.value.year===m;i.push(C("div",{class:"q-date__years-item flex flex-center"},[C($,{key:"yr"+m,class:P.value.year===m?"q-date__today":null,flat:!x,label:m,dense:!0,unelevated:x,color:x===!0?ce.value:null,textColor:x===!0?pe.value:null,tabindex:r.value,disable:f(m),...d("yr#"+m,{onClick:()=>{Lt(m)}})})]))}return C("div",{class:"q-date__view q-date__years flex flex-center"},[C("div",{class:"col-auto"},[C($,{round:!0,dense:!0,flat:!0,icon:Be.value[0],tabindex:r.value,disable:f(t),...d("y-",{onClick:()=>{Pe.value-=he}})})]),C("div",{class:"q-date__years-content col self-stretch row items-center"},i),C("div",{class:"col-auto"},[C($,{round:!0,dense:!0,flat:!0,icon:Be.value[1],tabindex:r.value,disable:f(o),...d("y+",{onClick:()=>{Pe.value+=he}})})])])}};function Et(t){const o={...S.value,day:t};if(e.range===!1){Ft(o,E.value);return}if(R.value===null){const i=ct.value.find(m=>m.fill!==!0&&m.i===t);if(e.noUnset!==!0&&i.range!==void 0){Xe({target:o,from:i.range.from,to:i.range.to});return}if(i.selected===!0){Xe(o);return}const f=ne(o);R.value={init:o,initHash:f,final:o,finalHash:f},h("rangeStart",me(o))}else{const i=R.value.initHash,f=ne(o),m=i<=f?{from:R.value.init,to:o}:{from:o,to:R.value.init};R.value=null,Ge(i===f?o:{target:o,...m}),h("rangeEnd",{from:me(m.from),to:me(m.to)})}}function Wt(t){if(R.value!==null){const o={...S.value,day:t};Object.assign(R.value,{final:o,finalHash:ne(o)})}}return Object.assign(y,{setToday:mt,setView:Ht,offsetCalendar:Rt,setCalendarTo:Ee,setEditingRange:Qt}),()=>{const t=[C("div",{class:"q-date__content col relative-position"},[C(Ve,{name:"q-transition--fade"},jt[j.value])])],o=as(a.default);return o!==void 0&&t.push(C("div",{class:"q-date__actions"},o)),e.name!==void 0&&e.disable!==!0&&He(t,"push"),C("div",{class:Pt.value,...Ot.value},[Yt(),C("div",{ref:$e,class:"q-date__main col column",tabindex:-1},t)])}}});const lo=["top","middle","bottom"];var no=lt({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>lo.includes(e)}},setup(e,{slots:a}){const h=b(()=>e.align!==void 0?{verticalAlign:e.align}:null),y=b(()=>{const D=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(D!==void 0?` text-${D}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>C("div",{class:y.value,style:h.value,role:"status","aria-label":e.label},ls(a.default,e.label!==void 0?[e.label]:[]))}});const io=se({name:"OTDComponent",setup(){const e=oe(),a=Date.now(),h=Vt.formatDate(a,"MM/DD");return{reStore:e,otditems:c([]),promptOTDDate:c(!1),otddate:c(Date.now()),otdlabel:c(h),otdtype:c("selected")}},mounted(){this.init(),z(this.reStore.preferences,async(e,a)=>{console.log("OTD watcher"),e.langVoiceKey!==a.langVoiceKey?this.init():(console.log("OTD watcher ",e),this.init())})},methods:{async init(){console.log("OTD init");const e=this.reStore.preferences.langVoiceKey;await this.reStore.wiki.setLang(this.reStore.langVoices[e].langName);const a=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=a[this.otdtype],console.log(this.otditems);for(const[y,D]of Object.entries(this.reStore.langVoices)){const M=D.flagName;N("#otdfi").classed(M,!1)}const h=this.reStore.langVoices[e].flagName;N("#otdfi").classed(h,!0)},async loadPageId(e){console.log("loadPageId ",e);const a=this.reStore.preferences.langVoiceKey;console.log("OTD load ",a),this.reStore.loadPageId(e,a),this.reStore.router.push("/teacher/editor")},async load(e){console.log("load",this.otditems[e].text),console.log("load",this.otditems[e]);const a=this.reStore.preferences.langVoiceKey;console.log("OTD load ",a),this.reStore.loadPageId(this.otditems[e].pages[0].pageid,a),this.reStore.router.push("/teacher/editor")},async updateOTDDate(){console.log("updateOTDDate: ",this.otddate);const e=await this.reStore.wiki.onThisDay({type:"selected",month:this.otddate.split("/")[1],day:this.otddate.split("/")[2]});this.otditems=e.selected,console.log(this.otditems),this.otdtype="selected",this.otdlabel=Vt.formatDate(this.otddate,"MM/DD")},async otdOptionsCB(e){console.log("otdOptionsCB",this.otdtype);const a=await this.reStore.wiki.onThisDay({type:this.otdtype});this.otditems=a[this.otdtype]}}}),ro=l("div",{class:"text-h6"},"Select Date",-1),uo={class:"q-pa-md",style:{"max-width":"350px"}},co={class:"q-gutter-y-sm column"},mo=l("span",{id:"otdfi",class:"pfi text-h4"},null,-1),ho={class:""},go=["onClick"],fo=l("br",null,null,-1);function po(e,a,h,y,D,M){return u(),g(Y,null,[s(ue,{modelValue:e.promptOTDDate,"onUpdate:modelValue":a[2]||(a[2]=d=>e.promptOTDDate=d),persistent:""},{default:n(()=>[s(T,{style:{"min-width":"350px"}},{default:n(()=>[s(A,{align:"center"},{default:n(()=>[ro]),_:1}),s(oo,{modelValue:e.otddate,"onUpdate:modelValue":a[0]||(a[0]=d=>e.otddate=d),minimal:""},null,8,["modelValue"]),s(de,{align:"center",class:"text-white"},{default:n(()=>[O(s($,{flat:"",label:"Cancel"},null,512),[[H]]),O(s($,{flat:"",label:"Update OTD date",onClick:a[1]||(a[1]=d=>this.updateOTDDate())},null,512),[[H]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l("div",uo,[s(Te,{bordered:"",class:"rounded-borders"},{default:n(()=>[s(ke,null,{header:n(()=>[s(X,{avatar:""},{default:n(()=>[s(Ue,{icon:"stars"})]),_:1}),s(X,null,{default:n(()=>[_(" On This Day ")]),_:1})]),default:n(()=>[s(T,null,{default:n(()=>[l("div",co,[s(Se,{class:"bg-primary text-white rounded-borders q-my-md"},{default:n(()=>[s($,{dark:"",standout:"",onClick:a[3]||(a[3]=d=>e.promptOTDDate=!0)},{default:n(()=>[_(p(e.otdlabel),1)]),_:1}),s(Ne),mo,s(Ne),s(Tt,{dark:"",outlined:"",dense:"",modelValue:this.otdtype,"onUpdate:modelValue":a[4]||(a[4]=d=>this.otdtype=d),options:["events","holidays","births","deaths","selected"],"emit-value":"",onPopupHide:a[5]||(a[5]=d=>this.otdOptionsCB())},null,8,["modelValue"])]),_:1})]),l("div",ho,[(u(!0),g(Y,null,re(e.otditems,(d,r)=>(u(),F(T,{class:"bg-primary otdcard q-pa-sm q-ma-md",flat:"",bordered:"",modelValue:e.otditems,"onUpdate:modelValue":a[6]||(a[6]=k=>e.otditems=k),key:r},{default:n(()=>[l("span",{style:{cursor:"pointer"},onClick:k=>this.load(r)},p(r),9,go),_(". "+p(d.year)+" "+p(d.text),1),fo,(u(!0),g(Y,null,re(d.pages,(k,q)=>(u(),g("span",{key:q},[s(no,{class:"on-left",color:"accent",style:{cursor:"pointer"},onClick:Z=>this.loadPageId(k.pageid)},{default:n(()=>[s(I,null,{default:n(()=>[_(p(k.title),1)]),_:2},1024),s(V,{size:"xs",name:"link"})]),_:2},1032,["onClick"])]))),128))]),_:2},1032,["modelValue"]))),128))])]),_:1})]),_:1})]),_:1})])],64)}var vo=ae(io,[["render",po]]);const _o=se({name:"CurrentAssignment",setup(){const e=oe();return{reStore:e,ck:c("-"),goal:c("-"),created:c("-"),updated:c("-"),id:c("-"),points:c("-"),pages:c([]),pgIdx:c(e.courses.pgIdx),title:c(""),promptEditTitle:c(!1)}},mounted(){console.log("CurrentAssignment mounted"),z(this.reStore.courses,async(e,a)=>{try{console.log("CurrentAssignment.watcher");const h=e.ck,y=e.aid;this.id=y,this.ck=h,this.goal=this.reStore.courses[h].assignments[y].goal,this.created=this.reStore.courses[h].assignments[y].created,this.updated=this.reStore.courses[h].assignments[y].updated,this.points=this.reStore.courses[h].assignments[y].points;try{const D=this.reStore.courses[h].assignments[y].pages.length;console.log("pages.length ",D)}catch{this.reStore.courses[h].assignments[y].pages=[]}this.pages=this.reStore.courses[h].assignments[y].pages,this.title=this.reStore.courses[h].assignments[y].title,this.pgIdx=this.reStore.courses.pgIdx}catch(h){console.log(h)}},{immediate:!0,deep:!0})},methods:{save(){console.log("save"),this.reStore.saveCurrentAssignment()},nextPage(){this.reStore.nextPage()},changeTitleCB(){console.log("CurrentAssignment.changeTitleCB",this.title),this.reStore.setAssignmentTitle(this.reStore.courses.ck,this.reStore.courses.aid,this.title)}}}),yo=l("div",{class:"text-h6"},"Change assignment title",-1),Co={class:"text-weight-bolder text-center q-pa-md text-white"},So=l("br",null,null,-1),ko={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},$o={width:"100%"},bo=l("td",null,"Title",-1),wo={style:{width:"50%"}},Vo=l("td",null,"Course-Key",-1),Do={style:{width:"50%"}},xo=l("td",null,"Assgmnt Id",-1),To={style:{width:"50%"}},qo=l("td",null,"Created",-1),Po={style:{width:"50%"}},Io=l("td",null,"Updated",-1),Ko={style:{width:"50%"}},Bo=l("td",null,"Goal",-1),Mo={style:{width:"50%"}},Ao=l("td",null,"Pages",-1);function No(e,a,h,y,D,M){const d=U("router-link");return u(),g(Y,null,[s(ue,{modelValue:e.promptEditTitle,"onUpdate:modelValue":a[3]||(a[3]=r=>e.promptEditTitle=r),persistent:""},{default:n(()=>[s(T,{style:{"min-width":"350px"}},{default:n(()=>[s(A,null,{default:n(()=>[yo]),_:1}),s(A,{class:"q-pt-none"},{default:n(()=>[s(G,{dense:"",modelValue:e.title,"onUpdate:modelValue":a[0]||(a[0]=r=>e.title=r),autofocus:"",onKeyup:a[1]||(a[1]=De(r=>{e.prompt=!1,this.changeTitleCB()},["enter"]))},null,8,["modelValue"])]),_:1}),s(de,{align:"right",class:"text-white"},{default:n(()=>[O(s($,{outline:"",label:"Cancel"},null,512),[[H]]),O(s($,{outline:"",label:"Save",onClick:a[2]||(a[2]=r=>this.changeTitleCB())},null,512),[[H]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(T,{flat:""},{default:n(()=>[s(A,null,{default:n(()=>[l("div",Co,[s(d,{to:"/teacher/editor",class:"text-white"},{default:n(()=>[_(p(this.title.slice(0,20)),1)]),_:1}),So,s(V,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:a[4]||(a[4]=r=>this.promptEditTitle=!0),size:"sm"}),s(V,{style:{cursor:"pointer"},class:"on-right",name:"save",onClick:this.save,size:"sm"},null,8,["onClick"])]),l("div",ko,[l("table",$o,[l("tr",null,[bo,l("td",wo,p(this.title),1)]),l("tr",null,[Vo,l("td",Do,p(this.ck),1)]),l("tr",null,[xo,l("td",To,p(this.id),1)]),l("tr",null,[qo,l("td",Po,p(this.created),1)]),l("tr",null,[Io,l("td",Ko,p(this.updated),1)]),l("tr",null,[Bo,l("td",Mo,p(this.goal),1)]),l("tr",null,[Ao,l("td",{style:{width:"50%",cursor:"pointer"},onClick:a[5]||(a[5]=r=>this.nextPage())},p(this.pgIdx+1)+" / "+p(this.pages.length),1)])])])]),_:1})]),_:1})],64)}var Uo=ae(_o,[["render",No]]);const Oo=se({name:"CurrentCourse",setup(){return{reStore:oe(),title:c(""),assignmentCount:c(0),courseKey:c(""),created:c(""),updated:c(""),enrollmentCount:c(0),owner:c("")}},mounted(){console.log("CurrentCourse mounted"),z(this.reStore.courses,async(e,a)=>{try{if(this.reStore.courses.ck!=="undefined"){const h=this.reStore.courses.ck;console.log("CurrentCourse ",h),this.title=this.reStore.courses[h].title,this.courseKey=this.reStore.courses[h].courseKey,this.created=this.reStore.courses[h].created,this.updated=this.reStore.courses[h].updated,this.assignmentCount=Object.keys(this.reStore.courses[h].assignments).length,this.enrollmentCount=Object.keys(this.reStore.courses[h].enrollment).length,this.owner=this.reStore.courses[h].owner}}catch(h){console.log(h)}},{immediate:!0,deep:!0})},methods:{dummy(){console.log("dummy")}}}),Ho={class:"text-weight-bolder text-center q-pa-md"},Ro={style:{border:"1px solid gray","border-radius":"5px"},class:"q-my-md"},Qo={width:"100%"},Lo=l("td",null,"Title",-1),zo={style:{width:"50%"}},Fo=l("td",null,"Course-Key",-1),Yo={style:{width:"50%"}},jo=l("td",null,"Created",-1),Eo={style:{width:"50%"}},Wo=l("td",null,"Updated",-1),Jo={style:{width:"50%"}},Go=l("td",null,"Owner",-1),Xo={style:{width:"50%"}},Zo=l("td",null,"Assignments",-1),el={style:{width:"50%"}},tl=l("td",null,"Enrollment",-1),sl={style:{width:"50%"}};function al(e,a,h,y,D,M){return u(),F(T,{flat:""},{default:n(()=>[s(A,null,{default:n(()=>[l("div",Ho,p(this.title),1),l("div",Ro,[l("table",Qo,[l("tr",null,[Lo,l("td",zo,p(this.title),1)]),l("tr",null,[Fo,l("td",Yo,p(this.courseKey),1)]),l("tr",null,[jo,l("td",Eo,p(this.created),1)]),l("tr",null,[Wo,l("td",Jo,p(this.updated),1)]),l("tr",null,[Go,l("td",Xo,p(this.owner.slice(0,10)),1)]),l("tr",null,[Zo,l("td",el,p(this.assignmentCount),1)]),l("tr",null,[tl,l("td",sl,p(this.enrollmentCount),1)])])])]),_:1})]),_:1})}var ol=ae(Oo,[["render",al]]);function xt(e){return e===null||e===""?!1:(e=e.toString(),e=e.replaceAll("&nbsp;",""),e.replace(/(<([^>]+)>)/ig,""))}const ll=se({name:"PagerComponent",setup(){return{reStore:oe(),assignment:c(null),promptAssignmentTitle:c(!1),promptPageTitle:c(!1)}},mounted(){console.log("mounted"),this.reStore.courses.ck&&this.reStore.courses.aid&&(this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[this.reStore.courses.ck].assignments[this.reStore.courses.aid]))),z(this.reStore.courses,async(e,a)=>{this.reStore.courses.ck||(this.assignment=null),this.reStore.courses.aid||(this.assignment=null),!this.assignment&&e.ck&&e.aid?this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid])):e.aid&&e.ck&&this.assignment.pages.length!=e[e.ck].assignments[e.aid].pages.length?this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid])):(this.assignment.ck!==e.ck||this.assignment.id!==e.aid)&&(console.log("PagerComponent assignment changed"),this.assignment=JSON.parse(JSON.stringify(this.reStore.courses[e.ck].assignments[e.aid])))})},methods:{resetPage(){this.reStore.newPage()},newPage(){console.log("PagerComponent newPageCB "),this.reStore.newPage()},updateAssignmentTitle(){console.log("Pager updateAssignmentTitle",this.assignment.title);const e=this.reStore.courses.ck,a=this.reStore.courses.aid;this.reStore.courses[e].assignments[a].title=this.assignment.title},updatePageTitle(){console.log("updatePageTitle",this.reStore.page.pageTitle)},updatePage(e){this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages[e]=this.assignment.pages[e],e===this.reStore.courses.pgIdx&&(this.assignment.pages[e].pageText=xt(N("#slideTextDiv").html()),this.assignment.pages[e].imgs[this.page.imgIdx].cap=xt(N("#slideCaptionDiv").html()),this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e]))),this.reStore.courses.trigger+=1},updateAllPages(){for(var e=0;e<this.assignment.pages.length;e++)this.reStore.courses[this.reStore.ck].assignments[this.reStore.aid].pages[e]=JSON.parse(JSON.stringify(this.assignment.pages[e])),e===this.reStore.courses.pgIdx&&(this.reStore.page=JSON.parse(JSON.stringify(this.assignment.pages[e])));this.reStore.courses.trigger+=1},nextImg(e){const a=this.assignment.pages[e].imgIdx,h=this.assignment.pages[e].imgs.length;a+1<h?this.assignment.pages[e].imgIdx+=1:this.assignment.pages[e].imgIdx=0},prevImg(e){const a=this.assignment.pages[e].imgIdx,h=this.assignment.pages[e].imgs.length;a-1>-1?this.assignment.pages[e].imgIdx-=1:this.assignment.pages[e].imgIdx=h-1},loadCoverCB(){console.log("Pager loadCoverCB "),this.reStore.loadCover()},loadPageCB(e){console.log("Pager loadPageCB ",e),this.reStore.page=this.assignment.pages[e],this.reStore.courses.pgIdx=e,this.reStore.page.imgIdx=this.assignment.pages[e].imgIdx,this.reStore.courses.imgIdx=this.assignment.pages[e].imgIdx,te(".assignment").classed("hidden",!1),te(".coverslide").classed("hidden",!0),this.reStore.courses.trigger+=1},remove(e){console.log("remove ",e);const a=this.reStore.ck,h=this.reStore.aid;this.assignment.pages.splice(e,e+1),this.reStore.courses[a].assignments[h].pages.splice(e,e+1),this.reStore.courses.trigger+=1},dummy(){console.log("dummy")}}}),nl=l("div",{class:"text-h6"},"Assignment Title",-1),il=l("div",{class:"text-h6"},"Page Title",-1),rl={class:"flex flex-center"},dl={class:"text-weight-bolder text-center q-pa-xs"},ul={key:0},cl={class:"text-weight-bolder text-center q-pa-xs"},ml={key:0},hl={class:"text-weight-bolder text-center q-pa-xs"},gl={key:0},fl=l("span",{class:"float-left"},"Cover Page",-1),pl={class:""},vl={class:""},_l={key:0,class:"fi fi-gb"},yl={key:1,class:"fi fi-us"},Cl={key:2,class:"fi fi-mx"},Sl={key:3,class:"fi fi-fr"},kl={key:4,class:"fi fi-de"},$l={key:5,class:"fi fi-it"},bl={key:6,class:"fi fi-br"},wl={key:7,class:"fi fi-ke"},Vl={key:8,class:"fi fi-ru"},Dl={key:9,class:"fi fi-th"},xl={key:10,class:"fi fi-cn"},Tl={key:11,class:"fi fi-hk"},ql={key:12,class:"fi fi-tw"},Pl={key:13,class:"fi fi-kr"},Il={key:14,class:"fi fi-jp"},Kl={key:15,class:"fi fi-id"},Bl={key:16,class:"fi fi-xx"},Ml=l("br",null,null,-1),Al=l("br",null,null,-1),Nl=l("br",null,null,-1),Ul=l("br",null,null,-1);function Ol(e,a,h,y,D,M){const d=U("router-link");return u(),g(Y,null,[s(ue,{modelValue:e.promptAssignmentTitle,"onUpdate:modelValue":a[3]||(a[3]=r=>e.promptAssignmentTitle=r),persistent:""},{default:n(()=>[s(T,{style:{"min-width":"350px"}},{default:n(()=>[s(A,null,{default:n(()=>[nl]),_:1}),s(A,{class:"q-pt-none"},{default:n(()=>[s(G,{dense:"",modelValue:this.assignment.title,"onUpdate:modelValue":a[0]||(a[0]=r=>this.assignment.title=r),autofocus:"",onKeyup:a[1]||(a[1]=De(r=>e.promptAssignmentTitle=!1,["enter"]))},null,8,["modelValue"])]),_:1}),s(de,{align:"right"},{default:n(()=>[O(s($,{outline:"",label:"Cancel"},null,512),[[H]]),O(s($,{outline:"",label:"Update assignment title",onClick:a[2]||(a[2]=r=>this.updateAssignmentTitle())},null,512),[[H]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(ue,{modelValue:e.promptPageTitle,"onUpdate:modelValue":a[7]||(a[7]=r=>e.promptPageTitle=r),persistent:""},{default:n(()=>[s(T,{style:{"min-width":"350px"}},{default:n(()=>[s(A,null,{default:n(()=>[il]),_:1}),s(A,{class:"q-pt-none"},{default:n(()=>[s(G,{dense:"",modelValue:this.reStore.page.pageTitle,"onUpdate:modelValue":a[4]||(a[4]=r=>this.reStore.page.pageTitle=r),autofocus:"",onKeyup:a[5]||(a[5]=De(r=>e.promptAssignmentTitle=!1,["enter"]))},null,8,["modelValue"])]),_:1}),s(de,{align:"right"},{default:n(()=>[O(s($,{outline:"",label:"Cancel"},null,512),[[H]]),O(s($,{outline:"",label:"Update page title",onClick:a[6]||(a[6]=r=>this.updatePageTitle())},null,512),[[H]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(T,{flat:"",style:{"max-width":"300px"},class:"q-pa-xs"},{default:n(()=>[s(A,null,{default:n(()=>[l("div",rl,p(this.reStore.courses.ck.slice(0,3))+" | "+p(this.reStore.courses.aid.slice(0,3))+" | "+p(this.reStore.courses.pageid)+" | "+p(this.reStore.courses.imgIdx)+" | "+p(this.reStore.courses.pgIdx)+" | "+p(this.reStore.courses.trigger),1),l("div",dl,[_("Course: "),this.reStore.courses.ck?(u(),g("span",ul,p(this.reStore.courses[this.reStore.courses.ck].title),1)):J("",!0)]),l("div",cl,[_(" Title: "),this.assignment?(u(),g("span",ml,[s(d,{to:"/teacher/editor",class:"text-white"},{default:n(()=>[_(p(this.assignment.title)+" ",1),s(I,null,{default:n(()=>[_("Go to Editor")]),_:1})]),_:1}),s(V,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:a[8]||(a[8]=r=>e.promptAssignmentTitle=!0),size:"sm"}),s(V,{style:{cursor:"pointer"},class:"on-right",name:"save",onClick:a[9]||(a[9]=r=>this.reStore.saveCurrentAssignment()),size:"sm"}),s(V,{class:"on-right",name:"publish",onClick:a[10]||(a[10]=r=>this.updateAllPages()),size:"sm"},{default:n(()=>[s(I,null,{default:n(()=>[_("Update local copies of all pages from currently loaded in this Pager")]),_:1})]),_:1})])):J("",!0)]),l("div",hl,[_(" Page "+p(this.reStore.courses.pgIdx)+": "+p(this.reStore.page.pageTitle.slice(0,5))+" ",1),s(V,{style:{cursor:"pointer"},class:"on-right",name:"edit",onClick:a[11]||(a[11]=r=>this.promptPageTitle=!0),size:"sm"}),s(V,{class:"on-right",name:"replay",onClick:this.resetPage,size:"sm"},null,8,["onClick"]),s(V,{class:"on-right",name:"add_circle",onClick:this.newPage,size:"sm"},null,8,["onClick"])]),this.assignment?(u(),g("span",gl,[s(T,{class:"bg-primary q-pa-xs q-my-md",flat:"",bordered:""},{default:n(()=>[fl,s(xe,{src:this.assignment.coverUrl,onClick:e.loadCoverCB},null,8,["src","onClick"])]),_:1}),(u(!0),g(Y,null,re(this.assignment.pages,(r,k)=>(u(),F(T,{class:"bg-primary q-pa-xs q-my-md",flat:"",bordered:"",modelValue:this.assignment.pages,"onUpdate:modelValue":a[12]||(a[12]=q=>this.assignment.pages=q),key:k},{default:n(()=>[s(ke,null,{header:n(()=>[s(X,null,{default:n(()=>[s(qt,{modelValue:r.isCustom,"onUpdate:modelValue":q=>r.isCustom=q,color:"positive",icon:"shuffle","checked-icon":"check"},{default:n(()=>[s(I,null,{default:n(()=>[_(p(r.isCustom?"Custom":"Random"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(X,null,{default:n(()=>[_(p(r.pageTitle.slice(0,20)),1)]),_:2},1024)]),default:n(()=>[s(V,{class:"",name:"publish",onClick:q=>this.updatePage(k),size:"sm"},{default:n(()=>[s(I,null,{default:n(()=>[_("Update current page")]),_:1})]),_:2},1032,["onClick"]),s(V,{class:"",name:"publish",onClick:this.reStore.appendPage,size:"sm"},{default:n(()=>[s(I,null,{default:n(()=>[_("Push as new page")]),_:1})]),_:1},8,["onClick"]),l("span",pl,[s(V,{size:"sm",name:"delete",onClick:q=>e.remove(k)},null,8,["onClick"])]),l("span",vl,[r.langVoiceKey==="Eng-UK-Fem"?(u(),g("span",_l)):r.langVoiceKey==="Eng-US"?(u(),g("span",yl)):r.langVoiceKey==="espa\xF1ol"?(u(),g("span",Cl)):r.langVoiceKey==="fran\xE7ais"?(u(),g("span",Sl)):r.langVoiceKey==="Deutsch"?(u(),g("span",kl)):r.langVoiceKey==="italiano"?(u(),g("span",$l)):r.langVoiceKey==="portugu\xEAs do Brasil"?(u(),g("span",bl)):r.langVoiceKey==="Kiswahili"?(u(),g("span",wl)):r.langVoiceKey==="\u0440\u0443\u0441\u0441\u043A\u0438\u0439"?(u(),g("span",Vl)):r.langVoiceKey==="\u0E44\u0E17\u0E22"?(u(),g("span",Dl)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u4E2D\u56FD\u5927\u9646\uFF09"?(u(),g("span",xl)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u9999\u6E2F\uFF09"?(u(),g("span",Tl)):r.langVoiceKey==="\u4E2D\u6587 \uFF08\u81FA\u7063\uFF09"?(u(),g("span",ql)):r.langVoiceKey==="\uD55C\uAD6D\uC758"?(u(),g("span",Pl)):r.langVoiceKey==="\u65E5\u672C\u8A9E"?(u(),g("span",Il)):r.langVoiceKey==="Bahasa Indonesia"?(u(),g("span",Kl)):(u(),g("span",Bl)),s(I,null,{default:n(()=>[_(p(r.langVoiceKey),1)]),_:2},1024)]),Ml,l("span",null,"pageid: "+p(r.pageid),1),Al,l("span",null,"lat, lng: "+p(r.mapCoords),1),Nl,l("span",null,"replace: "+p(r.pctReplace)+"%",1),Ul,l("span",null,"guideWords: "+p(r.guideWords.slice(0,20)),1),s(xe,{height:"200px",src:r.imgs[r.imgIdx].url,onClick:q=>e.loadPageCB(k)},null,8,["src","onClick"]),s($,{onClick:q=>e.prevImg(k),icon:"arrow_left"},{default:n(()=>[_("Back")]),_:2},1032,["onClick"]),s($,{class:"float-right",onClick:q=>e.nextImg(k),"icon-right":"arrow_right"},{default:n(()=>[_("Next")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["modelValue"]))),128))])):J("",!0)]),_:1})]),_:1})],64)}var Hl=ae(ll,[["render",Ol]]);const Rl=se({name:"TeacherLayout",components:{PagerComponent:Hl,CurrentCourse:ol,DocumentationComponent:fs,SearchComponent:qs,ImagesComponent:xa,BookmarksComponent:Xa,OTDComponent:vo,CurrentAssignment:Uo,PreferencesComponent:ts,CurrentPage:Ca,AssignmentStatus:ps},setup(){const e=c(!1),a=c(!1),h=oe(),y=h.preferences,D=c(null),M=c(null);return{step:c(1),reStore:h,initialValues:c(y),scrollAreaRHS:D,scrollAreaLHS:M,leftDrawerOpen:e,rightDrawerOpen:a,flagName:c(h.langVoices[h.preferences.langVoiceKey].flagName),promptLanguage:c(!1),langVoices:c(h.preferences.langVoices),toggleLeftDrawer(){e.value=!e.value},toggleRightDrawer(){a.value=!a.value}}},mounted(){St.isActive||(St.toggle(),st("primary","#333"),st("secondary",this.initialValues.secondaryColor),st("accent",this.initialValues.accentColor),this.flagName=this.reStore.langVoices[this.reStore.prefereneces.langVoiceKey].flagName,te(".pfi").classed(this.flagName,!0))},methods:{goEditor(){this.reStore.mode="editor",this.reStore.router.push("/teacher/editor")},goAssignment(){this.reStore.mode="assignment",this.reStore.router.push("/teacher/assignment")},setRHS(e){e==="pager"?(N("#advancedDiv").classed("hidden",!0),N("#pagerDiv").classed("hidden",!1),N("#statusDiv").classed("hidden",!0)):e==="status"?(N("#advancedDiv").classed("hidden",!0),N("#pagerDiv").classed("hidden",!0),N("#statusDiv").classed("hidden",!1)):(N("#advancedDiv").classed("hidden",!1),N("#pagerDiv").classed("hidden",!0),N("#statusDiv").classed("hidden",!0))},scrollTopRHS(){this.scrollAreaRHS.setScrollPosition("vertical",0)},scrollTopLHS(){this.scrollAreaLHS.setScrollPosition("vertical",0)},setLangVoiceCB(e){this.flagName=this.reStore.langVoices[e].flagName;for(const[a,h]of Object.entries(this.reStore.langVoices)){const y=h.flagName;te(".pfi").classed(y,!1)}te(".pfi").classed(this.flagName,!0),console.log("langVoiceKey set to ",e,this.flagName),this.reStore.courses.trigger+=1}}}),Ql=l("div",{class:"text-h6"},"Set Current Language",-1),Ll={width:"100%"},zl=l("span",{class:"pfi fi fi-xx"},null,-1),Fl=l("br",null,null,-1),Yl=l("br",null,null,-1),jl={class:"dashboard-wrapper"},El=l("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),Wl={class:"hidden"},Jl=l("hr",{style:{margin:"0px 0px",border:"1px solid #CCC3"}},null,-1),Gl={id:"pagerDiv"},Xl={key:0},Zl={key:1},en={class:"q-gutter-y-sm"},tn={id:"advancedDiv",class:"hidden"},sn={class:"hidden"},an={key:0},on={key:1},ln={class:"q-gutter-y-sm"},nn={id:"statusDiv",class:"hidden"},rn={key:0},dn={key:1},un={class:"q-gutter-y-sm"};function cn(e,a,h,y,D,M){const d=U("router-link"),r=U("router-view"),k=U("DocumentationComponent"),q=U("SearchComponent"),Z=U("BookmarksComponent"),fe=U("OTDComponent"),Oe=U("ImagesComponent"),He=U("PreferencesComponent"),$e=U("PagerComponent"),ee=U("CurrentCourse"),B=U("CurrentAssignment"),Re=U("CurrentPage"),Qe=U("AssignmentStatus");return u(),F(ds,{view:"hHh LpR fFf"},{default:n(()=>[s(is,{flat:"",bordered:"",class:"bg-primary text-white","height-hint":"98"},{default:n(()=>[s(ue,{modelValue:e.promptLanguage,"onUpdate:modelValue":a[1]||(a[1]=P=>e.promptLanguage=P),persistent:""},{default:n(()=>[s(T,{style:{"min-width":"350px"}},{default:n(()=>[s(A,null,{default:n(()=>[Ql]),_:1}),s(A,{class:"q-pt-none"},{default:n(()=>[l("table",Ll,[l("tr",null,[l("td",null,[s(Tt,{modelValue:this.reStore.preferences.langVoiceKey,"onUpdate:modelValue":[a[0]||(a[0]=P=>this.reStore.preferences.langVoiceKey=P),this.setLangVoiceCB],options:e.langVoices},null,8,["modelValue","options","onUpdate:modelValue"])])])])]),_:1}),s(de,{align:"right",class:"text-white"},{default:n(()=>[O(s($,{outline:"",flat:"",label:"Close"},null,512),[[H]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(Se,null,{default:n(()=>[s($,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),s(ns,null,{default:n(()=>[s(d,{to:"/teacher"},{default:n(()=>[s(V,{name:"home",color:"white"},{default:n(()=>[s(I,null,{default:n(()=>[_("Return to My Teacher Page")]),_:1})]),_:1})]),_:1})]),_:1}),s($,{onClick:a[2]||(a[2]=P=>e.promptLanguage=!0)},{default:n(()=>[zl,s(I,null,{default:n(()=>[_("Set current language "),Fl,_("Applied to new pages/searches."),Yl,_("Sync current page using sync-lang button.")]),_:1})]),_:1}),this.reStore.mode=="assignment"?(u(),F($,{key:0,onClick:a[3]||(a[3]=P=>this.goEditor()),icon:"switch_account"},{default:n(()=>[s(I,null,{default:n(()=>[_(" Editor Mode ")]),_:1})]),_:1})):this.reStore.mode=="editor"?(u(),F($,{key:1,onClick:a[4]||(a[4]=P=>this.goAssignment()),icon:"switch_account"},{default:n(()=>[s(I,null,{default:n(()=>[_(" Assignment Mode ")]),_:1})]),_:1})):J("",!0),this.reStore.authenticated?(u(),F($,{key:2,onClick:a[5]||(a[5]=P=>this.reStore.router.push("/student")),icon:"switch_account"},{default:n(()=>[s(I,null,{default:n(()=>[_(" Switch between Teacher or Student role ")]),_:1})]),_:1})):J("",!0),this.reStore.authenticated?(u(),F($,{key:3,icon:"logout",onClick:a[6]||(a[6]=P=>this.reStore.logout())})):J("",!0),s($,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleRightDrawer},null,8,["onClick"])]),_:1})]),_:1}),s(rs,{class:"container-fluid"},{default:n(()=>[l("div",jl,[s(r)]),s(kt,{bordered:"","show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":a[7]||(a[7]=P=>e.leftDrawerOpen=P),side:"left"},{default:n(()=>[s(Se,{flat:"",class:"bg-primary text-white"},{default:n(()=>[s(Ne),s($,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopLHS},{default:n(()=>[s(I,null,{default:n(()=>[_("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),El,s($t,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaLHS"},{default:n(()=>[s(k),s(q),s(Z),s(fe),s(Oe),s(He,{initialValues:this.initialValues},null,8,["initialValues"])]),_:1},8,["visible"])]),_:1},8,["modelValue"]),s(kt,{bordered:"","show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":a[11]||(a[11]=P=>e.rightDrawerOpen=P),side:"right"},{default:n(()=>[s(Se,{flat:"",class:"bg-primary text-white"},{default:n(()=>[l("span",Wl,[s($,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),s(bt,{dark:"",vertical:"",inset:""}),s($,{flat:"",round:"",dense:"",icon:"add",class:"q-mx-md"}),s(bt,{dark:"",vertical:"",inset:""})]),s(us,{dense:"",align:"left"},{default:n(()=>[s(tt,{icon:"theaters",onClick:a[8]||(a[8]=P=>this.setRHS("pager"))},{default:n(()=>[s(I,null,{default:n(()=>[_("Visual Assignment Builder")]),_:1})]),_:1}),s(tt,{icon:"handyman",onClick:a[9]||(a[9]=P=>this.setRHS("advanced"))},{default:n(()=>[s(I,null,{default:n(()=>[_("Detailed assignment configuration")]),_:1})]),_:1}),s(tt,{icon:"summarize",onClick:a[10]||(a[10]=P=>this.setRHS("status"))},{default:n(()=>[s(I,null,{default:n(()=>[_("Status while taking assignment")]),_:1})]),_:1})]),_:1}),s(Ne),s($,{flat:"",round:"",dense:"",icon:"arrow_circle_up",class:"float-right",onClick:this.scrollTopRHS},{default:n(()=>[s(I,null,{default:n(()=>[_("Scroll to top")]),_:1})]),_:1},8,["onClick"])]),_:1}),Jl,s($t,{visible:e.visible,style:{height:"90vh","max-width":"350px"},ref:"scrollAreaRHS"},{default:n(()=>[l("div",Gl,[this.reStore.courses.aid?(u(),g("span",Xl,[s($e)])):(u(),g("span",Zl,[l("div",en,[s(T,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:n(()=>[_(" No current assignment. You can load an assignment at the "),l("u",null,[s(d,{to:"/teacher",class:"text-white ptr"},{default:n(()=>[_("Teacher Dashboard")]),_:1})]),_(". ")]),_:1})])]))]),l("div",tn,[l("span",sn,[s(ee)]),this.reStore.courses.aid?(u(),g("span",an,[s(B),s(Re)])):(u(),g("span",on,[l("div",ln,[s(T,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:n(()=>[_(" No current assignment. You can load an assignment at the "),l("u",null,[s(d,{to:"/teacher",class:"text-white ptr"},{default:n(()=>[_("Teacher Dashboard")]),_:1})]),_(". ")]),_:1})])]))]),l("div",nn,[this.reStore.courses.aid?(u(),g("span",rn,[s(Qe)])):(u(),g("span",dn,[l("div",un,[s(T,{flat:"",bordered:"",class:"q-ma-sm q-mt-md q-pa-md"},{default:n(()=>[_(" No current assignment. You can load an assignment at the "),l("u",null,[s(d,{to:"/teacher",class:"text-white ptr"},{default:n(()=>[_("Teacher Dashboard")]),_:1})]),_(". ")]),_:1})])]))])]),_:1},8,["visible"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}var Nn=ae(Rl,[["render",cn]]);export{Nn as default};
