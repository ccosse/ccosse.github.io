import{Q as k}from"./QCardSection.ec128f6d.js";import{Q as U}from"./QInput.528bd173.js";import{d as V,_ as D,r as p,o as s,E as f,I as v,R as q,a as e,w as o,S as I,F as i,v as d,P as K,T as L,U as _,Q as n,c as h,G as a,V as g}from"./index.a75cd14a.js";import{Q as O,a as R,C as Q}from"./ClosePopup.2ad056f1.js";import{Q as w}from"./QCard.1958fbd9.js";import{Q as y}from"./QSpace.028a487c.js";import{Q as C}from"./QTooltip.09e64520.js";import{Q as A,a as N,b}from"./QDrawer.fdfaea24.js";import{Q as $}from"./QScrollArea.7e6e42c9.js";import{Q as W,a as F}from"./QLayout.792d9355.js";import{u as P}from"./store.cfec8d35.js";import{T as H}from"./TileComponent.f17abcfb.js";import{W as G}from"./WPComponent.17f6660e.js";import{P as j}from"./PreferencesComponent.e4ca6fbc.js";import"./use-dark.66025dda.js";import"./uid.42677368.js";import"./focusout.10e086b2.js";import"./use-form.9c806992.js";import"./use-prevent-scroll.bc690f37.js";import"./scroll.ab0372d2.js";import"./use-model-toggle.a1d88a19.js";import"./position-engine.61bb1987.js";import"./touch.d2ed2c9a.js";import"./TouchPan.8f8a14fa.js";import"./firebase.f7873474.js";import"./axios.84ae42e4.js";import"./QImg.fd8c3e05.js";import"./QMenu.e8aaec7b.js";import"./QKnob.0fc5878f.js";import"./QSelect.2ce7a9de.js";import"./QExpansionItem.a537fdf6.js";import"./QBar.65eb28d8.js";import"./QList.c9aaf181.js";import"./transform.9aa67f3e.js";import"./selectAll.be636dd1.js";import"./QToggle.26d38340.js";const z=V({name:"CoursePager",components:{TileComponent:H},props:[],setup(){return{store:P()}},methods:{}}),M=i("div",{class:"text-panel q-ma-md text-center text-h6"},"My Courses",-1);function J(r,t,x,B,S,T){const c=p("TileComponent");return s(),f(v,null,[M,(s(!0),f(v,null,q(this.store.courses,(u,m)=>(s(),f("span",{key:m},[e(c,{tileData:u,imgUrl:u.coverUrl,targetUrl:null,ck:m,aid:null,pgIdx:null,imgIdx:null,tileType:"course"},null,8,["tileData","imgUrl","ck"])]))),128)),e(w,{flat:"",bordered:"",class:"q-ma-md q-pa-md cursor-pointer tile-component flex flex-center",onClick:t[0]||(t[0]=u=>this.store.newCourse())},{default:o(()=>[e(I,{name:"add",class:"text-h1"})]),_:1})],64)}var X=D(z,[["render",J]]);const Y=V({name:"CoursesLayout",components:{CoursePager:X,WPComponent:G,PreferencesComponent:j},setup(){const r=d(!1),t=d(!1);return{store:P(),courseKey:d(null),promptEnroll:d(!1),leftDrawerOpen:r,toggleLeftDrawer(){r.value=!r.value},rightDrawerOpen:t,toggleRightDrawer(){t.value=!t.value}}},mounted(){K.isActive,this.store.initSpeech()},methods:{goBack(){this.store.ck!==null&&(this.store.ck=null,this.store.aid=null,this.store.pgIdx=null,this.store.imgIdx=null),this.store.router.replace("/courses")},enrollCB(){const r=this.store.enroll(this.courseKey);console.log(r)}}}),Z=i("div",{class:"text-h6"},"Enter a course-key",-1),ee=i("br",null,null,-1),te=i("br",null,null,-1),oe=i("br",null,null,-1),re=i("div",{class:"text-panel q-ma-md text-center text-h6"},"App Sections",-1);function le(r,t,x,B,S,T){const c=p("WPComponent"),u=p("PreferencesComponent"),m=p("CoursePager"),E=p("router-view");return s(),f(v,null,[e(O,{modelValue:r.promptEnroll,"onUpdate:modelValue":t[3]||(t[3]=l=>r.promptEnroll=l),persistent:""},{default:o(()=>[e(w,{style:{"min-width":"350px"}},{default:o(()=>[e(k,null,{default:o(()=>[Z]),_:1}),e(k,{class:"q-pt-none"},{default:o(()=>[e(U,{dense:"",modelValue:r.courseKey,"onUpdate:modelValue":t[0]||(t[0]=l=>r.courseKey=l),autofocus:"",onKeyup:t[1]||(t[1]=L(l=>{r.prompt=!1,this.enrollCB()},["enter"]))},null,8,["modelValue"])]),_:1}),e(R,{align:"right",class:"text-white"},{default:o(()=>[_(e(n,{flat:"",label:"Cancel"},null,512),[[Q]]),_(e(n,{flat:"",label:"Enroll",onClick:t[2]||(t[2]=l=>this.enrollCB())},null,512),[[Q]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,{view:"hHh lpR fFf"},{default:o(()=>[e(A,{bordered:"",class:"bg-positive text-white"},{default:o(()=>[e(N,null,{default:o(()=>[e(n,{flat:"",round:"",icon:"menu",onClick:r.toggleLeftDrawer},null,8,["onClick"]),e(y),this.store.ck!==null?(s(),h(n,{key:0,flat:"",round:"",icon:"north",onClick:t[4]||(t[4]=l=>this.goBack())},{default:o(()=>[e(C,{style:{backgroundColor:"#222",fontSize:"12pt"}},{default:o(()=>[e(w,{bordered:"",flat:"",class:"q-ma-xs q-pa-sm"},{default:o(()=>[a(" Go back / up a level in the "),ee,a("course-assignment-page "),te,a("hierarchy ")]),_:1})]),_:1})]),_:1})):g("",!0),e(y),this.store.role==="student"?(s(),h(n,{key:1,flat:"",round:"",class:"on-left",icon:"group_add",onClick:t[5]||(t[5]=l=>r.promptEnroll=!0)},{default:o(()=>[e(C,null,{default:o(()=>[a("Have a course-key? Enter it here"),oe,a("to join your course.")]),_:1})]),_:1})):g("",!0),this.store.authenticated?(s(),h(n,{key:2,flat:"",round:"",icon:"switch_account",onClick:t[6]||(t[6]=l=>this.store.switchRole())},{default:o(()=>[e(C,null,{default:o(()=>[a(" Switch between Teacher or Student role ")]),_:1})]),_:1})):g("",!0),e(n,{flat:"",round:"",icon:"logout",onClick:t[7]||(t[7]=l=>this.store.logout())}),e(n,{flat:"",round:"",icon:"menu",onClick:r.toggleRightDrawer},null,8,["onClick"])]),_:1})]),_:1}),e(b,{"show-if-above":"",modelValue:r.leftDrawerOpen,"onUpdate:modelValue":t[8]||(t[8]=l=>r.leftDrawerOpen=l),side:"left",bordered:""},{default:o(()=>[e($,{style:{height:"94vh"}},{default:o(()=>[re,e(c),e(u)]),_:1})]),_:1},8,["modelValue"]),e(b,{"show-if-above":"",modelValue:r.rightDrawerOpen,"onUpdate:modelValue":t[9]||(t[9]=l=>r.rightDrawerOpen=l),side:"right",bordered:""},{default:o(()=>[e($,{style:{height:"94vh"}},{default:o(()=>[e(m)]),_:1})]),_:1},8,["modelValue"]),e(F,null,{default:o(()=>[e(E)]),_:1})]),_:1})],64)}var Ae=D(Y,[["render",le]]);export{Ae as default};
